/*! For license information please see main.fcad1164.js.LICENSE.txt */
(()=>{var e={4:(e,t,i)=>{"use strict";var r=i(853),n=i(43),o=i(569);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(i=t.return),e=t.return}while(e)}return 3===t.tag?i:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var d=Object.assign,p=Symbol.for("react.element"),f=Symbol.for("react.transitional.element"),m=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),x=Symbol.for("react.consumer"),C=Symbol.for("react.context"),w=Symbol.for("react.forward_ref"),b=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),T=Symbol.for("react.lazy");Symbol.for("react.scope");var M=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var E=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function A(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var k=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===k?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case _:return"Profiler";case y:return"StrictMode";case b:return"Suspense";case S:return"SuspenseList";case M:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case m:return"Portal";case C:return(e.displayName||"Context")+".Provider";case x:return(e._context.displayName||"Context")+".Consumer";case w:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case T:t=e._payload,e=e._init;try{return P(e(t))}catch(i){}}return null}var O=Array.isArray,R=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=o.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D={pending:!1,data:null,method:null,action:null},F=[],B=-1;function V(e){return{current:e}}function N(e){0>B||(e.current=F[B],F[B]=null,B--)}function U(e,t){B++,F[B]=e.current,e.current=t}var j=V(null),H=V(null),Z=V(null),W=V(null);function G(e,t){switch(U(Z,t),U(H,e),U(j,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?nh(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=oh(t=nh(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}N(j),U(j,e)}function q(){N(j),N(H),N(Z)}function X(e){null!==e.memoizedState&&U(W,e);var t=j.current,i=oh(t,e.type);t!==i&&(U(H,e),U(j,i))}function Y(e){H.current===e&&(N(j),N(H)),W.current===e&&(N(W),Xh._currentValue=D)}var K=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,Q=r.unstable_cancelCallback,$=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ie=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,ne=r.unstable_UserBlockingPriority,oe=r.unstable_NormalPriority,ae=r.unstable_LowPriority,se=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,he=null;function de(e){if("function"===typeof le&&ce(e),he&&"function"===typeof he.setStrictMode)try{he.setStrictMode(ue,e)}catch(t){}}var pe=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(fe(e)/me|0)|0},fe=Math.log,me=Math.LN2;var ge=256,ye=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ve(e,t,i){var r=e.pendingLanes;if(0===r)return 0;var n=0,o=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var s=134217727&r;return 0!==s?0!==(r=s&~o)?n=_e(r):0!==(a&=s)?n=_e(a):i||0!==(i=s&~e)&&(n=_e(i)):0!==(s=r&~o)?n=_e(s):0!==a?n=_e(a):i||0!==(i=r&~e)&&(n=_e(i)),0===n?0:0!==t&&t!==n&&0===(t&o)&&((o=n&-n)>=(i=t&-t)||32===o&&0!==(4194048&i))?t:n}function xe(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function we(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function be(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Se(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function Le(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Te(e,t,i){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-pe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&i}function Me(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var r=31-pe(i),n=1<<r;n&t|e[r]&t&&(e[r]|=t),i&=~n}}function Ee(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Ae(){var e=z.p;return 0!==e?e:void 0===(e=window.event)?32:cd(e.type)}var ke=Math.random().toString(36).slice(2),Pe="__reactFiber$"+ke,Oe="__reactProps$"+ke,Re="__reactContainer$"+ke,ze="__reactEvents$"+ke,De="__reactListeners$"+ke,Fe="__reactHandles$"+ke,Be="__reactResources$"+ke,Ve="__reactMarker$"+ke;function Ne(e){delete e[Pe],delete e[Oe],delete e[ze],delete e[De],delete e[Fe]}function Ue(e){var t=e[Pe];if(t)return t;for(var i=e.parentNode;i;){if(t=i[Re]||i[Pe]){if(i=t.alternate,null!==t.child||null!==i&&null!==i.child)for(e=vh(e);null!==e;){if(i=e[Pe])return i;e=vh(e)}return t}i=(e=i).parentNode}return null}function je(e){if(e=e[Pe]||e[Re]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function He(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Be];return t||(t=e[Be]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function We(e){e[Ve]=!0}var Ge=new Set,qe={};function Xe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(qe[e]=t,e=0;e<t.length;e++)Ge.add(t[e])}var Ke,Je,Qe=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),$e={},et={};function tt(e,t,i){if(n=t,K.call(et,n)||!K.call($e,n)&&(Qe.test(n)?et[n]=!0:($e[n]=!0,0)))if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+i)}var n}function it(e,t,i){if(null===i)e.removeAttribute(t);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+i)}}function rt(e,t,i,r){if(null===r)e.removeAttribute(i);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(i)}e.setAttributeNS(t,i,""+r)}}function nt(e){if(void 0===Ke)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);Ke=t&&t[1]||"",Je=-1<i.stack.indexOf("\n    at")?" (<anonymous>)":-1<i.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Ke+e+Je}var ot=!1;function at(e,t){if(!e||ot)return"";ot=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var i=function(){throw Error()};if(Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(i,[])}catch(n){var r=n}Reflect.construct(e,[],i)}else{try{i.call()}catch(o){r=o}e.call(i.prototype)}}else{try{throw Error()}catch(a){r=a}(i=e())&&"function"===typeof i.catch&&i.catch(function(){})}}catch(s){if(s&&r&&"string"===typeof s.stack)return[s.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var n=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");n&&n.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var o=r.DetermineComponentFrameRoot(),a=o[0],s=o[1];if(a&&s){var l=a.split("\n"),c=s.split("\n");for(n=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;n<c.length&&!c[n].includes("DetermineComponentFrameRoot");)n++;if(r===l.length||n===c.length)for(r=l.length-1,n=c.length-1;1<=r&&0<=n&&l[r]!==c[n];)n--;for(;1<=r&&0<=n;r--,n--)if(l[r]!==c[n]){if(1!==r||1!==n)do{if(r--,0>--n||l[r]!==c[n]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=n);break}}}finally{ot=!1,Error.prepareStackTrace=i}return(i=e?e.displayName||e.name:"")?nt(i):""}function st(e){switch(e.tag){case 26:case 27:case 5:return nt(e.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return nt("Activity");default:return""}}function lt(e){try{var t="";do{t+=st(e),e=e.return}while(e);return t}catch(i){return"\nError generating stack: "+i.message+"\n"+i.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ht(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof i&&"function"===typeof i.get&&"function"===typeof i.set){var n=i.get,o=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function dt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==i&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var ft=/[\n"\\]/g;function mt(e){return e.replace(ft,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,i,r,n,o,a,s){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?_t(e,a,ct(t)):null!=i?_t(e,a,ct(i)):null!=r&&e.removeAttribute("value"),null==n&&null!=o&&(e.defaultChecked=!!o),null!=n&&(e.checked=n&&"function"!==typeof n&&"symbol"!==typeof n),null!=s&&"function"!==typeof s&&"symbol"!==typeof s&&"boolean"!==typeof s?e.name=""+ct(s):e.removeAttribute("name")}function yt(e,t,i,r,n,o,a,s){if(null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o&&(e.type=o),null!=t||null!=i){if(!("submit"!==o&&"reset"!==o||void 0!==t&&null!==t))return;i=null!=i?""+ct(i):"",t=null!=t?""+ct(t):i,s||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:n)&&"symbol"!==typeof r&&!!r,e.checked=s?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function _t(e,t,i){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+i||(e.defaultValue=""+i)}function vt(e,t,i,r){if(e=e.options,t){t={};for(var n=0;n<i.length;n++)t["$"+i[n]]=!0;for(i=0;i<e.length;i++)n=t.hasOwnProperty("$"+e[i].value),e[i].selected!==n&&(e[i].selected=n),n&&r&&(e[i].defaultSelected=!0)}else{for(i=""+ct(i),t=null,n=0;n<e.length;n++){if(e[n].value===i)return e[n].selected=!0,void(r&&(e[n].defaultSelected=!0));null!==t||e[n].disabled||(t=e[n])}null!==t&&(t.selected=!0)}}function xt(e,t,i){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=i)?e.defaultValue=null!=i?""+ct(i):"":e.defaultValue!==t&&(e.defaultValue=t)}function Ct(e,t,i,r){if(null==t){if(null!=r){if(null!=i)throw Error(a(92));if(O(r)){if(1<r.length)throw Error(a(93));r=r[0]}i=r}null==i&&(i=""),t=i}i=ct(t),e.defaultValue=i,(r=e.textContent)===i&&""!==r&&null!==r&&(e.value=r)}function wt(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&3===i.nodeType)return void(i.nodeValue=t)}e.textContent=t}var bt=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function St(e,t,i){var r=0===t.indexOf("--");null==i||"boolean"===typeof i||""===i?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,i):"number"!==typeof i||0===i||bt.has(t)?"float"===t?e.cssFloat=i:e[t]=(""+i).trim():e[t]=i+"px"}function Lt(e,t,i){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=i){for(var r in i)!i.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var n in t)r=t[n],t.hasOwnProperty(n)&&i[n]!==r&&St(e,n,r)}else for(var o in t)t.hasOwnProperty(o)&&St(e,o,t[o])}function Tt(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Et=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Et.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var At=null;function kt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Ot=null;function Rt(e){var t=je(e);if(t&&(e=t.stateNode)){var i=e[Oe]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,i.value,i.defaultValue,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name),t=i.name,"radio"===i.type&&null!=t){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll('input[name="'+mt(""+t)+'"][type="radio"]'),t=0;t<i.length;t++){var r=i[t];if(r!==e&&r.form===e.form){var n=r[Oe]||null;if(!n)throw Error(a(90));gt(r,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name)}}for(t=0;t<i.length;t++)(r=i[t]).form===e.form&&dt(r)}break e;case"textarea":xt(e,i.value,i.defaultValue);break e;case"select":null!=(t=i.value)&&vt(e,!!i.multiple,t,!1)}}}var zt=!1;function Dt(e,t,i){if(zt)return e(t,i);zt=!0;try{return e(t)}finally{if(zt=!1,(null!==Pt||null!==Ot)&&(Uc(),Pt&&(t=Pt,e=Ot,Ot=Pt=null,Rt(t),e)))for(t=0;t<e.length;t++)Rt(e[t])}}function Ft(e,t){var i=e.stateNode;if(null===i)return null;var r=i[Oe]||null;if(null===r)return null;i=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(i&&"function"!==typeof i)throw Error(a(231,t,typeof i));return i}var Bt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Vt=!1;if(Bt)try{var Nt={};Object.defineProperty(Nt,"passive",{get:function(){Vt=!0}}),window.addEventListener("test",Nt,Nt),window.removeEventListener("test",Nt,Nt)}catch(Od){Vt=!1}var Ut=null,jt=null,Ht=null;function Zt(){if(Ht)return Ht;var e,t,i=jt,r=i.length,n="value"in Ut?Ut.value:Ut.textContent,o=n.length;for(e=0;e<r&&i[e]===n[e];e++);var a=r-e;for(t=1;t<=a&&i[r-t]===n[o-t];t++);return Ht=n.slice(e,1<t?1-t:void 0)}function Wt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Gt(){return!0}function qt(){return!1}function Xt(e){function t(t,i,r,n,o){for(var a in this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=n,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(n):n[a]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?Gt:qt,this.isPropagationStopped=qt,this}return d(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Gt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Gt)},persist:function(){},isPersistent:Gt}),t}var Yt,Kt,Jt,Qt={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$t=Xt(Qt),ei=d({},Qt,{view:0,detail:0}),ti=Xt(ei),ii=d({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pi,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Kt=e.screenY-Jt.screenY):Kt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Kt}}),ri=Xt(ii),ni=Xt(d({},ii,{dataTransfer:0})),oi=Xt(d({},ei,{relatedTarget:0})),ai=Xt(d({},Qt,{animationName:0,elapsedTime:0,pseudoElement:0})),si=Xt(d({},Qt,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),li=Xt(d({},Qt,{data:0})),ci={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ui={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function di(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hi[e])&&!!t[e]}function pi(){return di}var fi=Xt(d({},ei,{key:function(e){if(e.key){var t=ci[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Wt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?ui[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pi,charCode:function(e){return"keypress"===e.type?Wt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Wt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),mi=Xt(d({},ii,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),gi=Xt(d({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pi})),yi=Xt(d({},Qt,{propertyName:0,elapsedTime:0,pseudoElement:0})),_i=Xt(d({},ii,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),vi=Xt(d({},Qt,{newState:0,oldState:0})),xi=[9,13,27,32],Ci=Bt&&"CompositionEvent"in window,wi=null;Bt&&"documentMode"in document&&(wi=document.documentMode);var bi=Bt&&"TextEvent"in window&&!wi,Si=Bt&&(!Ci||wi&&8<wi&&11>=wi),Li=String.fromCharCode(32),Ti=!1;function Mi(e,t){switch(e){case"keyup":return-1!==xi.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ei(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Ii=!1;var Ai={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ki(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Ai[e.type]:"textarea"===t}function Pi(e,t,i,r){Pt?Ot?Ot.push(r):Ot=[r]:Pt=r,0<(t=Zu(t,"onChange")).length&&(i=new $t("onChange","change",null,i,r),e.push({event:i,listeners:t}))}var Oi=null,Ri=null;function zi(e){Du(e,0)}function Di(e){if(dt(He(e)))return e}function Fi(e,t){if("change"===e)return t}var Bi=!1;if(Bt){var Vi;if(Bt){var Ni="oninput"in document;if(!Ni){var Ui=document.createElement("div");Ui.setAttribute("oninput","return;"),Ni="function"===typeof Ui.oninput}Vi=Ni}else Vi=!1;Bi=Vi&&(!document.documentMode||9<document.documentMode)}function ji(){Oi&&(Oi.detachEvent("onpropertychange",Hi),Ri=Oi=null)}function Hi(e){if("value"===e.propertyName&&Di(Ri)){var t=[];Pi(t,Ri,e,kt(e)),Dt(zi,t)}}function Zi(e,t,i){"focusin"===e?(ji(),Ri=i,(Oi=t).attachEvent("onpropertychange",Hi)):"focusout"===e&&ji()}function Wi(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Di(Ri)}function Gi(e,t){if("click"===e)return Di(t)}function qi(e,t){if("input"===e||"change"===e)return Di(t)}var Xi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Yi(e,t){if(Xi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(r=0;r<i.length;r++){var n=i[r];if(!K.call(t,n)||!Xi(e[n],t[n]))return!1}return!0}function Ki(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ji(e,t){var i,r=Ki(e);for(e=0;r;){if(3===r.nodeType){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ki(r)}}function Qi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Qi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function $i(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var i="string"===typeof t.contentWindow.location.href}catch(r){i=!1}if(!i)break;t=pt((e=t.contentWindow).document)}return t}function er(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var tr=Bt&&"documentMode"in document&&11>=document.documentMode,ir=null,rr=null,nr=null,or=!1;function ar(e,t,i){var r=i.window===i?i.document:9===i.nodeType?i:i.ownerDocument;or||null==ir||ir!==pt(r)||("selectionStart"in(r=ir)&&er(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},nr&&Yi(nr,r)||(nr=r,0<(r=Zu(rr,"onSelect")).length&&(t=new $t("onSelect","select",null,t,i),e.push({event:t,listeners:r}),t.target=ir)))}function sr(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var lr={animationend:sr("Animation","AnimationEnd"),animationiteration:sr("Animation","AnimationIteration"),animationstart:sr("Animation","AnimationStart"),transitionrun:sr("Transition","TransitionRun"),transitionstart:sr("Transition","TransitionStart"),transitioncancel:sr("Transition","TransitionCancel"),transitionend:sr("Transition","TransitionEnd")},cr={},ur={};function hr(e){if(cr[e])return cr[e];if(!lr[e])return e;var t,i=lr[e];for(t in i)if(i.hasOwnProperty(t)&&t in ur)return cr[e]=i[t];return e}Bt&&(ur=document.createElement("div").style,"AnimationEvent"in window||(delete lr.animationend.animation,delete lr.animationiteration.animation,delete lr.animationstart.animation),"TransitionEvent"in window||delete lr.transitionend.transition);var dr=hr("animationend"),pr=hr("animationiteration"),fr=hr("animationstart"),mr=hr("transitionrun"),gr=hr("transitionstart"),yr=hr("transitioncancel"),_r=hr("transitionend"),vr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Cr(e,t){vr.set(e,t),Xe(t,[e])}xr.push("scrollEnd");var wr=new WeakMap;function br(e,t){if("object"===typeof e&&null!==e){var i=wr.get(e);return void 0!==i?i:(t={value:e,source:t,stack:lt(t)},wr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var Sr=[],Lr=0,Tr=0;function Mr(){for(var e=Lr,t=Tr=Lr=0;t<e;){var i=Sr[t];Sr[t++]=null;var r=Sr[t];Sr[t++]=null;var n=Sr[t];Sr[t++]=null;var o=Sr[t];if(Sr[t++]=null,null!==r&&null!==n){var a=r.pending;null===a?n.next=n:(n.next=a.next,a.next=n),r.pending=n}0!==o&&kr(i,n,o)}}function Er(e,t,i,r){Sr[Lr++]=e,Sr[Lr++]=t,Sr[Lr++]=i,Sr[Lr++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Ir(e,t,i,r){return Er(e,t,i,r),Pr(e)}function Ar(e,t){return Er(e,null,null,t),Pr(e)}function kr(e,t,i){e.lanes|=i;var r=e.alternate;null!==r&&(r.lanes|=i);for(var n=!1,o=e.return;null!==o;)o.childLanes|=i,null!==(r=o.alternate)&&(r.childLanes|=i),22===o.tag&&(null===(e=o.stateNode)||1&e._visibility||(n=!0)),e=o,o=o.return;return 3===e.tag?(o=e.stateNode,n&&null!==t&&(n=31-pe(i),null===(r=(e=o.hiddenUpdates)[n])?e[n]=[t]:r.push(t),t.lane=536870912|i),o):null}function Pr(e){if(50<Pc)throw Pc=0,Oc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Or={};function Rr(e,t,i,r){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zr(e,t,i,r){return new Rr(e,t,i,r)}function Dr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var i=e.alternate;return null===i?((i=zr(e.tag,t,e.key,e.mode)).elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=65011712&e.flags,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i.refCleanup=e.refCleanup,i}function Br(e,t){e.flags&=65011714;var i=e.alternate;return null===i?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=i.childLanes,e.lanes=i.lanes,e.child=i.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=i.memoizedProps,e.memoizedState=i.memoizedState,e.updateQueue=i.updateQueue,e.type=i.type,t=i.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,i,r,n,o){var s=0;if(r=e,"function"===typeof e)Dr(e)&&(s=1);else if("string"===typeof e)s=function(e,t,i){if(1===i||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,i,j.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case M:return(e=zr(31,i,t,n)).elementType=M,e.lanes=o,e;case g:return Nr(i.children,n,o,t);case y:s=8,n|=24;break;case _:return(e=zr(12,i,t,2|n)).elementType=_,e.lanes=o,e;case b:return(e=zr(13,i,t,n)).elementType=b,e.lanes=o,e;case S:return(e=zr(19,i,t,n)).elementType=S,e.lanes=o,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case v:case C:s=10;break e;case x:s=9;break e;case w:s=11;break e;case L:s=14;break e;case T:s=16,r=null;break e}s=29,i=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=zr(s,i,t,n)).elementType=e,t.type=r,t.lanes=o,t}function Nr(e,t,i,r){return(e=zr(7,e,r,t)).lanes=i,e}function Ur(e,t,i){return(e=zr(6,e,null,t)).lanes=i,e}function jr(e,t,i){return(t=zr(4,null!==e.children?e.children:[],e.key,t)).lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Zr=0,Wr=null,Gr=0,qr=[],Xr=0,Yr=null,Kr=1,Jr="";function Qr(e,t){Hr[Zr++]=Gr,Hr[Zr++]=Wr,Wr=e,Gr=t}function $r(e,t,i){qr[Xr++]=Kr,qr[Xr++]=Jr,qr[Xr++]=Yr,Yr=e;var r=Kr;e=Jr;var n=32-pe(r)-1;r&=~(1<<n),i+=1;var o=32-pe(t)+n;if(30<o){var a=n-n%5;o=(r&(1<<a)-1).toString(32),r>>=a,n-=a,Kr=1<<32-pe(t)+n|i<<n|r,Jr=o+e}else Kr=1<<o|i<<n|r,Jr=e}function en(e){null!==e.return&&(Qr(e,1),$r(e,1,0))}function tn(e){for(;e===Wr;)Wr=Hr[--Zr],Hr[Zr]=null,Gr=Hr[--Zr],Hr[Zr]=null;for(;e===Yr;)Yr=qr[--Xr],qr[Xr]=null,Jr=qr[--Xr],qr[Xr]=null,Kr=qr[--Xr],qr[Xr]=null}var rn=null,nn=null,on=!1,an=null,sn=!1,ln=Error(a(519));function cn(e){throw mn(br(Error(a(418,"")),e)),ln}function un(e){var t=e.stateNode,i=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Oe]=r,i){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(i=0;i<Ru.length;i++)Fu(Ru[i],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),ht(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),Ct(t,r.value,r.defaultValue,r.children),ht(t)}"string"!==typeof(i=r.children)&&"number"!==typeof i&&"bigint"!==typeof i||t.textContent===""+i||!0===r.suppressHydrationWarning||Ku(t.textContent,i)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=Ju),t=!0):t=!1,t||cn(e)}function hn(e){for(rn=e.return;rn;)switch(rn.tag){case 5:case 13:return void(sn=!1);case 27:case 3:return void(sn=!0);default:rn=rn.return}}function dn(e){if(e!==rn)return!1;if(!on)return hn(e),on=!0,!1;var t,i=e.tag;if((t=3!==i&&27!==i)&&((t=5===i)&&(t=!("form"!==(t=e.type)&&"button"!==t)||ah(e.type,e.memoizedProps)),t=!t),t&&nn&&cn(e),hn(e),13===i){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,i=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===i){nn=yh(e.nextSibling);break e}i--}else"$"!==t&&"$!"!==t&&"$?"!==t||i++;e=e.nextSibling}nn=null}}else 27===i?(i=nn,ph(e.type)?(e=_h,_h=null,nn=e):nn=i):nn=rn?yh(e.stateNode.nextSibling):null;return!0}function pn(){nn=rn=null,on=!1}function fn(){var e=an;return null!==e&&(null===vc?vc=e:vc.push.apply(vc,e),an=null),e}function mn(e){null===an?an=[e]:an.push(e)}var gn=V(null),yn=null,_n=null;function vn(e,t,i){U(gn,t._currentValue),t._currentValue=i}function xn(e){e._currentValue=gn.current,N(gn)}function Cn(e,t,i){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===i)break;e=e.return}}function wn(e,t,i,r){var n=e.child;for(null!==n&&(n.return=e);null!==n;){var o=n.dependencies;if(null!==o){var s=n.child;o=o.firstContext;e:for(;null!==o;){var l=o;o=n;for(var c=0;c<t.length;c++)if(l.context===t[c]){o.lanes|=i,null!==(l=o.alternate)&&(l.lanes|=i),Cn(o.return,i,e),r||(s=null);break e}o=l.next}}else if(18===n.tag){if(null===(s=n.return))throw Error(a(341));s.lanes|=i,null!==(o=s.alternate)&&(o.lanes|=i),Cn(s,i,e),s=null}else s=n.child;if(null!==s)s.return=n;else for(s=n;null!==s;){if(s===e){s=null;break}if(null!==(n=s.sibling)){n.return=s.return,s=n;break}s=s.return}n=s}}function bn(e,t,i,r){e=null;for(var n=t,o=!1;null!==n;){if(!o)if(0!==(524288&n.flags))o=!0;else if(0!==(262144&n.flags))break;if(10===n.tag){var s=n.alternate;if(null===s)throw Error(a(387));if(null!==(s=s.memoizedProps)){var l=n.type;Xi(n.pendingProps.value,s.value)||(null!==e?e.push(l):e=[l])}}else if(n===W.current){if(null===(s=n.alternate))throw Error(a(387));s.memoizedState.memoizedState!==n.memoizedState.memoizedState&&(null!==e?e.push(Xh):e=[Xh])}n=n.return}null!==e&&wn(t,e,i,r),t.flags|=262144}function Sn(e){for(e=e.firstContext;null!==e;){if(!Xi(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ln(e){yn=e,_n=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Tn(e){return En(yn,e)}function Mn(e,t){return null===yn&&Ln(e),En(e,t)}function En(e,t){var i=t._currentValue;if(t={context:t,memoizedValue:i,next:null},null===_n){if(null===e)throw Error(a(308));_n=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else _n=_n.next=t;return i}var In="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},An=r.unstable_scheduleCallback,kn=r.unstable_NormalPriority,Pn={$$typeof:C,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function On(){return{controller:new In,data:new Map,refCount:0}}function Rn(e){e.refCount--,0===e.refCount&&An(kn,function(){e.controller.abort()})}var zn=null,Dn=0,Fn=0,Bn=null;function Vn(){if(0===--Dn&&null!==zn){null!==Bn&&(Bn.status="fulfilled");var e=zn;zn=null,Fn=0,Bn=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Nn=R.S;R.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===zn){var i=zn=[];Dn=0,Fn=Iu(),Bn={status:"pending",value:void 0,then:function(e){i.push(e)}}}Dn++,t.then(Vn,Vn)}(0,t),null!==Nn&&Nn(e,t)};var Un=V(null);function jn(){var e=Un.current;return null!==e?e:rc.pooledCache}function Hn(e,t){U(Un,null===t?Un.current:t.pool)}function Zn(){var e=jn();return null===e?null:{parent:Pn._currentValue,pool:e}}var Wn=Error(a(460)),Gn=Error(a(474)),qn=Error(a(542)),Xn={then:function(){}};function Yn(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Kn(){}function Jn(e,t,i){switch(void 0===(i=e[i])?e.push(t):i!==t&&(t.then(Kn,Kn),t=i),t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e;default:if("string"===typeof t.status)t.then(Kn,Kn);else{if(null!==(e=rc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var i=t;i.status="fulfilled",i.value=e}},function(e){if("pending"===t.status){var i=t;i.status="rejected",i.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw eo(e=t.reason),e}throw Qn=t,Wn}}var Qn=null;function $n(){if(null===Qn)throw Error(a(459));var e=Qn;return Qn=null,e}function eo(e){if(e===Wn||e===qn)throw Error(a(483))}var to=!1;function io(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ro(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function no(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function oo(e,t,i){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&ic)){var n=r.pending;return null===n?t.next=t:(t.next=n.next,n.next=t),r.pending=t,t=Pr(e),kr(e,null,i),t}return Er(e,r,t,i),Pr(e)}function ao(e,t,i){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&i))){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Me(e,i)}}function so(e,t){var i=e.updateQueue,r=e.alternate;if(null!==r&&i===(r=r.updateQueue)){var n=null,o=null;if(null!==(i=i.firstBaseUpdate)){do{var a={lane:i.lane,tag:i.tag,payload:i.payload,callback:null,next:null};null===o?n=o=a:o=o.next=a,i=i.next}while(null!==i);null===o?n=o=t:o=o.next=t}else n=o=t;return i={baseState:r.baseState,firstBaseUpdate:n,lastBaseUpdate:o,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=i)}null===(e=i.lastBaseUpdate)?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}var lo=!1;function co(){if(lo){if(null!==Bn)throw Bn}}function uo(e,t,i,r){lo=!1;var n=e.updateQueue;to=!1;var o=n.firstBaseUpdate,a=n.lastBaseUpdate,s=n.shared.pending;if(null!==s){n.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=n.baseState;for(a=0,u=c=l=null,s=o;;){var p=-536870913&s.lane,f=p!==s.lane;if(f?(oc&p)===p:(r&p)===p){0!==p&&p===Fn&&(lo=!0),null!==u&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var m=e,g=s;p=t;var y=i;switch(g.tag){case 1:if("function"===typeof(m=g.payload)){h=m.call(y,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(p="function"===typeof(m=g.payload)?m.call(y,h,p):m)||void 0===p)break e;h=d({},h,p);break e;case 2:to=!0}}null!==(p=s.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=n.callbacks)?n.callbacks=[p]:f.push(p))}else f={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=p;if(null===(s=s.next)){if(null===(s=n.shared.pending))break;s=(f=s).next,f.next=null,n.lastBaseUpdate=f,n.shared.pending=null}}null===u&&(l=h),n.baseState=l,n.firstBaseUpdate=c,n.lastBaseUpdate=u,null===o&&(n.shared.lanes=0),pc|=a,e.lanes=a,e.memoizedState=h}}function ho(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function po(e,t){var i=e.callbacks;if(null!==i)for(e.callbacks=null,e=0;e<i.length;e++)ho(i[e],t)}var fo=V(null),mo=V(0);function go(e,t){U(mo,e=hc),U(fo,t),hc=e|t.baseLanes}function yo(){U(mo,hc),U(fo,fo.current)}function _o(){hc=mo.current,N(fo),N(mo)}var vo=0,xo=null,Co=null,wo=null,bo=!1,So=!1,Lo=!1,To=0,Mo=0,Eo=null,Io=0;function Ao(){throw Error(a(321))}function ko(e,t){if(null===t)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Xi(e[i],t[i]))return!1;return!0}function Po(e,t,i,r,n,o){return vo=o,xo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,R.H=null===e||null===e.memoizedState?Ga:qa,Lo=!1,o=i(r,n),Lo=!1,So&&(o=Ro(t,i,r,n)),Oo(e),o}function Oo(e){R.H=Wa;var t=null!==Co&&null!==Co.next;if(vo=0,wo=Co=xo=null,bo=!1,Mo=0,Eo=null,t)throw Error(a(300));null===e||Ms||null!==(e=e.dependencies)&&Sn(e)&&(Ms=!0)}function Ro(e,t,i,r){xo=e;var n=0;do{if(So&&(Eo=null),Mo=0,So=!1,25<=n)throw Error(a(301));if(n+=1,wo=Co=null,null!=e.updateQueue){var o=e.updateQueue;o.lastEffect=null,o.events=null,o.stores=null,null!=o.memoCache&&(o.memoCache.index=0)}R.H=Xa,o=t(i,r)}while(So);return o}function zo(){var e=R.H,t=e.useState()[0];return t="function"===typeof t.then?Uo(t):t,e=e.useState()[0],(null!==Co?Co.memoizedState:null)!==e&&(xo.flags|=1024),t}function Do(){var e=0!==To;return To=0,e}function Fo(e,t,i){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i}function Bo(e){if(bo){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}bo=!1}vo=0,wo=Co=xo=null,So=!1,Mo=To=0,Eo=null}function Vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===wo?xo.memoizedState=wo=e:wo=wo.next=e,wo}function No(){if(null===Co){var e=xo.alternate;e=null!==e?e.memoizedState:null}else e=Co.next;var t=null===wo?xo.memoizedState:wo.next;if(null!==t)wo=t,Co=e;else{if(null===e){if(null===xo.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Co=e).memoizedState,baseState:Co.baseState,baseQueue:Co.baseQueue,queue:Co.queue,next:null},null===wo?xo.memoizedState=wo=e:wo=wo.next=e}return wo}function Uo(e){var t=Mo;return Mo+=1,null===Eo&&(Eo=[]),e=Jn(Eo,e,t),t=xo,null===(null===wo?t.memoizedState:wo.next)&&(t=t.alternate,R.H=null===t||null===t.memoizedState?Ga:qa),e}function jo(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return Uo(e);if(e.$$typeof===C)return Tn(e)}throw Error(a(438,String(e)))}function Ho(e){var t=null,i=xo.updateQueue;if(null!==i&&(t=i.memoCache),null==t){var r=xo.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===i&&(i={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=i),i.memoCache=t,void 0===(i=t.data[t.index]))for(i=t.data[t.index]=Array(e),r=0;r<e;r++)i[r]=E;return t.index++,i}function Zo(e,t){return"function"===typeof t?t(e):t}function Wo(e){return Go(No(),Co,e)}function Go(e,t,i){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=i;var n=e.baseQueue,o=r.pending;if(null!==o){if(null!==n){var s=n.next;n.next=o.next,o.next=s}t.baseQueue=n=o,r.pending=null}if(o=e.baseState,null===n)e.memoizedState=o;else{var l=s=null,c=null,u=t=n.next,h=!1;do{var d=-536870913&u.lane;if(d!==u.lane?(oc&d)===d:(vo&d)===d){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),d===Fn&&(h=!0);else{if((vo&p)===p){u=u.next,p===Fn&&(h=!0);continue}d={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=d,s=o):c=c.next=d,xo.lanes|=p,pc|=p}d=u.action,Lo&&i(o,d),o=u.hasEagerState?u.eagerState:i(o,d)}else p={lane:d,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,s=o):c=c.next=p,xo.lanes|=d,pc|=d;u=u.next}while(null!==u&&u!==t);if(null===c?s=o:c.next=l,!Xi(o,e.memoizedState)&&(Ms=!0,h&&null!==(i=Bn)))throw i;e.memoizedState=o,e.baseState=s,e.baseQueue=c,r.lastRenderedState=o}return null===n&&(r.lanes=0),[e.memoizedState,r.dispatch]}function qo(e){var t=No(),i=t.queue;if(null===i)throw Error(a(311));i.lastRenderedReducer=e;var r=i.dispatch,n=i.pending,o=t.memoizedState;if(null!==n){i.pending=null;var s=n=n.next;do{o=e(o,s.action),s=s.next}while(s!==n);Xi(o,t.memoizedState)||(Ms=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),i.lastRenderedState=o}return[o,r]}function Xo(e,t,i){var r=xo,n=No(),o=on;if(o){if(void 0===i)throw Error(a(407));i=i()}else i=t();var s=!Xi((Co||n).memoizedState,i);if(s&&(n.memoizedState=i,Ms=!0),n=n.queue,ya(2048,8,Jo.bind(null,r,n,e),[e]),n.getSnapshot!==t||s||null!==wo&&1&wo.memoizedState.tag){if(r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Ko.bind(null,r,n,i,t),null),null===rc)throw Error(a(349));o||0!==(124&vo)||Yo(r,t,i)}return i}function Yo(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},null===(t=xo.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t,t.stores=[e]):null===(i=t.stores)?t.stores=[e]:i.push(e)}function Ko(e,t,i,r){t.value=i,t.getSnapshot=r,Qo(t)&&$o(e)}function Jo(e,t,i){return i(function(){Qo(t)&&$o(e)})}function Qo(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Xi(e,i)}catch(r){return!0}}function $o(e){var t=Ar(e,2);null!==t&&Dc(t,e,2)}function ea(e){var t=Vo();if("function"===typeof e){var i=e;if(e=i(),Lo){de(!0);try{i()}finally{de(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:e},t}function ta(e,t,i,r){return e.baseState=i,Go(e,Co,"function"===typeof r?r:Zo)}function ia(e,t,i,r,n){if(ja(e))throw Error(a(485));if(null!==(e=t.action)){var o={payload:n,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){o.listeners.push(e)}};null!==R.T?i(!0):o.isTransition=!1,r(o),null===(i=t.pending)?(o.next=t.pending=o,ra(t,o)):(o.next=i.next,t.pending=i.next=o)}}function ra(e,t){var i=t.action,r=t.payload,n=e.state;if(t.isTransition){var o=R.T,a={};R.T=a;try{var s=i(n,r),l=R.S;null!==l&&l(a,s),na(e,t,s)}catch(c){aa(e,t,c)}finally{R.T=o}}else try{na(e,t,o=i(n,r))}catch(u){aa(e,t,u)}}function na(e,t,i){null!==i&&"object"===typeof i&&"function"===typeof i.then?i.then(function(i){oa(e,t,i)},function(i){return aa(e,t,i)}):oa(e,t,i)}function oa(e,t,i){t.status="fulfilled",t.value=i,sa(t),e.state=i,null!==(t=e.pending)&&((i=t.next)===t?e.pending=null:(i=i.next,t.next=i,ra(e,i)))}function aa(e,t,i){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=i,sa(t),t=t.next}while(t!==r)}e.action=null}function sa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(on){var i=rc.formState;if(null!==i){e:{var r=xo;if(on){if(nn){t:{for(var n=nn,o=sn;8!==n.nodeType;){if(!o){n=null;break t}if(null===(n=yh(n.nextSibling))){n=null;break t}}n="F!"===(o=n.data)||"F"===o?n:null}if(n){nn=yh(n.nextSibling),r="F!"===n.data;break e}}cn(r)}r=!1}r&&(t=i[0])}}return(i=Vo()).memoizedState=i.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},i.queue=r,i=Va.bind(null,xo,r),r.dispatch=i,r=ea(!1),o=Ua.bind(null,xo,!1,r.queue),n={state:t,dispatch:null,action:e,pending:null},(r=Vo()).queue=n,i=ia.bind(null,xo,n,o,i),n.dispatch=i,r.memoizedState=e,[t,i,!1]}function ua(e){return ha(No(),Co,e)}function ha(e,t,i){if(t=Go(e,t,la)[0],e=Wo(Zo)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=Uo(t)}catch(a){if(a===Wn)throw qn;throw a}else r=t;var n=(t=No()).queue,o=n.dispatch;return i!==t.memoizedState&&(xo.flags|=2048,fa(9,{destroy:void 0,resource:void 0},da.bind(null,n,i),null)),[r,o,e]}function da(e,t){e.action=t}function pa(e){var t=No(),i=Co;if(null!==i)return ha(t,i,e);No(),t=t.memoizedState;var r=(i=No()).queue.dispatch;return i.memoizedState=e,[t,r,!1]}function fa(e,t,i,r){return e={tag:e,create:i,deps:r,inst:t,next:null},null===(t=xo.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},xo.updateQueue=t),null===(i=t.lastEffect)?t.lastEffect=e.next=e:(r=i.next,i.next=e,e.next=r,t.lastEffect=e),e}function ma(){return No().memoizedState}function ga(e,t,i,r){var n=Vo();r=void 0===r?null:r,xo.flags|=e,n.memoizedState=fa(1|t,{destroy:void 0,resource:void 0},i,r)}function ya(e,t,i,r){var n=No();r=void 0===r?null:r;var o=n.memoizedState.inst;null!==Co&&null!==r&&ko(r,Co.memoizedState.deps)?n.memoizedState=fa(t,o,i,r):(xo.flags|=e,n.memoizedState=fa(1|t,o,i,r))}function _a(e,t){ga(8390656,8,e,t)}function va(e,t){ya(2048,8,e,t)}function xa(e,t){return ya(4,2,e,t)}function Ca(e,t){return ya(4,4,e,t)}function wa(e,t){if("function"===typeof t){e=e();var i=t(e);return function(){"function"===typeof i?i():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function ba(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,ya(4,4,wa.bind(null,t,e),i)}function Sa(){}function La(e,t){var i=No();t=void 0===t?null:t;var r=i.memoizedState;return null!==t&&ko(t,r[1])?r[0]:(i.memoizedState=[e,t],e)}function Ta(e,t){var i=No();t=void 0===t?null:t;var r=i.memoizedState;if(null!==t&&ko(t,r[1]))return r[0];if(r=e(),Lo){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r}function Ma(e,t,i){return void 0===i||0!==(1073741824&vo)?e.memoizedState=t:(e.memoizedState=i,e=zc(),xo.lanes|=e,pc|=e,i)}function Ea(e,t,i,r){return Xi(i,t)?i:null!==fo.current?(e=Ma(e,i,r),Xi(e,t)||(Ms=!0),e):0===(42&vo)?(Ms=!0,e.memoizedState=i):(e=zc(),xo.lanes|=e,pc|=e,t)}function Ia(e,t,i,r,n){var o=z.p;z.p=0!==o&&8>o?o:8;var a=R.T,s={};R.T=s,Ua(e,!1,t,i);try{var l=n(),c=R.S;if(null!==c&&c(s,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Na(e,t,function(e,t){var i=[],r={status:"pending",value:null,reason:null,then:function(e){i.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<i.length;e++)(0,i[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<i.length;e++)(0,i[e])(void 0)}),r}(l,r),Rc());else Na(e,t,r,Rc())}catch(u){Na(e,t,{then:function(){},status:"rejected",reason:u},Rc())}finally{z.p=o,R.T=a}}function Aa(){}function ka(e,t,i,r){if(5!==e.tag)throw Error(a(476));var n=Pa(e).queue;Ia(e,n,t,D,null===i?Aa:function(){return Oa(e),i(r)})}function Pa(e){var t=e.memoizedState;if(null!==t)return t;var i={};return(t={memoizedState:D,baseState:D,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:D},next:null}).next={memoizedState:i,baseState:i,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zo,lastRenderedState:i},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Oa(e){Na(e,Pa(e).next.queue,{},Rc())}function Ra(){return Tn(Xh)}function za(){return No().memoizedState}function Da(){return No().memoizedState}function Fa(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var i=Rc(),r=oo(t,e=no(i),i);return null!==r&&(Dc(r,t,i),ao(r,t,i)),t={cache:On()},void(e.payload=t)}t=t.return}}function Ba(e,t,i){var r=Rc();i={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null},ja(e)?Ha(t,i):null!==(i=Ir(e,t,i,r))&&(Dc(i,e,r),Za(i,t,r))}function Va(e,t,i){Na(e,t,i,Rc())}function Na(e,t,i,r){var n={lane:r,revertLane:0,action:i,hasEagerState:!1,eagerState:null,next:null};if(ja(e))Ha(t,n);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,i);if(n.hasEagerState=!0,n.eagerState=s,Xi(s,a))return Er(e,t,n,0),null===rc&&Mr(),!1}catch(l){}if(null!==(i=Ir(e,t,n,r)))return Dc(i,e,r),Za(i,t,r),!0}return!1}function Ua(e,t,i,r){if(r={lane:2,revertLane:Iu(),action:r,hasEagerState:!1,eagerState:null,next:null},ja(e)){if(t)throw Error(a(479))}else null!==(t=Ir(e,i,r,2))&&Dc(t,e,2)}function ja(e){var t=e.alternate;return e===xo||null!==t&&t===xo}function Ha(e,t){So=bo=!0;var i=e.pending;null===i?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Za(e,t,i){if(0!==(4194048&i)){var r=t.lanes;i|=r&=e.pendingLanes,t.lanes=i,Me(e,i)}}var Wa={readContext:Tn,use:jo,useCallback:Ao,useContext:Ao,useEffect:Ao,useImperativeHandle:Ao,useLayoutEffect:Ao,useInsertionEffect:Ao,useMemo:Ao,useReducer:Ao,useRef:Ao,useState:Ao,useDebugValue:Ao,useDeferredValue:Ao,useTransition:Ao,useSyncExternalStore:Ao,useId:Ao,useHostTransitionStatus:Ao,useFormState:Ao,useActionState:Ao,useOptimistic:Ao,useMemoCache:Ao,useCacheRefresh:Ao},Ga={readContext:Tn,use:jo,useCallback:function(e,t){return Vo().memoizedState=[e,void 0===t?null:t],e},useContext:Tn,useEffect:_a,useImperativeHandle:function(e,t,i){i=null!==i&&void 0!==i?i.concat([e]):null,ga(4194308,4,wa.bind(null,t,e),i)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var i=Vo();t=void 0===t?null:t;var r=e();if(Lo){de(!0);try{e()}finally{de(!1)}}return i.memoizedState=[r,t],r},useReducer:function(e,t,i){var r=Vo();if(void 0!==i){var n=i(t);if(Lo){de(!0);try{i(t)}finally{de(!1)}}}else n=t;return r.memoizedState=r.baseState=n,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=Ba.bind(null,xo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Vo().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,i=Va.bind(null,xo,t);return t.dispatch=i,[e.memoizedState,i]},useDebugValue:Sa,useDeferredValue:function(e,t){return Ma(Vo(),e,t)},useTransition:function(){var e=ea(!1);return e=Ia.bind(null,xo,e.queue,!0,!1),Vo().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,i){var r=xo,n=Vo();if(on){if(void 0===i)throw Error(a(407));i=i()}else{if(i=t(),null===rc)throw Error(a(349));0!==(124&oc)||Yo(r,t,i)}n.memoizedState=i;var o={value:i,getSnapshot:t};return n.queue=o,_a(Jo.bind(null,r,o,e),[e]),r.flags|=2048,fa(9,{destroy:void 0,resource:void 0},Ko.bind(null,r,o,i,t),null),i},useId:function(){var e=Vo(),t=rc.identifierPrefix;if(on){var i=Jr;t="\xab"+t+"R"+(i=(Kr&~(1<<32-pe(Kr)-1)).toString(32)+i),0<(i=To++)&&(t+="H"+i.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(i=Io++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Ra,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Vo();t.memoizedState=t.baseState=e;var i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=i,t=Ua.bind(null,xo,!0,i),i.dispatch=t,[e,t]},useMemoCache:Ho,useCacheRefresh:function(){return Vo().memoizedState=Fa.bind(null,xo)}},qa={readContext:Tn,use:jo,useCallback:La,useContext:Tn,useEffect:va,useImperativeHandle:ba,useInsertionEffect:xa,useLayoutEffect:Ca,useMemo:Ta,useReducer:Wo,useRef:ma,useState:function(){return Wo(Zo)},useDebugValue:Sa,useDeferredValue:function(e,t){return Ea(No(),Co.memoizedState,e,t)},useTransition:function(){var e=Wo(Zo)[0],t=No().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Xo,useId:za,useHostTransitionStatus:Ra,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(No(),0,e,t)},useMemoCache:Ho,useCacheRefresh:Da},Xa={readContext:Tn,use:jo,useCallback:La,useContext:Tn,useEffect:va,useImperativeHandle:ba,useInsertionEffect:xa,useLayoutEffect:Ca,useMemo:Ta,useReducer:qo,useRef:ma,useState:function(){return qo(Zo)},useDebugValue:Sa,useDeferredValue:function(e,t){var i=No();return null===Co?Ma(i,e,t):Ea(i,Co.memoizedState,e,t)},useTransition:function(){var e=qo(Zo)[0],t=No().memoizedState;return["boolean"===typeof e?e:Uo(e),t]},useSyncExternalStore:Xo,useId:za,useHostTransitionStatus:Ra,useFormState:pa,useActionState:pa,useOptimistic:function(e,t){var i=No();return null!==Co?ta(i,0,e,t):(i.baseState=e,[e,i.queue.dispatch])},useMemoCache:Ho,useCacheRefresh:Da},Ya=null,Ka=0;function Ja(e){var t=Ka;return Ka+=1,null===Ya&&(Ya=[]),Jn(Ya,e,t)}function Qa(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function $a(e,t){if(t.$$typeof===p)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function es(e){return(0,e._init)(e._payload)}function ts(e){function t(t,i){if(e){var r=t.deletions;null===r?(t.deletions=[i],t.flags|=16):r.push(i)}}function i(i,r){if(!e)return null;for(;null!==r;)t(i,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function n(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function o(t,i,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<i?(t.flags|=67108866,i):r:(t.flags|=67108866,i):(t.flags|=1048576,i)}function s(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,i,r){return null===t||6!==t.tag?((t=Ur(i,e.mode,r)).return=e,t):((t=n(t,i)).return=e,t)}function c(e,t,i,r){var o=i.type;return o===g?h(e,t,i.props.children,r,i.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===T&&es(o)===t.type)?(Qa(t=n(t,i.props),i),t.return=e,t):(Qa(t=Vr(i.type,i.key,i.props,null,e.mode,r),i),t.return=e,t)}function u(e,t,i,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==i.containerInfo||t.stateNode.implementation!==i.implementation?((t=jr(i,e.mode,r)).return=e,t):((t=n(t,i.children||[])).return=e,t)}function h(e,t,i,r,o){return null===t||7!==t.tag?((t=Nr(i,e.mode,r,o)).return=e,t):((t=n(t,i)).return=e,t)}function d(e,t,i){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Ur(""+t,e.mode,i)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case f:return Qa(i=Vr(t.type,t.key,t.props,null,e.mode,i),t),i.return=e,i;case m:return(t=jr(t,e.mode,i)).return=e,t;case T:return d(e,t=(0,t._init)(t._payload),i)}if(O(t)||A(t))return(t=Nr(t,e.mode,i,null)).return=e,t;if("function"===typeof t.then)return d(e,Ja(t),i);if(t.$$typeof===C)return d(e,Mn(e,t),i);$a(e,t)}return null}function p(e,t,i,r){var n=null!==t?t.key:null;if("string"===typeof i&&""!==i||"number"===typeof i||"bigint"===typeof i)return null!==n?null:l(e,t,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case f:return i.key===n?c(e,t,i,r):null;case m:return i.key===n?u(e,t,i,r):null;case T:return p(e,t,i=(n=i._init)(i._payload),r)}if(O(i)||A(i))return null!==n?null:h(e,t,i,r,null);if("function"===typeof i.then)return p(e,t,Ja(i),r);if(i.$$typeof===C)return p(e,t,Mn(e,i),r);$a(e,i)}return null}function y(e,t,i,r,n){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(i)||null,""+r,n);if("object"===typeof r&&null!==r){switch(r.$$typeof){case f:return c(t,e=e.get(null===r.key?i:r.key)||null,r,n);case m:return u(t,e=e.get(null===r.key?i:r.key)||null,r,n);case T:return y(e,t,i,r=(0,r._init)(r._payload),n)}if(O(r)||A(r))return h(t,e=e.get(i)||null,r,n,null);if("function"===typeof r.then)return y(e,t,i,Ja(r),n);if(r.$$typeof===C)return y(e,t,i,Mn(t,r),n);$a(t,r)}return null}function _(l,c,u,h){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case f:e:{for(var v=u.key;null!==c;){if(c.key===v){if((v=u.type)===g){if(7===c.tag){i(l,c.sibling),(h=n(c,u.props.children)).return=l,l=h;break e}}else if(c.elementType===v||"object"===typeof v&&null!==v&&v.$$typeof===T&&es(v)===c.type){i(l,c.sibling),Qa(h=n(c,u.props),u),h.return=l,l=h;break e}i(l,c);break}t(l,c),c=c.sibling}u.type===g?((h=Nr(u.props.children,l.mode,h,u.key)).return=l,l=h):(Qa(h=Vr(u.type,u.key,u.props,null,l.mode,h),u),h.return=l,l=h)}return s(l);case m:e:{for(v=u.key;null!==c;){if(c.key===v){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){i(l,c.sibling),(h=n(c,u.children||[])).return=l,l=h;break e}i(l,c);break}t(l,c),c=c.sibling}(h=jr(u,l.mode,h)).return=l,l=h}return s(l);case T:return _(l,c,u=(v=u._init)(u._payload),h)}if(O(u))return function(n,a,s,l){for(var c=null,u=null,h=a,f=a=0,m=null;null!==h&&f<s.length;f++){h.index>f?(m=h,h=null):m=h.sibling;var g=p(n,h,s[f],l);if(null===g){null===h&&(h=m);break}e&&h&&null===g.alternate&&t(n,h),a=o(g,a,f),null===u?c=g:u.sibling=g,u=g,h=m}if(f===s.length)return i(n,h),on&&Qr(n,f),c;if(null===h){for(;f<s.length;f++)null!==(h=d(n,s[f],l))&&(a=o(h,a,f),null===u?c=h:u.sibling=h,u=h);return on&&Qr(n,f),c}for(h=r(h);f<s.length;f++)null!==(m=y(h,n,f,s[f],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?f:m.key),a=o(m,a,f),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(n,e)}),on&&Qr(n,f),c}(l,c,u,h);if(A(u)){if("function"!==typeof(v=A(u)))throw Error(a(150));return function(n,s,l,c){if(null==l)throw Error(a(151));for(var u=null,h=null,f=s,m=s=0,g=null,_=l.next();null!==f&&!_.done;m++,_=l.next()){f.index>m?(g=f,f=null):g=f.sibling;var v=p(n,f,_.value,c);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(n,f),s=o(v,s,m),null===h?u=v:h.sibling=v,h=v,f=g}if(_.done)return i(n,f),on&&Qr(n,m),u;if(null===f){for(;!_.done;m++,_=l.next())null!==(_=d(n,_.value,c))&&(s=o(_,s,m),null===h?u=_:h.sibling=_,h=_);return on&&Qr(n,m),u}for(f=r(f);!_.done;m++,_=l.next())null!==(_=y(f,n,m,_.value,c))&&(e&&null!==_.alternate&&f.delete(null===_.key?m:_.key),s=o(_,s,m),null===h?u=_:h.sibling=_,h=_);return e&&f.forEach(function(e){return t(n,e)}),on&&Qr(n,m),u}(l,c,u=v.call(u),h)}if("function"===typeof u.then)return _(l,c,Ja(u),h);if(u.$$typeof===C)return _(l,c,Mn(l,u),h);$a(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(i(l,c.sibling),(h=n(c,u)).return=l,l=h):(i(l,c),(h=Ur(u,l.mode,h)).return=l,l=h),s(l)):i(l,c)}return function(e,t,i,r){try{Ka=0;var n=_(e,t,i,r);return Ya=null,n}catch(a){if(a===Wn||a===qn)throw a;var o=zr(29,a,null,e.mode);return o.lanes=r,o.return=e,o}}}var is=ts(!0),rs=ts(!1),ns=V(null),os=null;function as(e){var t=e.alternate;U(us,1&us.current),U(ns,e),null===os&&(null===t||null!==fo.current||null!==t.memoizedState)&&(os=e)}function ss(e){if(22===e.tag){if(U(us,us.current),U(ns,e),null===os){var t=e.alternate;null!==t&&null!==t.memoizedState&&(os=e)}}else ls()}function ls(){U(us,us.current),U(ns,ns.current)}function cs(e){N(ns),os===e&&(os=null),N(us)}var us=V(0);function hs(e){for(var t=e;null!==t;){if(13===t.tag){var i=t.memoizedState;if(null!==i&&(null===(i=i.dehydrated)||"$?"===i.data||gh(i)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function ds(e,t,i,r){i=null===(i=i(r,t=e.memoizedState))||void 0===i?t:d({},t,i),e.memoizedState=i,0===e.lanes&&(e.updateQueue.baseState=i)}var ps={enqueueSetState:function(e,t,i){e=e._reactInternals;var r=Rc(),n=no(r);n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=oo(e,n,r))&&(Dc(t,e,r),ao(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var r=Rc(),n=no(r);n.tag=1,n.payload=t,void 0!==i&&null!==i&&(n.callback=i),null!==(t=oo(e,n,r))&&(Dc(t,e,r),ao(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=Rc(),r=no(i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=oo(e,r,i))&&(Dc(t,e,i),ao(t,e,i))}};function fs(e,t,i,r,n,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Yi(i,r)||!Yi(n,o))}function ms(e,t,i,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(i,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(i,r),t.state!==e&&ps.enqueueReplaceState(t,t.state,null)}function gs(e,t){var i=t;if("ref"in t)for(var r in i={},t)"ref"!==r&&(i[r]=t[r]);if(e=e.defaultProps)for(var n in i===t&&(i=d({},i)),e)void 0===i[n]&&(i[n]=e[n]);return i}var ys="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function _s(e){ys(e)}function vs(e){console.error(e)}function xs(e){ys(e)}function Cs(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function ws(e,t,i){try{(0,e.onCaughtError)(i.value,{componentStack:i.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function bs(e,t,i){return(i=no(i)).tag=3,i.payload={element:null},i.callback=function(){Cs(e,t)},i}function Ss(e){return(e=no(e)).tag=3,e}function Ls(e,t,i,r){var n=i.type.getDerivedStateFromError;if("function"===typeof n){var o=r.value;e.payload=function(){return n(o)},e.callback=function(){ws(t,i,r)}}var a=i.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){ws(t,i,r),"function"!==typeof n&&(null===Sc?Sc=new Set([this]):Sc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ts=Error(a(461)),Ms=!1;function Es(e,t,i,r){t.child=null===e?rs(t,null,i,r):is(t,e.child,i,r)}function Is(e,t,i,r,n){i=i.render;var o=t.ref;if("ref"in r){var a={};for(var s in r)"ref"!==s&&(a[s]=r[s])}else a=r;return Ln(t),r=Po(e,t,i,a,o,n),s=Do(),null===e||Ms?(on&&s&&en(t),t.flags|=1,Es(e,t,r,n),t.child):(Fo(e,t,n),Ys(e,t,n))}function As(e,t,i,r,n){if(null===e){var o=i.type;return"function"!==typeof o||Dr(o)||void 0!==o.defaultProps||null!==i.compare?((e=Vr(i.type,null,r,t,t.mode,n)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ks(e,t,o,r,n))}if(o=e.child,!Ks(e,n)){var a=o.memoizedProps;if((i=null!==(i=i.compare)?i:Yi)(a,r)&&e.ref===t.ref)return Ys(e,t,n)}return t.flags|=1,(e=Fr(o,r)).ref=t.ref,e.return=t,t.child=e}function ks(e,t,i,r,n){if(null!==e){var o=e.memoizedProps;if(Yi(o,r)&&e.ref===t.ref){if(Ms=!1,t.pendingProps=r=o,!Ks(e,n))return t.lanes=e.lanes,Ys(e,t,n);0!==(131072&e.flags)&&(Ms=!0)}}return zs(e,t,i,r,n)}function Ps(e,t,i){var r=t.pendingProps,n=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==o?o.baseLanes|i:i,null!==e){for(n=t.child=e.child,o=0;null!==n;)o=o|n.lanes|n.childLanes,n=n.sibling;t.childLanes=o&~r}else t.childLanes=0,t.child=null;return Os(e,t,r,i)}if(0===(536870912&i))return t.lanes=t.childLanes=536870912,Os(e,t,null!==o?o.baseLanes|i:i,i);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Hn(0,null!==o?o.cachePool:null),null!==o?go(t,o):yo(),ss(t)}else null!==o?(Hn(0,o.cachePool),go(t,o),ls(),t.memoizedState=null):(null!==e&&Hn(0,null),yo(),ls());return Es(e,t,n,i),t.child}function Os(e,t,i,r){var n=jn();return n=null===n?null:{parent:Pn._currentValue,pool:n},t.memoizedState={baseLanes:i,cachePool:n},null!==e&&Hn(0,null),yo(),ss(t),null!==e&&bn(e,t,r,!0),null}function Rs(e,t){var i=t.ref;if(null===i)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof i&&"object"!==typeof i)throw Error(a(284));null!==e&&e.ref===i||(t.flags|=4194816)}}function zs(e,t,i,r,n){return Ln(t),i=Po(e,t,i,r,void 0,n),r=Do(),null===e||Ms?(on&&r&&en(t),t.flags|=1,Es(e,t,i,n),t.child):(Fo(e,t,n),Ys(e,t,n))}function Ds(e,t,i,r,n,o){return Ln(t),t.updateQueue=null,i=Ro(t,r,i,n),Oo(e),r=Do(),null===e||Ms?(on&&r&&en(t),t.flags|=1,Es(e,t,i,o),t.child):(Fo(e,t,o),Ys(e,t,o))}function Fs(e,t,i,r,n){if(Ln(t),null===t.stateNode){var o=Or,a=i.contextType;"object"===typeof a&&null!==a&&(o=Tn(a)),o=new i(r,o),t.memoizedState=null!==o.state&&void 0!==o.state?o.state:null,o.updater=ps,t.stateNode=o,o._reactInternals=t,(o=t.stateNode).props=r,o.state=t.memoizedState,o.refs={},io(t),a=i.contextType,o.context="object"===typeof a&&null!==a?Tn(a):Or,o.state=t.memoizedState,"function"===typeof(a=i.getDerivedStateFromProps)&&(ds(t,i,a,r),o.state=t.memoizedState),"function"===typeof i.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||(a=o.state,"function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount(),a!==o.state&&ps.enqueueReplaceState(o,o.state,null),uo(t,r,o,n),co(),o.state=t.memoizedState),"function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){o=t.stateNode;var s=t.memoizedProps,l=gs(i,s);o.props=l;var c=o.context,u=i.contextType;a=Or,"object"===typeof u&&null!==u&&(a=Tn(u));var h=i.getDerivedStateFromProps;u="function"===typeof h||"function"===typeof o.getSnapshotBeforeUpdate,s=t.pendingProps!==s,u||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(s||c!==a)&&ms(t,o,r,a),to=!1;var d=t.memoizedState;o.state=d,uo(t,r,o,n),co(),c=t.memoizedState,s||d!==c||to?("function"===typeof h&&(ds(t,i,h,r),c=t.memoizedState),(l=to||fs(t,i,l,r,d,c,a))?(u||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=a,r=l):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,ro(e,t),u=gs(i,a=t.memoizedProps),o.props=u,h=t.pendingProps,d=o.context,c=i.contextType,l=Or,"object"===typeof c&&null!==c&&(l=Tn(c)),(c="function"===typeof(s=i.getDerivedStateFromProps)||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==l)&&ms(t,o,r,l),to=!1,d=t.memoizedState,o.state=d,uo(t,r,o,n),co();var p=t.memoizedState;a!==h||d!==p||to||null!==e&&null!==e.dependencies&&Sn(e.dependencies)?("function"===typeof s&&(ds(t,i,s,r),p=t.memoizedState),(u=to||fs(t,i,u,r,d,p,l)||null!==e&&null!==e.dependencies&&Sn(e.dependencies))?(c||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=u):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return o=r,Rs(e,t),r=0!==(128&t.flags),o||r?(o=t.stateNode,i=r&&"function"!==typeof i.getDerivedStateFromError?null:o.render(),t.flags|=1,null!==e&&r?(t.child=is(t,e.child,null,n),t.child=is(t,null,i,n)):Es(e,t,i,n),t.memoizedState=o.state,e=t.child):e=Ys(e,t,n),e}function Bs(e,t,i,r){return pn(),t.flags|=256,Es(e,t,i,r),t.child}var Vs={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ns(e){return{baseLanes:e,cachePool:Zn()}}function Us(e,t,i){return e=null!==e?e.childLanes&~i:0,t&&(e|=gc),e}function js(e,t,i){var r,n=t.pendingProps,o=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&us.current)),r&&(o=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(on){if(o?as(t):ls(),on){var l,c=nn;if(l=c){e:{for(l=c,c=sn;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=yh(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Yr?{id:Kr,overflow:Jr}:null,retryLane:536870912,hydrationErrors:null},(l=zr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rn=t,nn=null,l=!0):l=!1}l||cn(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return gh(c)?t.lanes=32:t.lanes=536870912,null;cs(t)}return c=n.children,n=n.fallback,o?(ls(),c=Zs({mode:"hidden",children:c},o=t.mode),n=Nr(n,o,i,null),c.return=t,n.return=t,c.sibling=n,t.child=c,(o=t.child).memoizedState=Ns(i),o.childLanes=Us(e,r,i),t.memoizedState=Vs,n):(as(t),Hs(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(s)256&t.flags?(as(t),t.flags&=-257,t=Ws(e,t,i)):null!==t.memoizedState?(ls(),t.child=e.child,t.flags|=128,t=null):(ls(),o=n.fallback,c=t.mode,n=Zs({mode:"visible",children:n.children},c),(o=Nr(o,c,i,null)).flags|=2,n.return=t,o.return=t,n.sibling=o,t.child=n,is(t,e.child,null,i),(n=t.child).memoizedState=Ns(i),n.childLanes=Us(e,r,i),t.memoizedState=Vs,t=o);else if(as(t),gh(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(n=Error(a(419))).stack="",n.digest=r,mn({value:n,source:null,stack:null}),t=Ws(e,t,i)}else if(Ms||bn(e,t,i,!1),r=0!==(i&e.childLanes),Ms||r){if(null!==(r=rc)&&(0!==(n=0!==((n=0!==(42&(n=i&-i))?1:Ee(n))&(r.suspendedLanes|i))?0:n)&&n!==l.retryLane))throw l.retryLane=n,Ar(e,n),Dc(r,e,n),Ts;"$?"===c.data||qc(),t=Ws(e,t,i)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,nn=yh(c.nextSibling),rn=t,on=!0,an=null,sn=!1,null!==e&&(qr[Xr++]=Kr,qr[Xr++]=Jr,qr[Xr++]=Yr,Kr=e.id,Jr=e.overflow,Yr=t),(t=Hs(t,n.children)).flags|=4096);return t}return o?(ls(),o=n.fallback,c=t.mode,u=(l=e.child).sibling,(n=Fr(l,{mode:"hidden",children:n.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?o=Fr(u,o):(o=Nr(o,c,i,null)).flags|=2,o.return=t,n.return=t,n.sibling=o,t.child=n,n=o,o=t.child,null===(c=e.child.memoizedState)?c=Ns(i):(null!==(l=c.cachePool)?(u=Pn._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Zn(),c={baseLanes:c.baseLanes|i,cachePool:l}),o.memoizedState=c,o.childLanes=Us(e,r,i),t.memoizedState=Vs,n):(as(t),e=(i=e.child).sibling,(i=Fr(i,{mode:"visible",children:n.children})).return=t,i.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i)}function Hs(e,t){return(t=Zs({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Zs(e,t){return(e=zr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Ws(e,t,i){return is(t,e.child,null,i),(e=Hs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Gs(e,t,i){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cn(e.return,t,i)}function qs(e,t,i,r,n){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:i,tailMode:n}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=i,o.tailMode=n)}function Xs(e,t,i){var r=t.pendingProps,n=r.revealOrder,o=r.tail;if(Es(e,t,r.children,i),0!==(2&(r=us.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Gs(e,i,t);else if(19===e.tag)Gs(e,i,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(U(us,r),n){case"forwards":for(i=t.child,n=null;null!==i;)null!==(e=i.alternate)&&null===hs(e)&&(n=i),i=i.sibling;null===(i=n)?(n=t.child,t.child=null):(n=i.sibling,i.sibling=null),qs(t,!1,n,i,o);break;case"backwards":for(i=null,n=t.child,t.child=null;null!==n;){if(null!==(e=n.alternate)&&null===hs(e)){t.child=n;break}e=n.sibling,n.sibling=i,i=n,n=e}qs(t,!0,i,null,o);break;case"together":qs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t,i){if(null!==e&&(t.dependencies=e.dependencies),pc|=t.lanes,0===(i&t.childLanes)){if(null===e)return null;if(bn(e,t,i,!1),0===(i&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(i=Fr(e=t.child,e.pendingProps),t.child=i,i.return=t;null!==e.sibling;)e=e.sibling,(i=i.sibling=Fr(e,e.pendingProps)).return=t;i.sibling=null}return t.child}function Ks(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Sn(e))}function Js(e,t,i){if(null!==e)if(e.memoizedProps!==t.pendingProps)Ms=!0;else{if(!Ks(e,i)&&0===(128&t.flags))return Ms=!1,function(e,t,i){switch(t.tag){case 3:G(t,t.stateNode.containerInfo),vn(0,Pn,e.memoizedState.cache),pn();break;case 27:case 5:X(t);break;case 4:G(t,t.stateNode.containerInfo);break;case 10:vn(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(as(t),t.flags|=128,null):0!==(i&t.child.childLanes)?js(e,t,i):(as(t),null!==(e=Ys(e,t,i))?e.sibling:null);as(t);break;case 19:var n=0!==(128&e.flags);if((r=0!==(i&t.childLanes))||(bn(e,t,i,!1),r=0!==(i&t.childLanes)),n){if(r)return Xs(e,t,i);t.flags|=128}if(null!==(n=t.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),U(us,us.current),r)break;return null;case 22:case 23:return t.lanes=0,Ps(e,t,i);case 24:vn(0,Pn,e.memoizedState.cache)}return Ys(e,t,i)}(e,t,i);Ms=0!==(131072&e.flags)}else Ms=!1,on&&0!==(1048576&t.flags)&&$r(t,Gr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,n=r._init;if(r=n(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((n=r.$$typeof)===w){t.tag=11,t=Is(null,t,r,e,i);break e}if(n===L){t.tag=14,t=As(null,t,r,e,i);break e}}throw t=P(r)||r,Error(a(306,t,""))}Dr(r)?(e=gs(r,e),t.tag=1,t=Fs(null,t,r,e,i)):(t.tag=0,t=zs(null,t,r,e,i))}return t;case 0:return zs(e,t,t.type,t.pendingProps,i);case 1:return Fs(e,t,r=t.type,n=gs(r,t.pendingProps),i);case 3:e:{if(G(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var o=t.memoizedState;n=o.element,ro(e,t),uo(t,r,null,i);var s=t.memoizedState;if(r=s.cache,vn(0,Pn,r),r!==o.cache&&wn(t,[Pn],i,!0),co(),r=s.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Bs(e,t,r,i);break e}if(r!==n){mn(n=br(Error(a(424)),t)),t=Bs(e,t,r,i);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(nn=yh(e.firstChild),rn=t,on=!0,an=null,sn=!0,i=rs(t,null,r,i),t.child=i;i;)i.flags=-3&i.flags|4096,i=i.sibling}else{if(pn(),r===n){t=Ys(e,t,i);break e}Es(e,t,r,i)}t=t.child}return t;case 26:return Rs(e,t),null===e?(i=Eh(t.type,null,t.pendingProps,null))?t.memoizedState=i:on||(i=t.type,e=t.pendingProps,(r=rh(Z.current).createElement(i))[Pe]=t,r[Oe]=e,eh(r,i,e),We(r),t.stateNode=r):t.memoizedState=Eh(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&on&&(r=t.stateNode=xh(t.type,t.pendingProps,Z.current),rn=t,sn=!0,n=nn,ph(t.type)?(_h=n,nn=yh(r.firstChild)):nn=n),Es(e,t,t.pendingProps.children,i),Rs(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&on&&((n=r=nn)&&(null!==(r=function(e,t,i,r){for(;1===e.nodeType;){var n=i;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ve])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(o=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(o!==n.rel||e.getAttribute("href")!==(null==n.href||""===n.href?null:n.href)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin)||e.getAttribute("title")!==(null==n.title?null:n.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((o=e.getAttribute("src"))!==(null==n.src?null:n.src)||e.getAttribute("type")!==(null==n.type?null:n.type)||e.getAttribute("crossorigin")!==(null==n.crossOrigin?null:n.crossOrigin))&&o&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var o=null==n.name?null:""+n.name;if("hidden"===n.type&&e.getAttribute("name")===o)return e}if(null===(e=yh(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,sn))?(t.stateNode=r,rn=t,nn=yh(r.firstChild),sn=!1,n=!0):n=!1),n||cn(t)),X(t),n=t.type,o=t.pendingProps,s=null!==e?e.memoizedProps:null,r=o.children,ah(n,o)?r=null:null!==s&&ah(n,s)&&(t.flags|=32),null!==t.memoizedState&&(n=Po(e,t,zo,null,null,i),Xh._currentValue=n),Rs(e,t),Es(e,t,r,i),t.child;case 6:return null===e&&on&&((e=i=nn)&&(null!==(i=function(e,t,i){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!i)return null;if(null===(e=yh(e.nextSibling)))return null}return e}(i,t.pendingProps,sn))?(t.stateNode=i,rn=t,nn=null,e=!0):e=!1),e||cn(t)),null;case 13:return js(e,t,i);case 4:return G(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=is(t,null,r,i):Es(e,t,r,i),t.child;case 11:return Is(e,t,t.type,t.pendingProps,i);case 7:return Es(e,t,t.pendingProps,i),t.child;case 8:case 12:return Es(e,t,t.pendingProps.children,i),t.child;case 10:return r=t.pendingProps,vn(0,t.type,r.value),Es(e,t,r.children,i),t.child;case 9:return n=t.type._context,r=t.pendingProps.children,Ln(t),r=r(n=Tn(n)),t.flags|=1,Es(e,t,r,i),t.child;case 14:return As(e,t,t.type,t.pendingProps,i);case 15:return ks(e,t,t.type,t.pendingProps,i);case 19:return Xs(e,t,i);case 31:return r=t.pendingProps,i=t.mode,r={mode:r.mode,children:r.children},null===e?((i=Zs(r,i)).ref=t.ref,t.child=i,i.return=t,t=i):((i=Fr(e.child,r)).ref=t.ref,t.child=i,i.return=t,t=i),t;case 22:return Ps(e,t,i);case 24:return Ln(t),r=Tn(Pn),null===e?(null===(n=jn())&&(n=rc,o=On(),n.pooledCache=o,o.refCount++,null!==o&&(n.pooledCacheLanes|=i),n=o),t.memoizedState={parent:r,cache:n},io(t),vn(0,Pn,n)):(0!==(e.lanes&i)&&(ro(e,t),uo(t,null,null,i),co()),n=e.memoizedState,o=t.memoizedState,n.parent!==r?(n={parent:r,cache:r},t.memoizedState=n,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=n),vn(0,Pn,r)):(r=o.cache,vn(0,Pn,r),r!==n.cache&&wn(t,[Pn],i,!0))),Es(e,t,t.pendingProps.children,i),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Qs(e){e.flags|=4}function $s(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!Uh(t)){if(null!==(t=ns.current)&&((4194048&oc)===oc?null!==os:(62914560&oc)!==oc&&0===(536870912&oc)||t!==os))throw Qn=Xn,Gn;e.flags|=8192}}function el(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?be():536870912,e.lanes|=t,yc|=t)}function tl(e,t){if(!on)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;null!==t;)null!==t.alternate&&(i=t),t=t.sibling;null===i?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var r=null;null!==i;)null!==i.alternate&&(r=i),i=i.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function il(e){var t=null!==e.alternate&&e.alternate.child===e.child,i=0,r=0;if(t)for(var n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=65011712&n.subtreeFlags,r|=65011712&n.flags,n.return=e,n=n.sibling;else for(n=e.child;null!==n;)i|=n.lanes|n.childLanes,r|=n.subtreeFlags,r|=n.flags,n.return=e,n=n.sibling;return e.subtreeFlags|=r,e.childLanes=i,t}function rl(e,t,i){var r=t.pendingProps;switch(tn(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return il(t),null;case 3:return i=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),xn(Pn),q(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(dn(t)?Qs(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,fn())),il(t),null;case 26:return i=t.memoizedState,null===e?(Qs(t),null!==i?(il(t),$s(t,i)):(il(t),t.flags&=-16777217)):i?i!==e.memoizedState?(Qs(t),il(t),$s(t,i)):(il(t),t.flags&=-16777217):(e.memoizedProps!==r&&Qs(t),il(t),t.flags&=-16777217),null;case 27:Y(t),i=Z.current;var n=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Qs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return il(t),null}e=j.current,dn(t)?un(t):(e=xh(n,r,i),t.stateNode=e,Qs(t))}return il(t),null;case 5:if(Y(t),i=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Qs(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return il(t),null}if(e=j.current,dn(t))un(t);else{switch(n=rh(Z.current),e){case 1:e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case 2:e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;default:switch(i){case"svg":e=n.createElementNS("http://www.w3.org/2000/svg",i);break;case"math":e=n.createElementNS("http://www.w3.org/1998/Math/MathML",i);break;case"script":(e=n.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?n.createElement("select",{is:r.is}):n.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?n.createElement(i,{is:r.is}):n.createElement(i)}}e[Pe]=t,e[Oe]=r;e:for(n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&27!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;null===n.sibling;){if(null===n.return||n.return===t)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}t.stateNode=e;e:switch(eh(e,i,r),i){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qs(t)}}return il(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Qs(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=Z.current,dn(t)){if(e=t.stateNode,i=t.memoizedProps,r=null,null!==(n=rn))switch(n.tag){case 27:case 5:r=n.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===i||null!==r&&!0===r.suppressHydrationWarning||Ku(e.nodeValue,i)))||cn(t)}else(e=rh(e).createTextNode(r))[Pe]=t,t.stateNode=e}return il(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(n=dn(t),null!==r&&null!==r.dehydrated){if(null===e){if(!n)throw Error(a(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(a(317));n[Pe]=t}else pn(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;il(t),n=!1}else n=fn(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),n=!0;if(!n)return 256&t.flags?(cs(t),t):(cs(t),null)}if(cs(t),0!==(128&t.flags))return t.lanes=i,t;if(i=null!==r,e=null!==e&&null!==e.memoizedState,i){n=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(n=r.alternate.memoizedState.cachePool.pool);var o=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(o=r.memoizedState.cachePool.pool),o!==n&&(r.flags|=2048)}return i!==e&&i&&(t.child.flags|=8192),el(t,t.updateQueue),il(t),null;case 4:return q(),null===e&&Nu(t.stateNode.containerInfo),il(t),null;case 10:return xn(t.type),il(t),null;case 19:if(N(us),null===(n=t.memoizedState))return il(t),null;if(r=0!==(128&t.flags),null===(o=n.rendering))if(r)tl(n,!1);else{if(0!==dc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=hs(e))){for(t.flags|=128,tl(n,!1),e=o.updateQueue,t.updateQueue=e,el(t,e),t.subtreeFlags=0,e=i,i=t.child;null!==i;)Br(i,e),i=i.sibling;return U(us,1&us.current|2),t.child}e=e.sibling}null!==n.tail&&te()>wc&&(t.flags|=128,r=!0,tl(n,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=hs(o))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,el(t,e),tl(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!on)return il(t),null}else 2*te()-n.renderingStartTime>wc&&536870912!==i&&(t.flags|=128,r=!0,tl(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=n.last)?e.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=te(),t.sibling=null,e=us.current,U(us,r?1&e|2:1&e),t):(il(t),null);case 22:case 23:return cs(t),_o(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&i)&&0===(128&t.flags)&&(il(t),6&t.subtreeFlags&&(t.flags|=8192)):il(t),null!==(i=t.updateQueue)&&el(t,i.retryQueue),i=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==i&&(t.flags|=2048),null!==e&&N(Un),null;case 24:return i=null,null!==e&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),xn(Pn),il(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function nl(e,t){switch(tn(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return xn(Pn),q(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(cs(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));pn()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return N(us),null;case 4:return q(),null;case 10:return xn(t.type),null;case 22:case 23:return cs(t),_o(),null!==e&&N(Un),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return xn(Pn),null;default:return null}}function ol(e,t){switch(tn(t),t.tag){case 3:xn(Pn),q();break;case 26:case 27:case 5:Y(t);break;case 4:q();break;case 13:cs(t);break;case 19:N(us);break;case 10:xn(t.type);break;case 22:case 23:cs(t),_o(),null!==e&&N(Un);break;case 24:xn(Pn)}}function al(e,t){try{var i=t.updateQueue,r=null!==i?i.lastEffect:null;if(null!==r){var n=r.next;i=n;do{if((i.tag&e)===e){r=void 0;var o=i.create,a=i.inst;r=o(),a.destroy=r}i=i.next}while(i!==n)}}catch(s){uu(t,t.return,s)}}function sl(e,t,i){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var o=n.next;r=o;do{if((r.tag&e)===e){var a=r.inst,s=a.destroy;if(void 0!==s){a.destroy=void 0,n=t;var l=i,c=s;try{c()}catch(u){uu(n,l,u)}}}r=r.next}while(r!==o)}}catch(u){uu(t,t.return,u)}}function ll(e){var t=e.updateQueue;if(null!==t){var i=e.stateNode;try{po(t,i)}catch(r){uu(e,e.return,r)}}}function cl(e,t,i){i.props=gs(e.type,e.memoizedProps),i.state=e.memoizedState;try{i.componentWillUnmount()}catch(r){uu(e,t,r)}}function ul(e,t){try{var i=e.ref;if(null!==i){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof i?e.refCleanup=i(r):i.current=r}}catch(n){uu(e,t,n)}}function hl(e,t){var i=e.ref,r=e.refCleanup;if(null!==i)if("function"===typeof r)try{r()}catch(n){uu(e,t,n)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof i)try{i(null)}catch(o){uu(e,t,o)}else i.current=null}function dl(e){var t=e.type,i=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":i.autoFocus&&r.focus();break e;case"img":i.src?r.src=i.src:i.srcSet&&(r.srcset=i.srcSet)}}catch(n){uu(e,e.return,n)}}function pl(e,t,i){try{var r=e.stateNode;!function(e,t,i,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var n=null,o=null,s=null,l=null,c=null,u=null,h=null;for(f in i){var d=i[f];if(i.hasOwnProperty(f)&&null!=d)switch(f){case"checked":case"value":break;case"defaultValue":c=d;default:r.hasOwnProperty(f)||Qu(e,t,f,null,r,d)}}for(var p in r){var f=r[p];if(d=i[p],r.hasOwnProperty(p)&&(null!=f||null!=d))switch(p){case"type":o=f;break;case"name":n=f;break;case"checked":u=f;break;case"defaultChecked":h=f;break;case"value":s=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:f!==d&&Qu(e,t,p,f,r,d)}}return void gt(e,s,l,c,u,h,o,n);case"select":for(o in f=s=l=p=null,i)if(c=i[o],i.hasOwnProperty(o)&&null!=c)switch(o){case"value":break;case"multiple":f=c;default:r.hasOwnProperty(o)||Qu(e,t,o,null,r,c)}for(n in r)if(o=r[n],c=i[n],r.hasOwnProperty(n)&&(null!=o||null!=c))switch(n){case"value":p=o;break;case"defaultValue":l=o;break;case"multiple":s=o;default:o!==c&&Qu(e,t,n,o,r,c)}return t=l,i=s,r=f,void(null!=p?vt(e,!!i,p,!1):!!r!==!!i&&(null!=t?vt(e,!!i,t,!0):vt(e,!!i,i?[]:"",!1)));case"textarea":for(l in f=p=null,i)if(n=i[l],i.hasOwnProperty(l)&&null!=n&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Qu(e,t,l,null,r,n)}for(s in r)if(n=r[s],o=i[s],r.hasOwnProperty(s)&&(null!=n||null!=o))switch(s){case"value":p=n;break;case"defaultValue":f=n;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=n)throw Error(a(91));break;default:n!==o&&Qu(e,t,s,n,r,o)}return void xt(e,p,f);case"option":for(var m in i)if(p=i[m],i.hasOwnProperty(m)&&null!=p&&!r.hasOwnProperty(m))if("selected"===m)e.selected=!1;else Qu(e,t,m,null,r,p);for(c in r)if(p=r[c],f=i[c],r.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!==typeof p&&"symbol"!==typeof p;else Qu(e,t,c,p,r,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in i)p=i[g],i.hasOwnProperty(g)&&null!=p&&!r.hasOwnProperty(g)&&Qu(e,t,g,null,r,p);for(u in r)if(p=r[u],f=i[u],r.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(a(137,t));break;default:Qu(e,t,u,p,r,f)}return;default:if(Tt(t)){for(var y in i)p=i[y],i.hasOwnProperty(y)&&void 0!==p&&!r.hasOwnProperty(y)&&$u(e,t,y,void 0,r,p);for(h in r)p=r[h],f=i[h],!r.hasOwnProperty(h)||p===f||void 0===p&&void 0===f||$u(e,t,h,p,r,f);return}}for(var _ in i)p=i[_],i.hasOwnProperty(_)&&null!=p&&!r.hasOwnProperty(_)&&Qu(e,t,_,null,r,p);for(d in r)p=r[d],f=i[d],!r.hasOwnProperty(d)||p===f||null==p&&null==f||Qu(e,t,d,p,r,f)}(r,e.type,i,t),r[Oe]=t}catch(n){uu(e,e.return,n)}}function fl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&ph(e.type)||4===e.tag}function ml(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||fl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&ph(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function gl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).insertBefore(e,t):((t=9===i.nodeType?i.body:"HTML"===i.nodeName?i.ownerDocument.body:i).appendChild(e),null!==(i=i._reactRootContainer)&&void 0!==i||null!==t.onclick||(t.onclick=Ju));else if(4!==r&&(27===r&&ph(e.type)&&(i=e.stateNode,t=null),null!==(e=e.child)))for(gl(e,t,i),e=e.sibling;null!==e;)gl(e,t,i),e=e.sibling}function yl(e,t,i){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(4!==r&&(27===r&&ph(e.type)&&(i=e.stateNode),null!==(e=e.child)))for(yl(e,t,i),e=e.sibling;null!==e;)yl(e,t,i),e=e.sibling}function _l(e){var t=e.stateNode,i=e.memoizedProps;try{for(var r=e.type,n=t.attributes;n.length;)t.removeAttributeNode(n[0]);eh(t,r,i),t[Pe]=e,t[Oe]=i}catch(o){uu(e,e.return,o)}}var vl=!1,xl=!1,Cl=!1,wl="function"===typeof WeakSet?WeakSet:Set,bl=null;function Sl(e,t,i){var r=i.flags;switch(i.tag){case 0:case 11:case 15:Fl(e,i),4&r&&al(5,i);break;case 1:if(Fl(e,i),4&r)if(e=i.stateNode,null===t)try{e.componentDidMount()}catch(a){uu(i,i.return,a)}else{var n=gs(i.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(n,t,e.__reactInternalSnapshotBeforeUpdate)}catch(s){uu(i,i.return,s)}}64&r&&ll(i),512&r&&ul(i,i.return);break;case 3:if(Fl(e,i),64&r&&null!==(e=i.updateQueue)){if(t=null,null!==i.child)switch(i.child.tag){case 27:case 5:case 1:t=i.child.stateNode}try{po(e,t)}catch(a){uu(i,i.return,a)}}break;case 27:null===t&&4&r&&_l(i);case 26:case 5:Fl(e,i),null===t&&4&r&&dl(i),512&r&&ul(i,i.return);break;case 12:Fl(e,i);break;case 13:Fl(e,i),4&r&&Al(e,i),64&r&&(null!==(e=i.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var i=e.ownerDocument;if("$?"!==e.data||"complete"===i.readyState)t();else{var r=function(){t(),i.removeEventListener("DOMContentLoaded",r)};i.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,i=fu.bind(null,i))));break;case 22:if(!(r=null!==i.memoizedState||vl)){t=null!==t&&null!==t.memoizedState||xl,n=vl;var o=xl;vl=r,(xl=t)&&!o?Vl(e,i,0!==(8772&i.subtreeFlags)):Fl(e,i),vl=n,xl=o}break;case 30:break;default:Fl(e,i)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ne(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Ml=!1;function El(e,t,i){for(i=i.child;null!==i;)Il(e,t,i),i=i.sibling}function Il(e,t,i){if(he&&"function"===typeof he.onCommitFiberUnmount)try{he.onCommitFiberUnmount(ue,i)}catch(o){}switch(i.tag){case 26:xl||hl(i,t),El(e,t,i),i.memoizedState?i.memoizedState.count--:i.stateNode&&(i=i.stateNode).parentNode.removeChild(i);break;case 27:xl||hl(i,t);var r=Tl,n=Ml;ph(i.type)&&(Tl=i.stateNode,Ml=!1),El(e,t,i),Ch(i.stateNode),Tl=r,Ml=n;break;case 5:xl||hl(i,t);case 6:if(r=Tl,n=Ml,Tl=null,El(e,t,i),Ml=n,null!==(Tl=r))if(Ml)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(i.stateNode)}catch(a){uu(i,t,a)}else try{Tl.removeChild(i.stateNode)}catch(a){uu(i,t,a)}break;case 18:null!==Tl&&(Ml?(fh(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,i.stateNode),Md(e)):fh(Tl,i.stateNode));break;case 4:r=Tl,n=Ml,Tl=i.stateNode.containerInfo,Ml=!0,El(e,t,i),Tl=r,Ml=n;break;case 0:case 11:case 14:case 15:xl||sl(2,i,t),xl||sl(4,i,t),El(e,t,i);break;case 1:xl||(hl(i,t),"function"===typeof(r=i.stateNode).componentWillUnmount&&cl(i,t,r)),El(e,t,i);break;case 21:El(e,t,i);break;case 22:xl=(r=xl)||null!==i.memoizedState,El(e,t,i),xl=r;break;default:El(e,t,i)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Md(e)}catch(i){uu(t,t.return,i)}}function kl(e,t){var i=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new wl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new wl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=mu.bind(null,e,t);i.has(t)||(i.add(t),t.then(r,r))})}function Pl(e,t){var i=t.deletions;if(null!==i)for(var r=0;r<i.length;r++){var n=i[r],o=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 27:if(ph(l.type)){Tl=l.stateNode,Ml=!1;break e}break;case 5:Tl=l.stateNode,Ml=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===Tl)throw Error(a(160));Il(o,s,n),Tl=null,Ml=!1,null!==(o=n.alternate)&&(o.return=null),n.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Rl(t,e),t=t.sibling}var Ol=null;function Rl(e,t){var i=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pl(t,e),zl(e),4&r&&(sl(3,e,e.return),al(3,e),sl(5,e,e.return));break;case 1:Pl(t,e),zl(e),512&r&&(xl||null===i||hl(i,i.return)),64&r&&vl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(i=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===i?r:i.concat(r))));break;case 26:var n=Ol;if(Pl(t,e),zl(e),512&r&&(xl||null===i||hl(i,i.return)),4&r){var o=null!==i?i.memoizedState:null;if(r=e.memoizedState,null===i)if(null===r)if(null===e.stateNode){e:{r=e.type,i=e.memoizedProps,n=n.ownerDocument||n;t:switch(r){case"title":(!(o=n.getElementsByTagName("title")[0])||o[Ve]||o[Pe]||"http://www.w3.org/2000/svg"===o.namespaceURI||o.hasAttribute("itemprop"))&&(o=n.createElement(r),n.head.insertBefore(o,n.querySelector("head > title"))),eh(o,r,i),o[Pe]=e,We(o),r=o;break e;case"link":var s=Vh("link","href",n).get(r+(i.href||""));if(s)for(var l=0;l<s.length;l++)if((o=s[l]).getAttribute("href")===(null==i.href||""===i.href?null:i.href)&&o.getAttribute("rel")===(null==i.rel?null:i.rel)&&o.getAttribute("title")===(null==i.title?null:i.title)&&o.getAttribute("crossorigin")===(null==i.crossOrigin?null:i.crossOrigin)){s.splice(l,1);break t}eh(o=n.createElement(r),r,i),n.head.appendChild(o);break;case"meta":if(s=Vh("meta","content",n).get(r+(i.content||"")))for(l=0;l<s.length;l++)if((o=s[l]).getAttribute("content")===(null==i.content?null:""+i.content)&&o.getAttribute("name")===(null==i.name?null:i.name)&&o.getAttribute("property")===(null==i.property?null:i.property)&&o.getAttribute("http-equiv")===(null==i.httpEquiv?null:i.httpEquiv)&&o.getAttribute("charset")===(null==i.charSet?null:i.charSet)){s.splice(l,1);break t}eh(o=n.createElement(r),r,i),n.head.appendChild(o);break;default:throw Error(a(468,r))}o[Pe]=e,We(o),r=o}e.stateNode=r}else Nh(n,e.type,e.stateNode);else e.stateNode=Rh(n,r,e.memoizedProps);else o!==r?(null===o?null!==i.stateNode&&(i=i.stateNode).parentNode.removeChild(i):o.count--,null===r?Nh(n,e.type,e.stateNode):Rh(n,r,e.memoizedProps)):null===r&&null!==e.stateNode&&pl(e,e.memoizedProps,i.memoizedProps)}break;case 27:Pl(t,e),zl(e),512&r&&(xl||null===i||hl(i,i.return)),null!==i&&4&r&&pl(e,e.memoizedProps,i.memoizedProps);break;case 5:if(Pl(t,e),zl(e),512&r&&(xl||null===i||hl(i,i.return)),32&e.flags){n=e.stateNode;try{wt(n,"")}catch(f){uu(e,e.return,f)}}4&r&&null!=e.stateNode&&pl(e,n=e.memoizedProps,null!==i?i.memoizedProps:n),1024&r&&(Cl=!0);break;case 6:if(Pl(t,e),zl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,i=e.stateNode;try{i.nodeValue=r}catch(f){uu(e,e.return,f)}}break;case 3:if(Bh=null,n=Ol,Ol=Sh(t.containerInfo),Pl(t,e),Ol=n,zl(e),4&r&&null!==i&&i.memoizedState.isDehydrated)try{Md(t.containerInfo)}catch(f){uu(e,e.return,f)}Cl&&(Cl=!1,Dl(e));break;case 4:r=Ol,Ol=Sh(e.stateNode.containerInfo),Pl(t,e),zl(e),Ol=r;break;case 12:default:Pl(t,e),zl(e);break;case 13:Pl(t,e),zl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==i&&null!==i.memoizedState)&&(Cc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,kl(e,r)));break;case 22:n=null!==e.memoizedState;var c=null!==i&&null!==i.memoizedState,u=vl,h=xl;if(vl=u||n,xl=h||c,Pl(t,e),xl=h,vl=u,zl(e),8192&r)e:for(t=e.stateNode,t._visibility=n?-2&t._visibility:1|t._visibility,n&&(null===i||c||vl||xl||Bl(e)),i=null,t=e;;){if(5===t.tag||26===t.tag){if(null===i){c=i=t;try{if(o=c.stateNode,n)"function"===typeof(s=o.style).setProperty?s.setProperty("display","none","important"):s.display="none";else{l=c.stateNode;var d=c.memoizedProps.style,p=void 0!==d&&null!==d&&d.hasOwnProperty("display")?d.display:null;l.style.display=null==p||"boolean"===typeof p?"":(""+p).trim()}}catch(f){uu(c,c.return,f)}}}else if(6===t.tag){if(null===i){c=t;try{c.stateNode.nodeValue=n?"":c.memoizedProps}catch(f){uu(c,c.return,f)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;i===t&&(i=null),t=t.return}i===t&&(i=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(i=r.retryQueue)&&(r.retryQueue=null,kl(e,i))));break;case 19:Pl(t,e),zl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,kl(e,r)));case 30:case 21:}}function zl(e){var t=e.flags;if(2&t){try{for(var i,r=e.return;null!==r;){if(fl(r)){i=r;break}r=r.return}if(null==i)throw Error(a(160));switch(i.tag){case 27:var n=i.stateNode;yl(e,ml(e),n);break;case 5:var o=i.stateNode;32&i.flags&&(wt(o,""),i.flags&=-33),yl(e,ml(e),o);break;case 3:case 4:var s=i.stateNode.containerInfo;gl(e,ml(e),s);break;default:throw Error(a(161))}}catch(l){uu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Dl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Dl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Sl(e,t.alternate,t),t=t.sibling}function Bl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:sl(4,t,t.return),Bl(t);break;case 1:hl(t,t.return);var i=t.stateNode;"function"===typeof i.componentWillUnmount&&cl(t,t.return,i),Bl(t);break;case 27:Ch(t.stateNode);case 26:case 5:hl(t,t.return),Bl(t);break;case 22:null===t.memoizedState&&Bl(t);break;default:Bl(t)}e=e.sibling}}function Vl(e,t,i){for(i=i&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,n=e,o=t,a=o.flags;switch(o.tag){case 0:case 11:case 15:Vl(n,o,i),al(4,o);break;case 1:if(Vl(n,o,i),"function"===typeof(n=(r=o).stateNode).componentDidMount)try{n.componentDidMount()}catch(c){uu(r,r.return,c)}if(null!==(n=(r=o).updateQueue)){var s=r.stateNode;try{var l=n.shared.hiddenCallbacks;if(null!==l)for(n.shared.hiddenCallbacks=null,n=0;n<l.length;n++)ho(l[n],s)}catch(c){uu(r,r.return,c)}}i&&64&a&&ll(o),ul(o,o.return);break;case 27:_l(o);case 26:case 5:Vl(n,o,i),i&&null===r&&4&a&&dl(o),ul(o,o.return);break;case 12:Vl(n,o,i);break;case 13:Vl(n,o,i),i&&4&a&&Al(n,o);break;case 22:null===o.memoizedState&&Vl(n,o,i),ul(o,o.return);break;case 30:break;default:Vl(n,o,i)}t=t.sibling}}function Nl(e,t){var i=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(i=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==i&&(null!=e&&e.refCount++,null!=i&&Rn(i))}function Ul(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rn(e))}function jl(e,t,i,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,i,r),t=t.sibling}function Hl(e,t,i,r){var n=t.flags;switch(t.tag){case 0:case 11:case 15:jl(e,t,i,r),2048&n&&al(9,t);break;case 1:case 13:default:jl(e,t,i,r);break;case 3:jl(e,t,i,r),2048&n&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Rn(e)));break;case 12:if(2048&n){jl(e,t,i,r),e=t.stateNode;try{var o=t.memoizedProps,a=o.id,s=o.onPostCommit;"function"===typeof s&&s(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){uu(t,t.return,l)}}else jl(e,t,i,r);break;case 23:break;case 22:o=t.stateNode,a=t.alternate,null!==t.memoizedState?2&o._visibility?jl(e,t,i,r):Wl(e,t):2&o._visibility?jl(e,t,i,r):(o._visibility|=2,Zl(e,t,i,r,0!==(10256&t.subtreeFlags))),2048&n&&Nl(a,t);break;case 24:jl(e,t,i,r),2048&n&&Ul(t.alternate,t)}}function Zl(e,t,i,r,n){for(n=n&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var o=e,a=t,s=i,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Zl(o,a,s,l,n),al(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Zl(o,a,s,l,n):Wl(o,a):(u._visibility|=2,Zl(o,a,s,l,n)),n&&2048&c&&Nl(a.alternate,a);break;case 24:Zl(o,a,s,l,n),n&&2048&c&&Ul(a.alternate,a);break;default:Zl(o,a,s,l,n)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var i=e,r=t,n=r.flags;switch(r.tag){case 22:Wl(i,r),2048&n&&Nl(r.alternate,r);break;case 24:Wl(i,r),2048&n&&Ul(r.alternate,r);break;default:Wl(i,r)}t=t.sibling}}var Gl=8192;function ql(e){if(e.subtreeFlags&Gl)for(e=e.child;null!==e;)Xl(e),e=e.sibling}function Xl(e){switch(e.tag){case 26:ql(e),e.flags&Gl&&null!==e.memoizedState&&function(e,t,i){if(null===jh)throw Error(a(475));var r=jh;if("stylesheet"===t.type&&("string"!==typeof i.media||!1!==matchMedia(i.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var n=Ih(i.href),o=e.querySelector(Ah(n));if(o)return null!==(e=o._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Zh.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=o,void We(o);o=e.ownerDocument||e,i=kh(i),(n=wh.get(n))&&Dh(i,n),We(o=o.createElement("link"));var s=o;s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),eh(o,"link",i),t.instance=o}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Zh.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Ol,e.memoizedState,e.memoizedProps);break;case 5:default:ql(e);break;case 3:case 4:var t=Ol;Ol=Sh(e.stateNode.containerInfo),ql(e),Ol=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Gl,Gl=16777216,ql(e),Gl=t):ql(e))}}function Yl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Kl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];bl=r,$l(r,e)}Yl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)Jl(e),e=e.sibling}function Jl(e){switch(e.tag){case 0:case 11:case 15:Kl(e),2048&e.flags&&sl(9,e,e.return);break;case 3:case 12:default:Kl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Ql(e)):Kl(e)}}function Ql(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var i=0;i<t.length;i++){var r=t[i];bl=r,$l(r,e)}Yl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:sl(8,t,t.return),Ql(t);break;case 22:2&(i=t.stateNode)._visibility&&(i._visibility&=-3,Ql(t));break;default:Ql(t)}e=e.sibling}}function $l(e,t){for(;null!==bl;){var i=bl;switch(i.tag){case 0:case 11:case 15:sl(8,i,t);break;case 23:case 22:if(null!==i.memoizedState&&null!==i.memoizedState.cachePool){var r=i.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Rn(i.memoizedState.cache)}if(null!==(r=i.child))r.return=i,bl=r;else e:for(i=e;null!==bl;){var n=(r=bl).sibling,o=r.return;if(Ll(r),r===i){bl=null;break e}if(null!==n){n.return=o,bl=n;break e}bl=o}}}var ec={getCacheForType:function(e){var t=Tn(Pn),i=t.data.get(e);return void 0===i&&(i=e(),t.data.set(e,i)),i}},tc="function"===typeof WeakMap?WeakMap:Map,ic=0,rc=null,nc=null,oc=0,ac=0,sc=null,lc=!1,cc=!1,uc=!1,hc=0,dc=0,pc=0,fc=0,mc=0,gc=0,yc=0,_c=null,vc=null,xc=!1,Cc=0,wc=1/0,bc=null,Sc=null,Lc=0,Tc=null,Mc=null,Ec=0,Ic=0,Ac=null,kc=null,Pc=0,Oc=null;function Rc(){if(0!==(2&ic)&&0!==oc)return oc&-oc;if(null!==R.T){return 0!==Fn?Fn:Iu()}return Ae()}function zc(){0===gc&&(gc=0===(536870912&oc)||on?we():536870912);var e=ns.current;return null!==e&&(e.flags|=32),gc}function Dc(e,t,i){(e!==rc||2!==ac&&9!==ac)&&null===e.cancelPendingCommit||(Hc(e,0),Nc(e,oc,gc,!1)),Le(e,i),0!==(2&ic)&&e===rc||(e===rc&&(0===(2&ic)&&(fc|=i),4===dc&&Nc(e,oc,gc,!1)),wu(e))}function Fc(e,t,i){if(0!==(6&ic))throw Error(a(327));for(var r=!i&&0===(124&t)&&0===(t&e.expiredLanes)||xe(e,t),n=r?function(e,t){var i=ic;ic|=2;var r=Wc(),n=Gc();rc!==e||oc!==t?(bc=null,wc=te()+500,Hc(e,t)):cc=xe(e,t);e:for(;;)try{if(0!==ac&&null!==nc){t=nc;var o=sc;t:switch(ac){case 1:ac=0,sc=null,$c(e,t,o,1);break;case 2:case 9:if(Yn(o)){ac=0,sc=null,Qc(t);break}t=function(){2!==ac&&9!==ac||rc!==e||(ac=7),wu(e)},o.then(t,t);break e;case 3:ac=7;break e;case 4:ac=5;break e;case 7:Yn(o)?(ac=0,sc=null,Qc(t)):(ac=0,sc=null,$c(e,t,o,7));break;case 5:var s=null;switch(nc.tag){case 26:s=nc.memoizedState;case 5:case 27:var l=nc;if(!s||Uh(s)){ac=0,sc=null;var c=l.sibling;if(null!==c)nc=c;else{var u=l.return;null!==u?(nc=u,eu(u)):nc=null}break t}}ac=0,sc=null,$c(e,t,o,5);break;case 6:ac=0,sc=null,$c(e,t,o,6);break;case 8:jc(),dc=6;break e;default:throw Error(a(462))}}Kc();break}catch(h){Zc(e,h)}return _n=yn=null,R.H=r,R.A=n,ic=i,null!==nc?0:(rc=null,oc=0,Mr(),dc)}(e,t):Xc(e,t,!0),o=r;;){if(0===n){cc&&!r&&Nc(e,t,0,!1);break}if(i=e.current.alternate,!o||Vc(i)){if(2===n){if(o=t,e.errorRecoveryDisabledLanes&o)var s=0;else s=0!==(s=-536870913&e.pendingLanes)?s:536870912&s?536870912:0;if(0!==s){t=s;e:{var l=e;n=_c;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,s).flags|=256),2!==(s=Xc(l,s,!1))){if(uc&&!c){l.errorRecoveryDisabledLanes|=o,fc|=o,n=4;break e}o=vc,vc=n,null!==o&&(null===vc?vc=o:vc.push.apply(vc,o))}n=s}if(o=!1,2!==n)continue}}if(1===n){Hc(e,0),Nc(e,t,0,!0);break}e:{switch(r=e,o=n){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Nc(r,t,gc,!lc);break e;case 2:vc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(n=Cc+300-te())){if(Nc(r,t,gc,!lc),0!==ve(r,0,!0))break e;r.timeoutHandle=lh(Bc.bind(null,r,i,vc,bc,xc,t,gc,fc,yc,lc,o,2,-0,0),n)}else Bc(r,i,vc,bc,xc,t,gc,fc,yc,lc,o,0,-0,0)}break}n=Xc(e,t,!1),o=!1}wu(e)}function Bc(e,t,i,r,n,o,s,l,c,u,h,d,p,f){if(e.timeoutHandle=-1,(8192&(d=t.subtreeFlags)||16785408===(16785408&d))&&(jh={stylesheets:null,count:0,unsuspend:Hh},Xl(t),null!==(d=function(){if(null===jh)throw Error(a(475));var e=jh;return e.stylesheets&&0===e.count&&Gh(e,e.stylesheets),0<e.count?function(t){var i=setTimeout(function(){if(e.stylesheets&&Gh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(i)}}:null}())))return e.cancelPendingCommit=d(iu.bind(null,e,t,o,i,r,n,s,l,c,h,1,p,f)),void Nc(e,o,s,!u);iu(e,t,o,i,r,n,s,l,c)}function Vc(e){for(var t=e;;){var i=t.tag;if((0===i||11===i||15===i)&&16384&t.flags&&(null!==(i=t.updateQueue)&&null!==(i=i.stores)))for(var r=0;r<i.length;r++){var n=i[r],o=n.getSnapshot;n=n.value;try{if(!Xi(o(),n))return!1}catch(a){return!1}}if(i=t.child,16384&t.subtreeFlags&&null!==i)i.return=t,t=i;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Nc(e,t,i,r){t&=~mc,t&=~fc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var n=t;0<n;){var o=31-pe(n),a=1<<o;r[o]=-1,n&=~a}0!==i&&Te(e,i,t)}function Uc(){return 0!==(6&ic)||(bu(0,!1),!1)}function jc(){if(null!==nc){if(0===ac)var e=nc.return;else _n=yn=null,Bo(e=nc),Ya=null,Ka=0,e=nc;for(;null!==e;)ol(e.alternate,e),e=e.return;nc=null}}function Hc(e,t){var i=e.timeoutHandle;-1!==i&&(e.timeoutHandle=-1,ch(i)),null!==(i=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,i()),jc(),rc=e,nc=i=Fr(e.current,null),oc=t,ac=0,sc=null,lc=!1,cc=xe(e,t),uc=!1,yc=gc=mc=fc=pc=dc=0,vc=_c=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var n=31-pe(r),o=1<<n;t|=e[n],r&=~o}return hc=t,Mr(),i}function Zc(e,t){xo=null,R.H=Wa,t===Wn||t===qn?(t=$n(),ac=3):t===Gn?(t=$n(),ac=4):ac=t===Ts?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,sc=t,null===nc&&(dc=1,Cs(e,br(t,e.current)))}function Wc(){var e=R.H;return R.H=Wa,null===e?Wa:e}function Gc(){var e=R.A;return R.A=ec,e}function qc(){dc=4,lc||(4194048&oc)!==oc&&null!==ns.current||(cc=!0),0===(134217727&pc)&&0===(134217727&fc)||null===rc||Nc(rc,oc,gc,!1)}function Xc(e,t,i){var r=ic;ic|=2;var n=Wc(),o=Gc();rc===e&&oc===t||(bc=null,Hc(e,t)),t=!1;var a=dc;e:for(;;)try{if(0!==ac&&null!==nc){var s=nc,l=sc;switch(ac){case 8:jc(),a=6;break e;case 3:case 2:case 9:case 6:null===ns.current&&(t=!0);var c=ac;if(ac=0,sc=null,$c(e,s,l,c),i&&cc){a=0;break e}break;default:c=ac,ac=0,sc=null,$c(e,s,l,c)}}Yc(),a=dc;break}catch(u){Zc(e,u)}return t&&e.shellSuspendCounter++,_n=yn=null,ic=r,R.H=n,R.A=o,null===nc&&(rc=null,oc=0,Mr()),a}function Yc(){for(;null!==nc;)Jc(nc)}function Kc(){for(;null!==nc&&!$();)Jc(nc)}function Jc(e){var t=Js(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?eu(e):nc=t}function Qc(e){var t=e,i=t.alternate;switch(t.tag){case 15:case 0:t=Ds(i,t,t.pendingProps,t.type,void 0,oc);break;case 11:t=Ds(i,t,t.pendingProps,t.type.render,t.ref,oc);break;case 5:Bo(t);default:ol(i,t),t=Js(i,t=nc=Br(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?eu(e):nc=t}function $c(e,t,i,r){_n=yn=null,Bo(t),Ya=null,Ka=0;var n=t.return;try{if(function(e,t,i,r,n){if(i.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=i.alternate)&&bn(t,i,n,!0),null!==(i=ns.current)){switch(i.tag){case 13:return null===os?qc():null===i.alternate&&0===dc&&(dc=3),i.flags&=-257,i.flags|=65536,i.lanes=n,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?i.updateQueue=new Set([r]):t.add(r),hu(e,r,n)),!1;case 22:return i.flags|=65536,r===Xn?i.flags|=16384:(null===(t=i.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},i.updateQueue=t):null===(i=t.retryQueue)?t.retryQueue=new Set([r]):i.add(r),hu(e,r,n)),!1}throw Error(a(435,i.tag))}return hu(e,r,n),qc(),!1}if(on)return null!==(t=ns.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=n,r!==ln&&mn(br(e=Error(a(422),{cause:r}),i))):(r!==ln&&mn(br(t=Error(a(423),{cause:r}),i)),(e=e.current.alternate).flags|=65536,n&=-n,e.lanes|=n,r=br(r,i),so(e,n=bs(e.stateNode,r,n)),4!==dc&&(dc=2)),!1;var o=Error(a(520),{cause:r});if(o=br(o,i),null===_c?_c=[o]:_c.push(o),4!==dc&&(dc=2),null===t)return!0;r=br(r,i),i=t;do{switch(i.tag){case 3:return i.flags|=65536,e=n&-n,i.lanes|=e,so(i,e=bs(i.stateNode,r,e)),!1;case 1:if(t=i.type,o=i.stateNode,0===(128&i.flags)&&("function"===typeof t.getDerivedStateFromError||null!==o&&"function"===typeof o.componentDidCatch&&(null===Sc||!Sc.has(o))))return i.flags|=65536,n&=-n,i.lanes|=n,Ls(n=Ss(n),e,i,r),so(i,n),!1}i=i.return}while(null!==i);return!1}(e,n,t,i,oc))return dc=1,Cs(e,br(i,e.current)),void(nc=null)}catch(o){if(null!==n)throw nc=n,o;return dc=1,Cs(e,br(i,e.current)),void(nc=null)}32768&t.flags?(on||1===r?e=!0:cc||0!==(536870912&oc)?e=!1:(lc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=ns.current)&&13===r.tag&&(r.flags|=16384))),tu(t,e)):eu(t)}function eu(e){var t=e;do{if(0!==(32768&t.flags))return void tu(t,lc);e=t.return;var i=rl(t.alternate,t,hc);if(null!==i)return void(nc=i);if(null!==(t=t.sibling))return void(nc=t);nc=t=e}while(null!==t);0===dc&&(dc=5)}function tu(e,t){do{var i=nl(e.alternate,e);if(null!==i)return i.flags&=32767,void(nc=i);if(null!==(i=e.return)&&(i.flags|=32768,i.subtreeFlags=0,i.deletions=null),!t&&null!==(e=e.sibling))return void(nc=e);nc=e=i}while(null!==e);dc=6,nc=null}function iu(e,t,i,r,n,o,s,l,c){e.cancelPendingCommit=null;do{su()}while(0!==Lc);if(0!==(6&ic))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(o=t.lanes|t.childLanes,function(e,t,i,r,n,o){var a=e.pendingLanes;e.pendingLanes=i,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=i,e.entangledLanes&=i,e.errorRecoveryDisabledLanes&=i,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(i=a&~i;0<i;){var u=31-pe(i),h=1<<u;s[u]=0,l[u]=-1;var d=c[u];if(null!==d)for(c[u]=null,u=0;u<d.length;u++){var p=d[u];null!==p&&(p.lane&=-536870913)}i&=~h}0!==r&&Te(e,r,0),0!==o&&0===n&&0!==e.tag&&(e.suspendedLanes|=o&~(a&~t))}(e,i,o|=Tr,s,l,c),e===rc&&(nc=rc=null,oc=0),Mc=t,Tc=e,Ec=i,Ic=o,Ac=n,kc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(oe,function(){return lu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=R.T,R.T=null,n=z.p,z.p=2,s=ic,ic|=4;try{!function(e,t){if(e=e.containerInfo,th=id,er(e=$i(e))){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(i=(i=e.ownerDocument)&&i.defaultView||window).getSelection&&i.getSelection();if(r&&0!==r.rangeCount){i=r.anchorNode;var n=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{i.nodeType,o.nodeType}catch(g){i=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,p=null;t:for(;;){for(var f;d!==i||0!==n&&3!==d.nodeType||(l=s+n),d!==o||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(f=d.firstChild);)p=d,d=f;for(;;){if(d===e)break t;if(p===i&&++u===n&&(l=s),p===o&&++h===r&&(c=s),null!==(f=d.nextSibling))break;p=(d=p).parentNode}d=f}i=-1===l||-1===c?null:{start:l,end:c}}else i=null}i=i||{start:0,end:0}}else i=null;for(ih={focusedElem:e,selectionRange:i},id=!1,bl=t;null!==bl;)if(e=(t=bl).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,bl=e;else for(;null!==bl;){switch(o=(t=bl).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==o){e=void 0,i=t,n=o.memoizedProps,o=o.memoizedState,r=i.stateNode;try{var m=gs(i.type,n,(i.elementType,i.type));e=r.getSnapshotBeforeUpdate(m,o),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){uu(i,i.return,y)}}break;case 3:if(0!==(1024&e))if(9===(i=(e=t.stateNode.containerInfo).nodeType))mh(e);else if(1===i)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":mh(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,bl=e;break}bl=t.return}}(e,t)}finally{ic=s,z.p=n,R.T=r}}Lc=1,ru(),nu(),ou()}}function ru(){if(1===Lc){Lc=0;var e=Tc,t=Mc,i=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||i){i=R.T,R.T=null;var r=z.p;z.p=2;var n=ic;ic|=4;try{Rl(t,e);var o=ih,a=$i(e.containerInfo),s=o.focusedElem,l=o.selectionRange;if(a!==s&&s&&s.ownerDocument&&Qi(s.ownerDocument.documentElement,s)){if(null!==l&&er(s)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var h=s.ownerDocument||document,d=h&&h.defaultView||window;if(d.getSelection){var p=d.getSelection(),f=s.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(a=g,g=m,m=a);var y=Ji(s,m),_=Ji(s,g);if(y&&_&&(1!==p.rangeCount||p.anchorNode!==y.node||p.anchorOffset!==y.offset||p.focusNode!==_.node||p.focusOffset!==_.offset)){var v=h.createRange();v.setStart(y.node,y.offset),p.removeAllRanges(),m>g?(p.addRange(v),p.extend(_.node,_.offset)):(v.setEnd(_.node,_.offset),p.addRange(v))}}}}for(h=[],p=s;p=p.parentNode;)1===p.nodeType&&h.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<h.length;s++){var x=h[s];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}id=!!th,ih=th=null}finally{ic=n,z.p=r,R.T=i}}e.current=t,Lc=2}}function nu(){if(2===Lc){Lc=0;var e=Tc,t=Mc,i=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||i){i=R.T,R.T=null;var r=z.p;z.p=2;var n=ic;ic|=4;try{Sl(e,t.alternate,t)}finally{ic=n,z.p=r,R.T=i}}Lc=3}}function ou(){if(4===Lc||3===Lc){Lc=0,ee();var e=Tc,t=Mc,i=Ec,r=kc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Lc=5:(Lc=0,Mc=Tc=null,au(e,e.pendingLanes));var n=e.pendingLanes;if(0===n&&(Sc=null),Ie(i),t=t.stateNode,he&&"function"===typeof he.onCommitFiberRoot)try{he.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=R.T,n=z.p,z.p=2,R.T=null;try{for(var o=e.onRecoverableError,a=0;a<r.length;a++){var s=r[a];o(s.value,{componentStack:s.stack})}}finally{R.T=t,z.p=n}}0!==(3&Ec)&&su(),wu(e),n=e.pendingLanes,0!==(4194090&i)&&0!==(42&n)?e===Oc?Pc++:(Pc=0,Oc=e):Pc=0,bu(0,!1)}}function au(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Rn(t)))}function su(e){return ru(),nu(),ou(),lu()}function lu(){if(5!==Lc)return!1;var e=Tc,t=Ic;Ic=0;var i=Ie(Ec),r=R.T,n=z.p;try{z.p=32>i?32:i,R.T=null,i=Ac,Ac=null;var o=Tc,s=Ec;if(Lc=0,Mc=Tc=null,Ec=0,0!==(6&ic))throw Error(a(331));var l=ic;if(ic|=4,Jl(o.current),Hl(o,o.current,s,i),ic=l,bu(0,!1),he&&"function"===typeof he.onPostCommitFiberRoot)try{he.onPostCommitFiberRoot(ue,o)}catch(c){}return!0}finally{z.p=n,R.T=r,au(e,t)}}function cu(e,t,i){t=br(i,t),null!==(e=oo(e,t=bs(e.stateNode,t,2),2))&&(Le(e,2),wu(e))}function uu(e,t,i){if(3===e.tag)cu(e,e,i);else for(;null!==t;){if(3===t.tag){cu(t,e,i);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Sc||!Sc.has(r))){e=br(i,e),null!==(r=oo(t,i=Ss(2),2))&&(Ls(i,r,t,e),Le(r,2),wu(r));break}}t=t.return}}function hu(e,t,i){var r=e.pingCache;if(null===r){r=e.pingCache=new tc;var n=new Set;r.set(t,n)}else void 0===(n=r.get(t))&&(n=new Set,r.set(t,n));n.has(i)||(uc=!0,n.add(i),e=du.bind(null,e,t,i),t.then(e,e))}function du(e,t,i){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&i,e.warmLanes&=~i,rc===e&&(oc&i)===i&&(4===dc||3===dc&&(62914560&oc)===oc&&300>te()-Cc?0===(2&ic)&&Hc(e,0):mc|=i,yc===oc&&(yc=0)),wu(e)}function pu(e,t){0===t&&(t=be()),null!==(e=Ar(e,t))&&(Le(e,t),wu(e))}function fu(e){var t=e.memoizedState,i=0;null!==t&&(i=t.retryLane),pu(e,i)}function mu(e,t){var i=0;switch(e.tag){case 13:var r=e.stateNode,n=e.memoizedState;null!==n&&(i=n.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),pu(e,i)}var gu=null,yu=null,_u=!1,vu=!1,xu=!1,Cu=0;function wu(e){e!==yu&&null===e.next&&(null===yu?gu=yu=e:yu=yu.next=e),vu=!0,_u||(_u=!0,hh(function(){0!==(6&ic)?J(re,Su):Lu()}))}function bu(e,t){if(!xu&&vu){xu=!0;do{for(var i=!1,r=gu;null!==r;){if(!t)if(0!==e){var n=r.pendingLanes;if(0===n)var o=0;else{var a=r.suspendedLanes,s=r.pingedLanes;o=(1<<31-pe(42|e)+1)-1,o=201326741&(o&=n&~(a&~s))?201326741&o|1:o?2|o:0}0!==o&&(i=!0,Eu(r,o))}else o=oc,0===(3&(o=ve(r,r===rc?o:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||xe(r,o)||(i=!0,Eu(r,o));r=r.next}}while(i);xu=!1}}function Su(){Lu()}function Lu(){vu=_u=!1;var e=0;0!==Cu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==sh&&(sh=e,!0);return sh=null,!1}()&&(e=Cu),Cu=0);for(var t=te(),i=null,r=gu;null!==r;){var n=r.next,o=Tu(r,t);0===o?(r.next=null,null===i?gu=n:i.next=n,null===n&&(yu=i)):(i=r,(0!==e||0!==(3&o))&&(vu=!0)),r=n}bu(e,!1)}function Tu(e,t){for(var i=e.suspendedLanes,r=e.pingedLanes,n=e.expirationTimes,o=-62914561&e.pendingLanes;0<o;){var a=31-pe(o),s=1<<a,l=n[a];-1===l?0!==(s&i)&&0===(s&r)||(n[a]=Ce(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}if(i=oc,i=ve(e,e===(t=rc)?i:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===i||e===t&&(2===ac||9===ac)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&Q(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&i)||xe(e,i)){if((t=i&-i)===e.callbackPriority)return t;switch(null!==r&&Q(r),Ie(i)){case 2:case 8:i=ne;break;case 32:default:i=oe;break;case 268435456:i=se}return r=Mu.bind(null,e),i=J(i,r),e.callbackPriority=t,e.callbackNode=i,t}return null!==r&&null!==r&&Q(r),e.callbackPriority=2,e.callbackNode=null,2}function Mu(e,t){if(0!==Lc&&5!==Lc)return e.callbackNode=null,e.callbackPriority=0,null;var i=e.callbackNode;if(su()&&e.callbackNode!==i)return null;var r=oc;return 0===(r=ve(e,e===rc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===i?Mu.bind(null,e):null)}function Eu(e,t){if(su())return null;Fc(e,t,!0)}function Iu(){return 0===Cu&&(Cu=we()),Cu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function ku(e,t){var i=t.ownerDocument.createElement("input");return i.name=t.name,i.value=t.value,e.id&&i.setAttribute("form",e.id),t.parentNode.insertBefore(i,t),e=new FormData(e),i.parentNode.removeChild(i),e}for(var Pu=0;Pu<xr.length;Pu++){var Ou=xr[Pu];Cr(Ou.toLowerCase(),"on"+(Ou[0].toUpperCase()+Ou.slice(1)))}Cr(dr,"onAnimationEnd"),Cr(pr,"onAnimationIteration"),Cr(fr,"onAnimationStart"),Cr("dblclick","onDoubleClick"),Cr("focusin","onFocus"),Cr("focusout","onBlur"),Cr(mr,"onTransitionRun"),Cr(gr,"onTransitionStart"),Cr(yr,"onTransitionCancel"),Cr(_r,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Xe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ru="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),zu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ru));function Du(e,t){t=0!==(4&t);for(var i=0;i<e.length;i++){var r=e[i],n=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&n.isPropagationStopped())break e;o=s,n.currentTarget=c;try{o(n)}catch(u){ys(u)}n.currentTarget=null,o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&n.isPropagationStopped())break e;o=s,n.currentTarget=c;try{o(n)}catch(u){ys(u)}n.currentTarget=null,o=l}}}}function Fu(e,t){var i=t[ze];void 0===i&&(i=t[ze]=new Set);var r=e+"__bubble";i.has(r)||(Uu(t,e,2,!1),i.add(r))}function Bu(e,t,i){var r=0;t&&(r|=4),Uu(i,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function Nu(e){if(!e[Vu]){e[Vu]=!0,Ge.forEach(function(t){"selectionchange"!==t&&(zu.has(t)||Bu(t,!1,e),Bu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Bu("selectionchange",!1,t))}}function Uu(e,t,i,r){switch(cd(t)){case 2:var n=rd;break;case 8:n=nd;break;default:n=od}i=n.bind(null,t,i,e),n=void 0,!Vt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(n=!0),r?void 0!==n?e.addEventListener(t,i,{capture:!0,passive:n}):e.addEventListener(t,i,!0):void 0!==n?e.addEventListener(t,i,{passive:n}):e.addEventListener(t,i,!1)}function ju(e,t,i,r,n){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===n)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===n)return;a=a.return}for(;null!==s;){if(null===(a=Ue(s)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=o=a;continue e}s=s.parentNode}}r=r.return}Dt(function(){var r=o,n=kt(i),a=[];e:{var s=vr.get(e);if(void 0!==s){var c=$t,u=e;switch(e){case"keypress":if(0===Wt(i))break e;case"keydown":case"keyup":c=fi;break;case"focusin":u="focus",c=oi;break;case"focusout":u="blur",c=oi;break;case"beforeblur":case"afterblur":c=oi;break;case"click":if(2===i.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=ri;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ni;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=gi;break;case dr:case pr:case fr:c=ai;break;case _r:c=yi;break;case"scroll":case"scrollend":c=ti;break;case"wheel":c=_i;break;case"copy":case"cut":case"paste":c=si;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=mi;break;case"toggle":case"beforetoggle":c=vi}var h=0!==(4&t),d=!h&&("scroll"===e||"scrollend"===e),p=h?null!==s?s+"Capture":null:s;h=[];for(var f,m=r;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=Ft(m,p))&&h.push(Hu(m,g,f)),d)break;m=m.return}0<h.length&&(s=new c(s,u,null,i,n),a.push({event:s,listeners:h}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||i===At||!(u=i.relatedTarget||i.fromElement)||!Ue(u)&&!u[Re])&&(c||s)&&(s=n.window===n?n:(s=n.ownerDocument)?s.defaultView||s.parentWindow:window,c?(c=r,null!==(u=(u=i.relatedTarget||i.toElement)?Ue(u):null)&&(d=l(u),h=u.tag,u!==d||5!==h&&27!==h&&6!==h)&&(u=null)):(c=null,u=r),c!==u)){if(h=ri,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(h=mi,g="onPointerLeave",p="onPointerEnter",m="pointer"),d=null==c?s:He(c),f=null==u?s:He(u),(s=new h(g,m+"leave",c,i,n)).target=d,s.relatedTarget=f,g=null,Ue(n)===r&&((h=new h(p,m+"enter",u,i,n)).target=f,h.relatedTarget=d,g=h),d=g,c&&u)e:{for(p=u,m=0,f=h=c;f;f=Wu(f))m++;for(f=0,g=p;g;g=Wu(g))f++;for(;0<m-f;)h=Wu(h),m--;for(;0<f-m;)p=Wu(p),f--;for(;m--;){if(h===p||null!==p&&h===p.alternate)break e;h=Wu(h),p=Wu(p)}h=null}else h=null;null!==c&&Gu(a,s,c,h,!1),null!==u&&null!==d&&Gu(a,d,u,h,!0)}if("select"===(c=(s=r?He(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===c&&"file"===s.type)var y=Fi;else if(ki(s))if(Bi)y=qi;else{y=Wi;var _=Zi}else!(c=s.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==s.type&&"radio"!==s.type?r&&Tt(r.elementType)&&(y=Fi):y=Gi;switch(y&&(y=y(e,r))?Pi(a,y,i,n):(_&&_(e,s,r),"focusout"===e&&r&&"number"===s.type&&null!=r.memoizedProps.value&&_t(s,"number",s.value)),_=r?He(r):window,e){case"focusin":(ki(_)||"true"===_.contentEditable)&&(ir=_,rr=r,nr=null);break;case"focusout":nr=rr=ir=null;break;case"mousedown":or=!0;break;case"contextmenu":case"mouseup":case"dragend":or=!1,ar(a,i,n);break;case"selectionchange":if(tr)break;case"keydown":case"keyup":ar(a,i,n)}var v;if(Ci)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Ii?Mi(e,i)&&(x="onCompositionEnd"):"keydown"===e&&229===i.keyCode&&(x="onCompositionStart");x&&(Si&&"ko"!==i.locale&&(Ii||"onCompositionStart"!==x?"onCompositionEnd"===x&&Ii&&(v=Zt()):(jt="value"in(Ut=n)?Ut.value:Ut.textContent,Ii=!0)),0<(_=Zu(r,x)).length&&(x=new li(x,e,null,i,n),a.push({event:x,listeners:_}),v?x.data=v:null!==(v=Ei(i))&&(x.data=v))),(v=bi?function(e,t){switch(e){case"compositionend":return Ei(t);case"keypress":return 32!==t.which?null:(Ti=!0,Li);case"textInput":return(e=t.data)===Li&&Ti?null:e;default:return null}}(e,i):function(e,t){if(Ii)return"compositionend"===e||!Ci&&Mi(e,t)?(e=Zt(),Ht=jt=Ut=null,Ii=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Si&&"ko"!==t.locale?null:t.data}}(e,i))&&(0<(x=Zu(r,"onBeforeInput")).length&&(_=new li("onBeforeInput","beforeinput",null,i,n),a.push({event:_,listeners:x}),_.data=v)),function(e,t,i,r,n){if("submit"===t&&i&&i.stateNode===n){var o=Au((n[Oe]||null).action),a=r.submitter;a&&null!==(t=(t=a[Oe]||null)?Au(t.formAction):a.getAttribute("formAction"))&&(o=t,a=null);var s=new $t("action","action",null,r,n);e.push({event:s,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Cu){var e=a?ku(n,a):new FormData(n);ka(i,{pending:!0,data:e,method:n.method,action:o},null,e)}}else"function"===typeof o&&(s.preventDefault(),e=a?ku(n,a):new FormData(n),ka(i,{pending:!0,data:e,method:n.method,action:o},o,e))},currentTarget:n}]})}}(a,e,r,i,n)}Du(a,t)})}function Hu(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Zu(e,t){for(var i=t+"Capture",r=[];null!==e;){var n=e,o=n.stateNode;if(5!==(n=n.tag)&&26!==n&&27!==n||null===o||(null!=(n=Ft(e,i))&&r.unshift(Hu(e,n,o)),null!=(n=Ft(e,t))&&r.push(Hu(e,n,o))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Gu(e,t,i,r,n){for(var o=t._reactName,a=[];null!==i&&i!==r;){var s=i,l=s.alternate,c=s.stateNode;if(s=s.tag,null!==l&&l===r)break;5!==s&&26!==s&&27!==s||null===c||(l=c,n?null!=(c=Ft(i,o))&&a.unshift(Hu(i,c,l)):n||null!=(c=Ft(i,o))&&a.push(Hu(i,c,l))),i=i.return}0!==a.length&&e.push({event:t,listeners:a})}var qu=/\r\n?/g,Xu=/\u0000|\uFFFD/g;function Yu(e){return("string"===typeof e?e:""+e).replace(qu,"\n").replace(Xu,"")}function Ku(e,t){return t=Yu(t),Yu(e)===t}function Ju(){}function Qu(e,t,i,r,n,o){switch(i){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||wt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&wt(e,""+r);break;case"className":it(e,"class",r);break;case"tabIndex":it(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":it(e,i,r);break;case"style":Lt(e,r,o);break;case"data":if("object"!==t){it(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==i)){e.removeAttribute(i);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(i);break}r=It(""+r),e.setAttribute(i,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(i,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof o&&("formAction"===i?("input"!==t&&Qu(e,t,"name",n.name,n,null),Qu(e,t,"formEncType",n.formEncType,n,null),Qu(e,t,"formMethod",n.formMethod,n,null),Qu(e,t,"formTarget",n.formTarget,n,null)):(Qu(e,t,"encType",n.encType,n,null),Qu(e,t,"method",n.method,n,null),Qu(e,t,"target",n.target,n,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(i);break}r=It(""+r),e.setAttribute(i,r);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(a(60));e.innerHTML=i}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}i=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",i);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,""+r):e.removeAttribute(i);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,""):e.removeAttribute(i);break;case"capture":case"download":!0===r?e.setAttribute(i,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(i,r):e.removeAttribute(i);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(i,r):e.removeAttribute(i);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(i):e.setAttribute(i,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<i.length)||"o"!==i[0]&&"O"!==i[0]||"n"!==i[1]&&"N"!==i[1])&&tt(e,i=Mt.get(i)||i,r)}}function $u(e,t,i,r,n,o){switch(i){case"style":Lt(e,r,o);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(i=r.__html)){if(null!=n.children)throw Error(a(60));e.innerHTML=i}}break;case"children":"string"===typeof r?wt(e,r):("number"===typeof r||"bigint"===typeof r)&&wt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Ju);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:qe.hasOwnProperty(i)||("o"!==i[0]||"n"!==i[1]||(n=i.endsWith("Capture"),t=i.slice(2,n?i.length-7:void 0),"function"===typeof(o=null!=(o=e[Oe]||null)?o[i]:null)&&e.removeEventListener(t,o,n),"function"!==typeof r)?i in e?e[i]=r:!0===r?e.setAttribute(i,""):tt(e,i,r):("function"!==typeof o&&null!==o&&(i in e?e[i]=null:e.hasAttribute(i)&&e.removeAttribute(i)),e.addEventListener(t,r,n)))}}function eh(e,t,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,n=!1,o=!1;for(r in i)if(i.hasOwnProperty(r)){var s=i[r];if(null!=s)switch(r){case"src":n=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Qu(e,t,r,s,i,null)}}return o&&Qu(e,t,"srcSet",i.srcSet,i,null),void(n&&Qu(e,t,"src",i.src,i,null));case"input":Fu("invalid",e);var l=r=s=o=null,c=null,u=null;for(n in i)if(i.hasOwnProperty(n)){var h=i[n];if(null!=h)switch(n){case"name":o=h;break;case"type":s=h;break;case"checked":c=h;break;case"defaultChecked":u=h;break;case"value":r=h;break;case"defaultValue":l=h;break;case"children":case"dangerouslySetInnerHTML":if(null!=h)throw Error(a(137,t));break;default:Qu(e,t,n,h,i,null)}}return yt(e,r,l,c,u,s,o,!1),void ht(e);case"select":for(o in Fu("invalid",e),n=s=r=null,i)if(i.hasOwnProperty(o)&&null!=(l=i[o]))switch(o){case"value":r=l;break;case"defaultValue":s=l;break;case"multiple":n=l;default:Qu(e,t,o,l,i,null)}return t=r,i=s,e.multiple=!!n,void(null!=t?vt(e,!!n,t,!1):null!=i&&vt(e,!!n,i,!0));case"textarea":for(s in Fu("invalid",e),r=o=n=null,i)if(i.hasOwnProperty(s)&&null!=(l=i[s]))switch(s){case"value":n=l;break;case"defaultValue":o=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Qu(e,t,s,l,i,null)}return Ct(e,n,o,r),void ht(e);case"option":for(c in i)if(i.hasOwnProperty(c)&&null!=(n=i[c]))if("selected"===c)e.selected=n&&"function"!==typeof n&&"symbol"!==typeof n;else Qu(e,t,c,n,i,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(n=0;n<Ru.length;n++)Fu(Ru[n],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in i)if(i.hasOwnProperty(u)&&null!=(n=i[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Qu(e,t,u,n,i,null)}return;default:if(Tt(t)){for(h in i)i.hasOwnProperty(h)&&(void 0!==(n=i[h])&&$u(e,t,h,n,i,void 0));return}}for(l in i)i.hasOwnProperty(l)&&(null!=(n=i[l])&&Qu(e,t,l,n,i,null))}var th=null,ih=null;function rh(e){return 9===e.nodeType?e:e.ownerDocument}function nh(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function oh(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function ah(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sh=null;var lh="function"===typeof setTimeout?setTimeout:void 0,ch="function"===typeof clearTimeout?clearTimeout:void 0,uh="function"===typeof Promise?Promise:void 0,hh="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof uh?function(e){return uh.resolve(null).then(e).catch(dh)}:lh;function dh(e){setTimeout(function(){throw e})}function ph(e){return"head"===e}function fh(e,t){var i=t,r=0,n=0;do{var o=i.nextSibling;if(e.removeChild(i),o&&8===o.nodeType)if("/$"===(i=o.data)){if(0<r&&8>r){i=r;var a=e.ownerDocument;if(1&i&&Ch(a.documentElement),2&i&&Ch(a.body),4&i)for(Ch(i=a.head),a=i.firstChild;a;){var s=a.nextSibling,l=a.nodeName;a[Ve]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||i.removeChild(a),a=s}}if(0===n)return e.removeChild(o),void Md(t);n--}else"$"===i||"$?"===i||"$!"===i?n++:r=i.charCodeAt(0)-48;else r=0;i=o}while(i);Md(t)}function mh(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var i=t;switch(t=t.nextSibling,i.nodeName){case"HTML":case"HEAD":case"BODY":mh(i),Ne(i);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===i.rel.toLowerCase())continue}e.removeChild(i)}}function gh(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function yh(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var _h=null;function vh(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var i=e.data;if("$"===i||"$!"===i||"$?"===i){if(0===t)return e;t--}else"/$"===i&&t++}e=e.previousSibling}return null}function xh(e,t,i){switch(t=rh(i),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ch(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ne(e)}var wh=new Map,bh=new Set;function Sh(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Lh=z.d;z.d={f:function(){var e=Lh.f(),t=Uc();return e||t},r:function(e){var t=je(e);null!==t&&5===t.tag&&"form"===t.type?Oa(t):Lh.r(e)},D:function(e){Lh.D(e),Mh("dns-prefetch",e,null)},C:function(e,t){Lh.C(e,t),Mh("preconnect",e,t)},L:function(e,t,i){Lh.L(e,t,i);var r=Th;if(r&&e&&t){var n='link[rel="preload"][as="'+mt(t)+'"]';"image"===t&&i&&i.imageSrcSet?(n+='[imagesrcset="'+mt(i.imageSrcSet)+'"]',"string"===typeof i.imageSizes&&(n+='[imagesizes="'+mt(i.imageSizes)+'"]')):n+='[href="'+mt(e)+'"]';var o=n;switch(t){case"style":o=Ih(e);break;case"script":o=Ph(e)}wh.has(o)||(e=d({rel:"preload",href:"image"===t&&i&&i.imageSrcSet?void 0:e,as:t},i),wh.set(o,e),null!==r.querySelector(n)||"style"===t&&r.querySelector(Ah(o))||"script"===t&&r.querySelector(Oh(o))||(eh(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}},m:function(e,t){Lh.m(e,t);var i=Th;if(i&&e){var r=t&&"string"===typeof t.as?t.as:"script",n='link[rel="modulepreload"][as="'+mt(r)+'"][href="'+mt(e)+'"]',o=n;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":o=Ph(e)}if(!wh.has(o)&&(e=d({rel:"modulepreload",href:e},t),wh.set(o,e),null===i.querySelector(n))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(i.querySelector(Oh(o)))return}eh(r=i.createElement("link"),"link",e),We(r),i.head.appendChild(r)}}},X:function(e,t){Lh.X(e,t);var i=Th;if(i&&e){var r=Ze(i).hoistableScripts,n=Ph(e),o=r.get(n);o||((o=i.querySelector(Oh(n)))||(e=d({src:e,async:!0},t),(t=wh.get(n))&&Fh(e,t),We(o=i.createElement("script")),eh(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(n,o))}},S:function(e,t,i){Lh.S(e,t,i);var r=Th;if(r&&e){var n=Ze(r).hoistableStyles,o=Ih(e);t=t||"default";var a=n.get(o);if(!a){var s={loading:0,preload:null};if(a=r.querySelector(Ah(o)))s.loading=5;else{e=d({rel:"stylesheet",href:e,"data-precedence":t},i),(i=wh.get(o))&&Dh(e,i);var l=a=r.createElement("link");We(l),eh(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,zh(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:s},n.set(o,a)}}},M:function(e,t){Lh.M(e,t);var i=Th;if(i&&e){var r=Ze(i).hoistableScripts,n=Ph(e),o=r.get(n);o||((o=i.querySelector(Oh(n)))||(e=d({src:e,async:!0,type:"module"},t),(t=wh.get(n))&&Fh(e,t),We(o=i.createElement("script")),eh(o,"link",e),i.head.appendChild(o)),o={type:"script",instance:o,count:1,state:null},r.set(n,o))}}};var Th="undefined"===typeof document?null:document;function Mh(e,t,i){var r=Th;if(r&&"string"===typeof t&&t){var n=mt(t);n='link[rel="'+e+'"][href="'+n+'"]',"string"===typeof i&&(n+='[crossorigin="'+i+'"]'),bh.has(n)||(bh.add(n),e={rel:e,crossOrigin:i,href:t},null===r.querySelector(n)&&(eh(t=r.createElement("link"),"link",e),We(t),r.head.appendChild(t)))}}function Eh(e,t,i,r){var n,o,s,l,c=(c=Z.current)?Sh(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof i.precedence&&"string"===typeof i.href?(t=Ih(i.href),(r=(i=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===i.rel&&"string"===typeof i.href&&"string"===typeof i.precedence){e=Ih(i.href);var u=Ze(c).hoistableStyles,h=u.get(e);if(h||(c=c.ownerDocument||c,h={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,h),(u=c.querySelector(Ah(e)))&&!u._p&&(h.instance=u,h.state.loading=5),wh.has(e)||(i={rel:"preload",as:"style",href:i.href,crossOrigin:i.crossOrigin,integrity:i.integrity,media:i.media,hrefLang:i.hrefLang,referrerPolicy:i.referrerPolicy},wh.set(e,i),u||(n=c,o=e,s=i,l=h.state,n.querySelector('link[rel="preload"][as="style"]['+o+"]")?l.loading=1:(o=n.createElement("link"),l.preload=o,o.addEventListener("load",function(){return l.loading|=1}),o.addEventListener("error",function(){return l.loading|=2}),eh(o,"link",s),We(o),n.head.appendChild(o))))),t&&null===r)throw Error(a(528,""));return h}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=i.async,"string"===typeof(i=i.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Ph(i),(r=(i=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},i.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Ih(e){return'href="'+mt(e)+'"'}function Ah(e){return'link[rel="stylesheet"]['+e+"]"}function kh(e){return d({},e,{"data-precedence":e.precedence,precedence:null})}function Ph(e){return'[src="'+mt(e)+'"]'}function Oh(e){return"script[async]"+e}function Rh(e,t,i){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+mt(i.href)+'"]');if(r)return t.instance=r,We(r),r;var n=d({},i,{"data-href":i.href,"data-precedence":i.precedence,href:null,precedence:null});return We(r=(e.ownerDocument||e).createElement("style")),eh(r,"style",n),zh(r,i.precedence,e),t.instance=r;case"stylesheet":n=Ih(i.href);var o=e.querySelector(Ah(n));if(o)return t.state.loading|=4,t.instance=o,We(o),o;r=kh(i),(n=wh.get(n))&&Dh(r,n),We(o=(e.ownerDocument||e).createElement("link"));var s=o;return s._p=new Promise(function(e,t){s.onload=e,s.onerror=t}),eh(o,"link",r),t.state.loading|=4,zh(o,i.precedence,e),t.instance=o;case"script":return o=Ph(i.src),(n=e.querySelector(Oh(o)))?(t.instance=n,We(n),n):(r=i,(n=wh.get(o))&&Fh(r=d({},i),n),We(n=(e=e.ownerDocument||e).createElement("script")),eh(n,"link",r),e.head.appendChild(n),t.instance=n);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,zh(r,i.precedence,e));return t.instance}function zh(e,t,i){for(var r=i.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),n=r.length?r[r.length-1]:null,o=n,a=0;a<r.length;a++){var s=r[a];if(s.dataset.precedence===t)o=s;else if(o!==n)break}o?o.parentNode.insertBefore(e,o.nextSibling):(t=9===i.nodeType?i.head:i).insertBefore(e,t.firstChild)}function Dh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Bh=null;function Vh(e,t,i){if(null===Bh){var r=new Map,n=Bh=new Map;n.set(i,r)}else(r=(n=Bh).get(i))||(r=new Map,n.set(i,r));if(r.has(e))return r;for(r.set(e,null),i=i.getElementsByTagName(e),n=0;n<i.length;n++){var o=i[n];if(!(o[Ve]||o[Pe]||"link"===e&&"stylesheet"===o.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==o.namespaceURI){var a=o.getAttribute(t)||"";a=e+a;var s=r.get(a);s?s.push(o):r.set(a,[o])}}return r}function Nh(e,t,i){(e=e.ownerDocument||e).head.insertBefore(i,"title"===t?e.querySelector("head > title"):null)}function Uh(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var jh=null;function Hh(){}function Zh(){if(this.count--,0===this.count)if(this.stylesheets)Gh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wh=null;function Gh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wh=new Map,t.forEach(qh,e),Wh=null,Zh.call(e))}function qh(e,t){if(!(4&t.state.loading)){var i=Wh.get(e);if(i)var r=i.get(null);else{i=new Map,Wh.set(e,i);for(var n=e.querySelectorAll("link[data-precedence],style[data-precedence]"),o=0;o<n.length;o++){var a=n[o];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(i.set(a.dataset.precedence,a),r=a)}r&&i.set(null,r)}a=(n=t.instance).getAttribute("data-precedence"),(o=i.get(a)||r)===r&&i.set(null,n),i.set(a,n),this.count++,r=Zh.bind(this),n.addEventListener("load",r),n.addEventListener("error",r),o?o.parentNode.insertBefore(n,o.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(n,e.firstChild),t.state.loading|=4}}var Xh={$$typeof:C,Provider:null,Consumer:null,_currentValue:D,_currentValue2:D,_threadCount:0};function Yh(e,t,i,r,n,o,a,s){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Se(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Se(0),this.hiddenUpdates=Se(null),this.identifierPrefix=r,this.onUncaughtError=n,this.onCaughtError=o,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=s,this.incompleteTransitions=new Map}function Kh(e,t,i,r,n,o,a,s,l,c,u,h){return e=new Yh(e,t,i,a,s,l,c,h),t=1,!0===o&&(t|=24),o=zr(3,null,null,t),e.current=o,o.stateNode=e,(t=On()).refCount++,e.pooledCache=t,t.refCount++,o.memoizedState={element:r,isDehydrated:i,cache:t},io(o),e}function Jh(e){return e?e=Or:Or}function Qh(e,t,i,r,n,o){n=Jh(n),null===r.context?r.context=n:r.pendingContext=n,(r=no(t)).payload={element:i},null!==(o=void 0===o?null:o)&&(r.callback=o),null!==(i=oo(e,r,t))&&(Dc(i,0,t),ao(i,e,t))}function $h(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var i=e.retryLane;e.retryLane=0!==i&&i<t?i:t}}function ed(e,t){$h(e,t),(e=e.alternate)&&$h(e,t)}function td(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Dc(t,0,67108864),ed(e,67108864)}}var id=!0;function rd(e,t,i,r){var n=R.T;R.T=null;var o=z.p;try{z.p=2,od(e,t,i,r)}finally{z.p=o,R.T=n}}function nd(e,t,i,r){var n=R.T;R.T=null;var o=z.p;try{z.p=8,od(e,t,i,r)}finally{z.p=o,R.T=n}}function od(e,t,i,r){if(id){var n=ad(r);if(null===n)ju(e,t,r,sd,i),_d(e,r);else if(function(e,t,i,r,n){switch(t){case"focusin":return hd=vd(hd,e,t,i,r,n),!0;case"dragenter":return dd=vd(dd,e,t,i,r,n),!0;case"mouseover":return pd=vd(pd,e,t,i,r,n),!0;case"pointerover":var o=n.pointerId;return fd.set(o,vd(fd.get(o)||null,e,t,i,r,n)),!0;case"gotpointercapture":return o=n.pointerId,md.set(o,vd(md.get(o)||null,e,t,i,r,n)),!0}return!1}(n,e,t,i,r))r.stopPropagation();else if(_d(e,r),4&t&&-1<yd.indexOf(e)){for(;null!==n;){var o=je(n);if(null!==o)switch(o.tag){case 3:if((o=o.stateNode).current.memoizedState.isDehydrated){var a=_e(o.pendingLanes);if(0!==a){var s=o;for(s.pendingLanes|=2,s.entangledLanes|=2;a;){var l=1<<31-pe(a);s.entanglements[1]|=l,a&=~l}wu(o),0===(6&ic)&&(wc=te()+500,bu(0,!1))}}break;case 13:null!==(s=Ar(o,2))&&Dc(s,0,2),Uc(),ed(o,2)}if(null===(o=ad(r))&&ju(e,t,r,sd,i),o===n)break;n=o}null!==n&&r.stopPropagation()}else ju(e,t,r,null,i)}}function ad(e){return ld(e=kt(e))}var sd=null;function ld(e){if(sd=null,null!==(e=Ue(e))){var t=l(e);if(null===t)e=null;else{var i=t.tag;if(13===i){if(null!==(e=c(t)))return e;e=null}else if(3===i){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return sd=e,null}function cd(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case re:return 2;case ne:return 8;case oe:case ae:return 32;case se:return 268435456;default:return 32}default:return 32}}var ud=!1,hd=null,dd=null,pd=null,fd=new Map,md=new Map,gd=[],yd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function _d(e,t){switch(e){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":dd=null;break;case"mouseover":case"mouseout":pd=null;break;case"pointerover":case"pointerout":fd.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":md.delete(t.pointerId)}}function vd(e,t,i,r,n,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:i,eventSystemFlags:r,nativeEvent:o,targetContainers:[n]},null!==t&&(null!==(t=je(t))&&td(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==n&&-1===t.indexOf(n)&&t.push(n),e)}function xd(e){var t=Ue(e.target);if(null!==t){var i=l(t);if(null!==i)if(13===(t=i.tag)){if(null!==(t=c(i)))return e.blockedOn=t,void function(e,t){var i=z.p;try{return z.p=e,t()}finally{z.p=i}}(e.priority,function(){if(13===i.tag){var e=Rc();e=Ee(e);var t=Ar(i,e);null!==t&&Dc(t,0,e),ed(i,e)}})}else if(3===t&&i.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===i.tag?i.stateNode.containerInfo:null)}e.blockedOn=null}function Cd(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var i=ad(e.nativeEvent);if(null!==i)return null!==(t=je(i))&&td(t),e.blockedOn=i,!1;var r=new(i=e.nativeEvent).constructor(i.type,i);At=r,i.target.dispatchEvent(r),At=null,t.shift()}return!0}function wd(e,t,i){Cd(e)&&i.delete(t)}function bd(){ud=!1,null!==hd&&Cd(hd)&&(hd=null),null!==dd&&Cd(dd)&&(dd=null),null!==pd&&Cd(pd)&&(pd=null),fd.forEach(wd),md.forEach(wd)}function Sd(e,t){e.blockedOn===t&&(e.blockedOn=null,ud||(ud=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,bd)))}var Ld=null;function Td(e){Ld!==e&&(Ld=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Ld===e&&(Ld=null);for(var t=0;t<e.length;t+=3){var i=e[t],r=e[t+1],n=e[t+2];if("function"!==typeof r){if(null===ld(r||i))continue;break}var o=je(i);null!==o&&(e.splice(t,3),t-=3,ka(o,{pending:!0,data:n,method:i.method,action:r},r,n))}}))}function Md(e){function t(t){return Sd(t,e)}null!==hd&&Sd(hd,e),null!==dd&&Sd(dd,e),null!==pd&&Sd(pd,e),fd.forEach(t),md.forEach(t);for(var i=0;i<gd.length;i++){var r=gd[i];r.blockedOn===e&&(r.blockedOn=null)}for(;0<gd.length&&null===(i=gd[0]).blockedOn;)xd(i),null===i.blockedOn&&gd.shift();if(null!=(i=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<i.length;r+=3){var n=i[r],o=i[r+1],a=n[Oe]||null;if("function"===typeof o)a||Td(i);else if(a){var s=null;if(o&&o.hasAttribute("formAction")){if(n=o,a=o[Oe]||null)s=a.formAction;else if(null!==ld(n))continue}else s=a.action;"function"===typeof s?i[r+1]=s:(i.splice(r,3),r-=3),Td(i)}}}function Ed(e){this._internalRoot=e}function Id(e){this._internalRoot=e}Id.prototype.render=Ed.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Qh(t.current,Rc(),e,t,null,null)},Id.prototype.unmount=Ed.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Qh(e.current,2,null,e,null,null),Uc(),t[Re]=null}},Id.prototype.unstable_scheduleHydration=function(e){if(e){var t=Ae();e={blockedOn:null,target:e,priority:t};for(var i=0;i<gd.length&&0!==t&&t<gd[i].priority;i++);gd.splice(i,0,e),0===i&&xd(e)}};var Ad=n.version;if("19.1.0"!==Ad)throw Error(a(527,Ad,"19.1.0"));z.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var i=e,r=t;;){var n=i.return;if(null===n)break;var o=n.alternate;if(null===o){if(null!==(r=n.return)){i=r;continue}break}if(n.child===o.child){for(o=n.child;o;){if(o===i)return u(n),e;if(o===r)return u(n),t;o=o.sibling}throw Error(a(188))}if(i.return!==r.return)i=n,r=o;else{for(var s=!1,c=n.child;c;){if(c===i){s=!0,i=n,r=o;break}if(c===r){s=!0,r=n,i=o;break}c=c.sibling}if(!s){for(c=o.child;c;){if(c===i){s=!0,i=o,r=n;break}if(c===r){s=!0,r=o,i=n;break}c=c.sibling}if(!s)throw Error(a(189))}}if(i.alternate!==r)throw Error(a(190))}if(3!==i.tag)throw Error(a(188));return i.stateNode.current===i?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var kd={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:R,reconcilerVersion:"19.1.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Pd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pd.isDisabled&&Pd.supportsFiber)try{ue=Pd.inject(kd),he=Pd}catch(Rd){}}t.createRoot=function(e,t){if(!s(e))throw Error(a(299));var i=!1,r="",n=_s,o=vs,l=xs;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(i=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(n=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Kh(e,1,!1,null,0,i,r,n,o,l,0,null),e[Re]=t.current,Nu(e),new Ed(t)},t.hydrateRoot=function(e,t,i){if(!s(e))throw Error(a(299));var r=!1,n="",o=_s,l=vs,c=xs,u=null;return null!==i&&void 0!==i&&(!0===i.unstable_strictMode&&(r=!0),void 0!==i.identifierPrefix&&(n=i.identifierPrefix),void 0!==i.onUncaughtError&&(o=i.onUncaughtError),void 0!==i.onCaughtError&&(l=i.onCaughtError),void 0!==i.onRecoverableError&&(c=i.onRecoverableError),void 0!==i.unstable_transitionCallbacks&&i.unstable_transitionCallbacks,void 0!==i.formState&&(u=i.formState)),(t=Kh(e,1,!0,t,0,r,n,o,l,c,0,u)).context=Jh(null),i=t.current,(n=no(r=Ee(r=Rc()))).callback=null,oo(i,n,r),i=r,t.current.lanes=i,Le(t,i),wu(t),e[Re]=t.current,Nu(e),new Id(t)},t.version="19.1.0"},43:(e,t,i)=>{"use strict";e.exports=i(288)},189:e=>{function t(e,t){if(0!==e.length){i(e[0],t);for(var r=1;r<e.length;r++)i(e[r],!t)}}function i(e,t){for(var i=0,r=0,n=0,o=e.length,a=o-1;n<o;a=n++){var s=(e[n][0]-e[a][0])*(e[a][1]+e[n][1]),l=i+s;r+=Math.abs(i)>=Math.abs(s)?i-l+s:s-l+i,i=l}i+r>=0!==!!t&&e.reverse()}e.exports=function e(i,r){var n,o=i&&i.type;if("FeatureCollection"===o)for(n=0;n<i.features.length;n++)e(i.features[n],r);else if("GeometryCollection"===o)for(n=0;n<i.geometries.length;n++)e(i.geometries[n],r);else if("Feature"===o)e(i.geometry,r);else if("Polygon"===o)t(i.coordinates,r);else if("MultiPolygon"===o)for(n=0;n<i.coordinates.length;n++)t(i.coordinates[n],r);return i}},288:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),p=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}function _(){}function v(e,t,i){this.props=e,this.context=t,this.refs=g,this.updater=i||f}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},_.prototype=y.prototype;var x=v.prototype=new _;x.constructor=v,m(x,y.prototype),x.isPureReactComponent=!0;var C=Array.isArray,w={H:null,A:null,T:null,S:null,V:null},b=Object.prototype.hasOwnProperty;function S(e,t,r,n,o,a){return r=a.ref,{$$typeof:i,type:e,key:t,ref:void 0!==r?r:null,props:a}}function L(e){return"object"===typeof e&&null!==e&&e.$$typeof===i}var T=/\/+/g;function M(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(){}function I(e,t,n,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(s){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case i:case r:u=!0;break;case d:return I((u=e._init)(e._payload),t,n,o,a)}}if(u)return a=a(e),u=""===o?"."+M(e,0):o,C(a)?(n="",null!=u&&(n=u.replace(T,"$&/")+"/"),I(a,t,n,"",function(e){return e})):null!=a&&(L(a)&&(l=a,c=n+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+u,a=S(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var h,f=""===o?".":o+":";if(C(e))for(var m=0;m<e.length;m++)u+=I(o=e[m],t,n,s=f+M(o,m),a);else if("function"===typeof(m=null===(h=e)||"object"!==typeof h?null:"function"===typeof(h=p&&h[p]||h["@@iterator"])?h:null))for(e=m.call(e),m=0;!(o=e.next()).done;)u+=I(o=o.value,t,n,s=f+M(o,m++),a);else if("object"===s){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(E,E):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,n,o,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function A(e,t,i){if(null==e)return e;var r=[],n=0;return I(e,r,"","",function(e){return t.call(i,e,n++)}),r}function k(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function O(){}t.Children={map:A,forEach:function(e,t,i){A(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!L(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=n,t.Profiler=a,t.PureComponent=v,t.StrictMode=o,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return w.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=m({},e.props),n=e.key;if(null!=t)for(o in void 0!==t.ref&&void 0,void 0!==t.key&&(n=""+t.key),t)!b.call(t,o)||"key"===o||"__self"===o||"__source"===o||"ref"===o&&void 0===t.ref||(r[o]=t[o]);var o=arguments.length-2;if(1===o)r.children=i;else if(1<o){for(var a=Array(o),s=0;s<o;s++)a[s]=arguments[s+2];r.children=a}return S(e.type,n,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:s,_context:e},e},t.createElement=function(e,t,i){var r,n={},o=null;if(null!=t)for(r in void 0!==t.key&&(o=""+t.key),t)b.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(n[r]=t[r]);var a=arguments.length-2;if(1===a)n.children=i;else if(1<a){for(var s=Array(a),l=0;l<a;l++)s[l]=arguments[l+2];n.children=s}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===n[r]&&(n[r]=a[r]);return S(e,o,void 0,0,0,n)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=L,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:k}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=w.T,i={};w.T=i;try{var r=e(),n=w.S;null!==n&&n(i,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(O,P)}catch(o){P(o)}finally{w.T=t}},t.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},t.use=function(e){return w.H.use(e)},t.useActionState=function(e,t,i){return w.H.useActionState(e,t,i)},t.useCallback=function(e,t){return w.H.useCallback(e,t)},t.useContext=function(e){return w.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return w.H.useDeferredValue(e,t)},t.useEffect=function(e,t,i){var r=w.H;if("function"===typeof i)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return w.H.useId()},t.useImperativeHandle=function(e,t,i){return w.H.useImperativeHandle(e,t,i)},t.useInsertionEffect=function(e,t){return w.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return w.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return w.H.useMemo(e,t)},t.useOptimistic=function(e,t){return w.H.useOptimistic(e,t)},t.useReducer=function(e,t,i){return w.H.useReducer(e,t,i)},t.useRef=function(e){return w.H.useRef(e)},t.useState=function(e){return w.H.useState(e)},t.useSyncExternalStore=function(e,t,i){return w.H.useSyncExternalStore(e,t,i)},t.useTransition=function(){return w.H.useTransition()},t.version="19.1.0"},358:(e,t)=>{"use strict";const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,r=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,o=/^[\u0020-\u003A\u003D-\u007E]*$/,a=Object.prototype.toString,s=(()=>{const e=function(){};return e.prototype=Object.create(null),e})();function l(e,t,i){do{const i=e.charCodeAt(t);if(32!==i&&9!==i)return t}while(++t<i);return i}function c(e,t,i){for(;t>i;){const i=e.charCodeAt(--t);if(32!==i&&9!==i)return t+1}return i}function u(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},386:e=>{"use strict";e.exports=JSON.parse('[{"key":"building","polygon":"all"},{"key":"highway","polygon":"whitelist","values":["services","rest_area","escape","elevator"]},{"key":"natural","polygon":"blacklist","values":["coastline","cliff","ridge","arete","tree_row"]},{"key":"landuse","polygon":"all"},{"key":"waterway","polygon":"whitelist","values":["riverbank","dock","boatyard","dam"]},{"key":"amenity","polygon":"all"},{"key":"leisure","polygon":"all"},{"key":"barrier","polygon":"whitelist","values":["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{"key":"railway","polygon":"whitelist","values":["station","turntable","roundhouse","platform"]},{"key":"area","polygon":"all"},{"key":"boundary","polygon":"all"},{"key":"man_made","polygon":"blacklist","values":["cutline","embankment","pipeline"]},{"key":"power","polygon":"whitelist","values":["plant","substation","generator","transformer"]},{"key":"place","polygon":"all"},{"key":"shop","polygon":"all"},{"key":"aeroway","polygon":"blacklist","values":["taxiway"]},{"key":"tourism","polygon":"all"},{"key":"historic","polygon":"all"},{"key":"public_transport","polygon":"all"},{"key":"office","polygon":"all"},{"key":"building:part","polygon":"all"},{"key":"military","polygon":"all"},{"key":"ruins","polygon":"all"},{"key":"area:highway","polygon":"all"},{"key":"craft","polygon":"all"},{"key":"golf","polygon":"all"},{"key":"indoor","polygon":"all"}]')},391:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(4)},411:(e,t,i)=>{var r=i(721),n=i(189),o={};function a(e,t){return(e.version||t.version)&&e.version!==t.version?(+e.version||0)>(+t.version||0)?e:t:r.merge(e,t)}i(978).forEach(function(e){if("all"===e.polygon)o[e.key]=!0;else{var t="whitelist"===e.polygon?"included_values":"excluded_values",i={};e.values.forEach(function(e){i[e]=!0}),o[e.key]={},o[e.key][t]=i}});var s;function l(e){for(var t,i,r,n,o,a,s=function(e){return e[0]},l=function(e){return e[e.length-1]},c=function(e,t){return void 0!==e&&void 0!==t&&e.id===t.id},u=[];e.length;)for(t=e.pop().nodes.slice(),u.push(t);e.length&&!c(s(t),l(t));){for(i=s(t),r=l(t),n=0;n<e.length;n++){if(c(r,s(a=e[n].nodes))){o=t.push,a=a.slice(1);break}if(c(r,l(a))){o=t.push,a=a.slice(0,-1).reverse();break}if(c(i,l(a))){o=t.unshift,a=a.slice(0,-1);break}if(c(i,s(a))){o=t.unshift,a=a.slice(1).reverse();break}a=o=null}if(!a)break;e.splice(n,1),o.apply(t,a)}return u}s=function(e,t,i){return t=r.merge({verbose:!1,flatProperties:!0,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:o,deduplicator:a},t),"undefined"!==typeof XMLDocument&&e instanceof XMLDocument||"undefined"===typeof XMLDocument&&e.childNodes?function(e){var t,i,n=new Array,o=new Array,a=new Array;function l(e,t,i){e.hasAttribute(i)&&(t[i]=e.getAttribute(i))}function c(e,t){var i=r.clone(e);l(t,i,"lat"),l(t,i,"lon"),i.__is_center_placeholder=!0,n.push(i)}function u(e,t){var i=r.clone(e);function a(e,t,r){var o={type:"node",id:"_"+i.type+"/"+i.id+"bounds"+r,lat:e,lon:t};i.nodes.push(o.id),n.push(o)}i.nodes=[],a(t.getAttribute("minlat"),t.getAttribute("minlon"),1),a(t.getAttribute("maxlat"),t.getAttribute("minlon"),2),a(t.getAttribute("maxlat"),t.getAttribute("maxlon"),3),a(t.getAttribute("minlat"),t.getAttribute("maxlon"),4),i.nodes.push(i.nodes[0]),i.__is_bounds_placeholder=!0,o.push(i)}return r.each(e.getElementsByTagName("node"),function(e,t){var i={};r.each(e.getElementsByTagName("tag"),function(e){i[e.getAttribute("k")]=e.getAttribute("v")});var o={type:"node"};l(e,o,"id"),l(e,o,"lat"),l(e,o,"lon"),l(e,o,"version"),l(e,o,"timestamp"),l(e,o,"changeset"),l(e,o,"uid"),l(e,o,"user"),r.isEmpty(i)||(o.tags=i),n.push(o)}),r.each(e.getElementsByTagName("way"),function(e,a){var s={},h=[];r.each(e.getElementsByTagName("tag"),function(e){s[e.getAttribute("k")]=e.getAttribute("v")});var d=!1;r.each(e.getElementsByTagName("nd"),function(e,t){var i;(i=e.getAttribute("ref"))&&(h[t]=i),!d&&e.getAttribute("lat")&&(d=!0)});var p={type:"way"};l(e,p,"id"),l(e,p,"version"),l(e,p,"timestamp"),l(e,p,"changeset"),l(e,p,"uid"),l(e,p,"user"),h.length>0&&(p.nodes=h),r.isEmpty(s)||(p.tags=s),(t=e.getElementsByTagName("center")[0])&&c(p,t),d?function(e,t){function i(e,t,i){var r={type:"node",id:i,lat:e,lon:t};return n.push(r),r.id}r.isArray(e.nodes)||(e.nodes=[],r.each(t,function(t,i){e.nodes.push("_anonymous@"+t.getAttribute("lat")+"/"+t.getAttribute("lon"))}));r.each(t,function(t,r){t.getAttribute("lat")&&i(t.getAttribute("lat"),t.getAttribute("lon"),e.nodes[r])})}(p,e.getElementsByTagName("nd")):(i=e.getElementsByTagName("bounds")[0])&&u(p,i),o.push(p)}),r.each(e.getElementsByTagName("relation"),function(e,s){var h={},d=[];r.each(e.getElementsByTagName("tag"),function(e){h[e.getAttribute("k")]=e.getAttribute("v")});var p=!1;r.each(e.getElementsByTagName("member"),function(e,t){d[t]={},l(e,d[t],"ref"),l(e,d[t],"role"),l(e,d[t],"type"),(!p&&"node"==d[t].type&&e.getAttribute("lat")||"way"==d[t].type&&e.getElementsByTagName("nd").length>0)&&(p=!0)});var f={type:"relation"};l(e,f,"id"),l(e,f,"version"),l(e,f,"timestamp"),l(e,f,"changeset"),l(e,f,"uid"),l(e,f,"user"),d.length>0&&(f.members=d),r.isEmpty(h)||(f.tags=h),(t=e.getElementsByTagName("center")[0])&&c(f,t),p?function(e,t){function i(e,t,i){var r={type:"node",id:i,lat:e,lon:t};n.push(r)}function a(e,t){if(!o.some(function(e){return"way"==e.type&&e.id==t})){var i={type:"way",id:t,nodes:[]};r.each(e,function(e){e.getAttribute("lat")?a(e.getAttribute("lat"),e.getAttribute("lon")):i.nodes.push(void 0)}),o.push(i)}function a(e,t){var r={type:"node",id:"_anonymous@"+e+"/"+t,lat:e,lon:t};i.nodes.push(r.id),n.push(r)}}r.each(t,function(t,r){"node"==e.members[r].type?t.getAttribute("lat")&&i(t.getAttribute("lat"),t.getAttribute("lon"),e.members[r].ref):"way"==e.members[r].type&&t.getElementsByTagName("nd").length>0&&(e.members[r].ref="_fullGeom"+e.members[r].ref,a(t.getElementsByTagName("nd"),e.members[r].ref))})}(f,e.getElementsByTagName("member")):(i=e.getElementsByTagName("bounds")[0])&&u(f,i),a.push(f)}),s(n,o,a)}(e):function(e){var t=new Array,i=new Array,n=new Array;function o(e){var i=r.clone(e);i.lat=e.center.lat,i.lon=e.center.lon,i.__is_center_placeholder=!0,t.push(i)}function a(e){var n=r.clone(e);function o(e,i,r){var o={type:"node",id:"_"+n.type+"/"+n.id+"bounds"+r,lat:e,lon:i};n.nodes.push(o.id),t.push(o)}n.nodes=[],o(n.bounds.minlat,n.bounds.minlon,1),o(n.bounds.maxlat,n.bounds.minlon,2),o(n.bounds.maxlat,n.bounds.maxlon,3),o(n.bounds.minlat,n.bounds.maxlon,4),n.nodes.push(n.nodes[0]),n.__is_bounds_placeholder=!0,i.push(n)}function l(e){r.isArray(e.nodes)||(e.nodes=e.geometry.map(function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"})),e.geometry.forEach(function(i,r){i&&function(e,i,r){var n={type:"node",id:r,lat:e,lon:i};t.push(n)}(i.lat,i.lon,e.nodes[r])})}function c(e){function r(e,r){if(!i.some(function(e){return"way"==e.type&&e.id==r})){var n={type:"way",id:r,nodes:[]};e.forEach(function(e){e?function(e,i){var r={type:"node",id:"_anonymous@"+e+"/"+i,lat:e,lon:i};n.nodes.push(r.id),t.push(r)}(e.lat,e.lon):n.nodes.push(void 0)}),i.push(n)}}e.members.forEach(function(e,i){"node"==e.type?e.lat&&function(e,i,r){var n={type:"node",id:r,lat:e,lon:i};t.push(n)}(e.lat,e.lon,e.ref):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,r(e.geometry,e.ref))})}for(var u=0;u<e.elements.length;u++)switch(e.elements[u].type){case"node":var h=e.elements[u];t.push(h);break;case"way":var d=r.clone(e.elements[u]);d.nodes=r.clone(d.nodes),i.push(d),d.center&&o(d),d.geometry?l(d):d.bounds&&a(d);break;case"relation":var p=r.clone(e.elements[u]);p.members=r.clone(p.members),n.push(p);var f=p.members&&p.members.some(function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&e.geometry.length>0});p.center&&o(p),f?c(p):p.bounds&&a(p)}return s(t,i,n)}(e);function s(e,o,a){function s(e,i){if("object"!==typeof i&&(i={}),"function"===typeof t.uninterestingTags)return!t.uninterestingTags(e,i);for(var r in e)if(!0!==t.uninterestingTags[r]&&!0!==i[r]&&i[r]!==e[r])return!0;return!1}function u(e){var t={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(var i in t)void 0===t[i]&&delete t[i];return t}for(var h=new Object,d=new Object,p=0;p<e.length;p++){void 0!==h[(x=e[p]).id]&&(x=t.deduplicator(x,h[x.id])),h[x.id]=x,"undefined"!=typeof x.tags&&s(x.tags)&&(d[x.id]=!0)}for(p=0;p<a.length;p++)if(r.isArray(a[p].members))for(var f=0;f<a[p].members.length;f++)"node"==a[p].members[f].type&&(d[a[p].members[f].ref]=!0);var m=new Object,g=new Object;for(p=0;p<o.length;p++){var y=o[p];if(m[y.id]&&(y=t.deduplicator(y,m[y.id])),m[y.id]=y,r.isArray(y.nodes))for(f=0;f<y.nodes.length;f++)"object"!==typeof y.nodes[f]&&(g[y.nodes[f]]=!0,y.nodes[f]=h[y.nodes[f]])}var _=new Array;for(var v in h){var x=h[v];g[v]&&!d[v]||_.push(x)}var C=new Array;for(p=0;p<a.length;p++){C[(S=a[p]).id]&&(S=t.deduplicator(S,C[S.id])),C[S.id]=S}var w,b={node:{},way:{},relation:{}};for(var v in C){var S=C[v];if(r.isArray(S.members))for(f=0;f<S.members.length;f++){var L=S.members[f].type,T=S.members[f].ref;"number"!==typeof T&&(T=T.replace("_fullGeom","")),b[L]?("undefined"===typeof b[L][T]&&(b[L][T]=[]),b[L][T].push({role:S.members[f].role,rel:S.id,reltags:S.tags})):t.verbose&&console.warn("Relation",S.type+"/"+S.id,"member",L+"/"+T,"ignored because it has an invalid type")}else t.verbose&&console.warn("Relation",S.type+"/"+S.id,"ignored because it has no members")}var M=[];for(p=0;p<_.length;p++)if("undefined"!=typeof _[p].lon&&"undefined"!=typeof _[p].lat){var E={type:"Feature",id:_[p].type+"/"+_[p].id,properties:{type:_[p].type,id:_[p].id,tags:_[p].tags||{},relations:b.node[_[p].id]||[],meta:u(_[p])},geometry:{type:"Point",coordinates:[+_[p].lon,+_[p].lat]}};_[p].__is_center_placeholder&&(E.properties.geometry="center"),i?i(E):M.push(E)}else t.verbose&&console.warn("POI",_[p].type+"/"+_[p].id,"ignored because it lacks coordinates");var I=[],A=[];for(p=0;p<a.length;p++)if(C[a[p].id]===a[p]){if("undefined"!=typeof a[p].tags&&("route"==a[p].tags.type||"waterway"==a[p].tags.type)){if(!r.isArray(a[p].members)){t.verbose&&console.warn("Route",a[p].type+"/"+a[p].id,"ignored because it has no members");continue}if(a[p].members.forEach(function(e){m[e.ref]&&!s(m[e.ref].tags)&&(m[e.ref].is_skippablerelationmember=!0)}),!1===(E=k(a[p]))){t.verbose&&console.warn("Route relation",a[p].type+"/"+a[p].id,"ignored because it has invalid geometry");continue}function k(e){var i,n,o=!1;i=(i=e.members.filter(function(e){return"way"===e.type})).map(function(i){var r=m[i.ref];return void 0===r||void 0===r.nodes?(t.verbose&&console.warn("Route "+e.type+"/"+e.id,"tainted by a missing or incomplete  way",i.type+"/"+i.ref),void(o=!0)):{id:i.ref,role:i.role,way:r,nodes:r.nodes.filter(function(r){return void 0!==r||(o=!0,t.verbose&&console.warn("Route",e.type+"/"+e.id,"tainted by a way",i.type+"/"+i.ref,"with a missing node"),!1)})}}),n=l(i=r.compact(i));var a;if(a=r.compact(n.map(function(e){return r.compact(e.map(function(e){return[+e.lon,+e.lat]}))})),0==a.length)return t.verbose&&console.warn("Route",e.type+"/"+e.id,"contains no coordinates"),!1;var s={type:"Feature",id:e.type+"/"+e.id,properties:{type:e.type,id:e.id,tags:e.tags||{},relations:b[e.type][e.id]||[],meta:u(e)},geometry:{type:1===a.length?"LineString":"MultiLineString",coordinates:1===a.length?a[0]:a}};return o&&(t.verbose&&console.warn("Route",e.type+"/"+e.id,"is tainted"),s.properties.tainted=!0),s}i?i(n(E)):A.push(E)}if("undefined"!=typeof a[p].tags&&("multipolygon"==a[p].tags.type||"boundary"==a[p].tags.type)){if(!r.isArray(a[p].members)){t.verbose&&console.warn("Multipolygon",a[p].type+"/"+a[p].id,"ignored because it has no members");continue}var P=0;for(f=0;f<a[p].members.length;f++)"outer"==a[p].members[f].role?P++:t.verbose&&"inner"!=a[p].members[f].role&&console.warn("Multipolygon",a[p].type+"/"+a[p].id,"member",a[p].members[f].type+"/"+a[p].members[f].ref,'ignored because it has an invalid role: "'+a[p].members[f].role+'"');if(a[p].members.forEach(function(e){m[e.ref]&&("outer"!==e.role||s(m[e.ref].tags,a[p].tags)||(m[e.ref].is_skippablerelationmember=!0),"inner"!==e.role||s(m[e.ref].tags)||(m[e.ref].is_skippablerelationmember=!0))}),0==P){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because it has no outer ways");continue}var O=!1;1!=P||s(a[p].tags,{type:!0})||(O=!0);E=null;if(O){var R=a[p].members.filter(function(e){return"outer"===e.role})[0];if(void 0===(R=m[R.ref])){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because outer way",R.type+"/"+R.ref,"is missing");continue}R.is_skippablerelationmember=!0,E=z(R,a[p])}else E=z(a[p],a[p]);if(!1===E){t.verbose&&console.warn("Multipolygon relation",a[p].type+"/"+a[p].id,"ignored because it has invalid geometry");continue}function z(e,i){var n,o,a,s,c=!1,h=O?"way":"relation",d="number"===typeof e.id?e.id:+e.id.replace("_fullGeom","");function p(e){var t,i=function(e,t){for(var i=0;i<t.length;i++)if(n(t[i],e))return!0;return!1},r=function(e){return e.map(function(e){return[+e.lat,+e.lon]})},n=function(e,t){for(var i=e[0],r=e[1],n=!1,o=0,a=t.length-1;o<t.length;a=o++){var s=t[o][0],l=t[o][1],c=t[a][0],u=t[a][1];l>r!=u>r&&i<(c-s)*(r-l)/(u-l)+s&&(n=!n)}return n};for(e=r(e),t=0;t<o.length;t++)if(i(r(o[t]),e))return t}n=(n=i.members.filter(function(e){return"way"===e.type})).map(function(e){var i=m[e.ref];return void 0===i||void 0===i.nodes?(t.verbose&&console.warn("Multipolygon",h+"/"+d,"tainted by a missing or incomplete way",e.type+"/"+e.ref),void(c=!0)):{id:e.ref,role:e.role||"outer",way:i,nodes:i.nodes.filter(function(i){return void 0!==i||(c=!0,t.verbose&&console.warn("Multipolygon",h+"/"+d,"tainted by a way",e.type+"/"+e.ref,"with a missing node"),!1)})}}),n=r.compact(n),o=l(n.filter(function(e){return"outer"===e.role})),a=l(n.filter(function(e){return"inner"===e.role})),s=o.map(function(e){return[e]});for(var f=0;f<a.length;f++){var g=p(a[f]);void 0!==g?s[g].push(a[f]):t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains an inner ring with no containing outer")}var y=[];if(y=r.compact(s.map(function(e){var i=r.compact(e.map(function(e){if(!(e.length<4))return r.compact(e.map(function(e){return[+e.lon,+e.lat]}));t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains a ring with less than four nodes")}));if(0!=i.length)return i;t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains an empty ring cluster")})),0==y.length)return t.verbose&&console.warn("Multipolygon",h+"/"+d,"contains no coordinates"),!1;var _="MultiPolygon";1===y.length&&(_="Polygon",y=y[0]);var v={type:"Feature",id:e.type+"/"+d,properties:{type:e.type,id:d,tags:e.tags||{},relations:b[e.type][e.id]||[],meta:u(e)},geometry:{type:_,coordinates:y}};return c&&(t.verbose&&console.warn("Multipolygon",h+"/"+d,"is tainted"),v.properties.tainted=!0),v}i?i(n(E)):A.push(E)}}for(p=0;p<o.length;p++)if(m[o[p].id]===o[p])if(r.isArray(o[p].nodes)){if(!o[p].is_skippablerelationmember){"number"!==typeof o[p].id&&(o[p].id=+o[p].id.replace("_fullGeom","")),o[p].tainted=!1,o[p].hidden=!1;var D=new Array;for(f=0;f<o[p].nodes.length;f++)"object"==typeof o[p].nodes[f]?D.push([+o[p].nodes[f].lon,+o[p].nodes[f].lat]):(t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"is tainted by an invalid node"),o[p].tainted=!0);if(D.length<=1)t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"ignored because it contains too few nodes");else{var F="LineString";"undefined"!=typeof o[p].nodes[0]&&"undefined"!=typeof o[p].nodes[o[p].nodes.length-1]&&o[p].nodes[0].id===o[p].nodes[o[p].nodes.length-1].id&&("undefined"!=typeof o[p].tags&&c(o[p].tags)||o[p].__is_bounds_placeholder)&&(F="Polygon",D=[D]);E={type:"Feature",id:o[p].type+"/"+o[p].id,properties:{type:o[p].type,id:o[p].id,tags:o[p].tags||{},relations:b.way[o[p].id]||[],meta:u(o[p])},geometry:{type:F,coordinates:D}};o[p].tainted&&(t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"is tainted"),E.properties.tainted=!0),o[p].__is_bounds_placeholder&&(E.properties.geometry="bounds"),i?i(n(E)):"LineString"==F?I.push(E):A.push(E)}}}else t.verbose&&console.warn("Way",o[p].type+"/"+o[p].id,"ignored because it has no nodes");return!!i||((w={type:"FeatureCollection",features:[]}).features=w.features.concat(A),w.features=w.features.concat(I),w.features=w.features.concat(M),t.flatProperties&&w.features.forEach(function(e){e.properties=r.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})}),w=n(w))}function c(e){var i=t.polygonFeatures;if("function"===typeof i)return i(e);if("no"===e.area)return!1;for(var r in e){var n=e[r],o=i[r];if("undefined"!==typeof o&&"no"!==n){if(!0===o)return!0;if(o.included_values&&!0===o.included_values[n])return!0;if(o.excluded_values&&!0!==o.excluded_values[n])return!0}}return!1}},s.toGeojson=s,e.exports=s},569:(e,t,i)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=i(672)},579:(e,t,i)=>{"use strict";e.exports=i(799)},672:(e,t,i)=>{"use strict";var r=i(43);function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var i=2;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(){}var a={d:{f:o,r:function(){throw Error(n(522))},D:o,C:o,L:o,m:o,X:o,S:o,M:o},p:0,findDOMNode:null},s=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var i=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(n(299));return function(e,t,i){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:s,key:null==r?null:""+r,children:e,containerInfo:t,implementation:i}}(e,t,null,i)},t.flushSync=function(e){var t=l.T,i=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=i,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var i=t.as,r=c(i,t.crossOrigin),n="string"===typeof t.integrity?t.integrity:void 0,o="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===i?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:n,fetchPriority:o}):"script"===i&&a.d.X(e,{crossOrigin:r,integrity:n,fetchPriority:o,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var i=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var i=t.as,r=c(i,t.crossOrigin);a.d.L(e,i,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var i=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:i,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,i){return l.H.useFormState(e,t,i)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.0"},721:function(e,t,i){e=i.nmd(e),function(){var r,n="__lodash_hash_undefined__",o=9007199254740991,a="[object Arguments]",s="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",d="[object GeneratorFunction]",p="[object Map]",f="[object Number]",m="[object Object]",g="[object Promise]",y="[object RegExp]",_="[object Set]",v="[object String]",x="[object Symbol]",C="[object WeakMap]",w="[object ArrayBuffer]",b="[object DataView]",S="[object Float32Array]",L="[object Float64Array]",T="[object Int8Array]",M="[object Int16Array]",E="[object Int32Array]",I="[object Uint8Array]",A="[object Uint8ClampedArray]",k="[object Uint16Array]",P="[object Uint32Array]",O=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,R=/^\w*$/,z=/^\./,D=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,F=/\\(\\)?/g,B=/\w*$/,V=/^\[object .+?Constructor\]$/,N=/^(?:0|[1-9]\d*)$/,U={};U[S]=U[L]=U[T]=U[M]=U[E]=U[I]=U[A]=U[k]=U[P]=!0,U[a]=U[s]=U[w]=U[l]=U[b]=U[c]=U[u]=U[h]=U[p]=U[f]=U[m]=U[y]=U[_]=U[v]=U[C]=!1;var j={};j[a]=j[s]=j[w]=j[b]=j[l]=j[c]=j[S]=j[L]=j[T]=j[M]=j[E]=j[p]=j[f]=j[m]=j[y]=j[_]=j[v]=j[x]=j[I]=j[A]=j[k]=j[P]=!0,j[u]=j[h]=j[C]=!1;var H="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,Z="object"==typeof self&&self&&self.Object===Object&&self,W=H||Z||Function("return this")(),G=t&&!t.nodeType&&t,q=G&&e&&!e.nodeType&&e,X=q&&q.exports===G,Y=X&&H.process,K=function(){try{return Y&&Y.binding("util")}catch(e){}}(),J=K&&K.isTypedArray;function Q(e,t){return e.set(t[0],t[1]),e}function $(e,t){return e.add(t),e}function ee(e,t){for(var i=-1,r=e?e.length:0;++i<r&&!1!==t(e[i],i,e););return e}function te(e,t,i,r){var n=-1,o=e?e.length:0;for(r&&o&&(i=e[++n]);++n<o;)i=t(i,e[n],n,e);return i}function ie(e,t){for(var i=-1,r=e?e.length:0;++i<r;)if(t(e[i],i,e))return!0;return!1}function re(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(i){}return t}function ne(e){var t=-1,i=Array(e.size);return e.forEach(function(e,r){i[++t]=[r,e]}),i}function oe(e,t){return function(i){return e(t(i))}}function ae(e){var t=-1,i=Array(e.size);return e.forEach(function(e){i[++t]=e}),i}var se=Array.prototype,le=Function.prototype,ce=Object.prototype,ue=W["__core-js_shared__"],he=function(){var e=/[^.]+$/.exec(ue&&ue.keys&&ue.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),de=le.toString,pe=ce.hasOwnProperty,fe=de.call(Object),me=ce.toString,ge=RegExp("^"+de.call(pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ye=X?W.Buffer:r,_e=W.Symbol,ve=W.Uint8Array,xe=oe(Object.getPrototypeOf,Object),Ce=Object.create,we=ce.propertyIsEnumerable,be=se.splice,Se=Object.getOwnPropertySymbols,Le=ye?ye.isBuffer:r,Te=oe(Object.keys,Object),Me=Math.max,Ee=_t(W,"DataView"),Ie=_t(W,"Map"),Ae=_t(W,"Promise"),ke=_t(W,"Set"),Pe=_t(W,"WeakMap"),Oe=_t(Object,"create"),Re=!we.call({valueOf:1},"valueOf"),ze=Et(Ee),De=Et(Ie),Fe=Et(Ae),Be=Et(ke),Ve=Et(Pe),Ne=_e?_e.prototype:r,Ue=Ne?Ne.valueOf:r,je=Ne?Ne.toString:r;function He(){}function Ze(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function We(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function Ge(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var r=e[t];this.set(r[0],r[1])}}function qe(e){var t=-1,i=e?e.length:0;for(this.__data__=new Ge;++t<i;)this.add(e[t])}function Xe(e){this.__data__=new We(e)}function Ye(e,t){var i=Ot(e)||Pt(e)?function(e,t){for(var i=-1,r=Array(e);++i<e;)r[i]=t(i);return r}(e.length,String):[],r=i.length,n=!!r;for(var o in e)!t&&!pe.call(e,o)||n&&("length"==o||Ct(o,r))||i.push(o);return i}function Ke(e,t,i){(i!==r&&!kt(e[t],i)||"number"==typeof t&&i===r&&!(t in e))&&(e[t]=i)}function Je(e,t,i){var n=e[t];pe.call(e,t)&&kt(n,i)&&(i!==r||t in e)||(e[t]=i)}function Qe(e,t){for(var i=e.length;i--;)if(kt(e[i][0],t))return i;return-1}function $e(e,t,i,n,o,s,u){var g;if(n&&(g=s?n(e,o,s,u):n(e)),g!==r)return g;if(!Vt(e))return e;var C=Ot(e);if(C){if(g=function(e){var t=e.length,i=e.constructor(t);t&&"string"==typeof e[0]&&pe.call(e,"index")&&(i.index=e.index,i.input=e.input);return i}(e),!t)return pt(e,g)}else{var O=xt(e),R=O==h||O==d;if(Dt(e))return function(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}(e,t);if(O==m||O==a||R&&!s){if(re(e))return s?e:{};if(g=function(e){return"function"!=typeof e.constructor||bt(e)?{}:(t=xe(e),Vt(t)?Ce(t):{});var t}(R?{}:e),!t)return function(e,t){return ft(e,vt(e),t)}(e,function(e,t){return e&&ft(t,Yt(t),e)}(g,e))}else{if(!j[O])return s?e:{};g=function(e,t,i,r){var n=e.constructor;switch(t){case w:return dt(e);case l:case c:return new n(+e);case b:return function(e,t){var i=t?dt(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,r);case S:case L:case T:case M:case E:case I:case A:case k:case P:return function(e,t){var i=t?dt(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}(e,r);case p:return function(e,t,i){var r=t?i(ne(e),!0):ne(e);return te(r,Q,new e.constructor)}(e,r,i);case f:case v:return new n(e);case y:return function(e){var t=new e.constructor(e.source,B.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return function(e,t,i){var r=t?i(ae(e),!0):ae(e);return te(r,$,new e.constructor)}(e,r,i);case x:return o=e,Ue?Object(Ue.call(o)):{}}var o}(e,O,$e,t)}}u||(u=new Xe);var z=u.get(e);if(z)return z;if(u.set(e,g),!C)var D=i?function(e){return function(e,t,i){var r=t(e);return Ot(e)?r:function(e,t){for(var i=-1,r=t.length,n=e.length;++i<r;)e[n+i]=t[i];return e}(r,i(e))}(e,Yt,vt)}(e):Yt(e);return ee(D||e,function(r,o){D&&(r=e[o=r]),Je(g,o,$e(r,t,i,n,o,e,u))}),g}Ze.prototype.clear=function(){this.__data__=Oe?Oe(null):{}},Ze.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Ze.prototype.get=function(e){var t=this.__data__;if(Oe){var i=t[e];return i===n?r:i}return pe.call(t,e)?t[e]:r},Ze.prototype.has=function(e){var t=this.__data__;return Oe?t[e]!==r:pe.call(t,e)},Ze.prototype.set=function(e,t){return this.__data__[e]=Oe&&t===r?n:t,this},We.prototype.clear=function(){this.__data__=[]},We.prototype.delete=function(e){var t=this.__data__,i=Qe(t,e);return!(i<0)&&(i==t.length-1?t.pop():be.call(t,i,1),!0)},We.prototype.get=function(e){var t=this.__data__,i=Qe(t,e);return i<0?r:t[i][1]},We.prototype.has=function(e){return Qe(this.__data__,e)>-1},We.prototype.set=function(e,t){var i=this.__data__,r=Qe(i,e);return r<0?i.push([e,t]):i[r][1]=t,this},Ge.prototype.clear=function(){this.__data__={hash:new Ze,map:new(Ie||We),string:new Ze}},Ge.prototype.delete=function(e){return yt(this,e).delete(e)},Ge.prototype.get=function(e){return yt(this,e).get(e)},Ge.prototype.has=function(e){return yt(this,e).has(e)},Ge.prototype.set=function(e,t){return yt(this,e).set(e,t),this},qe.prototype.add=qe.prototype.push=function(e){return this.__data__.set(e,n),this},qe.prototype.has=function(e){return this.__data__.has(e)},Xe.prototype.clear=function(){this.__data__=new We},Xe.prototype.delete=function(e){return this.__data__.delete(e)},Xe.prototype.get=function(e){return this.__data__.get(e)},Xe.prototype.has=function(e){return this.__data__.has(e)},Xe.prototype.set=function(e,t){var i=this.__data__;if(i instanceof We){var r=i.__data__;if(!Ie||r.length<199)return r.push([e,t]),this;i=this.__data__=new Ge(r)}return i.set(e,t),this};var et,tt,it=(et=function(e,t){return e&&rt(e,t,Yt)},function(e,t){if(null==e)return e;if(!Rt(e))return et(e,t);for(var i=e.length,r=tt?i:-1,n=Object(e);(tt?r--:++r<i)&&!1!==t(n[r],r,n););return e}),rt=function(e){return function(t,i,r){for(var n=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++n];if(!1===i(o[l],l,o))break}return t}}();function nt(e,t){for(var i=0,n=(t=wt(t,e)?[t]:ht(t)).length;null!=e&&i<n;)e=e[Mt(t[i++])];return i&&i==n?e:r}function ot(e,t){return null!=e&&t in Object(e)}function at(e,t,i,n,o){return e===t||(null==e||null==t||!Vt(e)&&!Nt(t)?e!==e&&t!==t:function(e,t,i,n,o,h){var d=Ot(e),g=Ot(t),C=s,S=s;d||(C=(C=xt(e))==a?m:C);g||(S=(S=xt(t))==a?m:S);var L=C==m&&!re(e),T=S==m&&!re(t),M=C==S;if(M&&!L)return h||(h=new Xe),d||Zt(e)?mt(e,t,i,n,o,h):function(e,t,i,r,n,o,a){switch(i){case b:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!r(new ve(e),new ve(t)));case l:case c:case f:return kt(+e,+t);case u:return e.name==t.name&&e.message==t.message;case y:case v:return e==t+"";case p:var s=ne;case _:var h=2&o;if(s||(s=ae),e.size!=t.size&&!h)return!1;var d=a.get(e);if(d)return d==t;o|=1,a.set(e,t);var m=mt(s(e),s(t),r,n,o,a);return a.delete(e),m;case x:if(Ue)return Ue.call(e)==Ue.call(t)}return!1}(e,t,C,i,n,o,h);if(!(2&o)){var E=L&&pe.call(e,"__wrapped__"),I=T&&pe.call(t,"__wrapped__");if(E||I){var A=E?e.value():e,k=I?t.value():t;return h||(h=new Xe),i(A,k,n,o,h)}}if(!M)return!1;return h||(h=new Xe),function(e,t,i,n,o,a){var s=2&o,l=Yt(e),c=l.length,u=Yt(t),h=u.length;if(c!=h&&!s)return!1;var d=c;for(;d--;){var p=l[d];if(!(s?p in t:pe.call(t,p)))return!1}var f=a.get(e);if(f&&a.get(t))return f==t;var m=!0;a.set(e,t),a.set(t,e);var g=s;for(;++d<c;){var y=e[p=l[d]],_=t[p];if(n)var v=s?n(_,y,p,t,e,a):n(y,_,p,e,t,a);if(!(v===r?y===_||i(y,_,n,o,a):v)){m=!1;break}g||(g="constructor"==p)}if(m&&!g){var x=e.constructor,C=t.constructor;x==C||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof C&&C instanceof C||(m=!1)}return a.delete(e),a.delete(t),m}(e,t,i,n,o,h)}(e,t,at,i,n,o))}function st(e){return!(!Vt(e)||(t=e,he&&he in t))&&(Ft(e)||re(e)?ge:V).test(Et(e));var t}function lt(e){return"function"==typeof e?e:null==e?Qt:"object"==typeof e?Ot(e)?function(e,t){if(wt(e)&&St(t))return Lt(Mt(e),t);return function(i){var n=qt(i,e);return n===r&&n===t?Xt(i,e):at(t,n,r,3)}}(e[0],e[1]):function(e){var t=function(e){var t=Yt(e),i=t.length;for(;i--;){var r=t[i],n=e[r];t[i]=[r,n,St(n)]}return t}(e);if(1==t.length&&t[0][2])return Lt(t[0][0],t[0][1]);return function(i){return i===e||function(e,t,i,n){var o=i.length,a=o,s=!n;if(null==e)return!a;for(e=Object(e);o--;){var l=i[o];if(s&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++o<a;){var c=(l=i[o])[0],u=e[c],h=l[1];if(s&&l[2]){if(u===r&&!(c in e))return!1}else{var d=new Xe;if(n)var p=n(u,h,c,e,t,d);if(!(p===r?at(h,u,n,3,d):p))return!1}}return!0}(i,e,t)}}(e):ei(e)}function ct(e){if(!Vt(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=bt(e),i=[];for(var r in e)("constructor"!=r||!t&&pe.call(e,r))&&i.push(r);return i}function ut(e,t,i,n,o){if(e!==t){if(!Ot(t)&&!Zt(t))var a=ct(t);ee(a||t,function(s,l){if(a&&(s=t[l=s]),Vt(s))o||(o=new Xe),function(e,t,i,n,o,a,s){var l=e[i],c=t[i],u=s.get(c);if(u)return void Ke(e,i,u);var h=a?a(l,c,i+"",e,t,s):r,d=h===r;d&&(h=c,Ot(c)||Zt(c)?Ot(l)?h=l:zt(l)?h=pt(l):(d=!1,h=$e(c,!0)):Ut(c)||Pt(c)?Pt(l)?h=Wt(l):!Vt(l)||n&&Ft(l)?(d=!1,h=$e(c,!0)):h=l:d=!1);d&&(s.set(c,h),o(h,c,n,a,s),s.delete(c));Ke(e,i,h)}(e,t,l,i,ut,n,o);else{var c=n?n(e[l],s,l+"",e,t,o):r;c===r&&(c=s),Ke(e,l,c)}})}}function ht(e){return Ot(e)?e:Tt(e)}function dt(e){var t=new e.constructor(e.byteLength);return new ve(t).set(new ve(e)),t}function pt(e,t){var i=-1,r=e.length;for(t||(t=Array(r));++i<r;)t[i]=e[i];return t}function ft(e,t,i,n){i||(i={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=n?n(i[s],e[s],s,i,e):r;Je(i,s,l===r?e[s]:l)}return i}function mt(e,t,i,n,o,a){var s=2&o,l=e.length,c=t.length;if(l!=c&&!(s&&c>l))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var h=-1,d=!0,p=1&o?new qe:r;for(a.set(e,t),a.set(t,e);++h<l;){var f=e[h],m=t[h];if(n)var g=s?n(m,f,h,t,e,a):n(f,m,h,e,t,a);if(g!==r){if(g)continue;d=!1;break}if(p){if(!ie(t,function(e,t){if(!p.has(t)&&(f===e||i(f,e,n,o,a)))return p.add(t)})){d=!1;break}}else if(f!==m&&!i(f,m,n,o,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function gt(){var e=He.iteratee||$t;return e=e===$t?lt:e,arguments.length?e(arguments[0],arguments[1]):e}function yt(e,t){var i=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?i["string"==typeof t?"string":"hash"]:i.map}function _t(e,t){var i=function(e,t){return null==e?r:e[t]}(e,t);return st(i)?i:r}var vt=Se?oe(Se,Object):ti,xt=function(e){return me.call(e)};function Ct(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||N.test(e))&&e>-1&&e%1==0&&e<t}function wt(e,t){if(Ot(e))return!1;var i=typeof e;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=e&&!jt(e))||(R.test(e)||!O.test(e)||null!=t&&e in Object(t))}function bt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ce)}function St(e){return e===e&&!Vt(e)}function Lt(e,t){return function(i){return null!=i&&(i[e]===t&&(t!==r||e in Object(i)))}}(Ee&&xt(new Ee(new ArrayBuffer(1)))!=b||Ie&&xt(new Ie)!=p||Ae&&xt(Ae.resolve())!=g||ke&&xt(new ke)!=_||Pe&&xt(new Pe)!=C)&&(xt=function(e){var t=me.call(e),i=t==m?e.constructor:r,n=i?Et(i):r;if(n)switch(n){case ze:return b;case De:return p;case Fe:return g;case Be:return _;case Ve:return C}return t});var Tt=At(function(e){e=Gt(e);var t=[];return z.test(e)&&t.push(""),e.replace(D,function(e,i,r,n){t.push(r?n.replace(F,"$1"):i||e)}),t});function Mt(e){if("string"==typeof e||jt(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Et(e){if(null!=e){try{return de.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function It(e,t){return(Ot(e)?ee:it)(e,gt(t,3))}function At(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError("Expected a function");var i=function(){var r=arguments,n=t?t.apply(this,r):r[0],o=i.cache;if(o.has(n))return o.get(n);var a=e.apply(this,r);return i.cache=o.set(n,a),a};return i.cache=new(At.Cache||Ge),i}function kt(e,t){return e===t||e!==e&&t!==t}function Pt(e){return zt(e)&&pe.call(e,"callee")&&(!we.call(e,"callee")||me.call(e)==a)}At.Cache=Ge;var Ot=Array.isArray;function Rt(e){return null!=e&&Bt(e.length)&&!Ft(e)}function zt(e){return Nt(e)&&Rt(e)}var Dt=Le||ii;function Ft(e){var t=Vt(e)?me.call(e):"";return t==h||t==d}function Bt(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Vt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Nt(e){return!!e&&"object"==typeof e}function Ut(e){if(!Nt(e)||me.call(e)!=m||re(e))return!1;var t=xe(e);if(null===t)return!0;var i=pe.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&de.call(i)==fe}function jt(e){return"symbol"==typeof e||Nt(e)&&me.call(e)==x}var Ht,Zt=J?(Ht=J,function(e){return Ht(e)}):function(e){return Nt(e)&&Bt(e.length)&&!!U[me.call(e)]};function Wt(e){return ft(e,Kt(e))}function Gt(e){return null==e?"":function(e){if("string"==typeof e)return e;if(jt(e))return je?je.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}(e)}function qt(e,t,i){var n=null==e?r:nt(e,t);return n===r?i:n}function Xt(e,t){return null!=e&&function(e,t,i){for(var r,n=-1,o=(t=wt(t,e)?[t]:ht(t)).length;++n<o;){var a=Mt(t[n]);if(!(r=null!=e&&i(e,a)))break;e=e[a]}return r||!!(o=e?e.length:0)&&Bt(o)&&Ct(a,o)&&(Ot(e)||Pt(e))}(e,t,ot)}function Yt(e){return Rt(e)?Ye(e):function(e){if(!bt(e))return Te(e);var t=[];for(var i in Object(e))pe.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)}function Kt(e){return Rt(e)?Ye(e,!0):ct(e)}var Jt=function(e){return t=function(t,i){var n=-1,o=i.length,a=o>1?i[o-1]:r,s=o>2?i[2]:r;for(a=e.length>3&&"function"==typeof a?(o--,a):r,s&&function(e,t,i){if(!Vt(i))return!1;var r=typeof t;return!!("number"==r?Rt(i)&&Ct(t,i.length):"string"==r&&t in i)&&kt(i[t],e)}(i[0],i[1],s)&&(a=o<3?r:a,o=1),t=Object(t);++n<o;){var l=i[n];l&&e(t,l,n,a)}return t},i=Me(i===r?t.length-1:i,0),function(){for(var e=arguments,r=-1,n=Me(e.length-i,0),o=Array(n);++r<n;)o[r]=e[i+r];r=-1;for(var a=Array(i+1);++r<i;)a[r]=e[r];return a[i]=o,function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(t,this,a)};var t,i}(function(e,t,i){ut(e,t,i)});function Qt(e){return e}function $t(e){return lt("function"==typeof e?e:$e(e,!0))}function ei(e){return wt(e)?(t=Mt(e),function(e){return null==e?r:e[t]}):function(e){return function(t){return nt(t,e)}}(e);var t}function ti(){return[]}function ii(){return!1}He.compact=function(e){for(var t=-1,i=e?e.length:0,r=0,n=[];++t<i;){var o=e[t];o&&(n[r++]=o)}return n},He.iteratee=$t,He.keys=Yt,He.keysIn=Kt,He.memoize=At,He.merge=Jt,He.property=ei,He.toPlainObject=Wt,He.clone=function(e){return $e(e,!1,!0)},He.eq=kt,He.forEach=It,He.get=qt,He.hasIn=Xt,He.identity=Qt,He.isArguments=Pt,He.isArray=Ot,He.isArrayLike=Rt,He.isArrayLikeObject=zt,He.isBuffer=Dt,He.isEmpty=function(e){if(Rt(e)&&(Ot(e)||"string"==typeof e||"function"==typeof e.splice||Dt(e)||Pt(e)))return!e.length;var t=xt(e);if(t==p||t==_)return!e.size;if(Re||bt(e))return!Te(e).length;for(var i in e)if(pe.call(e,i))return!1;return!0},He.isFunction=Ft,He.isLength=Bt,He.isObject=Vt,He.isObjectLike=Nt,He.isPlainObject=Ut,He.isSymbol=jt,He.isTypedArray=Zt,He.stubArray=ti,He.stubFalse=ii,He.toString=Gt,He.each=It,He.VERSION="4.15.0",q&&((q.exports=He)._=He,G._=He)}.call(this)},799:(e,t)=>{"use strict";var i=Symbol.for("react.transitional.element");function r(e,t,r){var n=null;if(void 0!==r&&(n=""+r),void 0!==t.key&&(n=""+t.key),"key"in t)for(var o in r={},t)"key"!==o&&(r[o]=t[o]);else r=t;return t=r.ref,{$$typeof:i,type:e,key:n,ref:void 0!==t?t:null,props:r}}Symbol.for("react.fragment"),t.jsx=r,t.jsxs=r},847:(e,t,i)=>{var r=i(893);e.exports=function(e,t){if(null==e)return{};var i,n,o=r(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)i=a[n],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o},e.exports.__esModule=!0,e.exports.default=e.exports},853:(e,t,i)=>{"use strict";e.exports=i(896)},879:function(e,t,i){var r=i(847).default;const n=["data"],o=["data"];e.exports=function(){"use strict";var e,t,i;function a(r,n){if(e)if(t){var o="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+e+")(sharedChunk); ("+t+")(sharedChunk); self.onerror = null;",a={};e(a),i=n(a),"undefined"!==typeof window&&window&&window.URL&&window.URL.createObjectURL&&(i.workerUrl=window.URL.createObjectURL(new Blob([o],{type:"text/javascript"})))}else t=n;else e=n}return a(["exports"],function(e){var t=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array;function r(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=i*o-n*r;return a?(e[0]=o*(a=1/a),e[1]=-r*a,e[2]=-n*a,e[3]=i*a,e):null}function n(){var e=new i(9);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function o(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8];return e[0]=a*u-s*c,e[1]=n*c-r*u,e[2]=r*s-n*a,e[3]=s*l-o*u,e[4]=i*u-n*l,e[5]=n*o-i*s,e[6]=o*c-a*l,e[7]=r*l-i*c,e[8]=i*a-r*o,e}function a(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=i[0],p=i[1],f=i[2],m=i[3],g=i[4],y=i[5],_=i[6],v=i[7],x=i[8];return e[0]=d*r+p*a+f*c,e[1]=d*n+p*s+f*u,e[2]=d*o+p*l+f*h,e[3]=m*r+g*a+y*c,e[4]=m*n+g*s+y*u,e[5]=m*o+g*l+y*h,e[6]=_*r+v*a+x*c,e[7]=_*n+v*s+x*u,e[8]=_*o+v*l+x*h,e}function s(){var e=new i(16);return i!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function c(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],y=t[15],_=i*s-r*a,v=i*l-n*a,x=i*c-o*a,C=r*l-n*s,w=r*c-o*s,b=n*c-o*l,S=u*m-h*f,L=u*g-d*f,T=u*y-p*f,M=h*g-d*m,E=h*y-p*m,I=d*y-p*g,A=_*I-v*E+x*M+C*T-w*L+b*S;return A?(e[0]=(s*I-l*E+c*M)*(A=1/A),e[1]=(n*E-r*I-o*M)*A,e[2]=(m*b-g*w+y*C)*A,e[3]=(d*w-h*b-p*C)*A,e[4]=(l*T-a*I-c*L)*A,e[5]=(i*I-n*T+o*L)*A,e[6]=(g*x-f*b-y*v)*A,e[7]=(u*b-d*x+p*v)*A,e[8]=(a*E-s*T+c*S)*A,e[9]=(r*T-i*E-o*S)*A,e[10]=(f*w-m*x+y*_)*A,e[11]=(h*x-u*w-p*_)*A,e[12]=(s*L-a*M-l*S)*A,e[13]=(i*M-r*L+n*S)*A,e[14]=(m*v-f*C-g*_)*A,e[15]=(u*C-h*v+d*_)*A,e):null}function u(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],y=t[14],_=t[15],v=i[0],x=i[1],C=i[2],w=i[3];return e[0]=v*r+x*s+C*h+w*m,e[1]=v*n+x*l+C*d+w*g,e[2]=v*o+x*c+C*p+w*y,e[3]=v*a+x*u+C*f+w*_,e[4]=(v=i[4])*r+(x=i[5])*s+(C=i[6])*h+(w=i[7])*m,e[5]=v*n+x*l+C*d+w*g,e[6]=v*o+x*c+C*p+w*y,e[7]=v*a+x*u+C*f+w*_,e[8]=(v=i[8])*r+(x=i[9])*s+(C=i[10])*h+(w=i[11])*m,e[9]=v*n+x*l+C*d+w*g,e[10]=v*o+x*c+C*p+w*y,e[11]=v*a+x*u+C*f+w*_,e[12]=(v=i[12])*r+(x=i[13])*s+(C=i[14])*h+(w=i[15])*m,e[13]=v*n+x*l+C*d+w*g,e[14]=v*o+x*c+C*p+w*y,e[15]=v*a+x*u+C*f+w*_,e}function h(e,t,i){var r,n,o,a,s,l,c,u,h,d,p,f,m=i[0],g=i[1],y=i[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(n=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],e[0]=r=t[0],e[1]=n,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=c,e[7]=u,e[8]=h,e[9]=d,e[10]=p,e[11]=f,e[12]=r*m+s*g+h*y+t[12],e[13]=n*m+l*g+d*y+t[13],e[14]=o*m+c*g+p*y+t[14],e[15]=a*m+u*g+f*y+t[15]),e}function d(e,t,i){var r=i[0],n=i[1],o=i[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function p(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*n+c*r,e[5]=a*n+u*r,e[6]=s*n+h*r,e[7]=l*n+d*r,e[8]=c*n-o*r,e[9]=u*n-a*r,e[10]=h*n-s*r,e[11]=d*n-l*r,e}function f(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],s=t[2],l=t[3],c=t[8],u=t[9],h=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n-c*r,e[1]=a*n-u*r,e[2]=s*n-h*r,e[3]=l*n-d*r,e[8]=o*r+c*n,e[9]=a*r+u*n,e[10]=s*r+h*n,e[11]=l*r+d*n,e}function m(e,t,i){var r=Math.sin(i),n=Math.cos(i),o=t[0],a=t[1],s=t[2],l=t[3],c=t[4],u=t[5],h=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*n+c*r,e[1]=a*n+u*r,e[2]=s*n+h*r,e[3]=l*n+d*r,e[4]=c*n-o*r,e[5]=u*n-a*r,e[6]=h*n-s*r,e[7]=d*n-l*r,e}function g(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function y(e,i,r){var n,o,a,s=r[0],l=r[1],c=r[2],u=Math.hypot(s,l,c);return u<t?null:(s*=u=1/u,l*=u,c*=u,n=Math.sin(i),o=Math.cos(i),e[0]=s*s*(a=1-o)+o,e[1]=l*s*a+c*n,e[2]=c*s*a-l*n,e[3]=0,e[4]=s*l*a-c*n,e[5]=l*l*a+o,e[6]=c*l*a+s*n,e[7]=0,e[8]=s*c*a+l*n,e[9]=l*c*a-s*n,e[10]=c*c*a+o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function _(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=i+i,s=r+r,l=n+n,c=i*a,u=r*a,h=r*s,d=n*a,p=n*s,f=n*l,m=o*a,g=o*s,y=o*l;return e[0]=1-h-f,e[1]=u+y,e[2]=d-g,e[3]=0,e[4]=u-y,e[5]=1-c-f,e[6]=p+m,e[7]=0,e[8]=d+g,e[9]=p-m,e[10]=1-c-h,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var v=u;function x(){var e=new i(3);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function C(e){var t=new i(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function w(e){return Math.hypot(e[0],e[1],e[2])}function b(e,t,r){var n=new i(3);return n[0]=e,n[1]=t,n[2]=r,n}function S(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e[2]=t[2]+i[2],e}function L(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e[2]=t[2]-i[2],e}function T(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e[2]=t[2]*i[2],e}function M(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e}function E(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e}function I(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function A(e,t,i,r){return e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r,e}function k(e,t){var i=t[0]-e[0],r=t[1]-e[1],n=t[2]-e[2];return i*i+r*r+n*n}function P(e){var t=e[0],i=e[1],r=e[2];return t*t+i*i+r*r}function O(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function R(e,t){var i=t[0],r=t[1],n=t[2],o=i*i+r*r+n*n;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function z(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function D(e,t,i){var r=t[0],n=t[1],o=t[2],a=i[0],s=i[1],l=i[2];return e[0]=n*l-o*s,e[1]=o*a-r*l,e[2]=r*s-n*a,e}function F(e,t,i,r){var n=t[0],o=t[1],a=t[2];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=a+r*(i[2]-a),e}function B(e,t,i){var r=t[0],n=t[1],o=t[2],a=i[3]*r+i[7]*n+i[11]*o+i[15];return e[0]=(i[0]*r+i[4]*n+i[8]*o+i[12])/(a=a||1),e[1]=(i[1]*r+i[5]*n+i[9]*o+i[13])/a,e[2]=(i[2]*r+i[6]*n+i[10]*o+i[14])/a,e}function V(e,t,i){var r=t[0],n=t[1],o=t[2];return e[0]=r*i[0]+n*i[3]+o*i[6],e[1]=r*i[1]+n*i[4]+o*i[7],e[2]=r*i[2]+n*i[5]+o*i[8],e}function N(e,t,i){var r=i[0],n=i[1],o=i[2],a=t[0],s=t[1],l=t[2],c=n*l-o*s,u=o*a-r*l,h=r*s-n*a,d=n*h-o*u,p=o*c-r*h,f=r*u-n*c,m=2*i[3];return u*=m,h*=m,p*=2,f*=2,e[0]=a+(c*=m)+(d*=2),e[1]=s+u+p,e[2]=l+h+f,e}function U(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}var j=L,H=T,Z=w;function W(){var e=new i(4);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function G(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e}function q(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=i*i+r*r+n*n+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=i*a,e[1]=r*a,e[2]=n*a,e[3]=o*a,e}function X(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3];return e[0]=i[0]*r+i[4]*n+i[8]*o+i[12]*a,e[1]=i[1]*r+i[5]*n+i[9]*o+i[13]*a,e[2]=i[2]*r+i[6]*n+i[10]*o+i[14]*a,e[3]=i[3]*r+i[7]*n+i[11]*o+i[15]*a,e}function Y(){var e=new i(4);return i!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function K(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function J(e,t,i){i*=.5;var r=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l+a*s,e[1]=n*l+o*s,e[2]=o*l-n*s,e[3]=a*l-r*s,e}function Q(e,t,i){i*=.5;var r=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l-o*s,e[1]=n*l+a*s,e[2]=o*l+r*s,e[3]=a*l-n*s,e}x(),W();var $,ee,te,ie,re,ne=q,oe=($=x(),ee=b(1,0,0),te=b(0,1,0),function(e,t,i){var r=z(t,i);return r<-.999999?(D($,ee,t),Z($)<1e-6&&D($,te,t),R($,$),function(e,t,i){i*=.5;var r=Math.sin(i);e[0]=r*t[0],e[1]=r*t[1],e[2]=r*t[2],e[3]=Math.cos(i)}(e,$,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(D($,t,i),e[0]=$[0],e[1]=$[1],e[2]=$[2],e[3]=1+r,ne(e,e))});function ae(){var e=new i(2);return i!=Float32Array&&(e[0]=0,e[1]=0),e}function se(e,t){var r=new i(2);return r[0]=e,r[1]=t,r}function le(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function ce(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function ue(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function he(e){return Math.hypot(e[0],e[1])}function de(e,t){var i=t[0],r=t[1],n=i*i+r*r;return n>0&&(n=1/Math.sqrt(n)),e[0]=t[0]*n,e[1]=t[1]*n,e}function pe(e,t){return e[0]*t[0]+e[1]*t[1]}function fe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}Y(),Y(),n(),ae();var me,ge,ye=function(){if(re)return ie;function e(e,t,i,r){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=t,this.p2x=i,this.p2y=r}return re=1,ie=e,e.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,t){if(void 0===t&&(t=1e-6),e<0)return 0;if(e>1)return 1;for(var i=e,r=0;r<8;r++){var n=this.sampleCurveX(i)-e;if(Math.abs(n)<t)return i;var o=this.sampleCurveDerivativeX(i);if(Math.abs(o)<1e-6)break;i-=n/o}var a=0,s=1;for(i=e,r=0;r<20&&(n=this.sampleCurveX(i),!(Math.abs(n-e)<t));r++)e>n?a=i:s=i,i=.5*(s-a)+a;return i},solve:function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},ie}(),_e=fe(ye);function ve(){if(ge)return me;function e(e,t){this.x=e,this.y=t}return ge=1,me=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[2]*this.x+e[3]*this.y;return this.x=e[0]*this.x+e[1]*this.y,this.y=t,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),r=i*this.x+t*this.y;return this.x=t*this.x-i*this.y,this.y=r,this},_rotateAround:function(e,t){var i=Math.cos(e),r=Math.sin(e),n=t.y+r*(this.x-t.x)+i*(this.y-t.y);return this.x=t.x+i*(this.x-t.x)-r*(this.y-t.y),this.y=n,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t},me}var xe=fe(ve());function Ce(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Ce(e[i],t[i]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!Ce(e[i],t[i]))return!1;return!0}return e===t}const we=Math.PI/180,be=180/Math.PI;function Se(e){return e*we}function Le(e){return e*be}const Te=[[0,0],[1,0],[1,1],[0,1]];function Me(e){if(e<=0)return 0;if(e>=1)return 1;const t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)}function Ee(e,t,i,r){const n=new _e(e,t,i,r);return function(e){return n.solve(e)}}const Ie=Ee(.25,.1,.25,1);function Ae(e,t,i){return Math.min(i,Math.max(t,e))}function ke(e,t,i){return(i=Ae((i-e)/(t-e),0,1))*i*(3-2*i)}function Pe(e,t,i){const r=i-t,n=((e-t)%r+r)%r+t;return n===t?i:n}function Oe(e,t,i){if(!e.length)return i(null,[]);let r=e.length;const n=new Array(e.length);let o=null;e.forEach((e,a)=>{t(e,(e,t)=>{e&&(o=e),n[a]=t,0==--r&&i(o,n)})})}function Re(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(const n of i)for(const t in n)e[t]=n[t];return e}let ze=1;function De(){return ze++}function Fe(e){return e<=1?1:Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function Be(e,t){e.forEach(e=>{t[e]&&(t[e]=t[e].bind(t))})}function Ve(e,t,i){const r={};for(const n in e)r[n]=t.call(this,e[n],n,e);return r}function Ne(e,t,i){const r={};for(const n in e)t.call(this,e[n],n,e)&&(r[n]=e[n]);return r}function Ue(e){return Array.isArray(e)?e.map(Ue):"object"==typeof e&&e?Ve(e,Ue):e}function je(e,t){for(let i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1}const He={};function Ze(e){He[e]||("undefined"!=typeof console&&console.warn(e),He[e]=!0)}function We(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)}function Ge(e){let t=0;for(let i,r,n=0,o=e.length,a=o-1;n<o;a=n++)i=e[n],r=e[a],t+=(r.x-i.x)*(i.y+r.y);return t}function qe(e){let[t,i,r]=e;const n=Se(i+90),o=Se(r);return{x:t*Math.cos(n)*Math.sin(o),y:t*Math.sin(n)*Math.sin(o),z:t*Math.cos(o),azimuthal:i,polar:r}}function Xe(e){return("undefined"!=typeof self||void 0!==e)&&"undefined"!=typeof WorkerGlobalScope&&(void 0!==e?e:self)instanceof WorkerGlobalScope}function Ye(e){const t={};if(e.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(e,i,r,n)=>{const o=r||n;return t[i]=!o||o.toLowerCase(),""}),t["max-age"]){const e=parseInt(t["max-age"],10);isNaN(e)?delete t["max-age"]:t["max-age"]=e}return t}let Ke=null;function Je(e,t){return[e[4*t],e[4*t+1],e[4*t+2],e[4*t+3]]}function Qe(e,t,i,r){for(;t<i;){const n=t+i>>1;e[n]<r?t=n+1:i=n}return t}function $e(e,t,i,r){for(;t<i;){const n=t+i>>1;e[n]<=r?t=n+1:i=n}return t}function et(e){return e>0?1/(1.001-e):1+e}function tt(e){return e>0?1-1/(1.001-e):-e}function it(e,t,i){return(e-t.min)*(i.max-i.min)/(t.max-t.min)+i.min}const rt={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!rt.API_URL)return null;try{const e=new URL(rt.API_URL);return"api.mapbox.cn"===e.hostname?"https://events.mapbox.cn/events/v2":"api.mapbox.com"===e.hostname?"https://events.mapbox.com/events/v2":null}catch(e){return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",BUILDING_GEN_URL:"https://api.mapbox.com/mapbox-gl-js/building-gen/building_gen_v0.3.0.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function nt(e){return rt.API_URL_REGEX.test(e)}function ot(e){return rt.API_SPRITE_REGEX.test(e)}let at,st,lt,ct,ut,ht;function dt(){return null==at&&(at=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),at}const pt={now:()=>void 0!==ct?ct:performance.now(),setNow(e){ct=e},restoreNow(){ct=void 0},frame(e){const t=requestAnimationFrame(e);return{cancel:()=>cancelAnimationFrame(t)}},getImageData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const{width:i,height:r}=e;ut||(ut=document.createElement("canvas"));const n=ut.getContext("2d",{willReadFrequently:!0});if(!n)throw new Error("failed to create canvas 2d context");return(i>ut.width||r>ut.height)&&(ut.width=i,ut.height=r),n.clearRect(-t,-t,i+2*t,r+2*t),n.drawImage(e,0,0,i,r),n.getImageData(-t,-t,i+2*t,r+2*t)},resolveURL:e=>(st||(st=document.createElement("a")),st.href=e,st.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(null==lt&&(lt=window.matchMedia("(prefers-reduced-motion: reduce)")),lt.matches)},hasCanvasFingerprintNoise(){if(void 0!==ht)return ht;if(!dt())return ht=!1,!1;const e=new OffscreenCanvas(85,1),t=e.getContext("2d",{willReadFrequently:!0});let i=0;for(let n=0;n<e.width;++n)t.fillStyle="rgba(".concat(i++,",").concat(i++,",").concat(i++,", 255)"),t.fillRect(n,0,1,1);const r=t.getImageData(0,0,e.width,e.height);i=0;for(let n=0;n<r.data.length;++n)if(n%4!=3&&i++!==r.data[n])return ht=!0,!0;return ht=!1,!1}};function ft(e,t){const i=e.indexOf("?");if(i<0)return"".concat(e,"?").concat(new URLSearchParams(t).toString());const r=new URLSearchParams(e.slice(i));for(const n in t)r.set(n,t[n]);return"".concat(e.slice(0,i),"?").concat(r.toString())}function mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{persistentParams:[]};const i=e.indexOf("?");if(i<0)return e;const r=new URLSearchParams,n=new URLSearchParams(e.slice(i));for(const a of t.persistentParams){const e=n.get(a);e&&r.set(a,e)}const o=r.toString();return"".concat(e.slice(0,i)).concat(o.length>0?"?".concat(o):"")}const gt="mapbox-tiles";let yt=500,_t=50;const vt=["language","worldview","jobid"];let xt,Ct;function wt(){try{return caches}catch(e){}}function bt(){const e=wt();e&&null==xt&&(xt=e.open(gt))}let St=1/0;const Lt={supported:!1,testSupport:function(e){!Et&&Mt&&(It?kt(e):Tt=e)}};let Tt,Mt,Et=!1,It=!1;const At="undefined"!=typeof self?self:{};function kt(e){const t=e.createTexture();e.bindTexture(e.TEXTURE_2D,t);try{if(e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,Mt),e.isContextLost())return;Lt.supported=!0}catch(e){}e.deleteTexture(t),Et=!0}At.document&&(Mt=At.document.createElement("img"),Mt.onload=function(){Tt&&kt(Tt),Tt=null,It=!0},Mt.onerror=function(){Et=!0,Tt=null},Mt.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Pt={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};"function"==typeof Object.freeze&&Object.freeze(Pt);class Ot extends Error{constructor(e,t,i){401===t&&nt(i)&&(e+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(e),this.status=t,this.url=i}toString(){return"".concat(this.name,": ").concat(this.message," (").concat(this.status,"): ").concat(this.url)}}const Rt=Xe()?()=>self.worker.referrer:()=>("blob:"===location.protocol?parent:self).location.href,zt=function(e,t){if(!(/^file:/.test(i=e.url)||/^file:/.test(Rt())&&!/^\w+:/.test(i))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(e,t){const i=new AbortController,r=new Request(e.url,{method:e.method||"GET",body:e.body,credentials:e.credentials,headers:e.headers,referrer:Rt(),referrerPolicy:e.referrerPolicy,signal:i.signal});let n=!1,o=!1;const a=(s=r.url).indexOf("sku=")>0&&nt(s);var s;"json"===e.type&&r.headers.set("Accept","application/json");const l=(i,n,s)=>{if(o)return;if(i&&"SecurityError"!==i.message&&Ze(i.toString()),n&&s)return c(n);const l=Date.now();fetch(r).then(i=>{if(i.ok){const e=a?i.clone():null;return c(i,e,l)}return t(new Ot(i.statusText,i.status,e.url))}).catch(i=>{"AbortError"!==i.name&&t(new Error("".concat(i.message," ").concat(e.url)))})},c=(i,a,s)=>{("arrayBuffer"===e.type?i.arrayBuffer():"json"===e.type?i.json():i.text()).then(e=>{o||(a&&s&&function(e,t,i){if(bt(),null==xt)return;const r=Ye(t.headers.get("Cache-Control")||"");if(r["no-store"])return;const n={status:t.status,statusText:t.statusText,headers:new Headers};t.headers.forEach((e,t)=>n.headers.set(t,e)),r["max-age"]&&n.headers.set("Expires",new Date(i+1e3*r["max-age"]).toUTCString());const o=n.headers.get("Expires");if(!o)return;if(new Date(o).getTime()-i<42e4)return;let a=mt(e.url,{persistentParams:vt});if(206===t.status){const t=e.headers.get("Range");if(!t)return;n.status=200,a=ft(a,{range:t})}!function(e,t){if(void 0===Ct)try{new Response(new ReadableStream),Ct=!0}catch(e){Ct=!1}Ct?t(e.body):e.blob().then(t).catch(e=>Ze(e.message))}(t,e=>{const i=new Response(200!==(r=t.status)&&404!==r&&[101,103,204,205,304].includes(r)?null:e,n);var r;bt(),null!=xt&&xt.then(e=>e.put(a,i)).catch(e=>Ze(e.message))})}(r,a,s),n=!0,t(null,e,i.headers.get("Cache-Control"),i.headers.get("Expires")))}).catch(e=>{o||t(new Error(e.message))})};return a?function(e,t){if(bt(),null==xt)return t(null);xt.then(i=>{let r=mt(e.url,{persistentParams:vt});const n=e.headers.get("Range");n&&(r=ft(r,{range:n})),i.match(r).then(e=>{const n=function(e){if(!e)return!1;const t=new Date(e.headers.get("Expires")||0),i=Ye(e.headers.get("Cache-Control")||"");return Number(t)>Date.now()&&!i["no-cache"]}(e);i.delete(r).catch(t),n&&i.put(r,e.clone()).catch(t),t(null,e,n)}).catch(t)}).catch(t)}(r,l):l(null,null),{cancel:()=>{o=!0,n||i.abort()}}}(e,t);if(Xe(self)&&self.worker.actor)return self.worker.actor.send("getResource",e,t,void 0,!0)}var i;return function(e,t){const i=new XMLHttpRequest;i.open(e.method||"GET",e.url,!0),"arrayBuffer"===e.type&&(i.responseType="arraybuffer");for(const r in e.headers)i.setRequestHeader(r,e.headers[r]);return"json"===e.type&&(i.responseType="text",i.setRequestHeader("Accept","application/json")),i.withCredentials="include"===e.credentials,i.onerror=()=>{t(new Error(i.statusText))},i.onload=()=>{if((i.status>=200&&i.status<300||0===i.status)&&null!==i.response){let r=i.response;if("json"===e.type)try{r=JSON.parse(i.response)}catch(e){return t(e)}t(null,r,i.getResponseHeader("Cache-Control"),i.getResponseHeader("Expires"))}else t(new Ot(i.statusText,i.status,e.url))},i.send(e.body),{cancel:()=>i.abort()}}(e,t)},Dt=function(e,t){return zt(Re(e,{type:"arrayBuffer"}),t)};function Ft(e){const t=document.createElement("a");return t.href=e,t.protocol===location.protocol&&t.host===location.host}const Bt="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let Vt,Nt;Vt=[],Nt=0;const Ut=function(e,t){if(Lt.supported&&(e.headers||(e.headers={}),e.headers.accept="image/webp,*/*"),Nt>=rt.MAX_PARALLEL_IMAGE_REQUESTS){const i={requestParameters:e,callback:t,cancelled:!1,cancel(){this.cancelled=!0}};return Vt.push(i),i}Nt++;let i=!1;const r=()=>{if(!i)for(i=!0,Nt--;Vt.length&&Nt<rt.MAX_PARALLEL_IMAGE_REQUESTS;){const e=Vt.shift(),{requestParameters:t,callback:i,cancelled:r}=e;r||(e.cancel=Ut(t,i).cancel)}},n=Dt(e,(e,i,n,o)=>{r(),e?t(e):i&&(self.createImageBitmap?function(e,t){const i=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(i).then(e=>{t(null,e)}).catch(e=>{t(new Error("Could not load image because of ".concat(e.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}(i,(e,i)=>t(e,i,n,o)):function(e,t){const i=new Image;i.onload=()=>{t(null,i),URL.revokeObjectURL(i.src),i.onload=null,requestAnimationFrame(()=>{i.src=Bt})},i.onerror=()=>t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const r=new Blob([new Uint8Array(e)],{type:"image/png"});i.src=e.byteLength?URL.createObjectURL(r):Bt}(i,(e,i)=>t(e,i,n,o)))});return{cancel:()=>{n.cancel(),r()}}};var jt,Ht,Zt,Wt={exports:{}},Gt={exports:{}},qt={exports:{}},Xt=function(){if(Zt)return Wt.exports;Zt=1;var e=(jt||(jt=1,Gt.exports=function(e,t){var i,r,n,o,a,s,l,c;for(r=e.length-(i=3&e.length),n=t,a=3432918353,s=461845907,c=0;c<r;)l=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,n=27492+(65535&(o=5*(65535&(n=(n^=l=(65535&(l=(l=(65535&l)*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295)<<13|n>>>19))+((5*(n>>>16)&65535)<<16)&4294967295))+((58964+(o>>>16)&65535)<<16);switch(l=0,i){case 3:l^=(255&e.charCodeAt(c+2))<<16;case 2:l^=(255&e.charCodeAt(c+1))<<8;case 1:n^=l=(65535&(l=(l=(65535&(l^=255&e.charCodeAt(c)))*a+(((l>>>16)*a&65535)<<16)&4294967295)<<15|l>>>17))*s+(((l>>>16)*s&65535)<<16)&4294967295}return n^=e.length,n=2246822507*(65535&(n^=n>>>16))+((2246822507*(n>>>16)&65535)<<16)&4294967295,n=3266489909*(65535&(n^=n>>>13))+((3266489909*(n>>>16)&65535)<<16)&4294967295,(n^=n>>>16)>>>0}),Gt.exports),t=(Ht||(Ht=1,qt.exports=function(e,t){for(var i,r=e.length,n=t^r,o=0;r>=4;)i=1540483477*(65535&(i=255&e.charCodeAt(o)|(255&e.charCodeAt(++o))<<8|(255&e.charCodeAt(++o))<<16|(255&e.charCodeAt(++o))<<24))+((1540483477*(i>>>16)&65535)<<16),n=1540483477*(65535&n)+((1540483477*(n>>>16)&65535)<<16)^(i=1540483477*(65535&(i^=i>>>24))+((1540483477*(i>>>16)&65535)<<16)),r-=4,++o;switch(r){case 3:n^=(255&e.charCodeAt(o+2))<<16;case 2:n^=(255&e.charCodeAt(o+1))<<8;case 1:n=1540483477*(65535&(n^=255&e.charCodeAt(o)))+((1540483477*(n>>>16)&65535)<<16)}return n=1540483477*(65535&(n^=n>>>13))+((1540483477*(n>>>16)&65535)<<16),(n^=n>>>15)>>>0}),qt.exports);return Wt.exports=e,Wt.exports.murmur3=e,Wt.exports.murmur2=t,Wt.exports}(),Yt=fe(Xt);class Kt{constructor(e){Re(this,(arguments.length<=1?void 0:arguments[1])||{}),this.type=e}}class Jt extends Kt{constructor(e){super("error",Re({error:e},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}}function Qt(e,t,i){i[e]&&-1!==i[e].indexOf(t)||(i[e]=i[e]||[],i[e].push(t))}function $t(e,t,i){if(i&&i[e]){const r=i[e].indexOf(t);-1!==r&&i[e].splice(r,1)}}class ei{on(e,t){return this._listeners=this._listeners||{},Qt(e,t,this._listeners),this}off(e,t){return $t(e,t,this._listeners),$t(e,t,this._oneTimeListeners),this}once(e,t){return t?(this._oneTimeListeners=this._oneTimeListeners||{},Qt(e,t,this._oneTimeListeners),this):new Promise(t=>{this.once(e,t)})}fire(e,t){const i="string"==typeof e?new Kt(e,t):e,r=i.type;if(this.listens(r)){i.target=this;const e=this._listeners&&this._listeners[r]?this._listeners[r].slice():[];for(const r of e)r.call(this,i);const t=this._oneTimeListeners&&this._oneTimeListeners[r]?this._oneTimeListeners[r].slice():[];for(const o of t)$t(r,o,this._oneTimeListeners),o.call(this,i);const n=this._eventedParent;n&&(Re(i,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),n.fire(i))}else i instanceof Jt&&console.error(i.error);return this}listens(e){return!!(this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e))}setEventedParent(e,t){return this._eventedParent=e,this._eventedParentData=t,this}}class ti{constructor(e){"string"==typeof e?this.name=e:(this.name=e.name,this.iconsetId=e.iconsetId)}static from(e){return new ti(e)}static toString(e){return e.iconsetId?"".concat(e.name,"\x1f").concat(e.iconsetId):e.name}static parse(e){const[t,i]=e.split("\x1f");return new ti({name:t,iconsetId:i})}static isEqual(e,t){return e.name===t.name&&e.iconsetId===t.iconsetId}toString(){return ti.toString(this)}serialize(){return{name:this.name,iconsetId:this.iconsetId}}}var ii,ri={},ni=function(){if(ii)return ri;ii=1;var e={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function t(e){return(e=Math.round(e))<0?0:e>255?255:e}function i(e){return t("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function r(e){return(t="%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))<0?0:t>1?1:t;var t}function n(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}try{ri.parseCSSColor=function(o){var a,s=o.replace(/ /g,"").toLowerCase();if(s in e)return e[s].slice();if("#"===s[0])return 4===s.length?(a=parseInt(s.substr(1),16))>=0&&a<=4095?[(3840&a)>>4|(3840&a)>>8,240&a|(240&a)>>4,15&a|(15&a)<<4,1]:null:7===s.length&&(a=parseInt(s.substr(1),16))>=0&&a<=16777215?[(16711680&a)>>16,(65280&a)>>8,255&a,1]:null;var l=s.indexOf("("),c=s.indexOf(")");if(-1!==l&&c+1===s.length){var u=s.substr(0,l),h=s.substr(l+1,c-(l+1)).split(","),d=1;switch(u){case"rgba":if(4!==h.length)return null;d=r(h.pop());case"rgb":return 3!==h.length?null:[i(h[0]),i(h[1]),i(h[2]),d];case"hsla":if(4!==h.length)return null;d=r(h.pop());case"hsl":if(3!==h.length)return null;var p=(parseFloat(h[0])%360+360)%360/360,f=r(h[1]),m=r(h[2]),g=m<=.5?m*(f+1):m+f-m*f,y=2*m-g;return[t(255*n(y,g,p+1/3)),t(255*n(y,g,p)),t(255*n(y,g,p-1/3)),d];default:return null}}return null}}catch(e){}return ri}();class oi{constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.r=e,this.g=t,this.b=i,this.a=r}static parse(e){if(!e)return;if(e instanceof oi)return e;if("string"!=typeof e)return;const t=ni.parseCSSColor(e);return t?new oi(t[0]/255,t[1]/255,t[2]/255,t[3]):void 0}toString(){const[e,t,i,r]=[this.r,this.g,this.b,this.a];return"rgba(".concat(Math.round(255*e),",").concat(Math.round(255*t),",").concat(Math.round(255*i),",").concat(r,")")}toNonPremultipliedRenderColor(e){const{r:t,g:i,b:r,a:n}=this;return new si(e,t,i,r,n)}toPremultipliedRenderColor(e){const{r:t,g:i,b:r,a:n}=this;return new li(e,t*n,i*n,r*n,n)}clone(){return new oi(this.r,this.g,this.b,this.a)}}class ai{constructor(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(this.premultiplied=!1,this.premultiplied=o,e){const o=e.image.height,a=o*o;this.premultiplied?(t=0===n?0:t/n*(o-1),i=0===n?0:i/n*(o-1),r=0===n?0:r/n*(o-1)):(t*=o-1,i*=o-1,r*=o-1);const s=Math.floor(t),l=Math.floor(i),c=Math.floor(r),u=Math.ceil(t),h=Math.ceil(i),d=Math.ceil(r),p=t-s,f=i-l,m=r-c,g=e.image.data,y=4*(s+l*a+c*o),_=4*(s+l*a+d*o),v=4*(s+h*a+c*o),x=4*(s+h*a+d*o),C=4*(u+l*a+c*o),w=4*(u+l*a+d*o),b=4*(u+h*a+c*o),S=4*(u+h*a+d*o);if(y<0||S>=g.length)throw new Error("out of range");this.r=ci(ci(ci(g[y],g[_],m),ci(g[v],g[x],m),f),ci(ci(g[C],g[w],m),ci(g[b],g[S],m),f),p)/255*(this.premultiplied?n:1),this.g=ci(ci(ci(g[y+1],g[_+1],m),ci(g[v+1],g[x+1],m),f),ci(ci(g[C+1],g[w+1],m),ci(g[b+1],g[S+1],m),f),p)/255*(this.premultiplied?n:1),this.b=ci(ci(ci(g[y+2],g[_+2],m),ci(g[v+2],g[x+2],m),f),ci(ci(g[C+2],g[w+2],m),ci(g[b+2],g[S+2],m),f),p)/255*(this.premultiplied?n:1),this.a=n}else this.r=t,this.g=i,this.b=r,this.a=n}toArray(){const{r:e,g:t,b:i,a:r}=this;return[255*e,255*t,255*i,r]}toHslaArray(){let{r:e,g:t,b:i,a:r}=this;if(this.premultiplied){if(0===r)return[0,0,0,0];e/=r,t/=r,i/=r}const n=Math.min(Math.max(e,0),1),o=Math.min(Math.max(t,0),1),a=Math.min(Math.max(i,0),1),s=Math.min(n,o,a),l=Math.max(n,o,a),c=(s+l)/2;if(s===l)return[0,0,100*c,r];const u=l-s,h=c>.5?u/(2-l-s):u/(l+s);let d=0;return l===n?d=(o-a)/u+(o<a?6:0):l===o?d=(a-n)/u+2:l===a&&(d=(n-o)/u+4),d*=60,[Math.min(Math.max(d,0),360),Math.min(Math.max(100*h,0),100),Math.min(Math.max(100*c,0),100),r]}toArray01(){const{r:e,g:t,b:i,a:r}=this;return[e,t,i,r]}toArray01Scaled(e){const{r:t,g:i,b:r}=this;return[t*e,i*e,r*e]}toArray01Linear(){const{r:e,g:t,b:i,a:r}=this;return[Math.pow(e,2.2),Math.pow(t,2.2),Math.pow(i,2.2),r]}}class si extends ai{constructor(e,t,i,r,n){super(e,t,i,r,n,!1)}}class li extends ai{constructor(e,t,i,r,n){super(e,t,i,r,n,!0)}}function ci(e,t,i){return e*(1-i)+t*i}function ui(e,t,i){return e.map((e,r)=>ci(e,t[r],i))}oi.black=new oi(0,0,0,1),oi.white=new oi(1,1,1,1),oi.transparent=new oi(0,0,0,0),oi.red=new oi(1,0,0,1),oi.blue=new oi(0,0,1,1);var hi=Object.freeze({__proto__:null,array:ui,color:function(e,t,i){return new oi(ci(e.r,t.r,i),ci(e.g,t.g,i),ci(e.b,t.b,i),ci(e.a,t.a,i))},number:ci});function di(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];for(const n of i)for(const t in n)e[t]=n[t];return e}class pi extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}class fi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.parent=e,this.bindings={};for(const[i,r]of t)this.bindings[i]=r}concat(e){return new fi(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error("".concat(e," not found in scope."))}has(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)}}const mi={kind:"null"},gi={kind:"number"},yi={kind:"string"},_i={kind:"boolean"},vi={kind:"color"},xi={kind:"object"},Ci={kind:"value"},wi={kind:"collator"},bi={kind:"formatted"},Si={kind:"resolvedImage"};function Li(e,t){return{kind:"array",itemType:e,N:t}}function Ti(e){if("array"===e.kind){const t=Ti(e.itemType);return"number"==typeof e.N?"array<".concat(t,", ").concat(e.N,">"):"value"===e.itemType.kind?"array":"array<".concat(t,">")}return e.kind}const Mi=[mi,gi,yi,_i,vi,bi,xi,Li(Ci),Si];function Ei(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&(0===t.N&&"value"===t.itemType.kind||!Ei(e.itemType,t.itemType))&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(const e of Mi)if(!Ei(e,t))return null}return"Expected ".concat(Ti(e)," but found ").concat(Ti(t)," instead.")}function Ii(e,t){return t.some(t=>t.kind===e.kind)}function Ai(e,t){return t.some(t=>"null"===t?null===e:"array"===t?Array.isArray(e):"object"===t?e&&!Array.isArray(e)&&"object"==typeof e:t===typeof e)}function ki(e,t){return"array"===e.kind&&"array"===t.kind?e.N===t.N&&ki(e.itemType,t.itemType):e.kind===t.kind}class Pi{constructor(e,t,i){this.sensitivity=e?t?"variant":"case":t?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Oi{constructor(e,t,i,r,n){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=i,this.fontStack=r,this.textColor=n}}class Ri{constructor(e){this.sections=e}static fromString(e){return new Ri([new Oi(e,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some(e=>0!==e.text.length||!!e.image&&e.image.hasPrimary())}static factory(e){return e instanceof Ri?e:Ri.fromString(e)}toString(){return 0===this.sections.length?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){const i=t.image.getPrimary().id.toString();e.push(["image",i]);continue}e.push(t.text);const i={};t.fontStack&&(i["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(i["font-scale"]=t.scale),t.textColor&&(i["text-color"]=["rgba"].concat(t.textColor.toNonPremultipliedRenderColor(null).toArray())),e.push(i)}return e}}class zi{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.id=ti.from(e),this.options=Object.assign({},t),t.transform){const{a:e,b:i,c:r,d:n,e:o,f:a}=t.transform;this.options.transform=new DOMMatrix([e,i,r,n,o,a])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}toString(){const{a:e,b:t,c:i,d:r,e:n,f:o}=this.options.transform;return JSON.stringify({name:this.id.name,iconsetId:this.id.iconsetId,params:this.options.params,transform:{a:e,b:t,c:i,d:r,e:n,f:o}})}static parse(e){let t,i,r,n;try{({name:t,iconsetId:i,params:r,transform:n}=JSON.parse(e)||{})}catch(e){return null}if(!t)return null;const{a:o,b:a,c:s,d:l,e:c,f:u}=n||{};return new zi({name:t,iconsetId:i},{params:r,transform:new DOMMatrix([o,a,s,l,c,u])})}scaleSelf(e,t){return this.options.transform.scaleSelf(e,t),this}}class Di{constructor(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.primaryId=ti.from(e),this.primaryOptions=t,i&&(this.secondaryId=ti.from(i)),this.secondaryOptions=r,this.available=n}toString(){return this.primaryId&&this.secondaryId?"[".concat(this.primaryId.name,",").concat(this.secondaryId.name,"]"):this.primaryId.name}hasPrimary(){return!!this.primaryId}getPrimary(){return new zi(this.primaryId,this.primaryOptions)}hasSecondary(){return!!this.secondaryId}getSecondary(){return this.secondaryId?new zi(this.secondaryId,this.secondaryOptions):null}static from(e){return"string"==typeof e?Di.build({name:e}):e}static build(e,t,i,r){return!e||"object"==typeof e&&!("name"in e)?null:new Di(e,i,t,r)}}function Fi(e,t,i,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value [".concat([e,t,i,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid rgba value [".concat(("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", "),"]: 'r', 'g', and 'b' must be between 0 and 255.")}function Bi(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof oi)return!0;if(e instanceof Pi)return!0;if(e instanceof Ri)return!0;if(e instanceof Di)return!0;if(Array.isArray(e)){for(const t of e)if(!Bi(t))return!1;return!0}if("object"==typeof e){for(const t in e)if(!Bi(e[t]))return!1;return!0}return!1}function Vi(e){if(null===e)return mi;if("string"==typeof e)return yi;if("boolean"==typeof e)return _i;if("number"==typeof e)return gi;if(e instanceof oi)return vi;if(e instanceof Pi)return wi;if(e instanceof Ri)return bi;if(e instanceof Di)return Si;if(Array.isArray(e)){const t=e.length;let i;for(const r of e){const e=Vi(r);if(i){if(i===e)continue;i=Ci;break}i=e}return Li(i||Ci,t)}return xi}function Ni(e){const t=typeof e;return null===e?"":"string"===t||"number"===t||"boolean"===t?String(e):e instanceof Ri||e instanceof Di||e instanceof oi?e.toString():JSON.stringify(e)}class Ui{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(!Bi(e[1]))return t.error("invalid value");const i=e[1];let r=Vi(i);const n=t.expectedType;return"array"!==r.kind||0!==r.N||!n||"array"!==n.kind||"number"==typeof n.N&&0!==n.N||(r=n),new Ui(r,i)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof oi?["rgba"].concat(this.value.toNonPremultipliedRenderColor(null).toArray()):this.value instanceof Ri?this.value.serialize():this.value}}class ji{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const Hi={string:yi,number:gi,boolean:_i,object:xi};class Zi{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let i,r=1;const n=e[0];if("array"===n){let n,o;if(e.length>2){const i=e[1];if("string"!=typeof i||!(i in Hi)||"object"===i)return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=Hi[i],r++}else n=Ci;if(e.length>3){if(null!==e[2]&&("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);o=e[2],r++}i=Li(n,o)}else i=Hi[n];const o=[];for(;r<e.length;r++){const i=t.parse(e[r],r,Ci);if(!i)return null;o.push(i)}return new Zi(i,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const i=this.args[t].evaluate(e);if(!Ei(this.type,Vi(i)))return i;if(t===this.args.length-1)throw new ji("The expression ".concat(JSON.stringify(this.args[t].serialize())," evaluated to ").concat(Ti(Vi(i))," but was expected to be of type ").concat(Ti(this.type),"."))}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if("array"===e.kind){const i=e.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){t.push(i.kind);const r=e.N;("number"==typeof r||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(e=>e.serialize()))}}class Wi{constructor(e){this.type=bi,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[1];if(!Array.isArray(i)&&"object"==typeof i)return t.error("First argument must be an image or text section.");const r=[];let n=!1;for(let o=1;o<=e.length-1;++o){const i=e[o];if(n&&"object"==typeof i&&!Array.isArray(i)){n=!1;let e=null;if(i["font-scale"]&&(e=t.parseObjectValue(i["font-scale"],o,"font-scale",gi),!e))return null;let a=null;if(i["text-font"]&&(a=t.parseObjectValue(i["text-font"],o,"text-font",Li(yi)),!a))return null;let s=null;if(i["text-color"]&&(s=t.parseObjectValue(i["text-color"],o,"text-color",vi),!s))return null;const l=r[r.length-1];l.scale=e,l.font=a,l.textColor=s}else{const i=t.parse(e[o],o,Ci);if(!i)return null;const a=i.type.kind;if("string"!==a&&"value"!==a&&"null"!==a&&"resolvedImage"!==a)return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");n=!0,r.push({content:i,scale:null,font:null,textColor:null})}}return new Wi(r)}evaluate(e){return new Ri(this.sections.map(t=>{const i=t.content.evaluate(e);return ki(Vi(i),Si)?new Oi("",i,null,null,null):new Oi(Ni(i),null,t.scale?t.scale.evaluate(e):null,t.font?t.font.evaluate(e).join(","):null,t.textColor?t.textColor.evaluate(e):null)}))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const i={};t.scale&&(i["font-scale"]=t.scale.serialize()),t.font&&(i["text-font"]=t.font.serialize()),t.textColor&&(i["text-color"]=t.textColor.serialize()),e.push(i)}return e}}class Gi{constructor(e,t,i,r){this._imageWarnHistory={},this.type=Si,this.namePrimary=e,this.nameSecondary=t,i&&(this.paramsPrimary=i.params,this.iconsetIdPrimary=i.iconset?i.iconset.id:void 0),r&&(this.paramsSecondary=r.params,this.iconsetIdSecondary=r.iconset?r.iconset.id:void 0)}static parse(e,t){if(e.length<2)return t.error("Expected two or more arguments.");let i=1;const r=[];function n(){if(i<e.length){const n=t.parse(e[i],i++,yi);return n?(r.push({image:n,options:{}}),!0):(t.error(r.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function o(){if(i<e.length){const o=e[i];if(null===(n=o)||"object"!=typeof n||Array.isArray(n))return!0;const a=o.params,s=o.iconset,l=t.concat(i);if(!a&&!s)return i++,!0;if(a){if("object"!=typeof a||a.constructor!==Object)return l.error('Image options "params" should be an object'),!1;const e={},t=l.concat(void 0,"params");for(const i in a){if(!i)return t.error("Image parameter name should be non-empty"),!1;const r=t.concat(void 0,i).parse(a[i],void 0,vi,void 0,{typeAnnotation:"coerce"});if(!r)return!1;e[i]=r}r[r.length-1].options.params=e}if(s){if("object"!=typeof s||s.constructor!==Object)return l.error('Image options "iconset" should be an object'),!1;if(!s.id)return l.error('Image options "iconset" should have an "id" property'),!1;r[r.length-1].options.iconset=s}return i++,!0}var n;return!0}for(let a=0;a<2;a++)if(!n()||!o())return;return new Gi(r[0].image,r[1]?r[1].image:void 0,r[0].options,r[1]?r[1].options:void 0)}evaluateParams(e,t){const i={};if(t){for(const r in t)if(t[r])try{i[r]=t[r].evaluate(e)}catch(e){continue}if(0!==Object.keys(i).length)return{params:i}}}evaluate(e){const t={name:this.namePrimary.evaluate(e),iconsetId:this.iconsetIdPrimary},i=this.nameSecondary?{name:this.nameSecondary.evaluate(e),iconsetId:this.iconsetIdSecondary}:void 0,r=Di.build(t,i,this.paramsPrimary?this.evaluateParams(e,this.paramsPrimary):void 0,this.paramsSecondary?this.evaluateParams(e,this.paramsSecondary):void 0);if(r&&e.availableImages){const t=r.getPrimary().id;if(r.available=e.availableImages.some(e=>ti.isEqual(e,t)),r.available){const t=r.getSecondary()?r.getSecondary().id:null;t&&(r.available=e.availableImages.some(e=>ti.isEqual(e,t)))}}return r}eachChild(e){if(e(this.namePrimary),this.paramsPrimary)for(const t in this.paramsPrimary)this.paramsPrimary[t]&&e(this.paramsPrimary[t]);if(this.nameSecondary&&(e(this.nameSecondary),this.paramsSecondary))for(const t in this.paramsSecondary)this.paramsSecondary[t]&&e(this.paramsSecondary[t])}outputDefined(){return!1}serializeOptions(e,t){const i={};if(t&&(i.iconset={id:t}),e){i.params={};for(const t in e)e[t]&&(i.params[t]=e[t].serialize())}return Object.keys(i).length>0?i:void 0}serialize(){const e=["image",this.namePrimary.serialize()];if(this.paramsPrimary||this.iconsetIdPrimary){const t=this.serializeOptions(this.paramsPrimary,this.iconsetIdPrimary);t&&e.push(t)}if(this.nameSecondary&&(e.push(this.nameSecondary.serialize()),this.paramsSecondary||this.iconsetIdSecondary)){const t=this.serializeOptions(this.paramsSecondary,this.iconsetIdSecondary);t&&e.push(t)}return e}}function qi(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}const Xi={"to-boolean":_i,"to-color":vi,"to-number":gi,"to-string":yi};class Yi{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const i=e[0],r=[];let n=mi;if("to-array"===i){if(!Array.isArray(e[1]))return null;const i=e[1].length;if(t.expectedType){if("array"!==t.expectedType.kind)return t.error("Expected ".concat(t.expectedType.kind," but found array."));n=Li(t.expectedType.itemType,i)}else{if(!(i>0&&Bi(e[1][0])))return null;n=Li(Vi(e[1][0]),i)}for(let o=0;o<i;o++){const i=e[1][o];let a;if("array"===qi(i))a=t.parse(i,void 0,n.itemType);else{const e=qi(i);if(e!==n.itemType.kind)return t.error("Expected ".concat(n.itemType.kind," but found ").concat(e,"."));a=t.registry.literal.parse(["literal",void 0===i?null:i],t)}if(!a)return null;r.push(a)}}else{if(("to-boolean"===i||"to-string"===i)&&2!==e.length)return t.error("Expected one argument.");n=Xi[i];for(let i=1;i<e.length;i++){const n=t.parse(e[i],i,Ci);if(!n)return null;r.push(n)}}return new Yi(n,r)}evaluate(e){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(e));if("color"===this.type.kind){let t,i;for(const r of this.args){if(t=r.evaluate(e),i=null,t instanceof oi)return t;if("string"==typeof t){const i=e.parseColor(t);if(i)return i}else if(Array.isArray(t)&&(i=t.length<3||t.length>4?"Invalid rbga value ".concat(JSON.stringify(t),": expected an array containing either three or four numeric values."):Fi(t[0],t[1],t[2],t[3]),!i))return new oi(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new ji(i||"Could not parse color from value '".concat("string"==typeof t?t:String(JSON.stringify(t)),"'"))}if("number"===this.type.kind){let t=null;for(const i of this.args){if(t=i.evaluate(e),null===t)return 0;const r=Number(t);if(!isNaN(r))return r}throw new ji("Could not convert ".concat(JSON.stringify(t)," to number."))}return"formatted"===this.type.kind?Ri.fromString(Ni(this.args[0].evaluate(e))):"resolvedImage"===this.type.kind?Di.build(Ni(this.args[0].evaluate(e))):"array"===this.type.kind?this.args.map(t=>t.evaluate(e)):Ni(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if("formatted"===this.type.kind)return new Wi([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new Gi(this.args[0]).serialize();const e="array"===this.type.kind?[]:["to-".concat(this.type.kind)];return this.eachChild(t=>{e.push(t.serialize())}),e}}const Ki=["Unknown","Point","LineString","Polygon"];class Ji{constructor(e,t){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=e,this.options=t}id(){return this.feature&&void 0!==this.feature.id?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Ki[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(e){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:i,y:r}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(i*t-e[0])+this.featureDistanceData.bearing[1]*(r*t-e[1])}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=oi.parse(e)),t}getConfig(e){return this.options?this.options.get(e):null}}class Qi{constructor(e,t,i,r,n){this.name=e,this.type=t,this._evaluate=i,this.args=r,this._overloadIndex=n}evaluate(e){if(!this._evaluate){const e=Qi.definitions[this.name];this._evaluate=Array.isArray(e)?e[2]:e.overloads[this._overloadIndex][1]}return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const i=e[0],r=Qi.definitions[i];if(!r)return t.error('Unknown expression "'.concat(i,'". If you wanted a literal array, use ["literal", [...]].'),0);const n=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=[];let s=null,l=-1;for(const[c,u]of o){if(Array.isArray(c)&&c.length!==e.length-1)continue;a.push(c),l++,s=new xn(t.registry,t.path,null,t.scope,void 0,t._scope,t.options);const r=[];let o=!1;for(let t=1;t<e.length;t++){const i=e[t],n=Array.isArray(c)?c[t-1]:c.type,a=s.parse(i,1+r.length,n);if(!a){o=!0;break}r.push(a)}if(!o)if(Array.isArray(c)&&c.length!==r.length)s.error("Expected ".concat(c.length," arguments, but found ").concat(r.length," instead."));else{for(let e=0;e<r.length;e++){const t=Array.isArray(c)?c[e]:c.type,i=r[e];s.concat(e+1).checkSubtype(t,i.type)}if(0===s.errors.length)return new Qi(i,n,u,r,l)}}if(1===a.length)t.errors.push(...s.errors);else{const i=(a.length?a:o.map(e=>{let[t]=e;return t})).map($i).join(" | "),r=[];for(let n=1;n<e.length;n++){const i=t.parse(e[n],1+r.length);if(!i)return null;r.push(Ti(i.type))}t.error("Expected arguments of type ".concat(i,", but found (").concat(r.join(", "),") instead."))}return null}static register(e,t){Qi.definitions=t;for(const i in t)e[i]=Qi}}function $i(e){return Array.isArray(e)?"(".concat(e.map(Ti).join(", "),")"):"(".concat(Ti(e.type),"...)")}class er{constructor(e,t,i){this.type=wi,this.locale=i,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(2!==e.length)return t.error("Expected one argument.");const i=e[1];if("object"!=typeof i||Array.isArray(i))return t.error("Collator options argument must be an object.");const r=void 0===i["case-sensitive"]?t.parse(!1,1,_i):t.parseObjectValue(i["case-sensitive"],1,"case-sensitive",_i);if(!r)return null;const n=void 0===i["diacritic-sensitive"]?t.parse(!1,1,_i):t.parseObjectValue(i["diacritic-sensitive"],1,"diacritic-sensitive",_i);if(!n)return null;let o=null;return i.locale&&(o=t.parseObjectValue(i.locale,1,"locale",yi),!o)?null:new er(r,n,o)}evaluate(e){return new Pi(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}function tr(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length-1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:rr;for(;r>i;){if(r-i>600){const o=r-i+1,a=t-i+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);tr(e,t,Math.max(i,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),n)}const o=e[t];let a=i,s=r;for(ir(e,i,t),n(e[r],o)>0&&ir(e,i,r);a<s;){for(ir(e,a,s),a++,s--;n(e[a],o)<0;)a++;for(;n(e[s],o)>0;)s--}0===n(e[i],o)?ir(e,i,s):(s++,ir(e,s,r)),s<=t&&(i=s+1),t<=s&&(r=s-1)}}function ir(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}function rr(e,t){return e<t?-1:e>t?1:0}function nr(e){let t=0;for(let i,r,n=0,o=e.length,a=o-1;n<o;a=n++)i=e[n],r=e[a],t+=(r.x-i.x)*(i.y+r.y);return t}function or(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.max(e[2],t[0]),e[3]=Math.max(e[3],t[1])}function ar(e,t){return!(e[0]<=t[0]||e[2]>=t[2]||e[1]<=t[1]||e[3]>=t[3])}function sr(e,t,i){const r=e[0]-t[0],n=e[1]-t[1],o=e[0]-i[0],a=e[1]-i[1];return r*a-o*n==0&&r*o<=0&&n*a<=0}function lr(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!1;for(let s=0,l=t.length;s<l;s++){const l=t[s];for(let t=0,s=l.length,c=s-1;t<s;c=t++){const s=l[c],u=l[t];if(sr(e,s,u))return i;(o=s)[1]>(n=e)[1]!=(a=u)[1]>n[1]&&n[0]<(a[0]-o[0])*(n[1]-o[1])/(a[1]-o[1])+o[0]&&(r=!r)}}var n,o,a;return r}function cr(e,t,i,r){const n=r[0]-i[0],o=r[1]-i[1],a=(e[0]-i[0])*o-n*(e[1]-i[1]),s=(t[0]-i[0])*o-n*(t[1]-i[1]);return a>0&&s<0||a<0&&s>0}function ur(e,t,i,r){return 0!=(n=[r[0]-i[0],r[1]-i[1]])[0]*(o=[t[0]-e[0],t[1]-e[1]])[1]-n[1]*o[0]&&!(!cr(e,t,i,r)||!cr(i,r,e,t));var n,o}function hr(e){const t=new xe(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),i=new xe(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY);for(const r of e[0])t.x>r.x&&(t.x=r.x),t.y>r.y&&(t.y=r.y),i.x<r.x&&(i.x=r.x),i.y<r.y&&(i.y=r.y);return{min:t,max:i}}const dr=8192;function pr(e,t){const i=(180+e[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e[1]*Math.PI/360)))/360,n=Math.pow(2,t.z);return[Math.round(i*n*dr),Math.round(r*n*dr)]}function fr(e,t){for(let i=0;i<t.length;i++)if(lr(e,t[i]))return!0;return!1}function mr(e,t,i){for(const r of i)for(let i=0,n=r.length,o=n-1;i<n;o=i++)if(ur(e,t,r[o],r[i]))return!0;return!1}function gr(e,t){for(let i=0;i<e.length;++i)if(!lr(e[i],t))return!1;for(let i=0;i<e.length-1;++i)if(mr(e[i],e[i+1],t))return!1;return!0}function yr(e,t){for(let i=0;i<t.length;i++)if(gr(e,t[i]))return!0;return!1}function _r(e,t,i){const r=[];for(let n=0;n<e.length;n++){const o=[];for(let r=0;r<e[n].length;r++){const a=pr(e[n][r],i);or(t,a),o.push(a)}r.push(o)}return r}function vr(e,t,i){const r=[];for(let n=0;n<e.length;n++){const o=_r(e[n],t,i);r.push(o)}return r}function xr(e,t,i,r){if(e[0]<i[0]||e[0]>i[2]){const t=.5*r;let n=e[0]-i[0]>t?-r:i[0]-e[0]>t?r:0;0===n&&(n=e[0]-i[2]>t?-r:i[2]-e[0]>t?r:0),e[0]+=n}or(t,e)}function Cr(e,t,i,r){const n=Math.pow(2,r.z)*dr,o=[r.x*dr,r.y*dr],a=[];if(!e)return a;for(const s of e)for(const e of s){const r=[e.x+o[0],e.y+o[1]];xr(r,t,i,n),a.push(r)}return a}function wr(e,t,i,r){const n=Math.pow(2,r.z)*dr,o=[r.x*dr,r.y*dr],a=[];if(!e)return a;for(const l of e){const e=[];for(const i of l){const r=[i.x+o[0],i.y+o[1]];or(t,r),e.push(r)}a.push(e)}if(t[2]-t[0]<=n/2){(s=t)[0]=s[1]=1/0,s[2]=s[3]=-1/0;for(const e of a)for(const r of e)xr(r,t,i,n)}var s;return a}class br{constructor(e,t){this.type=_i,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'within' expression requires exactly one argument, but found ".concat(e.length-1," instead."));if(Bi(e[1])){const t=e[1];if("FeatureCollection"===t.type)for(let e=0;e<t.features.length;++e){const i=t.features[e].geometry.type;if("Polygon"===i||"MultiPolygon"===i)return new br(t,t.features[e].geometry)}else if("Feature"===t.type){const e=t.geometry.type;if("Polygon"===e||"MultiPolygon"===e)return new br(t,t.geometry)}else if("Polygon"===t.type||"MultiPolygon"===t.type)return new br(t,t)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(null!=e.geometry()&&null!=e.canonicalID()){if("Point"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if(!n)return!1;if("Polygon"===t.type){const o=_r(t.coordinates,r,n),a=Cr(e.geometry(),i,r,n);if(!ar(i,r))return!1;for(const e of a)if(!lr(e,o))return!1}if("MultiPolygon"===t.type){const o=vr(t.coordinates,r,n),a=Cr(e.geometry(),i,r,n);if(!ar(i,r))return!1;for(const e of a)if(!fr(e,o))return!1}return!0}(e,this.geometries);if("LineString"===e.geometryType())return function(e,t){const i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],n=e.canonicalID();if(!n)return!1;if("Polygon"===t.type){const o=_r(t.coordinates,r,n),a=wr(e.geometry(),i,r,n);if(!ar(i,r))return!1;for(const e of a)if(!gr(e,o))return!1}if("MultiPolygon"===t.type){const o=vr(t.coordinates,r,n),a=wr(e.geometry(),i,r,n);if(!ar(i,r))return!1;for(const e of a)if(!yr(e,o))return!1}return!0}(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Sr={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Lr=1/298.257223563,Tr=Lr*(2-Lr),Mr=Math.PI/180;class Er{static fromTile(e,t,i){const r=Math.PI*(1-2*(e+.5)/Math.pow(2,t)),n=Math.atan(.5*(Math.exp(r)-Math.exp(-r)))/Mr;return new Er(n,i)}static get units(){return Sr}constructor(e,t){if(void 0===e)throw new Error("No latitude given.");if(t&&!Sr[t])throw new Error("Unknown unit ".concat(t,". Use one of: ").concat(Object.keys(Sr).join(", ")));const i=6378.137*Mr*(t?Sr[t]:1),r=Math.cos(e*Mr),n=1/(1-Tr*(1-r*r)),o=Math.sqrt(n);this.kx=i*o*r,this.ky=i*o*n*(1-Tr)}distance(e,t){const i=kr(e[0]-t[0])*this.kx,r=(e[1]-t[1])*this.ky;return Math.sqrt(i*i+r*r)}bearing(e,t){const i=kr(t[0]-e[0])*this.kx;return Math.atan2(i,(t[1]-e[1])*this.ky)/Mr}destination(e,t,i){const r=i*Mr;return this.offset(e,Math.sin(r)*t,Math.cos(r)*t)}offset(e,t,i){return[e[0]+t/this.kx,e[1]+i/this.ky]}lineDistance(e){let t=0;for(let i=0;i<e.length-1;i++)t+=this.distance(e[i],e[i+1]);return t}area(e){let t=0;for(let i=0;i<e.length;i++){const r=e[i];for(let e=0,n=r.length,o=n-1;e<n;o=e++)t+=kr(r[e][0]-r[o][0])*(r[e][1]+r[o][1])*(i?-1:1)}return Math.abs(t)/2*this.kx*this.ky}along(e,t){let i=0;if(t<=0)return e[0];for(let r=0;r<e.length-1;r++){const n=e[r],o=e[r+1],a=this.distance(n,o);if(i+=a,i>t)return Ar(n,o,(t-(i-a))/a)}return e[e.length-1]}pointToSegmentDistance(e,t,i){let[r,n]=t,o=kr(i[0]-r)*this.kx,a=(i[1]-n)*this.ky;if(0!==o||0!==a){const t=(kr(e[0]-r)*this.kx*o+(e[1]-n)*this.ky*a)/(o*o+a*a);t>1?(r=i[0],n=i[1]):t>0&&(r+=o/this.kx*t,n+=a/this.ky*t)}return o=kr(e[0]-r)*this.kx,a=(e[1]-n)*this.ky,Math.sqrt(o*o+a*a)}pointOnLine(e,t){let i=1/0,r=e[0][0],n=e[0][1],o=0,a=0;for(let s=0;s<e.length-1;s++){let l=e[s][0],c=e[s][1],u=kr(e[s+1][0]-l)*this.kx,h=(e[s+1][1]-c)*this.ky,d=0;0===u&&0===h||(d=(kr(t[0]-l)*this.kx*u+(t[1]-c)*this.ky*h)/(u*u+h*h),d>1?(l=e[s+1][0],c=e[s+1][1]):d>0&&(l+=u/this.kx*d,c+=h/this.ky*d)),u=kr(t[0]-l)*this.kx,h=(t[1]-c)*this.ky;const p=u*u+h*h;p<i&&(i=p,r=l,n=c,o=s,a=d)}return{point:[r,n],index:o,t:Math.max(0,Math.min(1,a))}}lineSlice(e,t,i){let r=this.pointOnLine(i,e),n=this.pointOnLine(i,t);if(r.index>n.index||r.index===n.index&&r.t>n.t){const e=r;r=n,n=e}const o=[r.point],a=r.index+1,s=n.index;!Ir(i[a],o[0])&&a<=s&&o.push(i[a]);for(let l=a+1;l<=s;l++)o.push(i[l]);return Ir(i[s],n.point)||o.push(n.point),o}lineSliceAlong(e,t,i){let r=0;const n=[];for(let o=0;o<i.length-1;o++){const a=i[o],s=i[o+1],l=this.distance(a,s);if(r+=l,r>e&&0===n.length&&n.push(Ar(a,s,(e-(r-l))/l)),r>=t)return n.push(Ar(a,s,(t-(r-l))/l)),n;r>e&&n.push(s)}return n}bufferPoint(e,t){const i=t/this.ky,r=t/this.kx;return[e[0]-r,e[1]-i,e[0]+r,e[1]+i]}bufferBBox(e,t){const i=t/this.ky,r=t/this.kx;return[e[0]-r,e[1]-i,e[2]+r,e[3]+i]}insideBBox(e,t){return kr(e[0]-t[0])>=0&&kr(e[0]-t[2])<=0&&e[1]>=t[1]&&e[1]<=t[3]}}function Ir(e,t){return e[0]===t[0]&&e[1]===t[1]}function Ar(e,t,i){const r=kr(t[0]-e[0]);return[e[0]+r*i,e[1]+(t[1]-e[1])*i]}function kr(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}class Pr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(e,t)=>e<t?-1:e>t?1:0;if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let i=(this.length>>1)-1;i>=0;i--)this._down(i)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(0===this.length)return;const e=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:t,compare:i}=this,r=t[e];for(;e>0;){const n=e-1>>1,o=t[n];if(i(r,o)>=0)break;t[e]=o,e=n}t[e]=r}_down(e){const{data:t,compare:i}=this,r=this.length>>1,n=t[e];for(;e<r;){let r=1+(e<<1);const o=r+1;if(o<this.length&&i(t[o],t[r])<0&&(r=o),i(t[r],n)>=0)break;t[e]=t[r],e=r}t[e]=n}}var Or=8192;function Rr(e,t){return t.dist-e.dist}const zr=100,Dr=50;function Fr(e){const t=[1/0,1/0,-1/0,-1/0];if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}function Br(e){return e[1]-e[0]+1}function Vr(e,t){const i=e[1]>=e[0]&&e[1]<t;return i||console.warn("Distance Expression: Index is out of range"),i}function Nr(e,t){if(e[0]>e[1])return[null,null];const i=Br(e);if(t){if(2===i)return[e,null];const t=Math.floor(i/2);return[[e[0],e[0]+t],[e[0]+t,e[1]]]}{if(1===i)return[e,null];const t=Math.floor(i/2)-1;return[[e[0],e[0]+t],[e[0]+t+1,e[1]]]}}function Ur(e,t){const i=[1/0,1/0,-1/0,-1/0];if(!Vr(t,e.length))return i;for(let r=t[0];r<=t[1];++r)or(i,e[r]);return i}function jr(e){const t=[1/0,1/0,-1/0,-1/0];for(let i=0;i<e.length;++i)for(let r=0;r<e[i].length;++r)or(t,e[i][r]);return t}function Hr(e,t,i){if(Fr(e)||Fr(t))return NaN;let r=0,n=0;return e[2]<t[0]&&(r=t[0]-e[2]),e[0]>t[2]&&(r=e[0]-t[2]),e[1]>t[3]&&(n=e[1]-t[3]),e[3]<t[1]&&(n=t[1]-e[3]),i.distance([0,0],[r,n])}function Zr(e){return 360*e-180}function Wr(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function Gr(e,t){const i=Math.pow(2,t.z),r=(e.y/Or+t.y)/i;return[Zr((e.x/Or+t.x)/i),Wr(r)]}function qr(e,t){const i=[];for(let r=0;r<e.length;++r)i.push(Gr(e[r],t));return i}function Xr(e,t,i){const r=i.pointOnLine(t,e).point;return i.distance(e,r)}function Yr(e,t,i,r,n){const o=i.slice(r[0],r[1]+1);let a=1/0;for(let s=t[0];s<=t[1];++s)if(0===(a=Math.min(a,Xr(e[s],o,n))))return 0;return a}function Kr(e,t,i,r,n){const o=Math.min(n.pointToSegmentDistance(e,i,r),n.pointToSegmentDistance(t,i,r)),a=Math.min(n.pointToSegmentDistance(i,e,t),n.pointToSegmentDistance(r,e,t));return Math.min(o,a)}function Jr(e,t,i,r,n){if(!Vr(t,e.length)||!Vr(r,i.length))return NaN;let o=1/0;for(let a=t[0];a<t[1];++a)for(let t=r[0];t<r[1];++t){if(ur(e[a],e[a+1],i[t],i[t+1]))return 0;o=Math.min(o,Kr(e[a],e[a+1],i[t],i[t+1],n))}return o}function Qr(e,t,i,r,n){if(!Vr(t,e.length)||!Vr(r,i.length))return NaN;let o=1/0;for(let a=t[0];a<=t[1];++a)for(let t=r[0];t<=r[1];++t)if(0===(o=Math.min(o,n.distance(e[a],i[t]))))return o;return o}function $r(e,t,i){if(lr(e,t,!0))return 0;let r=1/0;for(const n of t){const t=n.length;if(t<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(n[0]!==n[t-1]&&0===(r=Math.min(r,i.pointToSegmentDistance(e,n[t-1],n[0]))))return r;if(0===(r=Math.min(r,Xr(e,n,i))))return r}return r}function en(e,t,i,r){if(!Vr(t,e.length))return NaN;for(let o=t[0];o<=t[1];++o)if(lr(e[o],i,!0))return 0;let n=1/0;for(let o=t[0];o<t[1];++o)for(const t of i)for(let i=0,a=t.length,s=a-1;i<a;s=i++){if(ur(e[o],e[o+1],t[s],t[i]))return 0;n=Math.min(n,Kr(e[o],e[o+1],t[s],t[i],r))}return n}function tn(e,t){for(const i of e)for(let e=0;e<=i.length-1;++e)if(lr(i[e],t,!0))return!0;return!1}function rn(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const n=jr(e),o=jr(t);if(r!==1/0&&Hr(n,o,i)>=r)return r;if(ar(n,o)){if(tn(e,t))return 0}else if(tn(t,e))return 0;let a=r;for(const s of e)for(let e=0,r=s.length,n=r-1;e<r;n=e++)for(const o of t)for(let t=0,r=o.length,l=r-1;t<r;l=t++){if(ur(s[n],s[e],o[l],o[t]))return 0;a=Math.min(a,Kr(s[n],s[e],o[l],o[t],i))}return a}function nn(e,t,i,r,n,o,a){if(null===o||null===a)return;const s=Hr(Ur(r,o),Ur(n,a),i);s<t&&e.push({dist:s,range1:o,range2:a})}function on(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=Math.min(r.distance(e[0],i[0][0]),n);if(0===o)return o;const a=new Pr([{dist:0,range1:[0,e.length-1],range2:[0,0]}],Rr),s=t?Dr:zr,l=jr(i);for(;a.length;){const n=a.pop();if(n.dist>=o)continue;const c=n.range1;if(Br(c)<=s){if(!Vr(c,e.length))return NaN;if(t){const t=en(e,c,i,r);if(0===(o=Math.min(o,t)))return o}else for(let t=c[0];t<=c[1];++t){const n=$r(e[t],i,r);if(0===(o=Math.min(o,n)))return o}}else{const i=Nr(c,t);if(null!==i[0]){const t=Hr(Ur(e,i[0]),l,r);t<o&&a.push({dist:t,range1:i[0],range2:[0,0]})}if(null!==i[1]){const t=Hr(Ur(e,i[1]),l,r);t<o&&a.push({dist:t,range1:i[1],range2:[0,0]})}}}return o}function an(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=Math.min(o,n.distance(e[0],i[0]));if(0===a)return a;const s=new Pr([{dist:0,range1:[0,e.length-1],range2:[0,i.length-1]}],Rr),l=t?Dr:zr,c=r?Dr:zr;for(;s.length;){const o=s.pop();if(o.dist>=a)continue;const u=o.range1,h=o.range2;if(Br(u)<=l&&Br(h)<=c){if(!Vr(u,e.length)||!Vr(h,i.length))return NaN;if(t&&r?a=Math.min(a,Jr(e,u,i,h,n)):t||r?t&&!r?a=Math.min(a,Yr(i,h,e,u,n)):!t&&r&&(a=Math.min(a,Yr(e,u,i,h,n))):a=Math.min(a,Qr(e,u,i,h,n)),0===a)return a}else{const o=Nr(u,t),l=Nr(h,r);nn(s,a,n,e,i,o[0],l[0]),nn(s,a,n,e,i,o[0],l[1]),nn(s,a,n,e,i,o[1],l[0]),nn(s,a,n,e,i,o[1],l[1])}}return a}function sn(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=Ur(e,[0,e.length-1]);for(const a of i)if(!(n!==1/0&&Hr(o,Ur(a,[0,a.length-1]),r)>=n)&&(n=Math.min(n,an(e,t,a,!0,r,n)),0===n))return n;return n}function ln(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=Ur(e,[0,e.length-1]);for(const a of i){if(n!==1/0&&Hr(o,jr(a),r)>=n)continue;const i=on(e,t,a,r,n);if(isNaN(i))return i;if(0===(n=Math.min(n,i)))return n}return n}function cn(e){return"Point"===e||"MultiPoint"===e||"LineString"===e||"MultiLineString"===e||"Polygon"===e||"MultiPolygon"===e}class un{constructor(e,t){this.type=gi,this.geojson=e,this.geometries=t}static parse(e,t){if(2!==e.length)return t.error("'distance' expression requires either one argument, but found ' ".concat(e.length-1," instead."));if(Bi(e[1])){const t=e[1];if("FeatureCollection"===t.type){for(let e=0;e<t.features.length;++e)if(cn(t.features[e].geometry.type))return new un(t,t.features[e].geometry)}else if("Feature"===t.type){if(cn(t.geometry.type))return new un(t,t.geometry)}else if(cn(t.type))return new un(t,t)}return t.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(e){const t=e.geometry(),i=e.canonicalID();if(null!=t&&null!=i){if("Point"===e.geometryType())return function(e,t,i){const r=[];for(const o of e)for(const e of o)r.push(Gr(e,t));const n=new Er(r[0][1],"meters");return"Point"===i.type||"MultiPoint"===i.type||"LineString"===i.type?an(r,!1,"Point"===i.type?[i.coordinates]:i.coordinates,"LineString"===i.type,n):"MultiLineString"===i.type?sn(r,!1,i.coordinates,n):"Polygon"===i.type||"MultiPolygon"===i.type?ln(r,!1,"Polygon"===i.type?[i.coordinates]:i.coordinates,n):null}(t,i,this.geometries);if("LineString"===e.geometryType())return function(e,t,i){const r=[];for(const o of e){const e=[];for(const i of o)e.push(Gr(i,t));r.push(e)}const n=new Er(r[0][0][1],"meters");if("Point"===i.type||"MultiPoint"===i.type||"LineString"===i.type)return sn("Point"===i.type?[i.coordinates]:i.coordinates,"LineString"===i.type,r,n);if("MultiLineString"===i.type){let e=1/0;for(let t=0;t<i.coordinates.length;t++){const o=sn(i.coordinates[t],!0,r,n,e);if(isNaN(o))return o;if(0===(e=Math.min(e,o)))return e}return e}if("Polygon"===i.type||"MultiPolygon"===i.type){let e=1/0;for(let t=0;t<r.length;t++){const o=ln(r[t],!0,"Polygon"===i.type?[i.coordinates]:i.coordinates,n,e);if(isNaN(o))return o;if(0===(e=Math.min(e,o)))return e}return e}return null}(t,i,this.geometries);if("Polygon"===e.geometryType())return function(e,t,i){const r=[];for(const o of function(e){const t=e.length;if(t<=1)return[e];const i=[];let r,n;for(let o=0;o<t;o++){const t=nr(e[o]);0!==t&&(e[o].area=Math.abs(t),void 0===n&&(n=t<0),n===t<0?(r&&i.push(r),r=[e[o]]):r.push(e[o]))}return r&&i.push(r),i}(e)){const e=[];for(let i=0;i<o.length;++i)e.push(qr(o[i],t));r.push(e)}const n=new Er(r[0][0][0][1],"meters");if("Point"===i.type||"MultiPoint"===i.type||"LineString"===i.type)return ln("Point"===i.type?[i.coordinates]:i.coordinates,"LineString"===i.type,r,n);if("MultiLineString"===i.type){let e=1/0;for(let t=0;t<i.coordinates.length;t++){const o=ln(i.coordinates[t],!0,r,n,e);if(isNaN(o))return o;if(0===(e=Math.min(e,o)))return e}return e}return"Polygon"===i.type||"MultiPolygon"===i.type?function(e,t,i){let r=1/0;for(const n of e)for(const e of t){const t=rn(n,e,i,r);if(isNaN(t))return t;if(0===(r=Math.min(r,t)))return r}return r}("Polygon"===i.type?[i.coordinates]:i.coordinates,r,n):null}(t,i,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function hn(e){if(e instanceof Qi){if("get"===e.name&&1===e.args.length)return!1;if("feature-state"===e.name)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}if(e instanceof br)return!1;if(e instanceof un)return!1;if(e instanceof _n)return e.featureConstant;let t=!0;return e.eachChild(e=>{t&&!hn(e)&&(t=!1)}),t}function dn(e){if(e instanceof Qi&&"feature-state"===e.name)return!1;let t=!0;return e.eachChild(e=>{t&&!dn(e)&&(t=!1)}),t}function pn(e){if(e instanceof _n)return new Set([e.key]);let t=new Set;return e.eachChild(e=>{t=new Set([...t,...pn(e)])}),t}function fn(e,t){if(e instanceof Qi&&t.indexOf(e.name)>=0)return!1;let i=!0;return e.eachChild(e=>{i&&!fn(e,t)&&(i=!1)}),i}function mn(e,t,i){return[e,t,i].filter(Boolean).join("\x1f")}function gn(e,t){switch(e){case"string":return Ni(t);case"number":return+t;case"boolean":return!!t;case"color":return oi.parse(t);case"formatted":return Ri.fromString(Ni(t));case"resolvedImage":return Di.build(Ni(t))}return t}function yn(e,t,i,r){return void 0!==r&&(e=r*Math.round(e/r)),void 0!==t&&e<t&&(e=t),void 0!==i&&e>i&&(e=i),e}class _n{constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.type=e,this.key=t,this.scope=i,this.featureConstant=r}static parse(e,t){let i=t.expectedType;if(null==i&&(i=Ci),e.length<2||e.length>3)return t.error("Invalid number of arguments for 'config' expression.");const r=t.parse(e[1],1);if(!(r instanceof Ui))return t.error("Key name of 'config' expression must be a string literal.");let n,o=!0;const a=Ni(r.value);if(e.length>=3){const i=t.parse(e[2],2);if(!(i instanceof Ui))return t.error("Scope of 'config' expression must be a string literal.");n=Ni(i.value)}if(t.options){const e=mn(a,n,t._scope),i=t.options.get(e);i&&(o=hn(i.value||i.default))}return new _n(i,a,n,o)}evaluate(e){const t=mn(this.key,this.scope,e.scope),i=e.getConfig(t);if(!i)return null;const{type:r,value:n,values:o,minValue:a,maxValue:s,stepValue:l}=i,c=i.default.evaluate(e);let u=c;if(n){const t=e.scope;e.scope=(t||"").split("\x1f").slice(1).join("\x1f"),u=n.evaluate(e),e.scope=t}return r&&(u=gn(r,u)),void 0===u||void 0===a&&void 0===s&&void 0===l||("number"==typeof u?u=yn(u,a,s,l):Array.isArray(u)&&(u=u.map(e=>"number"==typeof e?yn(e,a,s,l):e))),void 0!==n&&void 0!==u&&o&&!o.includes(u)&&(u=c,r&&(u=gn(r,u))),(r&&r!==this.type||void 0!==u&&!ki(Vi(u),this.type))&&(u=gn(this.type.kind,u)),u}eachChild(){}outputDefined(){return!1}serialize(){const e=["config",this.key];return this.scope&&e.concat(this.scope),e}}class vn{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");const i=e[1];return t.scope.has(i)?new vn(i,t.scope.get(i)):t.error('Unknown variable "'.concat(i,'". Make sure "').concat(i,'" has been bound in an enclosing "let" expression before using it.'),1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class xn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new fi,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;this.registry=e,this.path=t,this.key=t.map(e=>"string"==typeof e?"['".concat(e,"']"):"[".concat(e,"]")).join(""),this.scope=r,this.errors=n,this.expectedType=i,this._scope=o,this.options=a}parse(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return t||i?this.concat(t,null,i,r)._parse(e,n):this._parse(e,n)}parseObjectValue(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return this.concat(t,i,r,n)._parse(e,o)}_parse(e,t){function i(e,t,i){return"assert"===i?new Zi(t,[e]):"coerce"===i?new Yi(t,[e]):e}if(null!==e&&"string"!=typeof e&&"boolean"!=typeof e&&"number"!=typeof e||(e=["literal",e]),Array.isArray(e)){if(0===e.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r="string"==typeof e[0]?this.registry[e[0]]:void 0;if(r){let n=r.parse(e,this);if(!n)return null;if(this.expectedType){const e=this.expectedType,r=n.type;if("string"!==e.kind&&"number"!==e.kind&&"boolean"!==e.kind&&"object"!==e.kind&&"array"!==e.kind||"value"!==r.kind)if("color"!==e.kind&&"formatted"!==e.kind&&"resolvedImage"!==e.kind||"value"!==r.kind&&"string"!==r.kind){if(this.checkSubtype(e,r))return null}else n=i(n,e,t.typeAnnotation||"coerce");else n=i(n,e,t.typeAnnotation||"assert")}if(!(n instanceof Ui)&&"resolvedImage"!==n.type.kind&&Cn(n)){const t=new Ji(this._scope,this.options);try{n=new Ui(n.type,n.evaluate(t))}catch(e){return this.error(e.message),null}}return n}return Yi.parse(["to-array",e],this)}return this.error(void 0===e?"'undefined' value invalid. Use null instead.":"object"==typeof e?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found ".concat(typeof e," instead."))}concat(e,t,i,r){let n="number"==typeof e?this.path.concat(e):this.path;n="string"==typeof t?n.concat(t):n;const o=r?this.scope.concat(r):this.scope;return new xn(this.registry,n,i||null,o,this.errors,this._scope,this.options)}error(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];const n="".concat(this.key).concat(i.map(e=>"[".concat(e,"]")).join(""));this.errors.push(new pi(n,e))}checkSubtype(e,t){const i=Ei(e,t);return i&&this.error(i),i}}function Cn(e){if(e instanceof vn)return Cn(e.boundExpression);if(e instanceof Qi&&"error"===e.name)return!1;if(e instanceof er)return!1;if(e instanceof br)return!1;if(e instanceof un)return!1;if(e instanceof _n)return!1;const t=e instanceof Yi||e instanceof Zi;let i=!0;return e.eachChild(e=>{i=t?i&&Cn(e):i&&e instanceof Ui}),!!i&&hn(e)&&fn(e,["zoom","heatmap-density","worldview","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function wn(e,t){const i=e.length-1;let r,n,o=0,a=i,s=0;for(;o<=a;)if(s=Math.floor((o+a)/2),r=e[s],n=e[s+1],r<=t){if(s===i||t<n)return s;o=s+1}else{if(!(r>t))throw new ji("Input is not a number.");a=s-1}return 0}class bn{constructor(e,t,i){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,n]of i)this.labels.push(r),this.outputs.push(n)}static parse(e,t){if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");const i=t.parse(e[1],1,gi);if(!i)return null;const r=[];let n=null;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(let o=1;o<e.length;o+=2){const i=1===o?-1/0:e[o],a=e[o+1],s=o,l=o+1;if("number"!=typeof i)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',s);if(r.length&&r[r.length-1][0]>=i)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',s);const c=t.parse(a,l,n);if(!c)return null;n=n||c.type,r.push([i,c])}return new bn(n,i,r)}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const n=t.length;return r>=t[n-1]?i[n-1].evaluate(e):i[wn(t,r)].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}const Sn=.95047,Ln=1.08883,Tn=4/29,Mn=6/29,En=3*Mn*Mn,In=Mn*Mn*Mn,An=Math.PI/180,kn=180/Math.PI;function Pn(e){return e>In?Math.pow(e,1/3):e/En+Tn}function On(e){return e>Mn?e*e*e:En*(e-Tn)}function Rn(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function zn(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Dn(e){const t=zn(e.r),i=zn(e.g),r=zn(e.b),n=Pn((.4124564*t+.3575761*i+.1804375*r)/Sn),o=Pn((.2126729*t+.7151522*i+.072175*r)/1);return{l:116*o-16,a:500*(n-o),b:200*(o-Pn((.0193339*t+.119192*i+.9503041*r)/Ln)),alpha:e.a}}function Fn(e){let t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=1*On(t),i=Sn*On(i),r=Ln*On(r),new oi(Rn(3.2404542*i-1.5371385*t-.4985314*r),Rn(-.969266*i+1.8760108*t+.041556*r),Rn(.0556434*i-.2040259*t+1.0572252*r),e.alpha)}function Bn(e,t,i){const r=t-e;return e+i*(r>180||r<-180?r-360*Math.round(r/360):r)}const Vn={forward:Dn,reverse:Fn,interpolate:function(e,t,i){return{l:ci(e.l,t.l,i),a:ci(e.a,t.a,i),b:ci(e.b,t.b,i),alpha:ci(e.alpha,t.alpha,i)}}},Nn={forward:function(e){const{l:t,a:i,b:r}=Dn(e),n=Math.atan2(r,i)*kn;return{h:n<0?n+360:n,c:Math.sqrt(i*i+r*r),l:t,alpha:e.a}},reverse:function(e){const t=e.h*An,i=e.c;return Fn({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})},interpolate:function(e,t,i){return{h:Bn(e.h,t.h,i),c:ci(e.c,t.c,i),l:ci(e.l,t.l,i),alpha:ci(e.alpha,t.alpha,i)}}};var Un=Object.freeze({__proto__:null,hcl:Nn,lab:Vn});class jn{constructor(e,t,i,r,n){this.type=e,this.operator=t,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of n)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,i,r){let n=0;if("exponential"===e.name)n=Hn(t,e.base,i,r);else if("linear"===e.name)n=Hn(t,1,i,r);else if("cubic-bezier"===e.name){const o=e.controlPoints;n=new _e(o[0],o[1],o[2],o[3]).solve(Hn(t,1,i,r))}return n}static parse(e,t){let[i,r,n,...o]=e;if(!Array.isArray(r)||0===r.length)return t.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){const e=r[1];if("number"!=typeof e)return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:e}}else{if("cubic-bezier"!==r[0])return t.error("Unknown interpolation type ".concat(String(r[0])),1,0);{const e=r.slice(1);if(4!==e.length||e.some(e=>"number"!=typeof e||e<0||e>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:e}}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length-1>3&&(e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(n=t.parse(n,2,gi),!n)return null;const a=[];let s=null;"interpolate-hcl"===i||"interpolate-lab"===i?s=vi:t.expectedType&&"value"!==t.expectedType.kind&&(s=t.expectedType);for(let l=0;l<o.length;l+=2){const e=o[l],i=o[l+1],r=l+3,n=l+4;if("number"!=typeof e)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(a.length&&a[a.length-1][0]>=e)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const c=t.parse(i,n,s);if(!c)return null;s=s||c.type,a.push([e,c])}return"number"===s.kind||"color"===s.kind||"array"===s.kind&&"number"===s.itemType.kind&&"number"==typeof s.N?new jn(s,i,r,n,a):t.error("Type ".concat(Ti(s)," is not interpolatable."))}evaluate(e){const t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return i[0].evaluate(e);const n=t.length;if(r>=t[n-1])return i[n-1].evaluate(e);const o=wn(t,r),a=jn.interpolationFactor(this.interpolation,r,t[o],t[o+1]),s=i[o].evaluate(e),l=i[o+1].evaluate(e);return"interpolate"===this.operator?hi[this.type.kind.toLowerCase()](s,l,a):"interpolate-hcl"===this.operator?Nn.reverse(Nn.interpolate(Nn.forward(s),Nn.forward(l),a)):Vn.reverse(Vn.interpolate(Vn.forward(s),Vn.forward(l),a))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;e="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier",...this.interpolation.controlPoints];const t=[this.operator,e,this.input.serialize()];for(let i=0;i<this.labels.length;i++)t.push(this.labels[i],this.outputs[i].serialize());return t}}function Hn(e,t,i,r){const n=r-i,o=e-i;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}class Zn{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let i=null;const r=t.expectedType;r&&"value"!==r.kind&&(i=r);const n=[];for(const a of e.slice(1)){const e=t.parse(a,1+n.length,i,void 0,{typeAnnotation:"omit"});if(!e)return null;i=i||e.type,n.push(e)}const o=r&&n.some(e=>Ei(r,e.type));return new Zn(o?Ci:i,n)}evaluate(e){let t,i=null,r=0;for(const n of this.args){if(r++,i=n.evaluate(e),i&&i instanceof Di&&!i.available&&(t||(t=i),i=null,r===this.args.length))return t;if(null!==i)break}return i}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class Wn{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found ".concat(e.length-1," instead."));const i=[];for(let n=1;n<e.length-1;n+=2){const r=e[n];if("string"!=typeof r)return t.error("Expected string, but found ".concat(typeof r," instead."),n);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",n);const o=t.parse(e[n+1],n+1);if(!o)return null;i.push([r,o])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,i);return r?new Wn(i,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,i]of this.bindings)e.push(t,i.serialize());return e.push(this.result.serialize()),e}}class Gn{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1,gi),r=t.parse(e[2],2,Li(t.expectedType||Ci));return i&&r?new Gn(r.type.itemType,i,r):null}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ji("Array index out of bounds: ".concat(t," < 0."));if(t>=i.length)throw new ji("Array index out of bounds: ".concat(t," > ").concat(i.length-1,"."));if(t!==Math.floor(t))throw new ji("Array index must be an integer, but found ".concat(t," instead. Use at-interpolated to retrieve interpolated result with a fractional index."));return i[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class qn{constructor(e,t,i){this.type=e,this.index=t,this.input=i}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1,gi),r=t.parse(e[2],2,Li(t.expectedType||Ci));return i&&r?new qn(r.type.itemType,i,r):null}evaluate(e){const t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0)throw new ji("Array index out of bounds: ".concat(t," < 0."));if(t>i.length-1)throw new ji("Array index out of bounds: ".concat(t," > ").concat(i.length-1,"."));if(t===Math.floor(t))return i[t];const r=Math.floor(t),n=Math.ceil(t),o=i[r],a=i[n];if("number"!=typeof o||"number"!=typeof a)throw new ji("Cannot interpolate between non-number values at index ".concat(t,"."));const s=t-r;return o*(1-s)+a*s}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at-interpolated",this.index.serialize(),this.input.serialize()]}}class Xn{constructor(e,t){this.type=_i,this.needle=e,this.haystack=t}static parse(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1,Ci),r=t.parse(e[2],2,Ci);return i&&r?Ii(i.type,[_i,yi,gi,mi,Ci])?new Xn(i,r):t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ti(i.type)," instead")):null}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(null==i)return!1;if(!Ai(t,["boolean","string","number","null"]))throw new ji("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ti(Vi(t))," instead."));if(!Ai(i,["string","array"]))throw new ji("Expected second argument to be of type array or string, but found ".concat(Ti(Vi(i))," instead."));return i.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class Yn{constructor(e,t,i){this.type=gi,this.needle=e,this.haystack=t,this.fromIndex=i}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1,Ci),r=t.parse(e[2],2,Ci);if(!i||!r)return null;if(!Ii(i.type,[_i,yi,gi,mi,Ci]))return t.error("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ti(i.type)," instead"));if(4===e.length){const n=t.parse(e[3],3,gi);return n?new Yn(i,r,n):null}return new Yn(i,r)}evaluate(e){const t=this.needle.evaluate(e),i=this.haystack.evaluate(e);if(!Ai(t,["boolean","string","number","null"]))throw new ji("Expected first argument to be of type boolean, string, number or null, but found ".concat(Ti(Vi(t))," instead."));if(!Ai(i,["string","array"]))throw new ji("Expected second argument to be of type array or string, but found ".concat(Ti(Vi(i))," instead."));if(this.fromIndex){const r=this.fromIndex.evaluate(e);return i.indexOf(t,r)}return i.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(null!=this.fromIndex&&void 0!==this.fromIndex){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class Kn{constructor(e,t,i,r,n,o){this.inputType=e,this.type=t,this.input=i,this.cases=r,this.outputs=n,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=1)return t.error("Expected an even number of arguments.");let i,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);const n={},o=[];for(let l=2;l<e.length-1;l+=2){let a=e[l];const s=e[l+1];Array.isArray(a)||(a=[a]);const c=t.concat(l);if(0===a.length)return c.error("Expected at least one branch label.");for(const e of a){if("number"!=typeof e&&"string"!=typeof e)return c.error("Branch labels must be numbers or strings.");if("number"==typeof e&&Math.abs(e)>Number.MAX_SAFE_INTEGER)return c.error("Branch labels must be integers no larger than ".concat(Number.MAX_SAFE_INTEGER,"."));if("number"==typeof e&&Math.floor(e)!==e)return c.error("Numeric branch labels must be integer values.");if(i){if(c.checkSubtype(i,Vi(e)))return null}else i=Vi(e);if(void 0!==n[String(e)])return c.error("Branch labels must be unique.");n[String(e)]=o.length}const u=t.parse(s,l,r);if(!u)return null;r=r||u.type,o.push(u)}const a=t.parse(e[1],1,Ci);if(!a)return null;const s=t.parse(e[e.length-1],e.length-1,r);return s?"value"!==a.type.kind&&t.concat(1).checkSubtype(i,a.type)?null:new Kn(i,r,a,n,o,s):null}evaluate(e){const t=this.input.evaluate(e);return(ki(Vi(t),this.inputType)&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),i=[],r={};for(const o of t){const e=r[this.cases[o]];void 0===e?(r[this.cases[o]]=i.length,i.push([this.cases[o],[o]])):i[e][1].push(o)}const n=e=>"number"===this.inputType.kind?Number(e):e;for(const[o,a]of i)e.push(1===a.length?n(a[0]):a.map(n)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}class Jn{constructor(e,t,i){this.type=e,this.branches=t,this.otherwise=i}static parse(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only ".concat(e.length-1,"."));if(e.length%2!=0)return t.error("Expected an odd number of arguments.");let i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const n=t.parse(e[o],o,_i);if(!n)return null;const a=t.parse(e[o+1],o+1,i);if(!a)return null;r.push([n,a]),i=i||a.type}const n=t.parse(e[e.length-1],e.length-1,i);return n?new Jn(i,r,n):null}evaluate(e){for(const[t,i]of this.branches)if(t.evaluate(e))return i.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,i]of this.branches)e(t),e(i);e(this.otherwise)}outputDefined(){return this.branches.every(e=>{let[t,i]=e;return i.outputDefined()})&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}class Qn{constructor(e,t,i,r){this.type=e,this.input=t,this.beginIndex=i,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error("Expected 3 or 4 arguments, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1,Ci),r=t.parse(e[2],2,gi);if(!i||!r)return null;if(!Ii(i.type,[Li(Ci),yi,Ci]))return t.error("Expected first argument to be of type array or string, but found ".concat(Ti(i.type)," instead"));if(4===e.length){const n=t.parse(e[3],3,gi);return n?new Qn(i.type,i,r,n):null}return new Qn(i.type,i,r)}evaluate(e){const t=this.input.evaluate(e),i=this.beginIndex.evaluate(e);if(!Ai(t,["string","array"]))throw new ji("Expected first argument to be of type array or string, but found ".concat(Ti(Vi(t))," instead."));if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(i,r)}return t.slice(i)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(null!=this.endIndex&&void 0!==this.endIndex){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function $n(e,t){return"=="===e||"!="===e?"boolean"===t.kind||"string"===t.kind||"number"===t.kind||"null"===t.kind||"value"===t.kind:"string"===t.kind||"number"===t.kind||"value"===t.kind}function eo(e,t,i,r){return 0===r.compare(t,i)}function to(e,t,i){const r="=="!==e&&"!="!==e;return class n{constructor(e,t,i){this.type=_i,this.lhs=e,this.rhs=t,this.collator=i,this.hasUntypedArgument="value"===e.type.kind||"value"===t.type.kind}static parse(e,t){if(3!==e.length&&4!==e.length)return t.error("Expected two or three arguments.");const i=e[0];let o=t.parse(e[1],1,Ci);if(!o)return null;if(!$n(i,o.type))return t.concat(1).error('"'.concat(i,"\" comparisons are not supported for type '").concat(Ti(o.type),"'."));let a=t.parse(e[2],2,Ci);if(!a)return null;if(!$n(i,a.type))return t.concat(2).error('"'.concat(i,"\" comparisons are not supported for type '").concat(Ti(a.type),"'."));if(o.type.kind!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot compare types '".concat(Ti(o.type),"' and '").concat(Ti(a.type),"'."));r&&("value"===o.type.kind&&"value"!==a.type.kind?o=new Zi(a.type,[o]):"value"!==o.type.kind&&"value"===a.type.kind&&(a=new Zi(o.type,[a])));let s=null;if(4===e.length){if("string"!==o.type.kind&&"string"!==a.type.kind&&"value"!==o.type.kind&&"value"!==a.type.kind)return t.error("Cannot use collator to compare non-string types.");if(s=t.parse(e[3],3,wi),!s)return null}return new n(o,a,s)}evaluate(n){const o=this.lhs.evaluate(n),a=this.rhs.evaluate(n);if(r&&this.hasUntypedArgument){const t=Vi(o),i=Vi(a);if(t.kind!==i.kind||"string"!==t.kind&&"number"!==t.kind)throw new ji('Expected arguments for "'.concat(e,'" to be (string, string) or (number, number), but found (').concat(t.kind,", ").concat(i.kind,") instead."))}if(this.collator&&!r&&this.hasUntypedArgument){const e=Vi(o),i=Vi(a);if("string"!==e.kind||"string"!==i.kind)return t(n,o,a)}return this.collator?i(n,o,a,this.collator.evaluate(n)):t(n,o,a)}eachChild(e){e(this.lhs),e(this.rhs),this.collator&&e(this.collator)}outputDefined(){return!0}serialize(){const t=[e];return this.eachChild(e=>{t.push(e.serialize())}),t}}}const io=to("==",function(e,t,i){return t===i},eo),ro=to("!=",function(e,t,i){return t!==i},function(e,t,i,r){return!eo(0,t,i,r)}),no=to("<",function(e,t,i){return t<i},function(e,t,i,r){return r.compare(t,i)<0}),oo=to(">",function(e,t,i){return t>i},function(e,t,i,r){return r.compare(t,i)>0}),ao=to("<=",function(e,t,i){return t<=i},function(e,t,i,r){return r.compare(t,i)<=0}),so=to(">=",function(e,t,i){return t>=i},function(e,t,i,r){return r.compare(t,i)>=0});class lo{constructor(e,t,i,r,n,o){this.type=yi,this.number=e,this.locale=t,this.currency=i,this.unit=r,this.minFractionDigits=n,this.maxFractionDigits=o}static parse(e,t){if(3!==e.length)return t.error("Expected two arguments.");const i=t.parse(e[1],1,gi);if(!i)return null;const r=e[2];if("object"!=typeof r||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let n=null;if(r.locale&&(n=t.parseObjectValue(r.locale,2,"locale",yi),!n))return null;let o=null;if(r.currency&&(o=t.parseObjectValue(r.currency,2,"currency",yi),!o))return null;let a=null;if(r.unit&&(a=t.parseObjectValue(r.unit,2,"unit",yi),!a))return null;let s=null;if(r["min-fraction-digits"]&&(s=t.parseObjectValue(r["min-fraction-digits"],2,"min-fraction-digits",gi),!s))return null;let l=null;return r["max-fraction-digits"]&&(l=t.parseObjectValue(r["max-fraction-digits"],2,"max-fraction-digits",gi),!l)?null:new lo(i,n,o,a,s,l)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class co{constructor(e){this.type=gi,this.input=e}static parse(e,t){if(2!==e.length)return t.error("Expected 1 argument, but found ".concat(e.length-1," instead."));const i=t.parse(e[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?t.error("Expected argument of type string or array, but found ".concat(Ti(i.type)," instead.")):new co(i):null}evaluate(e){const t=this.input.evaluate(e);if("string"==typeof t)return t.length;if(Array.isArray(t))return t.length;throw new ji("Expected value to be of type string or array, but found ".concat(Ti(Vi(t))," instead."))}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}function uo(e){return function(){e=1831565813+(e|=0)|0;let t=Math.imul(e^e>>>15,1|e);return t=t+Math.imul(t^t>>>7,61|t)^t,((t^t>>>14)>>>0)/4294967296}}const ho={"==":io,"!=":ro,">":oo,"<":no,">=":so,"<=":ao,array:Zi,at:Gn,"at-interpolated":qn,boolean:Zi,case:Jn,coalesce:Zn,collator:er,format:Wi,image:Gi,in:Xn,"index-of":Yn,interpolate:jn,"interpolate-hcl":jn,"interpolate-lab":jn,length:co,let:Wn,literal:Ui,match:Kn,number:Zi,"number-format":lo,object:Zi,slice:Qn,step:bn,string:Zi,"to-boolean":Yi,"to-color":Yi,"to-number":Yi,"to-string":Yi,var:vn,within:br,distance:un,config:_n};function po(e,t){let[i,r,n,o]=t;i=i.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const a=o?o.evaluate(e):1,s=Fi(i,r,n,a);if(s)throw new ji(s);return new oi(i/255,r/255,n/255,a)}function fo(e,t){let[i,r,n,o]=t;i=i.evaluate(e),r=r.evaluate(e),n=n.evaluate(e);const a=o?o.evaluate(e):1,s=function(e,t,i,r){return"number"==typeof e&&e>=0&&e<=360?"number"==typeof t&&t>=0&&t<=100&&"number"==typeof i&&i>=0&&i<=100?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid hsla value [".concat([e,t,i,r].join(", "),"]: 'a' must be between 0 and 1."):"Invalid hsla value [".concat(("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", "),"]: 's', and 'l' must be between 0 and 100."):"Invalid hsla value [".concat(("number"==typeof r?[e,t,i,r]:[e,t,i]).join(", "),"]: 'h' must be between 0 and 360.")}(i,r,n,a);if(s)throw new ji(s);const l="hsla(".concat(i,", ").concat(r,"%, ").concat(n,"%, ").concat(a,")"),c=oi.parse(l);if(!c)throw new ji("Failed to parse HSLA color: ".concat(l));return c}function mo(e,t){return e in t}function go(e,t){const i=t[e];return void 0===i?null:i}function yo(e){return{type:e}}function _o(e){return{result:"success",value:e}}function vo(e){return{result:"error",value:e}}function xo(e,t){return!!e&&!!e.parameters&&e.parameters.indexOf(t)>-1}function Co(e){return"data-driven"===e["property-type"]}function wo(e){return xo(e.expression,"measure-light")}function bo(e){return xo(e.expression,"zoom")}function So(e){return!!e.expression&&e.expression.interpolated}function Lo(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function To(e){return e}function Mo(e,t){const i="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],n=r||!(r||void 0!==e.property),o=e.type||(So(t)?"exponential":"interval");if(i&&((e=di({},e)).stops&&(e.stops=e.stops.map(e=>[e[0],oi.parse(e[1])])),e.default=oi.parse(e.default?e.default:t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!Un[e.colorSpace])throw new Error("Unknown color space: ".concat(e.colorSpace));let a,s,l;if("exponential"===o)a=ko;else if("interval"===o)a=Ao;else if("categorical"===o){a=Io,s=Object.create(null);for(const t of e.stops)s[t[0]]=t[1];l=typeof e.stops[0][0]}else{if("identity"!==o)throw new Error('Unknown function type "'.concat(o,'"'));a=Po}if(r){const i={},r=[];for(let t=0;t<e.stops.length;t++){const n=e.stops[t],o=n[0].zoom;void 0===i[o]&&(i[o]={zoom:o,type:e.type,property:e.property,default:e.default,stops:[]},r.push(o)),i[o].stops.push([n[0].value,n[1]])}const n=[];for(const e of r)n.push([i[e].zoom,Mo(i[e],t)]);const o={name:"linear"};return{kind:"composite",interpolationType:o,interpolationFactor:jn.interpolationFactor.bind(void 0,o),zoomStops:n.map(e=>e[0]),evaluate:(i,r)=>{let{zoom:o}=i;return ko({stops:n,base:e.base},t,o).evaluate(o,r)}}}if(n){const i="exponential"===o?{name:"exponential",base:void 0!==e.base?e.base:1}:null;return{kind:"camera",interpolationType:i,interpolationFactor:jn.interpolationFactor.bind(void 0,i),zoomStops:e.stops.map(e=>e[0]),evaluate:i=>{let{zoom:r}=i;return a(e,t,r,s,l)}}}return{kind:"source",evaluate(i,r){const n=r&&r.properties?r.properties[e.property]:void 0;return void 0===n?Eo(e.default,t.default):a(e,t,n,s,l)}}}function Eo(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function Io(e,t,i,r,n){return Eo(typeof i===n?r[i]:void 0,e.default,t.default)}function Ao(e,t,i){if("number"!==qi(i))return Eo(e.default,t.default);const r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];const n=wn(e.stops.map(e=>e[0]),i);return e.stops[n][1]}function ko(e,t,i){const r=void 0!==e.base?e.base:1;if("number"!==qi(i))return Eo(e.default,t.default);const n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];const o=wn(e.stops.map(e=>e[0]),i),a=function(e,t,i,r){const n=r-i,o=e-i;return 0===n?0:1===t?o/n:(Math.pow(t,o)-1)/(Math.pow(t,n)-1)}(i,r,e.stops[o][0],e.stops[o+1][0]),s=e.stops[o][1],l=e.stops[o+1][1];let c=hi[t.type]||To;if(e.colorSpace&&"rgb"!==e.colorSpace){const t=Un[e.colorSpace];c=(e,i)=>t.reverse(t.interpolate(t.forward(e),t.forward(i),a))}return"function"==typeof s.evaluate?{evaluate(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];const r=s.evaluate.apply(void 0,t),n=l.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==n)return c(r,n,a)}}:c(s,l,a)}function Po(e,t,i){return"color"===t.type?i=oi.parse(i):"formatted"===t.type?i=Ri.fromString(i.toString()):"resolvedImage"===t.type?i=Di.build(i.toString()):qi(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),Eo(i,e.default,t.default)}Qi.register(ho,{error:[{kind:"error"},[yi],(e,t)=>{let[i]=t;throw new ji(i.evaluate(e))}],typeof:[yi,[Ci],(e,t)=>{let[i]=t;return Ti(Vi(i.evaluate(e)))}],"to-rgba":[Li(gi,4),[vi],(e,t)=>{let[i]=t;return i.evaluate(e).toNonPremultipliedRenderColor(null).toArray()}],"to-hsla":[Li(gi,4),[vi],(e,t)=>{let[i]=t;return i.evaluate(e).toNonPremultipliedRenderColor(null).toHslaArray()}],rgb:[vi,[gi,gi,gi],po],rgba:[vi,[gi,gi,gi,gi],po],hsl:[vi,[gi,gi,gi],fo],hsla:[vi,[gi,gi,gi,gi],fo],has:{type:_i,overloads:[[[yi],(e,t)=>{let[i]=t;return mo(i.evaluate(e),e.properties())}],[[yi,xi],(e,t)=>{let[i,r]=t;return mo(i.evaluate(e),r.evaluate(e))}]]},get:{type:Ci,overloads:[[[yi],(e,t)=>{let[i]=t;return go(i.evaluate(e),e.properties())}],[[yi,xi],(e,t)=>{let[i,r]=t;return go(i.evaluate(e),r.evaluate(e))}]]},"feature-state":[Ci,[yi],(e,t)=>{let[i]=t;return go(i.evaluate(e),e.featureState||{})}],properties:[xi,[],e=>e.properties()],"geometry-type":[yi,[],e=>e.geometryType()],worldview:[yi,[],e=>e.globals.worldview||""],id:[Ci,[],e=>e.id()],zoom:[gi,[],e=>e.globals.zoom],pitch:[gi,[],e=>e.globals.pitch||0],"distance-from-center":[gi,[],e=>e.distanceFromCenter()],"measure-light":[gi,[yi],(e,t)=>{let[i]=t;return e.measureLight(i.evaluate(e))}],"heatmap-density":[gi,[],e=>e.globals.heatmapDensity||0],"line-progress":[gi,[],e=>e.globals.lineProgress||0],"raster-value":[gi,[],e=>e.globals.rasterValue||0],"raster-particle-speed":[gi,[],e=>e.globals.rasterParticleSpeed||0],"sky-radial-progress":[gi,[],e=>e.globals.skyRadialProgress||0],accumulated:[Ci,[],e=>void 0===e.globals.accumulated?null:e.globals.accumulated],"+":[gi,yo(gi),(e,t)=>{let i=0;for(const r of t)i+=r.evaluate(e);return i}],"*":[gi,yo(gi),(e,t)=>{let i=1;for(const r of t)i*=r.evaluate(e);return i}],"-":{type:gi,overloads:[[[gi,gi],(e,t)=>{let[i,r]=t;return i.evaluate(e)-r.evaluate(e)}],[[gi],(e,t)=>{let[i]=t;return-i.evaluate(e)}]]},"/":[gi,[gi,gi],(e,t)=>{let[i,r]=t;return i.evaluate(e)/r.evaluate(e)}],"%":[gi,[gi,gi],(e,t)=>{let[i,r]=t;return i.evaluate(e)%r.evaluate(e)}],ln2:[gi,[],()=>Math.LN2],pi:[gi,[],()=>Math.PI],e:[gi,[],()=>Math.E],"^":[gi,[gi,gi],(e,t)=>{let[i,r]=t;return Math.pow(i.evaluate(e),r.evaluate(e))}],sqrt:[gi,[gi],(e,t)=>{let[i]=t;return Math.sqrt(i.evaluate(e))}],log10:[gi,[gi],(e,t)=>{let[i]=t;return Math.log(i.evaluate(e))/Math.LN10}],ln:[gi,[gi],(e,t)=>{let[i]=t;return Math.log(i.evaluate(e))}],log2:[gi,[gi],(e,t)=>{let[i]=t;return Math.log(i.evaluate(e))/Math.LN2}],sin:[gi,[gi],(e,t)=>{let[i]=t;return Math.sin(i.evaluate(e))}],cos:[gi,[gi],(e,t)=>{let[i]=t;return Math.cos(i.evaluate(e))}],tan:[gi,[gi],(e,t)=>{let[i]=t;return Math.tan(i.evaluate(e))}],asin:[gi,[gi],(e,t)=>{let[i]=t;return Math.asin(i.evaluate(e))}],acos:[gi,[gi],(e,t)=>{let[i]=t;return Math.acos(i.evaluate(e))}],atan:[gi,[gi],(e,t)=>{let[i]=t;return Math.atan(i.evaluate(e))}],min:[gi,yo(gi),(e,t)=>Math.min(...t.map(t=>t.evaluate(e)))],max:[gi,yo(gi),(e,t)=>Math.max(...t.map(t=>t.evaluate(e)))],abs:[gi,[gi],(e,t)=>{let[i]=t;return Math.abs(i.evaluate(e))}],round:[gi,[gi],(e,t)=>{let[i]=t;const r=i.evaluate(e);return r<0?-Math.round(-r):Math.round(r)}],floor:[gi,[gi],(e,t)=>{let[i]=t;return Math.floor(i.evaluate(e))}],ceil:[gi,[gi],(e,t)=>{let[i]=t;return Math.ceil(i.evaluate(e))}],"filter-==":[_i,[yi,Ci],(e,t)=>{let[i,r]=t;return e.properties()[i.value]===r.value}],"filter-id-==":[_i,[Ci],(e,t)=>{let[i]=t;return e.id()===i.value}],"filter-type-==":[_i,[yi],(e,t)=>{let[i]=t;return e.geometryType()===i.value}],"filter-<":[_i,[yi,Ci],(e,t)=>{let[i,r]=t;const n=e.properties()[i.value],o=r.value;return typeof n==typeof o&&n<o}],"filter-id-<":[_i,[Ci],(e,t)=>{let[i]=t;const r=e.id(),n=i.value;return typeof r==typeof n&&r<n}],"filter->":[_i,[yi,Ci],(e,t)=>{let[i,r]=t;const n=e.properties()[i.value],o=r.value;return typeof n==typeof o&&n>o}],"filter-id->":[_i,[Ci],(e,t)=>{let[i]=t;const r=e.id(),n=i.value;return typeof r==typeof n&&r>n}],"filter-<=":[_i,[yi,Ci],(e,t)=>{let[i,r]=t;const n=e.properties()[i.value],o=r.value;return typeof n==typeof o&&n<=o}],"filter-id-<=":[_i,[Ci],(e,t)=>{let[i]=t;const r=e.id(),n=i.value;return typeof r==typeof n&&r<=n}],"filter->=":[_i,[yi,Ci],(e,t)=>{let[i,r]=t;const n=e.properties()[i.value],o=r.value;return typeof n==typeof o&&n>=o}],"filter-id->=":[_i,[Ci],(e,t)=>{let[i]=t;const r=e.id(),n=i.value;return typeof r==typeof n&&r>=n}],"filter-has":[_i,[Ci],(e,t)=>{let[i]=t;return i.value in e.properties()}],"filter-has-id":[_i,[],e=>null!==e.id()&&void 0!==e.id()],"filter-type-in":[_i,[Li(yi)],(e,t)=>{let[i]=t;return i.value.indexOf(e.geometryType())>=0}],"filter-id-in":[_i,[Li(Ci)],(e,t)=>{let[i]=t;return i.value.indexOf(e.id())>=0}],"filter-in-small":[_i,[yi,Li(Ci)],(e,t)=>{let[i,r]=t;return r.value.indexOf(e.properties()[i.value])>=0}],"filter-in-large":[_i,[yi,Li(Ci)],(e,t)=>{let[i,r]=t;return function(e,t,i,r){for(;i<=r;){const n=i+r>>1;if(t[n]===e)return!0;t[n]>e?r=n-1:i=n+1}return!1}(e.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:_i,overloads:[[[_i,_i],(e,t)=>{let[i,r]=t;return i.evaluate(e)&&r.evaluate(e)}],[yo(_i),(e,t)=>{for(const i of t)if(!i.evaluate(e))return!1;return!0}]]},any:{type:_i,overloads:[[[_i,_i],(e,t)=>{let[i,r]=t;return i.evaluate(e)||r.evaluate(e)}],[yo(_i),(e,t)=>{for(const i of t)if(i.evaluate(e))return!0;return!1}]]},"!":[_i,[_i],(e,t)=>{let[i]=t;return!i.evaluate(e)}],"is-supported-script":[_i,[yi],(e,t)=>{let[i]=t;const r=e.globals&&e.globals.isSupportedScript;return!r||r(i.evaluate(e))}],upcase:[yi,[yi],(e,t)=>{let[i]=t;return i.evaluate(e).toUpperCase()}],downcase:[yi,[yi],(e,t)=>{let[i]=t;return i.evaluate(e).toLowerCase()}],concat:[yi,yo(Ci),(e,t)=>t.map(t=>Ni(t.evaluate(e))).join("")],"resolved-locale":[yi,[wi],(e,t)=>{let[i]=t;return i.evaluate(e).resolvedLocale()}],random:[gi,[gi,gi,Ci],(e,t)=>{const[i,r,n]=t.map(t=>t.evaluate(e));if(i>r)return i;if(i===r)return i;let o;if("string"==typeof n)o=function(e){let t=0;if(0===e.length)return t;for(let i=0;i<e.length;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t}(n);else{if("number"!=typeof n)throw new ji("Invalid seed input: ".concat(n));o=n}return i+uo(o)()*(r-i)}]});class Oo{constructor(e,t,i,r){this.expression=e,this._warningHistory={},this._evaluator=new Ji(i,r),this._defaultValue=t?function(e){return"color"===e.type&&(Lo(e.default)||Array.isArray(e.default))?new oi(0,0,0,0):"color"===e.type?oi.parse(e.default)||null:void 0===e.default?null:e.default}(t):null,this._enumValues=t&&"enum"===t.type?t.values:null,this.configDependencies=pn(e)}evaluateWithoutErrorHandling(e,t,i,r,n,o,a,s){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,i,r,n,o,a,s){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=n||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{const e=this.expression.evaluate(this._evaluator);if(null==e||"number"==typeof e&&e!=e)return this._defaultValue;if(this._enumValues&&!(e in this._enumValues))throw new ji("Expected value to be one of ".concat(Object.keys(this._enumValues).map(e=>JSON.stringify(e)).join(", "),", but found ").concat(JSON.stringify(e)," instead."));return e}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn('Failed to evaluate expression "'.concat(JSON.stringify(this.expression.serialize()),'". ').concat(e.message))),this._defaultValue}}}function Ro(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in ho}function zo(e,t,i,r){const n=new xn(ho,[],t?function(e){const t={color:vi,string:yi,number:gi,enum:yi,boolean:_i,formatted:bi,resolvedImage:Si};return"array"===e.type?Li(t[e.value]||Ci,e.length):t[e.type]}(t):void 0,void 0,void 0,i,r),o=n.parse(e,void 0,void 0,void 0,t&&"string"===t.type?{typeAnnotation:"coerce"}:void 0);return o?_o(new Oo(o,t,i,r)):vo(n.errors)}class Do{constructor(e,t,i,r){this.kind=e,this._styleExpression=t,this.isLightConstant=i,this.isLineProgressConstant=r,this.isStateDependent="constant"!==e&&!dn(t.expression),this.configDependencies=pn(t.expression)}evaluateWithoutErrorHandling(e,t,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,o)}evaluate(e,t,i,r,n,o){return this._styleExpression.evaluate(e,t,i,r,n,o)}}class Fo{constructor(e,t,i,r,n,o){this.kind=e,this.zoomStops=i,this._styleExpression=t,this.isStateDependent="camera"!==e&&!dn(t.expression),this.isLightConstant=n,this.isLineProgressConstant=o,this.configDependencies=pn(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,i,r,n,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,i,r,n,o)}evaluate(e,t,i,r,n,o){return this._styleExpression.evaluate(e,t,i,r,n,o)}interpolationFactor(e,t,i){return this.interpolationType?jn.interpolationFactor(this.interpolationType,e,t,i):0}}function Bo(e,t,i,r){if("error"===(e=zo(e,t,i,r)).result)return e;const n=e.value.expression,o=hn(n);if(!o&&!Co(t))return vo([new pi("","data expressions not supported")]);const a=fn(n,["zoom","pitch","distance-from-center"]);if(!a&&!bo(t))return vo([new pi("","zoom expressions not supported")]);const s=fn(n,["measure-light"]);if(!s&&!wo(t))return vo([new pi("","measure-light expression not supported")]);const l=fn(n,["line-progress"]);if(!l&&!function(e){return xo(e.expression,"line-progress")}(t))return vo([new pi("","line-progress expression not supported")]);const c=t.expression&&t.expression.relaxZoomRestriction,u=No(n);return u||a||c?u instanceof pi?vo([u]):u instanceof jn&&!So(t)?vo([new pi("",'"interpolate" expressions cannot be used with this property')]):_o(u?new Fo(o&&l?"camera":"composite",e.value,u.labels,u instanceof jn?u.interpolation:void 0,s,l):new Do(o&&l?"constant":"source",e.value,s,l)):vo([new pi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class Vo{constructor(e,t){this._parameters=e,this._specification=t,di(this,Mo(this._parameters,this._specification))}static deserialize(e){return new Vo(e._parameters,e._specification)}static serialize(e){return{_parameters:e._parameters,_specification:e._specification}}}function No(e){let t=null;if(e instanceof Wn)t=No(e.result);else if(e instanceof Zn){for(const i of e.args)if(t=No(i),t)break}else(e instanceof bn||e instanceof jn)&&e.input instanceof Qi&&"zoom"===e.input.name&&(t=e);return t instanceof pi||e.eachChild(e=>{const i=No(e);i instanceof pi?t=i:t&&i&&t!==i&&(t=new pi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t}var Uo,jo,Ho=function(){if(jo)return Uo;jo=1,Uo=t;var e=3;function t(t,i,r){var n=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;var o=new Int32Array(this.arrayBuffer);t=o[0],this.d=(i=o[1])+2*(r=o[2]);for(var a=0;a<this.d*this.d;a++){var s=o[e+a],l=o[e+a+1];n.push(s===l?null:o.subarray(s,l))}var c=o[e+n.length+1];this.keys=o.subarray(o[e+n.length],c),this.bboxes=o.subarray(c),this.insert=this._insertReadonly}else{this.d=i+2*r;for(var u=0;u<this.d*this.d;u++)n.push([]);this.keys=[],this.bboxes=[]}this.n=i,this.extent=t,this.padding=r,this.scale=i/t,this.uid=0;var h=r/i*t;this.min=-h,this.max=t+h}return t.prototype.insert=function(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)},t.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},t.prototype._insertCell=function(e,t,i,r,n,o){this.cells[n].push(o)},t.prototype.query=function(e,t,i,r,n){var o=this.min,a=this.max;if(e<=o&&t<=o&&a<=i&&a<=r&&!n)return Array.prototype.slice.call(this.keys);var s=[];return this._forEachCell(e,t,i,r,this._queryCell,s,{},n),s},t.prototype._queryCell=function(e,t,i,r,n,o,a,s){var l=this.cells[n];if(null!==l)for(var c=this.keys,u=this.bboxes,h=0;h<l.length;h++){var d=l[h];if(void 0===a[d]){var p=4*d;(s?s(u[p+0],u[p+1],u[p+2],u[p+3]):e<=u[p+2]&&t<=u[p+3]&&i>=u[p+0]&&r>=u[p+1])?(a[d]=!0,o.push(c[d])):a[d]=!1}}},t.prototype._forEachCell=function(e,t,i,r,n,o,a,s){for(var l=this._convertToCellCoord(e),c=this._convertToCellCoord(t),u=this._convertToCellCoord(i),h=this._convertToCellCoord(r),d=l;d<=u;d++)for(var p=c;p<=h;p++){var f=this.d*p+d;if((!s||s(this._convertFromCellCoord(d),this._convertFromCellCoord(p),this._convertFromCellCoord(d+1),this._convertFromCellCoord(p+1)))&&n.call(this,e,t,i,r,f,o,a,s))return}},t.prototype._convertFromCellCoord=function(e){return(e-this.padding)/this.scale},t.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},t.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,i=e+this.cells.length+1+1,r=0,n=0;n<this.cells.length;n++)r+=this.cells[n].length;var o=new Int32Array(i+r+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var a=i,s=0;s<t.length;s++){var l=t[s];o[e+s]=a,o.set(l,a),a+=l.length}return o[e+t.length]=a,o.set(this.keys,a),o[e+t.length+1]=a+=this.keys.length,o.set(this.bboxes,a),a+=this.bboxes.length,o.buffer},Uo}(),Zo=fe(Ho);const Wo={};function Go(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.defineProperty(e,"_classRegistryKey",{value:t,writable:!1}),Wo[t]={klass:e,omit:i.omit||[]}}Go(Object,"Object"),Zo.serialize=function(e,t){const i=e.toArrayBuffer();return t&&t.add(i),{buffer:i}},Zo.deserialize=function(e){return new Zo(e.buffer)},Object.defineProperty(Zo,"name",{value:"Grid"}),Go(Zo,"Grid"),"undefined"!=typeof DOMMatrix&&Go(DOMMatrix,"DOMMatrix"),Go(oi,"Color"),Go(Error,"Error"),Go(Ri,"Formatted"),Go(Oi,"FormattedSection"),Go(Ot,"AJAXError"),Go(Di,"ResolvedImage"),Go(Vo,"StylePropertyFunction"),Go(Oo,"StyleExpression",{omit:["_evaluator"]}),Go(ti,"ImageId"),Go(zi,"ImageVariant"),Go(Fo,"ZoomDependentExpression"),Go(Do,"ZoomConstantExpression"),Go(Qi,"CompoundExpression",{omit:["_evaluate"]});for(const oC in ho)Wo[ho[oC]._classRegistryKey]||Go(ho[oC],"Expression".concat(oC));function qo(e){return e&&"undefined"!=typeof ArrayBuffer&&(e instanceof ArrayBuffer||e.constructor&&"ArrayBuffer"===e.constructor.name)}function Xo(e){return self.ImageBitmap&&e instanceof ImageBitmap}function Yo(e,t){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(qo(e)||Xo(e))return t&&t.add(e),e;if(ArrayBuffer.isView(e))return t&&t.add(e.buffer),e;if(e instanceof ImageData)return t&&t.add(e.data.buffer),e;if(Array.isArray(e)){const i=[];for(const r of e)i.push(Yo(r,t));return i}if(e instanceof Map){const i={$name:"Map",entries:[]};for(const[r,n]of e.entries())i.entries.push(Yo(r),Yo(n,t));return i}if(e instanceof Set){const t={$name:"Set"};let i=0;for(const r of e.values())t[++i]=Yo(r);return t}if(e instanceof DOMMatrix){const t={$name:"DOMMatrix"},i=["is2D","m11","m12","m13","m14","m21","m22","m23","m24","m31","m32","m33","m34","m41","m42","m43","m44","a","b","c","d","e","f"];for(const r of i)t[r]=e[r];return t}if("bigint"==typeof e)return{$name:"BigInt",value:e.toString()};if("object"==typeof e){const i=e.constructor,r=i._classRegistryKey;if(!r)throw new Error("Can't serialize object of unregistered class \"".concat(i.name,'".'));const n=i.serialize?i.serialize(e,t):{};if(!i.serialize){for(const i in e)e.hasOwnProperty(i)&&(Wo[r].omit.indexOf(i)>=0||(n[i]=Yo(e[i],t)));e instanceof Error&&(n.message=e.message)}if(n.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==r&&(n.$name=r),n}throw new Error("can't serialize object of type "+typeof e)}function Ko(e){if(null==e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||qo(e)||Xo(e)||ArrayBuffer.isView(e)||e instanceof ImageData)return e;if(Array.isArray(e))return e.map(Ko);if("object"==typeof e){const t=e.$name||"Object";if("Map"===t){const t=e.entries||[],i=new Map;for(let e=0;e<t.length;e+=2)i.set(Ko(t[e]),Ko(t[e+1]));return i}if("Set"===t){const t=new Set;for(const i of Object.keys(e))"$name"!==i&&t.add(Ko(e[i]));return t}if("DOMMatrix"===t){let t;return t=e.is2D?[e.a,e.b,e.c,e.d,e.e,e.f]:[e.m11,e.m12,e.m13,e.m14,e.m21,e.m22,e.m23,e.m24,e.m31,e.m32,e.m33,e.m34,e.m41,e.m42,e.m43,e.m44],new DOMMatrix(t)}if("BigInt"===t)return BigInt(e.value);const{klass:i}=Wo[t];if(!i)throw new Error("Can't deserialize unregistered class \"".concat(t,'".'));if(i.deserialize)return i.deserialize(e);const r=Object.create(i.prototype);for(const n of Object.keys(e))"$name"!==n&&(r[n]=Ko(e[n]));return r}throw new Error("can't deserialize object of type "+typeof e)}const Jo={"Latin-1 Supplement":e=>e>=128&&e<=255,Arabic:e=>e>=1536&&e<=1791,"Arabic Supplement":e=>e>=1872&&e<=1919,"Arabic Extended-A":e=>e>=2208&&e<=2303,"Hangul Jamo":e=>e>=4352&&e<=4607,"Unified Canadian Aboriginal Syllabics":e=>e>=5120&&e<=5759,Khmer:e=>e>=6016&&e<=6143,"Unified Canadian Aboriginal Syllabics Extended":e=>e>=6320&&e<=6399,"General Punctuation":e=>e>=8192&&e<=8303,"Letterlike Symbols":e=>e>=8448&&e<=8527,"Number Forms":e=>e>=8528&&e<=8591,"Miscellaneous Technical":e=>e>=8960&&e<=9215,"Control Pictures":e=>e>=9216&&e<=9279,"Optical Character Recognition":e=>e>=9280&&e<=9311,"Enclosed Alphanumerics":e=>e>=9312&&e<=9471,"Geometric Shapes":e=>e>=9632&&e<=9727,"Miscellaneous Symbols":e=>e>=9728&&e<=9983,"Miscellaneous Symbols and Arrows":e=>e>=11008&&e<=11263,"CJK Radicals Supplement":e=>e>=11904&&e<=12031,"Kangxi Radicals":e=>e>=12032&&e<=12255,"Ideographic Description Characters":e=>e>=12272&&e<=12287,"CJK Symbols and Punctuation":e=>e>=12288&&e<=12351,Hiragana:e=>e>=12352&&e<=12447,Katakana:e=>e>=12448&&e<=12543,Bopomofo:e=>e>=12544&&e<=12591,"Hangul Compatibility Jamo":e=>e>=12592&&e<=12687,Kanbun:e=>e>=12688&&e<=12703,"Bopomofo Extended":e=>e>=12704&&e<=12735,"CJK Strokes":e=>e>=12736&&e<=12783,"Katakana Phonetic Extensions":e=>e>=12784&&e<=12799,"Enclosed CJK Letters and Months":e=>e>=12800&&e<=13055,"CJK Compatibility":e=>e>=13056&&e<=13311,"CJK Unified Ideographs Extension A":e=>e>=13312&&e<=19903,"Yijing Hexagram Symbols":e=>e>=19904&&e<=19967,"CJK Unified Ideographs":e=>e>=19968&&e<=40959,"Yi Syllables":e=>e>=40960&&e<=42127,"Yi Radicals":e=>e>=42128&&e<=42191,"Hangul Jamo Extended-A":e=>e>=43360&&e<=43391,"Hangul Syllables":e=>e>=44032&&e<=55215,"Hangul Jamo Extended-B":e=>e>=55216&&e<=55295,"Private Use Area":e=>e>=57344&&e<=63743,"CJK Compatibility Ideographs":e=>e>=63744&&e<=64255,"Arabic Presentation Forms-A":e=>e>=64336&&e<=65023,"Vertical Forms":e=>e>=65040&&e<=65055,"CJK Compatibility Forms":e=>e>=65072&&e<=65103,"Small Form Variants":e=>e>=65104&&e<=65135,"Arabic Presentation Forms-B":e=>e>=65136&&e<=65279,"Halfwidth and Fullwidth Forms":e=>e>=65280&&e<=65519,Osage:e=>e>=66736&&e<=66815,"CJK Unified Ideographs Extension B":e=>e>=131072&&e<=173791};function Qo(e){for(const t of e)if(ta(t.charCodeAt(0)))return!0;return!1}function $o(e){for(const t of e)if(!ea(t.charCodeAt(0)))return!1;return!0}function ea(e){return!(Jo.Arabic(e)||Jo["Arabic Supplement"](e)||Jo["Arabic Extended-A"](e)||Jo["Arabic Presentation Forms-A"](e)||Jo["Arabic Presentation Forms-B"](e))}function ta(e){return!(746!==e&&747!==e&&(e<4352||!(Jo["Bopomofo Extended"](e)||Jo.Bopomofo(e)||Jo["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||Jo["CJK Compatibility Ideographs"](e)||Jo["CJK Compatibility"](e)||Jo["CJK Radicals Supplement"](e)||Jo["CJK Strokes"](e)||!(!Jo["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||Jo["CJK Unified Ideographs Extension A"](e)||Jo["CJK Unified Ideographs"](e)||Jo["Enclosed CJK Letters and Months"](e)||Jo["Hangul Compatibility Jamo"](e)||Jo["Hangul Jamo Extended-A"](e)||Jo["Hangul Jamo Extended-B"](e)||Jo["Hangul Jamo"](e)||Jo["Hangul Syllables"](e)||Jo.Hiragana(e)||Jo["Ideographic Description Characters"](e)||Jo.Kanbun(e)||Jo["Kangxi Radicals"](e)||Jo["Katakana Phonetic Extensions"](e)||Jo.Katakana(e)&&12540!==e||!(!Jo["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!Jo["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||Jo["Unified Canadian Aboriginal Syllabics"](e)||Jo["Unified Canadian Aboriginal Syllabics Extended"](e)||Jo["Vertical Forms"](e)||Jo["Yijing Hexagram Symbols"](e)||Jo["Yi Syllables"](e)||Jo["Yi Radicals"](e))))}function ia(e){return!(ta(e)||function(e){return!!(Jo["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||Jo["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||Jo["Letterlike Symbols"](e)||Jo["Number Forms"](e)||Jo["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||Jo["Control Pictures"](e)&&9251!==e||Jo["Optical Character Recognition"](e)||Jo["Enclosed Alphanumerics"](e)||Jo["Geometric Shapes"](e)||Jo["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||Jo["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||Jo["CJK Symbols and Punctuation"](e)||Jo.Katakana(e)||Jo["Private Use Area"](e)||Jo["CJK Compatibility Forms"](e)||Jo["Small Form Variants"](e)||Jo["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)}(e))}function ra(e){return Jo.Arabic(e)||Jo["Arabic Supplement"](e)||Jo["Arabic Extended-A"](e)||Jo["Arabic Presentation Forms-A"](e)||Jo["Arabic Presentation Forms-B"](e)}function na(e){return e>=1424&&e<=2303||Jo["Arabic Presentation Forms-A"](e)||Jo["Arabic Presentation Forms-B"](e)}function oa(e,t){return!(!t&&na(e)||e>=2304&&e<=3583||e>=3840&&e<=4255||Jo.Khmer(e))}function aa(e){for(const t of e)if(na(t.charCodeAt(0)))return!0;return!1}const sa={unavailable:"unavailable",deferred:"deferred",loading:"loading",parsing:"parsing",parsed:"parsed",loaded:"loaded",error:"error"};let la=null,ca=sa.unavailable,ua=null;const ha=function(e){e&&"string"==typeof e&&e.indexOf("NetworkError")>-1&&(ca=sa.error),la&&la(e)};function da(){pa.fire(new Kt("pluginStateChange",{pluginStatus:ca,pluginURL:ua}))}const pa=new ei,fa=function(){return ca},ma=function(){if(ca!==sa.deferred||!ua)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ca=sa.loading,da(),ua&&Dt({url:ua},e=>{e?ha(e):(ca=sa.loaded,da())})},ga={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>ca===sa.loaded||null!=ga.applyArabicShaping,isLoading:()=>ca===sa.loading,setState(e){ca=e.pluginStatus,ua=e.pluginURL},isParsing:()=>ca===sa.parsing,isParsed:()=>ca===sa.parsed,getPluginURL:()=>ua};class ya{constructor(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.transition=t.transition,this.pitch=t.pitch,this.brightness=t.brightness,this.worldview=t.worldview):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(e){return function(e,t){for(const i of e)if(!oa(i.charCodeAt(0),t))return!1;return!0}(e,ga.isLoaded())}}class _a{constructor(e,t,i,r){this.property=e,this.value=t,this.expression=function(e,t,i,r){if(Lo(e))return new Vo(e,t);if(Ro(e)||Array.isArray(e)&&e.length>0){const n=Bo(e,t,i,r);if("error"===n.result)throw new Error(n.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));return n.value}{let i=e;return"string"==typeof e&&"color"===t.type&&(i=oi.parse(e)),{kind:"constant",configDependencies:new Set,evaluate:()=>i}}}(void 0===t?e.specification.default:t,e.specification,i,r)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}possiblyEvaluate(e,t,i){return this.property.possiblyEvaluate(this,e,t,i)}}class va{constructor(e,t,i){this.property=e,this.value=new _a(e,void 0,t,i)}transitioned(e,t){return new Ca(this.property,this.value,t,Re({},e.transition,this.transition),e.now)}untransitioned(){return new Ca(this.property,this.value,null,{},0)}}class xa{constructor(e,t,i){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues),this._scope=t,this._options=i,this.configDependencies=new Set}getValue(e){return Ue(this._values[e].value.value)}setValue(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new va(this._values[e].property,this._scope,this._options)),this._values[e].value=new _a(this._values[e].property,null===t?void 0:Ue(t),this._scope,this._options),this._values[e].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[e].value.expression.configDependencies]))}setTransitionOrValue(e,t){t&&(this._options=t);const i=this._properties.properties;if(e)for(const r in e){const t=e[r];if(r.endsWith("-transition")){const e=r.slice(0,-11);i[e]&&this.setTransition(e,t)}else i.hasOwnProperty(r)&&this.setValue(r,t)}}getTransition(e){return Ue(this._values[e].transition)}setTransition(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new va(this._values[e].property)),this._values[e].transition=Ue(t)||void 0}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i);const r=this.getTransition(t);void 0!==r&&(e["".concat(t,"-transition")]=r)}return e}transitioned(e,t){const i=new wa(this._properties);for(const r of Object.keys(this._values))i._values[r]=this._values[r].transitioned(e,t._values[r]);return i}untransitioned(){const e=new wa(this._properties);for(const t of Object.keys(this._values))e._values[t]=this._values[t].untransitioned();return e}}class Ca{constructor(e,t,i,r,n){const o=r.delay||0,a=r.duration||0;n=n||0,this.property=e,this.value=t,this.begin=n+o,this.end=this.begin+a,e.specification.transition&&(r.delay||r.duration)&&(this.prior=i)}possiblyEvaluate(e,t,i){const r=e.now||0,n=this.value.possiblyEvaluate(e,t,i),o=this.prior;if(o){if(r>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(r<this.begin)return o.possiblyEvaluate(e,t,i);{const a=(r-this.begin)/(this.end-this.begin);return this.property.interpolate(o.possiblyEvaluate(e,t,i),n,Me(a))}}return n}}class wa{constructor(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)}possiblyEvaluate(e,t,i){const r=new La(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}hasTransition(){for(const e of Object.keys(this._values))if(this._values[e].prior)return!0;return!1}}class ba{constructor(e,t,i){this._properties=e,this._values=Object.create(e.defaultPropertyValues),this._scope=t,this._options=i,this.configDependencies=new Set}getValue(e){return Ue(this._values[e].value)}setValue(e,t){this._values[e]=new _a(this._values[e].property,null===t?void 0:Ue(t),this._scope,this._options),this._values[e].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[e].expression.configDependencies]))}serialize(){const e={};for(const t of Object.keys(this._values)){const i=this.getValue(t);void 0!==i&&(e[t]=i)}return e}possiblyEvaluate(e,t,i){const r=new La(this._properties);for(const n of Object.keys(this._values))r._values[n]=this._values[n].possiblyEvaluate(e,t,i);return r}}class Sa{constructor(e,t,i){this.property=e,this.value=t,this.parameters=i}isConstant(){return"constant"===this.value.kind}constantOr(e){return"constant"===this.value.kind?this.value.value:e}evaluate(e,t,i,r){return this.property.evaluate(this.value,this.parameters,e,t,i,r)}}class La{constructor(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)}get(e){return this._values[e]}}class Ta{constructor(e){this.specification=e}possiblyEvaluate(e,t){return e.expression.evaluate(t)}interpolate(e,t,i){const r=hi[this.specification.type];return r?r(e,t,i):e}}class Ma{constructor(e,t){this.specification=e,this.overrides=t}possiblyEvaluate(e,t,i,r){return new Sa(this,"constant"===e.expression.kind||"camera"===e.expression.kind?{kind:"constant",value:e.expression.evaluate(t,null,{},i,r)}:e.expression,t)}interpolate(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0===e.value.value||void 0===t.value.value)return new Sa(this,{kind:"constant",value:void 0},e.parameters);const r=hi[this.specification.type];return r?new Sa(this,{kind:"constant",value:r(e.value.value,t.value.value,i)},e.parameters):e}evaluate(e,t,i,r,n,o){return"constant"===e.kind?e.value:e.evaluate(t,i,r,n,o)}}class Ea{constructor(e){this.specification=e}possiblyEvaluate(e,t,i,r){return!!e.expression.evaluate(t,null,{},i,r)}interpolate(){return!1}}class Ia{constructor(e){this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const t=new ya(0,{});for(const i in e){const r=e[i];r.specification.overridable&&this.overridableProperties.push(i);const n=this.defaultPropertyValues[i]=new _a(r,void 0),o=this.defaultTransitionablePropertyValues[i]=new va(r);this.defaultTransitioningPropertyValues[i]=o.untransitioned(),this.defaultPossiblyEvaluatedValues[i]=n.possiblyEvaluate(t)}}}Go(Ma,"DataDrivenProperty"),Go(Ta,"DataConstantProperty"),Go(Ea,"ColorRampProperty");var Aa=JSON.parse('{"$version":8,"$root":{"version":{"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow"},"rain":{"type":"rain"},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor"},"imports":{"type":"array","value":"import"},"iconsets":{"type":"iconsets"},"schema":{"type":"schema"},"sources":{"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"type":"featuresets"}},"featuresets":{"*":{"type":"featureset"}},"featureset":{"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"layer":{"type":"string"},"properties":{"type":"selectorProperty"},"featureNamespace":{"type":"string"},"_uniqueFeatureID":{"type":"boolean"}},"selectorProperty":{"*":{"type":"*"}},"model":{"type":"string"},"import":{"id":{"type":"string"},"url":{"type":"string"},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","expression":{}},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string"},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false},"shadow-quality":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]}},"shadow-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"iconsets":{"*":{"type":"iconset"}},"iconset":["iconset_sprite","iconset_source"],"iconset_sprite":{"type":{"type":"enum","values":{"sprite":1}},"url":{"type":"string"}},"iconset_source":{"type":{"type":"enum","values":{"source":1}},"source":{"type":"string"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"type":{"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"extra_bounds":{"type":"array","value":{"type":"array","value":"number","length":4}},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"type":"enum","values":{"video":1}},"urls":{"type":"array","value":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"type":"enum","values":{"image":1}},"url":{"type":"string"},"coordinates":{"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string"},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"building":{},"raster":{},"raster-particle":{},"hillshade":{},"model":{},"background":{},"sky":{},"slot":{},"clip":{}}},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_building","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{}},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{}}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","expression":{}},"fill-construct-bridge-guard-rail":{"type":"boolean","default":"true","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"circle-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-markup":1},"default":"none","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"fill-extrusion-edge-radius":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}}},"layout_building":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"building-roof-shape":{"type":"enum","values":{"flat":1,"hipped":1,"gabled":1,"parapet":1,"mansard":1,"skillion":1,"pyramidal":1},"default":"flat","expression":{"parameters":["feature"]},"property-type":"data-driven"},"building-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"},"building-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{},"property-type":"data-driven"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","expression":{}},"line-cross-slope":{"type":"number","expression":{}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","expression":{"parameters":["zoom"]}}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]}},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]}},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]}},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","expression":{"parameters":["zoom"]}},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]}},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"expression":{}},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]}},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]}},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]}},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{}}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_building":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*"}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"high-color":{"type":"color","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"space-color":{"type":"color","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"horizon-blend":{"type":"number","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.4,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","default":0.71,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"opacity":{"type":"number","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"use-theme":true,"transition":true},"center-thinning":{"type":"number","default":0.57,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","default":0.7,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective"}},"colorTheme":{"data":{"type":"string","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","expression":{}},"buildingFeaturesetId":{"type":"string","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"use-theme":true,"transition":true},"intensity":{"type":"number","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator"},"center":{"type":"array","length":2,"value":"number","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string"},"exaggeration":{"type":"number","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_building","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-bridge-guard-rail-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"},"fill-tunnel-structure-color":{"type":"color","default":"rgba(241, 236, 225, 255)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"flat"},"fill-extrusion-base-alignment":{"type":"enum","values":{"terrain":1,"flat":1},"default":"terrain"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-ambient-occlusion-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"type":"color","default":"#ffffff","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true}},"paint_building":{"building-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-ambient-occlusion-wall-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-intensity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-radius":{"type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"building-ambient-occlusion-ground-attenuation":{"type":"number","default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-vertical-scale":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"building-cast-shadows":{"type":"boolean","default":true},"building-color":{"type":"color","default":"rgba(193, 154, 127, 1)","use-theme":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]},"property-type":"data-driven"},"building-emissive-strength":{"type":"number","default":0,"minimum":0,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"property-type":"data-driven"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-gradient":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["line-progress"]}},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1]},"line-trim-fade-range":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-trim-color":{"type":"color","default":"transparent","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"line-border-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"use-theme":true,"expression":{"interpolated":true,"parameters":["heatmap-density"]}},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-image-cross-fade":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]}},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{}},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{}},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-value"]}},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]}},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"raster-array-band":{"type":"string"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string"},"raster-particle-count":{"type":"number","default":512,"minimum":1},"raster-particle-color":{"type":"color","use-theme":true,"expression":{"interpolated":true,"parameters":["raster-particle-speed"]}},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]}},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"hillshade-shadow-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-accent-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]}},"background-color":{"type":"color","default":"#000000","use-theme":true,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]}},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]}},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]}},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]}},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"use-theme":true,"expression":{"interpolated":true,"parameters":["sky-radial-progress"]}},"sky-atmosphere-halo-color":{"type":"color","default":"white","use-theme":true},"sky-atmosphere-color":{"type":"color","default":"white","use-theme":true},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"use-theme":true,"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d"},"model-cast-shadows":{"type":"boolean","default":true},"model-receive-shadows":{"type":"boolean","default":true},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{}},"model-front-cutoff":{"type":"array","value":"number","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"promoteId":{"*":{"type":"*"}}}');function ka(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function Pa(e){if(Array.isArray(e))return e.map(Pa);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){const t={};for(const i in e)t[i]=Pa(e[i]);return t}return ka(e)}function Oa(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(const t of e.slice(1))if(!Oa(t)&&"boolean"!=typeof t)return!1;return!0;default:return!0}}function Ra(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"fill";if(null==e)return{filter:()=>!0,needGeometry:!1,needFeature:!1};Oa(e)||(e=Ua(e));const n=e;let o=!0;try{o=function(e){if(!Fa(e))return e;let t=Pa(e);return Da(t),t=za(t),t}(n)}catch(e){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n".concat(JSON.stringify(n,null,2),"\n        "))}let a=null,s=null;if("background"!==r&&"sky"!==r&&"slot"!==r){s=Aa["filter_".concat(r)];const e=zo(o,s,t,i);if("error"===e.result)throw new Error(e.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));a=(t,i,r)=>e.value.evaluate(t,i,{},r)}let l=null,c=null;if(o!==n){const e=zo(n,s,t,i);if("error"===e.result)throw new Error(e.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));l=(t,i,r,n,o)=>e.value.evaluate(t,i,{},r,void 0,void 0,n,o),c=!hn(e.value.expression)}return{filter:a,dynamicFilter:l||void 0,needGeometry:Na(o),needFeature:!!c}}function za(e){if(!Array.isArray(e))return e;const t=function(e){if(Ba.has(e[0]))for(let t=1;t<e.length;t++)if(Fa(e[t]))return!0;return e}(e);return!0===t?t:t.map(e=>za(e))}function Da(e){let t=!1;const i=[];if("case"===e[0]){for(let r=1;r<e.length-1;r+=2)t=t||Fa(e[r]),i.push(e[r+1]);i.push(e[e.length-1])}else if("match"===e[0]){t=t||Fa(e[1]);for(let t=2;t<e.length-1;t+=2)i.push(e[t+1]);i.push(e[e.length-1])}else if("step"===e[0]){t=t||Fa(e[1]);for(let t=1;t<e.length-1;t+=2)i.push(e[t+1])}t&&(e.length=0,e.push("any",...i));for(let r=1;r<e.length;r++)Da(e[r])}function Fa(e){if(!Array.isArray(e))return!1;if("pitch"===(t=e[0])||"distance-from-center"===t)return!0;var t;for(let i=1;i<e.length;i++)if(Fa(e[i]))return!0;return!1}const Ba=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function Va(e,t){return e<t?-1:e>t?1:0}function Na(e){if(!Array.isArray(e))return!1;if("within"===e[0]||"distance"===e[0])return!0;for(let t=1;t<e.length;t++)if(Na(e[t]))return!0;return!1}function Ua(e){if(!e)return!0;const t=e[0];return e.length<=1?"any"!==t:"=="===t?ja(e[1],e[2],"=="):"!="===t?Wa(ja(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?ja(e[1],e[2],t):"any"===t?(i=e.slice(1),["any"].concat(i.map(Ua))):"all"===t?["all"].concat(e.slice(1).map(Ua)):"none"===t?["all"].concat(e.slice(1).map(Ua).map(Wa)):"in"===t?Ha(e[1],e.slice(2)):"!in"===t?Wa(Ha(e[1],e.slice(2))):"has"===t?Za(e[1]):"!has"!==t||Wa(Za(e[1]));var i}function ja(e,t,i){switch(e){case"$type":return["filter-type-".concat(i),t];case"$id":return["filter-id-".concat(i),t];default:return["filter-".concat(i),e,t]}}function Ha(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(e=>typeof e!=typeof t[0])?["filter-in-large",e,["literal",t.sort(Va)]]:["filter-in-small",e,["literal",t]]}}function Za(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function Wa(e){return["!",e]}const Ga="\x1f";function qa(e,t){return t?"".concat(e).concat(Ga).concat(t):e}const Xa="-transition",Ya=new Set(["fill","line","background","hillshade","raster"]);class Ka extends ei{constructor(e,t,i,r,n){if(super(),this.id=e.id,this.fqid=qa(this.id,i),this.type=e.type,this.scope=i,this.lut=r,this.options=n,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,"custom"!==e.type){if(this.metadata=e.metadata,this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,e.type&&"background"!==e.type&&"sky"!==e.type&&"slot"!==e.type){this.source=e.source,this.sourceLayer=e["source-layer"],this.filter=e.filter;const t=zo(this.filter,Aa["filter_".concat(e.type)]);"error"!==t.result&&(this.configDependencies=new Set([...this.configDependencies,...t.value.configDependencies]))}if(e.slot&&(this.slot=e.slot),t.layout&&(this._unevaluatedLayout=new ba(t.layout,this.scope,n),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),t.paint){this._transitionablePaint=new xa(t.paint,this.scope,n);for(const t in e.paint)this.setPaintProperty(t,e.paint[t]);for(const t in e.layout)this.setLayoutProperty(t,e.layout[t]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new La(t.paint)}}}onAdd(e){}onRemove(e){}isDraped(e){return!this.is3D(!0)&&Ya.has(this.type)}getLayoutProperty(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)}setLayoutProperty(e,t){if("custom"===this.type&&"visibility"===e)return void(this.visibility=t);const i=this._unevaluatedLayout;i._properties.properties[e]&&(i.setValue(e,t),this.configDependencies=new Set([...this.configDependencies,...i.configDependencies]),"visibility"===e&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(e){return e.endsWith(Xa)?this._transitionablePaint.getTransition(e.slice(0,-11)):this._transitionablePaint.getValue(e)}setPaintProperty(e,t){const i=this._transitionablePaint,r=i._properties.properties;if(e.endsWith(Xa)){const n=e.slice(0,-11);return r[n]&&i.setTransition(n,t||void 0),!1}if(!r[e])return!1;const n=i._values[e],o=n.value.isDataDriven(),a=n.value;i.setValue(e,t),this.configDependencies=new Set([...this.configDependencies,...i.configDependencies]),this._handleSpecialPaintPropertyUpdate(e);const s=i._values[e].value,l=s.isDataDriven(),c=e.endsWith("pattern")||"line-dasharray"===e;return l||o||c||this._handleOverridablePaintPropertyUpdate(e,a,s)}_handleSpecialPaintPropertyUpdate(e){}getProgramIds(){return null}getDefaultProgramParams(e,t,i){return null}_handleOverridablePaintPropertyUpdate(e,t,i){return!1}isHidden(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility}updateTransitions(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(e,t){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e,void 0,t)),this.paint=this._transitioningPaint.possiblyEvaluate(e,void 0,t)}serialize(){return Ne({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(e,t)=>!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length))}is3D(e){return!1}hasElevation(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const e in this.paint._values){const t=this.paint.get(e);if(t instanceof Sa&&Co(t.property.specification)&&("source"===t.value.kind||"composite"===t.value.kind)&&t.value.isStateDependent)return!0}return!1}compileFilter(e){this._filterCompiled||(this._featureFilter=Ra(this.filter,this.scope,e),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(e){this._stats&&("shadow"===e.renderPass?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(e){}queryIntersectsFeature(e,t,i,r,n,o,a,s,l){}}const Ja={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Qa{constructor(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class $a{constructor(){this.capacity=-1,this.resize(0)}static serialize(e,t){return e._trim(),t&&t.add(e.arrayBuffer),{length:e.length,arrayBuffer:e.arrayBuffer}}static deserialize(e){const t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(e){this.reserve(e),this.length=e}reserve(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function es(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=0,r=0;return{members:e.map(e=>{const n=Ja[e.type].BYTES_PER_ELEMENT,o=i=ts(i,Math.max(t,n)),a=e.components||1;return r=Math.max(r,n),i+=n*a,{name:e.name,type:e.type,components:a,offset:o}}),size:ts(i,Math.max(r,t)),alignment:t}}function ts(e,t){return Math.ceil(e/t)*t}class is extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.int16[r+0]=t,this.int16[r+1]=i,e}}is.prototype.bytesPerElement=4,Go(is,"StructArrayLayout2i4");class rs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=r,e}}rs.prototype.bytesPerElement=6,Go(rs,"StructArrayLayout3i6");class ns extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=4*e;return this.int16[o+0]=t,this.int16[o+1]=i,this.int16[o+2]=r,this.int16[o+3]=n,e}}ns.prototype.bytesPerElement=8,Go(ns,"StructArrayLayout4i8");class os extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.float32[1*e+0]=t,e}}os.prototype.bytesPerElement=4,Go(os,"StructArrayLayout1f4");class as extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=4*e,o=2*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.float32[o+1]=r,e}}as.prototype.bytesPerElement=8,Go(as,"StructArrayLayout2i1f8");class ss extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=4*e;return this.int16[n+0]=t,this.int16[n+1]=i,this.int16[n+2]=r,e}}ss.prototype.bytesPerElement=8,Go(ss,"StructArrayLayout3i8");class ls extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n)}emplace(e,t,i,r,n,o){const a=5*e;return this.int16[a+0]=t,this.int16[a+1]=i,this.int16[a+2]=r,this.int16[a+3]=n,this.int16[a+4]=o,e}}ls.prototype.bytesPerElement=10,Go(ls,"StructArrayLayout5i10");class cs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,r,n,o,a)}emplace(e,t,i,r,n,o,a,s){const l=6*e,c=12*e,u=3*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.uint8[c+4]=r,this.uint8[c+5]=n,this.uint8[c+6]=o,this.uint8[c+7]=a,this.float32[u+2]=s,e}}cs.prototype.bytesPerElement=12,Go(cs,"StructArrayLayout2i4ub1f12");class us extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.float32[n+0]=t,this.float32[n+1]=i,this.float32[n+2]=r,e}}us.prototype.bytesPerElement=12,Go(us,"StructArrayLayout3f12");class hs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n)}emplace(e,t,i,r,n,o){const a=6*e,s=3*e;return this.uint16[a+0]=t,this.uint16[a+1]=i,this.uint16[a+2]=r,this.uint16[a+3]=n,this.float32[s+2]=o,e}}hs.prototype.bytesPerElement=12,Go(hs,"StructArrayLayout4ui1f12");class ds extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=4*e;return this.uint16[o+0]=t,this.uint16[o+1]=i,this.uint16[o+2]=r,this.uint16[o+3]=n,e}}ds.prototype.bytesPerElement=8,Go(ds,"StructArrayLayout4ui8");class ps extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=6*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.int16[s+3]=n,this.int16[s+4]=o,this.int16[s+5]=a,e}}ps.prototype.bytesPerElement=12,Go(ps,"StructArrayLayout6i12");class fs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h){const d=this.length;return this.resize(d+1),this.emplace(d,e,t,i,r,n,o,a,s,l,c,u,h)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,d){const p=12*e;return this.int16[p+0]=t,this.int16[p+1]=i,this.int16[p+2]=r,this.int16[p+3]=n,this.uint16[p+4]=o,this.uint16[p+5]=a,this.uint16[p+6]=s,this.uint16[p+7]=l,this.int16[p+8]=c,this.int16[p+9]=u,this.int16[p+10]=h,this.int16[p+11]=d,e}}fs.prototype.bytesPerElement=24,Go(fs,"StructArrayLayout4i4ui4i24");class ms extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=10*e,l=5*e;return this.int16[s+0]=t,this.int16[s+1]=i,this.int16[s+2]=r,this.float32[l+2]=n,this.float32[l+3]=o,this.float32[l+4]=a,e}}ms.prototype.bytesPerElement=20,Go(ms,"StructArrayLayout3i3f20");class gs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=4*e;return this.float32[o+0]=t,this.float32[o+1]=i,this.float32[o+2]=r,this.float32[o+3]=n,e}}gs.prototype.bytesPerElement=16,Go(gs,"StructArrayLayout4f16");class ys extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint32[1*e+0]=t,e}}ys.prototype.bytesPerElement=4,Go(ys,"StructArrayLayout1ul4");class _s extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.uint16[r+0]=t,this.uint16[r+1]=i,e}}_s.prototype.bytesPerElement=4,Go(_s,"StructArrayLayout2ui4");class vs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,d){const p=this.length;return this.resize(p+1),this.emplace(p,e,t,i,r,n,o,a,s,l,c,u,h,d)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,d,p){const f=20*e,m=10*e;return this.int16[f+0]=t,this.int16[f+1]=i,this.int16[f+2]=r,this.int16[f+3]=n,this.int16[f+4]=o,this.float32[m+3]=a,this.float32[m+4]=s,this.float32[m+5]=l,this.float32[m+6]=c,this.int16[f+14]=u,this.uint32[m+8]=h,this.uint16[f+18]=d,this.uint16[f+19]=p,e}}vs.prototype.bytesPerElement=40,Go(vs,"StructArrayLayout5i4f1i1ul2ui40");class xs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,r,n,o,a)}emplace(e,t,i,r,n,o,a,s){const l=8*e;return this.int16[l+0]=t,this.int16[l+1]=i,this.int16[l+2]=r,this.int16[l+4]=n,this.int16[l+5]=o,this.int16[l+6]=a,this.int16[l+7]=s,e}}xs.prototype.bytesPerElement=16,Go(xs,"StructArrayLayout3i2i2i16");class Cs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n)}emplace(e,t,i,r,n,o){const a=4*e,s=8*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=r,this.int16[s+6]=n,this.int16[s+7]=o,e}}Cs.prototype.bytesPerElement=16,Go(Cs,"StructArrayLayout2f1f2i16");class ws extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=20*e,l=5*e;return this.uint8[s+0]=t,this.uint8[s+1]=i,this.float32[l+1]=r,this.float32[l+2]=n,this.float32[l+3]=o,this.float32[l+4]=a,e}}ws.prototype.bytesPerElement=20,Go(ws,"StructArrayLayout2ub4f20");class bs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i){const r=this.length;return this.resize(r+1),this.emplace(r,e,t,i)}emplace(e,t,i,r){const n=3*e;return this.uint16[n+0]=t,this.uint16[n+1]=i,this.uint16[n+2]=r,e}}bs.prototype.bytesPerElement=6,Go(bs,"StructArrayLayout3ui6");class Ss extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x){const C=this.length;return this.resize(C+1),this.emplace(C,e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C){const w=30*e,b=15*e,S=60*e;return this.int16[w+0]=t,this.int16[w+1]=i,this.int16[w+2]=r,this.float32[b+2]=n,this.float32[b+3]=o,this.uint16[w+8]=a,this.uint16[w+9]=s,this.uint32[b+5]=l,this.uint32[b+6]=c,this.uint32[b+7]=u,this.uint16[w+16]=h,this.uint16[w+17]=d,this.uint16[w+18]=p,this.float32[b+10]=f,this.float32[b+11]=m,this.uint8[S+48]=g,this.uint8[S+49]=y,this.uint8[S+50]=_,this.uint32[b+13]=v,this.int16[w+28]=x,this.uint8[S+58]=C,e}}Ss.prototype.bytesPerElement=60,Go(Ss,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Ls extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C,w,b,S,L,T,M,E,I,A,k,P){const O=this.length;return this.resize(O+1),this.emplace(O,e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C,w,b,S,L,T,M,E,I,A,k,P)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C,w,b,S,L,T,M,E,I,A,k,P,O){const R=20*e,z=40*e,D=80*e;return this.float32[R+0]=t,this.float32[R+1]=i,this.int16[z+4]=r,this.int16[z+5]=n,this.int16[z+6]=o,this.int16[z+7]=a,this.int16[z+8]=s,this.int16[z+9]=l,this.int16[z+10]=c,this.int16[z+11]=u,this.int16[z+12]=h,this.uint16[z+13]=d,this.uint16[z+14]=p,this.uint16[z+15]=f,this.uint16[z+16]=m,this.uint16[z+17]=g,this.uint16[z+18]=y,this.uint16[z+19]=_,this.uint16[z+20]=v,this.uint16[z+21]=x,this.uint16[z+22]=C,this.uint16[z+23]=w,this.uint16[z+24]=b,this.uint16[z+25]=S,this.uint16[z+26]=L,this.uint16[z+27]=T,this.uint32[R+14]=M,this.float32[R+15]=E,this.float32[R+16]=I,this.float32[R+17]=A,this.float32[R+18]=k,this.uint8[D+76]=P,this.uint16[z+39]=O,e}}Ls.prototype.bytesPerElement=80,Go(Ls,"StructArrayLayout2f9i15ui1ul4f1ub1ui80");class Ts extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o){const a=this.length;return this.resize(a+1),this.emplace(a,e,t,i,r,n,o)}emplace(e,t,i,r,n,o,a){const s=6*e;return this.float32[s+0]=t,this.float32[s+1]=i,this.float32[s+2]=r,this.float32[s+3]=n,this.float32[s+4]=o,this.float32[s+5]=a,e}}Ts.prototype.bytesPerElement=24,Go(Ts,"StructArrayLayout6f24");class Ms extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n){const o=this.length;return this.resize(o+1),this.emplace(o,e,t,i,r,n)}emplace(e,t,i,r,n,o){const a=5*e;return this.float32[a+0]=t,this.float32[a+1]=i,this.float32[a+2]=r,this.float32[a+3]=n,this.float32[a+4]=o,e}}Ms.prototype.bytesPerElement=20,Go(Ms,"StructArrayLayout5f20");class Es extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,r,n,o,a)}emplace(e,t,i,r,n,o,a,s){const l=7*e;return this.float32[l+0]=t,this.float32[l+1]=i,this.float32[l+2]=r,this.float32[l+3]=n,this.float32[l+4]=o,this.float32[l+5]=a,this.float32[l+6]=s,e}}Es.prototype.bytesPerElement=28,Go(Es,"StructArrayLayout7f28");class Is extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u){const h=this.length;return this.resize(h+1),this.emplace(h,e,t,i,r,n,o,a,s,l,c,u)}emplace(e,t,i,r,n,o,a,s,l,c,u,h){const d=11*e;return this.float32[d+0]=t,this.float32[d+1]=i,this.float32[d+2]=r,this.float32[d+3]=n,this.float32[d+4]=o,this.float32[d+5]=a,this.float32[d+6]=s,this.float32[d+7]=l,this.float32[d+8]=c,this.float32[d+9]=u,this.float32[d+10]=h,e}}Is.prototype.bytesPerElement=44,Go(Is,"StructArrayLayout11f44");class As extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l){const c=this.length;return this.resize(c+1),this.emplace(c,e,t,i,r,n,o,a,s,l)}emplace(e,t,i,r,n,o,a,s,l,c){const u=9*e;return this.float32[u+0]=t,this.float32[u+1]=i,this.float32[u+2]=r,this.float32[u+3]=n,this.float32[u+4]=o,this.float32[u+5]=a,this.float32[u+6]=s,this.float32[u+7]=l,this.float32[u+8]=c,e}}As.prototype.bytesPerElement=36,Go(As,"StructArrayLayout9f36");class ks extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t){const i=this.length;return this.resize(i+1),this.emplace(i,e,t)}emplace(e,t,i){const r=2*e;return this.float32[r+0]=t,this.float32[r+1]=i,e}}ks.prototype.bytesPerElement=8,Go(ks,"StructArrayLayout2f8");class Ps extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e,t,i,r){const n=this.length;return this.resize(n+1),this.emplace(n,e,t,i,r)}emplace(e,t,i,r,n){const o=6*e;return this.uint32[3*e+0]=t,this.uint16[o+2]=i,this.uint16[o+3]=r,this.uint16[o+4]=n,e}}Ps.prototype.bytesPerElement=12,Go(Ps,"StructArrayLayout1ul3ui12");class Os extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint16[1*e+0]=t,e}}Os.prototype.bytesPerElement=2,Go(Os,"StructArrayLayout1ui2");class Rs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m){const g=this.length;return this.resize(g+1),this.emplace(g,e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m)}emplace(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g){const y=16*e;return this.float32[y+0]=t,this.float32[y+1]=i,this.float32[y+2]=r,this.float32[y+3]=n,this.float32[y+4]=o,this.float32[y+5]=a,this.float32[y+6]=s,this.float32[y+7]=l,this.float32[y+8]=c,this.float32[y+9]=u,this.float32[y+10]=h,this.float32[y+11]=d,this.float32[y+12]=p,this.float32[y+13]=f,this.float32[y+14]=m,this.float32[y+15]=g,e}}Rs.prototype.bytesPerElement=64,Go(Rs,"StructArrayLayout16f64");class zs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(e,t,i,r,n,o,a){const s=this.length;return this.resize(s+1),this.emplace(s,e,t,i,r,n,o,a)}emplace(e,t,i,r,n,o,a,s){const l=10*e,c=5*e;return this.uint16[l+0]=t,this.uint16[l+1]=i,this.uint16[l+2]=r,this.uint16[l+3]=n,this.float32[c+2]=o,this.float32[c+3]=a,this.float32[c+4]=s,e}}zs.prototype.bytesPerElement=20,Go(zs,"StructArrayLayout4ui3f20");class Ds extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.int16[1*e+0]=t,e}}Ds.prototype.bytesPerElement=2,Go(Ds,"StructArrayLayout1i2");class Fs extends $a{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(e){const t=this.length;return this.resize(t+1),this.emplace(t,e)}emplace(e,t){return this.uint8[1*e+0]=t,e}}Fs.prototype.bytesPerElement=1,Go(Fs,"StructArrayLayout1ub1");class Bs extends Qa{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}Bs.prototype.size=40;class Vs extends vs{get(e){return new Bs(this,e)}}Go(Vs,"CollisionBoxArray");class Ns extends Qa{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(e){this._structArray.uint8[this._pos1+49]=e}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(e){this._structArray.uint8[this._pos1+50]=e}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(e){this._structArray.uint32[this._pos4+13]=e}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(e){this._structArray.uint8[this._pos1+58]=e}}Ns.prototype.size=60;class Us extends Ss{get(e){return new Ns(this,e)}}Go(Us,"PlacedSymbolArray");class js extends Qa{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(e){this._structArray.uint32[this._pos4+14]=e}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(e){this._structArray.float32[this._pos4+18]=e}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}get elevationFeatureIndex(){return this._structArray.uint16[this._pos2+39]}}js.prototype.size=80;class Hs extends Ls{get(e){return new js(this,e)}}Go(Hs,"SymbolInstanceArray");class Zs extends os{getoffsetX(e){return this.float32[1*e+0]}}Go(Zs,"GlyphOffsetArray");class Ws extends is{getx(e){return this.int16[2*e+0]}gety(e){return this.int16[2*e+1]}}Go(Ws,"SymbolLineVertexArray");class Gs extends Qa{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}Gs.prototype.size=12;class qs extends Ps{get(e){return new Gs(this,e)}}Go(qs,"FeatureIndexArray");class Xs extends _s{geta_centroid_pos0(e){return this.uint16[2*e+0]}geta_centroid_pos1(e){return this.uint16[2*e+1]}}Go(Xs,"FillExtrusionCentroidArray");class Ys extends Qa{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Ys.prototype.size=6;class Ks extends rs{get(e){return new Ys(this,e)}}Go(Ks,"FillExtrusionWallArray");const Js=es([{name:"a_pos",components:2,type:"Int16"}],4),Qs=es([{name:"a_circle_z_offset",components:1,type:"Float32"}],4),$s=es([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class el{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.segments=e}_prepareSegment(e,t,i,r){let n=this.segments[this.segments.length-1];return e>el.MAX_VERTEX_ARRAY_LENGTH&&Ze("Max vertices per segment is ".concat(el.MAX_VERTEX_ARRAY_LENGTH,": bucket requested ").concat(e)),(!n||n.vertexLength+e>el.MAX_VERTEX_ARRAY_LENGTH||n.sortKey!==r)&&(n={vertexOffset:t,primitiveOffset:i,vertexLength:0,primitiveLength:0},void 0!==r&&(n.sortKey=r),this.segments.push(n)),n}prepareSegment(e,t,i,r){return this._prepareSegment(e,t.length,i.length,r)}get(){return this.segments}destroy(){for(const e of this.segments)for(const t in e.vaos)e.vaos[t].destroy()}static simpleSegment(e,t,i,r){return new el([{vertexOffset:e,primitiveOffset:t,vertexLength:i,primitiveLength:r,vaos:{},sortKey:0}])}}function tl(e,t){return 256*(e=Ae(Math.floor(e),0,255))+Ae(Math.floor(t),0,255)}el.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Go(el,"SegmentVector");const il=es([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),rl=es([{name:"a_pattern_b",components:4,type:"Uint16"}]),nl=es([{name:"a_dash",components:4,type:"Uint16"}]);class ol{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(e,t,i,r){this.ids.push(al(e)),this.positions.push(t,i,r)}eachPosition(e,t){const i=al(e);let r=0,n=this.ids.length-1;for(;r<n;){const e=r+n>>1;this.ids[e]>=i?n=e:r=e+1}for(;this.ids[r]===i;)t(this.positions[3*r],this.positions[3*r+1],this.positions[3*r+2]),r++}static serialize(e,t){const i=new Float64Array(e.ids),r=new Uint32Array(e.positions);return sl(i,r,0,i.length-1),t&&(t.add(i.buffer),t.add(r.buffer)),{ids:i,positions:r}}static deserialize(e){const t=new ol;let i;t.ids=e.ids,t.positions=e.positions;for(const r of t.ids)r!==i&&t.uniqueIds.push(r),i=r;return t.indexed=!0,t}}function al(e){const t=+e;return!isNaN(t)&&Number.MIN_SAFE_INTEGER<=t&&t<=Number.MAX_SAFE_INTEGER?t:Yt(String(e))}function sl(e,t,i,r){for(;i<r;){const n=e[i+r>>1];let o=i-1,a=r+1;for(;;){do{o++}while(e[o]<n);do{a--}while(e[a]>n);if(o>=a)break;ll(e,o,a),ll(t,3*o,3*a),ll(t,3*o+1,3*a+1),ll(t,3*o+2,3*a+2)}a-i<r-a?(sl(e,t,i,a),i=a+1):(sl(e,t,a+1,r),r=a)}}function ll(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}Go(ol,"FeaturePositionMap");class cl{constructor(e){this.gl=e.gl,this.initialized=!1}fetchUniformLocation(e,t){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(e,t),this.initialized=!0),!!this.location}set(e,t,i){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class ul extends cl{constructor(e){super(e),this.current=0}set(e,t,i){this.fetchUniformLocation(e,t)&&this.current!==i&&(this.current=i,this.gl.uniform1i(this.location,i))}}class hl extends cl{constructor(e){super(e),this.current=0}set(e,t,i){this.fetchUniformLocation(e,t)&&this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class dl extends cl{constructor(e){super(e),this.current=[0,0]}set(e,t,i){this.fetchUniformLocation(e,t)&&(i[0]===this.current[0]&&i[1]===this.current[1]||(this.current=i,this.gl.uniform2f(this.location,i[0],i[1])))}}class pl extends cl{constructor(e){super(e),this.current=[0,0,0]}set(e,t,i){this.fetchUniformLocation(e,t)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]||(this.current=i,this.gl.uniform3f(this.location,i[0],i[1],i[2])))}}class fl extends cl{constructor(e){super(e),this.current=[0,0,0,0]}set(e,t,i){this.fetchUniformLocation(e,t)&&(i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3])))}}class ml extends cl{constructor(e){super(e),this.current=oi.transparent.toPremultipliedRenderColor(null)}set(e,t,i){this.fetchUniformLocation(e,t)&&(i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a)))}}const gl=new Float32Array(16);class yl extends cl{constructor(e){super(e),this.current=gl}set(e,t,i){if(this.fetchUniformLocation(e,t)){if(i[12]!==this.current[12]||i[0]!==this.current[0])return this.current=i,void this.gl.uniformMatrix4fv(this.location,!1,i);for(let e=1;e<16;e++)if(i[e]!==this.current[e]){this.current=i,this.gl.uniformMatrix4fv(this.location,!1,i);break}}}}const _l=new Float32Array(9),vl=new Float32Array(4);class xl extends cl{constructor(e){super(e),this.current=vl}set(e,t,i){if(this.fetchUniformLocation(e,t))for(let r=0;r<4;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix2fv(this.location,!1,i);break}}}function Cl(e){return[tl(255*e.r,255*e.g),tl(255*e.b,255*e.a)]}class wl{constructor(e,t,i,r){this.value=e,this.uniformNames=t.map(e=>"u_".concat(e)),this.type=i,this.context=r}setUniform(e,t,i,r,n){const o=r.constantOr(this.value);t.set(e,n,o instanceof oi?o.toPremultipliedRenderColor(this.lutExpression&&"none"===this.lutExpression.value?null:this.context.lut):o)}getBinding(e,t){return"color"===this.type?new ml(e):new hl(e)}}class bl{constructor(e,t){this.uniformNames=t.map(e=>"u_".concat(e)),this.pattern=null,this.patternTransition=null,this.pixelRatio=1}setConstantPatternPositions(e,t){this.pixelRatio=e.pixelRatio||1,this.pattern=e.tl.concat(e.br),this.patternTransition=t?t.tl.concat(t.br):this.pattern}setUniform(e,t,i,r,n){let o=null;"u_pattern"!==n&&"u_dash"!==n||(o=this.pattern),"u_pattern_b"===n&&(o=this.patternTransition),"u_pixel_ratio"===n&&(o=this.pixelRatio),o&&t.set(e,n,o)}getBinding(e,t){return"u_pattern"===t||"u_pattern_b"===t||"u_dash"===t?new fl(e):new hl(e)}}class Sl{constructor(e,t,i,r){this.expression=e,this.type=i,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===i?2:1,offset:0})),this.paintVertexArray=new r}populatePaintArray(e,t,i,r,n,o,a,s){const l=this.paintVertexArray.length,c="composite"===this.expression.kind||"source"===this.expression.kind?this.expression.evaluate(new ya(0,{brightness:o,worldview:s}),t,{},n,r,a):"constant"===this.expression.kind&&this.expression.value,u=!!this.lutExpression&&"none"===("composite"===this.lutExpression.kind||"source"===this.lutExpression.kind?this.lutExpression.evaluate(new ya(0,{brightness:o,worldview:s}),t,{},n,r,a):this.lutExpression.value);this.paintVertexArray.resize(e),this._setPaintValue(l,e,c,u?null:this.context.lut)}updatePaintArray(e,t,i,r,n,o,a,s){const l="composite"===this.expression.kind||"source"===this.expression.kind?this.expression.evaluate({zoom:0,brightness:a,worldview:s},i,r,void 0,n):"constant"===this.expression.kind&&this.expression.value,c=!!this.lutExpression&&"none"===("composite"===this.lutExpression.kind||"source"===this.lutExpression.kind?this.lutExpression.evaluate(new ya(0,{brightness:a,worldview:s}),i,r,void 0,n):this.lutExpression.value);this._setPaintValue(e,t,l,c?null:this.context.lut)}_setPaintValue(e,t,i,r){if("color"===this.type){const n=Cl(i.toPremultipliedRenderColor(r));for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,n[0],n[1])}else{for(let r=e;r<t;r++)this.paintVertexArray.emplace(r,i);this.maxValue=Math.max(this.maxValue,Math.abs(i))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.lutExpression&&"constant"!==this.lutExpression.kind&&(this.lutExpression.isStateDependent||!this.lutExpression.isLightConstant)||"constant"!==this.expression.kind&&(this.expression.isStateDependent||!this.expression.isLightConstant)))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ll{constructor(e,t,i,r,n,o){this.expression=e,this.uniformNames=t.map(e=>"u_".concat(e,"_t")),this.type=i,this.useIntegerZoom=r,this.context=n,this.maxValue=0,this.paintVertexAttributes=t.map(e=>({name:"a_".concat(e),type:"Float32",components:"color"===i?4:2,offset:0})),this.paintVertexArray=new o}populatePaintArray(e,t,i,r,n,o,a,s){const l=this.expression.evaluate(new ya(this.context.zoom,{brightness:o,worldview:s}),t,{},n,r,a),c=this.expression.evaluate(new ya(this.context.zoom+1,{brightness:o,worldview:s}),t,{},n,r,a),u=!!this.lutExpression&&"none"===("composite"===this.lutExpression.kind||"source"===this.lutExpression.kind?this.lutExpression.evaluate(new ya(0,{brightness:o,worldview:s}),t,{},n,r,a):this.lutExpression.value),h=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValue(h,e,l,c,u?null:this.context.lut)}updatePaintArray(e,t,i,r,n,o,a,s){const l=this.expression.evaluate({zoom:this.context.zoom,brightness:a,worldview:s},i,r,void 0,n),c=this.expression.evaluate({zoom:this.context.zoom+1,brightness:a,worldview:s},i,r,void 0,n),u=!!this.lutExpression&&"none"===("composite"===this.lutExpression.kind||"source"===this.lutExpression.kind?this.lutExpression.evaluate(new ya(0,{brightness:a,worldview:s}),i,r,void 0,n):this.lutExpression.value);this._setPaintValue(e,t,l,c,u?null:this.context.lut)}_setPaintValue(e,t,i,r,n){if("color"===this.type){const r=Cl(i.toPremultipliedRenderColor(n)),o=Cl(i.toPremultipliedRenderColor(n));for(let i=e;i<t;i++)this.paintVertexArray.emplace(i,r[0],r[1],o[0],o[1])}else{for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i,r);this.maxValue=Math.max(this.maxValue,Math.abs(i),Math.abs(r))}}upload(e){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(e,t,i,r,n){const o=this.useIntegerZoom?Math.floor(i.zoom):i.zoom,a=Ae(this.expression.interpolationFactor(o,this.context.zoom,this.context.zoom+1),0,1);t.set(e,n,a)}getBinding(e,t){return new hl(e)}}class Tl{constructor(e,t,i,r,n){this.expression=e,this.layerId=n,this.paintVertexAttributes=("array"===i?nl:il).members;for(let o=0;o<t.length;++o);this.paintVertexArray=new r,this.paintTransitionVertexArray=new ds}populatePaintArray(e,t,i,r){const n=this.paintVertexArray.length;this.paintVertexArray.resize(e),this._setPaintValues(n,e,t.patterns&&t.patterns[this.layerId],i)}updatePaintArray(e,t,i,r,n,o,a){this._setPaintValues(e,t,i.patterns&&i.patterns[this.layerId],o)}_setPaintValues(e,t,i,r){if(!r||!i)return;const n=r[i[0]],o=r[i[1]];if(n){if(n){const{tl:i,br:r,pixelRatio:o}=n;for(let n=e;n<t;n++)this.paintVertexArray.emplace(n,i[0],i[1],r[0],r[1],o)}if(o){this.paintTransitionVertexArray.resize(this.paintVertexArray.length);const{tl:i,br:r}=o;for(let n=e;n<t;n++)this.paintTransitionVertexArray.emplace(n,i[0],i[1],r[0],r[1])}}}upload(e){const t=this.expression.isStateDependent||!this.expression.isLightConstant;this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,t)),this.paintTransitionVertexArray&&this.paintTransitionVertexArray.length&&(this.paintTransitionVertexBuffer=e.createVertexBuffer(this.paintTransitionVertexArray,rl.members,t))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy(),this.paintTransitionVertexBuffer&&this.paintTransitionVertexBuffer.destroy()}}class Ml{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.binders={},this._buffers=[],this.context=t;const r=[];for(const n in e.paint._values){const o=e.paint.get(n);if(n.endsWith("-use-theme"))continue;if(!i(n))continue;if(!(o instanceof Sa&&Co(o.property.specification)))continue;const a=Al(n,e.type),s=o.value,l=o.property.specification.type,c=!!o.property.useIntegerZoom,u="line-dasharray"===n||n.endsWith("pattern"),h=e.paint.get("".concat(n,"-use-theme")),d="line-dasharray"===n&&"constant"!==e.layout.get("line-cap").value.kind||h&&"constant"!==h.value.kind;if("constant"!==s.kind||d)if("source"===s.kind||d||u){const t=Ol(n,l,"source");this.binders[n]=u?new Tl(s,a,l,t,e.id):new Sl(s,a,l,t),r.push("/a_".concat(n))}else{const e=Ol(n,l,"composite");this.binders[n]=new Ll(s,a,l,c,t,e),r.push("/z_".concat(n))}else this.binders[n]=u?new bl(s.value,a):new wl(s.value,a,l,t),r.push("/u_".concat(n));h&&(this.binders[n].lutExpression=h.value)}this.cacheKey=r.sort().join("")}getMaxValue(e){const t=this.binders[e];return t instanceof Sl||t instanceof Ll?t.maxValue:0}populatePaintArrays(e,t,i,r,n,o,a,s){for(const l in this.binders){const c=this.binders[l];c.context=this.context,(c instanceof Sl||c instanceof Ll||c instanceof Tl)&&c.populatePaintArray(e,t,i,r,n,o,a,s)}}setConstantPatternPositions(e,t){for(const i in this.binders){const r=this.binders[i];r instanceof bl&&r.setConstantPatternPositions(e,t)}}getPatternTransitionVertexBuffer(e){const t=this.binders[e];return t instanceof Tl?t.paintTransitionVertexBuffer:null}updatePaintArrays(e,t,i,r,n,o,a,s,l,c){let u=!1;const h=Object.keys(e),d=0!==h.length&&!s,p=d?h:t.uniqueIds;this.context.lut=n.lut;for(const f in this.binders){const s=this.binders[f];if(s.context=this.context,(s instanceof Sl||s instanceof Ll||s instanceof Tl)&&s.expression&&s.expression.kind&&"constant"!==s.expression.kind&&(!0===s.expression.isStateDependent||!1===s.expression.isLightConstant)){const h=n.paint.get(f);s.expression=h.value;for(const i of p){const n=e[i.toString()];t.eachPosition(i,(e,t,i)=>{const u=r.feature(e);s.updatePaintArray(t,i,u,n,o,a,l,c)})}if(!d)for(const t of i.uniqueIds){const n=e[t.toString()];i.eachPosition(t,(e,t,i)=>{const u=r.feature(e);s.updatePaintArray(t,i,u,n,o,a,l,c)})}u=!0}}return u}defines(){const e=[];for(const t in this.binders){const i=this.binders[t];(i instanceof wl||i instanceof bl)&&e.push(...i.uniformNames.map(e=>"#define HAS_UNIFORM_".concat(e)))}return e}getBinderAttributes(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof Sl||i instanceof Ll||i instanceof Tl)for(let t=0;t<i.paintVertexAttributes.length;t++)e.push(i.paintVertexAttributes[t].name);if(i instanceof Tl)for(let t=0;t<rl.members.length;t++)e.push(rl.members[t].name)}return e}getBinderUniforms(){const e=[];for(const t in this.binders){const i=this.binders[t];if(i instanceof wl||i instanceof bl||i instanceof Ll)for(const t of i.uniformNames)e.push(t)}return e}getPaintVertexBuffers(){return this._buffers}getUniforms(e){const t=[];for(const i in this.binders){const r=this.binders[i];if(r instanceof wl||r instanceof bl||r instanceof Ll)for(const n of r.uniformNames)t.push({name:n,property:i,binding:r.getBinding(e,n)})}return t}setUniforms(e,t,i,r,n){for(const{name:o,property:a,binding:s}of i)this.binders[a].setUniform(e,s,n,r.get(a),o)}updatePaintBuffers(){this._buffers=[];for(const e in this.binders){const t=this.binders[e];(t instanceof Sl||t instanceof Ll||t instanceof Tl)&&t.paintVertexBuffer&&this._buffers.push(t.paintVertexBuffer),t instanceof Tl&&t.paintTransitionVertexBuffer&&this._buffers.push(t.paintTransitionVertexBuffer)}}upload(e){for(const t in this.binders){const i=this.binders[t];(i instanceof Sl||i instanceof Ll||i instanceof Tl)&&i.upload(e)}this.updatePaintBuffers()}destroy(){for(const e in this.binders){const t=this.binders[e];(t instanceof Sl||t instanceof Ll||t instanceof Tl)&&t.destroy()}}}class El{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:()=>!0;this.programConfigurations={};for(const r of e)this.programConfigurations[r.id]=new Ml(r,t,i);this.needsUpload=!1,this._featureMap=new ol,this._featureMapWithoutIds=new ol,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(e,t,i,r,n,o,a,s,l){for(const c in this.programConfigurations)this.programConfigurations[c].populatePaintArrays(e,t,r,n,o,a,s,l);void 0!==t.id?this._featureMap.add(t.id,i,this._bufferOffset,e):(this._featureMapWithoutIds.add(this._idlessCounter,i,this._bufferOffset,e),this._idlessCounter+=1),this._bufferOffset=e,this.needsUpload=!0}updatePaintArrays(e,t,i,r,n,o,a,s){for(const l of i)this.needsUpload=this.programConfigurations[l.id].updatePaintArrays(e,this._featureMap,this._featureMapWithoutIds,t,l,r,n,o,a||0,s)||this.needsUpload}get(e){return this.programConfigurations[e]}upload(e){if(this.needsUpload){for(const t in this.programConfigurations)this.programConfigurations[t].upload(e);this.needsUpload=!1}}destroy(){for(const e in this.programConfigurations)this.programConfigurations[e].destroy()}}const Il={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio","pattern_b"],"fill-pattern":["pattern","pixel_ratio","pattern_b"],"fill-extrusion-pattern":["pattern","pixel_ratio","pattern_b"],"line-dasharray":["dash"],"fill-bridge-guard-rail-color":["structure_color"],"fill-tunnel-structure-color":["structure_color"]};function Al(e,t){return Il[e]||[e.replace("".concat(t,"-"),"").replace(/-/g,"_")]}const kl={"line-pattern":{source:hs,composite:hs},"fill-pattern":{source:hs,composite:hs},"fill-extrusion-pattern":{source:hs,composite:hs},"line-dasharray":{source:ds,composite:ds}},Pl={color:{source:ks,composite:gs},number:{source:os,composite:ks}};function Ol(e,t,i){const r=kl[e];return r&&r[i]||Pl[t][i]}Go(wl,"ConstantBinder"),Go(bl,"PatternConstantBinder"),Go(Sl,"SourceExpressionBinder"),Go(Tl,"PatternCompositeBinder"),Go(Ll,"CompositeExpressionBinder"),Go(Ml,"ProgramConfiguration",{omit:["_buffers"]}),Go(El,"ProgramConfigurationSet");const Rl=Or/Math.PI/2,zl=5,Dl=6,Fl=16383,Bl=64,Vl=[Bl,32,16],Nl=-Rl,Ul=Rl;function jl(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rl;return i=Se(i),[e*Math.sin(i)*r,-t*r,e*Math.cos(i)*r]}function Hl(e,t,i){return jl(Math.cos(Se(e)),Math.sin(Se(e)),t,i)}const Zl=6371008.8,Wl=2*Math.PI*Zl;class Gl{constructor(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: (".concat(e,", ").concat(t,")"));if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Gl(Pe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return"LngLat(".concat(this.lng,", ").concat(this.lat,")")}distanceTo(e){const t=Math.PI/180,i=this.lat*t,r=e.lat*t,n=Math.sin(i)*Math.sin(r)+Math.cos(i)*Math.cos(r)*Math.cos((e.lng-this.lng)*t);return Zl*Math.acos(Math.min(n,1))}toBounds(){const e=360*(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/40075017,t=e/Math.cos(Math.PI/180*this.lat);return new ql({lng:this.lng-t,lat:this.lat-e},{lng:this.lng+t,lat:this.lat+e})}toEcef(e){return Hl(this.lat,this.lng,Rl+e*Rl/Zl)}static convert(e){if(e instanceof Gl)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new Gl(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new Gl(Number("lng"in e?e.lng:e.lon),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class ql{constructor(e,t){if(e)if(t)this.setSouthWest(e).setNorthEast(t);else if(4===e.length){const t=e;this.setSouthWest([t[0],t[1]]).setNorthEast([t[2],t[3]])}else{const t=e;this.setSouthWest(t[0]).setNorthEast(t[1])}}setNorthEast(e){return this._ne=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}setSouthWest(e){return this._sw=e instanceof Gl?new Gl(e.lng,e.lat):Gl.convert(e),this}extend(e){const t=this._sw,i=this._ne;let r,n;if(e instanceof Gl)r=e,n=e;else{if(!(e instanceof ql))return Array.isArray(e)?4===e.length||e.every(Array.isArray)?this.extend(ql.convert(e)):this.extend(Gl.convert(e)):"object"==typeof e&&null!==e&&e.hasOwnProperty("lat")&&(e.hasOwnProperty("lon")||e.hasOwnProperty("lng"))?this.extend(Gl.convert(e)):this;if(r=e._sw,n=e._ne,!r||!n)return this}return t||i?(t.lng=Math.min(r.lng,t.lng),t.lat=Math.min(r.lat,t.lat),i.lng=Math.max(n.lng,i.lng),i.lat=Math.max(n.lat,i.lat)):(this._sw=new Gl(r.lng,r.lat),this._ne=new Gl(n.lng,n.lat)),this}getCenter(){return new Gl((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Gl(this.getWest(),this.getNorth())}getSouthEast(){return new Gl(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return"LngLatBounds(".concat(this._sw.toString(),", ").concat(this._ne.toString(),")")}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:t,lat:i}=Gl.convert(e);let r=this._sw.lng<=t&&t<=this._ne.lng;return this._sw.lng>this._ne.lng&&(r=this._sw.lng>=t&&t>=this._ne.lng),this._sw.lat<=i&&i<=this._ne.lat&&r}static convert(e){if(e)return e instanceof ql?e:new ql(e)}}const Xl=0,Yl=25.5;function Kl(e){return Wl*Math.cos(e*Math.PI/180)}function Jl(e){return(180+e)/360}function Ql(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))/360}function $l(e,t){return e/Kl(t)}function ec(e){return 360*e-180}function tc(e){return 360/Math.PI*Math.atan(Math.exp((180-360*e)*Math.PI/180))-90}function ic(e,t){return e*Kl(tc(t))}const rc=85.051129;function nc(e){return Math.cos(Se(Ae(e,-85.051129,rc)))}function oc(e,t){const i=Ae(t,Xl,Yl),r=Math.pow(2,i);return nc(e)*Wl/(512*r)}function ac(e){return 1/Math.cos(e*Math.PI/180)}function sc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Math.exp(Math.PI*(1-(e.y+t/Or)/(1<<e.z)*2));return 80150034*i/(i*i+1)/Or/(1<<e.z)}class lc{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.x=+e,this.y=+t,this.z=+i}static fromLngLat(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=Gl.convert(e);return new lc(Jl(i.lng),Ql(i.lat),$l(t,i.lat))}toLngLat(){return new Gl(ec(this.x),tc(this.y))}toAltitude(){return ic(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/Wl*ac(tc(this.y))}}function cc(e,t,i,r,n,o,a,s,l){const c=(t+r)/2,u=(i+n)/2,h=new xe(c,u);s(h),function(e,t,i,r,n,o){const a=i-n,s=r-o;return Math.abs((r-t)*a-(i-e)*s)/Math.hypot(a,s)}(h.x,h.y,o.x,o.y,a.x,a.y)>=l?(cc(e,t,i,c,u,o,h,s,l),cc(e,c,u,r,n,h,a,s,l)):e.push(a)}function uc(e,t,i){let r=e[0],n=r.x,o=r.y;t(r);const a=[r];for(let s=1;s<e.length;s++){const l=e[s],{x:c,y:u}=l;t(l),cc(a,n,o,c,u,r,l,t,i),n=c,o=u,r=l}return a}function hc(e,t,i,r){if(r(t,i)){const n=t.add(i)._mult(.5);hc(e,t,n,r),hc(e,n,i,r)}else e.push(i)}function dc(e,t){let i=e[0];const r=[i];for(let n=1;n<e.length;n++){const o=e[n];hc(r,i,o,t),i=o}return r}const pc=Math.pow(2,14)-1,fc=-pc-1;function mc(e,t){const i=Math.round(e.x*t),r=Math.round(e.y*t);return e.x=Ae(i,fc,pc),e.y=Ae(r,fc,pc),(i<e.x||i>e.x+1||r<e.y||r>e.y+1)&&Ze("Geometry exceeds allowed extent, reduce your vector tile buffer size"),e}function gc(e,t,i){const r=e.loadGeometry(),n=e.extent,o=Or/n;if(t&&i&&i.projection.isReprojectedInTileSpace){const o=1<<t.z,{scale:a,x:s,y:l,projection:c}=i,u=e=>{const i=ec((t.x+e.x/n)/o),r=tc((t.y+e.y/n)/o),u=c.project(i,r);e.x=(u.x*a-s)*n,e.y=(u.y*a-l)*n};for(let t=0;t<r.length;t++)if(1!==e.type)r[t]=uc(r[t],u,1);else{const e=[];for(const i of r[t])i.x<0||i.x>=n||i.y<0||i.y>=n||(u(i),e.push(i));r[t]=e}}for(const a of r)for(const e of a)mc(e,o);return r}function yc(e,t){return{type:e.type,id:e.id,properties:e.properties,geometry:t?gc(e):[]}}var _c,vc,xc,Cc,wc,bc,Sc,Lc={};function Tc(){if(vc)return _c;vc=1;var e=ve();function t(e,t,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=o,e.readFields(i,this,t)}function i(e,t,i){1==e?t.id=i.readVarint():2==e?function(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var r=t._keys[e.readVarint()],n=t._values[e.readVarint()];t.properties[r]=n}}(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function r(e){for(var t,i,r=0,n=0,o=e.length,a=o-1;n<o;a=n++)r+=((i=e[a]).x-(t=e[n]).x)*(t.y+i.y);return r}return _c=t,t.types=["Unknown","Point","LineString","Polygon"],t.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var i,r=t.readVarint()+t.pos,n=1,o=0,a=0,s=0,l=[];t.pos<r;){if(o<=0){var c=t.readVarint();n=7&c,o=c>>3}if(o--,1===n||2===n)a+=t.readSVarint(),s+=t.readSVarint(),1===n&&(i&&l.push(i),i=[]),i.push(new e(a,s));else{if(7!==n)throw new Error("unknown command "+n);i&&i.push(i[0].clone())}}return i&&l.push(i),l},t.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,r=0,n=0,o=0,a=1/0,s=-1/0,l=1/0,c=-1/0;e.pos<t;){if(r<=0){var u=e.readVarint();i=7&u,r=u>>3}if(r--,1===i||2===i)(n+=e.readSVarint())<a&&(a=n),n>s&&(s=n),(o+=e.readSVarint())<l&&(l=o),o>c&&(c=o);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,c]},t.prototype.toGeoJSON=function(e,i,n){var o,a,s=this.extent*Math.pow(2,n),l=this.extent*e,c=this.extent*i,u=this.loadGeometry(),h=t.types[this.type];function d(e){for(var t=0;t<e.length;t++){var i=e[t];e[t]=[360*(i.x+l)/s-180,360/Math.PI*Math.atan(Math.exp((180-360*(i.y+c)/s)*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(o=0;o<u.length;o++)p[o]=u[o][0];d(u=p);break;case 2:for(o=0;o<u.length;o++)d(u[o]);break;case 3:for(u=function(e){var t=e.length;if(t<=1)return[e];for(var i,n,o=[],a=0;a<t;a++){var s=r(e[a]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(i&&o.push(i),i=[e[a]]):i.push(e[a]))}return i&&o.push(i),o}(u),o=0;o<u.length;o++)for(a=0;a<u[o].length;a++)d(u[o][a])}1===u.length?u=u[0]:h="Multi"+h;var f={type:"Feature",geometry:{type:h,coordinates:u},properties:this.properties};return"id"in this&&(f.id=this.id),f},_c}function Mc(){if(Cc)return xc;Cc=1;var e=Tc();function t(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(function(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(i))}return xc=t,t.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var i=this._pbf.readVarint()+this._pbf.pos;return new e(this._pbf,i,this.extent,this._keys,this._values)},xc}function Ec(){return Sc||(Sc=1,Lc.VectorTile=function(){if(bc)return wc;bc=1;var e=Mc();function t(t,i,r){if(3===t){var n=new e(r,r.readVarint()+r.pos);n.length&&(i[n.name]=n)}}return wc=function(e,i){this.layers=e.readFields(t,{},i)},wc}(),Lc.VectorTileFeature=Tc(),Lc.VectorTileLayer=Mc()),Lc}var Ic=Ec();const Ac="3d_elevation_id",kc="level";class Pc{constructor(){this._valid=!1}reset(e){return this.feature=e,this._valid=!0,this._geometry=e.loadGeometry(),0!==this._geometry.length&&0!==this._geometry[0].length||(this._valid=!1),this}geometry(e,t){return this._valid&&e(t(this._geometry)),this}require(e,t,i){return this.get(e,!0,t,i)}optional(e,t,i){return this.get(e,!1,t,i)}success(){return this._valid}get(e,t,i,r){const n=this.feature.properties.hasOwnProperty(e)?+this.feature.properties[e]:void 0;return this._valid&&void 0!==n&&!Number.isNaN(n)?i(r?r(n):n):t&&(this._valid=!1),this}}class Oc{constructor(e,t){this.featureFunc=e,this.vertexFunc=t}parseFeature(e,t,i){return this.featureFunc(e,t,i)}parseVertex(e,t,i){return this.vertexFunc(e,t,i)}}const Rc=new Oc((e,t,i)=>e.reset(t).require(Ac,e=>{i.id=e}).optional("fixed_height_relative",e=>{i.constantHeight=e},Dc.decodeRelativeHeight).geometry(e=>{i.bounds=e},hr).success(),(e,t,i)=>e.reset(t).require(Ac,e=>{i.id=e}).require("elevation_idx",e=>{i.idx=e}).require("extent",e=>{i.extent=e}).require("height_relative",e=>{i.height=e},Dc.decodeRelativeHeight).geometry(e=>{i.position=e},Dc.getPoint).success()),zc=new Oc((e,t,i)=>e.reset(t).require(Ac,e=>{i.id=e}).optional("fixed_height",e=>{i.constantHeight=e},Dc.decodeMetricHeight).geometry(e=>{i.bounds=e},hr).success(),(e,t,i)=>e.reset(t).require(Ac,e=>{i.id=e}).require("elevation_idx",e=>{i.idx=e}).require("extent",e=>{i.extent=e}).require("height",e=>{i.height=e},Dc.decodeMetricHeight).geometry(e=>{i.position=e},Dc.getPoint).success());class Dc{static getPoint(e){return se(e[0][0].x,e[0][0].y)}static decodeRelativeHeight(e){return 1e-4*e*5}static decodeMetricHeight(e){return 1e-4*e}static parse(e){const t=[],i=[],r=e.length,n=new Pc;for(let a=0;a<r;a++){const r=e.feature(a),s=r.properties.hasOwnProperty("version")?String(r.properties.version):void 0,l=(o=s)?"1.0.1"===o?zc:void 0:Rc;if(void 0===l){Ze("Unknown elevation feature version number ".concat(s||"(unknown)"));continue}const c=r.properties.hasOwnProperty("type")?r.properties.type:void 0;if(c)if("Point"===Ic.VectorTileFeature.types[r.type]&&"curve_point"===c){const e={};l.parseVertex(n,r,e)&&t.push(e)}else if("Polygon"===Ic.VectorTileFeature.types[r.type]&&"curve_meta"===c){const e={};l.parseFeature(n,r,e)&&i.push(e)}}var o;return{vertices:t,features:i}}}class Fc{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,i){const r=pe(t,this.dir);if(Math.abs(r)<1e-6)return!1;const n=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1])/r;return i[0]=this.pos[0]+this.dir[0]*n,i[1]=this.pos[1]+this.dir[1]*n,!0}}class Bc{constructor(e,t){this.pos=e,this.dir=t}intersectsPlane(e,t,i){const r=z(t,this.dir);if(Math.abs(r)<1e-6)return!1;const n=((e[0]-this.pos[0])*t[0]+(e[1]-this.pos[1])*t[1]+(e[2]-this.pos[2])*t[2])/r;return i[0]=this.pos[0]+this.dir[0]*n,i[1]=this.pos[1]+this.dir[1]*n,i[2]=this.pos[2]+this.dir[2]*n,!0}closestPointOnSphere(e,i,r){if(function(e,i){var r=e[0],n=e[1],o=e[2],a=i[0],s=i[1],l=i[2];return Math.abs(r-a)<=t*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-s)<=t*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(o-l)<=t*Math.max(1,Math.abs(o),Math.abs(l))}(this.pos,e)||0===i)return r[0]=r[1]=r[2]=0,!1;const[n,o,a]=this.dir,s=this.pos[0]-e[0],l=this.pos[1]-e[1],c=this.pos[2]-e[2],u=n*n+o*o+a*a,h=2*(s*n+l*o+c*a),d=h*h-4*u*(s*s+l*l+c*c-i*i);if(d<0){const e=Math.max(-h/2,0),t=s+n*e,u=l+o*e,d=c+a*e,p=Math.hypot(t,u,d);return r[0]=t*i/p,r[1]=u*i/p,r[2]=d*i/p,!1}{const e=(-h-Math.sqrt(d))/(2*u);if(e<0){const e=Math.hypot(s,l,c);return r[0]=s*i/e,r[1]=l*i/e,r[2]=c*i/e,!1}return r[0]=s+n*e,r[1]=l+o*e,r[2]=c+a*e,!0}}}class Vc{constructor(e,t,i,r,n){this.TL=e,this.TR=t,this.BR=i,this.BL=r,this.horizon=n}static fromInvProjectionMatrix(e,t,i){const r=[-1,1,1],n=[1,1,1],o=[1,-1,1],a=[-1,-1,1],s=B(r,r,e),l=B(n,n,e),c=B(o,o,e),u=B(a,a,e);return new Vc(s,l,c,u,t/i)}}function Nc(e,t,i){let r=1/0,n=-1/0;const o=[];for(const a of e){j(o,a,t);const e=z(o,i);r=Math.min(r,e),n=Math.max(n,e)}return[r,n]}function Uc(e,t){let i=!0;for(let r=0;r<e.planes.length;r++){const n=e.planes[r];let o=0;for(let e=0;e<t.length;e++)o+=z(n,t[e])+n[3]>=0;if(0===o)return 0;o!==t.length&&(i=!1)}return i?2:1}function jc(e,t){for(const i of e.projections){const r=Nc(t,e.points[0],i.axis);if(i.projection[1]<r[0]||i.projection[0]>r[1])return 0}return 1}function Hc(e,t){let i=0;const r=[0,0,0,0];for(let a=0;a<e.length;a++)r[0]=e[a][0],r[1]=e[a][1],r[2]=e[a][2],r[3]=1,(n=r)[0]*(o=t)[0]+n[1]*o[1]+n[2]*o[2]+n[3]*o[3]>=0&&i++;var n,o;return i}class Zc{constructor(e,t){this.points=e||new Array(8).fill([0,0,0]),this.planes=t||new Array(6).fill([0,0,0,0]),this.bounds=Wc.fromPoints(this.points),this.projections=[],this.frustumEdges=[j([],this.points[2],this.points[3]),j([],this.points[0],this.points[3]),j([],this.points[4],this.points[0]),j([],this.points[5],this.points[1]),j([],this.points[6],this.points[2]),j([],this.points[7],this.points[3])];for(const i of this.frustumEdges){const e=[0,-i[2],i[1]],t=[i[2],0,-i[0]];this.projections.push({axis:e,projection:Nc(this.points,this.points[0],e)}),this.projections.push({axis:t,projection:Nc(this.points,this.points[0],t)})}}static fromInvProjectionMatrix(e,t,i,r){const n=Math.pow(2,i),o=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(i=>{const o=X([],i,e),a=1/o[3]/t*n;return(s=o)[0]=(l=o)[0]*(c=[a,a,r?1/o[3]:a,a])[0],s[1]=l[1]*c[1],s[2]=l[2]*c[2],s[3]=l[3]*c[3],s;var s,l,c}),a=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(e=>{const t=R([],D([],j([],o[e[0]],o[e[1]]),j([],o[e[2]],o[e[1]]))),i=-z(t,o[e[1]]);return t.concat(i)}),s=[];for(let l=0;l<o.length;l++)s.push([o[l][0],o[l][1],o[l][2]]);return new Zc(s,a)}intersectsPrecise(e,t,i){for(let r=0;r<t.length;r++)if(!Hc(e,t[r]))return 0;for(let r=0;r<this.planes.length;r++)if(!Hc(e,this.planes[r]))return 0;for(const r of i)for(const t of this.frustumEdges){const i=D([],r,t),n=w(i);if(0===n)continue;I(i,i,1/n);const o=Nc(this.points,this.points[0],i),a=Nc(e,this.points[0],i);if(o[0]>a[1]||a[0]>o[1])return 0}return 1}containsPoint(e){for(const t of this.planes){const i=t[3];if(z([t[0],t[1],t[2]],e)+i<0)return!1}return!0}}class Wc{static fromPoints(e){const t=[1/0,1/0,1/0],i=[-1/0,-1/0,-1/0];for(const r of e)M(t,t,r),E(i,i,r);return new Wc(t,i)}static fromTileIdAndHeight(e,t,i){const r=1<<e.canonical.z,n=e.canonical.x,o=e.canonical.y;return new Wc([n/r,o/r,t],[(n+1)/r,(o+1)/r,i])}static applyTransform(e,t){const i=e.getCorners();for(let r=0;r<i.length;++r)B(i[r],i[r],t);return Wc.fromPoints(i)}static applyTransformFast(e,t){const i=[t[12],t[13],t[14]],r=[...i];for(let n=0;n<3;n++)for(let o=0;o<3;o++){const a=t[4*o+n],s=a*e.min[o],l=a*e.max[o];i[n]+=Math.min(s,l),r[n]+=Math.max(s,l)}return new Wc(i,r)}static projectAabbCorners(e,t){const i=e.getCorners();for(let r=0;r<i.length;++r)B(i[r],i[r],t);return i}constructor(e,t){this.min=e,this.max=t,this.center=I([],S([],this.min,this.max),.5)}quadrant(e){const t=[e%2==0,e<2],i=C(this.min),r=C(this.max);for(let n=0;n<t.length;n++)i[n]=t[n]?this.min[n]:this.center[n],r[n]=t[n]?this.center[n]:this.max[n];return r[2]=this.max[2],new Wc(i,r)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}distanceZ(e){return Math.max(Math.min(this.max[2],e[2]),this.min[2])-e[2]}getCorners(){const e=this.min,t=this.max;return[[e[0],e[1],e[2]],[t[0],e[1],e[2]],[t[0],t[1],e[2]],[e[0],t[1],e[2]],[e[0],e[1],t[2]],[t[0],e[1],t[2]],[t[0],t[1],t[2]],[e[0],t[1],t[2]]]}intersects(e){return this.intersectsAabb(e.bounds)?Uc(e,this.getCorners()):0}intersectsFlat(e){return this.intersectsAabb(e.bounds)?Uc(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(e,t){return t||this.intersects(e)?jc(e,this.getCorners()):0}intersectsPreciseFlat(e,t){return t||this.intersectsFlat(e)?jc(e,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(e){for(let t=0;t<3;++t)if(this.min[t]>e.max[t]||e.min[t]>this.max[t])return!1;return!0}intersectsAabbXY(e){return!(this.min[0]>e.max[0]||e.min[0]>this.max[0]||this.min[1]>e.max[1]||e.min[1]>this.max[1])}encapsulate(e){for(let t=0;t<3;t++)this.min[t]=Math.min(this.min[t],e.min[t]),this.max[t]=Math.max(this.max[t],e.max[t])}encapsulatePoint(e){for(let t=0;t<3;t++)this.min[t]=Math.min(this.min[t],e[t]),this.max[t]=Math.max(this.max[t],e[t])}closestPoint(e){return[Math.max(Math.min(this.max[0],e[0]),this.min[0]),Math.max(Math.min(this.max[1],e[1]),this.min[1]),Math.max(Math.min(this.max[2],e[2]),this.min[2])]}}Go(Wc,"Aabb");class Gc{constructor(e,t){this.feature=e,this.metersToTile=t,this.index=0}get(){const e=this.feature.vertices[this.index],t=this.feature.vertexProps[this.index].dir,i=t[1],r=-t[0],n=(e.extent+1)*this.metersToTile;return[new xe(Math.trunc(e.position[0]+i*n),Math.trunc(e.position[1]+r*n)),new xe(Math.trunc(e.position[0]-i*n),Math.trunc(e.position[1]-r*n))]}next(){this.index++}valid(){return this.index<this.feature.vertices.length}}class qc{constructor(e,t,i,r,n,o){if(this.vertices=new Array,this.vertexProps=new Array,this.edges=new Array,this.edgeProps=new Array,this.id=e,this.heightRange={min:i,max:i},this.safeArea=t,this.constantHeight=i,null==this.constantHeight&&(null!=this.constantHeight||0!==r.length)){this.vertices=r,this.edges=n,this.edges=this.edges.filter(e=>{return e.a<this.vertices.length&&e.b<this.vertices.length&&!((t=this.vertices[e.a].position)[0]===(i=this.vertices[e.b].position)[0]&&t[1]===i[1]);var t,i}),this.heightRange={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};for(const e of this.vertices)this.vertexProps.push({dir:se(0,0)}),this.heightRange.min=Math.min(this.heightRange.min,e.height),this.heightRange.max=Math.max(this.heightRange.max,e.height);for(const e of this.edges){const t=this.vertices[e.a].position,i=this.vertices[e.b].position,r=ce(ae(),i,t),n=he(r),o=ue(ae(),r,1/n);this.edgeProps.push({vec:r,dir:o,len:n});const a=this.vertexProps[e.a].dir,s=this.vertexProps[e.b].dir;le(a,a,o),le(s,s,o)}for(const e of this.vertexProps)0===e.dir[0]&&0===e.dir[1]||de(e.dir,e.dir);this.tessellate(o)}}pointElevation(e){if(null!=this.constantHeight)return this.constantHeight;const t=this.getClosestEdge(e);if(null==t)return 0;const[i,r]=t;return ci(this.vertices[this.edges[i].a].height,this.vertices[this.edges[i].b].height,r)}computeSlopeNormal(e,t){const i=this.getClosestEdge(e);if(!i)return b(0,0,1);const r=i[0],n=this.edges[r],o=this.edgeProps[r].vec,a=b(o[0],o[1],(this.vertices[n.b].height-this.vertices[n.a].height)*t),s=b(a[1],-a[0],0);D(s,s,a);const l=w(s);return l>0?I(s,s,1/l):b(0,0,1)}getSafeArea(){return this.safeArea}isTunnel(){return this.heightRange.max<=-5}getClosestEdge(e){if(0===this.edges.length)return;let t=0,i=Number.POSITIVE_INFINITY,r=0;const n=se(e.x,e.y);for(let o=0;o<this.edges.length;o++){const e=this.edges[o],a=this.edgeProps[o].dir,s=new Fc(n,this.edgeProps[o].dir),l=this.vertices[e.a].position,c=this.vertices[e.b].position,u=ae(),h=ae(),d=s.intersectsPlane(l,this.vertexProps[e.a].dir,u),p=s.intersectsPlane(c,this.vertexProps[e.b].dir,h);if(!d||!p)continue;const f=ce(ae(),h,u),m=ce(ae(),n,u),g=pe(f,f),y=g>0?pe(m,f)/g:0,_=Ae(y,0,1),v=Math.abs((y-_)*this.edgeProps[o].len),x=ce(ae(),n,l),C=v+Math.abs(pe(x,se(a[1],-a[0])));C<i&&(t=o,i=C,r=_)}return[t,r]}tessellate(e){for(let t=this.edges.length-1;t>=0;--t){const i=this.edges[t].a,r=this.edges[t].b,{position:n,height:o,extent:a}=this.vertices[i],{position:s,height:l,extent:c}=this.vertices[r],u=this.vertexProps[i].dir,h=this.vertexProps[r].dir,d=b(n[0]/e,n[1]/e,o),p=b(s[0]/e,s[1]/e,l),f=b(u[1],-u[0],0);I(f,f,a);const m=b(h[1],-h[0],0);if(I(m,m,c),this.distSqLines(b(d[0]+.5*f[0],d[1]+.5*f[1],d[2]+.5*f[2]),b(p[0]-.5*m[0],p[1]-.5*m[1],p[2]-.5*m[2]),b(d[0]-.5*f[0],d[1]-.5*f[1],d[2]-.5*f[2]),b(p[0]+.5*m[0],p[1]+.5*m[1],p[2]+.5*m[2]))<=.0025000000000000005)continue;const g=this.vertices.length,y=le(ae(),n,s);this.vertices.push({position:ue(y,y,.5),height:.5*(o+l),extent:.5*(a+c)});const _=le(ae(),u,h);this.vertexProps.push({dir:de(_,_)}),this.edges.splice(t,1),this.edgeProps.splice(t,1),this.edges.push({a:i,b:g}),this.edges.push({a:g,b:r});const v=ce(ae(),this.vertices[g].position,n),x=he(v),C={vec:v,dir:ue(ae(),v,1/x),len:x};this.edgeProps.push(C),this.edgeProps.push(C)}}distSqLines(e,t,i,r){const n=L(x(),t,e),o=L(x(),r,i),a=L(x(),e,i),s=z(n,n),l=z(n,o),c=z(n,a),u=z(o,o),h=z(o,a),d=s*u-l*l;if(0===d){const t=z(a,o)/z(o,o);return k(F(x(),i,r,t),e)}const p=(l*h-c*u)/d,f=(s*h-l*c)/d;return k(F(x(),e,t,p),F(x(),i,r,f))}}class Xc{static parseFrom(e,t){const i=Dc.parse(e);if(!i)return[];let{vertices:r,features:n}=i;const o=1/sc(t);n.sort((e,t)=>e.id-t.id),r.sort((e,t)=>e.id-t.id||e.idx-t.idx),r=r.filter((e,t,i)=>t===i.findIndex(t=>t.id===e.id&&t.idx===e.idx));const a=new Array;let s=0;const l=r.length;for(const c of n){if(c.constantHeight){a.push(new qc(c.id,c.bounds,c.constantHeight));continue}for(;s!==l&&r[s].id<c.id;)s++;if(s===l||r[s].id!==c.id)continue;const e=new Array,t=new Array,i=s;for(;s!==l&&r[s].id===c.id;){const n=r[s];if(e.push({position:n.position,height:n.height,extent:n.extent}),s!==i&&r[s-1].idx===n.idx-1){const e=s-i;t.push({a:e-1,b:e})}s++}a.push(new qc(c.id,c.bounds,void 0,e,t,o))}return a}static getElevationFeature(e,t){if(!t)return;const i=+e.properties[Ac];return Number.isNaN(i)?void 0:t.find(e=>e.id===i)}}class Yc{constructor(e,t){this.zScale=1,this.xOffset=0,this.yOffset=0,e.equals(t)||(this.zScale=Math.pow(2,t.z-e.z),this.xOffset=(e.x*this.zScale-t.x)*Or,this.yOffset=(e.y*this.zScale-t.y)*Or)}constantElevation(e,t){if(null!=e.constantHeight)return this.computeBiasedHeight(e.constantHeight,t)}pointElevation(e,t,i){const r=this.constantElevation(t,i);return null!=r?r:(e.x=e.x*this.zScale+this.xOffset,e.y=e.y*this.zScale+this.yOffset,this.computeBiasedHeight(t.pointElevation(e),i))}computeBiasedHeight(e,t){return t<=0?e:e+t*ke(0,t,e>=0?e:Math.abs(.5*e))}}Go(qc,"ElevationFeature");class Kc{constructor(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.projection=e.projection,this.layoutVertexArray=new is,this.indexArray=new bs,this.segments=new el,this.programConfigurations=new El(e.layers,{zoom:e.zoom,lut:e.lut}),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.elevationMode=this.layers[0].layout.get("circle-elevation-reference"),this.hasElevation=!1,"none"!==this.elevationMode&&(this.elevatedLayoutVertexArray=new os),this.worldview=e.worldview}updateFootprints(e,t){}populate(e,t,i,r){const n=this.layers[0],o=[];let a=null;"circle"===n.type&&(a=n.layout.get("circle-sort-key"));for(const{feature:l,id:c,index:u,sourceLayerIndex:h}of e){const e=this.layers[0]._featureFilter.needGeometry,t=yc(l,e);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),t,i))continue;const n=a?a.evaluate(t,{},i):void 0,s={id:c,properties:l.properties,type:l.type,sourceLayerIndex:h,index:u,geometry:e?t.geometry:gc(l,i,r),patterns:{},sortKey:n};o.push(s)}a&&o.sort((e,t)=>e.sortKey-t.sortKey);let s=null;"globe"===r.projection.name&&(this.globeExtVertexArray=new ps,s=r.projection);for(const l of o){const{geometry:r,index:n,sourceLayerIndex:o}=l,a=e[n].feature;this.addFeature(l,r,n,t.availableImages,i,s,t.brightness,t.elevationFeatures),t.featureIndex.insert(a,r,n,o,this.index)}this.hasElevation||(this.elevatedLayoutVertexArray=void 0)}update(e,t,i,r,n,o,a){this.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,this.worldview)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Js.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,$s.members)),this.elevatedLayoutVertexArray&&(this.elevatedLayoutVertexBuffer=e.createVertexBuffer(this.elevatedLayoutVertexArray,Qs.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy())}addFeature(e,t,i,r,n,o,a,s){let l;"none"!==this.elevationMode&&(l=Xc.getElevationFeature(e,s));for(const c of t)for(const t of c){const i=t.x,r=t.y;if(i<0||i>=Or||r<0||r>=Or)continue;if(o){const e=o.projectTilePoint(i,r,n),t=o.upVector(n,i,r);this.addGlobeExtVertex(e,t),this.addGlobeExtVertex(e,t),this.addGlobeExtVertex(e,t),this.addGlobeExtVertex(e,t)}const a=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,e.sortKey),s=a.vertexLength;if(this.addCircleVertex(i,r,-1,-1),this.addCircleVertex(i,r,1,-1),this.addCircleVertex(i,r,1,1),this.addCircleVertex(i,r,-1,1),"none"!==this.elevationMode){const e=l?l.pointElevation(new xe(i,r)):0;this.hasElevation=this.hasElevation||0!==e;for(let t=0;t<4;t++)this.elevatedLayoutVertexArray.emplaceBack(e)}this.indexArray.emplaceBack(s,s+1,s+2),this.indexArray.emplaceBack(s,s+2,s+3),a.vertexLength+=4,a.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,{},r,n,a,void 0,this.worldview)}addCircleVertex(e,t,i,r){this.layoutVertexArray.emplaceBack(2*e+(i+1)/2,2*t+(r+1)/2)}addGlobeExtVertex(e,t){const i=16384;this.globeExtVertexArray.emplaceBack(e.x,e.y,e.z,t[0]*i,t[1]*i,t[2]*i)}}function Jc(e,t){for(let i=0;i<e.length;i++)if(lu(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(lu(e,t[i]))return!0;return!!tu(e,t)}function Qc(e,t,i){return!!lu(e,t)||!!ou(t,e,i)}function $c(e,t){if(1===e.length)return su(t,e[0]);for(let i=0;i<t.length;i++){const r=t[i];for(let t=0;t<r.length;t++)if(lu(e,r[t]))return!0}for(let i=0;i<e.length;i++)if(su(t,e[i]))return!0;for(let i=0;i<t.length;i++)if(tu(e,t[i]))return!0;return!1}function eu(e,t,i){if(e.length>1){if(tu(e,t))return!0;for(let r=0;r<t.length;r++)if(ou(t[r],e,i))return!0}for(let r=0;r<e.length;r++)if(ou(e[r],t,i))return!0;return!1}function tu(e,t){if(0===e.length||0===t.length)return!1;for(let i=0;i<e.length-1;i++){const r=e[i],n=e[i+1];for(let e=0;e<t.length-1;e++)if(iu(r,n,t[e],t[e+1]))return!0}return!1}function iu(e,t,i,r){return We(e,i,r)!==We(t,i,r)&&We(e,t,i)!==We(e,t,r)}function ru(e,t,i){return(e.x-i.x)*(t.y-i.y)-(e.y-i.y)*(t.x-i.x)}function nu(e,t,i,r){const n=ru(e,t,r),o=ru(e,t,i);if(Math.sign(n)===Math.sign(o))return;const a=ru(i,r,e),s=a+o-n;return Math.sign(a)!==Math.sign(s)?[a/(a-s),o/(o-n)]:void 0}function ou(e,t,i){const r=i*i;if(1===t.length)return e.distSqr(t[0])<r;for(let n=1;n<t.length;n++)if(au(e,t[n-1],t[n])<r)return!0;return!1}function au(e,t,i){const r=t.distSqr(i);if(0===r)return e.distSqr(t);const n=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/r;return e.distSqr(n<0?t:n>1?i:i.sub(t)._mult(n)._add(t))}function su(e,t){let i,r,n,o=!1;for(let a=0;a<e.length;a++){i=e[a];for(let e=0,a=i.length-1;e<i.length;a=e++)r=i[e],n=i[a],r.y>t.y!=n.y>t.y&&t.x<(n.x-r.x)*(t.y-r.y)/(n.y-r.y)+r.x&&(o=!o)}return o}function lu(e,t){let i=!1;for(let r=0,n=e.length-1;r<e.length;n=r++){const o=e[r],a=e[n];o.y>t.y!=a.y>t.y&&t.x<(a.x-o.x)*(t.y-o.y)/(a.y-o.y)+o.x&&(i=!i)}return i}function cu(e,t,i,r,n){for(const a of e)if(t<=a.x&&i<=a.y&&r>=a.x&&n>=a.y)return!0;const o=[new xe(t,i),new xe(t,n),new xe(r,n),new xe(r,i)];if(e.length>2)for(const a of o)if(lu(e,a))return!0;for(let a=0;a<e.length-1;a++)if(uu(e[a],e[a+1],o))return!0;return!1}function uu(e,t,i){const r=i[0],n=i[2];if(e.x<r.x&&t.x<r.x||e.x>n.x&&t.x>n.x||e.y<r.y&&t.y<r.y||e.y>n.y&&t.y>n.y)return!1;const o=We(e,t,i[0]);return o!==We(e,t,i[1])||o!==We(e,t,i[2])||o!==We(e,t,i[3])}function hu(e,t,i,r,n,o){let a=t.y-e.y,s=e.x-t.x;if(o=o||0){const e=a*a+s*s;if(0===e)return!0;const t=Math.sqrt(e);a/=t,s/=t}return!((i.x-e.x)*a+(i.y-e.y)*s-o<0||(r.x-e.x)*a+(r.y-e.y)*s-o<0||(n.x-e.x)*a+(n.y-e.y)*s-o<0)}function du(e,t,i,r,n,o,a){return!(hu(e,t,r,n,o,a)||hu(t,i,r,n,o,a)||hu(i,e,r,n,o,a)||hu(r,n,e,t,i,a)||hu(n,o,e,t,i,a)||hu(o,r,e,t,i,a))}function pu(e,t,i){const r=t.paint.get(e).value;return"constant"===r.kind?r.value:i.programConfigurations.get(t.id).getMaxValue(e)}function fu(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function mu(e,t,i,r,n){if(!t[0]&&!t[1])return e;const o=xe.convert(t)._mult(n);"viewport"===i&&o._rotate(-r);const a=[];for(let s=0;s<e.length;s++)a.push(e[s].sub(o));return a}function gu(e,t,i,r){const n=xe.convert(e)._mult(r);return"viewport"===t&&n._rotate(-i),n}let yu,_u;function vu(e,t,i){var r=2*Math.PI*6378137/256/Math.pow(2,i);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}Go(Kc,"CircleBucket",{omit:["layers"]});class xu{constructor(e,t,i){this.z=e,this.x=t,this.y=i,this.key=bu(0,e,e,t,i)}equals(e){return this.z===e.z&&this.x===e.x&&this.y===e.y}url(e,t){const i=function(e,t,i){var r=vu(256*e,256*(t=Math.pow(2,i)-t-1),i),n=vu(256*(e+1),256*(t+1),i);return r[0]+","+r[1]+","+n[0]+","+n[1]}(this.x,this.y,this.z),r=function(e,t,i){let r,n="";for(let o=e;o>0;o--)r=1<<o-1,n+=(t&r?1:0)+(i&r?2:0);return n}(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",i)}toString(){return"".concat(this.z,"/").concat(this.x,"/").concat(this.y)}}class Cu{constructor(e,t){this.wrap=e,this.canonical=t,this.key=bu(e,t.z,t.z,t.x,t.y)}}class wu{constructor(e,t,i,r,n){this.overscaledZ=e,this.wrap=t,this.canonical=new xu(i,+r,+n),this.key=0===t&&e===i?this.canonical.key:bu(t,e,i,r,n)}equals(e){return this.overscaledZ===e.overscaledZ&&this.wrap===e.wrap&&this.canonical.equals(e.canonical)}scaledTo(e){const t=this.canonical.z-e;return e>this.canonical.z?new wu(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new wu(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)}calculateScaledKey(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.overscaledZ===e&&t)return this.key;if(e>this.canonical.z)return bu(this.wrap*+t,e,this.canonical.z,this.canonical.x,this.canonical.y);{const i=this.canonical.z-e;return bu(this.wrap*+t,e,e,this.canonical.x>>i,this.canonical.y>>i)}}isChildOf(e){if(e.wrap!==this.wrap)return!1;const t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.z<this.canonical.z&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t}children(e){if(this.overscaledZ>=e)return[new wu(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const t=this.canonical.z+1,i=2*this.canonical.x,r=2*this.canonical.y;return[new wu(t,this.wrap,t,i,r),new wu(t,this.wrap,t,i+1,r),new wu(t,this.wrap,t,i,r+1),new wu(t,this.wrap,t,i+1,r+1)]}isLessThan(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))}wrapped(){return new wu(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(e){return new wu(this.overscaledZ,e,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Cu(this.wrap,this.canonical)}toString(){return"".concat(this.overscaledZ,"/").concat(this.canonical.x,"/").concat(this.canonical.y)}}function bu(e,t,i,r,n){const o=1<<Math.min(i,22);let a=o*(n%o)+r%o;return e&&i<22&&(a+=o*o*((e<0?-2*e-1:2*e)%(1<<2*(22-i)))),16*(32*a+i)+(t-i)}const Su=[e=>{let t=e.canonical.x-1,i=e.wrap;return t<0&&(t=(1<<e.canonical.z)-1,i--),new wu(e.overscaledZ,i,e.canonical.z,t,e.canonical.y)},e=>{let t=e.canonical.x+1,i=e.wrap;return t===1<<e.canonical.z&&(t=0,i++),new wu(e.overscaledZ,i,e.canonical.z,t,e.canonical.y)},e=>new wu(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,(0===e.canonical.y?1<<e.canonical.z:e.canonical.y)-1),e=>new wu(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y===(1<<e.canonical.z)-1?0:e.canonical.y+1)];Go(xu,"CanonicalTileID"),Go(wu,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const Lu=es([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Tu}=Lu,Mu=es([{name:"a_pos_3",components:3,type:"Int16"}]);var Eu=es([{name:"a_pos",type:"Int16",components:2}]);function Iu(e){return e*Rl/Zl}const Au=[new Wc([Nl,Nl,Nl],[Ul,Ul,Ul]),new Wc([Nl,Nl,Nl],[0,0,Ul]),new Wc([0,Nl,Nl],[Ul,0,Ul]),new Wc([Nl,0,Nl],[0,Ul,Ul]),new Wc([0,0,Nl],[Ul,Ul,Ul])];function ku(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=I([],e._camera.position,e.worldSize),o=[t,i,1,1];X(o,o,e.pixelMatrixInverse),G(o,o,1/o[3]);const a=R([],j([],o,n)),s=e.globeMatrix,l=[s[12],s[13],s[14]],c=j([],l,n),u=w(c),h=R([],c),d=e.worldSize/(2*Math.PI),p=z(h,a),f=Math.asin(d/u);if(f<Math.acos(p)){if(!r)return null;const e=[],t=[];I(e,a,u/p),R(t,j(t,e,c)),R(a,S(a,c,I(a,t,Math.tan(f)*u)))}const m=[];new Bc(n,a).closestPointOnSphere(l,d,m);const g=R([],Je(s,0)),y=R([],Je(s,1)),_=R([],Je(s,2)),v=z(g,m),x=z(y,m),C=z(_,m),b=Le(Math.asin(-x/d));let L=Le(Math.atan2(v,C));L=e.center.lng+function(e,t){const i=(t-e+180)%360-180;return i<-180?i+360:i}(e.center.lng,L);const T=Jl(L),M=Ae(Ql(b),0,1);return new lc(T,M)}class Pu{constructor(e,t,i){this.a=j([],e,i),this.b=j([],t,i),this.center=i;const r=R([],this.a),n=R([],this.b);this.angle=Math.acos(z(r,n))}}function Ou(e,t){if(0===e.angle)return null;let i;return i=0===e.a[t]?1/e.angle*.5*Math.PI:1/e.angle*Math.atan(e.b[t]/e.a[t]/Math.sin(e.angle)-1/Math.tan(e.angle)),i<0||i>1?null:function(e,t,i,r){const n=Math.sin(i);return e*(Math.sin((1-r)*i)/n)+t*(Math.sin(r*i)/n)}(e.a[t],e.b[t],e.angle,Ae(i,0,1))+e.center[t]}function Ru(e){if(e.z<=1)return Au[e.z+2*e.y+e.x];const t=Vu(Bu(e));return Wc.fromPoints(t)}function zu(e,t,i){return I(e,e,1-i),A(e,e,t,i)}function Du(e,t,i){for(const r of e)B(r,r,t),I(r,r,i)}function Fu(e,t,i,r){const n=t/e.worldSize,o=e.globeMatrix;if(i.z<=1){const e=Ru(i).getCorners();return Du(e,o,n),Wc.fromPoints(e)}const a=Bu(i,r),s=Vu(a,Rl+Iu(e._tileCoverLift));Du(s,o,n);const l=Number.MAX_VALUE,c=[-l,-l,-l],u=[l,l,l];if(a.contains(e.center)){for(const e of s)M(u,u,e),E(c,c,e);c[2]=0;const t=e.point,i=[t.x*n,t.y*n,0];return M(u,u,i),E(c,c,i),new Wc(u,c)}if(e._tileCoverLift>0){for(const e of s)M(u,u,e),E(c,c,e);return new Wc(u,c)}const h=[o[12]*n,o[13]*n,o[14]*n],d=a.getCenter(),p=Ae(e.center.lat,-85.051129,rc),f=Ae(d.lat,-85.051129,rc),m=Jl(e.center.lng),g=Ql(p);let y=m-Jl(d.lng);const _=g-Ql(f);y>.5?y-=1:y<-.5&&(y+=1);let v=0;Math.abs(y)>Math.abs(_)?v=y>=0?1:3:(v=_>=0?0:2,A(h,h,[o[4]*n,o[5]*n,o[6]*n],-Math.sin(Se(_>=0?a.getSouth():a.getNorth()))*Rl));const x=s[v],C=s[(v+1)%4],w=new Pu(x,C,h),b=[Ou(w,0)||x[0],Ou(w,1)||x[1],Ou(w,2)||x[2]],L=Xu(e.zoom);if(L>0){const r=function(e,t,i,r,n){let{x:o,y:a,z:s}=e;const l=1/(1<<s);let c=o*l,u=c+l,h=a*l,d=h+l,p=0;const f=(c+u)/2-r;return f>.5?p=-1:f<-.5&&(p=1),c=((c+p)*t-(r*=t))*i+r,u=((u+p)*t-r)*i+r,h=(h*t-(n*=t))*i+n,d=(d*t-n)*i+n,[[c,d,0],[u,d,0],[u,h,0],[c,h,0]]}(i,t,e._pixelsPerMercatorPixel,m,g);for(let e=0;e<s.length;e++)zu(s[e],r[e],L);const n=S([],r[v],r[(v+1)%4]);I(n,n,.5),zu(b,n,L)}for(const S of s)M(u,u,S),E(c,c,S);return u[2]=Math.min(x[2],C[2]),M(u,u,b),E(c,c,b),new Wc(u,c)}function Bu(e){let{x:t,y:i,z:r}=e,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const o=1/(1<<r),a=new Gl(ec(t*o),i===(1<<r)-1&&n?-90:tc((i+1)*o)),s=new Gl(ec((t+1)*o),0===i&&n?90:tc(i*o));return new ql(a,s)}function Vu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rl;const i=Se(e.getNorth()),r=Se(e.getSouth()),n=Math.cos(i),o=Math.cos(r),a=Math.sin(i),s=Math.sin(r),l=e.getWest(),c=e.getEast();return[jl(o,s,l,t),jl(o,s,c,t),jl(n,a,c,t),jl(n,a,l,t)]}function Nu(e,t,i,r){const n=1<<i.z,o=(e/Or+i.x)/n;return Hl(tc((t/Or+i.y)/n),ec(o),r)}function Uu(e){let{min:t,max:i}=e;return Fl/Math.max(i[0]-t[0],i[1]-t[1],i[2]-t[2])}const ju=new Float64Array(16);function Hu(e){const t=Uu(e),i=g(ju,[t,t,t]);return h(i,i,O([],e.min))}function Zu(e){const t=(r=e.min,(i=ju)[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i);var i,r;const n=1/Uu(e);return d(t,t,[n,n,n])}function Wu(e){const t=Or/(2*Math.PI);return e/(2*Math.PI)/t}function Gu(e,t){return Or/(512*Math.pow(2,e))*Uu(Ru(t))}function qu(e,t,i,r,n){const o=Wu(i),a=[e,t,-i/(2*Math.PI)],s=l(new Float64Array(16));return h(s,s,a),d(s,s,[o,o,o]),p(s,s,Se(-n)),f(s,s,Se(-r)),s}function Xu(e){return ke(zl,Dl,e)}function Yu(e,t){const i=Hl(t.lat,t.lng),r=function(e){const t=Hl(e._center.lat,e._center.lng);let i=D([],b(0,1,0),t);const r=y([],-e.angle,t);i=B(i,i,r),y(r,-e._pitch,i);const n=R([],t);return I(n,n,Iu(e.cameraToCenterDistance/e.pixelsPerMeter)),B(n,n,r),S([],t,n)}(e);return a=(n=L([],r,i))[0],s=n[1],l=n[2],c=(o=i)[0],u=o[1],h=o[2],p=(d=Math.sqrt(a*a+s*s+l*l)*Math.sqrt(c*c+u*u+h*h))&&z(n,o)/d,Math.acos(Math.min(Math.max(p,-1),1));var n,o,a,s,l,c,u,h,d,p}function Ku(e,t){return Yu(e,t)>Math.PI/2*1.01}const Ju=Se(85),Qu=Math.cos(Ju),$u=Math.sin(Ju),eh=s(),th=e=>{const t=[];return"map"===e.paint.get("circle-pitch-alignment")&&t.push("PITCH_WITH_MAP"),"map"===e.paint.get("circle-pitch-scale")&&t.push("SCALE_WITH_MAP"),t};function ih(e,t,i,r,n,o,a,s,l){if(o&&e.queryGeometry.isAboveHorizon)return!1;o&&(l*=e.pixelToTileUnitsFactor);const c=e.tileID.canonical,u=i.projection.upVectorScale(c,i.center.lat,i.worldSize).metersToTile;for(const h of t)for(const t of h){const h=t.add(s),d=n&&i.elevation?i.elevation.exaggeration()*n.getElevationAt(h.x,h.y,!0):0,p=i.projection.projectTilePoint(h.x,h.y,c);if(d>0){const e=i.projection.upVector(c,h.x,h.y);p.x+=e[0]*u*d,p.y+=e[1]*u*d,p.z+=e[2]*u*d}const f=o?h:rh(p.x,p.y,p.z,r),m=o?e.tilespaceRays.map(e=>ah(e,d)):e.queryGeometry.screenGeometry,g=X([],[p.x,p.y,p.z,1],r);if(!a&&o?l*=g[3]/i.cameraToCenterDistance:a&&!o&&(l*=i.cameraToCenterDistance/g[3]),o){const e=tc((t.y/Or+c.y)/(1<<c.z));l/=i.projection.pixelsPerMeter(e,1)/$l(1,e)}if(Qc(m,f,l))return!0}return!1}function rh(e,t,i,r){const n=X([],[e,t,i,1],r);return new xe(n[0]/n[3],n[1]/n[3])}const nh=b(0,0,0),oh=b(0,0,1);function ah(e,t){const i=x();return nh[2]=t,e.intersectsPlane(nh,oh,i),new xe(i[0],i[1])}class sh extends Kc{}let lh,ch,uh,hh;function dh(e,t,i,r){let{width:n,height:o}=t;if(r){if(r instanceof Uint8ClampedArray)r=new Uint8Array(r.buffer);else if(r.length!==n*o*i)throw new RangeError("mismatched image size")}else r=new Uint8Array(n*o*i);return e.width=n,e.height=o,e.data=r,e}function ph(e,t,i){const{width:r,height:n}=t;r===e.width&&n===e.height||(fh(e,t,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,r),height:Math.min(e.height,n)},i,null),e.width=r,e.height=n,e.data=t.data)}function fh(e,t,i,r,n,o,a,s){if(0===n.width||0===n.height)return t;if(n.width>e.width||n.height>e.height||i.x>e.width-n.width||i.y>e.height-n.height)throw new RangeError("out of range source coordinates for image copy");if(n.width>t.width||n.height>t.height||r.x>t.width-n.width||r.y>t.height-n.height)throw new RangeError("out of range destination coordinates for image copy");const l=e.data,c=t.data,u=4===o&&s;for(let h=0;h<n.height;h++){const s=((i.y+h)*e.width+i.x)*o,d=((r.y+h)*t.width+r.x)*o;if(u)for(let e=0;e<n.width;e++){const t=s+e*o+3,i=d+e*o;c[i+0]=255,c[i+1]=255,c[i+2]=255,c[i+3]=l[t]}else if(a)for(let e=0;e<n.width;e++){const t=s+e*o,i=d+e*o,r=new oi(l[t+0]/255,l[t+1]/255,l[t+2]/255,l[t+3]).toNonPremultipliedRenderColor(a).toArray();c[i+0]=r[0],c[i+1]=r[1],c[i+2]=r[2],c[i+3]=r[3]}else for(let e=0;e<n.width*o;e++)c[d+e]=l[s+e]}return t}Go(sh,"HeatmapBucket",{omit:["layers"]});class mh{constructor(e,t){dh(this,e,1,t)}resize(e){ph(this,new mh(e),1)}clone(){return new mh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,r,n){fh(e,t,i,r,n,1,null)}}class gh{constructor(e,t){dh(this,e,4,t)}resize(e){ph(this,new gh(e),4)}replace(e,t){t?this.data.set(e):this.data=e instanceof Uint8ClampedArray?new Uint8Array(e.buffer):e}clone(){return new gh({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(e,t,i,r,n,o,a){fh(e,t,i,r,n,4,o,a)}}class yh{constructor(e,t){this.width=e.width,this.height=e.height,this.data=t instanceof Uint8Array?new Float32Array(t.buffer):t}}function _h(e){const t={},i=e.resolution||256,r=e.clips?e.clips.length:1,n=e.image||new gh({width:i,height:r}),o=(i,r,o)=>{t[e.evaluationKey]=o;const a=e.expression.evaluate(t),s=a?a.toNonPremultipliedRenderColor(null):null;s&&(n.data[i+r+0]=Math.floor(255*s.r),n.data[i+r+1]=Math.floor(255*s.g),n.data[i+r+2]=Math.floor(255*s.b),n.data[i+r+3]=Math.floor(255*s.a))};if(e.clips)for(let a=0,s=0;a<r;++a,s+=4*i)for(let t=0,r=0;t<i;t++,r+=4){const n=t/(i-1),{start:l,end:c}=e.clips[a];o(s,r,l*(1-n)+c*n)}else for(let a=0,s=0;a<i;a++,s+=4)o(0,s,a/(i-1));return n}Go(mh,"AlphaImage"),Go(gh,"RGBAImage");const vh=es([{name:"a_pos",components:2,type:"Int16"}],4),xh=es([{name:"a_road_z_offset",components:1,type:"Float32"}],4),Ch=es([{name:"a_pos",components:2,type:"Int16"},{name:"a_height",components:1,type:"Float32"}],4),wh=es([{name:"a_pos_normal_3",components:3,type:"Int16"}],4);function bh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,n=r?t[0]*i:e.length;let o=Sh(e,0,n,i,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c;if(r&&(o=function(e,t,i,r){const n=[];for(let o=0,a=t.length;o<a;o++){const i=Sh(e,t[o]*r,o<a-1?t[o+1]*r:e.length,r,!1);i===i.next&&(i.steiner=!0),n.push(zh(i))}n.sort(kh);for(let o=0;o<n.length;o++)i=Ph(n[o],i);return i}(e,t,o,i)),e.length>80*i){s=1/0,l=1/0;let t=-1/0,r=-1/0;for(let o=i;o<n;o+=i){const i=e[o],n=e[o+1];i<s&&(s=i),n<l&&(l=n),i>t&&(t=i),n>r&&(r=n)}c=Math.max(t-s,r-l),c=0!==c?32767/c:0}return Th(o,a,i,s,l,c,0),a}function Sh(e,t,i,r,n){let o;if(n===function(e,t,i,r){let n=0;for(let o=t,a=i-r;o<i;o+=r)n+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return n}(e,t,i,r)>0)for(let a=t;a<i;a+=r)o=Gh(a/r|0,e[a],e[a+1],o);else for(let a=i-r;a>=t;a-=r)o=Gh(a/r|0,e[a],e[a+1],o);return o&&Nh(o,o.next)&&(qh(o),o=o.next),o}function Lh(e,t){if(!e)return e;t||(t=e);let i,r=e;do{if(i=!1,r.steiner||!Nh(r,r.next)&&0!==Vh(r.prev,r,r.next))r=r.next;else{if(qh(r),r=t=r.prev,r===r.next)break;i=!0}}while(i||r!==t);return t}function Th(e,t,i,r,n,o,a){if(!e)return;!a&&o&&function(e,t,i,r){let n=e;do{0===n.z&&(n.z=Rh(n.x,n.y,t,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,function(e){let t,i=1;do{let r,n=e;e=null;let o=null;for(t=0;n;){t++;let a=n,s=0;for(let e=0;e<i&&(s++,a=a.nextZ,a);e++);let l=i;for(;s>0||l>0&&a;)0!==s&&(0===l||!a||n.z<=a.z)?(r=n,n=n.nextZ,s--):(r=a,a=a.nextZ,l--),o?o.nextZ=r:e=r,r.prevZ=o,o=r;n=a}o.nextZ=null,i*=2}while(t>1)}(n)}(e,r,n,o);let s=e;for(;e.prev!==e.next;){const l=e.prev,c=e.next;if(o?Eh(e,r,n,o):Mh(e))t.push(l.i,e.i,c.i),qh(e),e=c.next,s=c.next;else if((e=c)===s){a?1===a?Th(e=Ih(Lh(e),t),t,i,r,n,o,2):2===a&&Ah(e,t,i,r,n,o):Th(Lh(e),t,i,r,n,o,1);break}}}function Mh(e){const t=e.prev,i=e,r=e.next;if(Vh(t,i,r)>=0)return!1;const n=t.x,o=i.x,a=r.x,s=t.y,l=i.y,c=r.y,u=Math.min(n,o,a),h=Math.min(s,l,c),d=Math.max(n,o,a),p=Math.max(s,l,c);let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Fh(n,s,o,l,a,c,f.x,f.y)&&Vh(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Eh(e,t,i,r){const n=e.prev,o=e,a=e.next;if(Vh(n,o,a)>=0)return!1;const s=n.x,l=o.x,c=a.x,u=n.y,h=o.y,d=a.y,p=Math.min(s,l,c),f=Math.min(u,h,d),m=Math.max(s,l,c),g=Math.max(u,h,d),y=Rh(p,f,t,i,r),_=Rh(m,g,t,i,r);let v=e.prevZ,x=e.nextZ;for(;v&&v.z>=y&&x&&x.z<=_;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==n&&v!==a&&Fh(s,u,l,h,c,d,v.x,v.y)&&Vh(v.prev,v,v.next)>=0)return!1;if(v=v.prevZ,x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Fh(s,u,l,h,c,d,x.x,x.y)&&Vh(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;v&&v.z>=y;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==n&&v!==a&&Fh(s,u,l,h,c,d,v.x,v.y)&&Vh(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=_;){if(x.x>=p&&x.x<=m&&x.y>=f&&x.y<=g&&x!==n&&x!==a&&Fh(s,u,l,h,c,d,x.x,x.y)&&Vh(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function Ih(e,t){let i=e;do{const r=i.prev,n=i.next.next;!Nh(r,n)&&Uh(r,i,i.next,n)&&Zh(r,n)&&Zh(n,r)&&(t.push(r.i,i.i,n.i),qh(i),qh(i.next),i=e=n),i=i.next}while(i!==e);return Lh(i)}function Ah(e,t,i,r,n,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Bh(a,e)){let s=Wh(a,e);return a=Lh(a,a.next),s=Lh(s,s.next),Th(a,t,i,r,n,o,0),void Th(s,t,i,r,n,o,0)}e=e.next}a=a.next}while(a!==e)}function kh(e,t){let i=e.x-t.x;return 0===i&&(i=e.y-t.y,0===i)&&(i=(e.next.y-e.y)/(e.next.x-e.x)-(t.next.y-t.y)/(t.next.x-t.x)),i}function Ph(e,t){const i=function(e,t){let i=t;const r=e.x,n=e.y;let o,a=-1/0;if(Nh(e,i))return i;do{if(Nh(e,i.next))return i.next;if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){const e=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=r&&e>a&&(a=e,o=i.x<i.next.x?i:i.next,e===r))return o}i=i.next}while(i!==t);if(!o)return null;const s=o,l=o.x,c=o.y;let u=1/0;i=o;do{if(r>=i.x&&i.x>=l&&r!==i.x&&Dh(n<c?r:a,n,l,c,n<c?a:r,n,i.x,i.y)){const t=Math.abs(n-i.y)/(r-i.x);Zh(i,e)&&(t<u||t===u&&(i.x>o.x||i.x===o.x&&Oh(o,i)))&&(o=i,u=t)}i=i.next}while(i!==s);return o}(e,t);if(!i)return t;const r=Wh(i,e);return Lh(r,r.next),Lh(i,i.next)}function Oh(e,t){return Vh(e.prev,e,t.prev)<0&&Vh(t.next,e,e.next)<0}function Rh(e,t,i,r,n){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function zh(e){let t=e,i=e;do{(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next}while(t!==e);return i}function Dh(e,t,i,r,n,o,a,s){return(n-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(i-a)*(t-s)&&(i-a)*(o-s)>=(n-a)*(r-s)}function Fh(e,t,i,r,n,o,a,s){return!(e===a&&t===s)&&Dh(e,t,i,r,n,o,a,s)}function Bh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Uh(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}(e,t)&&(Zh(e,t)&&Zh(t,e)&&function(e,t){let i=e,r=!1;const n=(e.x+t.x)/2,o=(e.y+t.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==e);return r}(e,t)&&(Vh(e.prev,e,t.prev)||Vh(e,t.prev,t))||Nh(e,t)&&Vh(e.prev,e,e.next)>0&&Vh(t.prev,t,t.next)>0)}function Vh(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function Nh(e,t){return e.x===t.x&&e.y===t.y}function Uh(e,t,i,r){const n=Hh(Vh(e,t,i)),o=Hh(Vh(e,t,r)),a=Hh(Vh(i,r,e)),s=Hh(Vh(i,r,t));return n!==o&&a!==s||!(0!==n||!jh(e,i,t))||!(0!==o||!jh(e,r,t))||!(0!==a||!jh(i,e,r))||!(0!==s||!jh(i,t,r))}function jh(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function Hh(e){return e>0?1:e<0?-1:0}function Zh(e,t){return Vh(e.prev,e,e.next)<0?Vh(e,t,e.next)>=0&&Vh(e,e.prev,t)>=0:Vh(e,t,e.prev)<0||Vh(e,e.next,t)<0}function Wh(e,t){const i=Xh(e.i,e.x,e.y),r=Xh(t.i,t.x,t.y),n=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function Gh(e,t,i,r){const n=Xh(e,t,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function qh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Xh(e,t,i){return{i:e,x:t,y:i,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Yh(e,t){const i=e.length;if(i<=1)return[e];const r=[];let n,o;for(let a=0;a<i;a++){const t=Ge(e[a]);0!==t&&(e[a].area=Math.abs(t),void 0===o&&(o=t<0),o===t<0?(n&&r.push(n),n=[e[a]]):n.push(e[a]))}if(n&&r.push(n),t>1)for(let a=0;a<r.length;a++)r[a].length<=t||(tr(r[a],t,1,r[a].length-1,Kh),r[a]=r[a].slice(0,t));return r}function Kh(e,t){return t.area-e.area}function Jh(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!e)return null;const r="string"==typeof e?Di.from(e).getPrimary():e.getPrimary(),n="string"==typeof e?null:e.getSecondary();for(const o of[r,n]){if(!o)continue;const e=o.id.toString();t.has(e)||t.set(e,[]),o.scaleSelf(i),t.get(e).push(o)}return{primary:r.toString(),secondary:n?n.toString():null}}function Qh(e,t,i,r){const n=r.patternDependencies;let o=!1;for(const a of t){const t=a.paint.get("".concat(e,"-pattern"));t.isConstant()||(o=!0),Jh(t.constantOr(null),n,i)&&(o=!0)}return o}function $h(e,t,i,r,n,o){const a=o.patternDependencies;for(const s of t){const t=s.paint.get("".concat(e,"-pattern")).value;if("constant"!==t.kind){let e=t.evaluate({zoom:r},i,{},o.availableImages);e=e&&e.name?e.name:e;const l=Jh(e,a,n);if(!l)continue;const{primary:c,secondary:u}=l;c&&(i.patterns[s.id]=[c,u].filter(Boolean))}}return i}class ed{constructor(){this.polygons=new Map}add(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];this.polygons.has(e)?this.polygons.get(e).push(...i):this.polygons.set(e,i)}merge(e){for(const[t,i]of e.polygons)this.add(t,...i)}}class td{constructor(){this.portals=[]}static evaluate(e){if(0===e.length)return new td;let t=[];for(const l of e)t.push(...l.portals);if(0===t.length)return new td;const i=(e,t)=>e<=0&&t<=0||e>=Or&&t>=Or;for(const l of t){const e=l.va,t=l.vb;(i(e.x,t.x)||i(e.y,t.y))&&(l.type="border")}const r=t.filter(e=>"unevaluated"!==e.type),n=t.filter(e=>"unevaluated"===e.type);if(0===n.length)return new td;n.sort((e,t)=>e.hash===t.hash?e.isTunnel===t.isTunnel?0:e.isTunnel?-1:1:e.hash<t.hash?1:-1),t=r.concat(n);let o=r.length,a=o,s=o;do{if(a++,a===t.length||t[o].hash!==t[a].hash){if(a-o==2){s<o&&(t[s]=t[o],t[o]=null);const e=t[s],i=t[a-1];e.type=e.isTunnel!==i.isTunnel?"tunnel":"polygon",e.connection={a:e.connection.a,b:i.connection.a},s++}o=a}}while(o!==t.length);return t.splice(s),t.sort((e,t)=>e.hash<t.hash?1:-1),{portals:t}}}Go(td,"ElevationPortalGraph"),Go(ed,"ElevationPolygons");class id{constructor(e,t,i){this.outPositions=e,this.outNormals=t,this.outIndices=i,this.vertexLookup=new Map,this.buffer=new ArrayBuffer(4),this.view=new DataView(this.buffer)}addVertex(e,t,i){let r=e[2];null!=i&&(r*=i);const n=this.getVec3Bits(e)<<96n|this.getVec3Bits(t),o=this.vertexLookup.get(n);if(null!=o)return o;const a=this.outPositions.length;this.vertexLookup.set(n,a);const s=Math.trunc(16384*t[0]),l=Math.trunc(16384*t[1]),c=Math.trunc(16384*t[2]);return this.outPositions.emplaceBack(e[0],e[1],r),this.outNormals.emplaceBack(s,l,c),a}addVertices(e,t){const i=[];for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];for(const a of n){const r=this.addVertex(a,e,t);i.push(r)}return i}addTriangles(e,t,i){if(t&&i){const r=1===i.length,n=b(0,0,0);for(let o=0;o<e.length;o+=3){const a=t[e[o+0]],s=t[e[o+1]],l=t[e[o+2]],c=r?i[0]:i[e[o+1]],u=r?i[0]:i[e[o+2]],h=this.addVertex(b(a.x,a.y,r?i[0]:i[e[o+0]]),n),d=this.addVertex(b(s.x,s.y,c),n),p=this.addVertex(b(l.x,l.y,u),n);this.outIndices.emplaceBack(h,d,p)}}else for(let r=0;r<e.length;r+=3)this.outIndices.emplaceBack(e[r+0],e[r+1],e[r+2])}addQuad(e,t){const i=this.addVertices(t,void 0,...e.map(e=>b(e.coord.x,e.coord.y,e.height))),[r,n,o,a]=i;this.addTriangles([r,n,o,o,a,r])}getVertexCount(){return this.outPositions.length}clearVertexLookup(){this.vertexLookup.clear()}getBits(e){return this.view.setFloat32(0,e),BigInt(this.view.getUint32(0))}getVec3Bits(e){return this.getBits(e[0])<<64n|this.getBits(e[1])<<32n|this.getBits(e[2])}}class rd{constructor(e,t,i,r){this.unevaluatedPortals=new td,this.portalPolygons=new ed,this.bridgeFeatureSections=[],this.tunnelFeatureSections=[],this.vertexHashLookup=new Map,this.unevalVertices=[],this.unevalHeights=[],this.unevalTriangles=[],this.unevalTunnelTriangles=[],this.unevalEdges=[],this.vertexPositions=new as,this.vertexNormals=new ss,this.indexArray=new bs,this.tileToMeters=sc(e),this.bridgeProgramConfigurations=new El(t,{zoom:i,lut:r},e=>"fill-tunnel-structure-color"!==e),this.tunnelProgramConfigurations=new El(t,{zoom:i,lut:r},e=>"fill-bridge-guard-rail-color"!==e)}addVertices(e,t){const i=this.unevalVertices.length;for(let r=0;r<e.length;r++)this.unevalVertices.push(e[r]),this.unevalHeights.push(t[r]);return i}addTriangles(e,t,i){const r=i?this.unevalTunnelTriangles:this.unevalTriangles;for(const n of e)r.push(n+t)}addRenderableRing(e,t,i,r,n,o){const a=[new xe(n.min.x,n.min.y),new xe(n.max.x,n.min.y),new xe(n.max.x,n.max.y),new xe(n.min.x,n.max.y)];for(let s=0;s<i-1;s++){const i=t+s,l=i+1,c=this.unevalVertices[i],u=this.unevalVertices[l];if(!(c.x>=n.min.x&&c.x<=n.max.x&&c.y>=n.min.y&&c.y<=n.max.y||u.x>=n.min.x&&u.x<=n.max.x&&u.y>=n.min.y&&u.y<=n.max.y||uu(c,u,a)))continue;if(this.isOnBorder(c.x,u.x)||this.isOnBorder(c.y,u.y))continue;const h=rd.computeEdgeHash(this.unevalVertices[i],this.unevalVertices[l]);let d,p=this.vertexHashLookup.get(rd.computePosHash(c));null!=p?d=p.next:(p=this.vertexHashLookup.get(rd.computePosHash(u)),d=null!=p?p.prev:h),this.unevalEdges.push({polygonIdx:e,a:i,b:l,hash:h,portalHash:d,isTunnel:r,type:"unevaluated",featureInfo:o})}}addPortalCandidates(e,t,i,r,n){if(0===t.length)return;this.portalPolygons.add(e,{geometry:t,zLevel:n});const o=t[0];this.vertexHashLookup.clear();let a=rd.computeEdgeHash(o[o.length-2],o[o.length-1]);for(let s=0;s<o.length-1;s++){const t=o[s+0],n=o[s+1],l=se(n.x-t.x,n.y-t.y),c=he(l);if(0===c)continue;let u="unevaluated";const h=r.pointElevation(t),d=r.pointElevation(n);Math.abs(h)<.01&&Math.abs(d)<.01?u="entrance":(this.isOnBorder(t.x,n.x)||this.isOnBorder(t.y,n.y))&&(u="border");const p=rd.computeEdgeHash(t,n);this.unevaluatedPortals.portals.push({connection:{a:e,b:void 0},va:t,vb:n,vab:l,length:c,hash:p,isTunnel:i,type:u});const f=rd.computePosHash(t);this.vertexHashLookup.set(f,{prev:a,next:p}),a=p}}construct(e){if(0===this.unevalVertices.length)return;const t=()=>({vertexOffset:0,primitiveOffset:this.indexArray.length}),i=e=>{e.primitiveLength=this.indexArray.length-e.primitiveOffset},r=new id(this.vertexPositions,this.vertexNormals,this.indexArray);this.prepareEdges(e.portals,this.unevalEdges);const n=t(),o=t(),a=t(),s=(e,t)=>{e.sort((e,i)=>e.type===t&&i.type!==t?-1:e.type!==t&&i.type===t?1:0);const i=e.findIndex(e=>e.type!==t);return i>=0?i:e.length};let l=0;this.unevalEdges.length>0&&(l=s(this.unevalEdges,"none"),this.constructBridgeStructures(r,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:l},this.tileToMeters)),i(a);const c=t(),u=t();if(this.unevalEdges.length>0){const e=this.unevalEdges.splice(l),t=s(e,"tunnel")+l;this.unevalEdges.push(...e),this.constructTunnelStructures(r,this.unevalVertices,this.unevalHeights,this.unevalEdges,{min:0,max:l},{min:l,max:t})}i(c),r.addTriangles(this.unevalTriangles,this.unevalVertices,this.unevalHeights),i(u),r.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,this.unevalHeights),i(o),r.addTriangles(this.unevalTunnelTriangles,this.unevalVertices,[-.1]),i(n),this.maskSegments=el.simpleSegment(0,u.primitiveOffset,0,u.primitiveLength),this.depthSegments=el.simpleSegment(0,o.primitiveOffset,0,o.primitiveLength),this.renderableBridgeSegments=el.simpleSegment(0,a.primitiveOffset,0,a.primitiveLength),this.renderableTunnelSegments=el.simpleSegment(0,c.primitiveOffset,0,c.primitiveLength),this.shadowCasterSegments=el.simpleSegment(0,n.primitiveOffset,0,n.primitiveLength)}update(e,t,i,r,n,o,a,s){this.bridgeProgramConfigurations.updatePaintArrays(e,t,n,i,r,o,a,s),this.tunnelProgramConfigurations.updatePaintArrays(e,t,n,i,r,o,a,s)}upload(e){this.vertexBuffer||0===this.vertexPositions.length||0===this.vertexNormals.length||0===this.indexArray.length||(this.vertexBuffer=e.createVertexBuffer(this.vertexPositions,Ch.members),this.vertexBufferNormal=e.createVertexBuffer(this.vertexNormals,wh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.bridgeProgramConfigurations.upload(e),this.tunnelProgramConfigurations.upload(e))}destroy(){this.vertexBuffer&&(this.vertexBuffer.destroy(),this.vertexBufferNormal.destroy(),this.indexBuffer.destroy()),this.maskSegments&&(this.maskSegments.destroy(),this.depthSegments.destroy(),this.renderableBridgeSegments.destroy(),this.renderableTunnelSegments.destroy(),this.shadowCasterSegments.destroy()),this.bridgeProgramConfigurations.destroy(),this.tunnelProgramConfigurations.destroy()}populatePaintArrays(e,t,i,r,n){const o=(o,a)=>{for(let s=0;s<a.length-1;s++){const l=a[s].featureIndex,c=a[s+1].vertexStart,u=e.feature(l);o.populatePaintArrays(c,u,l,{},i,t,r,void 0,n)}};o(this.bridgeProgramConfigurations,this.bridgeFeatureSections),o(this.tunnelProgramConfigurations,this.tunnelFeatureSections)}computeVertexConnections(e,t,i,r,n){const o=new Map;for(let a=r;a<n;a++){const r=i[a],n=r.a,s=r.b,l=rd.computePosHash(e[n]),c=rd.computePosHash(e[s]);o.has(l)||o.set(l,{}),o.has(c)||o.set(c,{});const u=o.get(l),h=o.get(c);t[n]<=0&&t[s]<=0||(u.to=s,h.from=n)}return o}constructBridgeStructures(e,t,i,r,n,o){e.clearVertexLookup();const a=this.computeVertexConnections(t,i,r,n.min,n.max),s=1/o,l=.5*s,c=e=>b(t[e].x,t[e].y,i[e]*s),u=e=>{const i=a.get(rd.computePosHash(t[e])),r=i.from,n=i.to;if(!r||!n)return;const o=c(r),s=c(e),l=c(n),u=b(0,0,0);if(!U(o,s)){const e=j(x(),s,o);S(u,u,R(e,e))}if(!U(l,s)){const e=j(x(),l,s);S(u,u,R(e,e))}const h=Z(u);return h>0?I(u,u,1/h):void 0};let h=Number.POSITIVE_INFINITY;this.sortSubarray(r,n.min,n.max,(e,t)=>e.featureInfo.featureIndex-t.featureInfo.featureIndex);for(let d=n.min;d<n.max;d++){const n=r[d];if(!n.featureInfo.guardRailEnabled)continue;const a=this.prepareEdgePoints(t,i,n,(e,t)=>e>t);if(null==a)continue;const c=a[0],p=a[1],f=b(c.coord.x,c.coord.y,s*c.height),m=b(p.coord.x,p.coord.y,s*p.height);if(U(f,m))continue;const g=j(x(),m,f);R(g,g);const y=e=>R(e,e),_=u(n.a)||g,v=u(n.b)||g,C=y(b(_[1],-_[0],0)),w=y(b(v[1],-v[0],0)),L=y(D(x(),C,_)),T=y(D(x(),w,v)),M=x(),E=[S(x(),f,I(M,j(M,C,L),l)),S(x(),f,I(M,S(M,C,L),l)),S(x(),f,I(M,L,l)),f],A=[S(x(),m,I(M,j(M,w,T),l)),S(x(),m,I(M,S(M,w,T),l)),S(x(),m,I(M,T,l)),m];h=this.addFeatureSection(n.featureInfo.featureIndex,h,this.bridgeFeatureSections,e);const[k,P]=e.addVertices(C,o,E[0],E[1]),[z,F]=e.addVertices(w,o,A[0],A[1]);e.addTriangles([k,P,z,P,F,z]);const[B,V]=e.addVertices(L,o,E[1],E[2]),[N,H]=e.addVertices(T,o,A[1],A[2]);e.addTriangles([B,V,N,V,H,N]);const[Z,W]=e.addVertices(O(C,C),o,E[2],E[3]),[G,q]=e.addVertices(O(w,w),o,A[2],A[3]);e.addTriangles([Z,W,G,W,q,G])}this.bridgeFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:e.getVertexCount()})}constructTunnelStructures(e,t,i,r,n,o){e.clearVertexLookup();let a=Number.POSITIVE_INFINITY;const s=(e,t)=>e.featureInfo.featureIndex-t.featureInfo.featureIndex;this.sortSubarray(r,n.min,n.max,s),this.sortSubarray(r,o.min,o.max,s);const l=e=>R(e,e);for(let c=n.min;c<n.max;c++){const n=this.prepareEdgePoints(t,i,r[c],(e,t)=>e<t);if(null==n)continue;const[o,s]=n,u=l(b(-(s.coord.y-o.coord.y),s.coord.x-o.coord.x,0));a=this.addFeatureSection(r[c].featureInfo.featureIndex,a,this.tunnelFeatureSections,e),e.addQuad([o,s,{coord:s.coord,height:r[c].isTunnel?-.1:0},{coord:o.coord,height:r[c].isTunnel?-.1:0}],u)}for(let c=o.min;c<o.max;c++){const n=r[c];n.isTunnel&&([n.a,n.b]=[n.b,n.a]);const o=t[n.a],s=t[n.b],u=l(b(-(s.y-o.y),s.x-o.x,0));a=this.addFeatureSection(n.featureInfo.featureIndex,a,this.tunnelFeatureSections,e),e.addQuad([{coord:s,height:0},{coord:o,height:0},{coord:o,height:i[n.a]+4},{coord:s,height:i[n.b]+4}],u),e.addQuad([{coord:o,height:0},{coord:s,height:0},{coord:s,height:i[n.b]+4},{coord:o,height:i[n.a]+4}],u)}this.tunnelFeatureSections.push({featureIndex:Number.POSITIVE_INFINITY,vertexStart:e.getVertexCount()})}prepareEdgePoints(e,t,i,r){let n=t[i.a],o=t[i.b];const a=r(n,0),s=r(o,0);if(a&&s)return[{coord:e[i.a],height:n},{coord:e[i.b],height:o}];if(!a&&!s)return;const l=e[i.a].clone(),c=e[i.b].clone();if(a){if(!s){const e=o/(o-n);c.x=ci(c.x,l.x,e),c.y=ci(c.y,l.y,e),o=ci(o,n,e)}}else{const e=n/(n-o);l.x=ci(l.x,c.x,e),l.y=ci(l.y,c.y,e),n=ci(n,o,e)}return[{coord:l,height:n},{coord:c,height:o}]}prepareEdges(e,t){if(0===t.length)return;t.sort((e,t)=>e.hash===t.hash?t.polygonIdx-e.polygonIdx:t.hash>e.hash?1:-1);let i=0,r=0,n=0,o=t[i].polygonIdx;do{r++,(r===t.length||t[i].hash!==t[r].hash)&&((1==r-i||t[r-1].polygonIdx!==o)&&(n<i&&(t[n]=t[i],t[i]=null),t[n].type="none",n++),i=r,i!==t.length&&(o=t[i].polygonIdx))}while(i!==t.length);if(t.splice(n),0!==t.length&&0!==e.length){t.sort((e,t)=>e.portalHash<t.portalHash?1:-1);let i=0,r=0;for(;i!==t.length&&r!==e.length;){const n=t[i],o=e[r];n.portalHash>o.hash?i++:o.hash>n.portalHash?r++:(n.type=o.type,i++)}}}isOnBorder(e,t){return e<=0&&t<=0||e>=Or&&t>=Or}addFeatureSection(e,t,i,r){return e!==t&&(t=e,i.push({featureIndex:e,vertexStart:r.getVertexCount()}),r.clearVertexLookup()),t}sortSubarray(e,t,i,r){const n=e.slice(t,i);n.sort(r),e.splice(t,n.length,...n)}static computeEdgeHash(e,t){return(e.y===t.y&&e.x>t.x||e.y>t.y)&&([e,t]=[t,e]),BigInt(rd.computePosHash(e))<<32n|BigInt(rd.computePosHash(t))}static computePosHash(e){return((65535&e.x)<<16|65535&e.y)>>>0}}var nd,od={exports:{}},ad=(nd||(nd=1,function(e,t){!function(e){function t(e,t){return e>t?1:e<t?-1:0}var i=function(e,i){void 0===e&&(e=t),void 0===i&&(i=!1),this._compare=e,this._root=null,this._size=0,this._noDuplicates=!!i},r={size:{configurable:!0}};function n(e,t,i,r,o){var a=o-r;if(a>0){var s=r+Math.floor(a/2),l={key:t[s],data:i[s],parent:e};return l.left=n(l,t,i,r,s),l.right=n(l,t,i,s+1,o),l}return null}function o(e,t,i,r,n){if(!(i>=r)){for(var a=e[i+r>>1],s=i-1,l=r+1;;){do{s++}while(n(e[s],a)<0);do{l--}while(n(e[l],a)>0);if(s>=l)break;var c=e[s];e[s]=e[l],e[l]=c,c=t[s],t[s]=t[l],t[l]=c}o(e,t,i,l,n),o(e,t,l+1,r,n)}}i.prototype.rotateLeft=function(e){var t=e.right;t&&(e.right=t.left,t.left&&(t.left.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.left=e),e.parent=t},i.prototype.rotateRight=function(e){var t=e.left;t&&(e.left=t.right,t.right&&(t.right.parent=e),t.parent=e.parent),e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.right=e),e.parent=t},i.prototype._splay=function(e){for(;e.parent;){var t=e.parent;t.parent?t.left===e&&t.parent.left===t?(this.rotateRight(t.parent),this.rotateRight(t)):t.right===e&&t.parent.right===t?(this.rotateLeft(t.parent),this.rotateLeft(t)):t.left===e&&t.parent.right===t?(this.rotateRight(t),this.rotateLeft(t)):(this.rotateLeft(t),this.rotateRight(t)):t.left===e?this.rotateRight(t):this.rotateLeft(t)}},i.prototype.splay=function(e){for(var t,i,r,n,o;e.parent;)(i=(t=e.parent).parent)&&i.parent?((r=i.parent).left===i?r.left=e:r.right=e,e.parent=r):(e.parent=null,this._root=e),n=e.left,o=e.right,e===t.left?(i&&(i.left===t?(t.right?(i.left=t.right,i.left.parent=i):i.left=null,t.right=i,i.parent=t):(n?(i.right=n,n.parent=i):i.right=null,e.left=i,i.parent=e)),o?(t.left=o,o.parent=t):t.left=null,e.right=t,t.parent=e):(i&&(i.right===t?(t.left?(i.right=t.left,i.right.parent=i):i.right=null,t.left=i,i.parent=t):(o?(i.left=o,o.parent=i):i.left=null,e.right=i,i.parent=e)),n?(t.right=n,n.parent=t):t.right=null,e.left=t,t.parent=e)},i.prototype.replace=function(e,t){e.parent?e===e.parent.left?e.parent.left=t:e.parent.right=t:this._root=t,t&&(t.parent=e.parent)},i.prototype.minNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.left;)e=e.left;return e},i.prototype.maxNode=function(e){if(void 0===e&&(e=this._root),e)for(;e.right;)e=e.right;return e},i.prototype.insert=function(e,t){var i=this._root,r=null,n=this._compare;if(this._noDuplicates)for(;i;){if(r=i,0===n(i.key,e))return;i=n(i.key,e)<0?i.right:i.left}else for(;i;)r=i,i=n(i.key,e)<0?i.right:i.left;return i={key:e,data:t,left:null,right:null,parent:r},r?n(r.key,i.key)<0?r.right=i:r.left=i:this._root=i,this.splay(i),this._size++,i},i.prototype.find=function(e){for(var t=this._root,i=this._compare;t;){var r=i(t.key,e);if(r<0)t=t.right;else{if(!(r>0))return t;t=t.left}}return null},i.prototype.contains=function(e){for(var t=this._root,i=this._compare;t;){var r=i(e,t.key);if(0===r)return!0;t=r<0?t.left:t.right}return!1},i.prototype.remove=function(e){var t=this.find(e);if(!t)return!1;if(this.splay(t),t.left)if(t.right){var i=this.minNode(t.right);i.parent!==t&&(this.replace(i,i.right),i.right=t.right,i.right.parent=i),this.replace(t,i),i.left=t.left,i.left.parent=i}else this.replace(t,t.left);else this.replace(t,t.right);return this._size--,!0},i.prototype.removeNode=function(e){if(!e)return!1;if(this.splay(e),e.left)if(e.right){var t=this.minNode(e.right);t.parent!==e&&(this.replace(t,t.right),t.right=e.right,t.right.parent=t),this.replace(e,t),t.left=e.left,t.left.parent=t}else this.replace(e,e.left);else this.replace(e,e.right);return this._size--,!0},i.prototype.erase=function(e){var t=this.find(e);if(t){this.splay(t);var i=t.left,r=t.right,n=null;i&&(i.parent=null,n=this.maxNode(i),this.splay(n),this._root=n),r&&(i?n.right=r:this._root=r,r.parent=n),this._size--}},i.prototype.pop=function(){var e=this._root,t=null;if(e){for(;e.left;)e=e.left;t={key:e.key,data:e.data},this.remove(e.key)}return t},i.prototype.next=function(e){var t=e;if(t)if(t.right)for(t=t.right;t&&t.left;)t=t.left;else for(t=e.parent;t&&t.right===e;)e=t,t=t.parent;return t},i.prototype.prev=function(e){var t=e;if(t)if(t.left)for(t=t.left;t&&t.right;)t=t.right;else for(t=e.parent;t&&t.left===e;)e=t,t=t.parent;return t},i.prototype.forEach=function(e){for(var t=this._root,i=[],r=!1,n=0;!r;)t?(i.push(t),t=t.left):i.length>0?(e(t=i.pop(),n++),t=t.right):r=!0;return this},i.prototype.range=function(e,t,i,r){for(var n=[],o=this._compare,a=this._root;0!==n.length||a;)if(a)n.push(a),a=a.left;else{if(o((a=n.pop()).key,t)>0)break;if(o(a.key,e)>=0&&i.call(r,a))return this;a=a.right}return this},i.prototype.keys=function(){for(var e=this._root,t=[],i=[],r=!1;!r;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),i.push(e.key),e=e.right):r=!0;return i},i.prototype.values=function(){for(var e=this._root,t=[],i=[],r=!1;!r;)e?(t.push(e),e=e.left):t.length>0?(e=t.pop(),i.push(e.data),e=e.right):r=!0;return i},i.prototype.at=function(e){for(var t=this._root,i=[],r=!1,n=0;!r;)if(t)i.push(t),t=t.left;else if(i.length>0){if(t=i.pop(),n===e)return t;n++,t=t.right}else r=!0;return null},i.prototype.load=function(e,t,i){if(void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===i&&(i=!1),0!==this._size)throw new Error("bulk-load: tree is not empty");var r=e.length;return i&&o(e,t,0,r-1,this._compare),this._root=n(null,e,t,0,r),this._size=r,this},i.prototype.min=function(){var e=this.minNode(this._root);return e?e.key:null},i.prototype.max=function(){var e=this.maxNode(this._root);return e?e.key:null},i.prototype.isEmpty=function(){return null===this._root},r.size.get=function(){return this._size},i.createTree=function(e,t,r,n,o){return new i(r,o).load(e,t,n)},Object.defineProperties(i.prototype,r);var a=0,s=1,l=2,c=3,u=0,h=1,d=2,p=3;function f(e,t,i){null===t?(e.inOut=!1,e.otherInOut=!0):(e.isSubject===t.isSubject?(e.inOut=!t.inOut,e.otherInOut=t.otherInOut):(e.inOut=!t.otherInOut,e.otherInOut=t.isVertical()?!t.inOut:t.inOut),t&&(e.prevInResult=!m(t,i)||t.isVertical()?t.prevInResult:t));var r=m(e,i);e.resultTransition=r?function(e,t){var i,r=!e.inOut,n=!e.otherInOut;switch(t){case u:i=r&&n;break;case h:i=r||n;break;case p:i=r^n;break;case d:i=e.isSubject?r&&!n:n&&!r}return i?1:-1}(e,i):0}function m(e,t){switch(e.type){case a:switch(t){case u:return!e.otherInOut;case h:return e.otherInOut;case d:return e.isSubject&&e.otherInOut||!e.isSubject&&!e.otherInOut;case p:return!0}break;case l:return t===u||t===h;case c:return t===d;case s:return!1}return!1}var g=function(e,t,i,r,n){this.left=t,this.point=e,this.otherEvent=i,this.isSubject=r,this.type=n||a,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.resultTransition=0,this.otherPos=-1,this.outputContourId=-1,this.isExteriorRing=!0},y={inResult:{configurable:!0}};function _(e,t){return e[0]===t[0]&&e[1]===t[1]}g.prototype.isBelow=function(e){var t=this.point,i=this.otherEvent.point;return this.left?(t[0]-e[0])*(i[1]-e[1])-(i[0]-e[0])*(t[1]-e[1])>0:(i[0]-e[0])*(t[1]-e[1])-(t[0]-e[0])*(i[1]-e[1])>0},g.prototype.isAbove=function(e){return!this.isBelow(e)},g.prototype.isVertical=function(){return this.point[0]===this.otherEvent.point[0]},y.inResult.get=function(){return 0!==this.resultTransition},g.prototype.clone=function(){var e=new g(this.point,this.left,this.otherEvent,this.isSubject,this.type);return e.contourId=this.contourId,e.resultTransition=this.resultTransition,e.prevInResult=this.prevInResult,e.isExteriorRing=this.isExteriorRing,e.inOut=this.inOut,e.otherInOut=this.otherInOut,e},Object.defineProperties(g.prototype,y);var v=11102230246251565e-32,x=134217729,C=(3+8*v)*v;function w(e,t,i,r,n){var o,a,s,l,c=t[0],u=r[0],h=0,d=0;u>c==u>-c?(o=c,c=t[++h]):(o=u,u=r[++d]);var p=0;if(h<e&&d<i)for(u>c==u>-c?(s=o-((a=c+o)-c),c=t[++h]):(s=o-((a=u+o)-u),u=r[++d]),o=a,0!==s&&(n[p++]=s);h<e&&d<i;)u>c==u>-c?(s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++h]):(s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++d]),o=a,0!==s&&(n[p++]=s);for(;h<e;)s=o-((a=o+c)-(l=a-o))+(c-l),c=t[++h],o=a,0!==s&&(n[p++]=s);for(;d<i;)s=o-((a=o+u)-(l=a-o))+(u-l),u=r[++d],o=a,0!==s&&(n[p++]=s);return 0===o&&0!==p||(n[p++]=o),p}function b(e){return new Float64Array(e)}var S=33306690738754716e-32,L=22204460492503146e-32,T=11093356479670487e-47,M=b(4),E=b(8),I=b(12),A=b(16),k=b(4);function P(e,t,i){var r=function(e,t,i,r,n,o){var a=(t-o)*(i-n),s=(e-n)*(r-o),l=a-s;if(0===a||0===s||a>0!=s>0)return l;var c=Math.abs(a+s);return Math.abs(l)>=S*c?l:-function(e,t,i,r,n,o,a){var s,l,c,u,h,d,p,f,m,g,y,_,v,b,S,P,O,R,z=e-n,D=i-n,F=t-o,B=r-o;M[0]=(S=(f=z-(p=(d=x*z)-(d-z)))*(g=B-(m=(d=x*B)-(d-B)))-((b=z*B)-p*m-f*m-p*g))-((y=S-(O=(f=F-(p=(d=x*F)-(d-F)))*(g=D-(m=(d=x*D)-(d-D)))-((P=F*D)-p*m-f*m-p*g)))+(h=S-y))+(h-O),M[1]=(v=b-((_=b+y)-(h=_-b))+(y-h))-((y=v-P)+(h=v-y))+(h-P),M[2]=_-((R=_+y)-(h=R-_))+(y-h),M[3]=R;var V=function(e,t){for(var i=t[0],r=1;r<4;r++)i+=t[r];return i}(0,M),N=L*a;if(V>=N||-V>=N)return V;if(s=e-(z+(h=e-z))+(h-n),c=i-(D+(h=i-D))+(h-n),l=t-(F+(h=t-F))+(h-o),u=r-(B+(h=r-B))+(h-o),0===s&&0===l&&0===c&&0===u)return V;if(N=T*a+C*Math.abs(V),(V+=z*u+B*s-(F*c+D*l))>=N||-V>=N)return V;k[0]=(S=(f=s-(p=(d=x*s)-(d-s)))*(g=B-(m=(d=x*B)-(d-B)))-((b=s*B)-p*m-f*m-p*g))-((y=S-(O=(f=l-(p=(d=x*l)-(d-l)))*(g=D-(m=(d=x*D)-(d-D)))-((P=l*D)-p*m-f*m-p*g)))+(h=S-y))+(h-O),k[1]=(v=b-((_=b+y)-(h=_-b))+(y-h))-((y=v-P)+(h=v-y))+(h-P),k[2]=_-((R=_+y)-(h=R-_))+(y-h),k[3]=R;var U=w(4,M,4,k,E);k[0]=(S=(f=z-(p=(d=x*z)-(d-z)))*(g=u-(m=(d=x*u)-(d-u)))-((b=z*u)-p*m-f*m-p*g))-((y=S-(O=(f=F-(p=(d=x*F)-(d-F)))*(g=c-(m=(d=x*c)-(d-c)))-((P=F*c)-p*m-f*m-p*g)))+(h=S-y))+(h-O),k[1]=(v=b-((_=b+y)-(h=_-b))+(y-h))-((y=v-P)+(h=v-y))+(h-P),k[2]=_-((R=_+y)-(h=R-_))+(y-h),k[3]=R;var j=w(U,E,4,k,I);k[0]=(S=(f=s-(p=(d=x*s)-(d-s)))*(g=u-(m=(d=x*u)-(d-u)))-((b=s*u)-p*m-f*m-p*g))-((y=S-(O=(f=l-(p=(d=x*l)-(d-l)))*(g=c-(m=(d=x*c)-(d-c)))-((P=l*c)-p*m-f*m-p*g)))+(h=S-y))+(h-O),k[1]=(v=b-((_=b+y)-(h=_-b))+(y-h))-((y=v-P)+(h=v-y))+(h-P),k[2]=_-((R=_+y)-(h=R-_))+(y-h),k[3]=R;var H=w(j,I,4,k,A);return A[H-1]}(e,t,i,r,n,o,c)}(e[0],e[1],t[0],t[1],i[0],i[1]);return r>0?-1:r<0?1:0}function O(e,t){var i=e.point,r=t.point;return i[0]>r[0]?1:i[0]<r[0]?-1:i[1]!==r[1]?i[1]>r[1]?1:-1:function(e,t,i){return e.left!==t.left?e.left?1:-1:0!==P(i,e.otherEvent.point,t.otherEvent.point)?e.isBelow(t.otherEvent.point)?-1:1:!e.isSubject&&t.isSubject?1:-1}(e,t,i)}function R(e,t,i){var r=new g(t,!1,e,e.isSubject),n=new g(t,!0,e.otherEvent,e.isSubject);return _(e.point,e.otherEvent.point)&&console.warn("what is that, a collapsed segment?",e),r.contourId=n.contourId=e.contourId,O(n,e.otherEvent)>0&&(e.otherEvent.left=!0,n.left=!1),e.otherEvent.otherEvent=n,e.otherEvent=r,i.push(n),i.push(r),i}function z(e,t){return e[0]*t[1]-e[1]*t[0]}function D(e,t){return e[0]*t[0]+e[1]*t[1]}function F(e,t,i){var r=function(e,t,i,r){var n=[t[0]-e[0],t[1]-e[1]],o=[r[0]-i[0],r[1]-i[1]];function a(e,t,i){return[e[0]+t*i[0],e[1]+t*i[1]]}var s=[i[0]-e[0],i[1]-e[1]],l=z(n,o),c=l*l,u=D(n,n);if(c>0){var h=z(s,o)/l;if(h<0||h>1)return null;var d=z(s,n)/l;return d<0||d>1?null:0===h||1===h?[a(e,h,n)]:0===d||1===d?[a(i,d,o)]:[a(e,h,n)]}if((c=(l=z(s,n))*l)>0)return null;var p=D(n,s)/u,f=p+D(n,o)/u,m=Math.min(p,f),g=Math.max(p,f);return m<=1&&g>=0?1===m?[a(e,m>0?m:0,n)]:0===g?[a(e,g<1?g:1,n)]:[a(e,m>0?m:0,n),a(e,g<1?g:1,n)]:null}(e.point,e.otherEvent.point,t.point,t.otherEvent.point),n=r?r.length:0;if(0===n)return 0;if(1===n&&(_(e.point,t.point)||_(e.otherEvent.point,t.otherEvent.point)))return 0;if(2===n&&e.isSubject===t.isSubject)return 0;if(1===n)return _(e.point,r[0])||_(e.otherEvent.point,r[0])||R(e,r[0],i),_(t.point,r[0])||_(t.otherEvent.point,r[0])||R(t,r[0],i),1;var o=[],a=!1,u=!1;return _(e.point,t.point)?a=!0:1===O(e,t)?o.push(t,e):o.push(e,t),_(e.otherEvent.point,t.otherEvent.point)?u=!0:1===O(e.otherEvent,t.otherEvent)?o.push(t.otherEvent,e.otherEvent):o.push(e.otherEvent,t.otherEvent),a&&u||a?(t.type=s,e.type=t.inOut===e.inOut?l:c,a&&!u&&R(o[1].otherEvent,o[0].point,i),2):u?(R(o[0],o[1].point,i),3):o[0]!==o[3].otherEvent?(R(o[0],o[1].point,i),R(o[1],o[2].point,i),3):(R(o[0],o[1].point,i),R(o[3].otherEvent,o[2].point,i),3)}function B(e,t){if(e===t)return 0;if(0!==P(e.point,e.otherEvent.point,t.point)||0!==P(e.point,e.otherEvent.point,t.otherEvent.point))return _(e.point,t.point)?e.isBelow(t.otherEvent.point)?-1:1:e.point[0]===t.point[0]?e.point[1]<t.point[1]?-1:1:1===O(e,t)?t.isAbove(e.point)?-1:1:e.isBelow(t.point)?-1:1;if(e.isSubject!==t.isSubject)return e.isSubject?-1:1;var i=e.point,r=t.point;return i[0]===r[0]&&i[1]===r[1]?(i=e.otherEvent.point)[0]===(r=t.otherEvent.point)[0]&&i[1]===r[1]?0:e.contourId>t.contourId?1:-1:1===O(e,t)?1:-1}var V=function(){this.points=[],this.holeIds=[],this.holeOf=null,this.depth=null};function N(e,t,i,r){var n,o=e+1,a=t[e].point,s=t.length;for(o<s&&(n=t[o].point);o<s&&n[0]===a[0]&&n[1]===a[1];){if(!i[o])return o;++o<s&&(n=t[o].point)}for(o=e-1;i[o]&&o>r;)o--;return o}V.prototype.isExterior=function(){return null==this.holeOf};var U=H,j=H;function H(e,t){if(!(this instanceof H))return new H(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||Z,this.length>0)for(var i=(this.length>>1)-1;i>=0;i--)this._down(i)}function Z(e,t){return e<t?-1:e>t?1:0}H.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,i=this.compare,r=t[e];e>0;){var n=e-1>>1,o=t[n];if(i(r,o)>=0)break;t[e]=o,e=n}t[e]=r},_down:function(e){for(var t=this.data,i=this.compare,r=this.length>>1,n=t[e];e<r;){var o=1+(e<<1),a=o+1,s=t[o];if(a<this.length&&i(t[a],s)<0&&(o=a,s=t[a]),i(s,n)>=0)break;t[e]=s,e=o}t[e]=n}},U.default=j;var W=Math.max,G=Math.min,q=0;function X(e,t,i,r,n,o){var a,s,l,c,u,h;for(a=0,s=e.length-1;a<s;a++)if(c=e[a+1],u=new g(l=e[a],!1,void 0,t),h=new g(c,!1,u,t),u.otherEvent=h,l[0]!==c[0]||l[1]!==c[1]){u.contourId=h.contourId=i,o||(u.isExteriorRing=!1,h.isExteriorRing=!1),O(u,h)>0?h.left=!0:u.left=!0;var d=l[0],p=l[1];n[0]=G(n[0],d),n[1]=G(n[1],p),n[2]=W(n[2],d),n[3]=W(n[3],p),r.push(u),r.push(h)}}var Y=[];function K(e,t,r){"number"==typeof e[0][0][0]&&(e=[e]),"number"==typeof t[0][0][0]&&(t=[t]);var n=function(e,t,i){var r=null;return e.length*t.length==0&&(i===u?r=Y:i===d?r=e:i!==h&&i!==p||(r=0===e.length?t:e)),r}(e,t,r);if(n)return n===Y?null:n;var o=[1/0,1/0,-1/0,-1/0],a=[1/0,1/0,-1/0,-1/0],s=function(e,t,i,r,n){var o,a,s,l,c,u,h=new U(null,O);for(s=0,l=e.length;s<l;s++)for(c=0,u=(o=e[s]).length;c<u;c++)(a=0===c)&&q++,X(o[c],!0,q,h,i,a);for(s=0,l=t.length;s<l;s++)for(c=0,u=(o=t[s]).length;c<u;c++)a=0===c,n===d&&(a=!1),a&&q++,X(o[c],!1,q,h,r,a);return h}(e,t,o,a,r);if(n=function(e,t,i,r,n){var o=null;return(i[0]>r[2]||r[0]>i[2]||i[1]>r[3]||r[1]>i[3])&&(n===u?o=Y:n===d?o=e:n!==h&&n!==p||(o=e.concat(t))),o}(e,t,o,a,r))return n===Y?null:n;for(var l=function(e){var t,i,r=function(e){var t,i,r,n,o=[];for(i=0,r=e.length;i<r;i++)((t=e[i]).left&&t.inResult||!t.left&&t.otherEvent.inResult)&&o.push(t);for(var a=!1;!a;)for(a=!0,i=0,r=o.length;i<r;i++)i+1<r&&1===O(o[i],o[i+1])&&(n=o[i],o[i]=o[i+1],o[i+1]=n,a=!1);for(i=0,r=o.length;i<r;i++)(t=o[i]).otherPos=i;for(i=0,r=o.length;i<r;i++)(t=o[i]).left||(n=t.otherPos,t.otherPos=t.otherEvent.otherPos,t.otherEvent.otherPos=n);return o}(e),n={},o=[],a=function(){if(!n[t]){var e=o.length,i=function(e,t,i){var r=new V;if(null!=e.prevInResult){var n=e.prevInResult,o=n.outputContourId;if(n.resultTransition>0){var a=t[o];if(null!=a.holeOf){var s=a.holeOf;t[s].holeIds.push(i),r.holeOf=s,r.depth=t[o].depth}else t[o].holeIds.push(i),r.holeOf=o,r.depth=t[o].depth+1}else r.holeOf=null,r.depth=t[o].depth}else r.holeOf=null,r.depth=0;return r}(r[t],o,e),a=function(t){n[t]=!0,t<r.length&&r[t]&&(r[t].outputContourId=e)},s=t,l=t;for(i.points.push(r[t].point);a(s),a(s=r[s].otherPos),i.points.push(r[s].point),!((s=N(s,r,n,l))==l||s>=r.length)&&r[s];);o.push(i)}};for(t=0,i=r.length;t<i;t++)a();return o}(function(e,t,r,n,o,a){for(var s,l,c,h=new i(B),p=[],m=Math.min(n[2],o[2]);0!==e.length;){var g=e.pop();if(p.push(g),a===u&&g.point[0]>m||a===d&&g.point[0]>n[2])break;if(g.left){l=s=h.insert(g),s=s!==(c=h.minNode())?h.prev(s):null,l=h.next(l);var y=s?s.key:null;if(f(g,y,a),l&&2===F(g,l.key,e)&&(f(g,y,a),f(l.key,g,a)),s&&2===F(s.key,g,e)){var _=s;f(y,(_=_!==c?h.prev(_):null)?_.key:null,a),f(g,y,a)}}else l=s=h.find(g=g.otherEvent),s&&l&&(s=s!==c?h.prev(s):null,l=h.next(l),h.remove(g),l&&s&&F(s.key,l.key,e))}return p}(s,0,0,o,a,r)),c=[],m=0;m<l.length;m++){var g=l[m];if(g.isExterior()){for(var y=[g.points],_=0;_<g.holeIds.length;_++)y.push(l[g.holeIds[_]].points);c.push(y)}}return c}var J={UNION:h,DIFFERENCE:d,INTERSECTION:u,XOR:p};e.diff=function(e,t){return K(e,t,d)},e.intersection=function(e,t){return K(e,t,u)},e.operations=J,e.union=function(e,t){return K(e,t,h)},e.xor=function(e,t){return K(e,t,p)},Object.defineProperty(e,"__esModule",{value:!0})}(t)}(0,od.exports)),od.exports);function sd(e,t,i,r){const n=[],o=0===r?(e,t,i,r,n,o)=>{e.push(new xe(o,i+(o-t)/(r-t)*(n-i)))}:(e,t,i,r,n,o)=>{e.push(new xe(t+(o-i)/(n-i)*(r-t),o))};for(const a of e){const e=[];for(const n of a){if(n.length<=2)continue;const a=[];for(let e=0;e<n.length-1;e++){const s=n[e].x,l=n[e].y,c=n[e+1].x,u=n[e+1].y,h=0===r?s:l,d=0===r?c:u;h<t?d>t&&o(a,s,l,c,u,t):h>i?d<i&&o(a,s,l,c,u,i):a.push(n[e]),d<t&&h>=t&&o(a,s,l,c,u,t),d>i&&h<=i&&o(a,s,l,c,u,i)}let s=n[n.length-1];const l=0===r?s.x:s.y;l>=t&&l<=i&&a.push(s),a.length&&(s=a[a.length-1],a[0].x===s.x&&a[0].y===s.y||a.push(a[0]),e.push(a))}e.length&&n.push(e)}return n}function ld(e,t){const i=ud(e),r=ud([t]),n=ad.intersection(i,r);return null==n?[]:hd(n)}function cd(e,t){const i=65536;let r=ud(e,i);for(;t.valid();t.next()){const[e,n]=t.get(),o=e.x*i,a=e.y*i,s=n.x*i,l=n.y*i,c=s-o,u=l-a,h=Math.hypot(c,u),d=Math.trunc(u/h*3),p=-Math.trunc(c/h*3);r=ad.diff(r,[[[o,a],[s,l],[s+d,l+p],[o+d,a+p],[o,a]]])}return hd(r,1/i)}function ud(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return[e.map(e=>e.map(e=>[e.x*t,e.y*t]))]}function hd(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.map(e=>e.map((e,i)=>{const r=e.map(e=>new xe(e[0]*t,e[1]*t).round());return i>0&&r.reverse(),r}))}class dd{constructor(e,t){this.layoutVertexArray=new is,this.indexArray=new bs,this.lineIndexArray=new _s,this.triangleSegments=new el,this.lineSegments=new el,this.programConfigurations=new El(e.layers,{zoom:e.zoom,lut:e.lut}),this.uploaded=!1,t&&(this.elevatedLayoutVertexArray=new os)}update(e,t,i,r,n,o,a,s){this.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,s)}isEmpty(){return 0===this.layoutVertexArray.length}needsUpload(){return this.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,vh.members),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.lineIndexBuffer=e.createIndexBuffer(this.lineIndexArray),this.elevatedLayoutVertexArray&&this.elevatedLayoutVertexArray.length>0&&(this.elevatedLayoutVertexBuffer=e.createVertexBuffer(this.elevatedLayoutVertexArray,xh.members))),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.elevatedLayoutVertexBuffer&&this.elevatedLayoutVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.lineIndexBuffer.destroy(),this.programConfigurations.destroy(),this.triangleSegments.destroy(),this.lineSegments.destroy())}populatePaintArrays(e,t,i,r,n,o,a){this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,t,i,r,n,o,void 0,a)}}class pd{constructor(e){this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.patternFeatures=[],this.lut=e.lut,this.bufferData=new dd(e,!1),this.elevationBufferData=new dd(e,!0),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.projection=e.projection,this.elevationMode=this.layers[0].layout.get("fill-elevation-reference"),this.sourceLayerIndex=e.sourceLayerIndex,this.worldview=e.worldview}updateFootprints(e,t){}populate(e,t,i,r){this.hasPattern=Qh("fill",this.layers,this.pixelRatio,t);const n=this.layers[0].layout.get("fill-sort-key"),o=[];for(const{feature:a,id:s,index:l,sourceLayerIndex:c}of e){const e=this.layers[0]._featureFilter.needGeometry,u=yc(a,e);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),u,i))continue;const h=n?n.evaluate(u,{},i,t.availableImages):void 0,d={id:s,properties:a.properties,type:a.type,sourceLayerIndex:c,index:l,geometry:e?u.geometry:gc(a,i,r),patterns:{},sortKey:h};o.push(d)}n&&o.sort((e,t)=>e.sortKey-t.sortKey);for(const a of o){const{geometry:r,index:n,sourceLayerIndex:o}=a;if(this.hasPattern){const e=$h("fill",this.layers,a,this.zoom,this.pixelRatio,t);this.patternFeatures.push(e)}else this.addFeature(a,r,n,i,{},t.availableImages,t.brightness,t.elevationFeatures);t.featureIndex.insert(e[n].feature,r,n,o,this.index)}}update(e,t,i,r,n,o,a){this.bufferData.update(e,t,i,r,n,o,a,this.worldview),this.elevationBufferData.update(e,t,i,r,n,o,a,this.worldview),this.elevatedStructures&&this.elevatedStructures.update(e,t,i,r,n,o,a,this.worldview)}addFeatures(e,t,i,r,n,o){for(const a of this.patternFeatures)this.addFeature(a,a.geometry,a.index,t,i,r,o,e.elevationFeatures)}isEmpty(){return this.bufferData.isEmpty()&&this.elevationBufferData.isEmpty()}uploadPending(){return!this.uploaded||this.bufferData.needsUpload()||this.elevationBufferData.needsUpload()}upload(e){this.bufferData.upload(e),this.elevationBufferData.upload(e),this.elevatedStructures&&this.elevatedStructures.upload(e)}destroy(){this.bufferData.destroy(),this.elevationBufferData.destroy(),this.elevatedStructures&&this.elevatedStructures.destroy()}addFeature(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],a=arguments.length>6?arguments[6]:void 0,s=arguments.length>7?arguments[7]:void 0;const l=Yh(t,500);"none"!==this.elevationMode?this.addElevatedRoadFeature(e,l,r,i,s):this.addGeometry(l,this.bufferData),this.bufferData.populatePaintArrays(e,i,n,o,r,a,this.worldview),this.elevationBufferData.populatePaintArrays(e,i,n,o,r,a,this.worldview)}getUnevaluatedPortalGraph(){return this.elevatedStructures?this.elevatedStructures.unevaluatedPortals:void 0}getElevationPolygons(){return this.elevatedStructures?this.elevatedStructures.portalPolygons:void 0}setEvaluatedPortalGraph(e,t,i,r,n){this.elevatedStructures&&(this.elevatedStructures.construct(e),this.elevatedStructures.populatePaintArrays(t,i,r,n,this.worldview))}addElevatedRoadFeature(e,t,i,r,n){const o=new Array,a=Xc.getElevationFeature(e,n);if(!a)return void this.addGeometry(t,this.bufferData);{const e=this.clipPolygonsToTile(t,1);e.length>0&&o.push({polygons:e,elevationFeature:a,elevationTileID:i})}const s={guardRailEnabled:this.layers[0].layout.get("fill-construct-bridge-guard-rail").evaluate(e,{},i),featureIndex:r};for(const l of o)if(l.elevationFeature){if("hd-road-base"===this.elevationMode){this.elevatedStructures||(this.elevatedStructures=new rd(l.elevationTileID,this.layers,this.zoom,this.lut));const t=l.elevationFeature.isTunnel();let i=0;e.properties.hasOwnProperty(kc)&&(i=+e.properties[kc]);for(const e of l.polygons)this.elevatedStructures.addPortalCandidates(l.elevationFeature.id,e,t,l.elevationFeature,i)}null==l.elevationFeature.constantHeight&&(l.polygons=this.prepareElevatedPolygons(l.polygons,l.elevationFeature,l.elevationTileID));const t=new Yc(i,l.elevationTileID);this.addElevatedGeometry(l.polygons,t,l.elevationFeature,"hd-road-base"===this.elevationMode?0:.05,r,s)}}addElevatedGeometry(e,t,i,r,n,o){const a={elevation:i,elevationSampler:t,bias:r,index:n,featureInfo:o},[s,l]=this.addGeometry(e,this.elevationBufferData,a);null==this.elevationBufferData.heightRange?this.elevationBufferData.heightRange={min:s,max:l}:(this.elevationBufferData.heightRange.min=Math.min(this.elevationBufferData.heightRange.min,s),this.elevationBufferData.heightRange.max=Math.max(this.elevationBufferData.heightRange.max,l))}addGeometry(e,t,i){let r=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,o=null;i&&(o=i.elevationSampler.constantElevation(i.elevation,i.bias),null!=o&&(r=o,n=o));const a=(e,a,s)=>{if(null!=i)if(a.push(e),null!=o)t.elevatedLayoutVertexArray.emplaceBack(o),s.push(o);else{const o=i.elevationSampler.pointElevation(e,i.elevation,i.bias);t.elevatedLayoutVertexArray.emplaceBack(o),s.push(o),r=Math.min(r,o),n=Math.max(n,o)}};for(const s of e){let e=0;for(const t of s)e+=t.length;const r=t.triangleSegments.prepareSegment(e,t.layoutVertexArray,t.indexArray),n=r.vertexLength,o=[],l=[],c=[],u=[],h=[],d=t.layoutVertexArray.length;for(const f of s){if(0===f.length)continue;f!==s[0]&&l.push(o.length/2);const e=t.lineSegments.prepareSegment(f.length,t.layoutVertexArray,t.lineIndexArray),r=e.vertexLength;i&&h.push(t.layoutVertexArray.length-d),a(f[0],c,u),t.layoutVertexArray.emplaceBack(f[0].x,f[0].y),t.lineIndexArray.emplaceBack(r+f.length-1,r),o.push(f[0].x),o.push(f[0].y);for(let i=1;i<f.length;i++)a(f[i],c,u),t.layoutVertexArray.emplaceBack(f[i].x,f[i].y),t.lineIndexArray.emplaceBack(r+i-1,r+i),o.push(f[i].x),o.push(f[i].y);e.vertexLength+=f.length,e.primitiveLength+=f.length}const p=bh(o,l);for(let i=0;i<p.length;i+=3)t.indexArray.emplaceBack(n+p[i],n+p[i+1],n+p[i+2]);if(p.length>0&&i&&"hd-road-base"===this.elevationMode){const e=i.elevation.isTunnel(),t=i.elevation.safeArea,r=this.elevatedStructures.addVertices(c,u);this.elevatedStructures.addTriangles(p,r,e);const n=h.length;if(n>0){for(let o=0;o<n-1;o++)this.elevatedStructures.addRenderableRing(i.index,h[o]+r,h[o+1]-h[o],e,t,i.featureInfo);this.elevatedStructures.addRenderableRing(i.index,h[n-1]+r,c.length-h[n-1],e,t,i.featureInfo)}}r.vertexLength+=e,r.primitiveLength+=p.length/3}return[r,n]}prepareElevatedPolygons(e,t,i){const r=1/sc(i),n=[];for(const o of e){const e=cd(o,new Gc(t,r));n.push(...e)}return n}clipPolygonsToTile(e,t){const i=-t,r=-t,n=Or+t,o=Or+t;let a=0;const s=[],l=[];for(;a<e.length;a++){const t=e[a],c=hr(t);(c.min.x>=i&&c.max.x<=n&&c.min.y>=r&&c.max.y<=o?s:l).push(t)}if(s.length===e.length)return e;const c=[new xe(i,r),new xe(n,r),new xe(n,o),new xe(i,o),new xe(i,r)],u=s;for(const h of l)u.push(...ld(h,c));return u}}let fd,md,gd,yd;Go(pd,"FillBucket",{omit:["layers","patternFeatures"]}),Go(dd,"FillBufferData"),Go(rd,"ElevatedStructures");class _d{constructor(e,t,i,r){if(this.triangleCount=t.length/3,this.min=new xe(0,0),this.max=new xe(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],0===this.triangleCount||0===e.length)return;const[n,o]=[e[0].clone(),e[0].clone()];for(let u=1;u<e.length;++u){const t=e[u];n.x=Math.min(n.x,t.x),n.y=Math.min(n.y,t.y),o.x=Math.max(o.x,t.x),o.y=Math.max(o.y,t.y)}if(r){const e=Math.ceil(Math.max(o.x-n.x,o.y-n.y)/r);i=Math.max(i,e)}if(0===i)return;this.min=n,this.max=o;const a=this.max.sub(this.min);a.x=Math.max(a.x,1),a.y=Math.max(a.y,1);const s=Math.max(a.x,a.y)/i;this.cellsX=Math.max(1,Math.ceil(a.x/s)),this.cellsY=Math.max(1,Math.ceil(a.y/s)),this.xScale=1/s,this.yScale=1/s;const l=[];for(let u=0;u<this.triangleCount;u++){const i=e[t[3*u+0]].sub(this.min),r=e[t[3*u+1]].sub(this.min),n=e[t[3*u+2]].sub(this.min),o=vd(Math.floor(Math.min(i.x,r.x,n.x)),this.xScale,this.cellsX),a=vd(Math.floor(Math.max(i.x,r.x,n.x)),this.xScale,this.cellsX),c=vd(Math.floor(Math.min(i.y,r.y,n.y)),this.yScale,this.cellsY),h=vd(Math.floor(Math.max(i.y,r.y,n.y)),this.yScale,this.cellsY),d=new xe(0,0),p=new xe(0,0),f=new xe(0,0),m=new xe(0,0);for(let e=c;e<=h;++e){d.y=p.y=e*s,f.y=m.y=(e+1)*s;for(let t=o;t<=a;++t)d.x=f.x=t*s,p.x=m.x=(t+1)*s,(du(i,r,n,d,p,m)||du(i,r,n,d,m,f))&&l.push({cellIdx:e*this.cellsX+t,triIdx:u})}}if(0===l.length)return;l.sort((e,t)=>e.cellIdx-t.cellIdx||e.triIdx-t.triIdx);let c=0;for(;c<l.length;){const e=l[c].cellIdx,t={start:this.payload.length,len:0};for(;c<l.length&&l[c].cellIdx===e;)++t.len,this.payload.push(l[c++].triIdx);this.cells[e]=t}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(e,t){if(0===this.triangleCount||0===this.cells.length)return;if(e.x>this.max.x||this.min.x>e.x||e.y>this.max.y||this.min.y>e.y)return;const i=vd(e.x-this.min.x,this.xScale,this.cellsX),r=vd(e.y-this.min.y,this.yScale,this.cellsY),n=this.cells[r*this.cellsX+i];if(n){this._lazyInitLookup();for(let e=0;e<n.len;e++){const i=this.payload[n.start+e],r=Math.floor(i/8),o=1<<i%8;if(!(this.lookup[r]&o)&&(this.lookup[r]|=o,t.push(i),t.length===this.triangleCount))return}}}query(e,t,i){if(0===this.triangleCount||0===this.cells.length)return;if(e.x>this.max.x||this.min.x>t.x)return;if(e.y>this.max.y||this.min.y>t.y)return;this._lazyInitLookup();const r=vd(e.x-this.min.x,this.xScale,this.cellsX),n=vd(t.x-this.min.x,this.xScale,this.cellsX),o=vd(e.y-this.min.y,this.yScale,this.cellsY),a=vd(t.y-this.min.y,this.yScale,this.cellsY);for(let s=o;s<=a;s++)for(let e=r;e<=n;e++){const t=this.cells[s*this.cellsX+e];if(t)for(let e=0;e<t.len;e++){const r=this.payload[t.start+e],n=Math.floor(r/8),o=1<<r%8;if(!(this.lookup[n]&o)&&(this.lookup[n]|=o,i.push(r),i.length===this.triangleCount))return}}}}function vd(e,t,i){return Math.max(0,Math.min(i-1,Math.floor(e*t)))}Go(_d,"TriangleGridIndex");class xd{constructor(e){this.zoom=e.zoom,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.footprints=[],this.worldview=e.worldview}updateFootprints(e,t){for(const i of this.footprints)t.push({footprint:i,id:e})}populate(e,t,i,r){const n=[];for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of e){const e=this.layers[0]._featureFilter.needGeometry,t=yc(o,e);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),t,i))continue;const c={id:a,properties:o.properties,type:o.type,sourceLayerIndex:l,index:s,geometry:e?t.geometry:gc(o,i,r),patterns:{}};n.push(c)}for(const o of n){const{geometry:r,index:n,sourceLayerIndex:a}=o;this.addFeature(o,r,n,i,{},t.availableImages,t.brightness),t.featureIndex.insert(e[n].feature,r,n,a,this.index)}}isEmpty(){return 0===this.footprints.length}uploadPending(){return!1}upload(e){}update(e,t,i,r,n,o,a){}destroy(){}addFeature(e,t,i,r,n){for(const o of Yh(t,2)){const e=[],t=[],i=[],r=new xe(1/0,1/0),n=new xe(-1/0,-1/0);for(const l of o)if(0!==l.length){l!==o[0]&&i.push(t.length/2);for(let i=0;i<l.length;i++)t.push(l[i].x),t.push(l[i].y),e.push(l[i]),r.x=Math.min(r.x,l[i].x),r.y=Math.min(r.y,l[i].y),n.x=Math.max(n.x,l[i].x),n.y=Math.max(n.y,l[i].y)}const a=bh(t,i),s=new _d(e,a,8,256);this.footprints.push({vertices:e,indices:a,grid:s,min:r,max:n})}}}Go(xd,"ClipBucket",{omit:["layers"]});const Cd=es([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),wd=es([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),bd=es([{name:"a_centroid_pos",components:2,type:"Uint16"}]),Sd=es([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Ld=es([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Td=es([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Md}=Cd,Ed=Number.MAX_SAFE_INTEGER;function Id(e,t,i,r){return e.order<t||e.order===Ed||!(e.clipMask&i)||function(e,t){return 0!==t.length&&void 0===t.find(t=>t===e)}(r,e.clipScope)}function Ad(e,t){return e.x-t.x||e.y-t.y}function kd(e,t){return 0===Ad(e.min,t.min)&&0===Ad(e.max,t.max)}function Pd(e,t){return!(e.min.x>t.max.x||e.max.x<t.min.x||e.min.y>t.max.y||e.max.y<t.min.y)}function Od(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i].sourceId!==t[i].sourceId||!kd(e[i],t[i])||e[i].order!==t[i].order||e[i].clipMask!==t[i].clipMask||!Ce(e[i].clipScope,t[i].clipScope))return!1;return!0}function Rd(e,t,i){const r=1/Or,n=1/(1<<i.canonical.z),o=(t.x*r+i.canonical.x)*n+i.wrap,a=(t.y*r+i.canonical.y)*n;return{min:new xe((e.x*r+i.canonical.x)*n+i.wrap,(e.y*r+i.canonical.y)*n),max:new xe(o,a)}}function zd(e,t,i){const r=1<<i.canonical.z,n=((t.x-i.wrap)*r-i.canonical.x)*Or,o=(t.y*r-i.canonical.y)*Or;return{min:new xe(((e.x-i.wrap)*r-i.canonical.x)*Or,(e.y*r-i.canonical.y)*Or),max:new xe(n,o)}}function Dd(e,t,i,r,n,o,a){const s=e.indices,l=e.vertices,c=[];for(let u=r;u<r+n;u+=3){const r=t[i[u+0]+o],n=t[i[u+1]+o],h=t[i[u+2]+o],d=Math.min(r.x,n.x,h.x),p=Math.max(r.x,n.x,h.x),f=Math.min(r.y,n.y,h.y),m=Math.max(r.y,n.y,h.y);c.length=0,e.grid.query(new xe(d,f),new xe(p,m),c);for(let e=0;e<c.length;e++){const t=c[e];if(du(l[s[3*t+0]],l[s[3*t+1]],l[s[3*t+2]],r,n,h,a))return!0}}return!1}function Fd(e,t,i,r){if(!e||!i)return!1;let n=e.vertices;if(!t.canonical.equals(r.canonical)||t.wrap!==r.wrap){if(i.vertices.length<e.vertices.length)return Fd(i,r,e,t);const o=t.canonical,a=r.canonical,s=Math.pow(2,a.z-o.z);n=e.vertices.map(e=>new xe((e.x+o.x*Or)*s-a.x*Or,(e.y+o.y*Or)*s-a.y*Or))}return Dd(i,n,e.indices,0,e.indices.length,0,0)}function Bd(e,t,i,r){const n=Math.pow(2,r.z-i.z);return new xe((e+i.x*Or)*n-r.x*Or,(t+i.y*Or)*n-r.y*Or)}function Vd(e,t){const i=[];t.grid.queryPoint(e,i);const r=t.indices,n=t.vertices;for(let o=0;o<i.length;o++){const t=i[o];if(lu([n[r[3*t+0]],n[r[3*t+1]],n[r[3*t+2]]],e))return!0}return!1}const Nd=[new xe(0,0),new xe(Or,0),new xe(Or,Or),new xe(0,Or)];function Ud(e,t){const i=[];let r=[];if(!t||e.length<2)return[e];if(2===e.length)return uu(e[0],e[1],Nd)?[e]:[];for(let n=0;n<e.length+2;n++){const t=e[n%e.length],o=e[(n+1)%e.length],a=uu(0===n?e[e.length-1]:e[(n-1)%e.length],t,Nd),s=uu(t,o,Nd),l=a||s;l&&r.push(t),l&&s||r.length>0&&(r.length>1&&i.push(r),r=[])}return r.length>1&&i.push(r),i}const jd=Ic.VectorTileFeature.types,Hd=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],Zd=["fill-extrusion-flood-light-ground-radius"],Wd=Math.pow(2,13),Gd=Math.pow(2,15)-1,qd=new xe(0,1),Xd=2147483648;function Yd(e,t,i,r,n,o,a,s){e.emplaceBack((t<<1)+a,(i<<1)+o,(Math.floor(r*Wd)<<1)+n,Math.round(s))}function Kd(e,t,i){e.emplaceBack(t.x*Or,t.y*Or,i?1:0)}function Jd(e,t,i,r,n,o){e.emplaceBack(t.x,t.y,(i.x<<1)+r,(i.y<<1)+n,o)}function Qd(e,t,i){const r=16384;e.emplaceBack(t.x,t.y,t.z,i[0]*r,i[1]*r,i[2]*r)}class $d{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class ep{constructor(){this.centroidXY=new xe(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new xe(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new xe(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new xe(this.max.x-this.min.x,this.max.y-this.min.y)}}class tp{constructor(){this.acc=new xe(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(e,t){e.min.x===Number.MAX_VALUE&&(e.min.x=e.max.x=t.x,e.min.y=e.max.y=t.y)}appendEdge(e,t,i){this.accCount++,this.acc._add(t);let r=!!this.borders;t.x<e.min.x?(e.min.x=t.x,r=!0):t.x>e.max.x&&(e.max.x=t.x,r=!0),t.y<e.min.y?(e.min.y=t.y,r=!0):t.y>e.max.y&&(e.max.y=t.y,r=!0),((0===t.x||t.x===Or)&&t.x===i.x)!=((0===t.y||t.y===Or)&&t.y===i.y)&&this.processBorderOverlap(t,i),r&&this.checkBorderIntersection(t,i)}checkBorderIntersection(e,t){t.x<0!=e.x<0&&this.addBorderIntersection(0,ci(t.y,e.y,(0-t.x)/(e.x-t.x))),t.x>Or!=e.x>Or&&this.addBorderIntersection(1,ci(t.y,e.y,(Or-t.x)/(e.x-t.x))),t.y<0!=e.y<0&&this.addBorderIntersection(2,ci(t.x,e.x,(0-t.y)/(e.y-t.y))),t.y>Or!=e.y>Or&&this.addBorderIntersection(3,ci(t.x,e.x,(Or-t.y)/(e.y-t.y)))}addBorderIntersection(e,t){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const i=this.borders[e];t<i[0]&&(i[0]=t),t>i[1]&&(i[1]=t)}processBorderOverlap(e,t){if(e.x===t.x){if(e.y===t.y)return;const i=0===e.x?0:1;this.addBorderIntersection(i,t.y),this.addBorderIntersection(i,e.y)}else{const i=0===e.y?2:3;this.addBorderIntersection(i,t.x),this.addBorderIntersection(i,e.x)}}centroid(){return 0===this.accCount?new xe(0,0):new xe(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((e,t)=>e+ +(t[0]!==Number.MAX_VALUE),0):0}}function ip(e,t){const i=e.add(t)._unit(),r=Ae(e.x*i.x+e.y*i.y,-1,1);var n,o,a;return n=Math.acos(r),Math.min(4,Math.max(-4,Math.tan(n)))/4*Gd*((o=e).x*(a=t).y-o.y*a.x<0?-1:1)}const rp=[e=>e.x<0,e=>e.x>Or,e=>e.y<0,e=>e.y>Or];function np(e,t,i,r){const n=[4];if(0===r)return n;i._mult(r);const o=e.sub(i),a=t.sub(i),s=[e,t,o,a];for(let l=0;l<4;l++)for(const e of s)if(rp[l](e)){n.push(l);break}return n}class op{constructor(e){this.vertexArray=new ls,this.indexArray=new bs,this.programConfigurations=new El(e.layers,{zoom:e.zoom,lut:e.lut},e=>Zd.includes(e)),this._segments=new el,this.hiddenByLandmarkVertexArray=new Fs,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new el}getDefaultSegment(){return this.regionSegments[4]}hasData(){return 0!==this.vertexArray.length}addData(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=e.length;if(n>2){let o=Math.max(0,this._segments.get().length-1);const a=this._segments._prepareSegment(4*n,this.vertexArray.length,2*this._segmentToGroundQuads[o].length);let s;o!==this._segments.get().length-1&&(o++,this._segmentToGroundQuads[o]=[],this._segmentToRegionTriCounts[o]=[0,0,0,0,0]);{const t=e[0],i=e[1];s=ip(t.sub(e[n-1])._perp()._unit(),i.sub(t)._perp()._unit())}for(let l=0;l<n;l++){const c=l===n-1?0:l+1,u=e[l],h=e[c],d=e[c===n-1?0:c+1],p=h.sub(u)._perp()._unit(),f=ip(p,d.sub(h)._perp()._unit()),m=s,g=f;if(up(u,h,t)||r&&hp(u,t)&&hp(h,t)){s=f;continue}const y=a.vertexLength;Jd(this.vertexArray,u,h,1,1,m),Jd(this.vertexArray,u,h,1,0,m),Jd(this.vertexArray,u,h,0,1,g),Jd(this.vertexArray,u,h,0,0,g),a.vertexLength+=4;const _=np(u,h,p,i);for(const e of _)this._segmentToGroundQuads[o].push({id:y,region:e}),this._segmentToRegionTriCounts[o][e]+=2,a.primitiveLength+=2;s=f}}}prepareBorderSegments(){if(!this.hasData())return;const e=this._segments.get(),t=e.length;for(let i=0;i<t;i++)this._segmentToGroundQuads[i].sort((e,t)=>e.region-t.region);for(let i=0;i<t;i++){const t=this._segmentToGroundQuads[i],r=e[i],n=this._segmentToRegionTriCounts[i];n.reduce((e,t)=>e+t,0);let o=0;for(let e=0;e<=4;e++){const t=n[e];if(0!==t){let i=this.regionSegments[e];i||(i=this.regionSegments[e]=new el);const n={vertexOffset:r.vertexOffset,primitiveOffset:r.primitiveOffset+o,vertexLength:r.vertexLength,primitiveLength:t};i.get().push(n)}o+=t}for(let e=0;e<t.length;e++){const i=t[e].id;this.indexArray.emplaceBack(i,i+1,i+3),this.indexArray.emplaceBack(i,i+3,i+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(e,t,i,r,n,o,a){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,e,t,i,r,n,o,void 0,a)}upload(e){this.hasData()&&(this.vertexBuffer=e.createVertexBuffer(this.vertexArray,wd.members),this.indexBuffer=e.createIndexBuffer(this.indexArray))}uploadPaintProperties(e){this.hasData()&&this.programConfigurations.upload(e)}update(e,t,i,r,n,o,a,s){this.hasData()&&this.programConfigurations.updatePaintArrays(e,t,i,r,n,o,a,s)}updateHiddenByLandmark(e){if(!this.hasData())return;const t=e.groundVertexCount+e.groundVertexArrayOffset;if(0===e.groundVertexCount)return;const i=e.flags&Xd?1:0;for(let r=e.groundVertexArrayOffset;r<t;++r)this.hiddenByLandmarkVertexArray.emplace(r,i);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(e){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=e.createVertexBuffer(this.hiddenByLandmarkVertexArray,Ld.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let e=0;e<=4;e++){const t=this.regionSegments[e];t&&t.destroy()}}}}class ap{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.overscaling=e.overscaling,this.layers=e.layers,this.pixelRatio=e.pixelRatio,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=e.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new bs,this.footprintVertices=new is,this.footprintSegments=[],this.layoutVertexArray=new ns,this.centroidVertexArray=new Xs,this.wallVertexArray=new Ks,this.indexArray=new bs,this.programConfigurations=new El(e.layers,{zoom:e.zoom,lut:e.lut},e=>Hd.includes(e)),this.segments=new el,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.groundEffect=new op(e),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[],this.worldview=e.worldview}updateFootprints(e,t){}populate(e,t,i,r){this.features=[],this.hasPattern=Qh("fill-extrusion",this.layers,this.pixelRatio,t),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=sc(i),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=0!==this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1);for(const{feature:n,id:o,index:a,sourceLayerIndex:s}of e){const e=this.layers[0]._featureFilter.needGeometry,l=yc(n,e);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),l,i))continue;const c={id:o,sourceLayerIndex:s,index:a,geometry:e?l.geometry:gc(n,i,r),properties:n.properties,type:n.type,patterns:{}},u=this.layoutVertexArray.length,h="Polygon"===jd[c.type];if(this.hasPattern)this.features.push($h("fill-extrusion",this.layers,c,this.zoom,this.pixelRatio,t));else if(this.wallMode)for(const n of c.geometry)for(const e of Ud(n,h))this.addFeature(c,[e],a,i,{},t.availableImages,r,t.brightness);else this.addFeature(c,c.geometry,a,i,{},t.availableImages,r,t.brightness);t.featureIndex.insert(n,c.geometry,a,s,this.index,u)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(e,t,i,r,n,o){for(const a of this.features){const e="Polygon"===jd[a.type],{geometry:s}=a;if(this.wallMode)for(const l of s)for(const s of Ud(l,e))this.addFeature(a,[s],a.index,t,i,r,n,o);else this.addFeature(a,s,a.index,t,i,r,n,o)}this.sortBorders(),"mercator"===this.projection.name&&this.splitToSubtiles()}update(e,t,i,r,n,o,a){this.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,this.worldview),this.groundEffect.update(e,t,n,i,r,o,a,this.worldview)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(e){this.uploaded||(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,Md),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.wallVertexBuffer=e.createVertexBuffer(this.wallVertexArray,Sd.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=e.createVertexBuffer(this.layoutVertexExtArray,Td.members,!0)),this.groundEffect.upload(e)),this.groundEffect.uploadPaintProperties(e),this.programConfigurations.upload(e),this.uploaded=!0}uploadCentroid(e){this.groundEffect.uploadHiddenByLandmark(e),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=e.createVertexBuffer(this.centroidVertexArray,bd.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(e,t,i,r,n,o,a,s){const l=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(e,{})/this.tileToMeter,c=[new xe(0,0),new xe(Or,Or)],u=a.projection,h="globe"===u.name,d=this.wallMode||"Polygon"===jd[e.type],p=new tp;p.centroidDataIndex=this.centroidData.length;const f=new ep,m=this.layers[0].paint.get("fill-extrusion-base").evaluate(e,{},r)<=0,g=this.layers[0].paint.get("fill-extrusion-height").evaluate(e,{},r);let y;if(f.height=g,f.vertexArrayOffset=this.layoutVertexArray.length,f.groundVertexArrayOffset=this.groundEffect.vertexArray.length,h&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new ps),this.wallMode){if(h)return void Ze("Non zero fill-extrusion-line-width is not yet supported on globe.");if(1!==t.length)return;y=function(e){const t=e[0].x===e[e.length-1].x&&e[0].y===e[e.length-1].y,i=function(e){let t=0;const i=e.length;for(let r=0;r<i;r++)t+=(e[(r+1)%i].x-e[r].x)*(e[(r+1)%i].y+e[r].y);return t>=0}(e);i||(e=e.reverse());const r={geometry:[],joinNormals:[],indices:[]},n=[],o=[],a=[];let s=e.length;for(;s>=2&&e[s-1].equals(e[s-2]);)s--;if(s<(t?3:2))return r;let l,c,u,h,d,p=0;for(;p<s-1&&e[p].equals(e[p+1]);)p++;t&&(l=e[s-2],d=e[p].sub(l)._unit()._perp());for(let m=p;m<s;m++){if(u=m===s-1?t?e[p+1]:void 0:e[m+1],u&&e[m].equals(u))continue;d&&(h=d),l&&(c=l),l=e[m],d=u?u.sub(l)._unit()._perp():h,h=h||d;let i=h.add(d);0===i.x&&0===i.y||i._unit();const r=i.x*d.x+i.y*d.y,f=0!==r?1/r:1/0,g=h.x*d.y-h.y*d.x>0;let y="miter";const _=2;"miter"===y&&f>_&&(y="bevel"),"bevel"===y&&(f>100&&(y="flipbevel"),f<_&&(y="miter"));const v=(e,t,i,r)=>{const s=new xe(e.x,e.y),l=new xe(e.x,e.y);s.x+=t.x*r,s.y+=t.y*r,l.x-=t.x*Math.max(i,1),l.y-=t.y*Math.max(i,1),a.push(t),n.push(s),o.push(l)};if("miter"===y)i._mult(f),v(l,i,0,0);else if("flipbevel"===y)i=d.mult(-1),v(l,i,0,0),v(l,i.mult(-1),0,0);else{const e=-Math.sqrt(f*f-1),t=g?e:0,i=g?0:e;c&&v(l,h,t,i),u&&v(l,d,t,i)}}r.geometry=[...n,...o.reverse(),n[0]],r.joinNormals=[...a,...a.reverse(),a[a.length-1]];const f=r.geometry.length-1;for(let m=0;m<f/2;m++)if(m+1<f/2){let e=m,t=m+1,i=f-1-m,n=f-2-m;e=0===e?f-1:e-1,t=0===t?f-1:t-1,i=0===i?f-1:i-1,n=0===n?f-1:n-1,r.indices.push(i),r.indices.push(t),r.indices.push(e),r.indices.push(i),r.indices.push(n),r.indices.push(t)}return r}(t[0]),t=[y.geometry]}const _=(e,t)=>e<(t.length-1)/2||e===t.length-1,v=this.wallMode?[t]:Yh(t,500);for(let L=v.length-1;L>=0;L--){const e=v[L];(0===e.length||(x=e[0]).every(e=>e.x<=0)||x.every(e=>e.x>=Or)||x.every(e=>e.y<=0)||x.every(e=>e.y>=Or))&&v.splice(L,1)}var x;let C;if(h)C=mp(v,c,r);else{C=[];for(const e of v)C.push({polygon:e,bounds:c})}const w=d?this.edgeRadius:0,b=w>0&&this.zoom<17,S=(e,t)=>{if(0===e.length)return!1;const i=e[e.length-1];return t.x===i.x&&t.y===i.y};for(const{polygon:L,bounds:T}of C){let e=0,t=0;for(const r of L)d&&!r[0].equals(r[r.length-1])&&r.push(r[0]),t+=d?r.length-1:r.length;const i=this.segments.prepareSegment((d?5:4)*t,this.layoutVertexArray,this.indexArray);f.footprintSegIdx<0&&(f.footprintSegIdx=this.footprintSegments.length),f.polygonSegIdx<0&&(f.polygonSegIdx=this.polygonSegments.length);const n={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},o=new $d;if(o.vertexOffset=this.footprintVertices.length,o.indexOffset=3*this.footprintIndices.length,o.ringIndices=[],d){const t=[],n=[];e=i.vertexLength;for(let e=0;e<L.length;e++){const a=L[e];a.length&&0!==e&&n.push(t.length/2);const s=[];let c,d;c=a[1].sub(a[0])._perp()._unit(),o.ringIndices.push(a.length-1);for(let e=1;e<a.length;e++){const n=a[e],o=a[e===a.length-1?1:e+1],l=n.clone();if(w){d=o.sub(n)._perp()._unit();const e=c.add(d)._unit(),t=w*Math.min(4,1/(c.x*e.x+c.y*e.y));l.x+=t*e.x,l.y+=t*e.y,l.x=Math.round(l.x),l.y=Math.round(l.y),c=d}if(!m||0!==w&&!b||S(s,l)||s.push(l),Yd(this.layoutVertexArray,l.x,l.y,0,0,1,1,0),this.wallMode){const t=_(e,a);Kd(this.wallVertexArray,y.joinNormals[e],!t)}i.vertexLength++,this.footprintVertices.emplaceBack(n.x,n.y),t.push(n.x,n.y),h&&Qd(this.layoutVertexExtArray,u.projectTilePoint(l.x,l.y,r),u.upVector(r,l.x,l.y))}m&&(0===w||b)&&(0!==s.length&&S(s,s[0])&&s.pop(),this.groundEffect.addData(s,T,l))}const a=this.wallMode?y.indices:bh(t,n);for(let r=0;r<a.length;r+=3)this.footprintIndices.emplaceBack(o.vertexOffset+a[r+0],o.vertexOffset+a[r+1],o.vertexOffset+a[r+2]),this.indexArray.emplaceBack(e+a[r],e+a[r+2],e+a[r+1]),i.primitiveLength++;o.indexCount+=a.length,o.vertexCount+=this.footprintVertices.length-o.vertexOffset}for(let a=0;a<L.length;a++){const t=L[a];p.startRing(f,t[0]);let n=t.length>4&&dp(t[t.length-2],t[0],t[1]),o=w?lp(t[t.length-2],t[0],t[1],w):0;const s=[];let c,g,v;g=t[1].sub(t[0])._perp()._unit();let x=!0;for(let a=1,l=0;a<t.length;a++){let d=t[a-1],C=t[a];const b=t[a===t.length-1?1:a+1];if(p.appendEdge(f,C,d),up(C,d,T)){w&&(g=b.sub(C)._perp()._unit(),x=!x);continue}const L=C.sub(d)._perp(),M=L.x/(Math.abs(L.x)+Math.abs(L.y)),E=L.y>0?1:0,I=d.dist(C);if(l+I>32768&&(l=0),w){v=b.sub(C)._perp()._unit();let e=cp(d,C,b,sp(g,v),w);isNaN(e)&&(e=0);const t=C.sub(d)._unit();d=d.add(t.mult(o))._round(),C=C.add(t.mult(-e))._round(),o=e,g=v,m&&this.zoom>=17&&(S(s,d)||s.push(d),S(s,C)||s.push(C))}const A=i.vertexLength,k=t.length>4&&dp(d,C,b);let P=pp(l,n,x);if(Yd(this.layoutVertexArray,d.x,d.y,M,E,0,0,P),Yd(this.layoutVertexArray,d.x,d.y,M,E,0,1,P),this.wallMode){const e=_(a-1,t),i=y.joinNormals[a-1];Kd(this.wallVertexArray,i,e),Kd(this.wallVertexArray,i,e)}if(l+=I,P=pp(l,k,!x),n=k,Yd(this.layoutVertexArray,C.x,C.y,M,E,0,0,P),Yd(this.layoutVertexArray,C.x,C.y,M,E,0,1,P),this.wallMode){const e=_(a,t),i=y.joinNormals[a];Kd(this.wallVertexArray,i,e),Kd(this.wallVertexArray,i,e)}if(i.vertexLength+=4,this.indexArray.emplaceBack(A+0,A+1,A+2),this.indexArray.emplaceBack(A+1,A+3,A+2),i.primitiveLength+=2,w){const r=e+(1===a?t.length-2:a-2),n=1===a?e:r+1;if(this.indexArray.emplaceBack(A+1,r,A+3),this.indexArray.emplaceBack(r,n,A+3),i.primitiveLength+=2,void 0===c&&(c=A),!up(b,t[a],T)){const e=a===t.length-1?c:i.vertexLength;this.indexArray.emplaceBack(A+2,A+3,e),this.indexArray.emplaceBack(A+3,e+1,e),this.indexArray.emplaceBack(A+3,n,e+1),i.primitiveLength+=3}x=!x}if(h){const e=this.layoutVertexExtArray,t=u.projectTilePoint(d.x,d.y,r),i=u.projectTilePoint(C.x,C.y,r),n=u.upVector(r,d.x,d.y),o=u.upVector(r,C.x,C.y);Qd(e,t,n),Qd(e,t,n),Qd(e,i,o),Qd(e,i,o)}}d&&(e+=t.length-1),m&&w&&this.zoom>=17&&(0!==s.length&&S(s,s[0])&&s.pop(),this.groundEffect.addData(s,T,l,w>0))}this.footprintSegments.push(o),n.triangleCount=this.indexArray.length-n.triangleArrayOffset,this.polygonSegments.push(n),++f.footprintSegLen,++f.polygonSegLen}if(f.vertexCount=this.layoutVertexArray.length-f.vertexArrayOffset,f.groundVertexCount=this.groundEffect.vertexArray.length-f.groundVertexArrayOffset,0!==f.vertexCount){if(f.centroidXY=p.borders?qd:this.encodeCentroid(p,f),this.centroidData.push(f),p.borders){this.featuresOnBorder.push(p);const e=this.featuresOnBorder.length-1;for(let t=0;t<p.borders.length;t++)p.borders[t][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[t].push(e)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,o,r,s,void 0,this.worldview),this.groundEffect.addPaintPropertiesData(e,i,n,o,r,s,this.worldview),this.maxHeight=Math.max(this.maxHeight,g)}}sortBorders(){for(let e=0;e<this.borderFeatureIndices.length;e++)this.borderFeatureIndices[e].sort((t,i)=>this.featuresOnBorder[t].borders[e][0]-this.featuresOnBorder[i].borders[e][0])}splitToSubtiles(){const e=[];for(let a=0;a<this.centroidData.length;a++){const t=this.centroidData[a],i=+(t.min.y+t.max.y>Or),r=2*i+(+(t.min.x+t.max.x>Or)^i);for(let n=0;n<t.polygonSegLen;n++){const i=t.polygonSegIdx+n;e.push({centroidIdx:a,subtile:r,polygonSegmentIdx:i,triangleSegmentIdx:this.polygonSegments[i].triangleSegIdx})}}const t=new bs;e.sort((e,t)=>e.triangleSegmentIdx===t.triangleSegmentIdx?e.subtile-t.subtile:e.triangleSegmentIdx-t.triangleSegmentIdx);let i=0,r=0,n=0;for(const a of e){if(a.triangleSegmentIdx!==i)break;n++}const o=e.length;for(;r!==e.length;){i=e[r].triangleSegmentIdx;let a=0,s=r,l=r;for(let t=s;t<n&&e[t].subtile===a;t++)l++;for(;s!==n;){const r=e[s];a=r.subtile;const o=this.centroidData[r.centroidIdx].min.clone(),c=this.centroidData[r.centroidIdx].max.clone(),u={vertexOffset:this.segments.segments[i].vertexOffset,primitiveOffset:t.length,vertexLength:this.segments.segments[i].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let i=s;i<l;i++){const r=e[i],n=this.polygonSegments[r.polygonSegmentIdx],a=this.centroidData[r.centroidIdx].min,s=this.centroidData[r.centroidIdx].max,l=this.indexArray.uint16;for(let e=n.triangleArrayOffset;e<n.triangleArrayOffset+n.triangleCount;e++)t.emplaceBack(l[3*e],l[3*e+1],l[3*e+2]);u.primitiveLength+=n.triangleCount,o.x=Math.min(o.x,a.x),o.y=Math.min(o.y,a.y),c.x=Math.max(c.x,s.x),c.y=Math.max(c.y,s.y)}u.primitiveLength>0&&this.triangleSubSegments.push({segment:u,min:o,max:c}),s=l;for(let t=s;t<n&&e[t].subtile===e[s].subtile;t++)l++}r=n;for(let t=r;t<o&&e[t].triangleSegmentIdx===e[r].triangleSegmentIdx;t++)n++}t._trim(),this.indexArray=t}getVisibleSegments(e,t,i){const r=new el;if(this.wallMode){for(const e of this.triangleSubSegments)r.segments.push(e.segment);return r}let n=0,o=0;const a=1<<e.canonical.z;if(t){const i=t.getMinMaxForTile(e);i&&(n=i.min,o=i.max)}o+=this.maxHeight;const s=e.toUnwrapped();let l;const c=[s.canonical.x/a+s.wrap,s.canonical.y/a],u=[(s.canonical.x+1)/a+s.wrap,(s.canonical.y+1)/a],h=(e,t,i)=>[e[0]*(1-i[0])+t[0]*i[0],e[1]*(1-i[1])+t[1]*i[1]],d=[],p=[];for(const f of this.triangleSubSegments){d[0]=f.min.x/Or,d[1]=f.min.y/Or,p[0]=f.max.x/Or,p[1]=f.max.y/Or;const e=h(c,u,d),t=h(c,u,p);if(0===new Wc([e[0],e[1],n],[t[0],t[1],o]).intersectsPrecise(i)){l&&(r.segments.push(l),l=void 0);continue}const a=f.segment;l&&l.vertexOffset!==a.vertexOffset&&(r.segments.push(l),l=void 0),l?(l.vertexLength+=a.vertexLength,l.primitiveLength+=a.primitiveLength):l={vertexOffset:a.vertexOffset,primitiveLength:a.primitiveLength,vertexLength:a.vertexLength,primitiveOffset:a.primitiveOffset,sortKey:void 0,vaos:{}}}return l&&r.segments.push(l),r}encodeCentroid(e,t){const i=e.centroid(),r=t.span(),n=Math.min(7,Math.round(r.x*this.tileToMeter/10)),o=Math.min(7,Math.round(r.y*this.tileToMeter/10));return new xe(Ae(i.x,1,Or-1)<<3|n,Ae(i.y,1,Or-1)<<3|o)}encodeBorderCentroid(e){if(!e.borders)return new xe(0,0);const t=e.borders,i=Number.MAX_VALUE;if(t[0][0]!==i||t[1][0]!==i){const e=t[0][0]!==i?0:1;return new xe(6|(t[0][0]!==i?0:65528),(t[e][0]+t[e][1])/2<<3|6)}{const e=t[2][0]!==i?2:3;return new xe((t[e][0]+t[e][1])/2<<3|6,6|(t[2][0]!==i?0:65528))}}showCentroid(e){const t=this.centroidData[e.centroidDataIndex];t.flags&=Xd,t.centroidXY.x=0,t.centroidXY.y=0,this.writeCentroidToBuffer(t)}writeCentroidToBuffer(e){this.groundEffect.updateHiddenByLandmark(e);const t=e.vertexArrayOffset,i=e.vertexCount+e.vertexArrayOffset,r=e.flags&Xd?qd:e.centroidXY,n=this.centroidVertexArray.geta_centroid_pos0(t);if(this.centroidVertexArray.geta_centroid_pos1(t)!==r.y||n!==r.x){for(let e=t;e<i;++e)this.centroidVertexArray.emplace(e,r.x,r.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const e of this.centroidData)this.writeCentroidToBuffer(e)}updateReplacement(e,t,i){if(t.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=t.updateTime;const r=t.getReplacementRegionsForTile(e.toUnwrapped());if(Od(this.activeReplacements,r))return;if(this.activeReplacements=r,0===this.centroidVertexArray.length)this.createCentroidsBuffer();else for(const o of this.centroidData)o.flags&=2147483647;const n=[];for(const o of this.activeReplacements){if(o.order<i)continue;const t=Math.max(1,Math.pow(2,o.footprintTileId.canonical.z-e.canonical.z));for(const i of this.centroidData)if(!(i.flags&Xd||o.min.x>i.max.x||i.min.x>o.max.x||o.min.y>i.max.y||i.min.y>o.max.y))for(let r=0;r<i.footprintSegLen;r++){const a=this.footprintSegments[i.footprintSegIdx+r];if(n.length=0,gp(this.footprintVertices,a.vertexOffset,a.vertexCount,o.footprintTileId.canonical,e.canonical,n),Dd(o.footprint,n,this.footprintIndices.uint16,a.indexOffset,a.indexCount,-a.vertexOffset,-t)){i.flags|=Xd;break}}}for(const o of this.centroidData)this.writeCentroidToBuffer(o);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(e,t,i){let r=!1;for(let n=0;n<i.footprintSegLen;n++){const o=this.footprintSegments[i.footprintSegIdx+n];let a=0;for(const i of o.ringIndices){for(let n=a,s=i+a-1;n<i+a;s=n++){const i=this.footprintVertices.int16[2*(n+o.vertexOffset)+0],a=this.footprintVertices.int16[2*(n+o.vertexOffset)+1],l=this.footprintVertices.int16[2*(s+o.vertexOffset)+1];a>t!=l>t&&e<(this.footprintVertices.int16[2*(s+o.vertexOffset)+0]-i)*(t-a)/(l-a)+i&&(r=!r)}a=i}}return r}getHeightAtTileCoord(e,t){let i=Number.NEGATIVE_INFINITY,r=!0;const n=4*(e+Or)*Or+(t+Or);if(this.partLookup.hasOwnProperty(n)){const e=this.partLookup[n];return e?{height:e.height,hidden:!!(e.flags&Xd)}:void 0}for(const o of this.centroidData)e>o.max.x||o.min.x>e||t>o.max.y||o.min.y>t||this.footprintContainsPoint(e,t,o)&&o&&o.height>i&&(i=o.height,this.partLookup[n]=o,r=!!(o.flags&Xd));if(i!==Number.NEGATIVE_INFINITY)return{height:i,hidden:r};this.partLookup[n]=void 0}}function sp(e,t){const i=e.add(t)._unit();return e.x*i.x+e.y*i.y}function lp(e,t,i,r){const n=t.sub(e)._perp()._unit(),o=i.sub(t)._perp()._unit();return cp(e,t,i,sp(n,o),r)}function cp(e,t,i,r,n){const o=Math.sqrt(1-r*r);return Math.min(e.dist(t)/3,t.dist(i)/3,n*o/r)}function up(e,t,i){return e.x<i[0].x&&t.x<i[0].x||e.x>i[1].x&&t.x>i[1].x||e.y<i[0].y&&t.y<i[0].y||e.y>i[1].y&&t.y>i[1].y}function hp(e,t){return e.x<t[0].x||e.x>t[1].x||e.y<t[0].y||e.y>t[1].y}function dp(e,t,i){if(e.x<0||e.x>=Or||t.x<0||t.x>=Or||i.x<0||i.x>=Or)return!1;const r=i.sub(t),n=r.perp(),o=e.sub(t);return(r.x*o.x+r.y*o.y)/Math.sqrt((r.x*r.x+r.y*r.y)*(o.x*o.x+o.y*o.y))>-.866&&n.x*o.x+n.y*o.y<0}function pp(e,t,i){const r=t?2|e:-3&e;return i?1|r:-2&r}function fp(){const e=Math.PI/32,t=Math.tan(e),i=Zl;return i*Math.sqrt(1+2*t*t)-i}function mp(e,t,i){const r=1<<i.z,n=ec(i.x/r),o=ec((i.x+1)/r),a=tc(i.y/r),s=tc((i.y+1)/r);return function(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0;const a=[];if(!e.length||!i||!r)return a;const s=(e,t)=>{for(const i of e)a.push({polygon:i,bounds:t})},l=Math.ceil(Math.log2(i)),c=Math.ceil(Math.log2(r)),u=l-c,h=[];for(let f=0;f<Math.abs(u);f++)h.push(u>0?0:1);for(let f=0;f<Math.min(l,c);f++)h.push(0),h.push(1);let d=e;if(d=sd(d,t[0].y-n,t[1].y+n,1),d=sd(d,t[0].x-n,t[1].x+n,0),!d.length)return a;const p=[];for(h.length?p.push({polygons:d,bounds:t,depth:0}):s(d,t);p.length;){const e=p.pop(),t=e.depth,i=h[t],r=e.bounds[0],a=e.bounds[1],l=0===i?r.x:r.y,c=0===i?a.x:a.y,u=o?o(i,l,c):.5*(l+c),d=sd(e.polygons,l-n,u+n,i),f=sd(e.polygons,u-n,c+n,i);if(d.length){const e=[r,new xe(0===i?u:a.x,1===i?u:a.y)];h.length>t+1?p.push({polygons:d,bounds:e,depth:t+1}):s(d,e)}if(f.length){const e=[new xe(0===i?u:r.x,1===i?u:r.y),a];h.length>t+1?p.push({polygons:f,bounds:e,depth:t+1}):s(f,e)}}return a}(e,t,Math.ceil((o-n)/11.25),Math.ceil((a-s)/11.25),1,(e,t,n)=>{if(0===e)return.5*(t+n);{const e=tc((i.y+t/Or)/r);return(Ql(.5*(tc((i.y+n/Or)/r)+e))*r-i.y)*Or}})}function gp(e,t,i,r,n,o){const a=Math.pow(2,r.z-n.z);for(let s=0;s<i;s++){let i=e.int16[2*(s+t)+0],l=e.int16[2*(s+t)+1];i=(i+n.x*Or)*a-r.x*Or,l=(l+n.y*Or)*a-r.y*Or,o.push(new xe(i,l))}}let yp,_p;Go(ap,"FillExtrusionBucket",{omit:["layers","features"]}),Go(ep,"PartData"),Go($d,"FootprintSegment"),Go(tp,"BorderCentroidData"),Go(op,"GroundEffect");class vp extends xe{constructor(e,t,i){super(e,t),this.z=i}}class xp extends vp{constructor(e,t,i,r){super(e,t,i),this.w=r}}function Cp(e,t,i,r){const n="x"===i?"y":"x",o=(r-e[i])/(t[i]-e[i]);e[n]=Math.round(e[n]+(t[n]-e[n])*o),e[i]=r,e.hasOwnProperty("z")&&(e.z=ci(e.z,t.z,o)),e.hasOwnProperty("w")&&(e.w=ci(e.w,t.w,o))}function wp(e,t,i,r){const n=i,o=r;for(const a of["x","y"]){let i=e,r=t;i[a]>=r[a]&&(i=t,r=e),i[a]<n&&r[a]>n&&Cp(i,r,a,n),i[a]<o&&r[a]>o&&Cp(r,i,a,o)}}function bp(e,t,i,r,n,o){const a=[];for(let s=0;s<e.length;s++){const l=e[s];let c;const u=a.length;let h=0;for(let e=0;e<l.length-1;e++){let u=l[e],d=l[e+1],p=0;const f=h;let m,g;o&&(p=Math.hypot(d.x-u.x,d.y-u.y),h+=p,m=u,g=d),u.x<t&&d.x<t||(u.x<t?u=new xe(t,u.y+(t-u.x)/(d.x-u.x)*(d.y-u.y))._round():d.x<t&&(d=new xe(t,u.y+(t-u.x)/(d.x-u.x)*(d.y-u.y))._round()),u.y<i&&d.y<i||(u.y<i?u=new xe(u.x+(i-u.y)/(d.y-u.y)*(d.x-u.x),i)._round():d.y<i&&(d=new xe(u.x+(i-u.y)/(d.y-u.y)*(d.x-u.x),i)._round()),u.x>=r&&d.x>=r||(u.x>=r?u=new xe(r,u.y+(r-u.x)/(d.x-u.x)*(d.y-u.y))._round():d.x>=r&&(d=new xe(r,u.y+(r-u.x)/(d.x-u.x)*(d.y-u.y))._round()),u.y>=n&&d.y>=n||(u.y>=n?u=new xe(u.x+(n-u.y)/(d.y-u.y)*(d.x-u.x),n)._round():d.y>=n&&(d=new xe(u.x+(n-u.y)/(d.y-u.y)*(d.x-u.x),n)._round()),c&&u.equals(c[c.length-1])||(c=[u],a.push(c),o&&o.push({progress:{min:f+Lp(m,g,u)*p,max:1},parentIndex:s,prevPoint:m,nextPoint:g})),c.push(d),o&&(o[o.length-1].progress.max=f+Lp(m,g,d)*p,o[o.length-1].nextPoint=g)))))}if(o&&h>0)for(let e=u;e<a.length;e++)o[e].progress.min/=h,o[e].progress.max/=h}return a}function Sp(e,t,i,r,n){if(e.length<2)return void r.push(e);const o=[];for(;t.valid();){const[i,r]=t.get();for(let t=0;t<e.length-1;t++){const n=e[t],a=e[t+1],s=nu(n,a,i,r);if(s){const[e]=s,i=new xe(ci(n.x,a.x,e),ci(n.y,a.y,e));o.push({t:t+e,distance:0,point:i})}}t.next()}if(0===o.length)return void r.push(e);o.sort((e,t)=>e.t-t.t);let a=0,s=0,l=[];for(r.push(l);a!==e.length;){if(s===o.length){for(;a!==e.length;)0!==l.length&&l[l.length-1].equals(e[a])||l.push(e[a]),a++;break}o[s].t<=a?(0!==l.length&&l[l.length-1].equals(o[s].point)||l.push(o[s].point),Math.trunc(o[s].t),s++):(0!==l.length&&l[l.length-1].equals(e[a])||l.push(e[a]),a++)}}function Lp(e,t,i){return e.x!==t.x?(i.x-e.x)/(t.x-e.x):e.y!==t.y?(i.y-e.y)/(t.y-e.y):0}function Tp(e,t){return e.x*t.x+e.y*t.y}function Mp(e,t){if(1===e.length){let i=0;const r=t[i++];let n;for(;!n||r.equals(n);)if(n=t[i++],!n)return 1/0;for(;i<t.length;i++){const o=t[i],a=e[0],s=n.sub(r),l=o.sub(r),c=a.sub(r),u=Tp(s,s),h=Tp(s,l),d=Tp(l,l),p=Tp(c,s),f=Tp(c,l),m=u*d-h*h,g=(d*p-h*f)/m,y=(u*f-h*p)/m,_=r.z*(1-g-y)+n.z*g+o.z*y;if(isFinite(_))return _}return 1/0}{let e=1/0;for(const i of t)e=Math.min(e,i.z);return e}}function Ep(e,t,i,r,n,o,a,s){const l=a*n.getElevationAt(e,t,!0,!0),c=0!==o[0],u=c?0===o[1]?a*(o[0]/7-450):a*function(e,t,i){const r=Math.floor(t[0]/8),n=Math.floor(t[1]/8),o=10*(t[0]-8*r),a=10*(t[1]-8*n),s=e.getElevationAt(r,n,!0,!0),l=e.getMeterToDEM(i),c=Math.floor(.5*(o*l-1)),u=Math.floor(.5*(a*l-1)),h=e.tileCoordToPixel(r,n),d=2*c+1,p=2*u+1,f=function(e,t,i,r,n){return[e.getElevationAtPixel(t,i,!0),e.getElevationAtPixel(t+n,i,!0),e.getElevationAtPixel(t,i+n,!0),e.getElevationAtPixel(t+r,i+n,!0)]}(e,h.x-c,h.y-u,d,p),m=Math.abs(f[0]-f[1]),g=Math.abs(f[2]-f[3]),y=Math.abs(f[0]-f[2])+Math.abs(f[1]-f[3]),_=Math.min(.25,.5*l*(m+g)/d),v=Math.min(.25,.5*l*y/p);return s+Math.max(_*o,v*a)}(n,o,s):l;return{base:l+(0===i?-1:i),top:c?Math.max(u+r,l+i+2):l+r}}class Ip{constructor(e){this._callback=e,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ap{constructor(){this.tasks={},this.taskQueue=[],Be(["process"],this),this.invoker=new Ip(this.process),this.nextId=0}add(e,t){const i=this.nextId++,r=function(e){let{type:t,isSymbolTile:i,zoom:r}=e;return r=r||0,"message"===t?0:"maybePrepare"!==t||i?"parseTile"!==t||i?"parseTile"===t&&i?300-r:"maybePrepare"===t&&i?400-r:500:200-r:100-r}(t);if(0===r){try{e()}finally{}return null}return this.tasks[i]={fn:e,metadata:t,priority:r,id:i},this.taskQueue.push(i),this.invoker.trigger(),{cancel:()=>{delete this.tasks[i]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(e=>!!this.tasks[e]),!this.taskQueue.length)return;const e=this.pick();if(null===e)return;const t=this.tasks[e];if(delete this.tasks[e],this.taskQueue.length&&this.invoker.trigger(),!t)return;t.fn()}finally{}}pick(){let e=null,t=1/0;for(let r=0;r<this.taskQueue.length;r++){const i=this.tasks[this.taskQueue[r]];i.priority<t&&(t=i.priority,e=r)}if(null===e)return null;const i=this.taskQueue[e];return this.taskQueue.splice(e,1),i}remove(){this.invoker.remove()}}class kp{constructor(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.cancelCallbacks={},Be(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Ap}send(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5?arguments[5]:void 0;const a=Math.round(1e18*Math.random()).toString(36).substring(0,10);i&&(i.metadata=o,this.callbacks[a]=i);const s=new Set;return this.target.postMessage({id:a,type:e,hasCallback:!!i,targetMapId:r,mustQueue:n,sourceMapId:this.mapId,data:Yo(t,s)},s),{cancel:()=>{i&&delete this.callbacks[a],this.target.postMessage({id:a,type:"<cancel>",targetMapId:r,sourceMapId:this.mapId})}}}receive(e){const t=e.data;if(!t)return;const i=t.id;if(i&&(!t.targetMapId||this.mapId===t.targetMapId))if("<cancel>"===t.type){const e=this.cancelCallbacks[i];delete this.cancelCallbacks[i],e&&e.cancel()}else if(t.mustQueue||Xe(self)){const e=this.callbacks[i],r=this.scheduler.add(()=>this.processTask(i,t),e&&e.metadata||{type:"message"});r&&(this.cancelCallbacks[i]=r)}else this.processTask(i,t)}processTask(e,t){if(delete this.cancelCallbacks[e],"<response>"===t.type){const i=this.callbacks[e];delete this.callbacks[e],i&&(t.error?i(Ko(t.error)):i(null,Ko(t.data)))}else{const i=new Set,r=t.hasCallback?(t,r)=>{this.target.postMessage({id:e,type:"<response>",sourceMapId:this.mapId,error:t?Yo(t):null,data:Yo(r,i)},i)}:()=>{},n=Ko(t.data);if(this.parent[t.type])this.parent[t.type](t.sourceMapId,n,r);else if(this.parent.getWorkerSource){const e=t.type.split("."),{source:i,scope:o}=n;this.parent.getWorkerSource(t.sourceMapId,e[0],i,o)[e[1]](n,r)}else r(new Error("Could not find function ".concat(t.type)))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Pp={workerUrl:"",workerClass:null,workerParams:void 0};const Op="mapboxgl_preloaded_worker_pool";class Rp{constructor(){this.active={}}acquire(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Rp.workerCount;if(!this.workers)for(this.workers=[];this.workers.length<t;)this.workers.push(null!=Pp.workerClass?new Pp.workerClass:new self.Worker(Pp.workerUrl,Pp.workerParams));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.workers&&0===this.numActive()&&(this.workers.forEach(e=>{e.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Op]}numActive(){return Object.keys(this.active).length}}Rp.workerCount=2;class zp{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Worker",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rp.workerCount;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=De();const n=this.workerPool.acquire(this.id,r);for(let o=0;o<n.length;o++){const e=new zp.Actor(n[o],t,this.id);e.name="".concat(i," ").concat(o),this.actors.push(e)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(e,t,i){Oe(this.actors,(i,r)=>{i.send(e,t,r)},i=i||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(e=>{e.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Dp,Fp;function Bp(){return Dp||(Dp=new Rp),Dp}zp.Actor=kp;class Vp{constructor(e){this.module=e}createIntArray(e){const t=new Int32Array(e),i=this.module.malloc(t.length*t.BYTES_PER_ELEMENT);return this.module.heap32.set(t,i/t.BYTES_PER_ELEMENT),i}createFloatArray(e){const t=new Float32Array(e),i=this.module.malloc(t.length*t.BYTES_PER_ELEMENT);return this.module.heapF32.set(t,i/t.BYTES_PER_ELEMENT),i}createStringBuffer(e){const t=this.module.malloc(e.length+1);for(let i=0;i<e.length;++i)this.module.heapU8[t+i]=e.charCodeAt(i);return this.module.heapU8[t+e.length]=0,t}readStringBuffer(e){let t="";for(;0!==this.module.heapU8[e];)t+=String.fromCharCode(this.module.heapU8[e]),++e;return t}setStyle(e){const t=e.entranceColorRgb,i=e.facadeGlazingColorRgb,r=e.roofColorRgb,n=e.wallColorRgb,o=e.normalScale;this.module.setStyle(t[0],t[1],t[2],i[0],i[1],i[2],r[0],r[1],r[2],n[0],n[1],n[2],o[0],o[1],o[2],e.tileToMeters)}setAOOptions(e,t){this.module.setAOOptions(e?1:0,t)}setMetricOptions(e,t){this.module.setMetricOptions(e?1:0,t)}setFacadeOptions(e,t,i){this.module.setFacadeOptions(e,t,i)}generateMesh(e,t){for(const a of e){const e=this.createStringBuffer(a.roofType),t=[0],i=[];for(const o of a.coordinates)if(Array.isArray(o)){for(const e of o)i.push(e.x),i.push(e.y);t.push(i.length)}const r=this.createIntArray(t),n=this.createFloatArray(i);this.module.addFeature(a.id,a.sourceId,a.minHeight,a.height,e,a.roofType.length,n,r,t.length-1),this.module.free(e),this.module.free(r),this.module.free(n)}for(const a of t){let e;e=a.entrances?JSON.parse(a.entrances):[];const t=this.createFloatArray(e),i=[];for(const n of a.coordinates)i.push(n.x),i.push(n.y);const r=this.createFloatArray(i);this.module.addFacade(a.sourceId,a.crossPerc,a.distanceToRoad,t,e.length,r,i.length),this.module.free(t),this.module.free(r)}if(!this.module.generateMesh()){const e=this.module.getLastError();return this.readStringBuffer(e)}const i=this.module.getMeshCount(),r=new Array(i);for(let a=0;a<i;a++){const e=this.module.getPositionsPtr(a),t=this.module.getPositionsLength(a),i=new Float32Array(this.module.heapF32.buffer,e,t),n=this.module.getNormalsPtr(a),o=this.module.getNormalsLength(a),s=new Float32Array(this.module.heapF32.buffer,n,o),l=this.module.getColorsPtr(a),c=this.module.getColorsLength(a),u=new Uint8Array(this.module.heapU8.buffer,l,c),h=this.module.getAOPtr(a),d=this.module.getAOLength(a),p=new Float32Array(this.module.heapF32.buffer,h,d),f=this.module.getIndicesPtr(a),m=this.module.getIndicesLength(a),g=new Int32Array(this.module.heap32.buffer,f,m),y=this.module.getBuildingPart(a),_=this.readStringBuffer(y);r[a]={positions:i,normals:s,colors:u,ao:p,indices:g,buildingPart:_}}const n=this.module.getRingCount(),o=[];for(let a=0;a<n;a++){const e=this.module.getRingPtr(a),t=this.module.getRingLength(a),i=new Float32Array(this.module.heapF32.buffer,e,t);o.push(i)}return{meshes:r,modifiedPolygonRings:o}}}let Np,Up,jp,Hp,Zp,Wp=null,Gp=null,qp=null,Xp=null;function Yp(){return Xe(self)&&self.worker.dracoUrl?self.worker.dracoUrl:Up||rt.DRACO_URL}function Kp(){if(Xe(self)&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(Hp)return Hp;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if("object"!=typeof WebAssembly)throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return Hp=WebAssembly.validate(e)?rt.MESHOPT_SIMD_URL:rt.MESHOPT_URL,Hp}const Jp={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Qp={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},$p={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function ef(e,t,i){const r=i.json.bufferViews.length,n=i.buffers.length;t.bufferView=r,i.json.bufferViews[r]={buffer:n,byteLength:e.byteLength},i.buffers[n]=e}const tf="KHR_draco_mesh_compression";function rf(e,t){const i=e.extensions&&e.extensions[tf];if(!i)return;const r=new jp.Decoder,n=uf(t,i.bufferView),o=new jp.Mesh;if(!r.DecodeArrayToMesh(n,n.byteLength,o))throw new Error("Failed to decode Draco mesh");const a=t.json.accessors[e.indices],s=Jp[a.componentType],l=a.count*s.BYTES_PER_ELEMENT,c=jp._malloc(l);s===Uint16Array?r.GetTrianglesUInt16Array(o,l,c):r.GetTrianglesUInt32Array(o,l,c),ef(jp.memory.buffer.slice(c,c+l),a,t),jp._free(c);for(const u of Object.keys(i.attributes)){const n=r.GetAttributeByUniqueId(o,i.attributes[u]),a=t.json.accessors[e.attributes[u]],s=Qp[a.componentType],l=a.count*$p[a.type]*Jp[a.componentType].BYTES_PER_ELEMENT,c=jp._malloc(l);r.GetAttributeDataArrayForAllPoints(o,n,jp[s],l,c),ef(jp.memory.buffer.slice(c,c+l),a,t),jp._free(c)}r.destroy(),o.destroy(),delete e.extensions[tf]}const nf="EXT_meshopt_compression";function of(e,t){if(!e.extensions||!e.extensions[nf])return;const i=e.extensions[nf],r=new Uint8Array(t.buffers[i.buffer],i.byteOffset||0,i.byteLength||0),n=new Uint8Array(i.count*i.byteStride);Zp.decodeGltfBuffer(n,i.count,i.byteStride,r,i.mode,i.filter),e.buffer=t.buffers.length,e.byteOffset=0,t.buffers[e.buffer]=n.buffer,delete e.extensions[nf]}const af=1179937895,sf=new TextDecoder("utf8");function lf(e,t){return new URL(e,t).href}function cf(e,t,i,r){return fetch(lf(e.uri,r)).then(e=>e.arrayBuffer()).then(e=>{t.buffers[i]=e})}function uf(e,t){const i=e.json.bufferViews[t];return new Uint8Array(e.buffers[i.buffer],i.byteOffset||0,i.byteLength)}function hf(e,t,i,r){if(e.uri){const n=lf(e.uri,r);return fetch(n).then(e=>e.blob()).then(e=>createImageBitmap(e)).then(e=>{t.images[i]=e})}if(void 0!==e.bufferView){const r=uf(t,e.bufferView),n=new Blob([r],{type:e.mimeType});return createImageBitmap(n).then(e=>{t.images[i]=e})}}function df(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2?arguments[2]:void 0;const r={json:null,images:[],buffers:[]};if(new Uint32Array(e,t,1)[0]===af){const i=new Uint32Array(e,t);let n=2;const o=(i[n++]>>2)-3,a=i[n++]>>2;if(n++,r.json=JSON.parse(sf.decode(i.subarray(n,n+a))),n+=a,n<o){const o=i[n++];n++;const a=t+(n<<2);r.buffers[0]=e.slice(a,a+o)}}else r.json=JSON.parse(sf.decode(new Uint8Array(e,t)));const{buffers:n,images:o,meshes:a,extensionsUsed:s,bufferViews:l}=r.json;let c=Promise.resolve();if(n){const e=[];for(let t=0;t<n.length;t++){const o=n[t];o.uri?e.push(cf(o,r,t,i)):r.buffers[t]||(r.buffers[t]=null)}c=Promise.all(e)}return c.then(()=>{const e=[],t=s&&s.includes(tf),n=s&&s.includes(nf);if(t&&e.push(function(){if(!jp)return null!=Np?Np:(Np=function(e){let t,i=null;function r(){t=new Uint8Array(i.buffer)}function n(){throw new Error("Unexpected Draco error.")}const o={a:{a:n,d:function(e,i,r){return t.copyWithin(e,i,i+r)},c:function(e){const n=t.length,o=Math.max(e>>>0,Math.ceil(1.2*n)),a=Math.ceil((o-n)/65536);try{return i.grow(a),r(),!0}catch(e){return!1}},b:n}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(e,o):e.then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,o))).then(e=>{const{Rb:n,Qb:o,P:a,T:s,X:l,Ja:c,La:u,Qa:h,Va:d,Wa:p,eb:f,jb:m,f:g,e:y,yb:_,zb:v,Ab:x,Bb:C,Db:w,Gb:b}=e.instance.exports;i=y;const S=(()=>{let e=0,i=0,r=0,a=0;return s=>{r&&(n(a),n(e),i+=r,r=e=0),e||(i+=128,e=o(i));const l=s.length+7&-8;let c=e;l>=i&&(r=l,c=a=o(l));for(let e=0;e<s.length;e++)t[c+e]=s[e];return c}})();return r(),g(),{memory:y,_free:n,_malloc:o,Mesh:class{constructor(){this.ptr=a()}destroy(){s(this.ptr)}},Decoder:class{constructor(){this.ptr=c()}destroy(){m(this.ptr)}DecodeArrayToMesh(e,t,i){const r=S(e),n=u(this.ptr,r,t,i.ptr);return!!l(n)}GetAttributeByUniqueId(e,t){return{ptr:h(this.ptr,e.ptr,t)}}GetTrianglesUInt16Array(e,t,i){d(this.ptr,e.ptr,t,i)}GetTrianglesUInt32Array(e,t,i){p(this.ptr,e.ptr,t,i)}GetAttributeDataArrayForAllPoints(e,t,i,r,n){f(this.ptr,e.ptr,t.ptr,i,r,n)}},DT_INT8:_(),DT_UINT8:v(),DT_INT16:x(),DT_UINT16:C(),DT_UINT32:w(),DT_FLOAT32:b()}})}(fetch(Yp())),Np.then(e=>{jp=e,Np=void 0}))}()),n&&e.push(function(){if(Zp)return;const e=function(e){let t;const i=WebAssembly.instantiateStreaming(e,{}).then(e=>{t=e.instance,t.exports.__wasm_call_ctors()}),r={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},n={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:i,supported:!0,decodeGltfBuffer(e,i,o,a,s,l){!function(e,t,i,r,n,o,a){const s=e.exports.sbrk,l=r+3&-4,c=s(l*n),u=s(o.length),h=new Uint8Array(e.exports.memory.buffer);h.set(o,u);const d=t(c,r,n,u,o.length);if(0===d&&a&&a(c,l,n),i.set(h.subarray(c,c+r*n)),s(c-s(0)),0!==d)throw new Error("Malformed buffer data: ".concat(d))}(t,t.exports[n[s]],e,i,o,a,t.exports[r[l]])}}}(fetch(Kp()));return e.ready.then(()=>{Zp=e})}()),o)for(let a=0;a<o.length;a++)e.push(hf(o[a],r,a,i));return(e.length?Promise.all(e):Promise.resolve()).then(()=>{if(t&&a)for(const{primitives:e}of a)for(const t of e)rf(t,r);if(n&&a&&l)for(const e of l)of(e,r);return r})})}class pf{constructor(e){this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.hasPattern=!1,this.worldview=e.worldview}updateFootprints(e,t){}prepare(){return function(){if(null!=Xp||null!=qp)return null;if(null!=Gp)return Gp;const e=fetch(rt.BUILDING_GEN_URL);return Gp=function(e){let t,i,r,n;function o(){t=new Uint8Array(n.buffer),i=new Int32Array(n.buffer),r=new Float32Array(n.buffer)}function a(){throw new Error("Unexpected BuildingGen error.")}const s=()=>{},l={a:{a:a,f:function(e){const i=t.length,r=Math.max(e>>>0,Math.ceil(1.2*i)),a=Math.ceil((r-i)/65536);try{return n.grow(a),o(),!0}catch(e){return!1}},g:a,b:s,c:s,d:s,e:s}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(e,l):e.then(e=>e.arrayBuffer()).then(e=>WebAssembly.instantiate(e,l))).then(e=>{const a=e.instance.exports;return(0,a.g)(),n=a.f,o(),new Vp({setStyle:a.h,setAOOptions:a.i,setMetricOptions:a.j,setFacadeOptions:a.k,addFeature:a.l,addFacade:a.m,generateMesh:a.n,getLastError:a.o,getMeshCount:a.p,getPositionsPtr:a.q,getPositionsLength:a.r,getNormalsPtr:a.s,getNormalsLength:a.t,getColorsPtr:a.u,getColorsLength:a.v,getAOPtr:a.w,getAOLength:a.x,getIndicesPtr:a.y,getIndicesLength:a.z,getBuildingPart:a.A,getRingCount:a.B,getRingPtr:a.C,getRingLength:a.D,free:a.E,malloc:a.F,heapU8:t,heap32:i,heapF32:r})})}(e).then(e=>(Gp=null,Xp=e,Xp)).catch(e=>{Ze("Could not load building-gen"),Gp=null,qp=e}),Gp}()}populate(e,t,i,r){}update(e,t,i,r,n,o,a){}isEmpty(){return!1}uploadPending(){return!1}upload(e){}destroy(){}getHeightAtTileCoord(e,t){return{height:Number.NEGATIVE_INFINITY,hidden:!0}}}let ff,mf;Go(pf,"BuildingBucket",{omit:["layers"]});const gf=es([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),yf=es([{name:"a_z_offset_width",components:3,type:"Float32"}],4),{members:_f}=gf,vf=es([{name:"a_packed",components:3,type:"Float32"}]),{members:xf}=vf,Cf=es([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:wf}=Cf;class bf{constructor(e,t){this.width=e,this.height=t,this.nextRow=0,this.image=new mh({width:e,height:t}),this.positions={},this.uploaded=!1}getDash(e,t){const i=this.getKey(e,t);return this.positions[i]}trim(){const e=this.width,t=this.height=Fe(this.nextRow);this.image.resize({width:e,height:t})}getKey(e,t){return e.join(",")+t}getDashRanges(e,t,i){const r=[];let n=e.length%2==1?-e[e.length-1]*i:0,o=e[0]*i,a=!0;r.push({left:n,right:o,isDash:a,zeroLength:0===e[0]});let s=e[0];for(let l=1;l<e.length;l++){a=!a;const t=e[l];n=s*i,s+=t,o=s*i,r.push({left:n,right:o,isDash:a,zeroLength:0===t})}return r}addRoundDash(e,t,i){const r=t/2;for(let n=-i;n<=i;n++){const t=this.width*(this.nextRow+i+n);let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const l=Math.abs(s-a.left),c=Math.abs(s-a.right),u=Math.min(l,c);let h;const d=n/i*(r+1);if(a.isDash){const e=r-Math.abs(d);h=Math.sqrt(u*u+e*e)}else h=r-Math.sqrt(u*u+d*d);this.image.data[t+s]=Math.max(0,Math.min(255,h+128))}}}addRegularDash(e,t){for(let s=e.length-1;s>=0;--s){const t=e[s],i=e[s+1];t.zeroLength?e.splice(s,1):i&&i.isDash===t.isDash&&(i.left=t.left,e.splice(s,1))}const i=e[0],r=e[e.length-1];i.isDash===r.isDash&&(i.left=r.left-this.width,r.right=i.right+this.width);const n=this.width*this.nextRow;let o=0,a=e[o];for(let s=0;s<this.width;s++){s/a.right>1&&(a=e[++o]);const i=Math.abs(s-a.left),r=Math.abs(s-a.right),l=Math.min(i,r);this.image.data[n+s]=Math.max(0,Math.min(255,(a.isDash?l:-l)+t+128))}}addDash(e,t){const i=this.getKey(e,t);if(this.positions[i])return this.positions[i];const r="round"===t,n=r?7:0,o=2*n+1;if(this.nextRow+o>this.height)return Ze("LineAtlas out of space"),null;0===e.length&&e.push(1);let a=0;for(let c=0;c<e.length;c++)e[c]<0&&(Ze("Negative value is found in line dasharray, replacing values with 0"),e[c]=0),a+=e[c];if(0!==a){const i=this.width/a,o=this.getDashRanges(e,this.width,i);r?this.addRoundDash(o,i,n):this.addRegularDash(o,"square"===t?.5*i:0)}const s=this.nextRow+n;this.nextRow+=o;const l={tl:[s,n],br:[a,0]};return this.positions[i]=l,l}}Go(bf,"LineAtlas");const Sf=Ic.VectorTileFeature.types,Lf=Math.cos(Math.PI/180*37.5),Tf=Math.cos(Math.PI/180*5);class Mf{constructor(e){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.elevationType="none",this.zoom=e.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=e.overscaling,this.pixelRatio=e.pixelRatio,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.projection=e.projection,this.hasPattern=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(e=>{this.gradients[e.id]={}}),this.layoutVertexArray=new cs,this.layoutVertexArray2=new us,this.patternVertexArray=new us,this.indexArray=new bs,this.programConfigurations=new El(e.layers,{zoom:e.zoom,lut:e.lut}),this.segments=new el,this.maxLineLength=0,this.zOffsetVertexArray=new us,this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.tessellationStep=e.tessellationStep?e.tessellationStep:Or/64,this.worldview=e.worldview}updateFootprints(e,t){}populate(e,t,i,r){this.hasPattern=Qh("line",this.layers,this.pixelRatio,t);const n=this.layers[0].layout.get("line-sort-key");this.tileToMeter=sc(i);const o=this.layers[0].layout.get("line-elevation-reference");if("hd-road-markup"===o)this.elevationType="road";else{const e=this.layers[0].layout.get("line-z-offset"),t=e.isConstant()&&!e.constantOr(0);this.elevationType="sea"!==o&&"ground"!==o&&t?"none":"offset","offset"===this.elevationType&&"none"===o&&Ze("line-elevation-reference: ground is used for the layer ".concat(this.layerIds[0]," because non-zero line-z-offset value was found."))}const a=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope="offset"===this.elevationType&&void 0!==a;const s=[];for(const{feature:h,id:d,index:p,sourceLayerIndex:f}of e){const e=this.layers[0]._featureFilter.needGeometry,t=yc(h,e);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),t,i))continue;const o=n?n.evaluate(t,{},i):void 0,a={id:d,properties:h.properties,type:h.type,sourceLayerIndex:f,index:p,geometry:e?t.geometry:gc(h,i,r),patterns:{},sortKey:o};s.push(a)}n&&s.sort((e,t)=>e.sortKey-t.sortKey);const{lineAtlas:l,featureIndex:c}=t,u=this.addConstantDashes(l);for(const h of s){const{geometry:r,index:n,sourceLayerIndex:o}=h;if(u&&this.addFeatureDashes(h,l),this.hasPattern){const e=$h("line",this.layers,h,this.zoom,this.pixelRatio,t);this.patternFeatures.push(e)}else this.addFeature(h,r,n,i,l.positions,t.availableImages,t.brightness,t.elevationFeatures);c.insert(e[n].feature,r,n,o,this.index)}}addConstantDashes(e){let t=!1;for(const i of this.layers){const r=i.paint.get("line-dasharray").value,n=i.layout.get("line-cap").value;if("constant"!==r.kind||"constant"!==n.kind)t=!0;else{const t=n.value,i=r.value;if(!i)continue;e.addDash(i,t)}}return t}addFeatureDashes(e,t){const i=this.zoom;for(const r of this.layers){const n=r.paint.get("line-dasharray").value,o=r.layout.get("line-cap").value;if("constant"===n.kind&&"constant"===o.kind)continue;let a,s;if("constant"===n.kind){if(a=n.value,!a)continue}else a=n.evaluate({zoom:i},e);s="constant"===o.kind?o.value:o.evaluate({zoom:i},e),t.addDash(a,s),e.patterns[r.id]=[t.getKey(a,s)]}}update(e,t,i,r,n,o,a,s){this.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,s)}addFeatures(e,t,i,r,n,o){for(const a of this.patternFeatures)this.addFeature(a,a.geometry,a.index,t,i,r,o)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(e){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=e.createVertexBuffer(this.layoutVertexArray2,xf)),0!==this.patternVertexArray.length&&(this.patternVertexBuffer=e.createVertexBuffer(this.patternVertexArray,wf)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,yf.members,!0)),this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,_f),this.indexBuffer=e.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(e),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(e){if(e.properties&&e.properties.hasOwnProperty("mapbox_clip_start")&&e.properties.hasOwnProperty("mapbox_clip_end"))return{start:+e.properties.mapbox_clip_start,end:+e.properties.mapbox_clip_end}}addFeature(e,t,i,r,n,o,a,s){const l=this.layers[0].layout,c=l.get("line-join").evaluate(e,{}),u=l.get("line-cap").evaluate(e,{}),h=l.get("line-miter-limit"),d=l.get("line-round-limit");this.lineClips=this.lineFeatureClips(e),this.lineFeature=e,this.zOffsetValue=l.get("line-z-offset").value;const p=this.layers[0].paint.get("line-width").value;if("constant"!==p.kind&&!1===p.isLineProgressConstant&&(this.variableWidthValue=p),"road"===this.elevationType){const i=this.layoutVertexArray.length;if(!this.addElevatedRoadFeature(e,t,r,s,c,u,h,d)){const[n,o]=this.clipRuntimeLinesToTile(t,1);for(let t=0;t<n.length;t++){const i=n[t],a=o[t],s={progress:{min:a.progress.min,max:a.progress.max},nextDir:this.computeSegNextDir(a,i),prevDir:this.computeSegPrevDir(a,i)};this.addLine(i,e,r,c,u,h,d,s)}this.fillNonElevatedRoadSegment(i)}}else for(const f of t)this.addLine(f,e,r,c,u,h,d);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e,i,n,o,r,a,void 0,this.worldview)}computeSegNextDir(e,t){return e.nextPoint.sub(t.at(-2)).unit()}computeSegPrevDir(e,t){return t[1].sub(e.prevPoint).unit()}clipLinesToTile(e,t){return bp(e,-t,-t,Or+t,Or+t)}clipRuntimeLinesToTile(e,t){const i=[];return[bp(e,-t,-t,Or+t,Or+t,i),i]}addElevatedRoadFeature(e,t,i,r,n,o,a,s){const l=[],c=Xc.getElevationFeature(e,r);if(c){const e=this.clipLinesToTile(t,1),r=this.prepareElevatedLines(e,c,i);for(const t of r)l.push({geometry:t,elevation:c,elevationTileID:i,segment:{progress:{min:0,max:1},nextDir:void 0,prevDir:void 0}})}if(0===l.length)return!1;for(const u of l){const t=this.layoutVertexArray.length;this.addLine(u.geometry,e,i,n,o,a,s);const r=new Yc(i,u.elevationTileID);if(u.elevation)for(let e=t;e<this.layoutVertexArray.length;e++){const t=new xe(this.layoutVertexArray.int16[6*e]>>1,this.layoutVertexArray.int16[6*e+1]>>1),i=r.pointElevation(t,u.elevation,.05);this.updateHeightRange(i),this.zOffsetVertexArray.emplaceBack(i,0,0)}else this.fillNonElevatedRoadSegment(t)}return!0}prepareElevatedLines(e,t,i){if(null!=t.constantHeight)return e;const r=[],n=1/sc(i);for(const o of e)Sp(o,new Gc(t,n),0,r);return r}fillNonElevatedRoadSegment(e){for(let t=e;t<this.layoutVertexArray.length;t++)this.zOffsetVertexArray.emplaceBack(0,0,0)}updateHeightRange(e){this.heightRange?(this.heightRange.min=Math.min(this.heightRange.min,e),this.heightRange.max=Math.max(this.heightRange.max,e)):this.heightRange={min:e,max:e}}addLine(e,t,i,r,n,o,a,s){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const l="none"===r;this.patternJoinNone=this.hasPattern&&l,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[];const c=s&&s.progress.min>0,u=s&&s.progress.max<1;if(this.lineClips){let i={min:this.lineClips.start,max:this.lineClips.end},r=1;if(s){const e=this.lineClips.end-this.lineClips.start;i=function(e,t,i){return{min:it(e.min,t,i),max:it(e.max,t,i)}}(s.progress,{min:0,max:1},i),e>0&&(r=(i.max-i.min)/e)}const n=+t.properties.mapbox_clip_feature_len,o=+t.properties.mapbox_clip_seg_len;if(Number.isNaN(n)||Number.isNaN(o)){for(let i=0;i<e.length-1;i++)this.totalDistance+=e[i].dist(e[i+1]);const t=this.totalDistance/(i.max-i.min);this.totalFeatureLength=Number.isFinite(t)?t:0,this.lineClips.start=i.min,this.lineClips.end=i.max,this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}else this.totalFeatureLength=n,this.distance=o*r,this.lineClips.start=i.min,this.lineClips.end=i.max,this.maxLineLength=Math.max(this.maxLineLength,this.distance);this.lineClipsArray.push(this.lineClips),this.updateScaledDistance()}const h="Polygon"===Sf[t.type];let d=e.length;for(;d>=2&&e[d-1].equals(e[d-2]);)d--;let p=0;for(;p<d-1&&e[p].equals(e[p+1]);)p++;if(d<(h?3:2))return;"bevel"===r&&(o=1.05);const f=this.segments.prepareSegment(10*d,this.layoutVertexArray,this.indexArray);let m,g,y,_,v,x,C,w;s&&s.prevDir&&(x=s.prevDir.perp()),s&&s.nextDir&&(C=s.nextDir.perp()),this.e1=this.e2=-1,h&&(m=e[d-2],v=e[p].sub(m)._unit()._perp());for(let b=p;b<d;b++){if(y=b===d-1?h?e[p+1]:void 0:e[b+1],y&&e[b].equals(y))continue;v&&(_=v),m&&(g=m),m=e[b],w=this.evaluateLineProgressFeatures(g?g.dist(m):0),v=y?y.sub(m)._unit()._perp():_,_=_||v;const t=g&&y;let i=t?r:h||l?"butt":n;const s=_.x*v.x+_.y*v.y;if(l){const e=function(e){if(e.patternJoinNone){const t=e.segmentPoints.length/2,i=e.lineSoFar-e.segmentStart;for(let r=0;r<t;++r){const t=e.segmentPoints[2*r+1],n=Math.round(e.segmentPoints[2*r])+.5+.25*t;e.patternVertexArray.emplaceBack(n,i,e.segmentStart),e.patternVertexArray.emplaceBack(n,i,e.segmentStart)}e.segmentPoints.length=0}e.e1=e.e2=-1};if(t&&s<Tf){this.updateDistance(g,m),this.addCurrentVertex(m,_,1,1,f,w),e(this),this.addCurrentVertex(m,v,-1,-1,f,w);continue}if(g){if(!y){this.updateDistance(g,m),this.addCurrentVertex(m,_,1,1,f,w),e(this);continue}i="miter"}}let S=_.add(v);0===S.x&&0===S.y||S._unit();const L=S.x*v.x+S.y*v.y,T=0!==L?1/L:1/0,M=2*Math.sqrt(2-2*L),E=L<Lf&&g&&y,I=_.x*v.y-_.y*v.x>0,A=this.overscaling<=16?15*Or/(512*this.overscaling):0;if(t&&"round"===i)if(T<a)i="miter";else if(T<=2){const e=Ef(m,-10,Or+10);i="offset"===this.elevationType&&(e||this.hasCrossSlope)?"miter":"fakeround"}if("miter"===i&&T>o&&(i="bevel"),"bevel"===i&&(T>2&&(i="flipbevel"),T<o&&(i="miter")),g&&!("miter"===i&&E)&&this.updateDistance(g,m),"miter"===i)if(E){const e=m.dist(g);if(e>2*A){const t=m.sub(m.sub(g)._mult(A/e)._round());this.updateDistance(g,t),this.addCurrentVertex(t,_,0,0,f,w),g=t}this.updateDistance(g,m),S._mult(T),this.addCurrentVertex(m,S,0,0,f,w);const t=m.dist(y);if(t>2*A){const e=m.add(y.sub(m)._mult(A/t)._round());this.updateDistance(m,e),this.addCurrentVertex(e,v,0,0,f,w),m=e}}else S._mult(T),this.addCurrentVertex(m,S,0,0,f,w);else if("flipbevel"===i){if(T>100)S=v.mult(-1);else{const e=T*_.add(v).mag()/_.sub(v).mag();S._perp()._mult(e*(I?-1:1))}this.addCurrentVertex(m,S,0,0,f,w),this.addCurrentVertex(m,S.mult(-1),0,0,f,w)}else if("bevel"===i||"fakeround"===i){null!=w&&g&&this.addCurrentVertex(m,C||_,-1,-1,f,w);const e=m.dist(g)<=2*A&&"bevel"!==i,t=S.mult(I?1:-1);t._mult(T);const r=v.mult(I?-1:1),n=_.mult(I?-1:1),o=this.evaluateLineProgressFeatures(this.distance);if(null==w&&(this.addHalfVertex(m,t.x,t.y,!1,!I,0,f,o),e||this.addHalfVertex(m,t.x+2*n.x,t.y+2*n.y,!1,I,0,f,o)),"fakeround"===i){const e=Math.round(180*M/Math.PI/20);this.addHalfVertex(m,n.x,n.y,!1,I,0,f,o);for(let t=0;t<e;t++){let i=t/e;if(.5!==i){const e=i-.5;i+=i*e*(i-1)*((1.0904+s*(s*(3.55645-1.43519*s)-3.2452))*e*e+(.848013+s*(.215638*s-1.06021)))}const a=r.sub(n)._mult(i)._add(n)._unit();this.addHalfVertex(m,a.x,a.y,!1,I,0,f,o)}this.addHalfVertex(m,r.x,r.y,!1,I,0,f,o)}e||null!=w||this.addHalfVertex(m,t.x+2*r.x,t.y+2*r.y,!1,I,0,f,o),null!=w&&y&&this.addCurrentVertex(m,x||v,1,1,f,w)}else if("butt"===i)this.addCurrentVertex(m,S,0,0,f,w);else if("square"===i){if(!g){const e=c?0:-1;this.addCurrentVertex(m,S,e,e,f,w)}if(this.addCurrentVertex(m,S,0,0,f,w),g){const e=u?0:1;this.addCurrentVertex(m,S,e,e,f,w)}}else if("round"===i){if(g){const e=!t&&C?C:_;this.addCurrentVertex(m,e,0,0,f,w),!t&&u||this.addCurrentVertex(m,e,1,1,f,w,!0)}if(y){const e=!t&&x?x:v;!t&&c||this.addCurrentVertex(m,e,-1,-1,f,w,!0),this.addCurrentVertex(m,e,0,0,f,w)}}}}addVerticesTo(e,t,i,r,n,o,a,s,l,c){const u=(t.w-e.w)/this.tessellationStep|0;let h=0;const d=this.scaledDistance;if(u>1){this.lineSoFar=e.w;const d=(t.x-e.x)/u,p=(t.y-e.y)/u,f=(t.z-e.z)/u,m=(t.w-e.w)/u;for(let t=1;t<u;++t){e.x+=d,e.y+=p,e.z+=f,this.lineSoFar+=m,h+=m;const t=this.evaluateLineProgressFeatures(this.prevDistance+h);this.scaledDistance=(this.prevDistance+h)/this.totalDistance,this.addHalfVertex(e,i,r,c,!1,a,l,t),this.addHalfVertex(e,n,o,c,!0,-s,l,t)}}this.lineSoFar=t.w,this.scaledDistance=d;const p=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(t,i,r,c,!1,a,l,p),this.addHalfVertex(t,n,o,c,!0,-s,l,p)}evaluateLineProgressFeatures(e){if(!this.variableWidthValue&&"offset"!==this.elevationType)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+e)/this.totalFeatureLength):Ze("line-progress evaluation for ".concat(this.layerIds[0]," requires enabling 'lineMetrics' for the source."));let t=0;return this.variableWidthValue&&"constant"!==this.variableWidthValue.kind&&(t=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),"offset"!==this.elevationType?{zOffset:0,variableWidth:t}:"constant"===this.zOffsetValue.kind?{zOffset:this.zOffsetValue.value,variableWidth:t}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:t}}addCurrentVertex(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];const s=t.x+t.y*i,l=t.y-t.x*i,c=t.y*r-t.x,u=-t.y-t.x*r;if(null!=o){const t="offset"===this.elevationType,h=-10,d=Or+10,p=o.zOffset,f=new xp(e.x,e.y,p,this.lineSoFar),m=!!t&&Ef(e,h,d),g=this.lineSoFar,y=this.distance;if(this.currentVertex)if(m){const t=this.currentVertexIsOutside,o=this.currentVertex,m=new xp(e.x,e.y,p,this.lineSoFar);if(wp(o,m,h,d),!Ef(m,h,d)){if(t){this.e1=this.e2=-1,this.distance-=o.dist(f),this.lineSoFar=o.w;const e=this.evaluateLineProgressFeatures(o.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(o,s,l,a,!1,i,n,e),this.addHalfVertex(o,c,u,a,!0,-r,n,e),this.prevDistance=this.distance}this.distance=this.prevDistance+o.dist(m),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(o,m,s,l,c,u,i,r,n,a),this.distance=y,this.scaledDistance=this.distance/this.totalDistance}}else{const e=this.currentVertex;if(this.currentVertexIsOutside){wp(e,f,h,d),this.e1=this.e2=-1,this.distance-=e.dist(f),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=e.w;const t=this.evaluateLineProgressFeatures(e.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(e,s,l,a,!1,i,n,t),this.addHalfVertex(e,c,u,a,!0,-r,n,t),this.prevDistance=this.distance,this.distance=y,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(e,f,s,l,c,u,i,r,n,a)}else m||(this.addHalfVertex(e,s,l,a,!1,i,n,o),this.addHalfVertex(e,c,u,a,!0,-r,n,o));this.currentVertex=f,this.currentVertexIsOutside=m,this.lineSoFar=g}else this.addHalfVertex(e,s,l,a,!1,i,n,o),this.addHalfVertex(e,c,u,a,!0,-r,n,o)}addHalfVertex(e,t,i,r,n,o,a,s){let{x:l,y:c}=e;if(this.patternJoinNone&&(0===this.segmentPoints.length&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),n||this.segmentPoints.push(this.lineSoFar-this.segmentStart,o)),this.layoutVertexArray.emplaceBack((l<<1)+(r?1:0),(c<<1)+(n?1:0),Math.round(63*t)+128,Math.round(63*i)+128,1+(0===o?0:o<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips){const e=ci(this.lineClips.start,this.lineClips.end,this.scaledDistance);this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,e)}const u=a.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,u),a.primitiveLength++),n?this.e2=u:this.e1=u,null!=s&&this.zOffsetVertexArray.emplaceBack(s.zOffset,s.variableWidth,s.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(e,t){this.prevDistance=this.distance,this.distance+=e.dist(t),this.updateScaledDistance()}}function Ef(e,t,i){return e.x<t||e.x>i||e.y<t||e.y>i}let If,Af;function kf(e,t,i){return t*(Or/(e.tileSize*Math.pow(2,i-e.tileID.overscaledZ)))}Go(Mf,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const Pf=(e,t,i)=>(1-i)*e+i*t;function Of(e,t){return 1/kf(e,1,t.tileZoom)}function Rf(e,t,i,r){return e.translatePosMatrix(r||t.tileID.projMatrix,t,i.paint.get("line-translate"),i.paint.get("line-translate-anchor"))}const zf=e=>{const t=[];Df(e)&&t.push("RENDER_LINE_DASH"),e.paint.get("line-gradient")&&t.push("RENDER_LINE_GRADIENT");const i=e.paint.get("line-trim-offset");0===i[0]&&0===i[1]||t.push("RENDER_LINE_TRIM_OFFSET"),0!==e.paint.get("line-border-width").constantOr(1)&&t.push("RENDER_LINE_BORDER");const r="none"===e.layout.get("line-join").constantOr("miter"),n=!!e.paint.get("line-pattern").constantOr(1);return r&&n&&t.push("LINE_JOIN_NONE"),t};function Df(e){const t=e.paint.get("line-dasharray").value;return t.value||"constant"!==t.kind}let Ff;const Bf=()=>Ff||(Ff={layout:If||(If=new Ia({"line-cap":new Ma(Aa.layout_line["line-cap"]),"line-join":new Ma(Aa.layout_line["line-join"]),"line-miter-limit":new Ta(Aa.layout_line["line-miter-limit"]),"line-round-limit":new Ta(Aa.layout_line["line-round-limit"]),"line-sort-key":new Ma(Aa.layout_line["line-sort-key"]),"line-z-offset":new Ma(Aa.layout_line["line-z-offset"]),"line-elevation-reference":new Ta(Aa.layout_line["line-elevation-reference"]),"line-cross-slope":new Ta(Aa.layout_line["line-cross-slope"]),visibility:new Ta(Aa.layout_line.visibility),"line-width-unit":new Ta(Aa.layout_line["line-width-unit"])})),paint:Af||(Af=new Ia({"line-opacity":new Ma(Aa.paint_line["line-opacity"]),"line-color":new Ma(Aa.paint_line["line-color"]),"line-translate":new Ta(Aa.paint_line["line-translate"]),"line-translate-anchor":new Ta(Aa.paint_line["line-translate-anchor"]),"line-width":new Ma(Aa.paint_line["line-width"]),"line-gap-width":new Ma(Aa.paint_line["line-gap-width"]),"line-offset":new Ma(Aa.paint_line["line-offset"]),"line-blur":new Ma(Aa.paint_line["line-blur"]),"line-dasharray":new Ma(Aa.paint_line["line-dasharray"]),"line-pattern":new Ma(Aa.paint_line["line-pattern"]),"line-pattern-cross-fade":new Ta(Aa.paint_line["line-pattern-cross-fade"]),"line-gradient":new Ea(Aa.paint_line["line-gradient"]),"line-trim-offset":new Ta(Aa.paint_line["line-trim-offset"]),"line-trim-fade-range":new Ta(Aa.paint_line["line-trim-fade-range"]),"line-trim-color":new Ta(Aa.paint_line["line-trim-color"]),"line-emissive-strength":new Ta(Aa.paint_line["line-emissive-strength"]),"line-border-width":new Ma(Aa.paint_line["line-border-width"]),"line-border-color":new Ma(Aa.paint_line["line-border-color"]),"line-occlusion-opacity":new Ta(Aa.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},Ff);class Vf extends Ma{possiblyEvaluate(e,t){return t=new ya(Math.floor(t.zoom),{now:t.now,fadeDuration:t.fadeDuration,transition:t.transition,worldview:t.worldview}),super.possiblyEvaluate(e,t)}evaluate(e,t,i,r){return t=Re({},t,{zoom:Math.floor(t.zoom)}),super.evaluate(e,t,i,r)}}let Nf;function Uf(e,t){return t>0?t+2*e:e}const jf=es([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Hf=es([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),Zf=es([{name:"a_projected_pos",components:4,type:"Float32"}],4);es([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Wf=es([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Gf=es([{name:"a_x_axis",components:3,type:"Float32"},{name:"a_y_axis",components:3,type:"Float32"}]),qf=es([{name:"a_texb",components:2,type:"Uint16"}]),Xf=es([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),Yf=es([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);es([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Kf=es([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Jf=es([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);es([{name:"triangle",components:3,type:"Uint16"}]),es([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),es([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"},{type:"Uint16",name:"elevationFeatureIndex"}]),es([{type:"Float32",name:"offsetX"}]),es([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Qf=24;function $f(e,t,i){return e.sections.forEach(e=>{e.text=function(e,t,i){const r=t.layout.get("text-transform").evaluate(i,{});return"uppercase"===r?e=e.toLocaleUpperCase():"lowercase"===r&&(e=e.toLocaleLowerCase()),ga.applyArabicShaping&&(e=ga.applyArabicShaping(e)),e}(e.text,t,i)}),e}const em={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42","\u2190":"\u2191","\u2192":"\u2193"};function tm(e){return"\ufe36"===e||"\ufe48"===e||"\ufe38"===e||"\ufe44"===e||"\ufe42"===e||"\ufe3e"===e||"\ufe3c"===e||"\ufe3a"===e||"\ufe18"===e||"\ufe40"===e||"\ufe10"===e||"\ufe13"===e||"\ufe14"===e||"\uff40"===e||"\uffe3"===e||"\ufe11"===e||"\ufe12"===e}function im(e){return"\ufe35"===e||"\ufe47"===e||"\ufe37"===e||"\ufe43"===e||"\ufe41"===e||"\ufe3d"===e||"\ufe3b"===e||"\ufe39"===e||"\ufe17"===e||"\ufe3f"===e}var rm,nm,om,am={};function sm(){return rm||(rm=1,am.read=function(e,t,i,r,n){var o,a,s=8*n-r-1,l=(1<<s)-1,c=l>>1,u=-7,h=i?n-1:0,d=i?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-u)-1,p>>=-u,u+=s;u>0;o=256*o+e[t+h],h+=d,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=r;u>0;a=256*a+e[t+h],h+=d,u-=8);if(0===o)o=1-c;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},am.write=function(e,t,i,r,n,o){var a,s,l,c=8*o-n-1,u=(1<<c)-1,h=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,f=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=u):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=u?(s=0,a=u):a+h>=1?(s=(t*l-1)*Math.pow(2,n),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,n),a=0));n>=8;e[i+p]=255&s,p+=f,s/=256,n-=8);for(a=a<<n|s,c+=n;c>0;e[i+p]=255&a,p+=f,a/=256,c-=8);e[i+p-f]|=128*m}),am}function lm(){if(om)return nm;om=1,nm=t;var e=sm();function t(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}t.Varint=0,t.Fixed64=1,t.Bytes=2,t.Fixed32=5;var i=4294967296,r=1/i,n="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function o(e){return e.type===t.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t,i){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));i.realloc(r);for(var n=i.pos-1;n>=e;n--)i.buf[n+r]=i.buf[n]}function l(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function c(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function u(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function h(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function d(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function p(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function f(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function m(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function g(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function y(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function _(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function v(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}return t.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),n=r>>3,o=this.pos;this.type=7&r,e(n,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=y(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=v(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=y(this.buf,this.pos)+y(this.buf,this.pos+4)*i;return this.pos+=8,e},readSFixed64:function(){var e=y(this.buf,this.pos)+v(this.buf,this.pos+4)*i;return this.pos+=8,e},readFloat:function(){var t=e.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=e.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(e){var t,i,r=this.buf;return t=127&(i=r[this.pos++]),i<128?t:(t|=(127&(i=r[this.pos++]))<<7,i<128?t:(t|=(127&(i=r[this.pos++]))<<14,i<128?t:(t|=(127&(i=r[this.pos++]))<<21,i<128?t:function(e,t,i){var r,n,o=i.buf;if(r=(112&(n=o[i.pos++]))>>4,n<128)return a(e,r,t);if(r|=(127&(n=o[i.pos++]))<<3,n<128)return a(e,r,t);if(r|=(127&(n=o[i.pos++]))<<10,n<128)return a(e,r,t);if(r|=(127&(n=o[i.pos++]))<<17,n<128)return a(e,r,t);if(r|=(127&(n=o[i.pos++]))<<24,n<128)return a(e,r,t);if(r|=(1&(n=o[i.pos++]))<<31,n<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(i=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=12&&n?function(e,t,i){return n.decode(e.subarray(t,i))}(this.buf,t,e):function(e,t,i){for(var r="",n=t;n<i;){var o,a,s,l=e[n],c=null,u=l>239?4:l>223?3:l>191?2:1;if(n+u>i)break;1===u?l<128&&(c=l):2===u?128==(192&(o=e[n+1]))&&(c=(31&l)<<6|63&o)<=127&&(c=null):3===u?(a=e[n+2],128==(192&(o=e[n+1]))&&128==(192&a)&&((c=(15&l)<<12|(63&o)<<6|63&a)<=2047||c>=55296&&c<=57343)&&(c=null)):4===u&&(a=e[n+2],s=e[n+3],128==(192&(o=e[n+1]))&&128==(192&a)&&128==(192&s)&&((c=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||c>=1114112)&&(c=null)),null===c?(c=65533,u=1):c>65535&&(c-=65536,r+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),r+=String.fromCharCode(c),n+=u}return r}(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,i){if(this.type!==t.Bytes)return e.push(this.readVarint(i));var r=o(this);for(e=e||[];this.pos<r;)e.push(this.readVarint(i));return e},readPackedSVarint:function(e){if(this.type!==t.Bytes)return e.push(this.readSVarint());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==t.Bytes)return e.push(this.readBoolean());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==t.Bytes)return e.push(this.readFloat());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==t.Bytes)return e.push(this.readDouble());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==t.Bytes)return e.push(this.readFixed32());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==t.Bytes)return e.push(this.readSFixed32());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==t.Bytes)return e.push(this.readFixed64());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==t.Bytes)return e.push(this.readSFixed64());var i=o(this);for(e=e||[];this.pos<i;)e.push(this.readSFixed64());return e},skip:function(e){var i=7&e;if(i===t.Varint)for(;this.buf[this.pos++]>127;);else if(i===t.Bytes)this.pos=this.readVarint()+this.pos;else if(i===t.Fixed32)this.pos+=4;else{if(i!==t.Fixed64)throw new Error("Unimplemented type: "+i);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),_(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*r),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),_(this.buf,-1&e,this.pos),_(this.buf,Math.floor(e*r),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var i,r;if(e>=0?(i=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(i=~(-e%4294967296))?i=i+1|0:(i=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,i.buf[i.pos]=127&(e>>>=7)}(i,0,t),function(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,i){for(var r,n,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!n){r>56319||o+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):n=r;continue}if(r<56320){e[i++]=239,e[i++]=191,e[i++]=189,n=r;continue}r=n-55296<<10|r-56320|65536,n=null}else n&&(e[i++]=239,e[i++]=191,e[i++]=189,n=null);r<128?e[i++]=r:(r<2048?e[i++]=r>>6|192:(r<65536?e[i++]=r>>12|224:(e[i++]=r>>18|240,e[i++]=r>>12&63|128),e[i++]=r>>6&63|128),e[i++]=63&r|128)}return i}(this.buf,e,this.pos);var i=this.pos-t;i>=128&&s(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),e.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),e.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var r=this.pos-i;r>=128&&s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,i,r){this.writeTag(e,t.Bytes),this.writeRawMessage(i,r)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,l,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,c,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,d,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,u,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,p,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,f,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,m,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,g,t)},writeBytesField:function(e,i){this.writeTag(e,t.Bytes),this.writeBytes(i)},writeFixed32Field:function(e,i){this.writeTag(e,t.Fixed32),this.writeFixed32(i)},writeSFixed32Field:function(e,i){this.writeTag(e,t.Fixed32),this.writeSFixed32(i)},writeFixed64Field:function(e,i){this.writeTag(e,t.Fixed64),this.writeFixed64(i)},writeSFixed64Field:function(e,i){this.writeTag(e,t.Fixed64),this.writeSFixed64(i)},writeVarintField:function(e,i){this.writeTag(e,t.Varint),this.writeVarint(i)},writeSVarintField:function(e,i){this.writeTag(e,t.Varint),this.writeSVarint(i)},writeStringField:function(e,i){this.writeTag(e,t.Bytes),this.writeString(i)},writeFloatField:function(e,i){this.writeTag(e,t.Fixed32),this.writeFloat(i)},writeDoubleField:function(e,i){this.writeTag(e,t.Fixed64),this.writeDouble(i)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}},nm}var cm=fe(lm());const um=3;function hm(e,t,i){t.glyphs=[],1===e&&i.readMessage(dm,t)}function dm(e,t,i){if(3===e){const{id:e,bitmap:r,width:n,height:o,left:a,top:s,advance:l}=i.readMessage(pm,{});t.glyphs.push({id:e,bitmap:new mh({width:n+2*um,height:o+2*um},r),metrics:{width:n,height:o,left:a,top:s,advance:l}})}else 4===e?t.ascender=i.readSVarint():5===e&&(t.descender=i.readSVarint())}function pm(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}const fm=um,mm={horizontal:1,vertical:2,horizontalOnly:3};class gm{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(e,t){const i=new gm;return i.scale=e||1,i.fontStack=t,i}static forImage(e){const t=new gm;return t.image=e,t}}class ym{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(e,t,i){const r=new ym;for(let n=0;n<e.sections.length;n++){const o=e.sections[n];o.image?r.addImageSection(o,i):r.addTextSection(o,t)}return r}length(){return this.text.length}getSection(e){return this.sections[this.sectionIndex[e]]}getSections(){return this.sections}getSectionIndex(e){return this.sectionIndex[e]}getCodePoint(e){return this.text.codePointAt(e)}verticalizePunctuation(e){this.text=function(e,t){let i="";for(let r=0;r<e.length;r++){const n=e.charCodeAt(r+1)||null,o=e.charCodeAt(r-1)||null;i+=!t&&(n&&ia(n)&&!em[e[r+1]]||o&&ia(o)&&!em[e[r-1]])||!em[e[r]]?e[r]:em[e[r]]}return i}(this.text,e)}trim(){let e=0;for(let i=0;i<this.text.length&&vm[this.text.charCodeAt(i)];i++)e++;let t=this.text.length;for(let i=this.text.length-1;i>=0&&i>=e&&vm[this.text.charCodeAt(i)];i--)t--;this.text=this.text.substring(e,t),this.sectionIndex=this.sectionIndex.slice(e,t)}substring(e,t){const i=new ym;return i.text=this.text.substring(e,t),i.sectionIndex=this.sectionIndex.slice(e,t),i.sections=this.sections,i}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((e,t)=>Math.max(e,this.sections[t].scale),0)}addTextSection(e,t){this.text+=e.text,this.sections.push(gm.forText(e.scale,e.fontStack||t));const i=this.sections.length-1;for(let r=0;r<e.text.length;++r)this.sectionIndex.push(i)}addImageSection(e,t){const i=e.image?e.image.getPrimary():null;if(!i)return void Ze("Can't add FormattedSection with an empty image.");i.scaleSelf(t);const r=this.getNextImageSectionCharCode();r?(this.text+=String.fromCodePoint(r),this.sections.push(gm.forImage(i)),this.sectionIndex.push(this.sections.length-1)):Ze("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function _m(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f){let m=arguments.length>15&&void 0!==arguments[15]?arguments[15]:1;const g=ym.fromFeature(e,n,m);h===mm.vertical&&g.verticalizePunctuation(d);let y=[];const _=function(e,t,i,r,n,o){if(!e)return[];const a=[],s=function(e,t,i,r,n,o){let a=0;for(let s=0;s<e.length();s++){const i=e.getSection(s);a+=Cm(e.getCodePoint(s),i,r,n,t,o)}return a/Math.max(1,Math.ceil(a/i))}(e,t,i,r,n,o),l=e.text.indexOf("\u200b")>=0;let c=0;for(let h=0;h<e.length();h++){const i=e.getSection(h),d=e.getCodePoint(h);if(vm[d]||(c+=Cm(d,i,r,n,t,o)),h<e.length()-1){const t=!((u=d)<11904||!(Jo["Bopomofo Extended"](u)||Jo.Bopomofo(u)||Jo["CJK Compatibility Forms"](u)||Jo["CJK Compatibility Ideographs"](u)||Jo["CJK Compatibility"](u)||Jo["CJK Radicals Supplement"](u)||Jo["CJK Strokes"](u)||Jo["CJK Symbols and Punctuation"](u)||Jo["CJK Unified Ideographs Extension A"](u)||Jo["CJK Unified Ideographs"](u)||Jo["Enclosed CJK Letters and Months"](u)||Jo["Halfwidth and Fullwidth Forms"](u)||Jo.Hiragana(u)||Jo["Ideographic Description Characters"](u)||Jo["Kangxi Radicals"](u)||Jo["Katakana Phonetic Extensions"](u)||Jo.Katakana(u)||Jo["Vertical Forms"](u)||Jo["Yi Radicals"](u)||Jo["Yi Syllables"](u)));(xm[d]||t||i.image)&&a.push(Sm(h+1,c,s,a,bm(d,e.getCodePoint(h+1),t&&l),!1))}}var u;return Lm(Sm(e.length(),c,s,a,0,!0))}(g,c,o,t,r,p),{processBidirectionalText:v,processStyledBidirectionalText:x}=ga;if(v&&1===g.sections.length){const e=v(g.toString(),_);for(const t of e){const e=new ym;e.text=t,e.sections=g.sections;for(let i=0;i<t.length;i++)e.sectionIndex.push(0);y.push(e)}}else if(x){const e=x(g.text,g.sectionIndex,_);for(const t of e){const e=new ym;e.text=t[0],e.sectionIndex=t[1],e.sections=g.sections,y.push(e)}}else y=function(e,t){const i=[],r=e.text;let n=0;for(const o of t)i.push(e.substring(n,o)),n=o;return n<r.length&&i.push(e.substring(n,r.length)),i}(g,_);const C=[],w={positionedLines:C,text:g.toString(),top:u[1],bottom:u[1],left:u[0],right:u[0],writingMode:h,iconsInText:!1,verticalizable:!1,hasBaseline:!1};if(function(e,t,i,r,n,o,a,s,l,c,u,h){let d=0,p=0,f=0;const m="right"===s?1:"left"===s?0:.5;let g=!1;for(const w of n){const e=w.getSections();for(const i of e){if(i.image)continue;const e=t[i.fontStack];if(e&&(g=void 0!==e.ascender&&void 0!==e.descender,!g))break}if(!g)break}let y=0;for(const w of n){w.trim();const n=w.getMaxScale(),a=(n-1)*Qf,s={positionedGlyphs:[],lineOffset:0};e.positionedLines[y]=s;const v=s.positionedGlyphs;let x=0;if(!w.length()){p+=o,++y;continue}let C=0,b=0;for(let o=0;o<w.length();o++){const a=w.getSection(o),s=w.getSectionIndex(o),f=w.getCodePoint(o);let m=a.scale,y=null,S=null,L=null,T=Qf,M=0;l===mm.vertical&&(12312===(_=f)||12313===_||12316===_||12540===_||12448===_)&&(l=mm.horizontal);const E=!(l===mm.horizontal||!u&&!ta(f)||u&&(vm[f]||ra(f)));if(a.image){const t=r.get(a.image.toString());if(!t)continue;L=a.image,e.iconsInText=e.iconsInText||!0,S=t.paddedRect;const i=t.displaySize;m=m*Qf/h,y={width:i[0],height:i[1],left:0,top:-3,advance:E?i[1]:i[0],localGlyph:!1},M=g?-y.height*m:n*Qf-17-i[1]*m,T=y.advance;const o=(E?i[0]:i[1])*m-Qf*n;o>0&&o>x&&(x=o)}else{const e=i[a.fontStack];if(!e)continue;e[f]&&(S=e[f]);const r=t[a.fontStack];if(!r)continue;const o=r.glyphs[f];if(!o)continue;if(y=o.metrics,T=8203!==f?Qf:0,g){const e=void 0!==r.ascender?Math.abs(r.ascender):0,t=void 0!==r.descender?Math.abs(r.descender):0,i=(e+t)*m;C<i&&(C=i,b=(e-t)/2*m),M=-e*m}else M=(n-m)*Qf-17}E?(e.verticalizable=!0,v.push({glyph:f,image:L,x:d,y:p+M,vertical:E,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:S}),d+=T*m+c):(v.push({glyph:f,image:L,x:d,y:p+M,vertical:E,scale:m,localGlyph:y.localGlyph,fontStack:a.fontStack,sectionIndex:s,metrics:y,rect:S}),d+=y.advance*m+c)}0!==v.length&&(f=Math.max(d-c,f),g?Mm(v,m,x,b,o*n/2):Mm(v,m,x,0,o/2)),d=0;const S=o*n+x;s.lineOffset=Math.max(x,a),p+=S,++y}var _;const v=p,{horizontalAlign:x,verticalAlign:C}=Tm(a);(function(e,t,i,r,n,o){const a=(t-i)*n,s=-o*r;for(const l of e)for(const e of l.positionedGlyphs)e.x+=a,e.y+=s})(e.positionedLines,m,x,C,f,v),e.top+=-C*v,e.bottom=e.top+v,e.left+=-x*f,e.right=e.left+f,e.hasBaseline=g}(w,t,i,r,y,a,s,l,h,c,d,f),!function(e){for(const t of e)if(0!==t.positionedGlyphs.length)return!1;return!0}(C))return w}const vm={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},xm={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function Cm(e,t,i,r,n,o){if(t.image){const e=r.get(t.image.toString());return e?e.displaySize[0]*t.scale*Qf/o+n:0}{const r=i[t.fontStack],o=r&&r.glyphs[e];return o?o.metrics.advance*t.scale+n:0}}function wm(e,t,i,r){const n=Math.pow(e-t,2);return r?e<t?n/2:2*n:n+Math.abs(i)*i}function bm(e,t,i){let r=0;return 10===e&&(r-=1e4),i&&(r+=150),40!==e&&65288!==e||(r+=50),41!==t&&65289!==t||(r+=50),r}function Sm(e,t,i,r,n,o){let a=null,s=wm(t,i,n,o);for(const l of r){const e=wm(t-l.x,i,n,o)+l.badness;e<=s&&(a=l,s=e)}return{index:e,x:t,priorBreak:a,badness:s}}function Lm(e){return e?Lm(e.priorBreak).concat(e.index):[]}function Tm(e){let t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function Mm(e,t,i,r,n){if(!(t||i||r||n))return;const o=e.length-1,a=e[o],s=(a.x+a.metrics.advance*a.scale)*t;for(let l=0;l<=o;l++)e[l].x-=s,e[l].y+=i+r+n}function Em(e){return void 0!==e.imagePrimary&&void 0!==e.top&&void 0!==e.bottom&&void 0!==e.left&&void 0!==e.right}function Im(e,t,i,r){const{horizontalAlign:n,verticalAlign:o}=Tm(r),a=i[0]-e.displaySize[0]*n,s=i[1]-e.displaySize[1]*o;return{imagePrimary:e,imageSecondary:t,top:s,bottom:s+e.displaySize[1],left:a,right:a+e.displaySize[0]}}function Am(e,t,i,r,n,o){const a=e.imagePrimary;let s;if(a.content){const e=a.content,t=a.pixelRatio||1;s=[e[0]/t,e[1]/t,a.displaySize[0]-e[2]/t,a.displaySize[1]-e[3]/t]}const l=t.left*o,c=t.right*o;let u,h,d,p;"width"===i||"both"===i?(p=n[0]+l-r[3],h=n[0]+c+r[1]):(p=n[0]+(l+c-a.displaySize[0])/2,h=p+a.displaySize[0]);const f=t.top*o,m=t.bottom*o;return"height"===i||"both"===i?(u=n[1]+f-r[0],d=n[1]+m+r[2]):(u=n[1]+(f+m-a.displaySize[1])/2,d=u+a.displaySize[1]),{imagePrimary:a,imageSecondary:void 0,top:u,right:h,bottom:d,left:p,collisionPadding:s}}function km(e){return!e.imagePrimary.stretchX}function Pm(e){return!e.imagePrimary.stretchY}function Om(e){return{width:e.right-e.left,height:e.bottom-e.top}}const Rm=128;function zm(e,t,i){const{expression:r}=t;if("constant"===r.kind)return{kind:"constant",layoutSize:r.evaluate(new ya(e+1,{worldview:i}))};if("source"===r.kind)return{kind:"source"};{const{zoomStops:t,interpolationType:n}=r;let o=0;for(;o<t.length&&t[o]<=e;)o++;o=Math.max(0,o-1);let a=o;for(;a<t.length&&t[a]<e+1;)a++;a=Math.min(t.length-1,a);const s=t[o],l=t[a];return"composite"===r.kind?{kind:"composite",minZoom:s,maxZoom:l,interpolationType:n}:{kind:"camera",minZoom:s,maxZoom:l,minSize:r.evaluate(new ya(s,{worldview:i})),maxSize:r.evaluate(new ya(l,{worldview:i})),interpolationType:n}}}function Dm(e,t,i){let{uSize:r,uSizeT:n}=t,{lowerSize:o,upperSize:a}=i;return"source"===e.kind?o/Rm:"composite"===e.kind?ci(o/Rm,a/Rm,n):r}function Fm(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=0,n=0;if("constant"===e.kind)n=e.layoutSize*i;else if("source"!==e.kind){const{interpolationType:o,minZoom:a,maxZoom:s}=e,l=o?Ae(jn.interpolationFactor(o,t,a,s),0,1):0;"camera"===e.kind?n=ci(e.minSize,e.maxSize,l)*i:r=l*i}return{uSizeT:r,uSize:n}}class Bm extends xe{constructor(e,t,i,r,n){super(e,t),this.angle=r,this.z=i,void 0!==n&&(this.segment=n)}clone(){return new Bm(this.x,this.y,this.z,this.angle,this.segment)}}function Vm(e,t,i,r,n){if(void 0===t.segment)return!0;let o=t,a=t.segment+1,s=0;for(;s>-i/2;){if(a--,a<0)return!1;s-=e[a].dist(o),o=e[a]}s+=e[a].dist(e[a+1]),a++;const l=[];let c=0;for(;s<i/2;){const t=e[a],i=e[a+1];if(!i)return!1;let o=e[a-1].angleTo(t)-t.angleTo(i);for(o=Math.abs((o+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:o}),c+=o;s-l[0].distance>r;)c-=l.shift().angleDelta;if(c>n)return!1;a++,s+=t.dist(i)}return!0}function Nm(e){let t=0;for(let i=0;i<e.length-1;i++)t+=e[i].dist(e[i+1]);return t}function Um(e,t,i){return e?.6*t*i:0}function jm(e,t){return Math.max(e?e.right-e.left:0,t?t.right-t.left:0)}function Hm(e,t,i,r,n,o){const a=Um(i,n,o),s=jm(i,r)*o;let l=0;const c=Nm(e)/2;for(let u=0;u<e.length-1;u++){const i=e[u],r=e[u+1],n=i.dist(r);if(l+n>c){const o=(c-l)/n,h=ci(i.x,r.x,o),d=ci(i.y,r.y,o),p=new Bm(h,d,0,r.angleTo(i),u);return!a||Vm(e,p,s,a,t)?p:void 0}l+=n}}function Zm(e,t,i,r,n,o,a,s,l){const c=Um(r,o,a),u=jm(r,n),h=u*a,d=0===e[0].x||e[0].x===l||0===e[0].y||e[0].y===l;return t-h<t/4&&(t=h+t/4),Wm(e,d?t/2*s%t:(u/2+2*o)*a*s%t,t,c,i,h,d,!1,l)}function Wm(e,t,i,r,n,o,a,s,l){const c=o/2,u=Nm(e);let h=0,d=t-i,p=[];for(let f=0;f<e.length-1;f++){const t=e[f],a=e[f+1],s=t.dist(a),m=a.angleTo(t);for(;d+i<h+s;){d+=i;const g=(d-h)/s,y=ci(t.x,a.x,g),_=ci(t.y,a.y,g);if(y>=0&&y<l&&_>=0&&_<l&&d-c>=0&&d+c<=u){const t=new Bm(y,_,0,m,f);r&&!Vm(e,t,o,r,n)||p.push(t)}}h+=s}return s||p.length||a||(p=Wm(e,h/2,i,r,n,o,a,!0,l)),p}function Gm(e){let t=0,i=0;for(const a of e)t+=a.w*a.h,i=Math.max(i,a.w);e.sort((e,t)=>t.h-e.h);const r=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),i),h:1/0}];let n=0,o=0;for(const a of e)for(let e=r.length-1;e>=0;e--){const t=r[e];if(!(a.w>t.w||a.h>t.h)){if(a.x=t.x,a.y=t.y,o=Math.max(o,a.y+a.h),n=Math.max(n,a.x+a.w),a.w===t.w&&a.h===t.h){const t=r.pop();e<r.length&&(r[e]=t)}else a.h===t.h?(t.x+=a.w,t.w-=a.w):a.w===t.w?(t.y+=a.h,t.h-=a.h):(r.push({x:t.x+a.w,y:t.y,w:t.w-a.w,h:a.h}),t.y+=a.h,t.h-=a.h);break}}return{w:n,h:o,fill:t/(n*o)||0}}Go(Bm,"Anchor");const qm=1;class Xm{static getImagePositionScale(e,t,i){if(t&&e&&e.options&&e.options.transform){const t=e.options.transform;return{x:t.a,y:t.d}}return{x:i,y:i}}constructor(e,t,i,r){this.paddedRect=e;const{pixelRatio:n,version:o,stretchX:a,stretchY:s,content:l,sdf:c,usvg:u}=t;this.pixelRatio=n,this.stretchX=a,this.stretchY=s,this.content=l,this.version=o,this.padding=i,this.sdf=c,this.usvg=u,this.scale=Xm.getImagePositionScale(r,u,n)}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.scale.x,(this.paddedRect.h-2*this.padding)/this.scale.y]}}function Ym(e,t,i){const r=zi.parse(e),n=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[1,1];return{x:0,y:0,w:(e.data?e.data.width:e.width*i[0])+2*t,h:(e.data?e.data.height:e.height*i[1])+2*t}}(t,i,[r.options.transform.a,r.options.transform.d]);return{bin:n,imagePosition:new Xm(n,t,i,r),imageVariant:r}}class Km{constructor(e,t,i){const r=new Map,n=new Map;this.haveRenderCallbacks=[];const o=[];this.addImages(e,r,qm,o),this.addImages(t,n,2,o);const{w:a,h:s}=Gm(o),l=new gh({width:a||1,height:s||1});for(const[c,u]of e.entries()){const e=r.get(c).paddedRect;gh.copy(u.data,l,{x:0,y:0},{x:e.x+qm,y:e.y+qm},u.data,i,u.sdf)}for(const[c,u]of t.entries()){const e=n.get(c),t=e.paddedRect;let r=e.padding;const o=t.x+r,a=t.y+r,s=u.data.width,h=u.data.height;r=r>1?r-1:r,gh.copy(u.data,l,{x:0,y:0},{x:o,y:a},u.data,i),gh.copy(u.data,l,{x:0,y:h-r},{x:o,y:a-r},{width:s,height:r},i),gh.copy(u.data,l,{x:0,y:0},{x:o,y:a+h},{width:s,height:r},i),gh.copy(u.data,l,{x:s-r,y:0},{x:o-r,y:a},{width:r,height:h},i),gh.copy(u.data,l,{x:0,y:0},{x:o+s,y:a},{width:r,height:h},i),gh.copy(u.data,l,{x:s-r,y:h-r},{x:o-r,y:a-r},{width:r,height:r},i),gh.copy(u.data,l,{x:0,y:h-r},{x:o+s,y:a-r},{width:r,height:r},i),gh.copy(u.data,l,{x:0,y:0},{x:o+s,y:a+h},{width:r,height:r},i),gh.copy(u.data,l,{x:s-r,y:0},{x:o-r,y:a+h},{width:r,height:r},i)}this.lut=i,this.image=l,this.iconPositions=r,this.patternPositions=n}addImages(e,t,i,r){for(const[n,o]of e.entries()){const{bin:e,imagePosition:a,imageVariant:s}=Ym(n,o,i);t.set(n,a),r.push(e),o.hasRenderCallback&&this.haveRenderCallbacks.push(s.id)}}patchUpdatedImages(e,t,i){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(t=>e.hasImage(t,i)),e.dispatchRenderCallbacks(this.haveRenderCallbacks,i);for(const r of e.getUpdatedImages(i)){for(const n of this.iconPositions.keys()){const o=zi.parse(n);if(ti.isEqual(o.id,r)){const o=e.getImage(r,i);this.patchUpdatedImage(this.iconPositions.get(n),o,t)}}for(const n of this.patternPositions.keys()){const o=zi.parse(n);if(ti.isEqual(o.id,r)){const o=e.getImage(r,i);this.patchUpdatedImage(this.patternPositions.get(n),o,t)}}}}patchUpdatedImage(e,t,i){if(!e||!t)return;if(e.version===t.version)return;e.version=t.version;const[r,n]=e.tl,o=e.sdf;if(this.lut||o){const e={width:t.data.width,height:t.data.height},a=new gh(e);gh.copy(t.data,a,{x:0,y:0},{x:0,y:0},e,this.lut,o),i.update(a,{position:{x:r,y:n}})}else i.update(t.data,{position:{x:r,y:n}})}}Go(Xm,"ImagePosition"),Go(Km,"ImageAtlas");const Jm=1e20;function Qm(e,t,i,r,n,o,a,s,l){for(let c=t;c<t+r;c++)$m(e,i*o+c,o,n,a,s,l);for(let c=i;c<i+n;c++)$m(e,c*o+t,1,r,a,s,l)}function $m(e,t,i,r,n,o,a){o[0]=0,a[0]=-1e20,a[1]=Jm,n[0]=e[t];for(let s=1,l=0,c=0;s<r;s++){n[s]=e[t+s*i];const r=s*s;do{const e=o[l];c=(n[s]-n[e]+r-e*e)/(s-e)/2}while(c<=a[l]&&--l>-1);l++,o[l]=s,a[l]=c,a[l+1]=Jm}for(let s=0,l=0;s<r;s++){for(;a[l+1]<s;)l++;const r=o[l],c=s-r;e[t+s*i]=n[r]+c*c}}const eg=2,tg={none:0,ideographs:1,all:2};class ig{constructor(e,t,i){this.requestManager=e,this.localGlyphMode=t,this.localFontFamily=i,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(e,t){this.urls[t]=e}getGlyphs(e,t,i){const r=[],n=this.urls[t]||rt.GLYPHS_URL;for(const o in e)for(const t of e[o])r.push({stack:o,id:t});Oe(r,(e,t)=>{let{stack:i,id:r}=e,o=this.entries[i];o||(o=this.entries[i]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let a=o.glyphs[r];if(void 0!==a)return void t(null,{stack:i,id:r,glyph:a});if(a=this._tinySDF(o,i,r),a)return o.glyphs[r]=a,void t(null,{stack:i,id:r,glyph:a});const s=Math.floor(r/256);if(256*s>65535)return Ze("glyphs > 65535 not supported"),void t(null,{stack:i,id:r,glyph:a});if(o.ranges[s])return void t(null,{stack:i,id:r,glyph:a});let l=o.requests[s];l||(l=o.requests[s]=[],ig.loadGlyphRange(i,s,n,this.requestManager,(e,t)=>{if(t){o.ascender=t.ascender,o.descender=t.descender;for(const e in t.glyphs)this._doesCharSupportLocalGlyph(+e)||(o.glyphs[+e]=t.glyphs[+e]);o.ranges[s]=!0}for(const i of l)i(e,t);delete o.requests[s]})),l.push((e,n)=>{e?t(e):n&&t(null,{stack:i,id:r,glyph:n.glyphs[r]||null})})},(e,t)=>{if(e)i(e);else if(t){const e={};for(const{stack:i,id:r,glyph:n}of t)void 0===e[i]&&(e[i]={}),void 0===e[i].glyphs&&(e[i].glyphs={}),e[i].glyphs[r]=n&&{id:n.id,bitmap:n.bitmap.clone(),metrics:n.metrics},e[i].ascender=this.entries[i].ascender,e[i].descender=this.entries[i].descender;i(null,e)}})}_doesCharSupportLocalGlyph(e){return this.localGlyphMode!==tg.none&&(this.localGlyphMode===tg.all?!!this.localFontFamily:!!this.localFontFamily&&(Jo["CJK Unified Ideographs"](e)||Jo["Hangul Syllables"](e)||Jo.Hiragana(e)||Jo.Katakana(e)||Jo["CJK Symbols and Punctuation"](e)||Jo["CJK Unified Ideographs Extension A"](e)||Jo["CJK Unified Ideographs Extension B"](e)||Jo.Osage(e)))}_tinySDF(e,t,i){const r=this.localFontFamily;if(!r||!this._doesCharSupportLocalGlyph(i))return;let n=e.tinySDF;if(!n){let i="400";/bold/i.test(t)?i="900":/medium/i.test(t)?i="500":/light/i.test(t)&&(i="200"),n=e.tinySDF=new ig.TinySDF({fontFamily:r,fontWeight:i,fontSize:24*eg,buffer:3*eg,radius:8*eg}),n.fontWeight=i}if(this.localGlyphs[n.fontWeight][i])return this.localGlyphs[n.fontWeight][i];const o=String.fromCodePoint(i),{data:a,width:s,height:l,glyphWidth:c,glyphHeight:u,glyphLeft:h,glyphTop:d,glyphAdvance:p}=n.draw(o);return this.localGlyphs[n.fontWeight][i]={id:i,bitmap:new mh({width:s,height:l},a),metrics:{width:c/eg,height:u/eg,left:h/eg,top:d/eg-27,advance:p/eg,localGlyph:!0}}}}ig.loadGlyphRange=function(e,t,i,r,n){const o=256*t,a=o+255,s=r.transformRequest(r.normalizeGlyphsURL(i).replace("{fontstack}",e).replace("{range}","".concat(o,"-").concat(a)),Pt.Glyphs);Dt(s,(e,t)=>{if(e)n(e);else if(t){const e={},i=function(e){return new cm(e).readFields(hm,{})}(t);for(const t of i.glyphs)e[t.id]=t;n(null,{glyphs:e,ascender:i.ascender,descender:i.descender})}})},ig.TinySDF=class{constructor(){let{fontSize:e=24,buffer:t=3,radius:i=8,cutoff:r=.25,fontFamily:n="sans-serif",fontWeight:o="normal",fontStyle:a="normal"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.buffer=t,this.cutoff=r,this.radius=i;const s=this.size=e+4*t,l=this._createCanvas(s),c=this.ctx=l.getContext("2d",{willReadFrequently:!0});c.font="".concat(a," ").concat(o," ").concat(e,"px ").concat(n),c.textBaseline="alphabetic",c.textAlign="left",c.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s)}_createCanvas(e){const t=document.createElement("canvas");return t.width=t.height=e,t}draw(e){const{width:t,actualBoundingBoxAscent:i,actualBoundingBoxDescent:r,actualBoundingBoxLeft:n,actualBoundingBoxRight:o}=this.ctx.measureText(e),a=Math.ceil(i),s=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(o-n))),l=Math.min(this.size-this.buffer,a+Math.ceil(r)),c=s+2*this.buffer,u=l+2*this.buffer,h=Math.max(c*u,0),d=new Uint8ClampedArray(h),p={data:d,width:c,height:u,glyphWidth:s,glyphHeight:l,glyphTop:a,glyphLeft:0,glyphAdvance:t};if(0===s||0===l)return p;const{ctx:f,buffer:m,gridInner:g,gridOuter:y}=this;f.clearRect(m,m,s,l),f.fillText(e,m,m+a);const _=f.getImageData(m,m,s,l);y.fill(Jm,0,h),g.fill(0,0,h);for(let v=0;v<l;v++)for(let e=0;e<s;e++){const t=_.data[4*(v*s+e)+3]/255;if(0===t)continue;const i=(v+m)*c+e+m;if(1===t)y[i]=0,g[i]=Jm;else{const e=.5-t;y[i]=e>0?e*e:0,g[i]=e<0?e*e:0}}Qm(y,0,0,c,u,c,this.f,this.v,this.z),Qm(g,m,m,s,l,c,this.f,this.v,this.z);for(let v=0;v<h;v++){const e=Math.sqrt(y[v])-Math.sqrt(g[v]);d[v]=Math.round(255-255*(e/this.radius+this.cutoff))}return p}};const rg=qm;function ng(e,t){return e+t[1]-t[0]}function og(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const o=[],a=e.imagePrimary,s=a.pixelRatio,l=a.paddedRect.w-2*rg,c=a.paddedRect.h-2*rg,u=(e.right-e.left)*n,h=(e.bottom-e.top)*n,d=a.stretchX||[[0,l]],p=a.stretchY||[[0,c]],f=d.reduce(ng,0),m=p.reduce(ng,0),g=l-f,y=c-m;let _=0,v=f,x=0,C=m,w=0,b=g,S=0,L=y;if(a.content&&r){const e=a.content;_=ag(d,0,e[0]),x=ag(p,0,e[1]),v=ag(d,e[0],e[2]),C=ag(p,e[1],e[3]),w=e[0]-_,S=e[1]-x,b=e[2]-e[0]-v,L=e[3]-e[1]-C}const T=(r,o,l,c)=>{const d=lg(r.stretch-_,v,u,e.left*n),p=cg(r.fixed-w,b,r.stretch,f),g=lg(o.stretch-x,C,h,e.top*n),y=cg(o.fixed-S,L,o.stretch,m),T=lg(l.stretch-_,v,u,e.left*n),M=cg(l.fixed-w,b,l.stretch,f),E=lg(c.stretch-x,C,h,e.top*n),I=cg(c.fixed-S,L,c.stretch,m),A=new xe(d,g),k=new xe(T,g),P=new xe(T,E),O=new xe(d,E),R=new xe(p/s,y/s),z=new xe(M/s,I/s),D=t*Math.PI/180;if(D){const e=Math.sin(D),t=Math.cos(D),i=[t,-e,e,t];A._matMult(i),k._matMult(i),O._matMult(i),P._matMult(i)}const F=r.stretch+r.fixed,B=l.stretch+l.fixed,V=o.stretch+o.fixed,N=c.stretch+c.fixed,U=e.imageSecondary;return{tl:A,tr:k,bl:O,br:P,texPrimary:{x:a.paddedRect.x+rg+F,y:a.paddedRect.y+rg+V,w:B-F,h:N-V},texSecondary:U?{x:U.paddedRect.x+rg+F,y:U.paddedRect.y+rg+V,w:B-F,h:N-V}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:R,pixelOffsetBR:z,minFontScaleX:b/s/u,minFontScaleY:L/s/h,isSDF:i}};if(r&&(a.stretchX||a.stretchY)){const e=sg(d,g,f),t=sg(p,y,m);for(let i=0;i<e.length-1;i++){const r=e[i],n=e[i+1];for(let e=0;e<t.length-1;e++)o.push(T(r,t[e],n,t[e+1]))}}else o.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:l+1},{fixed:0,stretch:c+1}));return o}function ag(e,t,i){let r=0;for(const n of e)r+=Math.max(t,Math.min(i,n[1]))-Math.max(t,Math.min(i,n[0]));return r}function sg(e,t,i){const r=[{fixed:-1,stretch:0}];for(const[n,o]of e){const e=r[r.length-1];r.push({fixed:n-e.stretch,stretch:e.stretch}),r.push({fixed:n-e.stretch,stretch:e.stretch+(o-n)})}return r.push({fixed:t+rg,stretch:i}),r}function lg(e,t,i,r){return e/t*i+r}function cg(e,t,i,r){return e-t*i/r}function ug(e,t,i,r){const n=t+e.positionedLines[r].lineOffset;return 0===r?i+n/2:i+(n+(t+e.positionedLines[r-1].lineOffset))/2}function hg(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=1/0,n=1/0,o=-1/0,a=-1/0;const s=e[0];for(let p=0;p<s.length;p++){const e=s[p];(!p||e.x<r)&&(r=e.x),(!p||e.y<n)&&(n=e.y),(!p||e.x>o)&&(o=e.x),(!p||e.y>a)&&(a=e.y)}const l=Math.min(o-r,a-n);let c=l/2;const u=new Pr([],dg);if(0===l)return new xe(r,n);for(let p=r;p<o;p+=l)for(let t=n;t<a;t+=l)u.push(new pg(p+c,t+c,c,e));let h=function(e){let t=0,i=0,r=0;const n=e[0];for(let o=0,a=n.length,s=a-1;o<a;s=o++){const e=n[o],a=n[s],l=e.x*a.y-a.x*e.y;i+=(e.x+a.x)*l,r+=(e.y+a.y)*l,t+=3*l}return new pg(i/t,r/t,0,e)}(e),d=u.length;for(;u.length;){const r=u.pop();(r.d>h.d||!h.d)&&(h=r,i&&console.log("found best %d after %d probes",Math.round(1e4*r.d)/1e4,d)),r.max-h.d<=t||(c=r.h/2,u.push(new pg(r.p.x-c,r.p.y-c,c,e)),u.push(new pg(r.p.x+c,r.p.y-c,c,e)),u.push(new pg(r.p.x-c,r.p.y+c,c,e)),u.push(new pg(r.p.x+c,r.p.y+c,c,e)),d+=4)}return i&&(console.log("num probes: ".concat(d)),console.log("best distance: ".concat(h.d))),h.p}function dg(e,t){return t.max-e.max}class pg{constructor(e,t,i,r){this.p=new xe(e,t),this.h=i,this.d=function(e,t){let i=!1,r=1/0;for(let n=0;n<t.length;n++){const o=t[n];for(let t=0,n=o.length,a=n-1;t<n;a=t++){const n=o[t],s=o[a];n.y>e.y!=s.y>e.y&&e.x<(s.x-n.x)*(e.y-n.y)/(s.y-n.y)+n.x&&(i=!i),r=Math.min(r,au(e,n,s))}}return(i?1:-1)*Math.sqrt(r)}(this.p,r),this.max=this.d+this.h*Math.SQRT2}}const fg=Object.keys,mg=Number.POSITIVE_INFINITY,gg=Math.sqrt(2);function yg(e,t){let[i,r]=t,n=0,o=0;if(r===mg){i<0&&(i=0);const t=i/gg;switch(e){case"top-right":case"top-left":o=t-7;break;case"bottom-right":case"bottom-left":o=7-t;break;case"bottom":o=7-i;break;case"top":o=i-7}switch(e){case"top-right":case"bottom-right":n=-t;break;case"top-left":case"bottom-left":n=t;break;case"left":n=i;break;case"right":n=-i}}else{switch(i=Math.abs(i),r=Math.abs(r),e){case"top-right":case"top-left":case"top":o=r-7;break;case"bottom-right":case"bottom-left":case"bottom":o=7-r}switch(e){case"top-right":case"bottom-right":case"right":n=-i;break;case"top-left":case"bottom-left":case"left":n=i}}return[n,o]}function _g(e,t,i,r,n,o,a,s,l){if(!t||!t.usvg)return;const c=Om(r),u=Om(n),h="both"!==o&&"width"!==o||!km(r)?1:u.width/c.width,d="both"!==o&&"height"!==o||!Pm(r)?1:u.height/c.height;i.scaleSelf(h,d);const p=i.toString();a.set(p,i),s.set(p,t);const{imagePosition:f}=Ym(p,t,qm);l.set(p,f)}function vg(e,t,i,r,n,o,a,s,l){if(!e)return;const c=function(e,t,i,r,n,o){if("camera"===e.kind)return e.maxSize;if("composite"===e.kind){const r=t.possiblyEvaluate(new ya(e.maxZoom,{worldview:o}),i).evaluate(n,{},i),a=t.possiblyEvaluate(new ya(e.minZoom,{worldview:o}),i).evaluate(n,{},i);return Math.max(r,a)}return t.possiblyEvaluate(new ya(r,{worldview:o})).evaluate(n,{},i)}(t,i,r,n,o,l);return e.scaleSelf(c*s*a)}function xg(e,t,i,r,n,o,a,s,l){return{iconPrimary:vg(e.getPrimary(),t,i,r,n,o,a,s,l),iconSecondary:vg(e.getSecondary(),t,i,r,n,o,a,s,l)}}function Cg(e,t,i){if(!t)return;const r=i.get(e.toString()),n=i.get(t.toString());n&&(r.paddedRect.w===n.paddedRect.w&&r.paddedRect.h===n.paddedRect.h||Ze("Mismatch in icon variant sizes: ".concat(e.toString()," and ").concat(t.toString())),r.usvg!==n.usvg&&Ze("Mismatch in icon variant image types: ".concat(e.id," and ").concat(t.id)))}function wg(e,t,i,r){if(!e)return;const n=t.get(i.toString());if(e.imagePrimary=n,r){const i=t.get(r.toString());e.imageSecondary=i}}function bg(e,t){for(const i in e.horizontal)Sg(e.horizontal[i],t);Sg(e.vertical,t)}function Sg(e,t){if(e)for(const i of e.positionedLines)for(const e of i.positionedGlyphs)if(null!==e.image){const i=e.image.toString();e.rect=t.get(i).paddedRect}}function Lg(e){switch(e){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Tg(e,t,i,r,n,o,a,s,l){const c=kg(o.horizontal)||o.vertical,u=i.get("icon-text-fit-padding").evaluate(r,{},n);let h,d=t;return t&&"none"!==l&&(e.allowVerticalPlacement&&o.vertical&&(h=Am(t,o.vertical,l,u,s,a)),c&&(d=Am(t,c,l,u,s,a))),{defaultShapedIcon:d,verticallyShapedIcon:h}}function Mg(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v){let x=a.textMaxSize.evaluate(t,{},d);void 0===x?x=s*a.textScaleFactor:x*=a.textScaleFactor;const C=e.layers[0].layout,w=kg(i.horizontal)||i.vertical,b="globe"===p.name,S=Qf,L=e.tilePixelRatio*x/S,T=(P=e.overscaling,e.zoom>18&&P>2&&(P>>=1),Math.max(Or/(512*P),1)*C.get("symbol-spacing")),M=C.get("text-padding")*e.tilePixelRatio,E=C.get("icon-padding")*e.tilePixelRatio,I=Se(C.get("text-max-angle")),A="map"===C.get("icon-rotation-alignment")&&"point"!==v,k=T/2;var P;!1===e.hasAnyIconTextFit&&"none"!==g&&(e.hasAnyIconTextFit=!0);const O=t.properties?+t.properties[Ac]:null,R=O&&e.elevationFeatureIdToIndex?e.elevationFeatureIdToIndex.get(O):65535,z=(s,l,v)=>{if(l.x<0||l.x>=Or||l.y<0||l.y>=Or)return;let x=null;if(b){const{x:e,y:t,z:i}=p.projectTilePoint(l.x,l.y,v);x={anchor:new Bm(e,t,i,0,void 0),up:p.upVector(v,l.x,l.y)}}!function(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C,w,b,S,L,T,M,E){const I=e.addToLineVertexArray(t,r);let A,k,P,O,R,z,D,F=0,B=0,V=0,N=0,U=-1,j=-1;const H={};let Z=Yt("");const W=i?i.anchor:t,G="none"!==M;let q=0,X=0;if(void 0===l._unevaluatedLayout.getValue("text-radial-offset")){const e=l.layout.get("text-offset").evaluate(x,{},S);q=e[0]*Qf,X=e[1]*Qf}else q=l.layout.get("text-radial-offset").evaluate(x,{},S)*Qf,X=mg;if(e.allowVerticalPlacement&&n.vertical){const e=n.vertical;if(f)z=Og(e),s&&(D=Og(s));else{const i=l.layout.get("text-rotate").evaluate(x,{},S)+90;P=Pg(c,W,t,u,h,d,e,p,i,m),s&&(O=Pg(c,W,t,u,h,d,s,y,i))}}if(o){const r=e.iconSizeData,n=l.layout.get("icon-rotate").evaluate(x,{},S),a=og(o,n,w,G,C.iconScaleFactor),p=s?og(s,n,w,G,C.iconScaleFactor):void 0;k=Pg(c,W,t,u,h,d,o,y,n,null),F=4*a.length;let f=null;"source"===r.kind?(f=[Rm*l.layout.get("icon-size").evaluate(x,{},S)*C.iconScaleFactor],f[0]>Ig&&Ze("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(Eg,'. Reduce your "icon-size".'))):"composite"===r.kind&&(f=[Rm*C.compositeIconSizes[0].evaluate(x,{},S)*C.iconScaleFactor,Rm*C.compositeIconSizes[1].evaluate(x,{},S)*C.iconScaleFactor],(f[0]>Ig||f[1]>Ig)&&Ze("".concat(e.layerIds[0],': Value for "icon-size" is >= ').concat(Eg,'. Reduce your "icon-size".'))),e.addSymbols(e.icon,a,f,v,_,x,void 0,i,t,I.lineStartIndex,I.lineLength,-1,b,S,L,T),U=e.icon.placedSymbolArray.length-1,p&&(B=4*p.length,e.addSymbols(e.icon,p,f,v,_,x,mm.vertical,i,t,I.lineStartIndex,I.lineLength,-1,b,S,L,T),j=e.icon.placedSymbolArray.length-1)}for(const Q in n.horizontal){const r=Q,o=n.horizontal[r];A||(Z=Yt(o.text),f?R=Og(o):A=Pg(c,W,t,u,h,d,o,p,l.layout.get("text-rotate").evaluate(x,{},S),m));const s=1===o.positionedLines.length;if(V+=Ag(e,i,t,o,a,l,f,x,m,I,n.vertical?mm.horizontal:mm.horizontalOnly,s?fg(n.horizontal):[r],H,U,C,b,S,L),s)break}n.vertical&&(N+=Ag(e,i,t,n.vertical,a,l,f,x,m,I,mm.vertical,["vertical"],H,j,C,b,S,L));let Y=-1;const K=(e,t)=>e?Math.max(e,t):t;Y=K(R,Y),Y=K(z,Y),Y=K(D,Y);const J=Y>-1?1:0;e.glyphOffsetArray.length>=65535&&Ze("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==x.sortKey&&e.addToSortKeyRanges(e.symbolInstances.length,x.sortKey),e.symbolInstances.emplaceBack(t.x,t.y,W.x,W.y,W.z,H.right>=0?H.right:-1,H.center>=0?H.center:-1,H.left>=0?H.left:-1,H.vertical>=0?H.vertical:-1,U,j,Z,void 0!==A?A:e.collisionBoxArray.length,void 0!==A?A+1:e.collisionBoxArray.length,void 0!==P?P:e.collisionBoxArray.length,void 0!==P?P+1:e.collisionBoxArray.length,void 0!==k?k:e.collisionBoxArray.length,void 0!==k?k+1:e.collisionBoxArray.length,O||e.collisionBoxArray.length,O?O+1:e.collisionBoxArray.length,u,V,N,F,B,J,0,q,X,Y,0,G?1:0,E)}(e,l,x,s,i,r,o,n,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,M,_,c,0,E,A,y,t,a,u,h,d,f,m,g,R)};if("line"===v)for(const D of bp(t.geometry,0,0,Or,Or)){const t=Zm(D,T,I,i.vertical||w,r,S,L,e.overscaling,Or);for(const i of t)w&&Rg(e,w.text,k,i)||z(D,i,d)}else if("line-center"===v){for(const D of t.geometry)if(D.length>1){const e=Hm(D,I,i.vertical||w,r,S,L);e&&z(D,e,d)}}else if("Polygon"===t.type)for(const D of Yh(t.geometry,0)){const e=hg(D,16);z(D[0],new Bm(e.x,e.y,0,0,void 0),d)}else if("LineString"===t.type)for(const D of t.geometry)z(D,new Bm(D[0].x,D[0].y,0,0,void 0),d);else if("Point"===t.type)for(const D of t.geometry)for(const e of D)z([e],new Bm(e.x,e.y,0,0,void 0),d)}const Eg=255,Ig=Eg*Rm;function Ag(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y){const _=function(e,t,i,r,n,o,a,s){const l=[];if(0===t.positionedLines.length)return l;const c=r.layout.get("text-rotate").evaluate(o,{})*Math.PI/180,u=function(e){const t=e[0],i=e[1],r=t*i;return r>0?[t,-i]:r<0?[-t,i]:0===t?[i,t]:[i,-t]}(i);let h=Math.abs(t.top-t.bottom);for(const m of t.positionedLines)h-=m.lineOffset;const d=t.positionedLines.length,p=h/d;let f=t.top-i[1];for(let m=0;m<d;++m){const e=t.positionedLines[m];f=ug(t,p,f,m);for(const r of e.positionedGlyphs){if(!r.rect)continue;const e=r.rect||{};let o=fm+1,h=!0,d=1,p=0;if(r.image){const e=a.get(r.image.toString());if(!e)continue;if(e.sdf){Ze("SDF images are not supported in formatted text and will be ignored.");continue}h=!1,d=e.pixelRatio,o=qm/d}const m=(n||s)&&r.vertical,g=r.metrics.advance*r.scale/2,y=r.metrics,_=r.rect;if(null===_)continue;s&&t.verticalizable&&(p=r.image?g-r.metrics.width*r.scale/2:0);const v=n?[r.x+g,r.y]:[0,0];let x=[0,0],C=[0,0],w=!1;n||(m?(C=[r.x+g+u[0],r.y+u[1]-p],w=!0):x=[r.x+g+i[0],r.y+i[1]-p]);const b=_.w*r.scale/(d*(r.localGlyph?eg:1)),S=_.h*r.scale/(d*(r.localGlyph?eg:1));let L,T,M,E;if(m){const e=r.y-f,t=new xe(-g,g-e),i=-Math.PI/2,n=new xe(...C);L=new xe(-g+x[0],x[1]),L._rotateAround(i,t)._add(n),L.x+=-e+g,L.y-=(y.left-o)*r.scale;const a=r.image?y.advance*r.scale:Qf*r.scale,s=String.fromCodePoint(r.glyph);tm(s)?L.x+=(1-o)*r.scale:im(s)?L.x+=a-y.height*r.scale+(-o-1)*r.scale:L.x+=r.image||y.width+2*o===_.w&&y.height+2*o===_.h?(a-S)/2:(a-(y.height+2*o)*r.scale)/2,T=new xe(L.x,L.y-b),M=new xe(L.x+S,L.y),E=new xe(L.x+S,L.y-b)}else{const e=(y.left-o)*r.scale-g+x[0],t=(-y.top-o)*r.scale+x[1],i=e+b,n=t+S;L=new xe(e,t),T=new xe(i,t),M=new xe(e,n),E=new xe(i,n)}if(c){let e;e=n?new xe(0,0):w?new xe(u[0],u[1]):new xe(i[0],i[1]),L._rotateAround(c,e),T._rotateAround(c,e),M._rotateAround(c,e),E._rotateAround(c,e)}const I=new xe(0,0),A=new xe(0,0);l.push({tl:L,tr:T,bl:M,br:E,texPrimary:e,texSecondary:void 0,writingMode:t.writingMode,glyphOffset:v,sectionIndex:r.sectionIndex,isSDF:h,pixelOffsetTL:I,pixelOffsetBR:A,minFontScaleX:0,minFontScaleY:0})}}return l}(0,r,l,o,a,s,n,e.allowVerticalPlacement),v=e.textSizeData;let x=null;"source"===v.kind?(x=[Rm*o.layout.get("text-size").evaluate(s,{},g)*f.textScaleFactor],x[0]>Ig&&Ze("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(Eg,'. Reduce your "text-size".'))):"composite"===v.kind&&(x=[Rm*f.compositeTextSizes[0].evaluate(s,{},g)*f.textScaleFactor,Rm*f.compositeTextSizes[1].evaluate(s,{},g)*f.textScaleFactor],(x[0]>Ig||x[1]>Ig)&&Ze("".concat(e.layerIds[0],': Value for "text-size" is >= ').concat(Eg,'. Reduce your "text-size".'))),e.addSymbols(e.text,_,x,l,a,s,u,t,i,c.lineStartIndex,c.lineLength,p,m,g,y,!1);for(const C of h)d[C]=e.text.placedSymbolArray.length-1;return 4*_.length}function kg(e){for(const t in e)return e[t];return null}function Pg(e,t,i,r,n,o,a,s,l,c){let u=a.top,h=a.bottom,d=a.left,p=a.right;if(Em(a)&&a.collisionPadding){const e=a.collisionPadding;d-=e[0],u-=e[1],p+=e[2],h+=e[3]}if(l){const e=new xe(d,u),t=new xe(p,u),i=new xe(d,h),r=new xe(p,h),n=Se(l);let o=new xe(0,0);c&&(o=new xe(c[0],c[1])),e._rotateAround(n,o),t._rotateAround(n,o),i._rotateAround(n,o),r._rotateAround(n,o),d=Math.min(e.x,t.x,i.x,r.x),p=Math.max(e.x,t.x,i.x,r.x),u=Math.min(e.y,t.y,i.y,r.y),h=Math.max(e.y,t.y,i.y,r.y)}return e.emplaceBack(t.x,t.y,t.z,i.x,i.y,d,u,p,h,s,r,n,o),e.length-1}function Og(e){Em(e)&&e.collisionPadding&&(e.top-=e.collisionPadding[1],e.bottom+=e.collisionPadding[3]);const t=e.bottom-e.top;return t>0?Math.max(10,t):null}function Rg(e,t,i,r){const n=e.compareText;if(t in n){const e=n[t];for(let t=e.length-1;t>=0;t--)if(r.dist(e[t])<i)return!0}else n[t]=[];return n[t].push(r),!1}function zg(e,t){const i=e.fovAboveCenter,r=e.elevation?e.elevation.getMinElevationBelowMSL()*t:0,n=(e._camera.position[2]*e.worldSize-r)/Math.cos(e._pitch),o=Math.sin(i)*n/Math.sin(Math.max(Math.PI/2-e._pitch-i,.01));let a=Math.sin(e._pitch)*o+n;const s=n*(1/e._horizonShift);if(!e.elevation||0===e.elevation.exaggeration()){let t=Math.max(e.zoom-17,0);e.isOrthographic&&(t/=10),a*=1+t}return Math.min(1.01*a,s)}function Dg(e,t){if(!t.isReprojectedInTileSpace)return{scale:1<<e.z,x:e.x,y:e.y,x2:e.x+1,y2:e.y+1,projection:t};const i=Math.pow(2,-e.z),r=e.x*i,n=(e.x+1)*i,o=e.y*i,a=(e.y+1)*i,s=ec(r),l=ec(n),c=tc(o),u=tc(a),h=t.project(s,c),d=t.project(l,c),p=t.project(l,u),f=t.project(s,u);let m=Math.min(h.x,d.x,p.x,f.x),g=Math.min(h.y,d.y,p.y,f.y),y=Math.max(h.x,d.x,p.x,f.x),_=Math.max(h.y,d.y,p.y,f.y);const v=i/16;function x(e,i,r,n,o,a){const s=(r+o)/2,l=(n+a)/2,c=t.project(ec(s),tc(l)),u=Math.max(0,m-c.x,g-c.y,c.x-y,c.y-_);m=Math.min(m,c.x),y=Math.max(y,c.x),g=Math.min(g,c.y),_=Math.max(_,c.y),u>v&&(x(e,c,r,n,s,l),x(c,i,s,l,o,a))}x(h,d,r,o,n,o),x(d,p,n,o,n,a),x(p,f,n,a,r,a),x(f,h,r,a,r,o),m-=v,g-=v,y+=v,_+=v;const C=1/Math.max(y-m,_-g);return{scale:C,x:m*C,y:g*C,x2:y*C,y2:_*C,projection:t}}function Fg(e,t){let{x:i,y:r}=t;return new xe(((i-(arguments.length>2&&void 0!==arguments[2]?arguments[2]:0))*e.scale-e.x)*Or,(r*e.scale-e.y)*Or)}const Bg=l(new Float32Array(16));class Vg{constructor(e){this.spec=e,this.name=e.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(e,t){return{x:0,y:0,z:0}}unproject(e,t){return new Gl(0,0)}projectTilePoint(e,t,i){return{x:e,y:t,z:0}}locationPoint(e,t,i){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e._coordinatePoint(e.locationCoordinate(t,i),r)}pixelsPerMeter(e,t){return $l(1,e)*t}pixelSpaceConversion(e,t,i){return 1}farthestPixelDistance(e){return zg(e,e.pixelsPerMeter)}pointCoordinate(e,t,i,r){const n=e.horizonLineFromTop(!1),o=new xe(t,Math.max(n,i));return e.rayIntersectionCoordinate(e.pointRayIntersection(o,r))}pointCoordinate3D(e,t,i){const r=new xe(t,i);if(e.elevation)return e.elevation.pointCoordinate(r);{const t=this.pointCoordinate(e,r.x,r.y,0);return[t.x,t.y,t.z]}}isPointAboveHorizon(e,t){if(e.elevation&&e.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(e,t.x,t.y);const i=e.horizonLineFromTop();return t.y<i}createInversionMatrix(e,t){return Bg}createTileMatrix(e,t,i){let r,n,o;const a=i.canonical,s=l(new Float64Array(16));if(this.isReprojectedInTileSpace){const l=Dg(a,this);r=1,n=l.x+i.wrap*l.scale,o=l.y,d(s,s,[r/l.scale,r/l.scale,e.pixelsPerMeter/t])}else r=t/e.zoomScale(a.z),n=(a.x+Math.pow(2,a.z)*i.wrap)*r,o=a.y*r;return h(s,s,[n,o,0]),d(s,s,[r/Or,r/Or,1]),s}upVector(e,t,i){return[0,0,1]}upVectorScale(e,t,i){return{metersToTile:1}}}class Ng extends Vg{constructor(e){super(e),this.range=[4,7],this.center=e.center||[-96,37.5];const[t,i]=this.parallels=e.parallels||[29.5,45.5],r=Math.sin(Se(t));this.n=(r+Math.sin(Se(i)))/2,this.c=1+r*(2*this.n-r),this.r0=Math.sqrt(this.c)/this.n}project(e,t){const{n:i,c:r,r0:n}=this,o=Se(e-this.center[0]),a=Se(t),s=Math.sqrt(r-2*i*Math.sin(a))/i;return{x:s*Math.sin(o*i),y:s*Math.cos(o*i)-n,z:0}}unproject(e,t){const{n:i,c:r,r0:n}=this,o=n+t;let a=Math.atan2(e,Math.abs(o))*Math.sign(o);o*i<0&&(a-=Math.PI*Math.sign(e)*Math.sign(o));const s=Se(this.center[0])*i;a=Pe(a,-Math.PI-s,Math.PI-s);const l=Ae(Le(a/i)+this.center[0],-180,180),c=Math.asin(Ae((r-(e*e+o*o)*i*i)/(2*i),-1,1)),u=Ae(Le(c),-85.051129,rc);return new Gl(l,u)}}const Ug=1.340264,jg=-.081106,Hg=893e-6,Zg=.003796,Wg=Math.sqrt(3)/2;class Gg extends Vg{project(e,t){t=t/180*Math.PI,e=e/180*Math.PI;const i=Math.asin(Wg*Math.sin(t)),r=i*i,n=r*r*r;return{x:.5*(e*Math.cos(i)/(Wg*(Ug+3*jg*r+n*(7*Hg+9*Zg*r)))/Math.PI+.5),y:1-.5*(i*(Ug+jg*r+n*(Hg+Zg*r))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let i=t=(2*(1-t)-1)*Math.PI,r=i*i,n=r*r*r;for(let c,u,h,d=0;d<12&&(u=i*(Ug+jg*r+n*(Hg+Zg*r))-t,h=Ug+3*jg*r+n*(7*Hg+9*Zg*r),c=u/h,i=Ae(i-c,-Math.PI/3,Math.PI/3),r=i*i,n=r*r*r,!(Math.abs(c)<1e-12));++d);const o=Wg*e*(Ug+3*jg*r+n*(7*Hg+9*Zg*r))/Math.cos(i),a=Math.asin(Math.sin(i)/Wg),s=Ae(180*o/Math.PI,-180,180),l=Ae(180*a/Math.PI,-85.051129,rc);return new Gl(s,l)}}class qg extends Vg{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){return{x:.5+e/360,y:.5-t/360,z:0}}unproject(e,t){const i=360*(e-.5),r=Ae(360*(.5-t),-85.051129,rc);return new Gl(i,r)}}const Xg=Math.PI/2;function Yg(e){return Math.tan((Xg+e)/2)}class Kg extends Vg{constructor(e){super(e),this.center=e.center||[0,30];const[t,i]=this.parallels=e.parallels||[30,30];let r=Se(t),n=Se(i);this.southernCenter=r+n<0,this.southernCenter&&(r=-r,n=-n);const o=Math.cos(r),a=Yg(r);this.n=r===n?Math.sin(r):Math.log(o/Math.cos(n))/Math.log(Yg(n)/a),this.f=o*Math.pow(Yg(r),this.n)/this.n}project(e,t){t=Se(t),this.southernCenter&&(t=-t),e=Se(e-this.center[0]);const i=1e-6,{n:r,f:n}=this;n>0?t<-Xg+i&&(t=-Xg+i):t>Xg-i&&(t=Xg-i);const o=n/Math.pow(Yg(t),r);let a=o*Math.sin(r*e),s=n-o*Math.cos(r*e);return a=.5*(a/Math.PI+.5),s=.5*(s/Math.PI+.5),{x:a,y:this.southernCenter?s:1-s,z:0}}unproject(e,t){e=(2*e-.5)*Math.PI,this.southernCenter&&(t=1-t),t=(2*(1-t)-.5)*Math.PI;const{n:i,f:r}=this,n=r-t,o=Math.sign(n),a=Math.sign(i)*Math.sqrt(e*e+n*n);let s=Math.atan2(e,Math.abs(n))*o;n*i<0&&(s-=Math.PI*Math.sign(e)*o);const l=Ae(Le(s/i)+this.center[0],-180,180),c=Ae(Le(2*Math.atan(Math.pow(r/a,1/i))-Xg),-85.051129,rc);return new Gl(l,this.southernCenter?-c:c)}}class Jg extends Vg{constructor(e){super(e),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(e,t){return{x:Jl(e),y:Ql(t),z:0}}unproject(e,t){const i=ec(e),r=tc(t);return new Gl(i,r)}}const Qg=Se(rc);class $g extends Vg{project(e,t){const i=(t=Se(t))*t,r=i*i;return{x:.5*((e=Se(e))*(.8707-.131979*i+r*(r*(.003971*i-.001529*r)-.013791))/Math.PI+.5),y:1-.5*(t*(1.007226+i*(.015085+r*(.028874*i-.044475-.005916*r)))/Math.PI+1),z:0}}unproject(e,t){e=(2*e-.5)*Math.PI;let i=t=(2*(1-t)-1)*Math.PI,r=25,n=0,o=i*i;do{o=i*i;const e=o*o;n=(i*(1.007226+o*(.015085+e*(.028874*o-.044475-.005916*e)))-t)/(1.007226+o*(.045255+e*(.259866*o-.311325-.005916*11*e))),i=Ae(i-n,-Qg,Qg)}while(Math.abs(n)>1e-6&&--r>0);o=i*i;const a=Ae(Le(e/(.8707+o*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979))),-180,180),s=Le(i);return new Gl(a,s)}}const ey=Se(rc);class ty extends Vg{project(e,t){t=Se(t),e=Se(e);const i=Math.cos(t),r=2/Math.PI,n=Math.acos(i*Math.cos(e/2)),o=Math.sin(n)/n,a=.5*(e*r+2*i*Math.sin(e/2)/o)||0,s=.5*(t+Math.sin(t)/o)||0;return{x:.5*(a/Math.PI+.5),y:1-.5*(s/Math.PI+1),z:0}}unproject(e,t){let i=e=(2*e-.5)*Math.PI,r=t=(2*(1-t)-1)*Math.PI,n=25;const o=1e-6;let a=0,s=0;do{const n=Math.cos(r),o=Math.sin(r),l=2*o*n,c=o*o,u=n*n,h=Math.cos(i/2),d=Math.sin(i/2),p=2*h*d,f=d*d,m=1-u*h*h,g=m?1/m:0,y=m?Math.acos(n*h)*Math.sqrt(1/m):0,_=.5*(2*y*n*d+2*i/Math.PI)-e,v=.5*(y*o+r)-t,x=.5*g*(u*f+y*n*h*c)+1/Math.PI,C=g*(p*l/4-y*o*d),w=.125*g*(l*d-y*o*u*p),b=.5*g*(c*h+y*f*n)+.5,S=C*w-b*x;a=(v*C-_*b)/S,s=(_*w-v*x)/S,i=Ae(i-a,-Math.PI,Math.PI),r=Ae(r-s,-ey,ey)}while((Math.abs(a)>o||Math.abs(s)>o)&&--n>0);return new Gl(Le(i),Le(r))}}class iy extends Vg{constructor(e){super(e),this.center=e.center||[0,0],this.parallels=e.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Se(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(e,t){const{scale:i,cosPhi:r}=this;return{x:Se(e)*r*i+.5,y:-Math.sin(Se(t))/r*i+.5,z:0}}unproject(e,t){const{scale:i,cosPhi:r}=this,n=-(t-.5)/i,o=Ae(Le((e-.5)/i)/r,-180,180),a=Math.asin(Ae(n*r,-1,1)),s=Ae(Le(a),-85.051129,rc);return new Gl(o,s)}}class ry extends Jg{constructor(e){super(e),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(e,t,i){const r=Nu(e,t,i);return B(r,r,Hu(Ru(i))),{x:r[0],y:r[1],z:r[2]}}locationPoint(e,t,i){const r=Hl(t.lat,t.lng),n=R([],r),o=i?e._centerAltitude+i:e.elevation?e.elevation.getAtPointOrZero(e.locationCoordinate(t),e._centerAltitude):e._centerAltitude;A(r,r,n,$l(1,0)*Or*o);const a=l(new Float64Array(16));return u(a,e.pixelMatrix,e.globeMatrix),B(r,r,a),new xe(r[0],r[1])}pixelsPerMeter(e,t){return $l(1,0)*t}pixelSpaceConversion(e,t,i){const r=$l(1,e)*t,n=ci($l(1,45)*t,r,i);return this.pixelsPerMeter(e,t)/n}createTileMatrix(e,t,i){const r=Zu(Ru(i.canonical));return u(new Float64Array(16),e.globeMatrix,r)}createInversionMatrix(e,t){const{center:i}=e,r=Hu(Ru(t));return f(r,r,Se(i.lng)),p(r,r,Se(i.lat)),d(r,r,[e._pixelsPerMercatorPixel,e._pixelsPerMercatorPixel,1]),Float32Array.from(r)}pointCoordinate(e,t,i,r){return ku(e,t,i,!0)||new lc(0,0)}pointCoordinate3D(e,t,i){const r=this.pointCoordinate(e,t,i,0);return[r.x,r.y,r.z]}isPointAboveHorizon(e,t){return!ku(e,t.x,t.y,!1)}farthestPixelDistance(e){const t=function(e,t){const i=e.cameraToCenterDistance,r=e._centerAltitude*t,n=e._camera,o=e._camera.forward(),a=S([],I([],o,-i),[0,0,r]),s=e.worldSize/(2*Math.PI),l=[0,0,-s],c=e.width/e.height,u=Math.tan(e.fovAboveCenter),h=I([],n.up(),u),d=I([],n.right(),u*c),p=R([],S([],S([],o,h),d)),f=[];let m;if(new Bc(a,p).closestPointOnSphere(l,s,f)){const t=S([],f,l),i=j([],t,a);m=Math.cos(e.fovAboveCenter)*w(i)}else{const e=j([],a,l),t=j([],l,a);R(t,t);const i=w(e)-s;m=Math.sqrt(i*(i+2*s));const r=Math.acos(m/(s+i))-Math.acos(z(o,t));m*=Math.cos(r)}return 1.01*m}(e,this.pixelsPerMeter(e.center.lat,e.worldSize)),i=Xu(e.zoom);if(i>0){const r=zg(e,$l(1,e.center.lat)*e.worldSize),n=e.worldSize/(2*Math.PI),o=Math.max(e.width,e.height)/e.worldSize*Math.PI;return ci(t,r+n*(1-Math.cos(o)),Math.pow(i,10))}return t}upVector(e,t,i){return Nu(t,i,e,1)}upVectorScale(e){return{metersToTile:Iu(Uu(Ru(e)))}}}function ny(e){const t=e.parallels,i=!!t&&Math.abs(t[0]+t[1])<.01;switch(e.name){case"mercator":return new Jg(e);case"equirectangular":return new qg(e);case"naturalEarth":return new $g(e);case"equalEarth":return new Gg(e);case"winkelTripel":return new ty(e);case"albers":return i?new iy(e):new Ng(e);case"lambertConformalConic":return i?new iy(e):new Kg(e);case"globe":return new ry(e)}throw new Error("Invalid projection name: ".concat(e.name))}const oy=Ic.VectorTileFeature.types,ay=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function sy(e,t,i,r,n,o,a,s,l,c,u,h,d){const p=s?Math.min(Ig,Math.round(s[0])):0,f=s?Math.min(Ig,Math.round(s[1])):0;e.emplaceBack(t,i,Math.round(32*r),Math.round(32*n),o,a,(p<<1)+(l?1:0),f,16*c,16*u,256*h,256*d)}function ly(e,t,i){e.emplaceBack(t,i)}function cy(e,t,i,r,n,o,a){e.emplaceBack(t,i,r,n,o,a)}const uy=(e,t,i,r)=>{for(let n=0;n<t;n++)e.emplaceBack(i[0],i[1],i[2],r[0],r[1],r[2])};function hy(e,t,i,r,n){e.emplaceBack(t,i,r,n),e.emplaceBack(t,i,r,n),e.emplaceBack(t,i,r,n),e.emplaceBack(t,i,r,n)}function dy(e){for(const t of e.sections)if(aa(t.text))return!0;return!1}class py{constructor(e){this.layoutVertexArray=new fs,this.indexArray=new bs,this.programConfigurations=e,this.segments=new el,this.dynamicLayoutVertexArray=new gs,this.opacityVertexArray=new ys,this.placedSymbolArray=new Us,this.iconTransitioningVertexArray=new _s,this.globeExtVertexArray=new ms,this.zOffsetVertexArray=new os,this.orientationVertexArray=new Ts}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length&&0===this.iconTransitioningVertexArray.length}upload(e,t,i,r,n){this.isEmpty()||(i&&(this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,jf.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,Zf.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,ay,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=e.createVertexBuffer(this.iconTransitioningVertexArray,qf.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=e.createVertexBuffer(this.globeExtVertexArray,Hf.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||n)&&(this.zOffsetVertexBuffer=e.createVertexBuffer(this.zOffsetVertexArray,Wf.members,!0)),!this.orientationVertexBuffer&&this.orientationVertexArray&&this.orientationVertexArray.length>0&&(this.orientationVertexBuffer=e.createVertexBuffer(this.orientationVertexArray,Gf.members,!0)),this.opacityVertexBuffer.itemSize=1),(i||r)&&this.programConfigurations.upload(e))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.orientationVertexBuffer&&this.orientationVertexBuffer.destroy())}}Go(py,"SymbolBuffers");class fy{constructor(e,t,i){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new i,this.segments=new el,this.collisionVertexArray=new ws,this.collisionVertexArrayExt=new gs}upload(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,Xf.members,!0),this.collisionVertexBufferExt=e.createVertexBuffer(this.collisionVertexArrayExt,Yf.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Go(fy,"CollisionBuffers");class my{constructor(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.lut=e.lut,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.index=e.index,this.pixelRatio=e.pixelRatio,this.sourceLayerIndex=e.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=l([]),this.placementViewportMatrix=l([]);const t=this.layers[0]._unevaluatedLayout._values;this.worldview=e.worldview,this.textSizeData=zm(this.zoom,t["text-size"],this.worldview),this.iconSizeData=zm(this.zoom,t["icon-size"],this.worldview);const i=this.layers[0].layout,r=i.get("symbol-sort-key"),n=i.get("symbol-z-order");this.canOverlap=i.get("text-allow-overlap")||i.get("icon-allow-overlap")||i.get("text-ignore-placement")||i.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==n&&void 0!==r.constantOr(1),this.sortFeaturesByY=("viewport-y"===n||"auto"===n&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=i.get("text-writing-mode").map(e=>mm[e]),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.sourceID=e.sourceID,this.projection=e.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=!1,this.elevationType="none",this.elevationStateComplete=!1,this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new py(new El(this.layers,{zoom:this.zoom,lut:this.lut},e=>e.startsWith("text")||e.startsWith("symbol"))),this.icon=new py(new El(this.layers,{zoom:this.zoom,lut:this.lut},e=>e.startsWith("icon")||e.startsWith("symbol"))),this.glyphOffsetArray=new Zs,this.lineVertexArray=new Ws,this.symbolInstances=new Hs}calculateGlyphDependencies(e,t,i,r,n){for(const o of e){const e=o.codePointAt(0);if(void 0===e)break;if(t[e]=!0,r&&n&&e<=65535){const e=em[o];e&&(t[e.charCodeAt(0)]=!0)}}}updateFootprints(e,t){}updateReplacement(e,t){if(t.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=t.updateTime;const i=t.getReplacementRegionsForTile(e.toUnwrapped(),!0);return!Od(this.activeReplacements,i)&&(this.activeReplacements=i,!0)}populate(e,t,i,r){const n=this.layers[0],o=n.layout,a="globe"===this.projection.name,s=o.get("text-font"),l=o.get("text-field"),c=o.get("icon-image"),[u,h]=o.get("icon-size-scale-range"),d=Ae(t.scaleFactor||1,u,h),p=("constant"!==l.value.kind||l.value.value instanceof Ri&&!l.value.value.isEmpty()||l.value.value.toString().length>0)&&("constant"!==s.value.kind||s.value.value.length>0),f="constant"!==c.value.kind||!!c.value.value||Object.keys(c.parameters).length>0,m=o.get("symbol-sort-key");if(this.features=[],!p&&!f)return;const g=t.iconDependencies,y=t.glyphDependencies,_=t.availableImages,v=new ya(this.zoom,{worldview:this.worldview});for(const{feature:x,id:C,index:w,sourceLayerIndex:b}of e){const e=n._featureFilter.needGeometry,t=yc(x,e);if(!n._featureFilter.filter(v,t,i))continue;if(e||(t.geometry=gc(x,i,r)),a&&1!==x.type&&i.z<=5){const e=t.geometry,r=.98078528056,n=(e,t)=>z(Nu(e.x,e.y,i,1),Nu(t.x,t.y,i,1))<r;for(let t=0;t<e.length;t++)e[t]=dc(e[t],n)}let l,c;if(p){const e=n.getValueAndResolveTokens("text-field",t,i,_),r=Ri.factory(e);dy(r)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===fa()||this.hasRTLText&&ga.isParsed())&&(l=$f(r,n,t))}if(f){const e=n.getValueAndResolveTokens("icon-image",t,i,_);c="string"==typeof e?Di.build(e):e}if(!l&&!c)continue;const u=this.sortFeaturesByKey?m.evaluate(t,{},i):void 0,h={id:C,text:l,icon:c,index:w,sourceLayerIndex:b,geometry:t.geometry,properties:x.properties,type:oy[x.type],sortKey:u};if(this.features.push(h),c){const e=this.layers[0]._unevaluatedLayout._values,{iconPrimary:t,iconSecondary:r}=xg(c,this.iconSizeData,e["icon-size"],i,this.zoom,h,this.pixelRatio,d,this.worldview),n=t.id.toString();if(g.has(n)?g.get(n).push(t):g.set(n,[t]),r){const e=r.id.toString();g.has(e)?g.get(e).push(r):g.set(e,[r])}}if(l){const e=s.evaluate(t,{},i).join(","),r="map"===o.get("text-rotation-alignment")&&"point"!==o.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(mm.vertical)>=0;for(const t of l.sections)if(t.image){const e=t.image.getPrimary().scaleSelf(this.pixelRatio),i=e.id.toString(),r=g.get(i)||[];r.push(e),g.set(i,r)}else{const i=Qo(l.toString()),n=t.fontStack||e,o=y[n]=y[n]||{};this.calculateGlyphDependencies(t.text,o,r,this.allowVerticalPlacement,i)}}}if("line"===o.get("symbol-placement")&&(this.features=function(e){const t={},i={},r=[];let n=0;function o(t){r.push(e[t]),n++}function a(e,t,n){const o=i[e];return delete i[e],i[t]=o,r[o].geometry[0].pop(),r[o].geometry[0]=r[o].geometry[0].concat(n[0]),o}function s(e,i,n){const o=t[i];return delete t[i],t[e]=o,r[o].geometry[0].shift(),r[o].geometry[0]=n[0].concat(r[o].geometry[0]),o}function l(e,t,i){const r=i?t[0][t[0].length-1]:t[0][0];return"".concat(e,":").concat(r.x,":").concat(r.y)}for(let c=0;c<e.length;c++){const u=e[c],h=u.geometry,d=u.text?u.text.toString():null;if(!d){o(c);continue}const p=l(d,h),f=l(d,h,!0);if(p in i&&f in t&&i[p]!==t[f]){const e=s(p,f,h),n=a(p,f,r[e].geometry);delete t[p],delete i[f],i[l(d,r[n].geometry,!0)]=n,r[e].geometry=null}else p in i?a(p,f,h):f in t?s(p,f,h):(o(c),t[p]=n-1,i[f]=n-1)}return r.filter(e=>e.geometry)}(this.features)),"hd-road-markup"===o.get("symbol-elevation-reference")){if(this.elevationType="road",t.elevationFeatures){!this.elevationFeatures&&t.elevationFeatures.length>0&&(this.elevationFeatures=[],this.elevationFeatureIdToIndex=new Map);for(const e of t.elevationFeatures)this.elevationFeatureIdToIndex.set(e.id,this.elevationFeatures.length),this.elevationFeatures.push(e)}}else o.get("symbol-z-elevate")&&(this.elevationType="offset");"none"!==this.elevationType&&(this.zOffsetBuffersNeedUpload=!0),this.sortFeaturesByKey&&this.features.sort((e,t)=>e.sortKey-t.sortKey)}update(e,t,i,r,n,o,a){this.text.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,this.worldview),this.icon.programConfigurations.updatePaintArrays(e,t,n,i,r,o,a,this.worldview)}updateRoadElevation(e){if("road"!==this.elevationType||!this.elevationFeatures)return;if(this.elevationStateComplete)return;this.elevationStateComplete=!0,this.hasAnyZOffset=!1;let t=!1;const i=sc(e),r=1/i;let n=!1,o=!1;for(let a=0;a<this.symbolInstances.length;a++){const e=this.symbolInstances.get(a),s=b(1,0,0),l=b(0,1,0),{numHorizontalGlyphVertices:c,numVerticalGlyphVertices:u,numIconVertices:h,numVerticalIconVertices:d}=e,p=c>0||u>0,f=h>0,m=this.elevationFeatures[e.elevationFeatureIndex];if(m){const a=new xe(e.tileAnchorX,e.tileAnchorY),c=.075+m.pointElevation(a);e.zOffset!==c&&(t=!0,e.zOffset=c);const u=m.computeSlopeNormal(a,r),h=oe(Y(),b(0,0,1),u);N(s,s,h),N(l,l,h),s[2]*=i,l[2]*=i,1===s[0]&&0===s[1]&&0===s[2]&&0===l[0]&&1===l[1]&&0===l[2]||(n=n||p,o=o||f)}if(p&&(uy(this.text.orientationVertexArray,c,s,l),uy(this.text.orientationVertexArray,u,s,l)),f){const{placedIconSymbolIndex:t,verticalPlacedIconSymbolIndex:i}=e;t>=0&&uy(this.icon.orientationVertexArray,h,s,l),i>=0&&uy(this.icon.orientationVertexArray,d,s,l)}}n||(this.text.orientationVertexArray=void 0),o||(this.icon.orientationVertexArray=void 0),t&&(this.zOffsetBuffersNeedUpload=!0,this.zOffsetSortDirty=!0)}updateZOffset(){const e=(e,t,r)=>{i+=t,i>e.length&&e.resize(i);for(let n=-t;n<0;n++)e.emplace(n+i,r)},t=(e,t,i)=>{r+=t,r>e.length&&e.resize(r);for(let n=-t;n<0;n++)e.emplace(n+r,i)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let i=0,r=0;for(let n=0;n<this.symbolInstances.length;n++){const i=this.symbolInstances.get(n),{numHorizontalGlyphVertices:r,numVerticalGlyphVertices:o,numIconVertices:a}=i,s=i.zOffset,l=a>0;if((r>0||o>0)&&(e(this.text.zOffsetVertexArray,r,s),e(this.text.zOffsetVertexArray,o,s)),l){const{placedIconSymbolIndex:e,verticalPlacedIconSymbolIndex:r}=i;e>=0&&t(this.icon.zOffsetVertexArray,a,s),r>=0&&t(this.icon.zOffsetVertexArray,i.numVerticalIconVertices,s)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(e){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(e),this.iconCollisionBox.upload(e)),this.text.upload(e,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(e,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=ny(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(e,t){const i=this.lineVertexArray.length;if(void 0!==e.segment)for(const{x:r,y:n}of t)this.lineVertexArray.emplaceBack(r,n);return{lineStartIndex:i,lineLength:this.lineVertexArray.length-i}}addSymbols(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m){const g=e.indexArray,y=e.layoutVertexArray,_=e.globeExtVertexArray,v=e.segments.prepareSegment(4*t.length,y,g,this.canOverlap?o.sortKey:void 0),x=this.glyphOffsetArray.length,C=v.vertexLength,w=this.allowVerticalPlacement&&a===mm.vertical?Math.PI/2:0,b=o.text&&o.text.sections;for(let L=0;L<t.length;L++){const{tl:r,tr:n,bl:a,br:c,texPrimary:u,texSecondary:h,pixelOffsetTL:x,pixelOffsetBR:C,minFontScaleX:S,minFontScaleY:T,glyphOffset:M,isSDF:E,sectionIndex:I}=t[L],A=v.vertexLength,k=M[1];if(sy(y,l.x,l.y,r.x,k+r.y,u.x,u.y,i,E,x.x,x.y,S,T),sy(y,l.x,l.y,n.x,k+n.y,u.x+u.w,u.y,i,E,C.x,x.y,S,T),sy(y,l.x,l.y,a.x,k+a.y,u.x,u.y+u.h,i,E,x.x,C.y,S,T),sy(y,l.x,l.y,c.x,k+c.y,u.x+u.w,u.y+u.h,i,E,C.x,C.y,S,T),s){const{x:t,y:i,z:r}=s.anchor,[n,o,a]=s.up;cy(_,t,i,r,n,o,a),cy(_,t,i,r,n,o,a),cy(_,t,i,r,n,o,a),cy(_,t,i,r,n,o,a),hy(e.dynamicLayoutVertexArray,t,i,r,w)}else hy(e.dynamicLayoutVertexArray,l.x,l.y,l.z,w);if(m){const t=h||u;ly(e.iconTransitioningVertexArray,t.x,t.y),ly(e.iconTransitioningVertexArray,t.x+t.w,t.y),ly(e.iconTransitioningVertexArray,t.x,t.y+t.h),ly(e.iconTransitioningVertexArray,t.x+t.w,t.y+t.h)}g.emplaceBack(A,A+1,A+2),g.emplaceBack(A+1,A+2,A+3),v.vertexLength+=4,v.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(M[0]),L!==t.length-1&&I===t[L+1].sectionIndex||e.programConfigurations.populatePaintArrays(y.length,o,o.index,{},d,p,f,b&&b[I],this.worldview)}const S=s?s.anchor:l;e.placedSymbolArray.emplaceBack(S.x,S.y,S.z,l.x,l.y,x,this.glyphOffsetArray.length-x,C,c,u,l.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],a,0,0,0,h,0)}_commitLayoutVertex(e,t,i,r,n,o,a){e.emplaceBack(t,i,r,n,o,Math.round(a.x),Math.round(a.y))}_addCollisionDebugVertices(e,t,i,r,n,o,a){const s=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),l=s.vertexLength,c=a.tileAnchorX,u=a.tileAnchorY;for(let d=0;d<4;d++)i.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(i.collisionVertexArrayExt,t,e.padding,a.zOffset),this._commitLayoutVertex(i.layoutVertexArray,r,n,o,c,u,new xe(e.x1,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,r,n,o,c,u,new xe(e.x2,e.y1)),this._commitLayoutVertex(i.layoutVertexArray,r,n,o,c,u,new xe(e.x2,e.y2)),this._commitLayoutVertex(i.layoutVertexArray,r,n,o,c,u,new xe(e.x1,e.y2)),s.vertexLength+=4;const h=i.indexArray;h.emplaceBack(l,l+1),h.emplaceBack(l+1,l+2),h.emplaceBack(l+2,l+3),h.emplaceBack(l+3,l),s.primitiveLength+=4}_addTextDebugCollisionBoxes(e,t,i,r,n,o){for(let a=r;a<n;a++){const r=i.get(a),n=this.getSymbolInstanceTextSize(e,o,t,a);this._addCollisionDebugVertices(r,n,this.textCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}_addIconDebugCollisionBoxes(e,t,i,r,n,o){for(let a=r;a<n;a++){const r=i.get(a),n=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._addCollisionDebugVertices(r,n,this.iconCollisionBox,r.projectedAnchorX,r.projectedAnchorY,r.projectedAnchorZ,o)}}generateCollisionDebugBuffers(e,t,i){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new fy(xs,Kf.members,_s),this.iconCollisionBox=new fy(xs,Kf.members,_s);const r=Fm(this.iconSizeData,e),n=Fm(this.textSizeData,e,i);for(let o=0;o<this.symbolInstances.length;o++){const i=this.symbolInstances.get(o);this._addTextDebugCollisionBoxes(n,e,t,i.textBoxStartIndex,i.textBoxEndIndex,i),this._addTextDebugCollisionBoxes(n,e,t,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.iconBoxStartIndex,i.iconBoxEndIndex,i),this._addIconDebugCollisionBoxes(r,e,t,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex,i)}}getSymbolInstanceTextSize(e,t,i,r){const n=this.text.placedSymbolArray.get(t.rightJustifiedTextSymbolIndex>=0?t.rightJustifiedTextSymbolIndex:t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.leftJustifiedTextSymbolIndex>=0?t.leftJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex>=0?t.verticalPlacedTextSymbolIndex:r),o=Dm(this.textSizeData,e,n)/Qf;return this.tilePixelRatio*o}getSymbolInstanceIconSize(e,t,i){const r=this.icon.placedSymbolArray.get(i),n=Dm(this.iconSizeData,e,r);return this.tilePixelRatio*n}_commitDebugCollisionVertexUpdate(e,t,i,r){e.emplaceBack(t,-i,-i,r),e.emplaceBack(t,i,-i,r),e.emplaceBack(t,i,i,r),e.emplaceBack(t,-i,i,r)}_updateTextDebugCollisionBoxes(e,t,i,r,n,o,a){for(let s=r;s<n;s++){const r=i.get(s),n=this.getSymbolInstanceTextSize(e,o,t,s);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,n,r.padding,o.zOffset)}}_updateIconDebugCollisionBoxes(e,t,i,r,n,o,a){for(let s=r;s<n;s++){const r=i.get(s),n=this.getSymbolInstanceIconSize(e,t,o.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,n,r.padding,o.zOffset)}}updateCollisionDebugBuffers(e,t,i,r){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const n=Fm(this.iconSizeData,e,r),o=Fm(this.textSizeData,e,i);for(let a=0;a<this.symbolInstances.length;a++){const s=this.symbolInstances.get(a);this._updateTextDebugCollisionBoxes(o,e,t,s.textBoxStartIndex,s.textBoxEndIndex,s,i),this._updateTextDebugCollisionBoxes(o,e,t,s.verticalTextBoxStartIndex,s.verticalTextBoxEndIndex,s,i),this._updateIconDebugCollisionBoxes(n,e,t,s.iconBoxStartIndex,s.iconBoxEndIndex,s,r),this._updateIconDebugCollisionBoxes(n,e,t,s.verticalIconBoxStartIndex,s.verticalIconBoxEndIndex,s,r)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(e,t,i,r,n,o,a,s,l){const c={};if(t<i){const{x1:i,y1:r,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(t);c.textBox={x1:i,y1:r,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.textFeatureIndex=p}if(r<n){const{x1:t,y1:i,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(r);c.verticalTextBox={x1:t,y1:i,x2:n,y2:o,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalTextFeatureIndex=p}if(o<a){const{x1:t,y1:i,x2:r,y2:n,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(o);c.iconBox={x1:t,y1:i,x2:r,y2:n,padding:a,projectedAnchorX:s,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.iconFeatureIndex=p}if(s<l){const{x1:t,y1:i,x2:r,y2:n,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d,featureIndex:p}=e.get(s);c.verticalIconBox={x1:t,y1:i,x2:r,y2:n,padding:o,projectedAnchorX:a,projectedAnchorY:l,projectedAnchorZ:u,tileAnchorX:h,tileAnchorY:d},c.verticalIconFeatureIndex=p}return c}deserializeCollisionBoxes(e){this.collisionArrays=[];for(let t=0;t<this.symbolInstances.length;t++){const i=this.symbolInstances.get(t);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(e,i.textBoxStartIndex,i.textBoxEndIndex,i.verticalTextBoxStartIndex,i.verticalTextBoxEndIndex,i.iconBoxStartIndex,i.iconBoxEndIndex,i.verticalIconBoxStartIndex,i.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(e,t){const i=e.placedSymbolArray.get(t),r=i.vertexStartIndex+4*i.numGlyphs;for(let n=i.vertexStartIndex;n<r;n+=4)e.indexArray.emplaceBack(n,n+1,n+2),e.indexArray.emplaceBack(n+1,n+2,n+3)}getSortedSymbolIndexes(e){if(this.sortedAngle===e&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const t=Math.sin(e),i=Math.cos(e),r=[],n=[],o=[];for(let a=0;a<this.symbolInstances.length;++a){o.push(a);const e=this.symbolInstances.get(a);r.push(0|Math.round(t*e.tileAnchorX+i*e.tileAnchorY)),n.push(e.featureIndex)}return o.sort((e,t)=>r[e]-r[t]||n[t]-n[e]),o}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let e=0;e<this.symbolInstances.length;++e)this.symbolInstanceIndexesSortedZOffset.push(e)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((e,t)=>this.symbolInstances.get(t).zOffset-this.symbolInstances.get(e).zOffset)}addToSortKeyRanges(e,t){const i=this.sortKeyRanges[this.sortKeyRanges.length-1];i&&i.sortKey===t?i.symbolInstanceEnd=e+1:this.sortKeyRanges.push({sortKey:t,symbolInstanceStart:e,symbolInstanceEnd:e+1})}sortFeatures(e){if(this.sortFeaturesByY&&this.sortedAngle!==e&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(e),this.sortedAngle=e,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const e of this.symbolInstanceIndexes){const t=this.symbolInstances.get(e);this.featureSortOrder.push(t.featureIndex);const{rightJustifiedTextSymbolIndex:i,centerJustifiedTextSymbolIndex:r,leftJustifiedTextSymbolIndex:n,verticalPlacedTextSymbolIndex:o,placedIconSymbolIndex:a,verticalPlacedIconSymbolIndex:s}=t;i>=0&&this.addIndicesForPlacedSymbol(this.text,i),r>=0&&r!==i&&this.addIndicesForPlacedSymbol(this.text,r),n>=0&&n!==r&&n!==i&&this.addIndicesForPlacedSymbol(this.text,n),o>=0&&this.addIndicesForPlacedSymbol(this.text,o),a>=0&&this.addIndicesForPlacedSymbol(this.icon,a),s>=0&&this.addIndicesForPlacedSymbol(this.icon,s)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let gy,yy,_y;Go(my,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),my.addDynamicAttributes=hy;class vy{constructor(e){this.type=e.property.overrides?e.property.overrides.runtimeType:mi,this.defaultValue=e}evaluate(e){if(e.formattedSection){const t=this.defaultValue.property.overrides;if(t&&t.hasOverride(e.formattedSection))return t.getOverride(e.formattedSection)}return e.feature&&e.featureState?this.defaultValue.evaluate(e.feature,e.featureState):this.defaultValue.property.specification.default}eachChild(e){this.defaultValue.isConstant()||e(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Go(vy,"FormatSectionOverride",{omit:["defaultValue"]});const xy=()=>_y||(_y={layout:gy||(gy=new Ia({"symbol-placement":new Ta(Aa.layout_symbol["symbol-placement"]),"symbol-spacing":new Ta(Aa.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ta(Aa.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ma(Aa.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ta(Aa.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Ta(Aa.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Ta(Aa.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Ta(Aa.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ta(Aa.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ta(Aa.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ta(Aa.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ma(Aa.layout_symbol["icon-size"]),"icon-size-scale-range":new Ta(Aa.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Ma(Aa.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ma(Aa.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ma(Aa.layout_symbol["icon-image"]),"icon-rotate":new Ma(Aa.layout_symbol["icon-rotate"]),"icon-padding":new Ta(Aa.layout_symbol["icon-padding"]),"icon-keep-upright":new Ta(Aa.layout_symbol["icon-keep-upright"]),"icon-offset":new Ma(Aa.layout_symbol["icon-offset"]),"icon-anchor":new Ma(Aa.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ta(Aa.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ta(Aa.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ta(Aa.layout_symbol["text-rotation-alignment"]),"text-field":new Ma(Aa.layout_symbol["text-field"]),"text-font":new Ma(Aa.layout_symbol["text-font"]),"text-size":new Ma(Aa.layout_symbol["text-size"]),"text-size-scale-range":new Ta(Aa.layout_symbol["text-size-scale-range"]),"text-max-width":new Ma(Aa.layout_symbol["text-max-width"]),"text-line-height":new Ma(Aa.layout_symbol["text-line-height"]),"text-letter-spacing":new Ma(Aa.layout_symbol["text-letter-spacing"]),"text-justify":new Ma(Aa.layout_symbol["text-justify"]),"text-radial-offset":new Ma(Aa.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ta(Aa.layout_symbol["text-variable-anchor"]),"text-anchor":new Ma(Aa.layout_symbol["text-anchor"]),"text-max-angle":new Ta(Aa.layout_symbol["text-max-angle"]),"text-writing-mode":new Ta(Aa.layout_symbol["text-writing-mode"]),"text-rotate":new Ma(Aa.layout_symbol["text-rotate"]),"text-padding":new Ta(Aa.layout_symbol["text-padding"]),"text-keep-upright":new Ta(Aa.layout_symbol["text-keep-upright"]),"text-transform":new Ma(Aa.layout_symbol["text-transform"]),"text-offset":new Ma(Aa.layout_symbol["text-offset"]),"text-allow-overlap":new Ta(Aa.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ta(Aa.layout_symbol["text-ignore-placement"]),"text-optional":new Ta(Aa.layout_symbol["text-optional"]),visibility:new Ta(Aa.layout_symbol.visibility)})),paint:yy||(yy=new Ia({"icon-opacity":new Ma(Aa.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Ma(Aa.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Ma(Aa.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Ma(Aa.paint_symbol["text-emissive-strength"]),"icon-color":new Ma(Aa.paint_symbol["icon-color"]),"icon-halo-color":new Ma(Aa.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ma(Aa.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ma(Aa.paint_symbol["icon-halo-blur"]),"icon-translate":new Ta(Aa.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ta(Aa.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Ta(Aa.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Ma(Aa.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Ma(Aa.paint_symbol["text-occlusion-opacity"]),"text-color":new Ma(Aa.paint_symbol["text-color"],{runtimeType:vi,getOverride:e=>e.textColor,hasOverride:e=>!!e.textColor}),"text-halo-color":new Ma(Aa.paint_symbol["text-halo-color"]),"text-halo-width":new Ma(Aa.paint_symbol["text-halo-width"]),"text-halo-blur":new Ma(Aa.paint_symbol["text-halo-blur"]),"text-translate":new Ta(Aa.paint_symbol["text-translate"]),"text-translate-anchor":new Ta(Aa.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Ta(Aa.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Ta(Aa.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Ta(Aa.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Ta(Aa.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Ma(Aa.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},_y);class Cy extends Ka{constructor(e,t,i,r){super(e,xy(),t,i,r),this._colorAdjustmentMatrix=l([]),this.hasInitialOcclusionOpacityProperties=void 0!==e.paint&&("icon-occlusion-opacity"in e.paint||"text-occlusion-opacity"in e.paint)}recalculate(e,t){super.recalculate(e,t),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const i=this.layout.get("text-writing-mode");if(i){const e=[];for(const t of i)e.indexOf(t)<0&&e.push(t);this.layout._values["text-writing-mode"]=e}else this.layout._values["text-writing-mode"]="point"===this.layout.get("symbol-placement")?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(e,t,i,r){return this._saturation===e&&this._contrast===t&&this._brightnessMin===i&&this._brightnessMax===r||(this._colorAdjustmentMatrix=function(e,t,i,r){e=tt(e),t=et(t);const n=s(),o=e/3,a=1-2*o,l=[a,o,o,0,o,a,o,0,o,o,a,0,0,0,0,1],c=.5-.5*t,h=r-i;return u(n,[h,0,0,0,0,h,0,0,0,0,h,0,i,i,i,1],[t,0,0,0,0,t,0,0,0,0,t,0,c,c,c,1]),u(n,n,l),n}(e,t,i,r),this._saturation=e,this._contrast=t,this._brightnessMin=i,this._brightnessMax=r),this._colorAdjustmentMatrix}getValueAndResolveTokens(e,t,i,r){const n=this.layout.get(e).evaluate(t,{},i,r),o=this._unevaluatedLayout._values[e];return o.isDataDriven()||Ro(o.value)||!n?n:function(e,t){return t.replace(/{([^{}]+)}/g,(t,i)=>i in e?String(e[i]):"")}(t.properties,n)}createBucket(e){return new my(e)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const e of xy().paint.overridableProperties){if(!Cy.hasPaintOverride(this.layout,e))continue;const t=this.paint.get(e),i=new vy(t),r=new Oo(i,t.property.specification,this.scope,this.options);let n=null;n="constant"===t.value.kind||"source"===t.value.kind?new Do("source",r):new Fo("composite",r,t.value.zoomStops,t.value.interpolationType),this.paint._values[e]=new Sa(t.property,n,t.parameters)}}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven())&&Cy.hasPaintOverride(this.layout,e)}static hasPaintOverride(e,t){const i=e.get("text-field"),r=xy().paint.properties[t];let n=!1;const o=e=>{for(const t of e)if(r.overrides&&r.overrides.hasOverride(t))return void(n=!0)};if("constant"===i.value.kind&&i.value.value instanceof Ri)o(i.value.value.sections);else if("source"===i.value.kind){const e=t=>{n||(t instanceof Ui&&Vi(t.value)===bi?o(t.value.sections):t instanceof Wi?o(t.sections):t.eachChild(e))},t=i.value;t._styleExpression&&e(t._styleExpression.expression)}return n}getProgramIds(){return["symbol"]}getDefaultProgramParams(e,t,i){return{config:new Ml(this,{zoom:t,lut:i}),overrideFog:!1}}hasElevation(){return this.layout&&"hd-road-markup"===this.layout.get("symbol-elevation-reference")}}let wy,by,Sy,Ly;var Ty=es([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function My(e){switch(e){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function Ey(e){switch(e){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class Iy{constructor(e,t,i,r){this.context=e,this.format=i,this.useMipmap=r&&r.useMipmap,this.texture=e.gl.createTexture(),this.update(t,{premultiply:r&&r.premultiply})}update(e,t){const i=e&&e instanceof HTMLVideoElement&&0===e.width?e.videoWidth:e.width,r=e&&e instanceof HTMLVideoElement&&0===e.height?e.videoHeight:e.height,{context:n}=this,{gl:o}=n,{x:a,y:s}=t&&t.position?t.position:{x:0,y:0},l=a+i,c=s+r;!this.size||this.size[0]===l&&this.size[1]===c||(o.bindTexture(o.TEXTURE_2D,null),o.deleteTexture(this.texture),this.texture=o.createTexture(),this.size=null),o.bindTexture(o.TEXTURE_2D,this.texture),n.pixelStoreUnpackFlipY.set(!1),n.pixelStoreUnpack.set(1),n.pixelStoreUnpackPremultiplyAlpha.set(this.format===o.RGBA8&&(!t||!1!==t.premultiply));const u=e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||ImageBitmap&&e instanceof ImageBitmap;if(!this.size&&l>0&&c>0){const e=this.useMipmap?Math.floor(Math.log2(Math.max(l,c)))+1:1;o.texStorage2D(o.TEXTURE_2D,e,this.format,l,c),this.size=[l,c]}if(this.size)if(u)o.texSubImage2D(o.TEXTURE_2D,0,a,s,My(this.format),Ey(this.format),e);else{const t=e.data;t&&o.texSubImage2D(o.TEXTURE_2D,0,a,s,i,r,My(this.format),Ey(this.format),t)}this.useMipmap&&o.generateMipmap(o.TEXTURE_2D)}bind(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{context:r}=this,{gl:n}=r;n.bindTexture(n.TEXTURE_2D,this.texture),e!==this.minFilter&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,e),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,this.useMipmap&&!i?e===n.NEAREST?n.NEAREST_MIPMAP_NEAREST:n.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),t!==this.wrapS&&(n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,t),this.wrapS=t)}bindExtraParam(e,t,i,r,n){const{context:o}=this,{gl:a}=o;a.bindTexture(a.TEXTURE_2D,this.texture),t!==this.magFilter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,t),this.magFilter=t),e!==this.minFilter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,this.useMipmap?e===a.NEAREST?a.NEAREST_MIPMAP_NEAREST:a.LINEAR_MIPMAP_LINEAR:e),this.minFilter=e),i!==this.wrapS&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,i),this.wrapS=i),r!==this.wrapT&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,r),this.wrapT=r),n!==this.compareMode&&(n?(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_COMPARE_MODE,a.COMPARE_REF_TO_TEXTURE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_COMPARE_FUNC,n)):a.texParameteri(a.TEXTURE_2D,a.TEXTURE_COMPARE_MODE,a.NONE),this.compareMode=n)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}class Ay{constructor(e,t){this.context=e,this.texture=t}bind(e,t){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_2D,this.texture),e!==this.minFilter&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,e),this.minFilter=e),t!==this.wrapS&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,t),this.wrapS=t)}}function ky(e,t,i,r,n,s,l,c){const u=[e,t,1,i,r,1,n,s,1],h=[l,c,1],d=o([],u),[p,f,m]=V(h,h,d);return a(u,u,[p,0,0,0,f,0,0,0,m])}function Py(e,t,i,r,n,s,l,c){const u=function(e,t,i,r,n,s,l,c){const u=ky(0,0,1,0,1,1,0,1),h=ky(e,t,i,r,n,s,l,c);return a(h,h,o([],u))}(e,t,i,r,n,s,l,c);return[u[2]/u[8]/Or,u[5]/u[8]/Or]}function Oy(e){return[e[0],Math.min(Math.max(e[1],-85.051129),rc)]}class Ry extends ei{constructor(e,t,i,r){super(),this.id=e,this.dispatcher=i,this.coordinates=t.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(r),this.options=t,this._dirty=!1}load(e,t){if(this._loaded=t||!1,this.fire(new Kt("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return e&&(this.coordinates=e),this._loaded=!0,void this._finishLoading();this._imageRequest=Ut(this.map._requestManager.transformRequest(this.url,Pt.Image),(t,i)=>{this._imageRequest=null,this._loaded=!0,t?this.fire(new Jt(t)):i&&(this.image=i instanceof HTMLImageElement?pt.getImageData(i):i,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,e&&(this.coordinates=e),this._finishLoading())})}loaded(){return this._loaded}updateImage(e){return e.url?(this._imageRequest&&e.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=e.url,this.load(e.coordinates,this._loaded),this):this}setTexture(e){if(!(e.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new Ay(this.map.painter.context,e.handle),this.width=e.dimensions[0],this.height=e.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new Kt("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(e){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof Ay||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(e){if(this.coordinates=e,this._boundsArray=void 0,this._unsupportedCoords=!1,!e.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let t=e[0][1],i=e[0][1];for(const n of e)n[1]>i&&(i=n[1]),n[1]<t&&(t=n[1]);const r=(i+t)/2;if(r>rc?this.onNorthPole=!0:r<-85.051129&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const t=e.map(lc.fromLngLat);this.tileID=function(e){let t=1/0,i=1/0,r=-1/0,n=-1/0;for(const c of e)t=Math.min(t,c.x),i=Math.min(i,c.y),r=Math.max(r,c.x),n=Math.max(n,c.y);const o=Math.max(r-t,n-i),a=Math.max(0,Math.floor(-Math.log(o)/Math.LN2)),s=Math.pow(2,a);let l=Math.floor((t+r)/2*s);return l>1&&(l-=1),new xu(a,l,Math.floor((i+n)/2*s))}(t),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new Kt("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(e){for(const o in this.tiles){const e=this.tiles[o];"loaded"!==e.state&&(e.state="loaded",e.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const t=Dg(new xu(0,0,0),this.map.transform.projection),i=[t.projection.project(this.coordinates[0][0],this.coordinates[0][1]),t.projection.project(this.coordinates[1][0],this.coordinates[1][1]),t.projection.project(this.coordinates[2][0],this.coordinates[2][1]),t.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(e){const t=e[1].x-e[0].x,i=e[1].y-e[0].y,r=e[2].x-e[1].x,n=e[2].y-e[1].y,o=e[3].x-e[2].x,a=e[3].y-e[2].y,s=e[0].x-e[3].x,l=e[0].y-e[3].y,c=t*n-r*i,u=r*a-o*n,h=o*l-s*a,d=s*i-t*l;return c>0&&u>0&&h>0&&d>0||c<0&&u<0&&h<0&&d<0}(i))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const r=Dg(this.tileID,this.map.transform.projection),[n,s,l,c]=this.coordinates.map(e=>{const t=r.projection.project(e[0],e[1]);return Fg(r,t)._round()});this.perspectiveTransform=Py(n.x,n.y,s.x,s.y,l.x,l.y,c.x,c.y);const u=this._boundsArray=new ns;u.emplaceBack(n.x,n.y,0,0),u.emplaceBack(s.x,s.y,Or,0),u.emplaceBack(c.x,c.y,0,Or),u.emplaceBack(l.x,l.y,Or,Or),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=e.createVertexBuffer(u,Ty.members),this.boundsSegments=el.simpleSegment(0,0,4,2);const h=[],d=[Oy((p=this.coordinates)[0]),Oy(p[1]),Oy(p[2]),Oy(p[3])];var p;const[f,m,g,y]=function(e){let t=e[0][0],i=t,r=e[0][1],n=r;for(let o=1;o<e.length;o++)e[o][0]<t?t=e[o][0]:e[o][0]>i&&(i=e[o][0]),e[o][1]<r?r=e[o][1]:e[o][1]>n&&(n=e[o][1]);return[t,r,i-t,n-r]}(d);{const r=new ns,[n,s,l,c]=function(e){let t=e[0].x,i=t,r=e[0].y,n=r;for(let o=1;o<e.length;o++)e[o].x<t?t=e[o].x:e[o].x>i&&(i=e[o].x),e[o].y<r?r=e[o].y:e[o].y>n&&(n=e[o].y);return[t,r,i-t,n-r]}(i),u=e=>[(e.x-n)/l,(e.y-s)/c],[d,p,_,v]=i.map(u),x=function(e,t,i,r,n,s,l,c){const u=ky(0,0,1,0,1,1,0,1);return a(u,u,o([],ky(e,t,i,r,n,s,l,c)))}(d[0],d[1],p[0],p[1],_[0],_[1],v[0],v[1]);this.elevatedGlobePerspectiveTransform=Py(d[0],d[1],p[0],p[1],_[0],_[1],v[0],v[1]);const C=(e,t)=>{h.push(e.lng);const i=Math.round((e.lng-f)/g*Or),n=Math.round((e.lat-m)/y*Or),o=u(t),a=V([],[o[0],o[1],1],x),s=Math.round(a[0]/a[2]*Or),l=Math.round(a[1]/a[2]*Or);r.emplaceBack(i,n,s,l)},w=i[3].x-i[0].x,b=i[3].y-i[0].y,S=i[2].x-i[1].x,L=i[2].y-i[1].y;for(let e=0;e<65;e++){const r=e/64,n=[i[0].x+r*w,i[0].y+r*b],o=[i[1].x+r*S,i[1].y+r*L],a=o[0]-n[0],s=o[1]-n[1];for(let e=0;e<65;e++){const i=e/64,r={x:n[0]+a*i,y:n[1]+s*i};C(t.projection.unproject(r.x,r.y),r)}}this.elevatedGlobeVertexBuffer=e.createVertexBuffer(r,Ty.members)}{this.maxLongitudeTriangleSize=0;let t=[],i=new bs;const r=(e,r,n)=>{i.emplaceBack(e,r,n);const o=h[e],a=h[r],s=h[n],l=Math.min(Math.min(o,a),s),c=Math.max(Math.max(o,a),s)-l;c>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=c),t.push(l+c/2)};for(let e=0;e<64;e++)for(let t=0;t<64;t++){const i=65*e+t,n=i+1,o=i+65,a=o+1;r(i,o,n),r(n,o,a)}[t,i]=function(e,t){const i=Array.from({length:e.length},(e,t)=>t);i.sort((t,i)=>e[t]-e[i]);const r=[],n=new bs;for(let o=0;o<i.length;o++){const a=i[o];r.push(e[a]);const s=3*a,l=s+1;n.emplaceBack(t.uint16[s],t.uint16[l],t.uint16[l+1])}return[r,n]}(t,i),this.elevatedGlobeTrianglesCenterLongitudes=t,this.elevatedGlobeIndexBuffer=e.createIndexBuffer(i)}this.elevatedGlobeSegments=el.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,g/Or,0,y/Or,0,0,m,f,0])}prepare(){const e=0!==Object.keys(this.tiles).length;if(this.tileID&&!e)return;const t=this.map.painter.context,i=t.gl;!this._dirty||this.texture instanceof Ay||(this.texture?this.texture.update(this.image):(this.texture=new Iy(t,this.image,i.RGBA8),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE)),this._dirty=!1),e&&this._prepareData(t)}loadTile(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(e){const t=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!t)return null;const i=this.elevatedGlobeTrianglesCenterLongitudes;let r=(n=e+180)+360*Math.round((i[0]-n)/360);var n;const o=new el,a=(e,i)=>{o.segments.push({vertexOffset:0,primitiveOffset:e,vertexLength:t.segments[0].vertexLength,primitiveLength:i,sortKey:void 0,vaos:{}})},s=.51*this.maxLongitudeTriangleSize;if(Math.abs(i[0]-r)<=s){const e=$e(i,0,i.length,r+s);return e===i.length||a(e,Qe(i,e+1,i.length,r+360-s)-e),o}r<i[0]&&(r+=360);const l=Qe(i,0,i.length,r-s);if(l===i.length)return a(0,i.length),o;a(0,l-0);const c=$e(i,l+1,i.length,r+s);return c!==i.length&&a(c,i.length-c),o}}const zy=(Math.pow(256,2)-1)/16907520;class Dy extends Ka{constructor(e,t,i,r){super(e,{layout:Sy||(Sy=new Ia({visibility:new Ta(Aa.layout_raster.visibility)})),paint:Ly||(Ly=new Ia({"raster-opacity":new Ta(Aa.paint_raster["raster-opacity"]),"raster-color":new Ea(Aa.paint_raster["raster-color"]),"raster-color-mix":new Ta(Aa.paint_raster["raster-color-mix"]),"raster-color-range":new Ta(Aa.paint_raster["raster-color-range"]),"raster-hue-rotate":new Ta(Aa.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ta(Aa.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ta(Aa.paint_raster["raster-brightness-max"]),"raster-saturation":new Ta(Aa.paint_raster["raster-saturation"]),"raster-contrast":new Ta(Aa.paint_raster["raster-contrast"]),"raster-resampling":new Ta(Aa.paint_raster["raster-resampling"]),"raster-fade-duration":new Ta(Aa.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Ta(Aa.paint_raster["raster-emissive-strength"]),"raster-array-band":new Ta(Aa.paint_raster["raster-array-band"]),"raster-elevation":new Ta(Aa.paint_raster["raster-elevation"]),"raster-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(e){return!(e&&e._source instanceof Ry&&(e._source.onNorthPole||e._source.onSouthPole))&&0===this.paint.get("raster-elevation")}_handleSpecialPaintPropertyUpdate(e){"raster-color"!==e&&"raster-color-range"!==e||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(e){if(!this.hasColorMap())return;if(!this._curRampRange)return;const t=this._transitionablePaint._values["raster-color"].value.expression,[i,r]=e||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(i)&&isNaN(r)||i===this._curRampRange[0]&&r===this._curRampRange[1]||(this.colorRamp=_h({expression:t,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:i,end:r}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[i,r])}}let Fy,By,Vy,Ny,Uy;class jy extends Ka{constructor(e,t,i,r){super(e,{layout:Fy||(Fy=new Ia({visibility:new Ta(Aa["layout_raster-particle"].visibility)})),paint:By||(By=new Ia({"raster-particle-array-band":new Ta(Aa["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Ta(Aa["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Ea(Aa["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Ta(Aa["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Ta(Aa["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Ta(Aa["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Ta(Aa["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Ta(Aa["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._updateColorRamp(),this.lastInvalidatedAt=pt.now()}onRemove(e){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return"none"!==this.visibility}isDraped(e){return!1}_handleSpecialPaintPropertyUpdate(e){"raster-particle-color"!==e&&"raster-particle-max-speed"!==e||(this._updateColorRamp(),this._invalidateAnimationState()),"raster-particle-count"===e&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const e=this._transitionablePaint._values["raster-particle-color"].value.expression,t=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=_h({expression:e,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:t}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=pt.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Hy extends Ka{constructor(e,t){super(e,{},t,null),this.implementation=e,e.slot&&(this.slot=e.slot)}is3D(e){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}isDraped(e){return void 0!==this.implementation.renderToTile}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(e){this.implementation.onAdd&&this.implementation.onAdd(e,e.painter.context.gl)}onRemove(e){this.implementation.onRemove&&this.implementation.onRemove(e,e.painter.context.gl)}}function Zy(e,t,i){const r=[0,0,1],n=K([]);return Q(n,n,i?-Se(e)+Math.PI:Se(e)),J(n,n,-Se(t)),N(r,r,n),R(r,r)}function Wy(e,t){const i=qy(e.projection,e.zoom,e.width,e.height),r=function(e,t,i,r,n){const o=new Gl(i.lng-180*Xy,i.lat),a=new Gl(i.lng+180*Xy,i.lat),s=e.project(o.lng,o.lat),c=e.project(a.lng,a.lat),h=-Math.atan2(c.y-s.y,c.x-s.x),p=lc.fromLngLat(i);p.y=Ae(p.y,-1+Xy,1-Xy);const f=p.toLngLat(),g=e.project(f.lng,f.lat),y=lc.fromLngLat(f);y.x+=Xy;const _=y.toLngLat(),v=e.project(_.lng,_.lat),x=Ky(v.x-g.x,v.y-g.y,h),C=lc.fromLngLat(f);C.y+=Xy;const w=C.toLngLat(),b=e.project(w.lng,w.lat),S=Ky(b.x-g.x,b.y-g.y,h),L=Math.abs(x.x)/Math.abs(S.y),T=l([]);m(T,T,-h*(1-(n?0:r)));const M=l([]);return d(M,M,[1,1-(1-L)*r,1]),M[4]=-S.x/S.y*r,m(M,M,h),u(M,T,M),M}(e.projection,0,e.center,i,t),n=Gy(e);return d(r,r,[n,n,1]),r}function Gy(e){const t=e.projection,i=qy(e.projection,e.zoom,e.width,e.height),r=Yy(t,e.center),n=Yy(t,Gl.convert(t.center));return Math.pow(2,r*i+(1-i)*n)}function qy(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=e.range;if(!o)return 0;const a=Math.min(n,Math.max(i,r)),s=Math.log(a/1024)/Math.LN2;return ke(o[0]+s,o[1]+s,t)}const Xy=1/4e4;function Yy(e,t){const i=Ae(t.lat,-85.051129,rc),r=new Gl(t.lng-180*Xy,i),n=new Gl(t.lng+180*Xy,i),o=e.project(r.lng,i),a=e.project(n.lng,i),s=lc.fromLngLat(r),l=lc.fromLngLat(n),c=a.x-o.x,u=a.y-o.y,h=l.x-s.x,d=l.y-s.y,p=Math.sqrt((h*h+d*d)/(c*c+u*u));return Math.log(p)/Math.LN2}function Ky(e,t,i){const r=Math.cos(i),n=Math.sin(i);return{x:e*r-t*n,y:e*n+t*r}}function Jy(e,t,i){l(e),m(e,e,Se(t[2])),p(e,e,Se(t[0])),f(e,e,Se(t[1])),d(e,e,i),u(e,e,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function Qy(e,t,i,r,n,o,a,s){const l=[i[0]-t[0],i[1]-t[1],0],c=[r[0]-t[0],r[1]-t[1],0];if(w(l)<1e-12||w(c)<1e-12)return K(e);const u=D([],l,c);R(u,u),L(c,r,t),l[2]=(o-n)*s,c[2]=(a-n)*s;const h=l;return D(h,l,c),R(h,h),oe(e,u,h)}function $y(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Xu(t.zoom),n=function(e,t,i){const r=t.worldSize,n=[e[12],e[13],e[14]],o=tc(n[1]/r),a=ec(n[0]/r),s=l([]),c=$l(1,o)*r,p=$l(1,0)*r*oc(o,t.zoom),f=1/Wu(r);let m=p*f;if(i){const e=qy(t.projection,t.zoom,t.width,t.height,1024);m=f*t.projection.pixelSpaceConversion(t.center.lat,r,e)}const g=Hl(o,a);S(g,g,I([],R([],g),c*m*n[2]));const y=function(e){const t=[e[0],e[1],e[2]];let i=[0,1,0];const r=D([],i,t);return D(i,t,r),0===P(i)&&(i=[0,1,0],D(r,t,i)),R(r,r),R(i,i),R(t,t),[r[0],r[1],r[2],0,i[0],i[1],i[2],0,t[0],t[1],t[2],0,e[0],e[1],e[2],1]}(g);d(s,s,[m,m,m*c]),h(s,s,[-n[0],-n[1],-n[2]]);const _=u([],t.globeMatrix,y);return u(_,_,s),u(_,_,e),_}(e,t,i);if(r>0){const i=function(e,t){const i=t.worldSize,r=$l(1,0)*i*oc(t.center.lat,t.zoom)/Wu(i),n=$l(1,t.center.lat)*i,o=l([]);return f(o,o,Se(t.center.lng)),p(o,o,Se(t.center.lat)),h(o,o,[0,0,Rl]),d(o,o,[r,r,r*n]),h(o,o,[t.point.x-.5*i,t.point.y-.5*i,0]),u(o,o,e),u(o,t.globeMatrix,o)}(e,t);return function(e,t,i){const r=(e,t,i)=>{const r=w(e),n=w(t),o=zu(e,t,i);return I(o,o,1/w(o)*ci(r,n,i))},n=r([e[0],e[1],e[2]],[t[0],t[1],t[2]],i),o=r([e[4],e[5],e[6]],[t[4],t[5],t[6]],i),a=r([e[8],e[9],e[10]],[t[8],t[9],t[10]],i),s=zu([e[12],e[13],e[14]],[t[12],t[13],t[14]],i);return[n[0],n[1],n[2],0,o[0],o[1],o[2],0,a[0],a[1],a[2],0,s[0],s[1],s[2],1]}(n,i,r)}return n}function e_(e,t,i,r){const n=Wc.projectAabbCorners(r,i);let o=Number.MAX_VALUE,a=-1;for(let c=0;c<n.length;++c){const e=n[c];e[0]=(.5*e[0]+.5)*t.width,e[1]=(.5-.5*e[1])*t.height,e[2]<o&&(a=c,o=e[2])}const s=e=>new xe(n[e][0],n[e][1]);let l;switch(a){case 0:case 6:l=[s(1),s(5),s(4),s(7),s(3),s(2),s(1)];break;case 1:case 7:l=[s(0),s(4),s(5),s(6),s(2),s(3),s(0)];break;case 3:case 5:l=[s(1),s(0),s(4),s(7),s(6),s(2),s(1)];break;default:l=[s(1),s(5),s(6),s(7),s(3),s(0),s(1)]}if(Jc(e,l))return o}const t_=es([{name:"a_pos_3f",components:3,type:"Float32"}]),i_=es([{name:"a_color_3f",components:3,type:"Float32"}]),r_=es([{name:"a_color_4f",components:4,type:"Float32"}]),n_=es([{name:"a_uv_2f",components:2,type:"Float32"}]),o_=es([{name:"a_normal_3f",components:3,type:"Float32"}]),a_=es([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),s_=es([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),l_={None:0,Model:1,Symbol:2,FillExtrusion:4};class c_{constructor(e,t,i,r){this.message=(e?"".concat(e,": "):"")+i,r&&(this.identifier=r),null!=t&&t.__line__&&(this.line=t.__line__)}}function u_(e,t){const i=-1===e.indexOf("://");try{return new URL(e,i&&t?"http://example.com":void 0),!0}catch(e){return!1}}class h_{constructor(e,t){this.feature=e,this.instancedDataOffset=t,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class d_{constructor(){this.instancedDataArray=new Rs,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class p_{constructor(e){this.zoom=e.zoom,this.canonical=e.canonical,this.layers=e.layers,this.layerIds=this.layers.map(e=>e.fqid),this.projection=e.projection,this.index=e.index,this.worldview=e.worldview,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0,this.styleDefinedModelURLs=e.styleDefinedModelURLs}updateFootprints(e,t){}populate(e,t,i,r){this.tileToMeter=sc(i);const n=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:o,id:a,index:s,sourceLayerIndex:l}of e){const e=null!=a?a:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0,c=yc(o,n);if(!this.layers[0]._featureFilter.filter(new ya(this.zoom,{worldview:this.worldview}),c,i))continue;const u={id:e,sourceLayerIndex:l,index:s,geometry:n?c.geometry:gc(o,i,r),properties:o.properties,type:o.type,patterns:{}},h=this.addFeature(u,u.geometry,c);h&&t.featureIndex.insert(o,u.geometry,s,l,this.index,this.instancesPerModel[h].instancedDataArray.length,Or/32)}this.lookup=null}update(e,t,i,r){for(const n in this.instancesPerModel){const t=this.instancesPerModel[n];for(const i in e)t.idToFeaturesIndex.hasOwnProperty(i)&&(this.evaluate(t.features[t.idToFeaturesIndex[i]],e[i],t,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let e=!1;for(const t in this.instancesPerModel){const i=this.instancesPerModel[t];for(const t of i.features){const r=this.layers[0],n=t.feature,o=this.canonical,a=r.paint.get("model-rotation").evaluate(n,{},o),s=r.paint.get("model-scale").evaluate(n,{},o),l=r.paint.get("model-translation").evaluate(n,{},o);U(t.rotation,a)&&U(t.scale,s)&&U(t.translation,l)||(this.evaluate(t,t.featureStates,i,!0),e=!0)}}return e}updateReplacement(e,t,i,r){if(t.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=t.updateTime;const n=t.getReplacementRegionsForTile(e.toUnwrapped(),!0);if(Od(this.activeReplacements,n))return!1;this.activeReplacements=n;let o=!1;for(const a in this.instancesPerModel){const t=this.instancesPerModel[a],n=t.instancedDataArray;for(const a of t.features){const t=a.instancedDataOffset,s=a.instancedDataCount;for(let a=0;a<s;a++){const s=16*(a+t);let l=n.float32[s+0];const c=l>Or;l=c?l-Or:l;const u=Math.floor(l),h=n.float32[s+1];let d=!1;for(const t of this.activeReplacements)if(!Id(t,i,l_.Model,r)&&!(t.min.x>u||u>t.max.x||t.min.y>h||h>t.max.y)&&(d=Vd(Bd(u,h,e.canonical,t.footprintTileId.canonical),t.footprint),d))break;n.float32[s]=d?l+Or:l,o=o||d!==c}}}return o}isEmpty(){for(const e in this.instancesPerModel)if(0!==this.instancesPerModel[e].instancedDataArray.length)return!1;return!0}uploadPending(){return!this.uploaded}upload(e){if(!this.uploaded)for(const t in this.instancesPerModel){const i=this.instancesPerModel[t];i.instancedDataArray.length<0||0===i.instancedDataArray.length||(i.instancedDataBuffer?i.instancedDataBuffer.updateData(i.instancedDataArray):i.instancedDataBuffer=e.createVertexBuffer(i.instancedDataArray,a_.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const t in this.instancesPerModel){const e=this.instancesPerModel[t];0!==e.instancedDataArray.length&&e.instancedDataBuffer&&e.instancedDataBuffer.destroy()}const e=this.layers[0].modelManager;if(e&&this.modelUris&&this.modelsRequested)for(const t of this.modelUris)e.removeModel(t,"",!0)}addFeature(e,t,i){const r=this.layers[0],n=r.layout.get("model-id").evaluate(i,{},this.canonical);if(!n)return Ze("modelId is not evaluated for layer ".concat(r.id," and it is not going to get rendered.")),n;(u_(n,!1)||void 0!==this.styleDefinedModelURLs[n])&&(this.modelUris.includes(n)||this.modelUris.push(n)),this.instancesPerModel[n]||(this.instancesPerModel[n]=new d_);const o=this.instancesPerModel[n],a=o.instancedDataArray,s=new h_(i,a.length);for(const l of t)for(const e of l){if(e.x<0||e.x>=Or||e.y<0||e.y>=Or)continue;const t=(this.lookupDim-1)/Or,i=this.lookupDim*(e.y*t|0)+e.x*t|0;if(this.lookup){if(0!==this.lookup[i])continue;this.lookup[i]=1}this.instanceCount++;const r=a.length;a.resize(r+1),o.instancesEvaluatedElevation.push(0),a.float32[16*r]=e.x,a.float32[16*r+1]=e.y}return s.instancedDataCount=o.instancedDataArray.length-s.instancedDataOffset,s.instancedDataCount>0&&(e.id&&(o.idToFeaturesIndex[e.id]=o.features.length),o.features.push(s),this.evaluate(s,{},o,!1)),n}getModelUris(){return this.modelUris}evaluate(e,t,i,r){const n=this.layers[0],o=e.feature,a=this.canonical,s=e.rotation=n.paint.get("model-rotation").evaluate(o,t,a),l=e.scale=n.paint.get("model-scale").evaluate(o,t,a),c=e.translation=n.paint.get("model-translation").evaluate(o,t,a),u=n.paint.get("model-color").evaluate(o,t,a);u.a=n.paint.get("model-color-mix-intensity").evaluate(o,t,a);const h=[];this.maxVerticalOffset<c[2]&&(this.maxVerticalOffset=c[2]),this.maxScale=Math.max(Math.max(this.maxScale,l[0]),Math.max(l[1],l[2])),Jy(h,s,l);const d=Math.round(100*u.a)+u.b/1.05;for(let p=0;p<e.instancedDataCount;++p){const t=e.instancedDataOffset+p,n=16*t,o=i.instancedDataArray.float32;let s=0;r&&(s=o[n+6]-i.instancesEvaluatedElevation[t]);const l=0|o[n+1];o[n]=(0|o[n])+u.r/1.05,o[n+1]=l+u.g/1.05,o[n+2]=d,o[n+3]=1/(a.z>10?this.tileToMeter:sc(a,l)),o[n+4]=c[0],o[n+5]=c[1],o[n+6]=c[2]+s,o[n+7]=h[0],o[n+8]=h[1],o[n+9]=h[2],o[n+10]=h[4],o[n+11]=h[5],o[n+12]=h[6],o[n+13]=h[8],o[n+14]=h[9],o[n+15]=h[10],i.instancesEvaluatedElevation[t]=c[2]}}}let f_,m_;Go(p_,"ModelBucket",{omit:["layers"]}),Go(d_,"PerModelAttributes"),Go(h_,"ModelFeature");const g_=64,y_={CoordinateSpaceTile:1,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function __(e,t,i,r,n,o,a,s,c){let p=arguments.length>9&&void 0!==arguments[9]&&arguments[9];const f=i.zoom,m=i.project(r),g=oc(r.lat,f),y=1/g;l(e),h(e,e,[m.x+a[0]*y,m.y+a[1]*y,a[2]]);let v=1,x=1;const C=i.worldSize;if(p){if("mercator"===i.projection.name){let e=0;i.elevation&&(e=i.elevation.getAtPointOrZero(new lc(m.x/C,m.y/C),0));const t=X([],[m.x,m.y,e,1],i.projMatrix)[3]/i.cameraToCenterDistance;v=t,x=t*oc(i.center.lat,f)}else if("globe"===i.projection.name){const t=$y(e,i),n=[0,0,0,1];X(n,n,u([],i.projMatrix,t));const o=n[3]/i.cameraToCenterDistance,a=Xu(f),s=i.projection.pixelsPerMeter(r.lat,C)*oc(r.lat,f),l=i.projection.pixelsPerMeter(i.center.lat,C)*oc(i.center.lat,f);v=o/ci(s,nc(i.center.lat),a),x=o*g/s,v*=l,x*=l}}else v=y;d(e,e,[v,v,x]);const w=[...e],b=t.orientation,S=[];if(Jy(S,[b[0]+n[0],b[1]+n[1],b[2]+n[2]],o),u(e,w,S),s&&i.elevation){let n=0;const o=[];if(c&&i.elevation){n=function(e,t,i,r,n){const o=t.elevation;if(!o)return 0;const a=Wc.projectAabbCorners(i,r),s=$l(1,n.lat)*t.worldSize,l=function(e,t){const i=[0,0,1],r=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const n of r){const r=e[n.corners[0]],o=e[n.corners[1]],a=e[n.corners[2]],s=[o[0]-r[0],o[1]-r[1],t*(o[2]-r[2])],l=D(s,s,[a[0]-r[0],a[1]-r[1],t*(a[2]-r[2])]);R(l,l),n.dotProductWithUp=z(l,i)}return r.sort((e,t)=>e.dotProductWithUp-t.dotProductWithUp),r[0].corners}(a,s),c=a[l[0]],u=a[l[1]],h=a[l[2]],d=a[l[3]],p=o.getAtPointOrZero(new lc(c[0]/t.worldSize,c[1]/t.worldSize),0),f=o.getAtPointOrZero(new lc(u[0]/t.worldSize,u[1]/t.worldSize),0),m=o.getAtPointOrZero(new lc(h[0]/t.worldSize,h[1]/t.worldSize),0),g=o.getAtPointOrZero(new lc(d[0]/t.worldSize,d[1]/t.worldSize),0),y=(p+g)/2,_=(f+m)/2;return y>_?f<m?Qy(e,u,d,c,f,g,p,s):Qy(e,h,c,d,m,p,g,s):p<g?Qy(e,c,u,h,p,f,m,s):Qy(e,d,h,u,g,m,f,s),Math.max(y,_)}(o,i,t.aabb,e,r);const a=u([],_([],o),S);u(e,w,a)}else n=i.elevation.getAtPointOrZero(new lc(m.x/C,m.y/C),0);0!==n&&(e[14]+=n)}}function v_(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.uploaded||(e.gfxTexture=new Iy(t,e.image,i?t.gl.R8:t.gl.RGBA8,{useMipmap:e.sampler.minFilter>=t.gl.NEAREST_MIPMAP_NEAREST}),e.uploaded=!0,e.image=null)}function x_(e,t,i){e.indexBuffer=t.createIndexBuffer(e.indexArray,!1,!0),e.vertexBuffer=t.createVertexBuffer(e.vertexArray,t_.members,!1,!0),e.normalArray&&(e.normalBuffer=t.createVertexBuffer(e.normalArray,o_.members,!1,!0)),e.texcoordArray&&(e.texcoordBuffer=t.createVertexBuffer(e.texcoordArray,n_.members,!1,!0)),e.colorArray&&(e.colorBuffer=t.createVertexBuffer(e.colorArray,(12===e.colorArray.bytesPerElement?i_:r_).members,!1,!0)),e.featureArray&&(e.pbrBuffer=t.createVertexBuffer(e.featureArray,s_.members,!0)),e.segments=el.simpleSegment(0,0,e.vertexArray.length,e.indexArray.length);const r=e.material;r.pbrMetallicRoughness.baseColorTexture&&v_(r.pbrMetallicRoughness.baseColorTexture,t),r.pbrMetallicRoughness.metallicRoughnessTexture&&v_(r.pbrMetallicRoughness.metallicRoughnessTexture,t),r.normalTexture&&v_(r.normalTexture,t),r.occlusionTexture&&v_(r.occlusionTexture,t,i),r.emissionTexture&&v_(r.emissionTexture,t)}function C_(e,t,i){if(e.meshes)for(const r of e.meshes)x_(r,t,i);if(e.children)for(const r of e.children)C_(r,t,i)}function w_(e){if(e.meshes)for(const t of e.meshes)t.indexArray.destroy(),t.vertexArray.destroy(),t.colorArray&&t.colorArray.destroy(),t.normalArray&&t.normalArray.destroy(),t.texcoordArray&&t.texcoordArray.destroy(),t.featureArray&&t.featureArray.destroy();if(e.children)for(const t of e.children)w_(t)}function b_(e){if(e.meshes)for(const i of e.meshes)i.vertexBuffer&&(i.vertexBuffer.destroy(),i.indexBuffer.destroy(),i.normalBuffer&&i.normalBuffer.destroy(),i.texcoordBuffer&&i.texcoordBuffer.destroy(),i.colorBuffer&&i.colorBuffer.destroy(),i.pbrBuffer&&i.pbrBuffer.destroy(),i.segments.destroy(),i.material&&((t=i.material).pbrMetallicRoughness.baseColorTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture&&t.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),t.pbrMetallicRoughness.metallicRoughnessTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&t.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),t.normalTexture&&t.normalTexture.gfxTexture&&t.normalTexture.gfxTexture.destroy(),t.emissionTexture&&t.emissionTexture.gfxTexture&&t.emissionTexture.gfxTexture.destroy(),t.occlusionTexture&&t.occlusionTexture.gfxTexture&&t.occlusionTexture.gfxTexture.destroy()));var t;if(e.children)for(const i of e.children)b_(i)}class S_{constructor(e,t,i){this._demTile=e,this._dem=this._demTile.dem,this._scale=t,this._offset=i}static create(e,t,i){const r=i||e.findDEMTileFor(t);if(!r||!r.dem)return;const n=r.dem,o=r.tileID,a=1<<t.canonical.z-o.canonical.z;return new S_(r,n.dim/Or/a,[(t.canonical.x/a-o.canonical.x)*n.dim,(t.canonical.y/a-o.canonical.y)*n.dim])}tileCoordToPixel(e,t){const i=t*this._scale+this._offset[1],r=Math.floor(e*this._scale+this._offset[0]),n=Math.floor(i);return new xe(r,n)}getElevationAt(e,t,i,r){const n=e*this._scale+this._offset[0],o=t*this._scale+this._offset[1],a=Math.floor(n),s=Math.floor(o),l=this._dem;return r=!!r,i?ci(ci(l.get(a,s,r),l.get(a,s+1,r),o-s),ci(l.get(a+1,s,r),l.get(a+1,s+1,r),o-s),n-a):l.get(a,s,r)}getElevationAtPixel(e,t,i){return this._dem.get(e,t,!!i)}getMeterToDEM(e){return(1<<this._demTile.tileID.canonical.z)*$l(1,e)*this._dem.stride}}const L_=new Float32Array(262144),T_=new Uint8Array(262144);function M_(e){let t=0;if(e.meshes)for(const i of e.meshes)t=Math.max(t,i.aabb.max[2]);if(e.children)for(const i of e.children)t=Math.max(t,M_(i));return t}function E_(e,t,i){if(e.meshes)for(const r of e.meshes){if(r.aabb.min[0]===1/0)continue;const n=Wc.applyTransform(r.aabb,e.matrix);i.insert(t,n.min[0],n.min[1],n.max[0],n.max[1])}if(e.children)for(const r of e.children)E_(r,t,i)}const I_=["","wall","door","roof","window","lamp","logo"];class A_{constructor(e){this.node=e,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedTranslation=[0,0,0],this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:e.id,geometry:[],properties:{height:M_(e)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new Wc([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let e=0;const t=new Wc([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const i of this.node.meshes)this.node.lightMeshIndex!==e&&(i.transformedAabb=Wc.applyTransformFast(i.aabb,this.node.matrix),t.encapsulate(i.transformedAabb)),e++;this.aabb=t}return this.aabb}}class k_{constructor(e,t,i,r,n,o,a,s){this.id=i,this.layers=e,this.layerIds=this.layers.map(e=>e.fqid),this.stateDependentLayerIds=this.layers.filter(e=>e.isStateDependent()).map(e=>e.id),this.modelTraits|=y_.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,r&&(this.modelTraits|=y_.HasMapboxMeshFeatures),n&&(this.modelTraits|=y_.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=o,this.worldview=s,this.dirty=!0,this.needsUpload=!1,this.filter=null,this.nodesInfo=[];for(const l of t)this.nodesInfo.push(new A_(l)),E_(l,a.featureIndexArray.length,a.grid),a.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,a.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(e,t){for(const i of this.getNodesInfo()){const r=i.node;r.footprint&&t.push({footprint:r.footprint,id:e})}}update(e){const t=0!==Object.keys(e).length;if(t&&!this.stateDependentLayers.length)return;const i=t?this.stateDependentLayers:this.layers;if(!Ce(e,this.states))for(const r of i)this.evaluate(r,e);this.states=structuredClone(e)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(e){if(!this.needsUpload)return;const t=this.getNodesInfo();for(const i of t){const t=i.node;this.uploaded?this.updatePbrBuffer(t):C_(t,e,!0)}for(const i of t)w_(i.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(e){let t=!1;if(!e.meshes)return t;for(const i of e.meshes)i.pbrBuffer&&(i.pbrBuffer.updateData(i.featureArray),t=!0);return t}needsReEvaluation(e,t,i){const r=e.transform.projectionOptions,n=e.style.getBrightness(),o=this.brightness!==n;if(!this.uploaded||this.dirty||r.name!==this.projection.name||P_(i.paint.get("model-color").value,o)||P_(i.paint.get("model-color-mix-intensity").value,o)||P_(i.paint.get("model-roughness").value,o)||P_(i.paint.get("model-emissive-strength").value,o)||P_(i.paint.get("model-height-based-emissive-strength-multiplier").value,o)){this.projection=r,this.brightness=n;const e=this.getNodesInfo();for(const t of e)t.state=null;return!0}return!1}evaluateTransform(e,t){if(e.transform.zoom===this.zoom)return;this.zoom=e.transform.zoom;const i=this.getNodesInfo(),r=this.id.canonical;for(const n of i){const e=n.feature;n.evaluatedTranslation=t.paint.get("model-translation").evaluate(e,{},r),n.evaluatedScale=t.paint.get("model-scale").evaluate(e,{},r)}}evaluate(e,t){const i=this.getNodesInfo();for(const r of i){if(!r.node.meshes)continue;const i=r.feature,n=t&&t[i.id];if(Ce(n,r.state))continue;r.state=structuredClone(n);const o=r.node.meshes&&r.node.meshes[0].featureData,a=r.evaluatedColor[2],s=r.evaluatedRMEA[2],l=this.id.canonical;if(r.hasTranslucentParts=!1,o){for(let t=0;t<I_.length;t++){const o=I_[t];o.length&&(i.properties.part=o);const a=e.paint.get("model-color").evaluate(i,n,l).toPremultipliedRenderColor(null),s=e.paint.get("model-color-mix-intensity").evaluate(i,n,l);r.evaluatedColor[t]=[a.r,a.g,a.b,s],r.evaluatedRMEA[t][0]=e.paint.get("model-roughness").evaluate(i,n,l),r.evaluatedRMEA[t][2]=e.paint.get("model-emissive-strength").evaluate(i,n,l),r.evaluatedRMEA[t][3]=a.a,r.emissionHeightBasedParams[t]=e.paint.get("model-height-based-emissive-strength-multiplier").evaluate(i,n,l),!r.hasTranslucentParts&&a.a<1&&(r.hasTranslucentParts=!0)}delete i.properties.part,R_(r,a!==r.evaluatedColor[2]||s!==r.evaluatedRMEA[2],this.modelTraits)}else r.evaluatedRMEA[0][2]=e.paint.get("model-emissive-strength").evaluate(i,n,l);r.evaluatedTranslation=e.paint.get("model-translation").evaluate(i,n,l),r.evaluatedScale=e.paint.get("model-scale").evaluate(i,n,l),this.updatePbrBuffer(r.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(e,t,i,r){const n=e.findDEMTileFor(i);if(n&&(n.tileID.canonical!==this.terrainTile||t!==this.terrainExaggeration)){if(n.dem&&n.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=n.tileID.overscaledZ;const t=S_.create(e,i,n);if(!t)return;this.modelTraits&y_.HasMapboxMeshFeatures&&this.updateDEM(e,t,i,r);for(const e of this.getNodesInfo()){const i=e.node;if(!i.footprint||!i.footprint.vertices||!i.footprint.vertices.length)continue;const r=i.footprint.vertices;let n=t.getElevationAt(r[0].x,r[0].y,!0,!0);for(let e=1;e<r.length;e++)n=Math.min(n,t.getElevationAt(r[e].x,r[e].y,!0,!0));i.elevation=n}}this.terrainTile=n.tileID.canonical,this.terrainExaggeration=t}}updateDEM(e,t,i,r){let n=t._dem._modifiedForSources[r];if(void 0===n&&(t._dem._modifiedForSources[r]=[],n=t._dem._modifiedForSources[r]),n.includes(i.canonical))return;const o=t._dem.dim;n.push(i.canonical);let a=!1;for(const s of this.getNodesInfo()){const e=s.node;if(!e.footprint||!e.footprint.grid)continue;const i=e.footprint.grid,r=t.tileCoordToPixel(i.min.x,i.min.y),n=t.tileCoordToPixel(i.max.x,i.max.y),l=Math.min(Math.min(o-n.y,r.x),Math.min(r.y,o-n.x));if(l<0)continue;const c=Ae(l,2,5);let u=Math.max(0,r.x-c),h=Math.max(0,r.y-c),d=Math.min(n.x+c,o-1),p=Math.min(n.y+c,o-1);for(let t=h;t<=p;++t)for(let e=u;e<=d;++e)T_[t*o+e]=255;let f=0,m=0;for(let a=0;a<i.cellsY;++a)for(let e=0;e<i.cellsX;++e){if(!i.cells[a*i.cellsX+e])continue;const r=t.tileCoordToPixel(i.min.x+e/i.xScale,i.min.y+a/i.yScale),n=t.tileCoordToPixel(i.min.x+(e+1)/i.xScale,i.min.y+(a+1)/i.yScale);for(let e=r.y;e<=Math.min(n.y+1,o-1);++e)for(let i=r.x;i<=Math.min(n.x+1,o-1);++i)255===T_[e*o+i]&&(T_[e*o+i]=0,f+=t.getElevationAtPixel(i,e),m++)}const g=f/m;u=Math.max(1,r.x-c),h=Math.max(1,r.y-c),d=Math.min(n.x+c,o-2),p=Math.min(n.y+c,o-2),a=!0;for(let a=h;a<=p;++a)for(let e=u;e<=d;++e)0===T_[a*o+e]&&(L_[a*o+e]=t._dem.set(e,a,g));for(let a=1;a<c;++a){u=Math.max(1,r.x-a),h=Math.max(1,r.y-a),d=Math.min(n.x+a,o-2),p=Math.min(n.y+a,o-2);for(let e=h;e<=p;++e)for(let i=u;i<=d;++i){const r=e*o+i;if(255===T_[r]){let n=0,s=0,l=-1,u=-1;for(let t=-1;t<=1;++t)for(let r=-1;r<=1;++r){const c=(e+t)*o+i+r;if(T_[c]>=a)continue;const h=L_[c],d=Math.abs(h);d>s&&(n=h,s=d,l=r,u=t)}if(s>.1){const o=1-(a+.5*Math.abs(l*u))/c;let s=t._dem.get(i,e)+n*o;const h=t._dem.get(i+l,e+u),d=t._dem.get(i-l,e-u,!0);(s-h)*(s-d)>0&&(s=(h+d)/2),L_[r]=t._dem.set(i,e,s),T_[r]=a}}}}}a&&(t._demTile.needsDEMTextureUpload=!0,t._dem._timestamp=pt.now())}setFilter(e){this.filter=e?Ra(e):null}getNodesInfo(){return this.filter?this.nodesInfo.filter(e=>this.filter.filter(new ya(this.id.overscaledZ,{worldview:this.worldview}),e.feature,this.id.canonical)):this.nodesInfo}destroy(){const e=this.getNodesInfo();for(const t of e)w_(t.node),b_(t.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(e,t){if(t.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=t.updateTime;const i=t.getReplacementRegionsForTile(e.toUnwrapped());for(const r of this.getNodesInfo()){const e=r.node.footprint;r.hiddenByReplacement=!!e&&!i.find(t=>t.footprint===e)}}getHeightAtTileCoord(e,t){const i=[],r=[0,0,0],n=l([]);for(const o of this.getNodesInfo()){const a=o.node.meshes[0],s=a.transformedAabb;if(e<s.min[0]||t<s.min[1]||e>s.max[0]||t>s.max[1])continue;if(!0===o.node.hidden)return{height:1/0,maxHeight:o.feature.properties.height,hidden:!1,verticalScale:o.evaluatedScale[2]};c(n,o.node.matrix),r[0]=e,r[1]=t,B(r,r,n);const l=(r[0]-a.aabb.min[0])/(a.aabb.max[0]-a.aabb.min[0])*g_|0,u=Math.min(63,(r[1]-a.aabb.min[1])/(a.aabb.max[1]-a.aabb.min[1])*g_|0)*g_+Math.min(63,l),h=a.heightmap[u];if(!(h<0&&o.node.footprint)){if(o.hiddenByReplacement)return;return{height:h,maxHeight:o.feature.properties.height,hidden:!1,verticalScale:o.evaluatedScale[2]}}if(o.node.footprint.grid.query(new xe(e,t),new xe(e,t),i),i.length>0)return{height:void 0,maxHeight:o.feature.properties.height,hidden:o.hiddenByReplacement,verticalScale:o.evaluatedScale[2]}}}}function P_(e,t){return e instanceof Do&&!e.isLightConstant&&t}function O_(e,t,i,r,n,o,a,s){let l=(61440&t|(61440&t)>>4)>>8,c=(3840&t|(3840&t)>>4)>>4,u=240&t|(240&t)>>4;i[3]>0&&(l=ci(l,255*i[0],i[3]),c=ci(c,255*i[1],i[3]),u=ci(u,255*i[2],i[3]));const h=l<<8|c,d=u<<8|Math.floor(255*r[3]),p=function(e){const t=Ae(e,0,2);return Math.min(Math.round(.5*t*255),255)}(r[2])<<8|15*r[0]<<4|15*r[1],f=Ae(n[0],0,1),m=Ae(n[1],0,1),g=Ae(n[2],0,1),y=Ae(n[3],0,1);let _,v,x,C;if(f!==m&&a!==o&&m!==f){const e=a-o;v=1/(e*(m-f)),x=-(o+e*f)/(e*(m-f));const t=Ae(n[4],-1,1);C=Math.pow(10,t),_=255*g<<8|255*y}else _=65535,v=0,x=1,C=1;if(e.emplaceBack(h,d,p,_,v,x,C),s){const e=s.length;s.clear();for(let t=0;t<e;t++)s.emplaceBack(h,d,p,_,v,x,C)}}function R_(e,t,i){const r=e.node;let n=0;const o=i&y_.HasMeshoptCompression;for(const a of r.meshes){if(r.lights&&r.lightMeshIndex===n)continue;if(!a.featureData)continue;a.featureArray=new zs,a.featureArray.reserve(a.featureData.length);let i=t;for(const t of a.featureData){const n=o?65535&t:t>>16&65535,s=o?t>>16&65535:65535&t,l=(15&s)<8?15&s:0,c=e.evaluatedRMEA[l],u=e.evaluatedColor[l],h=e.emissionHeightBasedParams[l];let d;if(i&&2===l&&r.lights&&(d=new zs,d.resize(10*r.lights.length)),O_(a.featureArray,n,u,c,h,a.aabb.min[2],a.aabb.max[2],d),d&&i){i=!1;const e=r.meshes[r.lightMeshIndex];e.featureArray=d,e.featureArray._trim()}}a.featureArray._trim(),n++}}function z_(e,t,i,r){const n=1<<e.z;t.lat=tc((r/Or+e.y)/n),t.lng=ec((i/Or+e.x)/n)}function D_(e,t,i,r){const n=e.getNodesInfo()[t];if(!n||n.hiddenByReplacement||!n.node.meshes)return;let o=Number.MAX_VALUE;const a=n.node,s=i.tile,l=r.calculatePosMatrix(s.tileID.toUnwrapped(),r.worldSize),c=n.evaluatedScale;let p=0;r.elevation&&a.elevation&&(p=a.elevation*r.elevation.exaggeration()),h(l,l,[(a.anchor?a.anchor[0]:0)*(c[0]-1),(a.anchor?a.anchor[1]:0)*(c[1]-1),p]),d(l,l,c);const f=i.queryGeometry,m=f.isPointQuery()?f.screenBounds:f.screenGeometry,g=function(e){const t=u([],l,e.matrix);u(t,r.expandedFarZProjMatrix,t);for(let i=0;i<e.meshes.length;++i){const n=e.meshes[i];if(i===e.lightMeshIndex)continue;const a=e_(m,r,t,n.aabb);null!=a&&(o=Math.min(a,o))}if(e.children)for(const i of e.children)g(i)};if(g(a),o===Number.MAX_VALUE)return;const y=new Gl(0,0);return z_(s.tileID.canonical,y,n.node.anchor[0],n.node.anchor[1]),{intersectionZ:o,position:y,feature:n.feature}}Go(k_,"Tiled3dModelBucket",{omit:["layers"]}),Go(A_,"Tiled3dModelFeature");const F_={circle:class extends Ka{constructor(e,t,i,r){super(e,{layout:yu||(yu=new Ia({"circle-sort-key":new Ma(Aa.layout_circle["circle-sort-key"]),"circle-elevation-reference":new Ta(Aa.layout_circle["circle-elevation-reference"]),visibility:new Ta(Aa.layout_circle.visibility)})),paint:_u||(_u=new Ia({"circle-radius":new Ma(Aa.paint_circle["circle-radius"]),"circle-color":new Ma(Aa.paint_circle["circle-color"]),"circle-blur":new Ma(Aa.paint_circle["circle-blur"]),"circle-opacity":new Ma(Aa.paint_circle["circle-opacity"]),"circle-translate":new Ta(Aa.paint_circle["circle-translate"]),"circle-translate-anchor":new Ta(Aa.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ta(Aa.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ta(Aa.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ma(Aa.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ma(Aa.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ma(Aa.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Ta(Aa.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r)}createBucket(e){return new Kc(e)}queryRadius(e){const t=e;return pu("circle-radius",this,t)+pu("circle-stroke-width",this,t)+fu(this.paint.get("circle-translate"))}queryIntersectsFeature(e,t,i,r,n,o,a,s){const l=gu(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),c=this.paint.get("circle-radius").evaluate(t,i)+this.paint.get("circle-stroke-width").evaluate(t,i);return ih(e,r,o,a,s,"map"===this.paint.get("circle-pitch-alignment"),"map"===this.paint.get("circle-pitch-scale"),l,c)}getProgramIds(){return["circle"]}getDefaultProgramParams(e,t,i){const r=th(this);return{config:new Ml(this,{zoom:t,lut:i}),defines:r,overrideFog:!1}}is3D(e){return!e&&!!this.layout&&"none"!==this.layout.get("circle-elevation-reference")}hasElevation(){return this.layout&&"none"!==this.layout.get("circle-elevation-reference")}},heatmap:class extends Ka{createBucket(e){return new sh(e)}constructor(e,t,i,r){super(e,{layout:lh||(lh=new Ia({visibility:new Ta(Aa.layout_heatmap.visibility)})),paint:ch||(ch=new Ia({"heatmap-radius":new Ma(Aa.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ma(Aa.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ta(Aa.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ea(Aa.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ta(Aa.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"heatmap-color"===e&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=_h({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(e){return pu("heatmap-radius",this,e)}queryIntersectsFeature(e,t,i,r,n,o,a,s){const l=this.paint.get("heatmap-radius").evaluate(t,i);return ih(e,r,o,a,s,!0,!0,new xe(0,0),l)}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(e,t,i){return"heatmap"===e?{config:new Ml(this,{zoom:t,lut:i}),overrideFog:!1}:{}}},hillshade:class extends Ka{constructor(e,t,i,r){super(e,{layout:uh||(uh=new Ia({visibility:new Ta(Aa.layout_hillshade.visibility)})),paint:hh||(hh=new Ia({"hillshade-illumination-direction":new Ta(Aa.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ta(Aa.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ta(Aa.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ta(Aa.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ta(Aa.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ta(Aa.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Ta(Aa.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r)}shouldRedrape(){return this.hasOffscreenPass()&&"viewport"===this.paint.get("hillshade-illumination-anchor")}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(e,t,i){return{overrideFog:!1}}},fill:class extends Ka{constructor(e,t,i,r){super(e,{layout:fd||(fd=new Ia({"fill-sort-key":new Ma(Aa.layout_fill["fill-sort-key"]),visibility:new Ta(Aa.layout_fill.visibility),"fill-elevation-reference":new Ta(Aa.layout_fill["fill-elevation-reference"]),"fill-construct-bridge-guard-rail":new Ma(Aa.layout_fill["fill-construct-bridge-guard-rail"])})),paint:md||(md=new Ia({"fill-antialias":new Ta(Aa.paint_fill["fill-antialias"]),"fill-opacity":new Ma(Aa.paint_fill["fill-opacity"]),"fill-color":new Ma(Aa.paint_fill["fill-color"]),"fill-outline-color":new Ma(Aa.paint_fill["fill-outline-color"]),"fill-translate":new Ta(Aa.paint_fill["fill-translate"]),"fill-translate-anchor":new Ta(Aa.paint_fill["fill-translate-anchor"]),"fill-pattern":new Ma(Aa.paint_fill["fill-pattern"]),"fill-pattern-cross-fade":new Ta(Aa.paint_fill["fill-pattern-cross-fade"]),"fill-emissive-strength":new Ta(Aa.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Ma(Aa.paint_fill["fill-z-offset"]),"fill-bridge-guard-rail-color":new Ma(Aa.paint_fill["fill-bridge-guard-rail-color"]),"fill-tunnel-structure-color":new Ma(Aa.paint_fill["fill-tunnel-structure-color"]),"fill-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"fill-bridge-guard-rail-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"fill-tunnel-structure-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r)}getProgramIds(){const e=this.paint.get("fill-pattern"),t=e&&e.constantOr(1),i=[t?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&i.push(t&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),i}getDefaultProgramParams(e,t,i){return{config:new Ml(this,{zoom:t,lut:i}),overrideFog:!1}}recalculate(e,t){super.recalculate(e,t);const i=this.paint._values["fill-outline-color"];"constant"===i.value.kind&&void 0===i.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(e){return new pd(e)}queryRadius(){return fu(this.paint.get("fill-translate"))}queryIntersectsFeature(e,t,i,r,n,o){return!e.queryGeometry.isAboveHorizon&&$c(mu(e.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),r)}isTileClipped(){return 0===this.paint.get("fill-z-offset").constantOr(1)}is3D(e){if(0!==this.paint.get("fill-z-offset").constantOr(1))return!0;const t=this.layout&&"none"!==this.layout.get("fill-elevation-reference");return null!=e?t&&!e:t}hasElevation(){return this.layout&&"none"!==this.layout.get("fill-elevation-reference")}hasShadowPass(){return this.layout&&"none"!==this.layout.get("fill-elevation-reference")}},"fill-extrusion":class extends Ka{constructor(e,t,i,r){super(e,{layout:yp||(yp=new Ia({visibility:new Ta(Aa["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Ta(Aa["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:_p||(_p=new Ia({"fill-extrusion-opacity":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-pattern-cross-fade":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-pattern-cross-fade"]),"fill-extrusion-height":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Ma(Aa["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Ta(Aa["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new ap(e)}queryRadius(){return fu(this.paint.get("fill-extrusion-translate"))}is3D(e){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(e,t,i,r,n,o,a,s,l){const c=gu(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),u=this.paint.get("fill-extrusion-height").evaluate(t,i),h=this.paint.get("fill-extrusion-base").evaluate(t,i),d=[0,0],p=s&&o.elevation,f=o.elevation?o.elevation.exaggeration():1,m=e.tile.getBucket(this);if(p&&m instanceof ap){const e=m.centroidVertexArray,t=l+1;t<e.length&&(d[0]=e.geta_centroid_pos0(t),d[1]=e.geta_centroid_pos1(t))}if(0===d[0]&&1===d[1])return!1;"globe"===o.projection.name&&(r=mp([r],[new xe(0,0),new xe(Or,Or)],e.tileID.canonical).map(e=>e.polygon).flat());const g=p?s:null,[y,_]=function(e,t,i,r,n,o,a,s,l,c,u){return"globe"===e.projection.name?function(e,t,i,r,n,o,a,s,l,c,u){const h=[],d=[],p=e.projection.upVectorScale(u,e.center.lat,e.worldSize).metersToTile,f=[0,0,0,1],m=[0,0,0,1],g=(e,t,i,r)=>{e[0]=t,e[1]=i,e[2]=r,e[3]=1},y=fp();i>0&&(i+=y),r+=y;for(const _ of t){const t=[],y=[];for(const h of _){const d=h.x+n.x,_=h.y+n.y,v=e.projection.projectTilePoint(d,_,u),x=e.projection.upVector(u,h.x,h.y);let C=i,w=r;if(a){const e=Ep(d,_,i,r,a,s,l,c);C+=e.base,w+=e.top}0!==i?g(f,v.x+x[0]*p*C,v.y+x[1]*p*C,v.z+x[2]*p*C):g(f,v.x,v.y,v.z),g(m,v.x+x[0]*p*w,v.y+x[1]*p*w,v.z+x[2]*p*w),B(f,f,o),B(m,m,o),t.push(new vp(f[0],f[1],f[2])),y.push(new vp(m[0],m[1],m[2]))}h.push(t),d.push(y)}return[h,d]}(e,t,i,r,n,o,a,s,l,c,u):a?function(e,t,i,r,n,o,a,s,l){const c=[],u=[],h=[0,0,0,1];for(const d of e){const e=[],p=[];for(const c of d){const u=c.x+r.x,d=c.y+r.y,f=Ep(u,d,t,i,o,a,s,l);h[0]=u,h[1]=d,h[2]=f.base,h[3]=1,X(h,h,n),h[3]=Math.max(h[3],1e-5);const m=new vp(h[0]/h[3],h[1]/h[3],h[2]/h[3]);h[0]=u,h[1]=d,h[2]=f.top,h[3]=1,X(h,h,n),h[3]=Math.max(h[3],1e-5);const g=new vp(h[0]/h[3],h[1]/h[3],h[2]/h[3]);e.push(m),p.push(g)}c.push(e),u.push(p)}return[c,u]}(t,i,r,n,o,a,s,l,c):function(e,t,i,r,n){const o=[],a=[],s=n[8]*t,l=n[9]*t,c=n[10]*t,u=n[11]*t,h=n[8]*i,d=n[9]*i,p=n[10]*i,f=n[11]*i;for(const m of e){const e=[],t=[];for(const i of m){const o=i.x+r.x,a=i.y+r.y,m=n[0]*o+n[4]*a+n[12],g=n[1]*o+n[5]*a+n[13],y=n[2]*o+n[6]*a+n[14],_=n[3]*o+n[7]*a+n[15],v=m+s,x=g+l,C=y+c,w=Math.max(_+u,1e-5),b=m+h,S=g+d,L=y+p,T=Math.max(_+f,1e-5);e.push(new vp(v/w,x/w,C/w)),t.push(new vp(b/T,S/T,L/T))}o.push(e),a.push(t)}return[o,a]}(t,i,r,n,o)}(o,r,h,u,c,a,g,d,f,o.center.lat,e.tileID.canonical),v=e.queryGeometry;return function(e,t,i){let r=1/0;$c(i,t)&&(r=Mp(i,t[0]));for(let n=0;n<t.length;n++){const o=t[n],a=e[n];for(let e=0;e<o.length-1;e++){const t=o[e],n=[t,o[e+1],a[e+1],a[e],t];Jc(i,n)&&(r=Math.min(r,Mp(i,n)))}}return r!==1/0&&r}(y,_,v.isPointQuery()?v.screenBounds:v.screenGeometry)}},building:class extends Ka{constructor(e,t,i,r){super(e,{layout:ff||(ff=new Ia({visibility:new Ta(Aa.layout_building.visibility),"building-roof-shape":new Ma(Aa.layout_building["building-roof-shape"]),"building-height":new Ma(Aa.layout_building["building-height"]),"building-base":new Ma(Aa.layout_building["building-base"])})),paint:mf||(mf=new Ia({"building-opacity":new Ta(Aa.paint_building["building-opacity"]),"building-ambient-occlusion-wall-intensity":new Ta(Aa.paint_building["building-ambient-occlusion-wall-intensity"]),"building-ambient-occlusion-ground-intensity":new Ta(Aa.paint_building["building-ambient-occlusion-ground-intensity"]),"building-ambient-occlusion-ground-radius":new Ta(Aa.paint_building["building-ambient-occlusion-ground-radius"]),"building-ambient-occlusion-ground-attenuation":new Ta(Aa.paint_building["building-ambient-occlusion-ground-attenuation"]),"building-vertical-scale":new Ta(Aa.paint_building["building-vertical-scale"]),"building-cast-shadows":new Ta(Aa.paint_building["building-cast-shadows"]),"building-color":new Ma(Aa.paint_building["building-color"]),"building-emissive-strength":new Ma(Aa.paint_building["building-emissive-strength"]),"building-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new pf(e)}},line:class extends Ka{constructor(e,t,i,r){const n=Bf();super(e,n,t,i,r),n.layout&&(this.layout=new La(n.layout)),this.gradientVersion=0,this.hasElevatedBuckets=!1,this.hasNonElevatedBuckets=!1}_handleSpecialPaintPropertyUpdate(e){if("line-gradient"===e){const e=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=e._styleExpression&&e._styleExpression.expression instanceof bn,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(e,t){super.recalculate(e,t),this.paint._values["line-floorwidth"]=(()=>{if(Nf)return Nf;const e=Bf();return Nf=new Vf(e.paint.properties["line-width"].specification),Nf.useIntegerZoom=!0,Nf})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,e)}createBucket(e){return new Mf(e)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(e,t,i){const r=zf(this);return{config:new Ml(this,{zoom:t,lut:i}),defines:r,overrideFog:!1}}queryRadius(e){const t=e,i=Uf(pu("line-width",this,t),pu("line-gap-width",this,t)),r=pu("line-offset",this,t);return i/2+Math.abs(r)+fu(this.paint.get("line-translate"))}queryIntersectsFeature(e,t,i,r,n,o){if(e.queryGeometry.isAboveHorizon)return!1;const a=mu(e.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o.angle,e.pixelToTileUnitsFactor),s=e.pixelToTileUnitsFactor/2*Uf(this.paint.get("line-width").evaluate(t,i),this.paint.get("line-gap-width").evaluate(t,i)),l=this.paint.get("line-offset").evaluate(t,i);return l&&(r=function(e,t){const i=[],r=new xe(0,0);for(let n=0;n<e.length;n++){const o=e[n],a=[];for(let e=0;e<o.length;e++){const i=o[e],n=o[e+1],s=0===e?r:i.sub(o[e-1])._unit()._perp(),l=e===o.length-1?r:n.sub(i)._unit()._perp(),c=s._add(l)._unit();c._mult(1/(c.x*l.x+c.y*l.y)),a.push(c._mult(t)._add(i))}i.push(a)}return i}(r,l*e.pixelToTileUnitsFactor)),function(e,t,i){for(let r=0;r<t.length;r++){const n=t[r];if(e.length>=3)for(let t=0;t<n.length;t++)if(lu(e,n[t]))return!0;if(eu(e,n,i))return!0}return!1}(a,r,s)}isTileClipped(){return this.hasNonElevatedBuckets}isDraped(e){return!this.hasElevatedBuckets}hasElevation(){return this.layout&&"none"!==this.layout.get("line-elevation-reference")}},symbol:Cy,background:class extends Ka{constructor(e,t,i,r){super(e,{layout:wy||(wy=new Ia({visibility:new Ta(Aa.layout_background.visibility)})),paint:by||(by=new Ia({"background-pitch-alignment":new Ta(Aa.paint_background["background-pitch-alignment"]),"background-color":new Ta(Aa.paint_background["background-color"]),"background-pattern":new Ta(Aa.paint_background["background-pattern"]),"background-opacity":new Ta(Aa.paint_background["background-opacity"]),"background-emissive-strength":new Ta(Aa.paint_background["background-emissive-strength"]),"background-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(e,t,i){return{overrideFog:!1}}is3D(e){return"viewport"===this.paint.get("background-pitch-alignment")}},raster:Dy,"raster-particle":jy,sky:class extends Ka{constructor(e,t,i,r){super(e,{layout:Vy||(Vy=new Ia({visibility:new Ta(Aa.layout_sky.visibility)})),paint:Ny||(Ny=new Ia({"sky-type":new Ta(Aa.paint_sky["sky-type"]),"sky-atmosphere-sun":new Ta(Aa.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Ta(Aa.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Ta(Aa.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Ta(Aa.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ea(Aa.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Ta(Aa.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Ta(Aa.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Ta(Aa.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(e){"sky-gradient"===e?this._updateColorRamp():"sky-atmosphere-sun"!==e&&"sky-atmosphere-halo-color"!==e&&"sky-atmosphere-color"!==e&&"sky-atmosphere-sun-intensity"!==e||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=_h({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(e){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const t=e.style.light.properties.get("position");return this._lightPosition.azimuthal!==t.azimuthal||this._lightPosition.polar!==t.polar}return!1}getCenter(e,t){if("atmosphere"===this.paint.get("sky-type")){const i=this.paint.get("sky-atmosphere-sun"),r=!i,n=e.style.light,o=n.properties.get("position");return r&&"viewport"===n.properties.get("anchor")&&Ze("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),r?Zy(o.azimuthal,90-o.polar,t):Zy(i[0],90-i[1],t)}const i=this.paint.get("sky-gradient-center");return Zy(i[0],90-i[1],t)}isSky(){return!0}markSkyboxValid(e){this._skyboxInvalidated=!1,this._lightPosition=e.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const e=this.paint.get("sky-type");return"atmosphere"===e?["skyboxCapture","skybox"]:"gradient"===e?["skyboxGradient"]:null}},slot:class extends Ka{constructor(e,t,i,r){super(e,{paint:Uy||(Uy=new Ia({}))},t,null)}},model:class extends Ka{constructor(e,t,i,r){super(e,{layout:f_||(f_=new Ia({visibility:new Ta(Aa.layout_model.visibility),"model-id":new Ma(Aa.layout_model["model-id"])})),paint:m_||(m_=new Ia({"model-opacity":new Ma(Aa.paint_model["model-opacity"]),"model-rotation":new Ma(Aa.paint_model["model-rotation"]),"model-scale":new Ma(Aa.paint_model["model-scale"]),"model-translation":new Ma(Aa.paint_model["model-translation"]),"model-color":new Ma(Aa.paint_model["model-color"]),"model-color-mix-intensity":new Ma(Aa.paint_model["model-color-mix-intensity"]),"model-type":new Ta(Aa.paint_model["model-type"]),"model-cast-shadows":new Ta(Aa.paint_model["model-cast-shadows"]),"model-receive-shadows":new Ta(Aa.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Ta(Aa.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Ma(Aa.paint_model["model-emissive-strength"]),"model-roughness":new Ma(Aa.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Ma(Aa.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Ta(Aa.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Ta(Aa.paint_model["model-front-cutoff"]),"model-color-use-theme":new Ma({type:"string",default:"default","property-type":"data-driven"})}))},t,i,r),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(e){return new p_(e)}getProgramIds(){return["model"]}is3D(e){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(e){return e instanceof k_?Or-1:0}queryIntersectsFeature(e,t,i,r,n,o){if(!this.modelManager)return!1;const a=this.modelManager,l=e.tile.getBucket(this);if(!(l&&l instanceof p_))return!1;for(const c in l.instancesPerModel){const i=l.instancesPerModel[c],r=void 0!==t.id?t.id:t.properties&&t.properties.hasOwnProperty("id")?t.properties.id:void 0;if(i.idToFeaturesIndex.hasOwnProperty(r)){const t=i.features[i.idToFeaturesIndex[r]],n=a.getModel(c,this.scope);if(!n)return!1;let h=s();const d=new Gl(0,0),p=l.canonical;let f=Number.MAX_VALUE;for(let r=0;r<t.instancedDataCount;++r){const a=16*(t.instancedDataOffset+r),s=i.instancedDataArray.float32,l=[s[a+4],s[a+5],s[a+6]];z_(p,d,s[a],0|s[a+1]),__(h,n,o,d,t.rotation,t.scale,l,!1,!1,!1),"globe"===o.projection.name&&(h=$y(h,o));const c=u([],o.projMatrix,h),m=e.queryGeometry,g=e_(m.isPointQuery()?m.screenBounds:m.screenGeometry,o,c,n.aabb);null!=g&&(f=Math.min(g,f))}return f!==Number.MAX_VALUE&&f}}return!1}_handleOverridablePaintPropertyUpdate(e,t,i){return!(!this.layout||t.isDataDriven()||i.isDataDriven()||"model-color"!==e&&"model-color-mix-intensity"!==e&&"model-rotation"!==e&&"model-scale"!==e&&"model-translation"!==e&&"model-emissive-strength"!==e)}_isPropertyZoomDependent(e){const t=this._transitionablePaint._values[e];return null!=t&&null!=t.value&&null!=t.value.expression&&t.value.expression instanceof Fo}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends Ka{constructor(e,t,i,r){super(e,{layout:gd||(gd=new Ia({"clip-layer-types":new Ta(Aa.layout_clip["clip-layer-types"]),"clip-layer-scope":new Ta(Aa.layout_clip["clip-layer-scope"])})),paint:yd||(yd=new Ia({}))},t,i,r)}recalculate(e,t){super.recalculate(e,t)}createBucket(e){return new xd(e)}is3D(e){return!0}}},B_=new oi(0,0,0),V_={PATH_RULE_NON_ZERO:1,PATH_RULE_EVEN_ODD:2},N_={LINE_CAP_BUTT:1,LINE_CAP_ROUND:2,LINE_CAP_SQUARE:3},U_={LINE_JOIN_MITER:1,LINE_JOIN_MITER_CLIP:2,LINE_JOIN_ROUND:3,LINE_JOIN_BEVEL:4},j_={PAINT_ORDER_FILL_AND_STROKE:1},H_={PATH_COMMAND_MOVE:1,PATH_COMMAND_LINE:2,PATH_COMMAND_QUAD:3,PATH_COMMAND_CUBIC:4,PATH_COMMAND_CLOSE:5},Z_={MASK_TYPE_LUMINANCE:1};function W_(e,t,i){1===e&&t.icons.push(function(e,t){return function(e){if(e.usvg_tree.height||(e.usvg_tree.height=e.usvg_tree.width),!e.metadata)return e;const{metadata:t}=e;if(t.content_area){const{content_area:i}=t;null==i.top&&(i.top=i.left),null==i.width&&(i.width=e.usvg_tree.width),null==i.height&&(i.height=i.width)}return t.stretch_x&&t.stretch_x.length&&G_(t,"x"),t.stretch_y&&t.stretch_y.length&&G_(t,"y"),e}(e.readFields(q_,{name:void 0},t))}(i,i.readVarint()+i.pos))}function G_(e,t){const i=[],r=e["stretch_".concat(t)];let n=null;for(let o=0;o<r.length;o++)null===n?n=0===i.length?r[0]:i[i.length-1][1]+r[o]:(i.push([n,n+r[o]]),n=null);e["stretch_".concat(t,"_areas")]=i}function q_(e,t,i){1===e?t.name=i.readString():2===e?t.metadata=function(e,t){return e.readFields(X_,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},t)}(i,i.readVarint()+i.pos):3===e&&(t.usvg_tree=function(e,t){return e.readFields(J_,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},t)}(i,i.readVarint()+i.pos),t.data="usvg_tree")}function X_(e,t,i){1===e?t.stretch_x=i.readPackedVarint():2===e?t.stretch_y=i.readPackedVarint():3===e?t.content_area=function(e,t){return e.readFields(Y_,{left:0},t)}(i,i.readVarint()+i.pos):4===e&&t.variables.push(function(e,t){return e.readFields(K_,{name:void 0},t)}(i,i.readVarint()+i.pos))}function Y_(e,t,i){1===e?t.left=i.readVarint():2===e?t.width=i.readVarint():3===e?t.top=i.readVarint():4===e&&(t.height=i.readVarint())}function K_(e,t,i){1===e?t.name=i.readString():2===e&&(t.rgb_color=ov(i.readVarint()),t.value="rgb_color")}function J_(e,t,i){1===e?t.width=t.height=i.readVarint():2===e?t.height=i.readVarint():3===e?t.children.push(Q_(i,i.readVarint()+i.pos)):4===e?t.linear_gradients.push(function(e,t){return e.readFields(sv,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},t)}(i,i.readVarint()+i.pos)):5===e?t.radial_gradients.push(function(e,t){return e.readFields(uv,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},t)}(i,i.readVarint()+i.pos)):7===e?t.clip_paths.push(function(e,t){return e.readFields(hv,{children:[]},t)}(i,i.readVarint()+i.pos)):8===e&&t.masks.push(function(e,t){const i=e.readFields(dv,{left:0,width:20,mask_type:Z_.MASK_TYPE_LUMINANCE,children:[]},t);return null==i.height&&(i.height=i.width),null==i.top&&(i.top=i.left),i}(i,i.readVarint()+i.pos))}function Q_(e,t){return e.readFields($_,{},t)}function $_(e,t,i){1===e?(t.group=function(e,t){return e.readFields(ev,{opacity:255,children:[]},t)}(i,i.readVarint()+i.pos),t.node="group"):2===e&&(t.path=function(e,t){return e.readFields(rv,{paint_order:1,commands:[],step:1,diffs:[],rule:V_.PATH_RULE_NON_ZERO},t)}(i,i.readVarint()+i.pos),t.node="path")}function ev(e,t,i){1===e?t.transform=tv(i,i.readVarint()+i.pos):2===e?t.opacity=i.readVarint():5===e?t.clip_path_idx=i.readVarint():6===e?t.mask_idx=i.readVarint():7===e&&t.children.push(Q_(i,i.readVarint()+i.pos))}function tv(e,t){return e.readFields(iv,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},t)}function iv(e,t,i){1===e?t.sx=i.readFloat():2===e?t.ky=i.readFloat():3===e?t.kx=i.readFloat():4===e?t.sy=i.readFloat():5===e?t.tx=i.readFloat():6===e&&(t.ty=i.readFloat())}function rv(e,t,i){1===e?t.fill=function(e,t){return e.readFields(nv,{rgb_color:B_,paint:"rgb_color",opacity:255},t)}(i,i.readVarint()+i.pos):2===e?t.stroke=function(e,t){return e.readFields(av,{rgb_color:B_,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},t)}(i,i.readVarint()+i.pos):3===e?t.paint_order=i.readVarint():5===e?i.readPackedVarint(t.commands):6===e?t.step=i.readFloat():7===e?i.readPackedSVarint(t.diffs):8===e&&(t.rule=i.readVarint())}function nv(e,t,i){1===e?(t.rgb_color=ov(i.readVarint()),t.paint="rgb_color"):2===e?(t.linear_gradient_idx=i.readVarint(),t.paint="linear_gradient_idx"):3===e?(t.radial_gradient_idx=i.readVarint(),t.paint="radial_gradient_idx"):5===e&&(t.opacity=i.readVarint())}function ov(e){return new oi((e>>16&255)/255,(e>>8&255)/255,(255&e)/255,1)}function av(e,t,i){1===e?(t.rgb_color=ov(i.readVarint()),t.paint="rgb_color"):2===e?(t.linear_gradient_idx=i.readVarint(),t.paint="linear_gradient_idx"):3===e?(t.radial_gradient_idx=i.readVarint(),t.paint="radial_gradient_idx"):5===e?i.readPackedFloat(t.dasharray):6===e?t.dashoffset=i.readFloat():7===e?t.miterlimit=i.readFloat():8===e?t.opacity=i.readVarint():9===e?t.width=i.readFloat():10===e?t.linecap=i.readVarint():11===e&&(t.linejoin=i.readVarint())}function sv(e,t,i){1===e?t.transform=tv(i,i.readVarint()+i.pos):2===e?t.spread_method=i.readVarint():3===e?t.stops.push(lv(i,i.readVarint()+i.pos)):4===e?t.x1=i.readFloat():5===e?t.y1=i.readFloat():6===e?t.x2=i.readFloat():7===e&&(t.y2=i.readFloat())}function lv(e,t){return e.readFields(cv,{offset:0,opacity:255,rgb_color:B_},t)}function cv(e,t,i){1===e?t.offset=i.readFloat():2===e?t.opacity=i.readVarint():3===e&&(t.rgb_color=ov(i.readVarint()))}function uv(e,t,i){1===e?t.transform=tv(i,i.readVarint()+i.pos):2===e?t.spread_method=i.readVarint():3===e?t.stops.push(lv(i,i.readVarint()+i.pos)):4===e?t.cx=i.readFloat():5===e?t.cy=i.readFloat():6===e?t.r=i.readFloat():7===e?t.fx=i.readFloat():8===e?t.fy=i.readFloat():9===e&&(t.fr=i.readFloat())}function hv(e,t,i){1===e?t.transform=tv(i,i.readVarint()+i.pos):2===e?t.clip_path_idx=i.readVarint():3===e&&t.children.push(Q_(i,i.readVarint()+i.pos))}function dv(e,t,i){1===e?t.left=t.top=i.readFloat():2===e?t.width=t.height=i.readFloat():3===e?t.top=i.readFloat():4===e?t.height=i.readFloat():5===e?t.mask_type=i.readVarint():6===e?t.mask_idx=i.readVarint():7===e&&t.children.push(Q_(i,i.readVarint()+i.pos))}class pv{static calculate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=new Map,r=new Map;if(0===Object.keys(e).length)return i;t.forEach(e=>{r.set(e.name,e.rgb_color||new oi(0,0,0))});for(const[n,o]of Object.entries(e))r.has(n)?i.set(r.get(n).toString(),o):console.warn('Ignoring unknown image variable "'.concat(n,'"'));return i}}function fv(e){let t=arguments.length>2?arguments[2]:void 0;const i=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:255)/255,r=e.toString(),n=t.has(r)?t.get(r).clone():e.clone();return n.a*=i,n.toString()}function mv(e,t){if(!dt()){const i=document.createElement("canvas");return i.width=e,i.height=t,i}return new OffscreenCanvas(e,t)}function gv(e,t){const i=pv.calculate(t.params,e.metadata?e.metadata.variables:[]),r=e.usvg_tree,n=r.width,o=r.height,a=t.transform?t.transform:new DOMMatrix,s=Math.max(1,Math.round(n*a.a)),l=Math.max(1,Math.round(o*a.d)),c=new DOMMatrix([s/n,0,0,l/o,0,0]),u=mv(s,l).getContext("2d");return yv(u,c,r,r,i),u.getImageData(0,0,s,l)}function yv(e,t,i,r,n){for(const o of r.children)_v(e,t,i,o,n)}function _v(e,t,i,r,n){r.group?(e.save(),function(e,t,i,r,n){const o=null!=r.mask_idx?i.masks[r.mask_idx]:null,a=null!=r.clip_path_idx?i.clip_paths[r.clip_path_idx]:null;if(r.transform&&(t=Mv(r.transform).preMultiplySelf(t)),!function(e,t,i){return 255!==e.opacity||t||i}(r,null!=a,null!=o))return void yv(e,t,i,r,n);const s=mv(e.canvas.width,e.canvas.height),l=s.getContext("2d");yv(l,t,i,r,n),a&&Lv(l,t,i,a),o&&Tv(l,t,i,o,n),e.globalAlpha=r.opacity/255,e.drawImage(s,0,0)}(e,t,i,r.group,n),e.restore()):r.path&&(e.save(),function(e,t,i,r,n){e.setTransform(t),r.paint_order===j_.PAINT_ORDER_FILL_AND_STROKE?(vv(e,i,r,n),Cv(e,i,r,n)):(Cv(e,i,r,n),vv(e,i,r,n))}(e,t,i,r.path,n),e.restore())}function vv(e,t,i,r){const n=i.fill;if(!n)return;const o=n.opacity/255;switch(e.save(),e.beginPath(),Ev(i,e),n.paint){case"rgb_color":e.fillStyle=fv(n.rgb_color,n.opacity,r);break;case"linear_gradient_idx":{const i=t.linear_gradients[n.linear_gradient_idx];i.transform&&e.setTransform(Mv(i.transform).preMultiplySelf(e.getTransform())),e.fillStyle=wv(e,i,o,r);break}case"radial_gradient_idx":{const i=t.radial_gradients[n.radial_gradient_idx];i.transform&&e.setTransform(Mv(i.transform).preMultiplySelf(e.getTransform())),e.fillStyle=bv(e,i,o,r)}}e.fill(xv(i)),e.restore()}function xv(e){return e.rule===V_.PATH_RULE_NON_ZERO?"nonzero":e.rule===V_.PATH_RULE_EVEN_ODD?"evenodd":void 0}function Cv(e,t,i,r){const n=i.stroke;if(!n)return;const o=Iv(i);e.lineWidth=n.width,e.miterLimit=n.miterlimit,e.setLineDash(n.dasharray),e.lineDashOffset=n.dashoffset;const a=n.opacity/255;switch(n.paint){case"rgb_color":e.strokeStyle=fv(n.rgb_color,n.opacity,r);break;case"linear_gradient_idx":e.strokeStyle=wv(e,t.linear_gradients[n.linear_gradient_idx],a,r,!0);break;case"radial_gradient_idx":e.strokeStyle=bv(e,t.radial_gradients[n.radial_gradient_idx],a,r,!0)}switch(n.linejoin){case U_.LINE_JOIN_MITER_CLIP:case U_.LINE_JOIN_MITER:e.lineJoin="miter";break;case U_.LINE_JOIN_ROUND:e.lineJoin="round";break;case U_.LINE_JOIN_BEVEL:e.lineJoin="bevel"}switch(n.linecap){case N_.LINE_CAP_BUTT:e.lineCap="butt";break;case N_.LINE_CAP_ROUND:e.lineCap="round";break;case N_.LINE_CAP_SQUARE:e.lineCap="square"}e.stroke(o)}function wv(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(1===t.stops.length){const e=t.stops[0];return fv(e.rgb_color,e.opacity*i,r)}const{x1:o,y1:a,x2:s,y2:l}=t;let c=new DOMPoint(o,a),u=new DOMPoint(s,l);if(n){const e=Mv(t.transform);c=e.transformPoint(c),u=e.transformPoint(u)}const h=e.createLinearGradient(c.x,c.y,u.x,u.y);for(const d of t.stops)h.addColorStop(d.offset,fv(d.rgb_color,d.opacity*i,r));return h}function bv(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(1===t.stops.length){const e=t.stops[0];return fv(e.rgb_color,e.opacity*i,r)}const o=Mv(t.transform),{fx:a,fy:s,fr:l,cx:c,cy:u,r:h}=t;let d=new DOMPoint(a,s),p=new DOMPoint(c,u),f=l,m=h;if(n){d=o.transformPoint(d),p=o.transformPoint(p);const e=(o.a+o.d)/2;f=l*e,m=t.r*e}const g=e.createRadialGradient(d.x,d.y,f,p.x,p.y,m);for(const y of t.stops)g.addColorStop(y.offset,fv(y.rgb_color,y.opacity*i,r));return g}function Sv(e,t,i,r){const n=r.transform?Mv(r.transform).preMultiplySelf(t):t,o=mv(e.canvas.width,e.canvas.height),a=o.getContext("2d");for(const l of r.children)if(l.group)Sv(a,n,i,l.group);else if(l.path){const e=l.path,t=new Path2D;t.addPath(Iv(e),n),a.fill(t,xv(e))}const s=null!=r.clip_path_idx?i.clip_paths[r.clip_path_idx]:null;s&&Lv(a,n,i,s),e.globalCompositeOperation="source-over",e.drawImage(o,0,0)}function Lv(e,t,i,r){const n=mv(e.canvas.width,e.canvas.height);Sv(n.getContext("2d"),t,i,r),e.globalCompositeOperation="destination-in",e.drawImage(n,0,0)}function Tv(e,t,i,r,n){if(0===r.children.length)return;const o=null!=r.mask_idx?i.masks[r.mask_idx]:null;o&&Tv(e,t,i,o,n);const a=e.canvas.width,s=e.canvas.height,l=mv(a,s),c=l.getContext("2d"),u=r.width,h=r.height,d=r.left,p=r.top,f=new Path2D,m=new Path2D;m.rect(d,p,u,h),f.addPath(m,t),c.clip(f);for(const _ of r.children)_v(c,t,i,_,n);const g=c.getImageData(0,0,a,s),y=g.data;if(r.mask_type===Z_.MASK_TYPE_LUMINANCE)for(let _=0;_<y.length;_+=4)y[_+3]=y[_+3]/255*(.2126*y[_]+.7152*y[_+1]+.0722*y[_+2]);c.putImageData(g,0,0),e.globalCompositeOperation="destination-in",e.drawImage(l,0,0)}function Mv(e){return e?new DOMMatrix([e.sx,e.ky,e.kx,e.sy,e.tx,e.ty]):new DOMMatrix}function Ev(e,t){const i=e.step;let r=e.diffs[0]*i,n=e.diffs[1]*i;t.moveTo(r,n);for(let o=0,a=2;o<e.commands.length;o++)switch(e.commands[o]){case H_.PATH_COMMAND_MOVE:r+=e.diffs[a++]*i,n+=e.diffs[a++]*i,t.moveTo(r,n);break;case H_.PATH_COMMAND_LINE:r+=e.diffs[a++]*i,n+=e.diffs[a++]*i,t.lineTo(r,n);break;case H_.PATH_COMMAND_QUAD:{const o=r+e.diffs[a++]*i,s=n+e.diffs[a++]*i;r=o+e.diffs[a++]*i,n=s+e.diffs[a++]*i,t.quadraticCurveTo(o,s,r,n);break}case H_.PATH_COMMAND_CUBIC:{const o=r+e.diffs[a++]*i,s=n+e.diffs[a++]*i,l=o+e.diffs[a++]*i,c=s+e.diffs[a++]*i;r=l+e.diffs[a++]*i,n=c+e.diffs[a++]*i,t.bezierCurveTo(o,s,l,c,r,n);break}case H_.PATH_COMMAND_CLOSE:t.closePath()}return t}function Iv(e){return Ev(e,new Path2D)}class Av{constructor(e){this.capacity=e,this.cache=new Map}get(e){if(!this.cache.has(e))return;const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}put(e,t){this.cache.has(e)?this.cache.delete(e):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(e,t)}delete(e){this.cache.delete(e)}}Go(Av,"LRUCache");class kv{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(e){return new gh(e,e.data)}getFromCache(e,t,i){return this.cacheMap.has(i)||this.cacheMap.set(i,new Av(150)),this.cacheMap.get(i).get(qa(e.toString(),t))}setInCache(e,t,i,r){this.cacheDependenciesMap.has(r)||this.cacheDependenciesMap.set(r,new Map),this.cacheMap.has(r)||this.cacheMap.set(r,new Av(150));const n=this.cacheDependenciesMap.get(r),o=qa(e.id.toString(),i);n.get(o)||n.set(o,new Set);const a=this.cacheMap.get(r),s=e.toString();n.get(o).add(s),a.put(qa(e.toString(),i),t)}removeImagesFromCacheByIds(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!this.cacheMap.has(i)||!this.cacheDependenciesMap.has(i))return;const r=this.cacheMap.get(i),n=this.cacheDependenciesMap.get(i);for(const o of e){const e=qa(o.toString(),t);if(n.has(e)){for(const t of n.get(e))r.delete(t);n.delete(e)}}}rasterize(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:gv;const o=this.getFromCache(e,i,r);if(o)return o.clone();const a=n(t.icon,e.options),s=kv._getImage(a);return this.setInCache(e,s,i,r),s.clone()}}class Pv{constructor(e){this.size=e,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(e,t){const i=this.toIdx(e,t);return{min:this.minimums[i],max:this.maximums[i]}}isLeaf(e,t){return this.leaves[this.toIdx(e,t)]}toIdx(e,t){return t*this.size+e}}function Ov(e,t,i,r){let n=0,o=Number.MAX_VALUE;for(let a=0;a<3;a++)if(Math.abs(r[a])<1e-15){if(i[a]<e[a]||i[a]>t[a])return null}else{const s=1/r[a];let l=(e[a]-i[a])*s,c=(t[a]-i[a])*s;if(l>c){const e=l;l=c,c=e}if(l>n&&(n=l),c<o&&(o=c),n>o)return null}return n}function Rv(e,t,i,r,n,o,a,s,l,c,u){const h=r-e,d=n-t,p=o-i,f=a-e,m=s-t,g=l-i,y=u[1]*g-u[2]*m,_=u[2]*f-u[0]*g,v=u[0]*m-u[1]*f,x=h*y+d*_+p*v;if(Math.abs(x)<1e-15)return null;const C=1/x,w=c[0]-e,b=c[1]-t,S=c[2]-i,L=(w*y+b*_+S*v)*C;if(L<0||L>1)return null;const T=b*p-S*d,M=S*h-w*p,E=w*d-b*h,I=(u[0]*T+u[1]*M+u[2]*E)*C;return I<0||L+I>1?null:(f*T+m*M+g*E)*C}function zv(e,t,i){return(e-t)/(i-t)}function Dv(e,t,i,r,n,o,a,s,l){const c=1<<i,u=o-r,h=a-n,d=(e+1)/c*u+r,p=(t+0)/c*h+n,f=(t+1)/c*h+n;s[0]=(e+0)/c*u+r,s[1]=p,l[0]=d,l[1]=f}class Fv{constructor(e){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=e,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const t=function(e){const t=Math.ceil(Math.log2(e.dim/8)),i=[];let r=Math.ceil(Math.pow(2,t));const n=1/r,o=(e,t,i,r,n)=>{const o=r?1:0,a=(e+1)*i-o,s=t*i,l=(t+1)*i-o;n[0]=e*i,n[1]=s,n[2]=a,n[3]=l};let a=new Pv(r);const s=[];for(let l=0;l<r*r;l++){o(l%r,Math.floor(l/r),n,!1,s);const t=Vv(s[0],s[1],e),i=Vv(s[2],s[1],e),c=Vv(s[2],s[3],e),u=Vv(s[0],s[3],e);a.minimums.push(Math.min(t,i,c,u)),a.maximums.push(Math.max(t,i,c,u)),a.leaves.push(1)}for(i.push(a),r/=2;r>=1;r/=2){const e=i[i.length-1];a=new Pv(r);for(let t=0;t<r*r;t++){o(t%r,Math.floor(t/r),2,!0,s);const i=e.getElevation(s[0],s[1]),n=e.getElevation(s[2],s[1]),l=e.getElevation(s[2],s[3]),c=e.getElevation(s[0],s[3]),u=e.isLeaf(s[0],s[1]),h=e.isLeaf(s[2],s[1]),d=e.isLeaf(s[2],s[3]),p=e.isLeaf(s[0],s[3]),f=Math.min(i.min,n.min,l.min,c.min),m=Math.max(i.max,n.max,l.max,c.max),g=u&&h&&d&&p;a.maximums.push(m),a.minimums.push(f),a.leaves.push(m-f<=5&&g?1:0)}i.push(a)}return i}(this.dem),i=t.length-1,r=t[i];this._addNode(r.minimums[0],r.maximums[0],r.leaves[0]),this._construct(t,0,0,i,0)}raycastRoot(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;return Ov([e,t,-100],[i,r,this.maximums[0]*a],n,o)}raycast(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1;if(!this.nodeCount)return null;const s=this.raycastRoot(e,t,i,r,n,o,a);if(null==s)return null;const l=[],c=[],u=[],h=[],d=[{idx:0,t:s,nodex:0,nodey:0,depth:0}];for(;d.length>0;){const{idx:s,t:p,nodex:f,nodey:m,depth:g}=d.pop();if(this.leaves[s]){Dv(f,m,g,e,t,i,r,u,h);const s=1<<g,l=(f+0)/s,c=(f+1)/s,d=(m+0)/s,y=(m+1)/s,_=Vv(l,d,this.dem)*a,v=Vv(c,d,this.dem)*a,x=Vv(c,y,this.dem)*a,C=Vv(l,y,this.dem)*a,w=Rv(u[0],u[1],_,h[0],u[1],v,h[0],h[1],x,n,o),b=Rv(h[0],h[1],x,u[0],h[1],C,u[0],u[1],_,n,o),S=Math.min(null!==w?w:Number.MAX_VALUE,null!==b?b:Number.MAX_VALUE);if(S!==Number.MAX_VALUE)return S;{const e=A([],n,o,p);if(Bv(_,v,C,x,zv(e[0],u[0],h[0]),zv(e[1],u[1],h[1]))>=e[2])return p}continue}let y=0;for(let d=0;d<this._siblingOffset.length;d++){Dv((f<<1)+this._siblingOffset[d][0],(m<<1)+this._siblingOffset[d][1],g+1,e,t,i,r,u,h),u[2]=-100,h[2]=this.maximums[this.childOffsets[s]+d]*a;const p=Ov(u,h,n,o);if(null!=p){const e=p;l[d]=e;let t=!1;for(let i=0;i<y&&!t;i++)e>=l[c[i]]&&(c.splice(i,0,d),t=!0);t||(c[y]=d),y++}}for(let e=0;e<y;e++){const t=c[e];d.push({idx:this.childOffsets[s]+t,t:l[t],nodex:(f<<1)+this._siblingOffset[t][0],nodey:(m<<1)+this._siblingOffset[t][1],depth:g+1})}}return null}_addNode(e,t,i){return this.minimums.push(e),this.maximums.push(t),this.leaves.push(i),this.childOffsets.push(0),this.nodeCount++}_construct(e,t,i,r,n){if(1===e[r].isLeaf(t,i))return;this.childOffsets[n]||(this.childOffsets[n]=this.nodeCount);const o=r-1,a=e[o];let s=0,l=0;for(let c=0;c<this._siblingOffset.length;c++){const e=2*t+this._siblingOffset[c][0],r=2*i+this._siblingOffset[c][1],n=a.getElevation(e,r),o=a.isLeaf(e,r),u=this._addNode(n.min,n.max,o);o&&(s|=1<<c),l||(l=u)}for(let c=0;c<this._siblingOffset.length;c++)s&1<<c||this._construct(e,2*t+this._siblingOffset[c][0],2*i+this._siblingOffset[c][1],o,l+c)}}function Bv(e,t,i,r,n,o){return ci(ci(e,i,o),ci(t,r,o),n)}function Vv(e,t,i){const r=i.dim,n=Ae(e*r-.5,0,r-1),o=Ae(t*r-.5,0,r-1),a=Math.floor(n),s=Math.floor(o),l=Math.min(a+1,r-1),c=Math.min(s+1,r-1);return Bv(i.get(a,s),i.get(l,s),i.get(a,c),i.get(l,c),n-a,o-s)}const Nv={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Uv(e,t,i){return(256*e*256+256*t+i)/10-1e4}function jv(e,t,i){return 256*e+t+i/256-32768}class Hv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.uid=e,t.height!==t.width)throw new RangeError("DEM tiles must be square");if(i&&"mapbox"!==i&&"terrarium"!==i)return void Ze('"'.concat(i,'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".'));this.stride=t.height;const n=this.dim=t.height-2,o=new Uint32Array(t.data.buffer);if(this.pixels=new Uint8Array(t.data.buffer),this.floatView=new Float32Array(t.data.buffer),this.borderReady=r,this._modifiedForSources={},!r){for(let e=0;e<n;e++)o[this._idx(-1,e)]=o[this._idx(0,e)],o[this._idx(n,e)]=o[this._idx(n-1,e)],o[this._idx(e,-1)]=o[this._idx(e,0)],o[this._idx(e,n)]=o[this._idx(e,n-1)];o[this._idx(-1,-1)]=o[this._idx(0,0)],o[this._idx(n,-1)]=o[this._idx(n-1,0)],o[this._idx(-1,n)]=o[this._idx(0,n-1)],o[this._idx(n,n)]=o[this._idx(n-1,n-1)]}const a="terrarium"===i?jv:Uv;for(let s=0;s<o.length;++s){const e=4*s;this.floatView[s]=a(this.pixels[e],this.pixels[e+1],this.pixels[e+2])}this._timestamp=pt.now()}_buildQuadTree(){this._tree=new Fv(this)}get(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(e=Ae(e,-1,this.dim),t=Ae(t,-1,this.dim));const i=this._idx(e,t);return this.floatView[i]}set(e,t,i){const r=this._idx(e,t),n=this.floatView[r];return this.floatView[r]=i,i-n}static getUnpackVector(e){return Nv[e]}_idx(e,t){if(e<-1||e>=this.dim+1||t<-1||t>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(t+1)*this.stride+(e+1)}static pack(e,t){const i=[0,0,0,0],r=Hv.getUnpackVector(t);let n=Math.floor((e+r[3])/r[2]);return i[2]=n%256,n=Math.floor(n/256),i[1]=n%256,n=Math.floor(n/256),i[0]=n,i}getPixels(){return new yh({width:this.stride,height:this.stride},this.pixels)}backfillBorder(e,t,i){if(this.dim!==e.dim)throw new Error("dem dimension mismatch");let r=t*this.dim,n=t*this.dim+this.dim,o=i*this.dim,a=i*this.dim+this.dim;switch(t){case-1:r=n-1;break;case 1:n=r+1}switch(i){case-1:o=a-1;break;case 1:a=o+1}const s=-t*this.dim,l=-i*this.dim;for(let c=o;c<a;c++)for(let t=r;t<n;t++){const i=4*this._idx(t,c),r=4*this._idx(t+s,c+l);this.pixels[i+0]=e.pixels[r+0],this.pixels[i+1]=e.pixels[r+1],this.pixels[i+2]=e.pixels[r+2],this.pixels[i+3]=e.pixels[r+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function Zv(e,t,i){1===e?t.headerLength=i.readFixed32():2===e?t.x=i.readVarint():3===e?t.y=i.readVarint():4===e?t.z=i.readVarint():5===e&&t.layers.push(function(e,t){return e.readFields(Yv,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},t)}(i,i.readVarint()+i.pos))}function Wv(e,t,i){1===e?(t.delta_filter=function(e,t){return e.readFields(Gv,{blockSize:0},t)}(i,i.readVarint()+i.pos),t.filter="delta_filter"):2===e?(i.readVarint(),t.filter="zigzag_filter"):3===e?(i.readVarint(),t.filter="bitshuffle_filter"):4===e&&(i.readVarint(),t.filter="byteshuffle_filter")}function Gv(e,t,i){1===e&&(t.blockSize=i.readVarint())}function qv(e,t,i){1===e?(i.readVarint(),t.codec="gzip_data"):2===e?(i.readVarint(),t.codec="jpeg_image"):3===e?(i.readVarint(),t.codec="webp_image"):4===e&&(i.readVarint(),t.codec="png_image")}function Xv(e,t,i){let r=0,n=0;1===e?t.firstByte=i.readFixed64():2===e?t.lastByte=i.readFixed64():3===e?t.filters.push(function(e,t){return e.readFields(Wv,{},t)}(i,i.readVarint()+i.pos)):4===e?t.codec=function(e,t){return e.readFields(qv,{},t)}(i,i.readVarint()+i.pos):5===e?n=i.readFloat():6===e?r=i.readFloat():7===e?t.bands.push(i.readString()):8===e?t.offset=i.readDouble():9===e&&(t.scale=i.readDouble()),0===t.offset&&(t.offset=n),0===t.scale&&(t.scale=r)}function Yv(e,t,i){1===e?t.version=i.readVarint():2===e?t.name=i.readString():3===e?t.units=i.readString():4===e?t.tileSize=i.readVarint():5===e?t.buffer=i.readVarint():6===e?t.pixelFormat=i.readVarint():7===e&&t.dataIndex.push(function(e,t){return e.readFields(Xv,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},t)}(i,i.readVarint()+i.pos))}function Kv(e,t,i){if(2===e)!function(e,t,i){e.readFields(Jv,i,t)}(i,i.readVarint()+i.pos,t);else if(3===e)throw new Error("Not implemented")}function Jv(e,t,i){if(1===e){let e=0;const r=i.readVarint()+i.pos;for(;i.pos<r;)t[e++]=i.readVarint()}}function Qv(e,t){if(4!==t.length)throw new Error("Expected data of dimension 4 but got ".concat(t.length,"."));let i=t[3];for(let r=2;r>=1;r--){const n=1===r?1:0,o=2===r?1:0;for(let r=0;r<t[0];r++){const a=t[1]*r;for(let r=n;r<t[1];r++){const n=t[2]*(r+a);for(let r=o;r<t[2];r++){const o=t[3]*(r+n);for(let r=0;r<t[3];r++){const t=o+r;e[t]+=e[t-i]}}}}i*=t[r]}return e}function $v(e){for(let t=0,i=e.length;t<i;t++)e[t]=e[t]>>>1^-(1&e[t]);return e}function ex(e,t){switch(t){case"uint32":return e;case"uint16":for(let t=0;t<e.length;t+=2){const i=e[t],r=e[t+1];e[t]=(240&i)>>4|(61440&i)>>8|(240&r)<<4|61440&r,e[t+1]=15&i|(3840&i)>>4|(15&r)<<8|(3840&r)<<4}return e;case"uint8":for(let t=0;t<e.length;t+=4){const i=e[t],r=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=(192&i)>>6|(192&r)>>4|(192&n)>>2|192&o,e[t+1]=(48&i)>>4|(48&r)>>2|48&n|(48&o)<<2,e[t+2]=(12&i)>>2|12&r|(12&n)<<2|(12&o)<<4,e[t+3]=3&i|(3&r)<<2|(3&n)<<4|(3&o)<<6}return e;default:throw new Error('Invalid pixel format, "'.concat(t,'"'))}}Go(Hv,"DEMData"),Go(Fv,"DemMinMaxQuadTree",{omit:["dem"]});var tx=Uint8Array,ix=Uint16Array,rx=Int32Array,nx=new tx([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ox=new tx([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ax=new tx([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),sx=function(e,t){for(var i=new ix(31),r=0;r<31;++r)i[r]=t+=1<<e[r-1];var n=new rx(i[30]);for(r=1;r<30;++r)for(var o=i[r];o<i[r+1];++o)n[o]=o-i[r]<<5|r;return{b:i,r:n}},lx=sx(nx,2),cx=lx.b,ux=lx.r;cx[28]=258,ux[258]=28;for(var hx=sx(ox,0).b,dx=new ix(32768),px=0;px<32768;++px){var fx=(43690&px)>>1|(21845&px)<<1;dx[px]=((65280&(fx=(61680&(fx=(52428&fx)>>2|(13107&fx)<<2))>>4|(3855&fx)<<4))>>8|(255&fx)<<8)>>1}var mx=function(e,t,i){for(var r=e.length,n=0,o=new ix(t);n<r;++n)e[n]&&++o[e[n]-1];var a,s=new ix(t);for(n=1;n<t;++n)s[n]=s[n-1]+o[n-1]<<1;a=new ix(1<<t);var l=15-t;for(n=0;n<r;++n)if(e[n])for(var c=n<<4|e[n],u=t-e[n],h=s[e[n]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[dx[h]>>l]=c;return a},gx=new tx(288);for(px=0;px<144;++px)gx[px]=8;for(px=144;px<256;++px)gx[px]=9;for(px=256;px<280;++px)gx[px]=7;for(px=280;px<288;++px)gx[px]=8;var yx=new tx(32);for(px=0;px<32;++px)yx[px]=5;var _x=mx(gx,9),vx=mx(yx,5),xx=function(e){for(var t=e[0],i=1;i<e.length;++i)e[i]>t&&(t=e[i]);return t},Cx=function(e,t,i){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&i},wx=function(e,t){var i=t/8|0;return(e[i]|e[i+1]<<8|e[i+2]<<16)>>(7&t)},bx=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Sx=function(e,t,i){var r=new Error(t||bx[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,Sx),!i)throw r;return r},Lx=new tx(0),Tx="undefined"!=typeof TextDecoder&&new TextDecoder;try{Tx.decode(Lx,{stream:!0})}catch(e){}const Mx={gzip_data:"gzip"};class Ex extends Error{constructor(e){super(e),this.name="MRTError"}}const Ix={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},Ax={uint32:1,uint16:2,uint8:4},kx={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let Px;class Ox{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=e}getLayer(e){const t=this.layers[e];if(!t)throw new Ex("Layer '".concat(e,"' not found"));return t}getHeaderLength(e){const t=new Uint8Array(e),i=new DataView(e);if(13!==t[0])throw new Ex("File is not a valid MRT.");return i.getUint32(1,!0)}parseHeader(e){const t=new Uint8Array(e),i=this.getHeaderLength(e);if(t.length<i)throw new Ex("Expected header with length >= ".concat(i," but got buffer of length ").concat(t.length));const r=function(e){return e.readFields(Zv,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new Px(t.subarray(0,i)));if(!isNaN(this.x)&&(this.x!==r.x||this.y!==r.y||this.z!==r.z))throw new Ex("Invalid attempt to parse header ".concat(r.z,"/").concat(r.x,"/").concat(r.y," for tile ").concat(this.z,"/").concat(this.x,"/").concat(this.y));this.x=r.x,this.y=r.y,this.z=r.z;for(const n of r.layers)this.layers[n.name]=new Rx(n,{cacheSize:this._cacheSize});return this}createDecodingTask(e){const t=[],i=this.getLayer(e.layerName);for(let r of e.blockIndices){const n=i.dataIndex[r],o=n.firstByte-e.firstByte,a=n.lastByte-e.firstByte;if(i._blocksInProgress.has(r))continue;const s={layerName:i.name,firstByte:o,lastByte:a,pixelFormat:i.pixelFormat,blockIndex:r,blockShape:[n.bands.length].concat(i.bandShape),buffer:i.buffer,codec:n.codec.codec,filters:n.filters.map(e=>e.filter)};i._blocksInProgress.add(r),t.push(s)}return new zx(t,()=>{t.forEach(e=>i._blocksInProgress.delete(e.blockIndex))},(e,r)=>{if(t.forEach(e=>i._blocksInProgress.delete(e.blockIndex)),e)throw e;r.forEach(e=>{this.getLayer(e.layerName).processDecodedData(e)})})}}class Rx{constructor(e,t){let{version:i,name:r,units:n,tileSize:o,pixelFormat:a,buffer:s,dataIndex:l}=e;if(this.version=i,1!==this.version)throw new Ex("Cannot parse raster layer encoded with MRT version ".concat(i));this.name=r,this.units=n,this.tileSize=o,this.buffer=s,this.pixelFormat=Ix[a],this.dataIndex=l,this.bandShape=[o+2*s,o+2*s,Ax[this.pixelFormat]],this._decodedBlocks=new Av(t?t.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return Ax[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(e=>{let{bands:t}=e;return t}).flat()}processDecodedData(e){const t=e.blockIndex.toString();this._decodedBlocks.get(t)||this._decodedBlocks.put(t,e.data)}getBlockForBand(e){let t=0;switch(typeof e){case"string":for(const[i,r]of this.dataIndex.entries()){for(const[n,o]of r.bands.entries())if(o===e)return{bandIndex:t+n,blockIndex:i,blockBandIndex:n};t+=r.bands.length}break;case"number":for(const[i,r]of this.dataIndex.entries()){if(e>=t&&e<t+r.bands.length)return{bandIndex:e,blockIndex:i,blockBandIndex:e-t};t+=r.bands.length}break;default:throw new Ex("Invalid band `".concat(JSON.stringify(e),"`. Expected string or integer."))}return{blockIndex:-1,blockBandIndex:-1}}getDataRange(e){let t=1/0,i=-1/0;const r=[],n=new Set;for(const o of e){const{blockIndex:e}=this.getBlockForBand(o);if(e<0)throw new Ex("Invalid band: ".concat(JSON.stringify(o)));const a=this.dataIndex[e];r.includes(e)||r.push(e),n.add(e),t=Math.min(t,a.firstByte),i=Math.max(i,a.lastByte)}if(n.size>this.cacheSize)throw new Ex("Number of blocks to decode (".concat(n.size,") exceeds cache size (").concat(this.cacheSize,")."));return{layerName:this.name,firstByte:t,lastByte:i,blockIndices:r}}hasBand(e){const{blockIndex:t}=this.getBlockForBand(e);return t>=0}hasDataForBand(e){const{blockIndex:t}=this.getBlockForBand(e);return t>=0&&!!this._decodedBlocks.get(t.toString())}getBandView(e){const{blockIndex:t,blockBandIndex:i}=this.getBlockForBand(e);if(t<0)throw new Ex("Band not found: ".concat(JSON.stringify(e)));const r=this._decodedBlocks.get(t.toString());if(!r)throw new Ex("Data for band ".concat(JSON.stringify(e),' of layer "').concat(this.name,'" not decoded.'));const n=this.dataIndex[t],o=this.bandShape.reduce((e,t)=>e*t,1),a=i*o,s=r.subarray(a,a+o);return{data:s,bytes:new Uint8Array(s.buffer).subarray(s.byteOffset,s.byteOffset+s.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:n.offset,scale:n.scale}}}Ox.setPbf=function(e){Px=e};class zx{constructor(e,t,i){this.tasks=e,this._onCancel=t,this._onComplete=i,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(e,t){this._finalized||(this._onComplete(e,t),this._finalized=!0)}}function Dx(e,t){const i=e.json.bufferViews[t.bufferView],r=Jp[t.componentType];return new r(e.buffers[i.buffer],(t.byteOffset||0)+(i.byteOffset||0),t.count*(i.byteStride&&i.byteStride!==$p[t.type]*r.BYTES_PER_ELEMENT?i.byteStride/r.BYTES_PER_ELEMENT:$p[t.type]))}function Fx(e,t,i,r){const n=Jp[t.componentType],o=function(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(n),a=e.json.bufferViews[t.bufferView],s=a.byteStride?a.byteStride/n.BYTES_PER_ELEMENT:$p[t.type],l=i.float32,c=l.length/i.capacity;for(let u=0,h=0;u<t.count*s;u+=s,h+=c)for(let e=0;e<c;e++)l[h+e]=r[u+e]*o;i._trim()}function Bx(e,t,i){const r=e.indices,n=e.attributes,o={};o.indexArray=new bs;const a=t.json.accessors[r],s=a.count/3;o.indexArray.reserve(s);const l=Dx(t,a);for(let d=0;d<s;d++)o.indexArray.emplaceBack(l[3*d],l[3*d+1],l[3*d+2]);o.indexArray._trim(),o.vertexArray=new us;const c=t.json.accessors[n.POSITION];o.vertexArray.reserve(c.count);const u=Dx(t,c);for(let d=0;d<c.count;d++)o.vertexArray.emplaceBack(u[3*d],u[3*d+1],u[3*d+2]);if(o.vertexArray._trim(),o.aabb=new Wc(c.min,c.max),o.centroid=function(e,t){const i=[0,0,0],r=e.length;if(r>0){for(let n=0;n<r;n++){const r=3*e[n];i[0]+=t[r],i[1]+=t[r+1],i[2]+=t[r+2]}i[0]/=r,i[1]/=r,i[2]/=r}return i}(l,u),void 0!==n.COLOR_0){const e=t.json.accessors[n.COLOR_0],i=$p[e.type],r=Dx(t,e);o.colorArray=3===i?new us:new gs,o.colorArray.resize(e.count),Fx(t,e,o.colorArray,r)}if(void 0!==n.NORMAL){o.normalArray=new us;const e=t.json.accessors[n.NORMAL];o.normalArray.resize(e.count);const i=Dx(t,e);Fx(t,e,o.normalArray,i)}if(void 0!==n.TEXCOORD_0&&i.length>0){o.texcoordArray=new ks;const e=t.json.accessors[n.TEXCOORD_0];o.texcoordArray.resize(e.count);const i=Dx(t,e);Fx(t,e,o.texcoordArray,i)}if(void 0!==n._FEATURE_ID_RGBA4444){const e=t.json.accessors[n._FEATURE_ID_RGBA4444];t.json.extensionsUsed&&t.json.extensionsUsed.includes("EXT_meshopt_compression")&&(o.featureData=Dx(t,e))}void 0!==n._FEATURE_RGBA4444&&(o.featureData=new Uint32Array(Dx(t,t.json.accessors[n._FEATURE_RGBA4444]).buffer));const h=e.material;return o.material=function(e,t){const{emissiveFactor:i=[0,0,0],alphaMode:r="OPAQUE",alphaCutoff:n=.5,normalTexture:o,occlusionTexture:a,emissiveTexture:s,doubleSided:l}=e,{baseColorFactor:c=[1,1,1,1],metallicFactor:u=1,roughnessFactor:h=1,baseColorTexture:d,metallicRoughnessTexture:p}=e.pbrMetallicRoughness||{},f=a?t[a.index]:void 0;if(a&&a.extensions&&a.extensions.KHR_texture_transform&&f){const e=a.extensions.KHR_texture_transform;f.offsetScale=[e.offset[0],e.offset[1],e.scale[0],e.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new oi(...c),metallicFactor:u,roughnessFactor:h,baseColorTexture:d?t[d.index]:void 0,metallicRoughnessTexture:p?t[p.index]:void 0},doubleSided:l,emissiveFactor:new oi(...i),alphaMode:r,alphaCutoff:n,normalTexture:o?t[o.index]:void 0,occlusionTexture:f,emissionTexture:s?t[s.index]:void 0,defined:void 0===e.defined}}(void 0!==h?t.json.materials[h]:{defined:!1},i),o}function Vx(e,t,i){const{matrix:r,rotation:n,translation:o,scale:a,mesh:s,extras:l,children:c}=e,u={};if(u.matrix=r||function(e,t,i,r){var n=t[0],o=t[1],a=t[2],s=t[3],l=n+n,c=o+o,u=a+a,h=n*l,d=n*c,p=n*u,f=o*c,m=o*u,g=a*u,y=s*l,_=s*c,v=s*u,x=r[0],C=r[1],w=r[2];return e[0]=(1-(f+g))*x,e[1]=(d+v)*x,e[2]=(p-_)*x,e[3]=0,e[4]=(d-v)*C,e[5]=(1-(h+g))*C,e[6]=(m+y)*C,e[7]=0,e[8]=(p+_)*w,e[9]=(m-y)*w,e[10]=(1-(h+f))*w,e[11]=0,e[12]=i[0],e[13]=i[1],e[14]=i[2],e[15]=1,e}([],n||[0,0,0,1],o||[0,0,0],a||[1,1,1]),void 0!==s){u.meshes=i[s];const e=u.anchor=[0,0];for(const t of u.meshes){const{min:i,max:r}=t.aabb;e[0]+=i[0]+r[0],e[1]+=i[1]+r[1]}e[0]=Math.floor(e[0]/u.meshes.length/2),e[1]=Math.floor(e[1]/u.meshes.length/2)}if(l&&(l.id&&(u.id=l.id),l.lights&&(u.lights=function(e){if(!e.length)return[];const t=function(e){const t=atob(e),i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.codePointAt(r);return i}(e),i=[],r=t.length/24,n=new Uint16Array(t.buffer),o=new Float32Array(t.buffer);for(let a=0;a<r;a++){const e=n[2*a*6]/30,t=n[2*a*6+1]/30,r=n[2*a*6+10]/100,s=o[6*a+1],l=o[6*a+2],c=o[6*a+3],u=o[6*a+4],h=c-s,d=u-l,p=Math.hypot(h,d);i.push({pos:[s+.5*h,l+.5*d,t],normal:[d/p,-h/p,0],width:p,height:e,depth:r,points:[s,l,c,u]})}return i}(l.lights))),c){const e=[];for(const r of c)e.push(Vx(t.json.nodes[r],t,i));u.children=e}return u}function Nx(e){if(0===e.vertices.length||0===e.indices.length)return null;const t=new _d(e.vertices,e.indices,8,256),[i,r]=[t.min.clone(),t.max.clone()];return{vertices:e.vertices,indices:e.indices,grid:t,min:i,max:r}}function Ux(e){if(!e.extras||!e.extras.ground)return null;const t=e.extras.ground;if(!t||!Array.isArray(t)||0===t.length)return null;const i=t[0];if(!i||!Array.isArray(i)||0===i.length)return null;const r=[];for(const a of i){if(!Array.isArray(a)||2!==a.length)continue;const e=a[0],t=a[1];"number"==typeof e&&"number"==typeof t&&r.push(new xe(e,t))}if(r.length<3)return null;r.length>1&&r[r.length-1].equals(r[0])&&r.pop();let n=0;for(let a=0;a<r.length;a++){const e=r[a],t=r[(a+1)%r.length],i=r[(a+2)%r.length];n+=(e.x-t.x)*(i.y-t.y)-(i.x-t.x)*(e.y-t.y)}n>0&&r.reverse();const o=bh(r.flatMap(e=>[e.x,e.y]),[]);return 0===o.length?null:{vertices:r,indices:o}}function jx(e,t){const i=[],r=[];let n=0;const o=[];for(const a of e){n=i.length;const e=a.vertexArray.float32,s=a.indexArray.uint16;for(let r=0;r<a.vertexArray.length;r++)o[0]=e[3*r+0],o[1]=e[3*r+1],o[2]=e[3*r+2],B(o,o,t),i.push(new xe(o[0],o[1]));for(let t=0;t<3*a.indexArray.length;t++)r.push(s[t]+n)}if(r.length%3!=0)return null;for(let a=0;a<r.length;a+=3){const e=i[r[a+0]],t=i[r[a+1]],n=i[r[a+2]];(e.x-t.x)*(n.y-t.y)-(n.x-t.x)*(e.y-t.y)>0&&([r[a+1],r[a+2]]=[r[a+2],r[a+1]])}return{vertices:i,indices:r}}function Hx(e){const t=function(e,t){const i=[],r=WebGL2RenderingContext;if(e.json.textures)for(const n of e.json.textures){const o={magFilter:r.LINEAR,minFilter:r.NEAREST,wrapS:r.REPEAT,wrapT:r.REPEAT};void 0!==n.sampler&&Object.assign(o,e.json.samplers[n.sampler]),i.push({image:t[n.source],sampler:o,uploaded:!1})}return i}(e,e.images),i=function(e,t){const i=[];for(const r of e.json.meshes){const n=[];for(const i of r.primitives)n.push(Bx(i,e,t));i.push(n)}return i}(e,t),{scenes:r,scene:n,nodes:o}=e.json,a=r?r[n||0].nodes:o,s=[];for(const l of a)s.push(Vx(o[l],e,i));return function(e,t,i){const r={},n=new Set;for(let o=0;o<e.length;o++){const e=i[t[o]];if(!e.extras)continue;const a=e.extras["mapbox:footprint:version"],s=e.extras["mapbox:footprint:id"];(a||s)&&n.add(o),"1.0.0"===a&&s&&(r[s]=o)}for(let o=0;o<e.length;o++){if(n.has(o))continue;const a=e[o],s=i[t[o]];if(!s.extras)continue;let l=null;a.id in r&&(l=jx(e[r[a.id]].meshes,a.matrix)),l||(l=Ux(s)),l&&(a.footprint=Nx(l))}if(n.size>0){const t=Array.from(n.values()).sort((e,t)=>e-t);for(let i=t.length-1;i>=0;i--)e.splice(t[i],1)}}(s,a,e.json.nodes),s}function Zx(e){e.heightmap=new Float32Array(4096),e.heightmap.fill(-1);const t=e.vertexArray.float32,i=e.aabb.min[0]-1,r=e.aabb.min[1]-1,n=g_/(e.aabb.max[0]-i+2),o=g_/(e.aabb.max[1]-r+2);for(let a=0;a<t.length;a+=3){const s=t[a+2],l=(t[a+0]-i)*n|0,c=(t[a+1]-r)*o|0;s>e.heightmap[c*g_+l]&&(e.heightmap[c*g_+l]=s)}}function Wx(e,t){const i={};i.indexArray=new bs,i.indexArray.reserve(4*e.length),i.vertexArray=new us,i.vertexArray.reserve(10*e.length),i.colorArray=new gs,i.vertexArray.reserve(10*e.length);let r=0;for(const a of e){const e=Math.min(10,Math.max(4,1.3*a.height))*t,n=[-a.normal[1],a.normal[0],0],o=Math.min(.29,.1*a.width/a.depth),s=a.width-2*a.depth*t*(o+.01),l=A([],a.pos,n,s/2),c=A([],a.pos,n,-s/2),u=[l[0],l[1],l[2]+a.height],h=[c[0],c[1],c[2]+a.height],d=A([],a.normal,n,o);I(d,d,e);const p=A([],a.normal,n,-o);I(p,p,e),S(d,l,d),S(p,c,p),l[2]+=.1,c[2]+=.1,i.vertexArray.emplaceBack(d[0],d[1],d[2]),i.vertexArray.emplaceBack(p[0],p[1],p[2]),i.vertexArray.emplaceBack(l[0],l[1],l[2]),i.vertexArray.emplaceBack(c[0],c[1],c[2]),i.vertexArray.emplaceBack(u[0],u[1],u[2]),i.vertexArray.emplaceBack(h[0],h[1],h[2]),i.vertexArray.emplaceBack(l[0],l[1],l[2]),i.vertexArray.emplaceBack(c[0],c[1],c[2]),i.vertexArray.emplaceBack(d[0],d[1],d[2]),i.vertexArray.emplaceBack(p[0],p[1],p[2]);const f=s/e/2;i.colorArray.emplaceBack(-f-o,-1,f,.8),i.colorArray.emplaceBack(f+o,-1,f,.8),i.colorArray.emplaceBack(-f,0,f,1.3),i.colorArray.emplaceBack(f,0,f,1.3),i.colorArray.emplaceBack(f+o,-.8,f,.7),i.colorArray.emplaceBack(f+o,-.8,f,.7),i.colorArray.emplaceBack(0,0,f,1.3),i.colorArray.emplaceBack(0,0,f,1.3),i.colorArray.emplaceBack(f+o,-1.2,f,.8),i.colorArray.emplaceBack(f+o,-1.2,f,.8),i.indexArray.emplaceBack(6+r,4+r,8+r),i.indexArray.emplaceBack(7+r,9+r,5+r),i.indexArray.emplaceBack(0+r,1+r,2+r),i.indexArray.emplaceBack(1+r,3+r,2+r),r+=10}const n={defined:!0};n.emissiveFactor=oi.black;const o={};return o.baseColorFactor=oi.white,n.pbrMetallicRoughness=o,i.material=n,i.aabb=new Wc([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),i}Ox.performDecoding=function(e,t){const i=new Uint8Array(e);return Promise.all(t.tasks.map(e=>{const{layerName:t,firstByte:r,lastByte:n,pixelFormat:o,blockShape:a,blockIndex:s,filters:l,codec:c}=e,u=i.subarray(r,n+1),h=new Uint32Array(a[0]*a[1]*a[2]);let d;if("gzip_data"!==c)throw new Ex("Unhandled codec: ".concat(c));return d=function(e,t){if(!globalThis.DecompressionStream&&"gzip_data"===t)return Promise.resolve(((o=function(e){31==e[0]&&139==e[1]&&8==e[2]||Sx(6,"invalid gzip data");var t=e[3],i=10;4&t&&(i+=2+(e[10]|e[11]<<8));for(var r=(t>>3&1)+(t>>4&1);r>0;r-=!e[i++]);return i+(2&t)}(n=e))+8>n.length&&Sx(6,"invalid gzip data"),function(e,t,i){var r=e.length;if(!r||t.f&&!t.l)return i||new tx(0);var n=!i,o=n||2!=t.i,a=t.i;n&&(i=new tx(3*r));var s,l,c=function(e){var t=i.length;if(e>t){var r=new tx(Math.max(2*t,e));r.set(i),i=r}},u=t.f||0,h=t.p||0,d=t.b||0,p=t.l,f=t.d,m=t.m,g=t.n,y=8*r;do{if(!p){u=Cx(e,h,1);var _=Cx(e,h+1,3);if(h+=3,!_){var v=e[(A=4+((h+7)/8|0))-4]|e[A-3]<<8,x=A+v;if(x>r){a&&Sx(0);break}o&&c(d+v),i.set(e.subarray(A,x),d),t.b=d+=v,t.p=h=8*x,t.f=u;continue}if(1==_)p=_x,f=vx,m=9,g=5;else if(2==_){var C=Cx(e,h,31)+257,w=Cx(e,h+10,15)+4,b=C+Cx(e,h+5,31)+1;h+=14;for(var S=new tx(b),L=new tx(19),T=0;T<w;++T)L[ax[T]]=Cx(e,h+3*T,7);h+=3*w;var M=xx(L),E=(1<<M)-1,I=mx(L,M);for(T=0;T<b;){var A,k=I[Cx(e,h,E)];if(h+=15&k,(A=k>>4)<16)S[T++]=A;else{var P=0,O=0;for(16==A?(O=3+Cx(e,h,3),h+=2,P=S[T-1]):17==A?(O=3+Cx(e,h,7),h+=3):18==A&&(O=11+Cx(e,h,127),h+=7);O--;)S[T++]=P}}var R=S.subarray(0,C),z=S.subarray(C);m=xx(R),g=xx(z),p=mx(R,m),f=mx(z,g)}else Sx(1);if(h>y){a&&Sx(0);break}}o&&c(d+131072);for(var D=(1<<m)-1,F=(1<<g)-1,B=h;;B=h){var V=(P=p[wx(e,h)&D])>>4;if((h+=15&P)>y){a&&Sx(0);break}if(P||Sx(2),V<256)i[d++]=V;else{if(256==V){B=h,p=null;break}var N=V-254;V>264&&(N=Cx(e,h,(1<<(H=nx[T=V-257]))-1)+cx[T],h+=H);var U=f[wx(e,h)&F],j=U>>4;if(U||Sx(3),h+=15&U,z=hx[j],j>3){var H=ox[j];z+=wx(e,h)&(1<<H)-1,h+=H}if(h>y){a&&Sx(0);break}o&&c(d+131072);var Z=d+N;if(d<z){var W=0-z,G=Math.min(z,Z);for(W+d<0&&Sx(3);d<G;++d)i[d]=(void 0)[W+d]}for(;d<Z;++d)i[d]=i[d-z]}}t.l=p,t.p=B,t.b=d,t.f=u,p&&(u=1,t.m=m,t.d=f,t.n=g)}while(!u);return d!=i.length&&n?(s=i,(null==(l=d)||l>s.length)&&(l=s.length),new tx(s.subarray(0,l))):i.subarray(0,d)}(n.subarray(o,-8),{i:2},new tx(((i=n)[(r=i.length)-4]|i[r-3]<<8|i[r-2]<<16|i[r-1]<<24)>>>0))));var i,r,n,o;const a=Mx[t];if(!a)throw new Error("Unhandled codec: ".concat(t));const s=new globalThis.DecompressionStream(a);return new Response(new Blob([e]).stream().pipeThrough(s)).arrayBuffer().then(e=>new Uint8Array(e))}(u,c).then(e=>(function(e,t){e.readFields(Kv,t)}(new Px(e),h),new(0,kx[o])(h.buffer))),d.then(e=>{for(let t=l.length-1;t>=0;t--)switch(l[t]){case"delta_filter":Qv(e,a);break;case"zigzag_filter":$v(e);break;case"bitshuffle_filter":ex(e,o);break;default:throw new Ex('Unhandled filter "'.concat(l[t],'"'))}return{layerName:t,blockIndex:s,data:e}}).catch(e=>{throw e})}))},Go(zx,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]}),Go(Ox,"MapboxRasterTile"),Go(Rx,"MapboxRasterLayer",{omit:["_blocksInProgress"]});class Gx{constructor(e){this._stringToNumber={},this._numberToString=[];for(let t=0;t<e.length;t++){const i=e[t];this._stringToNumber[i]=t,this._numberToString[t]=i}}encode(e){return this._stringToNumber[e]}decode(e){return this._numberToString[e]}}const qx=["id","tile","layer","source","sourceLayer","state"];class Xx{constructor(e,t,i,r,n){this.type="Feature",this._vectorTileFeature=e,this._z=t,this._x=i,this._y=r,this.properties=e.properties,this.id=n}clone(){const e=new Xx(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(e.state=Object.assign({},this.state)),this.layer&&(e.layer=Object.assign({},this.layer)),this.source&&(e.source=this.source),this.sourceLayer&&(e.sourceLayer=this.sourceLayer),e}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(e){this._geometry=e}toJSON(){const e={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const t of qx)void 0!==this[t]&&(e[t]=this[t]);return e}}class Yx{constructor(e,t){this.tileID=e,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=new Zo(Or,16,0),this.featureIndexArray=new qs,this.promoteId=t,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const s=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,r,n,o);const l=this.grid;for(let c=0;c<t.length;c++){const e=t[c],i=[1/0,1/0,-1/0,-1/0];for(let t=0;t<e.length;t++){const r=e[t];i[0]=Math.min(i[0],r.x),i[1]=Math.min(i[1],r.y),i[2]=Math.max(i[2],r.x),i[3]=Math.max(i[3],r.y)}0!==a&&(i[0]-=a,i[1]-=a,i[2]+=a,i[3]+=a),i[0]<Or&&i[1]<Or&&i[2]>=0&&i[3]>=0&&l.insert(s,i[0],i[1],i[2],i[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Ic.VectorTile(new cm(this.rawTileData)).layers,this.sourceLayerCoder=new Gx(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const e in this.vtLayers)this.vtFeatures[e]=[]}return this.vtLayers}query(e,t){var i=this;const{tilespaceGeometry:r,transform:n,tileTransform:o,pixelPosMatrix:a,availableImages:s,worldview:l}=t;this.loadVTLayers(),this.serializedLayersCache.clear();const c=r.bufferedTilespaceBounds,u=this.grid.query(c.min.x,c.min.y,c.max.x,c.max.y,(e,t,i,n)=>cu(r.bufferedTilespaceGeometry,e,t,i,n));u.sort(Jx);let h=null;n.elevation&&u.length>0&&(h=S_.create(n.elevation,this.tileID));const d={};let p;for(let f=0;f<u.length;f++){const t=u[f];if(t===p)continue;p=t;const c=this.featureIndexArray.get(t);let m=null;this.is3DTile?this.loadMatchingModelFeature(d,c,e,r,n,l):this.loadMatchingFeature(d,c,e,s,l,function(e,t,s){let l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return m||(m=gc(e,i.tileID.canonical,o)),t.queryIntersectsFeature(r,e,s,m,i.z,n,a,h,l)})}return d}loadMatchingFeature(e,t,i,r,n,o){const{featureIndex:a,bucketIndex:s,sourceLayerIndex:l,layoutVertexArrayOffset:c}=t,u=this.bucketLayerIDs[s],h=i.layers,d=Object.keys(h);if(d.length&&!je(d,u))return;const p=i.sourceCache,f=this.sourceLayerCoder.decode(l),m=this.vtLayers[f].feature(a),g=this.getId(m,f);for(let y=0;y<u.length;y++){const t=u[y];if(!h[t])continue;const{styleLayer:i,targets:s}=h[t];let l={};void 0!==g&&(l=p.getFeatureState(i.sourceLayer,g));const d=!o||o(m,i,l,c);if(!d)continue;const f=new Xx(m,this.z,this.x,this.y,g);f.tile=this.tileID.canonical,f.state=l;let _=this.serializedLayersCache.get(t);_||(_=i.serialize(),_.id=t,this.serializedLayersCache.set(t,_)),f.source=_.source,f.sourceLayer=_["source-layer"],f.layer=Re({},_),f.layer.paint=Kx(_.paint,i.paint,m,l,r),f.layer.layout=Kx(_.layout,i.layout,m,l,r);let v=!1;for(const e of s){this.updateFeatureProperties(f,e);const{filter:t}=e;if(t)if(m.properties=f.properties,t.needGeometry){const e=yc(m,!0);if(!t.filter(new ya(this.tileID.overscaledZ,{worldview:n}),e,this.tileID.canonical))continue}else if(!t.filter(new ya(this.tileID.overscaledZ,{worldview:n}),m))continue;v=!0,e.targetId&&this.addFeatureVariant(f,e)}v&&this.appendToResult(e,t,a,f,d)}}loadMatchingModelFeature(e,t,i,r,n,o){const{featureIndex:a,bucketIndex:s}=t,l=this.bucketLayerIDs[s],c=i.layers,u=Object.keys(c);if(!u.length||je(u,l))for(let h=0;h<l.length;h++){const t=l[h],{styleLayer:s,targets:u}=c[t];if("model"!==s.type)continue;const d=r.tile,p=d.getBucket(s);if(!(p&&p instanceof k_))continue;const f=D_(p,a,r,n);if(!f)continue;const{z:m,x:g,y:y}=d.tileID.canonical,{feature:_,intersectionZ:v,position:x}=f;let C={};void 0!==_.id&&(C=i.sourceCache.getFeatureState(s.sourceLayer,_.id));const w=new Xx({},m,g,y,_.id);w.tile=this.tileID.canonical,w.state=C,w.properties=_.properties,w.geometry={type:"Point",coordinates:[x.lng,x.lat]};let b=this.serializedLayersCache.get(t);b||(b=s.serialize(),b.id=t,this.serializedLayersCache.set(t,b)),w.source=b.source,w.sourceLayer=b["source-layer"],w.layer=Re({},b);let S=!1;for(const e of u){this.updateFeatureProperties(w,e);const{filter:t}=e;if(t)if(_.properties=w.properties,t.needGeometry){if(!t.filter(new ya(this.tileID.overscaledZ,{worldview:o}),_,this.tileID.canonical))continue}else if(!t.filter(new ya(this.tileID.overscaledZ,{worldview:o}),_))continue;S=!0,e.targetId&&this.addFeatureVariant(w,e)}S&&this.appendToResult(e,t,a,w,v)}}updateFeatureProperties(e,t,i){if(t.properties){const r={};for(const n in t.properties){const o=t.properties[n].evaluate({zoom:this.z},e._vectorTileFeature,e.state,e.tile,i);null!=o&&(r[n]=o)}e.properties=r}}addFeatureVariant(e,t,i){const r={target:t.target,namespace:t.namespace,uniqueFeatureID:t.uniqueFeatureID};t.properties&&(r.properties=e.properties),e.variants=e.variants||{},e.variants[t.targetId]=e.variants[t.targetId]||[],e.variants[t.targetId].push(r)}appendToResult(e,t,i,r,n){let o=e[t];void 0===o&&(o=e[t]=[]),o.push({featureIndex:i,feature:r,intersectionZ:n})}lookupSymbolFeatures(e,t,i,r,n,o){const a={};this.loadVTLayers();for(const s of e)this.loadMatchingFeature(a,{bucketIndex:t,sourceLayerIndex:i,featureIndex:s,layoutVertexArrayOffset:0},r,n,o);return a}loadFeature(e){const{featureIndex:t,sourceLayerIndex:i}=e;this.loadVTLayers();const r=this.sourceLayerCoder.decode(i),n=this.vtFeatures[r];if(n[t])return n[t];const o=this.vtLayers[r].feature(t);return n[t]=o,o}hasLayer(e){for(const t of this.bucketLayerIDs)for(const i of t)if(e===i)return!0;return!1}getId(e,t){let i=e.id;if(this.promoteId){const r=Array.isArray(this.promoteId)||"object"!=typeof this.promoteId?this.promoteId:this.promoteId[t];if(null!=r)if(Array.isArray(r)){if(!this.promoteIdExpression){const e=zo(r);if("success"!==e.result){const t=e.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", ");return void Ze("Failed to create expression for promoteId: ".concat(t))}this.promoteIdExpression=e.value}this.promoteIdExpression._evaluator||(this.promoteIdExpression._evaluator=new Ji),i=this.promoteIdExpression.evaluate({zoom:0},e)}else i=e.properties[r];"boolean"==typeof i&&(i=Number(i))}return i}}function Kx(e,t,i,r,n){return Ve(e,(e,o)=>{const a=t instanceof La?t.get(o):null;return a&&a.evaluate?a.evaluate(i,r,void 0,n):a})}function Jx(e,t){return t-e}Go(Yx,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const Qx=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class $x{static from(e){if(!(e instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[t,i]=new Uint8Array(e,0,2);if(219!==t)throw new Error("Data does not appear to be in a KDBush format.");const r=i>>4;if(1!==r)throw new Error("Got v".concat(r," data when expected v1."));const n=Qx[15&i];if(!n)throw new Error("Unrecognized array type.");const[o]=new Uint16Array(e,2,1),[a]=new Uint32Array(e,4,1);return new $x(a,o,n,e)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,r=arguments.length>3?arguments[3]:void 0;if(isNaN(e)||e<0)throw new Error("Unpexpected numItems value: ".concat(e,"."));this.numItems=+e,this.nodeSize=Math.min(Math.max(+t,2),65535),this.ArrayType=i,this.IndexArrayType=e<65536?Uint16Array:Uint32Array;const n=Qx.indexOf(this.ArrayType),o=2*e*this.ArrayType.BYTES_PER_ELEMENT,a=e*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-a%8)%8;if(n<0)throw new Error("Unexpected typed array class: ".concat(i,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=2*e,this._finished=!0):(this.data=new ArrayBuffer(8+o+a+s),this.ids=new this.IndexArrayType(this.data,8,e),this.coords=new this.ArrayType(this.data,8+a+s,2*e),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+n]),new Uint16Array(this.data,2,1)[0]=t,new Uint32Array(this.data,4,1)[0]=e)}add(e,t){const i=this._pos>>1;return this.ids[i]=i,this.coords[this._pos++]=e,this.coords[this._pos++]=t,i}finish(){const e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return eC(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(e,t,i,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:n,coords:o,nodeSize:a}=this,s=[0,n.length-1,0],l=[];for(;s.length;){const c=s.pop()||0,u=s.pop()||0,h=s.pop()||0;if(u-h<=a){for(let a=h;a<=u;a++){const s=o[2*a],c=o[2*a+1];s>=e&&s<=i&&c>=t&&c<=r&&l.push(n[a])}continue}const d=h+u>>1,p=o[2*d],f=o[2*d+1];p>=e&&p<=i&&f>=t&&f<=r&&l.push(n[d]),(0===c?e<=p:t<=f)&&(s.push(h),s.push(d-1),s.push(1-c)),(0===c?i>=p:r>=f)&&(s.push(d+1),s.push(u),s.push(1-c))}return l}within(e,t,i){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:r,coords:n,nodeSize:o}=this,a=[0,r.length-1,0],s=[],l=i*i;for(;a.length;){const c=a.pop()||0,u=a.pop()||0,h=a.pop()||0;if(u-h<=o){for(let i=h;i<=u;i++)nC(n[2*i],n[2*i+1],e,t)<=l&&s.push(r[i]);continue}const d=h+u>>1,p=n[2*d],f=n[2*d+1];nC(p,f,e,t)<=l&&s.push(r[d]),(0===c?e-i<=p:t-i<=f)&&(a.push(h),a.push(d-1),a.push(1-c)),(0===c?e+i>=p:t+i>=f)&&(a.push(d+1),a.push(u),a.push(1-c))}return s}}function eC(e,t,i,r,n,o){if(n-r<=i)return;const a=r+n>>1;tC(e,t,a,r,n,o),eC(e,t,i,r,a-1,1-o),eC(e,t,i,a+1,n,1-o)}function tC(e,t,i,r,n,o){for(;n>r;){if(n-r>600){const a=n-r+1,s=i-r+1,l=Math.log(a),c=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*c*(a-c)/a)*(s-a/2<0?-1:1);tC(e,t,i,Math.max(r,Math.floor(i-s*c/a+u)),Math.min(n,Math.floor(i+(a-s)*c/a+u)),o)}const a=t[2*i+o];let s=r,l=n;for(iC(e,t,r,i),t[2*n+o]>a&&iC(e,t,r,n);s<l;){for(iC(e,t,s,l),s++,l--;t[2*s+o]<a;)s++;for(;t[2*l+o]>a;)l--}t[2*r+o]===a?iC(e,t,r,l):(l++,iC(e,t,l,n)),l<=i&&(r=l+1),i<=l&&(n=l-1)}}function iC(e,t,i,r){rC(e,i,r),rC(t,2*i,2*r),rC(t,2*i+1,2*r+1)}function rC(e,t,i){const r=e[t];e[t]=e[i],e[i]=r}function nC(e,t,i,r){const n=e-i,o=t-r;return n*n+o*o}e.$=Qi,e.A=Kt,e.B=zi,e.C=qa,e.D=zp,e.E=ei,e.F=2,e.G=Xm,e.H=Gm,e.I=ti,e.J=qi,e.K=class extends c_{},e.L=di,e.M=ka,e.N=So,e.O=Co,e.P=xe,e.Q=bo,e.R=Pt,e.S=Ro,e.T=Iy,e.U=Pa,e.V=c_,e.W=Bo,e.X=zo,e.Y=dn,e.Z=fn,e._=hn,e.a=function(e){return rt.API_CDN_URL_REGEX.test(e)},e.a$=De,e.a0=ni,e.a1=Oa,e.a2=Lo,e.a3=wo,e.a4=function(e){const t=e.value;let i=[];if(!t)return i;const r=qi(t);return"string"!==r?(i=i.concat([new c_(e.key,t,'string expected, "'.concat(r,'" found'))]),i):(u_(t,!0)||(i=i.concat([new c_(e.key,t,'invalid url "'.concat(t,'"'))])),i)},e.a5=Aa,e.a6=xa,e.a7=Ia,e.a8=Ta,e.a9=class{constructor(e){this.specification=e}possiblyEvaluate(e,t){return qe(e.expression.evaluate(t))}interpolate(e,t,i){return{x:ci(e.x,t.x,i),y:ci(e.y,t.y,i),z:ci(e.z,t.z,i),azimuthal:ci(e.azimuthal,t.azimuthal,i),polar:ci(e.polar,t.polar,i)}}},e.aA=X,e.aB=Rl,e.aC=lu,e.aD=Jl,e.aE=uc,e.aF=function(e,t){const i={};for(let r=0;r<t.length;r++){const n=t[r];n in e&&(i[n]=e[n])}return i},e.aG=ql,e.aH=Ql,e.aI=class{constructor(e){this.entries={},this.scheduler=e}request(e,t,i,r){const n=this.entries[e]=this.entries[e]||{callbacks:[]};if(n.result){const[e,i]=n.result;return this.scheduler?this.scheduler.add(()=>{r(e,i)},t):r(e,i),()=>{}}return n.callbacks.push(r),n.cancel||(n.cancel=i((i,r)=>{n.result=[i,r];for(const e of n.callbacks)this.scheduler?this.scheduler.add(()=>{e(i,r)},t):e(i,r);setTimeout(()=>delete this.entries[e],3e3)})),()=>{n.result||(n.callbacks=n.callbacks.filter(e=>e!==r),n.callbacks.length||(n.cancel(),delete this.entries[e]))}}},e.aJ=function(e,t,i){const r=JSON.stringify(e.request);return e.data&&(this.deduped.entries[r]={result:[null,e.data]}),this.deduped.request(r,{type:"parseTile",isSymbolTile:e.isSymbolTile,zoom:e.tileZoom},t=>{const r=Dt(e.request,(e,r,n,o)=>{e?t(e):r&&t(null,{vectorTile:i?void 0:new Ic.VectorTile(new cm(r)),rawData:r,cacheControl:n,expires:o})});return()=>{r.cancel(),t()}},t)},e.aK=function(e){St++,St>_t&&(e.getActor().send("enforceCacheSizeLimit",yt),St=0)},e.aL=function(e){return e<=1?1:Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},e.aM=wu,e.aN=Dy,e.aO=jy,e.aP=Ry,e.aQ=function(e,t){const i=document.createElement("video");i.muted=!0,i.onloadstart=function(){t(null,i)};for(let r=0;r<e.length;r++){const t=document.createElement("source");Ft(e[r])||(i.crossOrigin="Anonymous"),t.src=e[r],i.appendChild(t)}return{cancel:()=>{}}},e.aR=Ay,e.aS=function(e){return fetch(e).then(e=>e.arrayBuffer()).then(t=>df(t,0,e))},e.aT=Hx,e.aU=class{constructor(e,t,i,r){this.id=e,this.position=null!=t?new Gl(t[0],t[1]):new Gl(0,0),this.orientation=null!=i?i:[0,0,0],this.nodes=r,this.uploaded=!1,this.aabb=new Wc([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(e,t){if(u(e.matrix,t,e.matrix),e.meshes)for(const i of e.meshes){const t=Wc.applyTransformFast(i.aabb,e.matrix);this.aabb.encapsulate(t)}if(e.children)for(const i of e.children)this._applyTransformations(i,e.matrix)}computeBoundsAndApplyParent(){const e=l([]);for(const t of this.nodes)this._applyTransformations(t,e)}computeModelMatrix(e,t,i,r,n,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];__(this.matrix,this,e.transform,this.position,t,i,r,n,o,a)}upload(e){if(!this.uploaded){for(const t of this.nodes)C_(t,e);for(const e of this.nodes)w_(e);this.uploaded=!0}}destroy(){for(const e of this.nodes)b_(e)}},e.aV=Be,e.aW=Dg,e.aX=ec,e.aY=tc,e.aZ=ns,e.a_=bs,e.aa=ya,e.ab=Fo,e.ac=lc,e.ad=B,e.ae=w,e.af=ke,e.ag=La,e.ah=Xu,e.ai=ci,e.aj=Or,e.ak=ui,e.al=Se,e.am=oi,e.an=class{constructor(e){this.specification=e}possiblyEvaluate(e,t){return function(e){let[t,i]=e;const r=qe([1,t,i]);return{x:r.x,y:r.y,z:r.z}}(e.expression.evaluate(t))}interpolate(e,t,i){return{x:ci(e.x,t.x,i),y:ci(e.y,t.y,i),z:ci(e.z,t.z,i)}}},e.ao=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const n=new xe(i,i),o=e.sub(n),a=t.add(n),s=[o,new xe(a.x,o.y),a,new xe(o.x,a.y)];return r&&s.push(o.clone()),s},e.ap=function(e,t){const i=[];for(let r=0;r<e.length;r++){const n=Pe(r-1,-1,e.length-1),o=Pe(r+1,-1,e.length-1),a=e[r],s=e[o],l=e[n].sub(a).unit(),c=s.sub(a).unit(),u=c.angleWithSep(l.x,l.y),h=l.add(c).unit().mult(-1*t/Math.sin(u/2));i.push(a.add(h))}return i},e.aq=Fg,e.ar=cu,e.as=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return b(((t.x-i)*e.scale-e.x)*Or,(t.y*e.scale-e.y)*Or,ic(t.z,t.y))},e.at=j,e.au=R,e.av=Bc,e.aw=kf,e.ax=function(e){let t=1/0,i=1/0,r=-1/0,n=-1/0;for(const o of e)t=Math.min(t,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),n=Math.max(n,o.y);return{min:new xe(t,i),max:new xe(r,n)}},e.ay=Ae,e.az=u,e.b=function(e){return rt.API_FONTS_REGEX.test(e)},e.b$=function(e,t,i){i*=.5;var r=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l+n*s,e[1]=n*l-r*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e},e.b0=Vs,e.b1=my,e.b2=function(){ga.isLoading()||ga.isLoaded()||"deferred"!==fa()||ma()},e.b3=Ra,e.b4=yc,e.b5=Xx,e.b6=Ye,e.b7=Mf,e.b8=pd,e.b9=gc,e.bA=function(e,t){const{x:i,y:r}=e.point,n=qu(i,r,e.worldSize/e._pixelsPerMercatorPixel,0,0);return u(n,n,Zu(Ru(t)))},e.bB=r,e.bC=function(e){return e[0]=0,e[1]=0,e[2]=0,e},e.bD=function(e,t){return Math.hypot(t[0]-e[0],t[1]-e[1],t[2]-e[2])},e.bE=A,e.bF=D,e.bG=z,e.bH=Fm,e.bI=mm,e.bJ=Dm,e.bK=function(e,t,i,r,n){const o=5*t+2;e.float32[o+0]=i,e.float32[o+1]=r,e.float32[o+2]=n},e.bL=hy,e.bM=bp,e.bN=Jc,e.bO=Qf,e.bP=Id,e.bQ=l_,e.bR=Bd,e.bS=Vd,e.bT=Tm,e.bU=yg,e.bV=Lg,e.bW=$x,e.bX=Pe,e.bY=I,e.bZ=Z,e.b_=K,e.ba=is,e.bb=Os,e.bc=Eu,e.bd=el,e.be=bh,e.bf=Ty,e.bg=function(e,t){const i=Xu(t.zoom);if(0===i)return Ru(e);const r=Bu(e),n=Vu(r),o=Jl(r.getWest())*t.worldSize,a=Jl(r.getEast())*t.worldSize,s=Ql(r.getNorth())*t.worldSize,l=Ql(r.getSouth())*t.worldSize,u=[o,s,0],h=[a,s,0],d=[o,l,0],p=[a,l,0],f=c([],t.globeMatrix);return B(u,u,f),B(h,h,f),B(d,d,f),B(p,p,f),n[0]=zu(n[0],d,i),n[1]=zu(n[1],p,i),n[2]=zu(n[2],h,i),n[3]=zu(n[3],u,i),Wc.fromPoints(n)},e.bh=Hu,e.bi=c,e.bj=Nu,e.bk=zu,e.bl=rs,e.bm=Mu,e.bn=g,e.bo=h,e.bp=Ox,e.bq=cm,e.br=Dt,e.bs=function(e,t){const i=[];for(const r in e)r in t||i.push(r);return i},e.bt=Oe,e.bu=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.bv=Ce,e.bw=function(e){var t=new i(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.bx=l,e.by=m,e.bz=s,e.c=ot,e.c$=Bp,e.c0=J,e.c1=Je,e.c2=function(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e},e.c3=_,e.c4=function(e,t,i,r,n){var o,a=1/Math.tan(t/2);return e[0]=a/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,null!=n&&n!==1/0?(e[10]=(n+r)*(o=1/(r-n)),e[14]=2*n*r*o):(e[10]=-1,e[14]=-2*r),e},e.c5=function(e,t,i,r,n,o,a){var s=1/(t-i),l=1/(r-n),c=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*c,e[11]=0,e[12]=(t+i)*s,e[13]=(n+r)*l,e[14]=(a+o)*c,e[15]=1,e},e.c6=$l,e.c7=function(e,t,i){e[4*t+0]=i[0],e[4*t+1]=i[1],e[4*t+2]=i[2],e[4*t+3]=i[3]},e.c8=ul,e.c9=pl,e.cA=qy,e.cB=v,e.cC=Wy,e.cD=function(e){const t=Wy(e,!0);return r([],[t[0],t[1],t[4],t[5]])},e.cE=d,e.cF=Vc,e.cG=p,e.cH=function(e){const{x:t,y:i}=e.point,{lng:r,lat:n}=e._center;return qu(t,i,e.worldSize,r,n)},e.cI=T,e.cJ=Le,e.cK=bu,e.cL=zl,e.cM=function(e,t,i){let r=0;for(let n=0;n<2;++n){const i=0;e[n]>i&&(r+=(e[n]-i)*(e[n]-i)),t[n]<i&&(r+=(i-t[n])*(i-t[n]))}return r},e.cN=function(e){return e*e*e*e*e},e.cO=Kl,e.cP=45,e.cQ=fl,e.cR=function(e,t,i){const r=Math.sqrt(e*e+t*t+i*i),n=r>0?Math.acos(i/r)*be:0;let o=0!==e||0!==t?Math.atan2(-t,-e)*be+90:0;return o<0&&(o+=360),[r,o,n]},e.cS=b,e.cT=qe,e.cU=sc,e.cV=S,e.cW=Wc,e.cX=L,e.cY=function(e){return[Math.pow(e[0],1/2.2),Math.pow(e[1],1/2.2),Math.pow(e[2],1/2.2)]},e.cZ=u_,e.c_=function(e,t){return e.readFields(W_,{icons:[]},t)},e.ca=hl,e.cb=dl,e.cc=yl,e.cd=Gl,e.ce=ny,e.cf=function(){var e=new i(4);return i!=Float32Array&&(e[1]=0,e[2]=0),e[0]=1,e[3]=1,e},e.cg=function(e,t,i){var r=t[0],n=t[1],o=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=r*l+o*s,e[1]=n*l+a*s,e[2]=r*-s+o*l,e[3]=n*-s+a*l,e},e.ch=function(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]},e.ci=U,e.cj=function(e){return Math.hypot(e[0],e[1],e[2],e[3])},e.ck=ne,e.cl=N,e.cm=Cu,e.cn=Zc,e.co=Gy,e.cp=xu,e.cq=Fu,e.cr=function(e,t,i,r,n,o,a,s,l){if("globe"===l.name)return Fu(e,t,new xu(i,r,n),!1);const c=Dg({z:i,x:r,y:n},l);return new Wc([(o+c.x/c.scale)*t,t*(c.y/c.scale),a],[(o+c.x2/c.scale)*t,t*(c.y2/c.scale),s])},e.cs=function(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e[2]=Math.min(t[2],i[2]),e[3]=Math.min(t[3],i[3]),e},e.ct=function(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e[2]=Math.max(t[2],i[2]),e[3]=Math.max(t[3],i[3]),e},e.cu=function(e){const t=Math.round((e+45+360)%360/90)%4;return Te[t]},e.cv=rc,e.cw=G,e.cx=Dl,e.cy=function(e){const t=l(new Float64Array(16));u(t,e.pixelMatrix,e.globeMatrix);const i=[0,Nl,0],r=[0,Ul,0];return B(i,i,t),B(r,r,t),[i[0]>0&&i[0]<=e.width&&i[1]>0&&i[1]<=e.height&&!Ku(e,new Gl(e.center.lat,90)),r[0]>0&&r[0]<=e.width&&r[1]>0&&r[1]<=e.height&&!Ku(e,new Gl(e.center.lat,-90))]},e.cz=function(e,t){const{scale:i}=e.tileTransform,r=i*Or/(e.tileSize*Math.pow(2,t.zoom-e.tileID.overscaledZ+e.tileID.canonical.z));return function(e,t,i){var r=t[1],n=t[2],o=t[3],a=i[0],s=i[1];return e[0]=t[0]*a,e[1]=r*a,e[2]=n*s,e[3]=o*s,e}(new Float32Array(4),t.inverseAdjustmentMatrix,[r,r])},e.d=function(e){return rt.API_TILEJSON_REGEX.test(e)},e.d$=Ds,e.d0=ig,e.d1=tg,e.d2=Rt,e.d3=ha,e.d4=mt,e.d5=Yt,e.d6=Ue,e.d7=function(e){const t=e.indexOf(Ga);return t>=0?e.slice(0,t):e},e.d8=function(e){return e.indexOf(Ga)>=0},e.d9=function(e){const t=e.lastIndexOf(Ga);return t>=0?e.slice(t+1):""},e.dA=Gu,e.dB=et,e.dC=tt,e.dD=256,e.dE=function(e,t){const i=[0,0,0];return B(i,i,Hu(Ru(t.canonical))),B(i,i,e),i},e.dF=e=>({u_matrix:new yl(e),u_texsize:new dl(e),u_pixels_to_tile_units:new xl(e),u_device_pixel_ratio:new hl(e),u_width_scale:new hl(e),u_floor_width_scale:new hl(e),u_image:new ul(e),u_units_to_pixels:new dl(e),u_tile_units_to_pixels:new hl(e),u_alpha_discard_threshold:new hl(e),u_trim_offset:new dl(e),u_trim_fade_range:new dl(e),u_trim_color:new fl(e),u_emissive_strength:new hl(e),u_zbias_factor:new hl(e),u_tile_to_meter:new hl(e),u_ground_shadow_factor:new pl(e),u_pattern_transition:new hl(e)}),e.dG=e=>({u_matrix:new yl(e),u_pixels_to_tile_units:new xl(e),u_device_pixel_ratio:new hl(e),u_width_scale:new hl(e),u_floor_width_scale:new hl(e),u_units_to_pixels:new dl(e),u_dash_image:new ul(e),u_gradient_image:new ul(e),u_image_height:new hl(e),u_texsize:new dl(e),u_tile_units_to_pixels:new hl(e),u_alpha_discard_threshold:new hl(e),u_trim_offset:new dl(e),u_trim_fade_range:new dl(e),u_trim_color:new fl(e),u_emissive_strength:new hl(e),u_zbias_factor:new hl(e),u_tile_to_meter:new hl(e),u_ground_shadow_factor:new pl(e)}),e.dH=e=>({u_camera_to_center_distance:new hl(e),u_extrude_scale:new xl(e),u_device_pixel_ratio:new hl(e),u_matrix:new yl(e),u_inv_rot_matrix:new yl(e),u_merc_center:new dl(e),u_tile_id:new pl(e),u_zoom_transition:new hl(e),u_up_dir:new pl(e),u_emissive_strength:new hl(e)}),e.dI=Cs,e.dJ=Jf,e.dK=th,e.dL=(e,t,i,r,n,o)=>{const a=e.transform,s="globe"===a.projection.name;let l;if("map"===o.paint.get("circle-pitch-alignment"))if(s){const e=Gu(a.zoom,t.canonical)*a._pixelsPerMercatorPixel;l=Float32Array.from([e,0,0,e])}else l=a.calculatePixelsToTileUnitsMatrix(i);else l=new Float32Array([a.pixelsToGLUnits[0],0,0,a.pixelsToGLUnits[1]]);const c={u_camera_to_center_distance:e.transform.getCameraToCenterDistance(a.projection),u_matrix:e.translatePosMatrix(t.projMatrix,i,o.paint.get("circle-translate"),o.paint.get("circle-translate-anchor")),u_device_pixel_ratio:pt.devicePixelRatio,u_extrude_scale:l,u_inv_rot_matrix:eh,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:o.paint.get("circle-emissive-strength")};if(s){c.u_inv_rot_matrix=r,c.u_merc_center=n,c.u_tile_id=[t.canonical.x,t.canonical.y,1<<t.canonical.z],c.u_zoom_transition=Xu(a.zoom);const e=n[0]*Or,i=n[1]*Or;c.u_up_dir=a.projection.upVector(new xu(0,0,0),e,i)}return c},e.dM=zf,e.dN=Di,e.dO=(e,t,i,r,n,o,a,s,l,c)=>{const u=e.transform,h=u.pitch<15?Pf(.07,.7,Ae((14-u.zoom)/5,0,1)):.07,d="none"===i.paint.get("line-trim-color-use-theme").constantOr("default");return{u_matrix:Rf(e,t,i,r),u_texsize:t.imageAtlasTexture?t.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:u.calculatePixelsToTileUnitsMatrix(t),u_device_pixel_ratio:n,u_width_scale:o,u_floor_width_scale:a,u_image:0,u_tile_units_to_pixels:Of(t,u),u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:s,u_trim_fade_range:i.paint.get("line-trim-fade-range"),u_trim_color:i.paint.get("line-trim-color").toPremultipliedRenderColor(d?null:i.lut).toArray01(),u_emissive_strength:i.paint.get("line-emissive-strength"),u_zbias_factor:h,u_tile_to_meter:sc(t.tileID.canonical,0),u_ground_shadow_factor:l,u_pattern_transition:c}},e.dP=(e,t,i,r,n,o,a,s,l,c)=>{const u=e.transform,h=u.calculatePixelsToTileUnitsMatrix(t),d="none"===i.paint.get("line-trim-color-use-theme").constantOr("default"),p=u.pitch<15?Pf(.07,.7,Ae((14-u.zoom)/5,0,1)):.07;return{u_matrix:Rf(e,t,i,r),u_pixels_to_tile_units:h,u_device_pixel_ratio:o,u_width_scale:a,u_floor_width_scale:s,u_units_to_pixels:[1/u.pixelsToGLUnits[0],1/u.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:n,u_texsize:Df(i)&&t.lineAtlasTexture?t.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Of(t,e.transform),u_alpha_discard_threshold:0,u_trim_offset:l,u_trim_fade_range:i.paint.get("line-trim-fade-range"),u_trim_color:i.paint.get("line-trim-color").toPremultipliedRenderColor(d?null:i.lut).toArray01(),u_emissive_strength:i.paint.get("line-emissive-strength"),u_zbias_factor:p,u_tile_to_meter:sc(t.tileID.canonical,0),u_ground_shadow_factor:c}},e.dQ=Fe,e.dR=_h,e.dS=ic,e.dT=Su,e.dU=ap,e.dV=fp,e.dW=Xd,e.dX=450,e.dY=7,e.dZ=zy,e.d_=es,e.da=function(e){const t=[],i=e.id;return void 0===i&&t.push({message:"layers.".concat(i,': missing required property "id"')}),void 0===e.render&&t.push({message:"layers.".concat(i,': missing required method "render"')}),e.renderingMode&&"2d"!==e.renderingMode&&"3d"!==e.renderingMode&&t.push({message:"layers.".concat(i,': property "renderingMode" must be either "2d" or "3d"')}),t},e.db=function(e,t,i,r){return"custom"===e.type?new Hy(e,t):new F_[e.type](e,t,i,r)},e.dc=Ne,e.dd=function(e){const t=e.indexOf(Ga);return t>=0?e.slice(t+1):""},e.de=class extends Xx{constructor(e,t){super(e._vectorTileFeature,e._z,e._x,e._y,e.id),e.state&&(this.state=Object.assign({},e.state)),this.target=t.target,this.namespace=t.namespace,t.properties&&(this.properties=t.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=e.source,this.sourceLayer=e.sourceLayer,this.layer=e.layer)}toJSON(){const e=super.toJSON();return e.target=this.target,e.namespace=this.namespace,e}},e.df=pa,e.dg=zt,e.dh=function(e){return e({pluginStatus:ca,pluginURL:ua}),pa.on("pluginStateChange",e),e},e.di=ml,e.dj=class extends cl{constructor(e){super(e),this.current=_l}set(e,t,i){if(this.fetchUniformLocation(e,t))for(let r=0;r<9;r++)if(i[r]!==this.current[r]){this.current=i,this.gl.uniformMatrix3fv(this.location,!1,i);break}}},e.dk=Me,e.dl=function(e,t,i){const r=Xu(i.zoom),n=e.style.map._antialias,o=e.terrain&&e.terrain.exaggeration()>0;return 0===r&&!n&&!o},e.dm=function(e){const t=e.pixelsPerMeter,i=t/$l(1,e.center.lat),r=l(new Float64Array(16));return h(r,r,[e.point.x,e.point.y,0]),d(r,r,[i,i,t]),Float32Array.from(r)},e.dn=Bu,e.dp=function(e){const t=rc-5;e=Ae(e,-80.051129,t)/t*90;const i=Math.pow(Math.abs(Math.sin(Se(e))),3);return Math.round(i*(Vl.length-1))},e.dq=function(e,t,i,r){const n=t.getNorth(),o=t.getSouth(),s=t.getWest(),l=t.getEast(),c=1<<e.z,u=l-s,h=n-o,d=u/Bl,p=-h/Vl[i],f=[0,d,0,p,0,0,n,s,0];if(e.z>0){const e=180/r;a(f,f,[e/u+1,0,0,0,e/h+1,0,-.5*e/d,.5*e/p,1])}return f[2]=c,f[5]=e.x,f[8]=e.y,f},e.dr=Ru,e.ds=function(e,t,i){const r=l(new Float64Array(16)),n=(t/(1<<e)-.5)*Math.PI*2;return f(r,i.globeMatrix,n),Float32Array.from(r)},e.dt=class{isDataAvailableAtPoint(e){const t=this._source();if(this.isUsingMockSource()||!t||e.y<0||e.y>1)return!1;const i=t.getSource().maxzoom,r=1<<i,n=Math.floor(e.x),o=Math.floor((e.x-n)*r),a=Math.floor(e.y*r),s=this.findDEMTileFor(new wu(i,n,i,o,a));return!(!s||!s.dem)}getAtPointOrZero(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.getAtPoint(e,t)||0}getAtPoint(e,t){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.isUsingMockSource())return null;null==t&&(t=null);const r=this._source();if(!r)return t;if(e.y<0||e.y>1)return t;const n=r.getSource().maxzoom,o=1<<n,a=Math.floor(e.x),s=e.x-a,l=new wu(n,a,n,Math.floor(s*o),Math.floor(e.y*o)),c=this.findDEMTileFor(l);if(!c||!c.dem)return t;const u=c.dem,h=1<<c.tileID.canonical.z,d=(s*h-c.tileID.canonical.x)*u.dim,p=(e.y*h-c.tileID.canonical.y)*u.dim,f=Math.floor(d),m=Math.floor(p);return(i?this.exaggeration():1)*ci(ci(u.get(f,m),u.get(f,m+1),p-m),ci(u.get(f+1,m),u.get(f+1,m+1),p-m),d-f)}getAtTileOffset(e,t,i){const r=1<<e.canonical.z;return this.getAtPointOrZero(new lc(e.wrap+(e.canonical.x+t/Or)/r,(e.canonical.y+i/Or)/r))}getAtTileOffsetFunc(e,t,i,r){return n=>{const o=this.getAtTileOffset(e,n.x,n.y),a=r.upVector(e.canonical,n.x,n.y);return I(a,a,o*r.upVectorScale(e.canonical,t,i).metersToTile),a}}getForTilePoints(e,t,i,r){if(this.isUsingMockSource())return!1;const n=S_.create(this,e,r);return!!n&&(t.forEach(e=>{e[2]=this.exaggeration()*n.getElevationAt(e[0],e[1],i)}),!0)}getMinMaxForTile(e){if(this.isUsingMockSource())return null;const t=this.findDEMTileFor(e);if(!t||!t.dem)return null;const i=t.dem.tree,r=t.tileID,n=1<<e.canonical.z-r.canonical.z;let o=e.canonical.x/n-r.canonical.x,a=e.canonical.y/n-r.canonical.y,s=0;for(let l=0;l<e.canonical.z-r.canonical.z&&!i.leaves[s];l++){o*=2,a*=2;const e=2*Math.floor(a)+Math.floor(o);s=i.childOffsets[s]+e,o%=1,a%=1}return{min:this.exaggeration()*i.minimums[s],max:this.exaggeration()*i.maximums[s]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(e,t,i){throw new Error("Pure virtual method called.")}pointCoordinate(e){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(e){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const e=this.visibleDemTiles;if(0===e.length)return null;let t=!1,i=Number.MAX_VALUE,r=Number.MIN_VALUE;for(const n of e){const e=this.getMinMaxForTile(n.tileID);e&&(i=Math.min(i,e.min),r=Math.max(r,e.max),t=!0)}return t?{min:i,max:r}:null}},e.du=yh,e.dv=Iu,e.dw=function(e,t){return[Math.pow(e[0],2.2)*t,Math.pow(e[1],2.2)*t,Math.pow(e[2],2.2)*t]},e.dx=n,e.dy=function(e,t){var i=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=i,e[2]=0,e[3]=-i,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e},e.dz=V,e.e=rt,e.e$=Gx,e.e0=256,e.e1=Zu,e.e2=us,e.e3=f,e.e4=function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e},e.e5=Ms,e.e6=Es,e.e7=uo,e.e8=function(e,t,i,r,n){return Ae((e-t)/(i-t)*(n-r)+r,r,n)},e.e9=Q,e.eA=function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e[2]=t[2]/i[2],e},e.eB=H,e.eC=Hl,e.eD=P,e.eE=function(e,t,i,r){return e[0]=t,e[1]=i,e[2]=r,e},e.eF=function(e){let[t,i,r]=e;const n=Math.hypot(t,i,r),o=Math.atan2(t,r),a=.5*Math.PI-Math.acos(-i/n);return new Gl(Le(o),Le(a))},e.eG=q,e.eH=Yy,e.eI=function(e){const t=e.navigator?e.navigator.userAgent:null;return!!function(e){if(null==Ke){const t=e.navigator?e.navigator.userAgent:null;Ke=!!e.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Ke}(e)&&!(!t||!(t.match("Version/15.4")||t.match("Version/15.5")||t.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/)))},e.eJ=function(e,t){yt=e,_t=t},e.eK=Ku,e.eL=Yu,e.eM=function(e){const t=[0,0,0],i=l(new Float64Array(16));return u(i,e.pixelMatrix,e.globeMatrix),B(t,t,i),new xe(t[0],t[1])},e.eN=function(){const e=Dp;e&&(e.isPreloaded()&&1===e.numActive()?(e.release(Op),Dp=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},e.eO=function(){Bp().acquire(Op)},e.eP=fa,e.eQ=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(ca===sa.deferred||ca===sa.loading||ca===sa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");ua=pt.resolveURL(e),ca=sa.deferred,la=t,da(),i||ma()},e.eR=function(e){Hp=pt.resolveURL(e),Wp||(Wp=new zp(Bp(),new ei)),Wp.broadcast("setMeshoptUrl",Hp)},e.eS=Kp,e.eT=function(e){Up=pt.resolveURL(e),Wp||(Wp=new zp(Bp(),new ei)),Wp.broadcast("setDracoUrl",Up)},e.eU=Yp,e.eV=Pp,e.eW=function(e){const t=wt();if(!t)return;const i=t.delete(gt);e&&i.then(()=>e()).catch(e)},e.eX=Rp,e.eY=Go,e.eZ=mh,e.e_=eg,e.ea=function(e,t){var i=t[0],r=t[1],n=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=t[8],h=u*a-s*c,d=-u*o+s*l,p=c*o-a*l,f=i*h+r*d+n*p;return f?(e[0]=h*(f=1/f),e[1]=(-u*r+n*c)*f,e[2]=(s*r-n*a)*f,e[3]=d*f,e[4]=(u*i-n*l)*f,e[5]=(-s*i+n*o)*f,e[6]=p*f,e[7]=(-c*i+r*l)*f,e[8]=(a*i-r*o)*f,e):null},e.eb=O,e.ec=oc,e.ed=$y,e.ee=function(e,t){if(e===t){var i=t[1],r=t[2],n=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=i,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=o,e[11]=t[14],e[12]=n,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e},e.ef=x,e.eg=[1,1,1],e.eh=class{constructor(e,t,i,r){this.context=e,this.format=r,this.size=i,this.texture=e.gl.createTexture();const[n,o,a]=this.size,{gl:s}=e;s.bindTexture(s.TEXTURE_3D,this.texture),e.pixelStoreUnpackFlipY.set(!1),e.pixelStoreUnpack.set(1),e.pixelStoreUnpackPremultiplyAlpha.set(!1),s.texImage3D(s.TEXTURE_3D,0,this.format,n,o,a,0,My(this.format),Ey(this.format),t.data)}bind(e,t){const{context:i}=this,{gl:r}=i;r.bindTexture(r.TEXTURE_3D,this.texture),e!==this.minFilter&&(r.texParameteri(r.TEXTURE_3D,r.TEXTURE_MAG_FILTER,e),r.texParameteri(r.TEXTURE_3D,r.TEXTURE_MIN_FILTER,e),this.minFilter=e),t!==this.wrapS&&(r.texParameteri(r.TEXTURE_3D,r.TEXTURE_WRAP_S,t),r.texParameteri(r.TEXTURE_3D,r.TEXTURE_WRAP_T,t),this.wrapS=t)}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}},e.ei=S_,e.ej=function(e,t,r,n){var o=new i(4);return o[0]=e,o[1]=t,o[2]=r,o[3]=n,o},e.ek=W,e.el=function(e,t,i,r){var n=t[0],o=t[1],a=t[2],s=t[3];return e[0]=n+r*(i[0]-n),e[1]=o+r*(i[1]-o),e[2]=a+r*(i[2]-a),e[3]=s+r*(i[3]-s),e},e.em=y_,e.en=_s,e.eo=ks,e.ep=function(e,t,r,n,o,a,s,l,c,u,h,d,p,f,m,g){var y=new i(16);return y[0]=e,y[1]=t,y[2]=r,y[3]=n,y[4]=o,y[5]=a,y[6]=s,y[7]=l,y[8]=c,y[9]=u,y[10]=h,y[11]=d,y[12]=p,y[13]=f,y[14]=m,y[15]=g,y},e.eq=Zl,e.er=As,e.es=Is,e.et=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new xe(1/0,1/0),max:new xe(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=Rd(new xe(0,0),new xe(Or,Or),e),r=[];if(t&&!Pd(i,this._globalClipBounds))return r;for(const n of this._activeRegions){if(n.hiddenByOverlap)continue;if(!Pd(i,n))continue;const t=zd(n.min,n.max,e);r.push({min:t.min,max:t.max,sourceId:this._sourceIds[n.priority],footprint:n.footprint,footprintTileId:n.tileId,order:n.order,clipMask:n.clipMask,clipScope:n.clipScope})}return r}setSources(e){this._setSources(e.map(e=>({getSourceId:()=>e.cache.id,getFootprints:()=>{const t=[];for(const i of e.cache.getVisibleCoordinates()){const r=e.cache.getTile(i).buckets[e.layer];r&&r.updateFootprints(i.toUnwrapped(),t)}return t},getOrder:()=>e.order,getClipMask:()=>e.clipMask,getClipScope:()=>e.clipScope})))}_addSource(e){const t=e.getFootprints();if(0===t.length)return;const i=e.getOrder(),r=e.getClipMask(),n=e.getClipScope();for(const o of t){if(!o.footprint)continue;const e=Rd(o.footprint.min,o.footprint.max,o.id);this._activeRegions.push({min:e.min,max:e.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:o.id,footprint:o.footprint,order:i,clipMask:r,clipScope:n})}this._sourceIds.push(e.getSourceId())}_computeReplacement(){this._activeRegions.sort((e,t)=>e.priority-t.priority||Ad(e.min,t.min)||Ad(e.max,t.max)||e.order-t.order||e.clipMask-t.clipMask||function(e,t){const i=(e,t)=>e+t;return e.length-t.length||e.reduce(i,"").localeCompare(t.reduce(i,""))}(e.clipScope,t.clipScope));let e=this._activeRegions.length!==this._prevRegions.length;if(!e){let t=0;for(;!e&&t!==this._activeRegions.length;){const i=this._activeRegions[t],r=this._prevRegions[t];e=i.priority!==r.priority||!kd(i,r)||i.order!==r.order||i.clipMask!==r.clipMask||!Ce(i.clipScope,r.clipScope),++t}}if(e){++this._updateTime;for(const t of this._activeRegions)t.order!==Ed&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,t.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,t.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,t.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,t.max.y));const e=e=>{const t=this._activeRegions;if(e>=t.length)return e;const i=t[e].priority;for(;e<t.length&&t[e].priority===i;)++e;return e};if(this._sourceIds.length>1){let t=0,i=e(t);for(;t!==i;){let r=t;const n=t;for(;r!==i;){const e=this._activeRegions[r];e.hiddenByOverlap=!1;for(let t=0;t<n;t++){const i=this._activeRegions[t];if(!i.hiddenByOverlap&&e.order===Ed&&Pd(e,i)&&(e.hiddenByOverlap=Fd(e.footprint,e.tileId,i.footprint,i.tileId),e.hiddenByOverlap))break}++r}t=i,i=e(t)}}}}_setSources(e){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let t=e.length-1;t>=0;t--)this._addSource(e[t]);this._computeReplacement()}},e.eu=Ed,e.ev=class{constructor(e){this._createGrid(e),this._createPoles(e)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const e of this._poleSegments)e.destroy();for(const e of this._gridSegments)e.withSkirts.destroy(),e.withoutSkirts.destroy()}_fillGridMeshWithLods(e,t){const i=new is,r=new bs,n=[],o=e+1+2,a=t[0]+1,s=t[0]+1+(1+t.length),l=(e,t,i)=>{let r=e===o-1?e-2:0===e?e:e-1;return r+=i?24575:0,[r,t]};for(let c=0;c<o;++c)i.emplaceBack(...l(c,0,!0));for(let c=0;c<a;++c)for(let e=0;e<o;++e)i.emplaceBack(...l(e,c,(0===e||e===o-1)&&!0));for(let c=0;c<t.length;++c){const e=t[c];for(let t=0;t<o;++t)i.emplaceBack(...l(t,e,!0))}for(let c=0;c<t.length;++c){const e=r.length,a=t[c]+1+2,l=new bs;for(let i=0;i<a-1;i++){const e=i===a-2,n=e?o*(s-t.length+c-i):o;for(let t=0;t<o-1;t++){const a=i*o+t;0===i||e||0===t||t===o-2?(l.emplaceBack(a+1,a,a+n),l.emplaceBack(a+n,a+n+1,a+1)):(r.emplaceBack(a+1,a,a+n),r.emplaceBack(a+n,a+n+1,a+1))}}const u=el.simpleSegment(0,e,i.length,r.length-e);for(let t=0;t<l.uint16.length;t+=3)r.emplaceBack(l.uint16[t],l.uint16[t+1],l.uint16[t+2]);const h=el.simpleSegment(0,e,i.length,r.length-e);n.push({withoutSkirts:u,withSkirts:h})}return{vertices:i,indices:r,segments:n}}_createGrid(e){const t=this._fillGridMeshWithLods(Bl,Vl);this._gridSegments=t.segments,this._gridBuffer=e.createVertexBuffer(t.vertices,Eu.members),this._gridIndexBuffer=e.createIndexBuffer(t.indices,!0)}_createPoles(e){const t=new bs;for(let a=0;a<=Bl;a++)t.emplaceBack(0,a+1,a+2);this._poleIndexBuffer=e.createIndexBuffer(t,!0);const i=new Ms,r=new Ms,n=new Ms,o=new Ms;this._poleSegments=[];for(let a=0,s=0;a<zl;a++){const e=360/(1<<a);i.emplaceBack(0,-Rl,0,.5,0),r.emplaceBack(0,-Rl,0,.5,1),n.emplaceBack(0,-Rl,0,.5,.5),o.emplaceBack(0,-Rl,0,.5,.5);for(let t=0;t<=Bl;t++){let a=t/Bl,s=0;const l=ci(0,e,a),[c,u,h]=jl(Qu,$u,l,Rl);i.emplaceBack(c,u,h,a,s),r.emplaceBack(c,u,h,a,1-s);const d=Se(l);a=.5+.5*Math.sin(d),s=.5+.5*Math.cos(d),n.emplaceBack(c,u,h,a,s),o.emplaceBack(c,u,h,a,1-s)}this._poleSegments.push(el.simpleSegment(s,0,66,64)),s+=66}this._poleNorthVertexBuffer=e.createVertexBuffer(i,Tu,!1),this._poleSouthVertexBuffer=e.createVertexBuffer(r,Tu,!1),this._texturedPoleNorthVertexBuffer=e.createVertexBuffer(n,Tu,!1),this._texturedPoleSouthVertexBuffer=e.createVertexBuffer(o,Tu,!1)}getGridBuffers(e,t){return[this._gridBuffer,this._gridIndexBuffer,t?this._gridSegments[e].withSkirts:this._gridSegments[e].withoutSkirts]}getPoleBuffers(e,t){return[t?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,t?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[e]]}},e.ew=Ee,e.ex=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},e.ey=Ie,e.ez=ac,e.f=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode(Number("0x"+t))))},e.f0=Yx,e.f1=bf,e.f2=Ac,e.f3="hd_road_elevation",e.f4=Xc,e.f5=Ve,e.f6=td,e.f7=Ym,e.f8=qm,e.f9=function(e,t,i,r,n,o,a){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,l=arguments.length>8?arguments[8]:void 0,c=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0;e.createArrays(),e.tilePixelRatio=Or/(512*e.overscaling),e.compareText={},e.iconsNeedLinear=!1;const h=e.layers[0].layout,d=e.layers[0]._unevaluatedLayout._values,p={};p.scaleFactor=s,p.textSizeScaleRange=h.get("text-size-scale-range"),p.iconSizeScaleRange=h.get("icon-size-scale-range");const[f,m]=p.textSizeScaleRange,[g,y]=p.iconSizeScaleRange;p.textScaleFactor=Ae(p.scaleFactor,f,m),p.iconScaleFactor=Ae(p.scaleFactor,g,y);const _=d["text-size"],v=d["icon-size"];if("composite"===e.textSizeData.kind){const{minZoom:t,maxZoom:i}=e.textSizeData;p.compositeTextSizes=[_.possiblyEvaluate(new ya(t,{worldview:u}),o),_.possiblyEvaluate(new ya(i,{worldview:u}),o)]}if("composite"===e.iconSizeData.kind){const{minZoom:t,maxZoom:i}=e.iconSizeData;p.compositeIconSizes=[v.possiblyEvaluate(new ya(t,{worldview:u}),o),v.possiblyEvaluate(new ya(i,{worldview:u}),o)]}p.layoutTextSize=_.possiblyEvaluate(new ya(a+1,{worldview:u}),o),p.layoutIconSize=v.possiblyEvaluate(new ya(a+1,{worldview:u}),o),p.textMaxSize=_.possiblyEvaluate(new ya(18,{worldview:u}),o);const x=h.get("symbol-placement"),C="map"===h.get("text-rotation-alignment")&&"point"!==x,w=h.get("text-size");let b=!1;const S=[];for(const L of e.features){const a=h.get("text-font").evaluate(L,{},o).join(","),s=w.evaluate(L,{},o)*p.textScaleFactor,f=p.layoutTextSize.evaluate(L,{},o)*p.textScaleFactor,m=p.layoutIconSize.evaluate(L,{},o)*p.iconScaleFactor,g={horizontal:{},vertical:void 0},y=L.text;let _,v=[0,0];if(y){const r=y.toString(),c=h.get("text-letter-spacing").evaluate(L,{},o)*Qf,u=h.get("text-line-height").evaluate(L,{},o)*Qf,d=$o(r)?c:0,p=h.get("text-anchor").evaluate(L,{},o),m=h.get("text-variable-anchor");if(!m){const e=h.get("text-radial-offset").evaluate(L,{},o);if(e)v=yg(p,[e*Qf,mg]);else{const e=h.get("text-offset").evaluate(L,{},o);v=[e[0]*Qf,e[1]*Qf]}}let _=C?"center":h.get("text-justify").evaluate(L,{},o);const w="point"===x,b=w?h.get("text-max-width").evaluate(L,{},o)*Qf:1/0,S=o=>{e.allowVerticalPlacement&&Qo(r)&&(g.vertical=_m(y,t,i,n,a,b,u,p,o,d,v,mm.vertical,!0,f,s,l))};if(!C&&m){const e="auto"===_?m.map(e=>Lg(e)):[_];let r=!1;for(let o=0;o<e.length;o++){const c=e[o];if(!g.horizontal[c])if(r)g.horizontal[c]=g.horizontal[0];else{const e=_m(y,t,i,n,a,b,u,"center",c,d,v,mm.horizontal,!1,f,s,l);e&&(g.horizontal[c]=e,r=1===e.positionedLines.length)}}S("left")}else{if("auto"===_&&(_=Lg(p)),w||h.get("text-writing-mode").indexOf("horizontal")>=0||!Qo(r)){const e=_m(y,t,i,n,a,b,u,p,_,d,v,mm.horizontal,!1,f,s,l);e&&(g.horizontal[_]=e)}S(w?"left":_)}}let T,M,E,I,A,k,P=!1;const O=h.get("icon-text-fit").evaluate(L,{},o);if(L.icon&&L.icon.hasPrimary()){const t=xg(L.icon,e.iconSizeData,d["icon-size"],o,e.zoom,L,l,p.iconScaleFactor,u);T=t.iconPrimary,E=t.iconSecondary;const i=T.toString();if(M=r.get(i),M&&(A=h.get("icon-offset").evaluate(L,{},o),k=h.get("icon-anchor").evaluate(L,{},o),_=Im(n.get(i),E?n.get(E.toString()):void 0,A,k),P=M.sdf,void 0===e.sdfIcons?e.sdfIcons=M.sdf:e.sdfIcons!==M.sdf&&Ze("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(M.pixelRatio!==e.pixelRatio||0!==h.get("icon-rotate").constantOr(1))&&(e.iconsNeedLinear=!0)),E){const e=E.toString();I=r.get(e)}}b=b||!(!L.icon||!L.icon.hasSecondary());const R=kg(g.horizontal)||g.vertical;e.iconsInText||(e.iconsInText=!!R&&R.iconsInText);const z=f*p.textScaleFactor/Qf,{defaultShapedIcon:D,verticallyShapedIcon:F}=Tg(e,_,h,L,o,g,z,A,O);"none"!==O&&_&&(km(_)||Pm(_))&&(_g(0,M,T,_,D,O,c,r,n),_g(0,I,E,_,D,O,c,r,n),F&&(_g(0,M,T,_,F,O,c,r,n),_g(0,I,E,_,F,O,c,r,n))),_=D,S.push({feature:L,shapedTextOrientations:g,shapedText:R,shapedIcon:_,iconPrimary:T,iconSecondary:E,iconOffset:A,iconAnchor:k,verticallyShapedIcon:F,layoutTextSize:f,layoutIconSize:m,textOffset:v,isSDFIcon:P,iconTextFit:O})}return{featureData:S,sizes:p,hasAnySecondaryIcon:b,textAlongLine:C,symbolPlacement:x}},e.fa=Km,e.fb=function(e,t,i,r,n,o,a,s,l,c){const{featureData:u,hasAnySecondaryIcon:h,sizes:d,textAlongLine:p,symbolPlacement:f}=t;for(const m of u){const{shapedIcon:t,verticallyShapedIcon:i,feature:o,shapedTextOrientations:u,shapedText:g,layoutTextSize:y,textOffset:_,isSDFIcon:v,iconPrimary:x,iconSecondary:C,iconTextFit:w,iconOffset:b}=m;wg(t,c.iconPositions,x,C),wg(i,c.iconPositions,x,C),bg(u,c.iconPositions),Cg(x,C,c.iconPositions),(g||t)&&Mg(e,o,u,t,i,l,d,y,0,_,v,r,n,a,s,h,w,b,p,f)}i&&e.generateCollisionDebugBuffers(o,e.collisionBoxArray,d.textScaleFactor)},e.fc=Ic,e.fd=Hv,e.fe=ve,e.ff=Ec,e.fg=lm,e.fh=fe,e.fi=function(e){let t=0;if(new Uint32Array(e,0,1)[0]!==af){const i=new Uint32Array(e,0,7),[,,r,n,o,a]=i;t=i.byteLength+n+o+a+o,(r!==e.byteLength||t>=e.byteLength)&&Ze("Invalid b3dm header information.")}return df(e,t)},e.fj=function(e,t){const i=Hx(e);for(const r of i){for(const e of r.meshes)Zx(e);r.lights&&(r.lightMeshIndex=r.meshes.length,r.meshes.push(Wx(r.lights,t)))}return i},e.fk=k_,e.fl=Xe,e.fm=kp,e.fn=ga,e.fo=sa,e.fp=function(e){bt(),null!=xt&&xt.then(t=>{t.keys().then(i=>{for(let r=0;r<i.length-e;r++)t.delete(i[r]).catch(e=>Ze(e.message))}).catch(e=>Ze(e.message))}).catch(e=>Ze(e.message))},e.g=function(e,t){return zt(Re(e,{method:"GET"}),t)},e.h=Re,e.i=function(e){return rt.API_STYLE_REGEX.test(e)&&!ot(e)},e.j=function(e){return 0===e.indexOf("mapbox:")},e.k=nt,e.l=Lt,e.m=function(e){return decodeURIComponent(atob(e).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))},e.n=function(e,t){return zt(Re(e,{type:"json"}),t)},e.o=Ut,e.p=function(e,t){return zt(Re(e,{method:"POST"}),t)},e.q=pt,e.r=gh,e.s=function(e){try{const t=self[e];return t.setItem("_mapbox_test_",1),t.removeItem("_mapbox_test_"),!0}catch(e){return!1}},e.t=dt,e.u=function(){return function e(t){return t?(t^Math.random()*(16>>t/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,e)}()},e.v=function(e){return!!e&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)},e.w=Ze,e.x=function(){return Fp||(Fp=new Rp),Fp},e.y=kv,e.z=Jt}),a(["./shared"],function(e){function t(e){const t=e?e.url.toString():void 0;return t?performance.getEntriesByName(t):[]}function i(e){if("number"==typeof e||"boolean"==typeof e||"string"==typeof e||null==e)return JSON.stringify(e);if(Array.isArray(e)){let t="[";for(const r of e)t+="".concat(i(r),",");return"".concat(t,"]")}let t="{";for(const r of Object.keys(e).sort())t+="".concat(r,":").concat(i(e[r]),",");return"".concat(t,"}")}function r(t){let r="";for(const n of e.bu)r+="/".concat(i(t[n]));return r}class n{constructor(e){this.keyCache={},this._layers={},this._layerConfigs={},e&&this.replace(e)}replace(e,t){this._layerConfigs={},this._layers={},this.update(e,[],t)}update(t,n,o){this._options=o;for(const i of t)this._layerConfigs[i.id]=i,(this._layers[i.id]=e.db(i,this.scope,null,this._options)).compileFilter(o),this.keyCache[i.id]&&delete this.keyCache[i.id];for(const e of n)delete this.keyCache[e],delete this._layerConfigs[e],delete this._layers[e];this.familiesBySource={};const a=function(e,t){const n={};for(let a=0;a<e.length;a++){const o=e[a];let s=t&&t[o.id];s||("symbol"===o.type?s=o.id:(s=r(o),"line"===o.type&&o.paint&&function e(t){return"string"==typeof t&&"line-progress"===t||(Array.isArray(t)?t.some(e):!(!t||"object"!=typeof t)&&Object.values(t).some(e))}(o.paint["line-width"])&&(s+="/".concat(i(o.paint["line-width"]))))),t&&(t[o.id]=s);let l=n[s];l||(l=n[s]=[]),l.push(o)}const o=[];for(const i in n)o.push(n[i]);return o}(Object.values(this._layerConfigs),this.keyCache);for(const e of a){const t=e.map(e=>this._layers[e.id]),i=t[0];if("none"===i.visibility)continue;const r=i.source||"";let n=this.familiesBySource[r];n||(n=this.familiesBySource[r]={});const o=i.sourceLayer||"_geojsonTileLayer";let a=n[o];a||(a=n[o]=[]),a.push(t)}}}const o=1*e.e_;class a{constructor(t){const i={},r=[];for(const e in t){const n=t[e],a=i[e]={};for(const e in n.glyphs){const t=n.glyphs[+e];if(!t||0===t.bitmap.width||0===t.bitmap.height)continue;const i=t.metrics.localGlyph?o:1,s={x:0,y:0,w:t.bitmap.width+2*i,h:t.bitmap.height+2*i};r.push(s),a[e]=s}}const{w:n,h:a}=e.H(r),s=new e.eZ({width:n||1,height:a||1});for(const l in t){const r=t[l];for(const t in r.glyphs){const n=r.glyphs[+t];if(!n||0===n.bitmap.width||0===n.bitmap.height)continue;const a=i[l][t],c=n.metrics.localGlyph?o:1;e.eZ.copy(n.bitmap,s,{x:0,y:0},{x:a.x+c,y:a.y+c},n.bitmap)}}this.image=s,this.positions=i}}e.eY(a,"GlyphAtlas");class s{constructor(t){this.tileID=new e.aM(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.lut=t.lut,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.scope=t.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=t.showCollisionBoxes,this.collectResourceTiming=!!t.request&&t.request.collectResourceTiming,this.promoteId=t.promoteId,this.isSymbolTile=t.isSymbolTile,this.tileTransform=e.aW(t.tileID.canonical,t.projection),this.projection=t.projection,this.worldview=t.worldview,this.localizableLayerIds=t.localizableLayerIds,this.brightness=t.brightness,this.extraShadowCaster=!!t.extraShadowCaster,this.tessellationStep=t.tessellationStep,this.scaleFactor=t.scaleFactor,this.worldview=t.worldview}parse(t,i,r,n,o,s){this.status="parsing",this.data=t,this.collisionBoxArray=new e.b0;const c=new e.e$(Object.keys(t.layers).sort()),u=new e.f0(this.tileID,this.promoteId);u.bucketLayerIDs=[];const h={},d=new e.f1(256,256),p={featureIndex:u,iconDependencies:new Map,patternDependencies:new Map,glyphDependencies:{},lineAtlas:d,availableImages:r,brightness:this.brightness,scaleFactor:this.scaleFactor,elevationFeatures:void 0},f=[],m=i.familiesBySource[this.source];for(const a in m){const i=t.layers[a];if(!i)continue;let o=!1,s=!1,d=!1;for(const e of m[a])"symbol"===e[0].type?o=!0:s=!0,e[0].is3D()&&"model"!==e[0].type&&(d=!0);if(this.extraShadowCaster&&!d)continue;if(!0===this.isSymbolTile&&!o)continue;if(!1===this.isSymbolTile&&!s)continue;1===i.version&&e.w('Vector tile source "'.concat(this.source,'" layer "').concat(a,'" does not use vector tile spec v2 and therefore may have some rendering errors.'));const g=c.encode(a),y=[];let _=!1;for(let t=0,r=0;t<i.length;t++){const n=i.feature(t),o=u.getId(n,a);if(this.localizableLayerIds&&this.localizableLayerIds.has(a)){const e=n.properties?n.properties.worldview:null;if(this.worldview&&"string"==typeof e)if("all"===e)n.properties.$localized=!0;else{if(!e.split(",").includes(this.worldview))continue;n.properties.$localized=!0,n.properties.worldview=this.worldview}}!_&&n.properties&&n.properties.hasOwnProperty(e.f2)&&(_=!0),y.push({feature:n,id:o,index:r,sourceLayerIndex:g}),r++}_&&!p.elevationFeatures&&t.layers.hasOwnProperty(e.f3)&&(p.elevationFeatures=e.f4.parseFrom(t.layers[e.f3],this.canonical));for(const t of m[a]){const i=t[0];if(this.extraShadowCaster&&(!i.is3D()||"model"===i.type))continue;if(void 0!==this.isSymbolTile&&"symbol"===i.type!==this.isSymbolTile)continue;if(i.minzoom&&this.zoom<Math.floor(i.minzoom))continue;if(i.maxzoom&&this.zoom>=i.maxzoom)continue;if("none"===i.visibility)continue;l(t,this.zoom,p.brightness,r,this.worldview);const o=h[i.id]=i.createBucket({index:u.bucketLayerIDs.length,layers:t,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:g,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep,styleDefinedModelURLs:n,worldview:this.worldview});u.bucketLayerIDs.push(t.map(t=>e.C(t.id,t.scope)));let a=o.prepare?o.prepare():null;null!=a?(a=a.then(()=>o.populate(y,p,this.tileID.canonical,this.tileTransform)),f.push(a)):o.populate(y,p,this.tileID.canonical,this.tileTransform)}}const g=()=>{let i,n,f,m,g,y;d.trim();const _={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},v=()=>{if(i)return this.status="done",s(i);if(this.extraShadowCaster)this.status="done",s(null,{buckets:Object.values(h).filter(e=>!e.isEmpty()),featureIndex:u,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:p.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(n&&f&&m){const t=new a(n),i=new Map;for(const[r,n]of f.entries()){const{imagePosition:t}=e.f7(r,n,e.f8);i.set(r,t)}const s={};for(const o in h){const a=h[o];a instanceof e.b1&&(l(a.layers,this.zoom,p.brightness,r,this.worldview),s[o]=e.f9(a,n,t.positions,f,i,this.tileID.canonical,this.tileZoom,this.scaleFactor,this.pixelRatio,g,this.worldview))}const c={iconsPending:!0,patternsPending:!0};this.rasterizeIfNeeded(o,f,g,()=>{c.iconsPending=!1,x(s,t,c)}),this.rasterizeIfNeeded(o,m,y,()=>{c.patternsPending=!1,x(s,t,c)})}},x=(t,i,n,o)=>{if(n.iconsPending||n.patternsPending)return;const a=new e.fa(f,m,this.lut);for(const s in h){const i=h[s];if(s in t)e.fb(i,t[s],this.showCollisionBoxes,r,this.tileID.canonical,this.tileZoom,this.projection,this.brightness,f,a);else if(i.hasPattern&&(i instanceof e.b7||i instanceof e.b8||i instanceof e.dU)){l(i.layers,this.zoom,p.brightness,r,this.worldview);const e=Object.fromEntries(a.patternPositions);i.addFeatures(p,this.tileID.canonical,e,r,this.tileTransform,this.brightness)}}this.status="done",s(null,{buckets:Object.values(h).filter(e=>!e.isEmpty()),featureIndex:u,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:i.image,lineAtlas:d,imageAtlas:a,brightness:p.brightness})};if(!this.extraShadowCaster){const t=e.f5(p.glyphDependencies,e=>Object.keys(e).map(Number));Object.keys(t).length?o.send("getGlyphs",{uid:this.uid,stacks:t,scope:this.scope},(e,t)=>{i||(i=e,n=t,v())},void 0,!1,_):n={};const r=Array.from(p.iconDependencies.keys()).map(t=>e.I.parse(t));r.length?o.send("getImages",{images:r,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(e,t)=>{i||(i=e,f=new Map,g=this.updateImageMapAndGetImageTaskQueue(f,t,p.iconDependencies),v())},void 0,!1,_):(f=new Map,g=new Map);const a=Array.from(p.patternDependencies.keys()).map(t=>e.I.parse(t));a.length?o.send("getImages",{images:a,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(e,t)=>{i||(i=e,m=new Map,y=this.updateImageMapAndGetImageTaskQueue(m,t,p.patternDependencies),v())},void 0,!1,_):(m=new Map,y=new Map)}if(p.elevationFeatures&&p.elevationFeatures.length>0){const i=[];for(const t of Object.values(h))if(t instanceof e.b8){const e=t.getUnevaluatedPortalGraph();e&&i.push(e)}const r=e.f6.evaluate(i);for(const n of Object.values(h))if(n instanceof e.b8){const e=t.layers[c.decode(n.sourceLayerIndex)];n.setEvaluatedPortalGraph(r,e,this.tileID.canonical,p.availableImages,p.brightness)}}v()};f.length>0?Promise.allSettled(f).then(g).catch(s):g()}rasterizeIfNeeded(e,t,i,r){Array.from(t.values()).some(e=>e.usvg)?this.rasterize(e,t,i,r):r()}updateImageMapAndGetImageTaskQueue(e,t,i){const r=new Map;for(const n of t.keys()){const o=i.get(n)||[];for(const i of o){const n=i.toString(),o=t.get(i.id.toString());o.usvg?r.has(n)||(r.set(n,i),e.set(n,Object.assign({},o))):e.set(n,o)}}return r}rasterize(e,t,i,r){this.rasterizeTask=e.send("rasterizeImages",{scope:this.scope,tasks:i},(e,i)=>{if(!e)for(const[r,n]of i.entries()){const e=Object.assign(t.get(r),{data:n});t.set(r,e)}r()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function l(t,i,r,n,o){const a=new e.aa(i,{brightness:r,worldview:o});for(const e of t)e.recalculate(a,n)}class c extends e.E{constructor(t,i,r,n,o,a,s){super(),this.actor=t,this.layerIndex=i,this.availableImages=r,this.availableModels=n,this.loadVectorData=a||e.aJ,this.loading={},this.loaded={},this.deduped=new e.aI(t.scheduler),this.isSpriteLoaded=o,this.scheduler=t.scheduler,this.brightness=s}loadTile(i,r){const n=i.uid,o=i&&i.request,a=o&&o.collectResourceTiming,l=this.loading[n]=new s(i);l.abort=this.loadVectorData(i,(s,c)=>{const u=!this.loading[n];if(delete this.loading[n],l.cancelRasterize(),u||s||!c)return l.status="done",u||(this.loaded[n]=l),r(s);const h=c.rawData,d={};c.expires&&(d.expires=c.expires),c.cacheControl&&(d.cacheControl=c.cacheControl),l.vectorTile=c.vectorTile||new e.fc.VectorTile(new e.bq(h));const p=()=>{l.parse(l.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,(i,n)=>{if(i||!n)return r(i);const s={};if(a){const e=t(o);e.length>0&&(s.resourceTiming=JSON.parse(JSON.stringify(e)))}r(null,e.h({rawTileData:h.slice(0)},n,d,s))})};this.isSpriteLoaded?p():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(p,{type:"parseTile",isSymbolTile:i.isSymbolTile,zoom:i.tileZoom}):p()}),this.loaded=this.loaded||{},this.loaded[n]=l})}reloadTile(t,i){const r=this.loaded,n=t.uid;if(r&&r[n]){const o=r[n];o.scaleFactor=t.scaleFactor,o.showCollisionBoxes=t.showCollisionBoxes,o.projection=t.projection,o.brightness=t.brightness,o.tileTransform=e.aW(t.tileID.canonical,t.projection),o.extraShadowCaster=t.extraShadowCaster,o.lut=t.lut,o.worldview=t.worldview;const a=(e,t)=>{const r=o.reloadCallback;r&&(delete o.reloadCallback,o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,r)),i(e,t)};"parsing"===o.status?o.reloadCallback=a:"done"===o.status&&(o.vectorTile?o.parse(o.vectorTile,this.layerIndex,this.availableImages,this.availableModels,this.actor,a):a())}else i(null,void 0)}abortTile(e,t){const i=e.uid,r=this.loading[i];r&&(r.abort&&r.abort(),delete this.loading[i]),t()}removeTile(e,t){const i=this.loaded,r=e.uid;i&&i[r]&&delete i[r],t()}}class u{loadTile(t,i){const{uid:r,encoding:n,rawImageData:o,padding:a}=t,s=ImageBitmap&&o instanceof ImageBitmap?this.getImageData(o,a):o;i(null,new e.fd(r,s,n,a<1))}reloadTile(e,t){t(null,null)}abortTile(e,t){t()}removeTile(e,t){t()}getImageData(e,t){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(e.width,e.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=e.width,this.offscreenCanvas.height=e.height,this.offscreenCanvasContext.drawImage(e,0,0,e.width,e.height);const i=this.offscreenCanvasContext.getImageData(-t,-t,e.width+2*t,e.height+2*t);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),i}}e.bp.setPbf(e.bq);class h{constructor(t){this._mrt=new e.bp(t.partial?30:1/0),this._isHeaderLoaded=!1,this.uid=t.uid,this.tileID=t.tileID,this.source=t.source}parse(t,i){const r=this._mrt;this.status="parsing",this._entireBuffer=t;try{r.parseHeader(t),this._isHeaderLoaded=!0;const n=[];for(const i in r.layers){const o=r.getLayer(i),a=o.getDataRange(o.getBandList()),s=r.createDecodingTask(a),l=t.slice(a.firstByte,a.lastByte+1),c=e.bp.performDecoding(l,s).then(e=>s.complete(null,e)).catch(e=>s.complete(e,null));n.push(c)}Promise.allSettled(n).then(()=>i(null,r)).catch(e=>i(e))}catch(e){i(e)}}}class d{constructor(e){this.actor=e,this.loading={},this.loaded={}}loadTile(t,i){const r=t.uid,n=t.request,o=this.loading[r]=new h(t),{cancel:a}=e.br(n,(e,t,n,a)=>{const s=!this.loading[r];if(delete this.loading[r],s||e||!t)return o.status="done",s||(this.loaded[r]=o),i(e);o.parse(t,(e,t)=>{if(e||!t)return i(e);i(null,t,n,a)}),this.loaded[r]=o});o.abort=a}reloadTile(e,t){t(null,void 0)}abortTile(e,t){const i=e.uid,r=this.loading[i];r&&(r.abort&&r.abort(),delete this.loading[i]),t()}removeTile(e,t){const i=e.uid;this.loaded[i]&&delete this.loaded[i],t()}decodeRasterArray(t,i){e.bp.performDecoding(t.buffer,t.task).then(e=>i(null,e)).catch(e=>i(e))}}const p=e.fc.VectorTileFeature.prototype.toGeoJSON;class f{constructor(t){this._feature=t,this.extent=e.aj,this.type=t.type,this.properties=t.tags,"id"in t&&!isNaN(t.id)&&(this.id=parseInt(t.id,10))}loadGeometry(){if(1===this._feature.type){const t=[];for(const i of this._feature.geometry)t.push([new e.P(i[0],i[1])]);return t}{const t=[];for(const i of this._feature.geometry){const r=[];for(const t of i)r.push(new e.P(t[0],t[1]));t.push(r)}return t}}toGeoJSON(e,t,i){return p.call(this,e,t,i)}}class m{constructor(t){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.aj,this.length=t.length,this._features=t}feature(e){return new f(this._features[e])}}class g{constructor(t,i){this.name=t,this.extent=e.aj,this.length=i.length,this._features=i}feature(e){return new f(this._features[e])}}class y extends m{constructor(e){super([]),this.layers={};for(const t in e)this.layers[t]=new g(t,e[t])}}const _=64/4096,v=128;class x{constructor(){this.features=new Map}clear(){this.features.clear()}load(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;for(const i of e){const e=i.id;if(null==e)continue;let r=this.features.get(e);r&&this.updateCache(r,t),i.geometry?(r=w(i),this.updateCache(r,t),this.features.set(e,r)):this.features.delete(e),this.updateCache(r,t)}}updateCache(e,t){for(const{canonical:i,uid:r}of Object.values(t)){const{z:n,x:o,y:a}=i;C(e,Math.pow(2,n),o,a)&&delete t[r]}}getTile(e,t,i){const r=Math.pow(2,e),n=[];for(const o of this.features.values())C(o,r,t,i)&&n.push(T(o,r,t,i));return{features:n}}getFeatures(){return[...this.features.values()]}}function C(e,t,i,r){let{minX:n,minY:o,maxX:a,maxY:s}=e;return n<(i+1+_)/t&&o<(r+1+_)/t&&a>(i-_)/t&&s>(r-_)/t}function w(e){const{id:t,geometry:i,properties:r}=e;if(!i)return;if("GeometryCollection"===i.type)throw new Error("GeometryCollection not supported in dynamic mode.");const{type:n,coordinates:o}=i,a={id:t,type:1,geometry:[],tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},s=a.geometry;if("Point"===n)b(o,s,a);else if("MultiPoint"===n)for(const l of o)b(l,s,a);else if("LineString"===n)a.type=2,S(o,s,a);else if("MultiLineString"===n)a.type=2,L(o,s,a);else if("Polygon"===n)a.type=3,L(o,s,a,!0);else{if("MultiPolygon"!==n)throw new Error("Input data is not a valid GeoJSON object.");a.type=3;for(const e of o)L(e,s,a,!0)}return a}function b(t,i,r){let[n,o]=t;const a=e.aD(n);let s=e.aH(o);s=s<0?0:s>1?1:s,i.push(a,s),r.minX=Math.min(r.minX,a),r.minY=Math.min(r.minY,s),r.maxX=Math.max(r.maxX,a),r.maxY=Math.max(r.maxY,s)}function S(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=[];for(const a of e)b(a,o,i);t.push(o),r&&function(e,t){let i=0;for(let r=0,n=e.length,o=n-2;r<n;o=r,r+=2)i+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(i>0===t)for(let r=0,n=e.length;r<n/2;r+=2){const t=e[r],i=e[r+1];e[r]=e[n-2-r],e[r+1]=e[n-1-r],e[n-2-r]=t,e[n-1-r]=i}}(o,n)}function L(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(let n=0;n<e.length;n++)S(e[n],t,i,r,0===n)}function T(t,i,r,n){const{id:o,type:a,geometry:s,tags:l}=t,c=[];if(1===a)!function(t,i,r,n,o){for(let a=0;a<t.length;a+=2){const s=Math.round(e.aj*(t[a+0]*i-r)),l=Math.round(e.aj*(t[a+1]*i-n));o.push([s,l])}}(s,i,r,n,c);else for(const e of s)M(e,i,r,n,c);return{id:o,type:a,geometry:c,tags:l}}function M(t,i,r,n,o){const a=-128,s=e.aj+v;let l;for(let c=0;c<t.length-2;c+=2){let u=Math.round(e.aj*(t[c+0]*i-r)),h=Math.round(e.aj*(t[c+1]*i-n)),d=Math.round(e.aj*(t[c+2]*i-r)),p=Math.round(e.aj*(t[c+3]*i-n));const f=d-u,m=p-h;u<a&&d<a||(u<a?(h+=Math.round(m*((a-u)/f)),u=a):d<a&&(p=h+Math.round(m*((a-u)/f)),d=a),h<a&&p<a||(h<a?(u+=Math.round(f*((a-h)/m)),h=a):p<a&&(d=u+Math.round(f*((a-h)/m)),p=a),u>=s&&d>=s||(u>=s?(h+=Math.round(m*((s-u)/f)),u=s):d>=s&&(p=h+Math.round(m*((s-u)/f)),d=s),h>=s&&p>=s||(h>=s?(u+=Math.round(f*((s-h)/m)),h=s):p>=s&&(d=u+Math.round(f*((s-h)/m)),p=s),l&&u===l[l.length-1][0]&&h===l[l.length-1][1]||(l=[[u,h]],o.push(l)),l.push([d,p])))))}}var E,I,A,k={exports:{}},P=function(){if(A)return k.exports;A=1;var t=e.fg(),i=function(){if(I)return E;I=1;var t=e.fe(),i=e.ff().VectorTileFeature;function r(e,t){this.options=t||{},this.features=e,this.length=e.length}function n(e,t){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=t||4096}return E=r,r.prototype.feature=function(e){return new n(this.features[e],this.options.extent)},n.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var i=0;i<e.length;i++){for(var r=e[i],n=[],o=0;o<r.length;o++)n.push(new t(r[o][0],r[o][1]));this.geometry.push(n)}return this.geometry},n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,r=1/0,n=-1/0,o=0;o<e.length;o++)for(var a=e[o],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),i=Math.max(i,l.x),r=Math.min(r,l.y),n=Math.max(n,l.y)}return[t,r,i,n]},n.prototype.toGeoJSON=i.prototype.toGeoJSON,E}();function r(e){var i=new t;return function(e,t){for(var i in e.layers)t.writeMessage(3,n,e.layers[i])}(e,i),i.finish()}function n(e,t){var i;t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var r={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)r.feature=e.feature(i),t.writeMessage(2,o,r);var n=r.keys;for(i=0;i<n.length;i++)t.writeStringField(3,n[i]);var a=r.values;for(i=0;i<a.length;i++)t.writeMessage(4,u,a[i])}function o(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,a,e),t.writeVarintField(3,i.type),t.writeMessage(4,c,i)}function a(e,t){var i=e.feature,r=e.keys,n=e.values,o=e.keycache,a=e.valuecache;for(var s in i.properties){var l=i.properties[s],c=o[s];if(null!==l){void 0===c&&(r.push(s),o[s]=c=r.length-1),t.writeVarint(c);var u=typeof l;"string"!==u&&"boolean"!==u&&"number"!==u&&(l=JSON.stringify(l));var h=u+":"+l,d=a[h];void 0===d&&(n.push(l),a[h]=d=n.length-1),t.writeVarint(d)}}}function s(e,t){return(t<<3)+(7&e)}function l(e){return e<<1^e>>31}function c(e,t){for(var i=e.loadGeometry(),r=e.type,n=0,o=0,a=i.length,c=0;c<a;c++){var u=i[c],h=1;1===r&&(h=u.length),t.writeVarint(s(1,h));for(var d=3===r?u.length-1:u.length,p=0;p<d;p++){1===p&&1!==r&&t.writeVarint(s(2,d-1));var f=u[p].x-n,m=u[p].y-o;t.writeVarint(l(f)),t.writeVarint(l(m)),n+=f,o+=m}3===r&&t.writeVarint(s(7,1))}}function u(e,t){var i=typeof e;"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}return k.exports=r,k.exports.fromVectorTileJs=r,k.exports.fromGeojsonVt=function(e,t){t=t||{};var n={};for(var o in e)n[o]=new i(e[o].features,t),n[o].name=o,n[o].version=t.version,n[o].extent=t.extent;return r({layers:n})},k.exports.GeoJSONWrapper=i,k.exports}(),O=e.fh(P);const R={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:e=>e},z=Math.fround||(D=new Float32Array(1),e=>(D[0]=+e,D[0]));var D;const F=3,B=5,V=6;class N{constructor(e){this.options=Object.assign(Object.create(R),e),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(e){const{log:t,minZoom:i,maxZoom:r}=this.options;t&&console.time("total time");const n="prepare ".concat(e.length," points");t&&console.time(n),this.points=e;const o=[];for(let s=0;s<e.length;s++){const t=e[s];if(!t.geometry)continue;const[i,r]=t.geometry.coordinates,n=z(H(i)),a=z(Z(r));o.push(n,a,1/0,s,-1,1),this.options.reduce&&o.push(0)}let a=this.trees[r+1]=this._createTree(o);t&&console.timeEnd(n);for(let s=r;s>=i;s--){const e=+Date.now();a=this.trees[s]=this._createTree(this._cluster(a,s)),t&&console.log("z%d: %d clusters in %dms",s,a.numItems,+Date.now()-e)}return t&&console.timeEnd("total time"),this}getClusters(e,t){let i=((e[0]+180)%360+360)%360-180;const r=Math.max(-90,Math.min(90,e[1]));let n=180===e[2]?180:((e[2]+180)%360+360)%360-180;const o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)i=-180,n=180;else if(i>n){const e=this.getClusters([i,r,180,o],t),a=this.getClusters([-180,r,n,o],t);return e.concat(a)}const a=this.trees[this._limitZoom(t)],s=a.range(H(i),Z(o),H(n),Z(r)),l=a.data,c=[];for(const u of s){const e=this.stride*u;c.push(l[e+B]>1?U(l,e,this.clusterProps):this.points[l[e+F]])}return c}getChildren(e){const t=this._getOriginId(e),i=this._getOriginZoom(e),r="No cluster with the specified id.",n=this.trees[i];if(!n)throw new Error(r);const o=n.data;if(t*this.stride>=o.length)throw new Error(r);const a=this.options.radius/(this.options.extent*Math.pow(2,i-1)),s=n.within(o[t*this.stride],o[t*this.stride+1],a),l=[];for(const c of s){const t=c*this.stride;o[t+4]===e&&l.push(o[t+B]>1?U(o,t,this.clusterProps):this.points[o[t+F]])}if(0===l.length)throw new Error(r);return l}getLeaves(e,t,i){const r=[];return this._appendLeaves(r,e,t=t||10,i=i||0,0),r}getTile(e,t,i){const r=this.trees[this._limitZoom(e)],n=Math.pow(2,e),{extent:o,radius:a}=this.options,s=a/o,l=(i-s)/n,c=(i+1+s)/n,u={features:[]};return this._addTileFeatures(r.range((t-s)/n,l,(t+1+s)/n,c),r.data,t,i,n,u),0===t&&this._addTileFeatures(r.range(1-s/n,l,1,c),r.data,n,i,n,u),t===n-1&&this._addTileFeatures(r.range(0,l,s/n,c),r.data,-1,i,n,u),u.features.length?u:null}getClusterExpansionZoom(e){let t=this._getOriginZoom(e)-1;for(;t<=this.options.maxZoom;){const i=this.getChildren(e);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t}_appendLeaves(e,t,i,r,n){const o=this.getChildren(t);for(const a of o){const t=a.properties;if(t&&t.cluster?n+t.point_count<=r?n+=t.point_count:n=this._appendLeaves(e,t.cluster_id,i,r,n):n<r?n++:e.push(a),e.length===i)break}return n}_createTree(t){const i=new e.bW(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let e=0;e<t.length;e+=this.stride)i.add(t[e],t[e+1]);return i.finish(),i.data=t,i}_addTileFeatures(e,t,i,r,n,o){for(const a of e){const e=a*this.stride,s=t[e+B]>1;let l,c,u;if(s)l=j(t,e,this.clusterProps),c=t[e],u=t[e+1];else{const i=this.points[t[e+F]];l=i.properties;const[r,n]=i.geometry.coordinates;c=H(r),u=Z(n)}const h={type:1,geometry:[[Math.round(this.options.extent*(c*n-i)),Math.round(this.options.extent*(u*n-r))]],tags:l};let d;d=s||this.options.generateId?t[e+F]:this.points[t[e+F]].id,void 0!==d&&(h.id=d),o.features.push(h)}}_limitZoom(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}_cluster(e,t){const{radius:i,extent:r,reduce:n,minPoints:o}=this.options,a=i/(r*Math.pow(2,t)),s=e.data,l=[],c=this.stride;for(let u=0;u<s.length;u+=c){if(s[u+2]<=t)continue;s[u+2]=t;const i=s[u],r=s[u+1],h=e.within(s[u],s[u+1],a),d=s[u+B];let p=d;for(const e of h){const i=e*c;s[i+2]>t&&(p+=s[i+B])}if(p>d&&p>=o){let e,o=i*d,a=r*d,f=-1;const m=(u/c<<5)+(t+1)+this.points.length;for(const i of h){const r=i*c;if(s[r+2]<=t)continue;s[r+2]=t;const l=s[r+B];o+=s[r]*l,a+=s[r+1]*l,s[r+4]=m,n&&(e||(e=this._map(s,u,!0),f=this.clusterProps.length,this.clusterProps.push(e)),n(e,this._map(s,r)))}s[u+4]=m,l.push(o/p,a/p,1/0,m,-1,p),n&&l.push(f)}else{for(let e=0;e<c;e++)l.push(s[u+e]);if(p>1)for(const e of h){const i=e*c;if(!(s[i+2]<=t)){s[i+2]=t;for(let e=0;e<c;e++)l.push(s[i+e])}}}}return l}_getOriginId(e){return e-this.points.length>>5}_getOriginZoom(e){return(e-this.points.length)%32}_map(e,t,i){if(e[t+B]>1){const r=this.clusterProps[e[t+V]];return i?Object.assign({},r):r}const r=this.points[e[t+F]].properties,n=this.options.map(r);return i&&n===r?Object.assign({},n):n}}function U(e,t,i){return{type:"Feature",id:e[t+F],properties:j(e,t,i),geometry:{type:"Point",coordinates:[(r=e[t],360*(r-.5)),W(e[t+1])]}};var r}function j(e,t,i){const r=e[t+B],n=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?Math.round(r/100)/10+"k":r,o=e[t+V],a=-1===o?{}:Object.assign({},i[o]);return Object.assign(a,{cluster:!0,cluster_id:e[t+F],point_count:r,point_count_abbreviated:n})}function H(e){return e/360+.5}function Z(e){const t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function W(e){const t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function G(e,t,i,r){let n=r;const o=t+(i-t>>1);let a,s=i-t;const l=e[t],c=e[t+1],u=e[i],h=e[i+1];for(let d=t+3;d<i;d+=3){const t=q(e[d],e[d+1],l,c,u,h);if(t>n)a=d,n=t;else if(t===n){const e=Math.abs(d-o);e<s&&(a=d,s=e)}}n>r&&(a-t>3&&G(e,t,a,r),e[a+2]=n,i-a>3&&G(e,a,i,r))}function q(e,t,i,r,n,o){let a=n-i,s=o-r;if(0!==a||0!==s){const l=((e-i)*a+(t-r)*s)/(a*a+s*s);l>1?(i=n,r=o):l>0&&(i+=a*l,r+=s*l)}return a=e-i,s=t-r,a*a+s*s}function X(e,t,i,r){const n={id:null!==e&&void 0!==e?e:null,type:t,geometry:i,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===t||"MultiPoint"===t||"LineString"===t)Y(n,i);else if("Polygon"===t)Y(n,i[0]);else if("MultiLineString"===t)for(const o of i)Y(n,o);else if("MultiPolygon"===t)for(const o of i)Y(n,o[0]);return n}function Y(e,t){for(let i=0;i<t.length;i+=3)e.minX=Math.min(e.minX,t[i]),e.minY=Math.min(e.minY,t[i+1]),e.maxX=Math.max(e.maxX,t[i]),e.maxY=Math.max(e.maxY,t[i+1])}function K(e,t,i,r){if(!t.geometry)return;const n=t.geometry.coordinates;if(n&&0===n.length)return;const o=t.geometry.type,a=Math.pow(i.tolerance/((1<<i.maxZoom)*i.extent),2);let s=[],l=t.id;if(i.promoteId?l=t.properties[i.promoteId]:i.generateId&&(l=r||0),"Point"===o)J(n,s);else if("MultiPoint"===o)for(const c of n)J(c,s);else if("LineString"===o)Q(n,s,a,!1);else if("MultiLineString"===o){if(i.lineMetrics){for(const i of n)s=[],Q(i,s,a,!1),e.push(X(l,"LineString",s,t.properties));return}$(n,s,a,!1)}else if("Polygon"===o)$(n,s,a,!0);else{if("MultiPolygon"!==o){if("GeometryCollection"===o){for(const n of t.geometry.geometries)K(e,{id:l,geometry:n,properties:t.properties},i,r);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const e of n){const t=[];$(e,t,a,!0),s.push(t)}}e.push(X(l,o,s,t.properties))}function J(e,t){t.push(ee(e[0]),te(e[1]),0)}function Q(e,t,i,r){let n,o,a=0;for(let l=0;l<e.length;l++){const i=ee(e[l][0]),s=te(e[l][1]);t.push(i,s,0),l>0&&(a+=r?(n*s-i*o)/2:Math.sqrt(Math.pow(i-n,2)+Math.pow(s-o,2))),n=i,o=s}const s=t.length-3;t[2]=1,G(t,0,s,i),t[s+2]=1,t.size=Math.abs(a),t.start=0,t.end=t.size}function $(e,t,i,r){for(let n=0;n<e.length;n++){const o=[];Q(e[n],o,i,r),t.push(o)}}function ee(e){return e/360+.5}function te(e){const t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function ie(e,t,i,r,n,o,a,s){if(r/=t,o>=(i/=t)&&a<r)return e;if(a<i||o>=r)return null;const l=[];for(const c of e){const e=c.geometry;let t=c.type;const o=0===n?c.minX:c.minY,a=0===n?c.maxX:c.maxY;if(o>=i&&a<r){l.push(c);continue}if(a<i||o>=r)continue;let u=[];if("Point"===t||"MultiPoint"===t)re(e,u,i,r,n);else if("LineString"===t)ne(e,u,i,r,n,!1,s.lineMetrics);else if("MultiLineString"===t)ae(e,u,i,r,n,!1);else if("Polygon"===t)ae(e,u,i,r,n,!0);else if("MultiPolygon"===t)for(const s of e){const e=[];ae(s,e,i,r,n,!0),e.length&&u.push(e)}if(u.length){if(s.lineMetrics&&"LineString"===t){for(const e of u)l.push(X(c.id,t,e,c.tags));continue}"LineString"!==t&&"MultiLineString"!==t||(1===u.length?(t="LineString",u=u[0]):t="MultiLineString"),"Point"!==t&&"MultiPoint"!==t||(t=3===u.length?"Point":"MultiPoint"),l.push(X(c.id,t,u,c.tags))}}return l.length?l:null}function re(e,t,i,r,n){for(let o=0;o<e.length;o+=3){const a=e[o+n];a>=i&&a<=r&&se(t,e[o],e[o+1],e[o+2])}}function ne(e,t,i,r,n,o,a){let s=oe(e);const l=0===n?le:ce;let c,u,h=e.start;for(let g=0;g<e.length-3;g+=3){const d=e[g],p=e[g+1],f=e[g+2],m=e[g+3],y=e[g+4],_=0===n?d:p,v=0===n?m:y;let x=!1;a&&(c=Math.sqrt(Math.pow(d-m,2)+Math.pow(p-y,2))),_<i?v>i&&(u=l(s,d,p,m,y,i),a&&(s.start=h+c*u)):_>r?v<r&&(u=l(s,d,p,m,y,r),a&&(s.start=h+c*u)):se(s,d,p,f),v<i&&_>=i&&(u=l(s,d,p,m,y,i),x=!0),v>r&&_<=r&&(u=l(s,d,p,m,y,r),x=!0),!o&&x&&(a&&(s.end=h+c*u),t.push(s),s=oe(e)),a&&(h+=c)}let d=e.length-3;const p=e[d],f=e[d+1],m=0===n?p:f;m>=i&&m<=r&&se(s,p,f,e[d+2]),d=s.length-3,o&&d>=3&&(s[d]!==s[0]||s[d+1]!==s[1])&&se(s,s[0],s[1],s[2]),s.length&&t.push(s)}function oe(e){const t=[];return t.size=e.size,t.start=e.start,t.end=e.end,t}function ae(e,t,i,r,n,o){for(const a of e)ne(a,t,i,r,n,o,!1)}function se(e,t,i,r){e.push(t,i,r)}function le(e,t,i,r,n,o){const a=(o-t)/(r-t);return se(e,o,i+(n-i)*a,1),a}function ce(e,t,i,r,n,o){const a=(o-i)/(n-i);return se(e,t+(r-t)*a,o,1),a}function ue(e,t){const i=[];for(let r=0;r<e.length;r++){const n=e[r],o=n.type;let a;if("Point"===o||"MultiPoint"===o||"LineString"===o)a=he(n.geometry,t);else if("MultiLineString"===o||"Polygon"===o){a=[];for(const e of n.geometry)a.push(he(e,t))}else if("MultiPolygon"===o){a=[];for(const e of n.geometry){const i=[];for(const r of e)i.push(he(r,t));a.push(i)}}i.push(X(n.id,o,a,n.tags))}return i}function he(e,t){const i=[];i.size=e.size,void 0!==e.start&&(i.start=e.start,i.end=e.end);for(let r=0;r<e.length;r+=3)i.push(e[r]+t,e[r+1],e[r+2]);return i}function de(e,t){if(e.transformed)return e;const i=1<<e.z,r=e.x,n=e.y;for(const o of e.features){const e=o.geometry,a=o.type;if(o.geometry=[],1===a)for(let s=0;s<e.length;s+=2)o.geometry.push(pe(e[s],e[s+1],t,i,r,n));else for(let s=0;s<e.length;s++){const a=[];for(let o=0;o<e[s].length;o+=2)a.push(pe(e[s][o],e[s][o+1],t,i,r,n));o.geometry.push(a)}}return e.transformed=!0,e}function pe(e,t,i,r,n,o){return[Math.round(i*(e*r-n)),Math.round(i*(t*r-o))]}function fe(e,t,i,r,n){const o=t===n.maxZoom?0:n.tolerance/((1<<t)*n.extent),a={features:[],numPoints:0,numSimplified:0,numFeatures:e.length,source:null,x:i,y:r,z:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const s of e)me(a,s,o,n);return a}function me(e,t,i,r){const n=t.geometry,o=t.type,a=[];if(e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),"Point"===o||"MultiPoint"===o)for(let s=0;s<n.length;s+=3)a.push(n[s],n[s+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)ge(a,n,e,i,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(let s=0;s<n.length;s++)ge(a,n[s],e,i,"Polygon"===o,0===s);else if("MultiPolygon"===o)for(let s=0;s<n.length;s++){const t=n[s];for(let r=0;r<t.length;r++)ge(a,t[r],e,i,!0,0===r)}if(a.length){let i=t.tags||null;if("LineString"===o&&r.lineMetrics){i={};for(const e in t.tags)i[e]=t.tags[e];i.mapbox_clip_start=n.start/n.size,i.mapbox_clip_end=n.end/n.size}const s={geometry:a,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:i};null!==t.id&&(s.id=t.id),e.features.push(s)}}function ge(e,t,i,r,n,o){const a=r*r;if(r>0&&t.size<(n?a:r))return void(i.numPoints+=t.length/3);const s=[];for(let l=0;l<t.length;l+=3)(0===r||t[l+2]>a)&&(i.numSimplified++,s.push(t[l],t[l+1])),i.numPoints++;n&&function(e,t){let i=0;for(let r=0,n=e.length,o=n-2;r<n;o=r,r+=2)i+=(e[r]-e[o])*(e[r+1]+e[o+1]);if(i>0===t)for(let r=0,n=e.length;r<n/2;r+=2){const t=e[r],i=e[r+1];e[r]=e[n-2-r],e[r+1]=e[n-1-r],e[n-2-r]=t,e[n-1-r]=i}}(s,o),e.push(s)}const ye={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class _e{constructor(e,t){const i=(t=this.options=function(e,t){for(const i in t)e[i]=t[i];return e}(Object.create(ye),t)).debug;if(i&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(t.promoteId&&t.generateId)throw new Error("promoteId and generateId cannot be used together.");let r=function(e,t){const i=[];if("FeatureCollection"===e.type)for(let r=0;r<e.features.length;r++)K(i,e.features[r],t,r);else K(i,"Feature"===e.type?e:{geometry:e},t);return i}(e,t);this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),r=function(e,t){const i=t.buffer/t.extent;let r=e;const n=ie(e,1,-1-i,i,0,-1,2,t),o=ie(e,1,1-i,2+i,0,-1,2,t);return(n||o)&&(r=ie(e,1,-i,1+i,0,-1,2,t)||[],n&&(r=ue(n,1).concat(r)),o&&(r=r.concat(ue(o,-1)))),r}(r,t),r.length&&this.splitTile(r,0,0,0),i&&(r.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(e,t,i,r,n,o,a){const s=[e,t,i,r],l=this.options,c=l.debug;for(;s.length;){r=s.pop(),i=s.pop(),t=s.pop(),e=s.pop();const u=1<<t,h=ve(t,i,r);let d=this.tiles[h];if(!d&&(c>1&&console.time("creation"),d=this.tiles[h]=fe(e,t,i,r,l),this.tileCoords.push({z:t,x:i,y:r}),c)){c>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,r,d.numFeatures,d.numPoints,d.numSimplified),console.timeEnd("creation"));const e="z".concat(t);this.stats[e]=(this.stats[e]||0)+1,this.total++}if(d.source=e,null==n){if(t===l.indexMaxZoom||d.numPoints<=l.indexMaxPoints)continue}else{if(t===l.maxZoom||t===n)continue;if(null!=n){const e=n-t;if(i!==o>>e||r!==a>>e)continue}}if(d.source=null,0===e.length)continue;c>1&&console.time("clipping");const p=.5*l.buffer/l.extent,f=.5-p,m=.5+p,g=1+p;let y=null,_=null,v=null,x=null,C=ie(e,u,i-p,i+m,0,d.minX,d.maxX,l),w=ie(e,u,i+f,i+g,0,d.minX,d.maxX,l);e=null,C&&(y=ie(C,u,r-p,r+m,1,d.minY,d.maxY,l),_=ie(C,u,r+f,r+g,1,d.minY,d.maxY,l),C=null),w&&(v=ie(w,u,r-p,r+m,1,d.minY,d.maxY,l),x=ie(w,u,r+f,r+g,1,d.minY,d.maxY,l),w=null),c>1&&console.timeEnd("clipping"),s.push(y||[],t+1,2*i,2*r),s.push(_||[],t+1,2*i,2*r+1),s.push(v||[],t+1,2*i+1,2*r),s.push(x||[],t+1,2*i+1,2*r+1)}}getTile(e,t,i){e=+e,t=+t,i=+i;const r=this.options,{extent:n,debug:o}=r;if(e<0||e>24)return null;const a=1<<e,s=ve(e,t=t+a&a-1,i);if(this.tiles[s])return de(this.tiles[s],n);o>1&&console.log("drilling down to z%d-%d-%d",e,t,i);let l,c=e,u=t,h=i;for(;!l&&c>0;)c--,u>>=1,h>>=1,l=this.tiles[ve(c,u,h)];return l&&l.source?(o>1&&(console.log("found parent tile z%d-%d-%d",c,u,h),console.time("drilling down")),this.splitTile(l.source,c,u,h,e,t,i),o>1&&console.timeEnd("drilling down"),this.tiles[s]?de(this.tiles[s],n):null):null}}function ve(e,t,i){return 32*((1<<e)*i+t)+e}function xe(e,t){const i=e.tileID.canonical;if(!this._geoJSONIndex)return void t(null,null);const r=this._geoJSONIndex.getTile(i.z,i.x,i.y);if(!r)return void t(null,null);const n=e=>e.tags&&"3d_elevation_id"in e.tags&&"source"in e.tags&&"elevation"===e.tags.source,o=r.features.filter(e=>n(e));let a;if(o.length>0){const e=r.features.filter(e=>!n(e));a=new y({_geojsonTileLayer:e,hd_road_elevation:o})}else a=new m(r.features);let s=O(a);0===s.byteOffset&&s.byteLength===s.buffer.byteLength||(s=new Uint8Array(s)),t(null,{vectorTile:a,rawData:s.buffer})}class Ce extends c{constructor(e,t,i,r,n,o,a){super(e,t,i,r,n,xe,a),o&&(this.loadGeoJSON=o),this._dynamicIndex=new x}loadData(i,r){const n=i&&i.request,o=n&&n.collectResourceTiming;this.loadGeoJSON(i,(a,s)=>{if(a||!s)return r(a);if("object"!=typeof s)return r(new Error("Input data given to '".concat(i.source,"' is not a valid GeoJSON object.")));{try{if(i.filter){const t=e.X(i.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===t.result)throw new Error(t.value.map(e=>"".concat(e.key,": ").concat(e.message)).join(", "));s.features=s.features.filter(e=>t.value.evaluate({zoom:0},e))}i.dynamic?("Feature"===s.type&&(s={type:"FeatureCollection",features:[s]}),i.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(s.features,this.loaded),i.cluster&&(s.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=i.cluster?new N(function(t){let{superclusterOptions:i,clusterProperties:r}=t;if(!r||!i)return i;const n={},o={},a={accumulated:null,zoom:0},s={properties:null},l=Object.keys(r);for(const c of l){const[t,i]=r[c],a=e.X(i),s=e.X("string"==typeof t?[t,["accumulated"],["get",c]]:t);n[c]=a.value,o[c]=s.value}return i.map=e=>{s.properties=e;const t={};for(const i of l)t[i]=n[i].evaluate(a,s);return t},i.reduce=(e,t)=>{s.properties=t;for(const i of l)a.accumulated=e[i],e[i]=o[i].evaluate(a,s)},i}(i)).load(s.features):i.dynamic?this._dynamicIndex:function(e,t){return new _e(e,t)}(s,i.geojsonVtOptions)}catch(e){return r(e)}const a={};if(o){const e=t(n);e&&(a.resourceTiming={},a.resourceTiming[i.source]=JSON.parse(JSON.stringify(e)))}r(null,a)}})}reloadTile(e,t){const i=this.loaded;return i&&i[e.uid]?e.partial?t(null,void 0):super.reloadTile(e,t):this.loadTile(e,t)}loadGeoJSON(t,i){if(t.request)e.n(t.request,i);else{if("string"!=typeof t.data)return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")));try{return i(null,JSON.parse(t.data))}catch(e){return i(new Error("Input data given to '".concat(t.source,"' is not a valid GeoJSON object.")))}}}getClusterExpansionZoom(e,t){try{t(null,this._geoJSONIndex.getClusterExpansionZoom(e.clusterId))}catch(e){t(e)}}getClusterChildren(e,t){try{t(null,this._geoJSONIndex.getChildren(e.clusterId))}catch(e){t(e)}}getClusterLeaves(e,t){try{t(null,this._geoJSONIndex.getLeaves(e.clusterId,e.limit,e.offset))}catch(e){t(e)}}}class we{constructor(t,i,r){this.tileID=new e.aM(t.tileID.overscaledZ,t.tileID.wrap,t.tileID.canonical.z,t.tileID.canonical.x,t.tileID.canonical.y),this.tileZoom=t.tileZoom,this.uid=t.uid,this.zoom=t.zoom,this.canonical=t.tileID.canonical,this.pixelRatio=t.pixelRatio,this.tileSize=t.tileSize,this.source=t.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=t.projection,this.brightness=i,this.worldview=r}parse(t,i,r,n){this.status="parsing";const o=new e.aM(r.tileID.overscaledZ,r.tileID.wrap,r.tileID.canonical.z,r.tileID.canonical.x,r.tileID.canonical.y),a=[],s=i.familiesBySource[r.source],l=new e.f0(o,r.promoteId);l.bucketLayerIDs=[],l.is3DTile=!0,e.fi(t).then(t=>{if(!t)return n(new Error("Could not parse tile"));const i=t.json.extensionsUsed&&t.json.extensionsUsed.includes("MAPBOX_mesh_features")||t.json.asset.extras&&t.json.asset.extras.MAPBOX_mesh_features,c=t.json.extensionsUsed&&t.json.extensionsUsed.includes("EXT_meshopt_compression"),u=new e.aa(this.zoom,{brightness:this.brightness,worldview:this.worldview});for(const n in s)for(const h of s[n]){const n=h[0];l.bucketLayerIDs.push(h.map(t=>e.C(t.id,t.scope))),n.recalculate(u,[]);const s=e.fj(t,1/e.cU(r.tileID.canonical)),d=new e.fk(h,s,o,i,c,this.brightness,l,this.worldview);i||(d.needsUpload=!0),a.push(d),d.evaluate(n)}this.status="done",n(null,{buckets:a,featureIndex:l,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(e=>n(new Error(e.message)))}}class be{constructor(e,t,i,r,n,o,a,s){this.actor=e,this.layerIndex=t,this.availableImages=i,this.availableModels=r,this.brightness=a,this.loading={},this.loaded={},this.worldview=s}loadTile(t,i){const r=t.uid,n=this.loading[r]=new we(t,this.brightness,this.worldview);e.br(t.request,(e,o)=>{const a=!this.loading[r];return delete this.loading[r],a||e?(n.status="done",a||(this.loaded[r]=n),i(e)):o&&0!==o.byteLength?void n.parse(o,this.layerIndex,t,(e,t)=>{n.status="done",this.loaded=this.loaded||{},this.loaded[r]=n,e||!t?i(e):i(null,t)}):(n.status="done",this.loaded[r]=n,i())})}reloadTile(e,t){const i=this.loaded,r=e.uid;if(i&&i[r]){const n=i[r];n.projection=e.projection,n.brightness=e.brightness;const o=(i,r)=>{n.reloadCallback&&(delete n.reloadCallback,this.loadTile(e,t)),t(i,r)};"parsing"===n.status?n.reloadCallback=o:"done"===n.status&&this.loadTile(e,t)}}abortTile(e,t){const i=e.uid;this.loading[i]&&delete this.loading[i],t()}removeTile(e,t){const i=this.loaded,r=e.uid;i&&i[r]&&delete i[r],t()}}class Se{constructor(t){this.self=t,this.actor=new e.fm(t,this),this.layerIndexes={},this.availableImages={},this.availableModels={},this.isSpriteLoaded={},this.imageRasterizer=new e.y,this.rtlPluginParsingListeners=[],this.projections={},this.defaultProjection=e.ce({name:"mercator"}),this.workerSourceTypes={vector:c,geojson:Ce,"raster-dem":u,"raster-array":d,"batched-model":be},this.workerSources={},this.self.registerWorkerSource=(e,t)=>{if(this.workerSourceTypes[e])throw new Error('Worker source with name "'.concat(e,'" already registered.'));this.workerSourceTypes[e]=t},this.self.registerRTLTextPlugin=t=>{if(e.fn.isParsed())throw new Error("RTL text plugin already registered.");e.fn.setState({pluginStatus:e.fo.parsed,pluginURL:e.fn.getPluginURL()}),e.fn.applyArabicShaping=t.applyArabicShaping,e.fn.processBidirectionalText=t.processBidirectionalText,e.fn.processStyledBidirectionalText=t.processStyledBidirectionalText;for(const e of this.rtlPluginParsingListeners)e(null,!0);this.rtlPluginParsingListeners=[]}}clearCaches(e,t,i){delete this.layerIndexes[e],delete this.availableImages[e],delete this.availableModels[e],delete this.workerSources[e],i()}checkIfReady(e,t,i){i()}setReferrer(e,t){this.referrer=t}spriteLoaded(t,i){this.isSpriteLoaded[t]||(this.isSpriteLoaded[t]={});const{scope:r,isLoaded:n}=i;if(this.isSpriteLoaded[t][r]=n,this.workerSources[t]&&this.workerSources[t][r])for(const o in this.workerSources[t][r]){const i=this.workerSources[t][r][o];for(const t in i){const r=i[t];r instanceof c&&(r.isSpriteLoaded=n,r.fire(new e.A("isSpriteLoaded")))}}}setImages(e,t,i){this.availableImages[e]||(this.availableImages[e]={});const{scope:r,images:n}=t;if(this.availableImages[e][r]=n,this.workerSources[e]&&this.workerSources[e][r]){for(const t in this.workerSources[e][r]){const i=this.workerSources[e][r][t];for(const e in i)i[e].availableImages=n}i()}else i()}setModels(e,t,i){let{scope:r,models:n}=t;if(this.availableModels[e]||(this.availableModels[e]={}),this.availableModels[e][r]=n,this.workerSources[e]&&this.workerSources[e][r]){for(const t in this.workerSources[e][r]){const i=this.workerSources[e][r][t];for(const e in i)i[e].availableModels=n}i()}else i()}setProjection(t,i){this.projections[t]=e.ce(i)}setBrightness(e,t,i){this.brightness=t,i()}setWorldview(e,t,i){this.worldview=t,i()}setLayers(e,t,i){this.getLayerIndex(e,t.scope).replace(t.layers,t.options),i()}updateLayers(e,t,i){this.getLayerIndex(e,t.scope).update(t.layers,t.removedIds,t.options),i()}loadTile(e,t,i){t.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,t.type,t.source,t.scope).loadTile(t,i)}decodeRasterArray(e,t,i){this.getWorkerSource(e,t.type,t.source,t.scope).decodeRasterArray(t,i)}reloadTile(e,t,i){t.projection=this.projections[e]||this.defaultProjection,this.getWorkerSource(e,t.type,t.source,t.scope).reloadTile(t,i)}abortTile(e,t,i){this.getWorkerSource(e,t.type,t.source,t.scope).abortTile(t,i)}removeTile(e,t,i){this.getWorkerSource(e,t.type,t.source,t.scope).removeTile(t,i)}removeSource(e,t,i){if(!(this.workerSources[e]&&this.workerSources[e][t.scope]&&this.workerSources[e][t.scope][t.type]&&this.workerSources[e][t.scope][t.type][t.source]))return;const r=this.workerSources[e][t.scope][t.type][t.source];delete this.workerSources[e][t.scope][t.type][t.source],void 0!==r.removeSource?r.removeSource(t,i):i()}loadWorkerSource(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e.toString())}}syncRTLPluginState(t,i,r){if(e.fn.isParsed())r(null,!0);else if(e.fn.isParsing())this.rtlPluginParsingListeners.push(r);else try{e.fn.setState(i);const t=e.fn.getPluginURL();!e.fn.isLoaded()||e.fn.isParsed()||e.fn.isParsing()||null==t||(e.fn.setState({pluginStatus:e.fo.parsing,pluginURL:e.fn.getPluginURL()}),this.self.importScripts(t),e.fn.isParsed()?r(null,!0):this.rtlPluginParsingListeners.push(r))}catch(e){r(e.toString())}}setDracoUrl(e,t){this.dracoUrl=t}getAvailableImages(e,t){this.availableImages[e]||(this.availableImages[e]={});let i=this.availableImages[e][t];return i||(i=[]),i}getAvailableModels(e,t){this.availableModels[e]||(this.availableModels[e]={});let i=this.availableModels[e][t];return i||(i={}),i}getLayerIndex(e,t){this.layerIndexes[e]||(this.layerIndexes[e]={});let i=this.layerIndexes[e][t];return i||(i=this.layerIndexes[e][t]=new n,i.scope=t),i}getWorkerSource(e,t,i,r){const n=this.workerSources;return n[e]||(n[e]={}),n[e][r]||(n[e][r]={}),n[e][r][t]||(n[e][r][t]={}),this.isSpriteLoaded[e]||(this.isSpriteLoaded[e]={}),n[e][r][t][i]||(n[e][r][t][i]=new this.workerSourceTypes[t]({send:(t,i,r,n,o,a)=>this.actor.send(t,i,r,e,o,a),scheduler:this.actor.scheduler},this.getLayerIndex(e,r),this.getAvailableImages(e,r),this.getAvailableModels(e,r),this.isSpriteLoaded[e][r],void 0,this.brightness,this.worldview)),n[e][r][t][i]}rasterizeImagesWorker(e,t,i){const r=new Map;for(const[n,{image:o,imageVariant:a}]of t.tasks.entries()){const i=this.imageRasterizer.rasterize(a,o,t.scope,e);r.set(n,i)}i(void 0,r)}removeRasterizedImages(e,t,i){this.imageRasterizer.removeImagesFromCacheByIds(t.imageIds,t.scope,e),i()}enforceCacheSizeLimit(t,i){e.fp(i)}getWorkerPerformanceMetrics(e,t,i){i(void 0,void 0)}}return e.fl(self)&&(self.worker=new Se(self)),Se}),a(["./shared"],function(e){var t="3.13.0";const i={create:"create",load:"load",fullLoad:"fullLoad"},a={mark(e){performance.mark(e)},measure(e,t,i){performance.measure(e,t,i)}};function s(t){const i=t.name.split("?")[0];return e.a(i)&&i.includes("mapbox-gl.js")?"javascript":e.a(i)&&i.includes("mapbox-gl.css")?"css":e.b(i)?"fontRange":e.c(i)?"sprite":e.i(i)?"style":e.d(i)?"tilejson":"other"}var l,c={},u=function(){if(l)return c;function e(e){return!t(e)}function t(t){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var e,t,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}()?function(){var e=document.createElement("canvas");e.width=e.height=1;var t=e.getContext("2d");if(!t)return!1;var i=t.getImageData(0,0,1,1);return i&&i.width===e.width}()?(void 0===i[r=t&&t.failIfMajorPerformanceCaveat]&&(i[r]=function(t){var i,r=function(t){var i=document.createElement("canvas"),r=Object.create(e.webGLContextAttributes);return r.failIfMajorPerformanceCaveat=t,i.getContext("webgl2",r)}(t);if(!r)return!1;try{i=r.createShader(r.VERTEX_SHADER)}catch(e){return!1}return!(!i||r.isContextLost())&&(r.shaderSource(i,"void main() {}"),r.compileShader(i),!0===r.getShaderParameter(i,r.COMPILE_STATUS))}(r)),i[r]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var r}l=1,c.supported=e,c.notSupportedReason=t;var i={};return e.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},c}();function h(e,t,i){const r=document.createElement(e);return null!=t&&(r.className=t),i&&i.appendChild(r),r}function d(e,t,i){const r=document.createElementNS("http://www.w3.org/2000/svg",e);for(const n of Object.keys(t))r.setAttributeNS(null,n,String(t[n]));return i&&i.appendChild(r),r}const p="undefined"!=typeof document?document.documentElement&&document.documentElement.style:null,f=p&&void 0!==p.userSelect?"userSelect":"WebkitUserSelect";let m;function g(){p&&f&&(m=p[f],p[f]="none")}function y(){p&&f&&(p[f]=m)}function _(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",_,!0)}function v(){window.addEventListener("click",_,!0),window.setTimeout(()=>{window.removeEventListener("click",_,!0)},0)}function x(e,t){const i=e.getBoundingClientRect();return b(e,i,t)}function C(e,t){const i=e.getBoundingClientRect(),r=[];for(let n=0;n<t.length;n++)r.push(b(e,i,t[n]));return r}function w(e){return/firefox/i.test(navigator.userAgent)&&/macintosh/i.test(navigator.userAgent)&&2===e.button&&e.ctrlKey?0:e.button}function b(t,i,r){const n=t.offsetWidth===i.width?1:t.offsetWidth/i.width;return new e.P((r.clientX-i.left)*n,(r.clientY-i.top)*n)}const S="01",L="NO_ACCESS_TOKEN";class T{constructor(e,t,i){this._transformRequestFn=e,this._customAccessToken=t,this._silenceAuthErrors=!!i,this._createSkuToken()}_createSkuToken(){const e=function(){let e="";for(let t=0;t<10;t++)e+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",S,e].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=e.token,this._skuTokenExpiresAt=e.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(e,t){return this._transformRequestFn&&this._transformRequestFn(e,t)||{url:e}}normalizeStyleURL(i,r){if(!e.j(i))return i;const n=E(i);return n.params.push("sdk=js-".concat(t)),n.path="/styles/v1".concat(n.path),this._makeAPIURL(n,this._customAccessToken||r)}normalizeGlyphsURL(t,i){if(!e.j(t))return t;const r=E(t);return r.path="/fonts/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||i)}normalizeModelURL(t,i){if(!e.j(t))return t;const r=E(t);return r.path="/models/v1".concat(r.path),this._makeAPIURL(r,this._customAccessToken||i)}normalizeSourceURL(t,i,r,n){if(!e.j(t))return t;const o=E(t);return o.path="/v4/".concat(o.authority,".json"),o.params.push("secure"),r&&o.params.push("language=".concat(r)),n&&o.params.push("worldview=".concat(n)),this._makeAPIURL(o,this._customAccessToken||i)}normalizeIconsetURL(t,i){const r=E(t);return e.j(t)?(r.path="/styles/v1".concat(r.path,"/iconset.pbf"),this._makeAPIURL(r,this._customAccessToken||i)):I(r)}normalizeSpriteURL(t,i,r,n){const o=E(t);return e.j(t)?(o.path="/styles/v1".concat(o.path,"/sprite").concat(i).concat(r),this._makeAPIURL(o,this._customAccessToken||n)):(o.path+="".concat(i).concat(r),I(o))}normalizeTileURL(t,i,r){if(this._isSkuTokenExpired()&&this._createSkuToken(),t&&!e.j(t))return t;const n=E(t);n.path=n.path.replace(/(\.(png|jpg)\d*)(?=$)/,"".concat(i||r&&"raster"!==n.authority&&512===r?"@2x":"").concat(e.l.supported?".webp":"$1")),"raster"===n.authority?n.path="/".concat(e.e.RASTER_URL_PREFIX).concat(n.path):"rasterarrays"===n.authority?n.path="/".concat(e.e.RASTERARRAYS_URL_PREFIX).concat(n.path):"3dtiles"===n.authority?n.path="/".concat(e.e.TILES3D_URL_PREFIX).concat(n.path):(n.path=n.path.replace(/^.+\/v4\//,"/"),n.path="/".concat(e.e.TILE_URL_VERSION).concat(n.path));const o=this._customAccessToken||function(e){for(const t of e){const e=t.match(/^access_token=(.*)$/);if(e)return e[1]}return null}(n.params)||e.e.ACCESS_TOKEN;return e.e.REQUIRE_ACCESS_TOKEN&&o&&this._skuToken&&n.params.push("sku=".concat(this._skuToken)),this._makeAPIURL(n,o)}canonicalizeTileURL(t,i){const r=E(t);if(!r.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!r.path.match(/\.[\w]+$/))return t;let n="mapbox://";r.path.match(/^\/raster\/v1\//)?n+="raster/".concat(r.path.replace("/".concat(e.e.RASTER_URL_PREFIX,"/"),"")):r.path.match(/^\/rasterarrays\/v1\//)?n+="rasterarrays/".concat(r.path.replace("/".concat(e.e.RASTERARRAYS_URL_PREFIX,"/"),"")):n+="tiles/".concat(r.path.replace("/".concat(e.e.TILE_URL_VERSION,"/"),""));let o=r.params;return i&&(o=o.filter(e=>!e.match(/^access_token=/))),o.length&&(n+="?".concat(o.join("&"))),n}canonicalizeTileset(t,i){const r=!!i&&e.j(i),n=[];for(const o of t.tiles||[])e.k(o)?n.push(this.canonicalizeTileURL(o,r)):n.push(o);return n}_makeAPIURL(t,i){const r="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",n=E(e.e.API_URL);if(t.protocol=n.protocol,t.authority=n.authority,"http"===t.protocol){const e=t.params.indexOf("secure");e>=0&&t.params.splice(e,1)}if("/"!==n.path&&(t.path="".concat(n.path).concat(t.path)),!e.e.REQUIRE_ACCESS_TOKEN)return I(t);if(i=i||e.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!i)throw new Error("An API access token is required to use Mapbox GL. ".concat(r));if("s"===i[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ".concat(r))}return t.params=t.params.filter(e=>-1===e.indexOf("access_token")),t.params.push("access_token=".concat(i||"")),I(t)}}const M=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function E(e){const t=e.match(M);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function I(e){const t=e.params.length?"?".concat(e.params.join("&")):"";return"".concat(e.protocol,"://").concat(e.authority).concat(e.path).concat(t)}const A="mapbox.eventData";function k(t){if(!t)return null;const i=t.split(".");if(!i||3!==i.length)return null;try{return JSON.parse(e.m(i[1]))}catch(e){return null}}class P{constructor(e){this.type=e,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(t){const i=k(e.e.ACCESS_TOKEN);let r="";return r=i&&i.u?e.f(i.u):e.e.ACCESS_TOKEN||"",t?"".concat(A,".").concat(t,":").concat(r):"".concat(A,":").concat(r)}fetchEventData(){const t=e.s("localStorage"),i=this.getStorageKey(),r=this.getStorageKey("uuid");if(t)try{const e=localStorage.getItem(i);e&&(this.eventData=JSON.parse(e));const t=localStorage.getItem(r);t&&(this.anonId=t)}catch(t){e.w("Unable to read from LocalStorage")}}saveEventData(){const t=e.s("localStorage"),i=this.getStorageKey(),r=this.getStorageKey("uuid"),n=this.anonId;if(t&&n)try{localStorage.setItem(r,n),Object.keys(this.eventData).length>=1&&localStorage.setItem(i,JSON.stringify(this.eventData))}catch(t){e.w("Unable to write to LocalStorage")}}processRequests(e){}postEvent(t,i,r,n){if(!e.e.EVENTS_URL)return;const o=E(e.e.EVENTS_URL);o.params.push("access_token=".concat(n||e.e.ACCESS_TOKEN||""));const a={event:this.type,created:new Date(t).toISOString()},s=i?e.h(a,i):a,l={url:I(o),headers:{"Content-Type":"text/plain"},body:JSON.stringify([s])};this.pendingRequest=e.p(l,e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)})}queueRequest(e,t){this.queue.push(e),this.processRequests(t)}}const O=new class extends P{constructor(e){super("appUserTurnstile"),this._customAccessToken=e}postTurnstileEvent(t,i){e.e.EVENTS_URL&&e.e.ACCESS_TOKEN&&Array.isArray(t)&&t.some(t=>e.j(t)||e.k(t))&&this.queueRequest(Date.now(),i)}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const r=k(e.e.ACCESS_TOKEN),n=r?r.u:e.e.ACCESS_TOKEN;let o=n!==this.eventData.tokenU;e.v(this.anonId)||(this.anonId=e.u(),o=!0);const a=this.queue.shift();if(this.eventData.lastSuccess){const e=new Date(this.eventData.lastSuccess),t=new Date(a),i=(a-this.eventData.lastSuccess)/864e5;o=o||i>=1||i<-1||e.getDate()!==t.getDate()}else o=!0;o?this.postEvent(a,{sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:S,"enabled.telemetry":!1,userId:this.anonId},e=>{e||(this.eventData.lastSuccess=a,this.eventData.tokenU=n)},i):this.processRequests()}},R=O.postTurnstileEvent.bind(O),z=new class extends P{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(t,i,r,n){this.skuToken=i,this.errorCb=n,e.e.EVENTS_URL&&(r||e.e.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(L)))}processRequests(i){if(this.pendingRequest||0===this.queue.length)return;const{id:r,timestamp:n}=this.queue.shift();r&&this.success[r]||(this.anonId||this.fetchEventData(),e.v(this.anonId)||(this.anonId=e.u()),this.postEvent(n,{sdkIdentifier:"mapbox-gl-js",sdkVersion:t,skuId:S,skuToken:this.skuToken,userId:this.anonId},e=>{e?this.errorCb(e):r&&(this.success[r]=!0)},i))}remove(){this.errorCb=null}},D=z.postMapLoadEvent.bind(z),F=new class extends P{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(t){let i=this.mapInstanceIdMap.get(t);return i||(i=e.u(),this.mapInstanceIdMap.set(t,i)),i}getEventId(e){const t=this.eventIdPerMapInstanceMap.get(e)||0;return this.eventIdPerMapInstanceMap.set(e,t+1),t}postStyleLoadEvent(t,i){const{map:r,style:n,importedStyles:o}=i;if(!e.e.EVENTS_URL||!t&&!e.e.ACCESS_TOKEN)return;const a=this.getMapInstanceId(r),s={mapInstanceId:a,eventId:this.getEventId(a),style:n};o.length&&(s.importedStyles=o),this.queueRequest({timestamp:Date.now(),payload:s},t)}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:t,payload:i}=this.queue.shift();this.postEvent(t,i,()=>{},e)}},B=F.postStyleLoadEvent.bind(F),V=new class extends P{constructor(){super("gljs.performance")}postPerformanceEvent(t,i){e.e.EVENTS_URL&&(t||e.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:i},t)}processRequests(r){if(this.pendingRequest||0===this.queue.length)return;const{timestamp:n,performanceData:o}=this.queue.shift(),a=function(r){const n=performance.getEntriesByType("resource"),o=performance.getEntriesByType("mark"),a=function(e){const t={};if(e)for(const i in e)if("other"!==i)for(const r of e[i]){const e="".concat(i,"ResolveRangeMin"),n="".concat(i,"ResolveRangeMax"),o="".concat(i,"RequestCount"),a="".concat(i,"RequestCachedCount");t[e]=Math.min(t[e]||1/0,r.startTime),t[n]=Math.max(t[n]||-1/0,r.responseEnd);const s=e=>{void 0===t[e]&&(t[e]=0),++t[e]};void 0!==r.transferSize&&0===r.transferSize&&s(a),s(o)}return t}(function(e,t){const i={};if(e)for(const r of e){const e=t(r);void 0===i[e]&&(i[e]=[]),i[e].push(r)}return i}(n,s)),l=window.devicePixelRatio,c=navigator.connection||navigator.mozConnection||navigator.webkitConnection,u=c?c.effectiveType:void 0,h={counters:[],metadata:[],attributes:[]},d=(e,t,i)=>{null!=i&&e.push({name:t,value:i.toString()})};for(const e in a)d(h.counters,e,a[e]);if(r.interactionRange[0]!==1/0&&r.interactionRange[1]!==-1/0&&(d(h.counters,"interactionRangeMin",r.interactionRange[0]),d(h.counters,"interactionRangeMax",r.interactionRange[1])),o)for(const e of Object.keys(i)){const t=i[e],r=o.find(e=>e.name===t);r&&d(h.counters,t,r.startTime)}return d(h.counters,"visibilityHidden",r.visibilityHidden),d(h.attributes,"style",function(t){if(t)for(const i of t){const t=i.name.split("?")[0];if(e.i(t)){const e=t.split("/").slice(-2);if(2===e.length)return"mapbox://styles/".concat(e[0],"/").concat(e[1])}}}(n)),d(h.attributes,"terrainEnabled",r.terrainEnabled?"true":"false"),d(h.attributes,"fogEnabled",r.fogEnabled?"true":"false"),d(h.attributes,"projection",r.projection),d(h.attributes,"zoom",r.zoom),d(h.metadata,"devicePixelRatio",l),d(h.metadata,"connectionEffectiveType",u),d(h.metadata,"navigatorUserAgent",navigator.userAgent),d(h.metadata,"screenWidth",window.screen.width),d(h.metadata,"screenHeight",window.screen.height),d(h.metadata,"windowWidth",window.innerWidth),d(h.metadata,"windowHeight",window.innerHeight),d(h.metadata,"mapWidth",r.width/l),d(h.metadata,"mapHeight",r.height/l),d(h.metadata,"webglRenderer",r.renderer),d(h.metadata,"webglVendor",r.vendor),d(h.metadata,"sdkVersion",t),d(h.metadata,"sdkIdentifier","mapbox-gl-js"),h}(o);for(const e of a.metadata);for(const e of a.counters);for(const e of a.attributes);this.postEvent(n,a,()=>{},r)}},N=V.postPerformanceEvent.bind(V),U=new class extends P{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(t,i,r,n){if(!e.e.API_URL||!e.e.SESSION_PATH)return;const o=E(e.e.API_URL+e.e.SESSION_PATH);o.params.push("sku=".concat(i||"")),o.params.push("access_token=".concat(n||e.e.ACCESS_TOKEN||""));const a={url:I(o),headers:{"Content-Type":"text/plain"}};this.pendingRequest=e.g(a,e=>{this.pendingRequest=null,r(e),this.saveEventData(),this.processRequests(n)})}getSessionAPI(t,i,r,n){this.skuToken=i,this.errorCb=n,e.e.SESSION_PATH&&e.e.API_URL&&(r||e.e.ACCESS_TOKEN?this.queueRequest({id:t,timestamp:Date.now()},r):this.errorCb(new Error(L)))}processRequests(e){if(this.pendingRequest||0===this.queue.length)return;const{id:t,timestamp:i}=this.queue.shift();t&&this.success[t]||this.getSession(i,this.skuToken,e=>{e?this.errorCb(e):t&&(this.success[t]=!0)},e)}remove(){this.errorCb=null}},j=U.getSessionAPI.bind(U),H=new Set;function Z(e,t){t?H.add(e):H.delete(e)}class W{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages={}}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(e,t){this._updatedSourceCaches[e]=t,this.setDirty()}discardSourceCacheUpdate(e){delete this._updatedSourceCaches[e]}updateLayer(e){const t=e.scope;this._updatedLayers[t]=this._updatedLayers[t]||new Set,this._updatedLayers[t].add(e.id),this.setDirty()}removeLayer(e){const t=e.scope;this._removedLayers[t]=this._removedLayers[t]||{},this._updatedLayers[t]=this._updatedLayers[t]||new Set,this._removedLayers[t][e.id]=e,this._updatedLayers[t].delete(e.id),this._updatedPaintProps.delete(e.fqid),this.setDirty()}getRemovedLayer(e){return this._removedLayers[e.scope]?this._removedLayers[e.scope][e.id]:null}discardLayerRemoval(e){this._removedLayers[e.scope]&&delete this._removedLayers[e.scope][e.id]}getLayerUpdatesByScope(){const e={};for(const t in this._updatedLayers)e[t]=e[t]||{},e[t].updatedIds=Array.from(this._updatedLayers[t].values());for(const t in this._removedLayers)e[t]=e[t]||{},e[t].removedIds=Object.keys(this._removedLayers[t]);return e}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(e){this._updatedPaintProps.add(e.fqid),this.setDirty()}getUpdatedImages(e){return this._updatedImages[e]?Array.from(this._updatedImages[e].values()):[]}updateImage(t,i){this._updatedImages[i]=this._updatedImages[i]||new Set,this._updatedImages[i].add(e.I.toString(t)),this.setDirty()}resetUpdatedImages(e){this._updatedImages[e]&&this._updatedImages[e].clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages={}}}function G(e){const{userImage:t}=e;return!!(t&&t.render&&t.render())&&(e.data.replace(new Uint8Array(t.data.buffer)),!0)}class q extends e.E{constructor(t){super(),this.imageProviders=new Map,this.images=new Map,this.updatedImages=new Map,this.callbackDispatchedThisFrame=new Map,this.loaded=new Map,this.requestors=[],this.patterns=new Map,this.patternsInFlight=new Set,this.atlasImage=new Map,this.atlasTexture=new Map,this.dirty=!0,this.spriteFormat=t,"raster"!==t&&e.t()&&(this.imageRasterizerDispatcher=new e.D(e.x(),this,"Image Rasterizer Worker",1))}addScope(t){this.loaded.set(t,!1),this.imageProviders.set(t,new Map),this.images.set(t,new Map),this.updatedImages.set(t,new Set),this.callbackDispatchedThisFrame.set(t,new Set),this.patterns.set(t,new Map),this.atlasImage.set(t,new e.r({width:1,height:1}))}removeScope(e){this.loaded.delete(e),this.imageProviders.delete(e),this.images.delete(e),this.updatedImages.delete(e),this.callbackDispatchedThisFrame.delete(e),this.patterns.delete(e),this.atlasImage.delete(e);const t=this.atlasTexture.get(e);t&&(t.destroy(),this.atlasTexture.delete(e))}addImageProvider(e,t){this.imageProviders.has(t)||this.imageProviders.set(t,new Map),this.imageProviders.get(t).set(e.id,e)}removeImageProvider(e,t){this.imageProviders.has(t)&&this.imageProviders.get(t).delete(e)}getPendingImageProviders(){const e=[];for(const t of this.imageProviders.values())for(const i of t.values())i.hasPendingRequests()&&e.push(i);return e}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new e.y),this._imageRasterizer}isLoaded(){for(const e of this.loaded.keys())if(!this.loaded.get(e))return!1;return!0}setLoaded(e,t){if(this.loaded.get(t)!==e&&(this.loaded.set(t,e),e)){for(const{ids:e,callback:i}of this.requestors)this._notify(e,t,i);this.requestors=[]}}hasImage(e,t){return!!this.getImage(e,t)}getImage(e,t){return this.images.get(t).get(e.toString())}addImage(e,t,i){this._validate(e,i)&&this.images.get(t).set(e.toString(),i)}_validate(t,i){let r=!0;return this._validateStretch(i.stretchX,i.data&&i.data.width)||(this.fire(new e.z(new Error('Image "'.concat(t.name,'" has invalid "stretchX" value')))),r=!1),this._validateStretch(i.stretchY,i.data&&i.data.height)||(this.fire(new e.z(new Error('Image "'.concat(t.name,'" has invalid "stretchY" value')))),r=!1),this._validateContent(i.content,i)||(this.fire(new e.z(new Error('Image "'.concat(t.name,'" has invalid "content" value')))),r=!1),r}_validateStretch(e,t){if(!e)return!0;let i=0;for(const r of e){if(r[0]<i||r[1]<r[0]||t<r[1])return!1;i=r[1]}return!0}_validateContent(e,t){if(!e)return!0;if(4!==e.length)return!1;if(!t.usvg){if(e[0]<0||t.data.width<e[0])return!1;if(e[1]<0||t.data.height<e[1])return!1;if(e[2]<0||t.data.width<e[2])return!1;if(e[3]<0||t.data.height<e[3])return!1}return!(e[2]<e[0]||e[3]<e[1])}updateImage(e,t,i){const r=this.images.get(t).get(e.toString());i.version=r.version+1,this.images.get(t).set(e.toString(),i),this.updatedImages.get(t).add(e),this.removeFromImageRasterizerCache(e,t)}clearUpdatedImages(e){this.updatedImages.get(e).clear()}removeFromImageRasterizerCache(t,i){"raster"!==this.spriteFormat&&(e.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[t],scope:i}):this.imageRasterizer.removeImagesFromCacheByIds([t],i))}removeImage(e,t){const i=this.images.get(t),r=i.get(e.toString());i.delete(e.toString()),this.patterns.get(t).delete(e.toString()),this.removeFromImageRasterizerCache(e,t),r.userImage&&r.userImage.onRemove&&r.userImage.onRemove()}listImages(t){return Array.from(this.images.get(t).keys()).map(t=>e.I.from(t))}getImages(e,t,i){const r=[],n=[],o=this.imageProviders.get(t);for(const c of e){if(!c.iconsetId){r.push(c);continue}const e=o.get(c.iconsetId);e&&(this.getImage(c,t)?n.push(c):e.addPendingRequest(c))}if(0===r.length)return void this._notify(n,t,i);let a=!0;const s=!!this.loaded.get(t),l=this.images.get(t);if(!s)for(const c of r)l.has(c.toString())||(a=!1);s||a?this._notify(r,t,i):this.requestors.push({ids:r,scope:t,callback:i})}rasterizeImages(e,t){const i=new Map,{tasks:r,scope:n}=e;for(const[o,a]of r.entries()){const e=this.getImage(a.id,n);e&&i.set(o,{image:e,imageVariant:a})}this._rasterizeImages(n,i,t)}_rasterizeImages(t,i,r){if(e.t())this.imageRasterizerDispatcher.getActor().send("rasterizeImagesWorker",{tasks:i,scope:t},r);else{const e=new Map;for(const[r,{image:n,imageVariant:o}]of i.entries())e.set(r,this.imageRasterizer.rasterize(o,n,t,0));r(void 0,e)}}getUpdatedImages(e){return this.updatedImages.get(e)||new Set}_notify(t,i,r){const n=this.images.get(i),o=new Map;for(const a of t){if(!n.get(a.toString())){if(a.iconsetId)continue;this.fire(new e.A("styleimagemissing",{id:a.name}))}const t=n.get(a.toString());if(!t){e.w('Image "'.concat(a.name,'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.'));continue}const i={data:t.usvg?null:t.data.clone(),pixelRatio:t.pixelRatio,sdf:t.sdf,usvg:t.usvg,version:t.version,stretchX:t.stretchX,stretchY:t.stretchY,content:t.content,hasRenderCallback:Boolean(t.userImage&&t.userImage.render)};t.usvg&&Object.assign(i,{width:t.icon.usvg_tree.width,height:t.icon.usvg_tree.height}),o.set(e.I.toString(a),i)}r(null,o)}getPixelSize(e){const{width:t,height:i}=this.atlasImage.get(e);return{width:t,height:i}}getPattern(t,i,r){const n=t.toString(),o=this.patterns.get(i),a=o.get(n),s=this.getImage(t,i);if(!s)return null;if(a){if(a.position.version===s.version)return a.position;a.position.version=s.version}else{if(s.usvg&&!s.data){const o=this.getPatternInFlightId(n,i);if(this.patternsInFlight.has(o))return null;this.patternsInFlight.add(o);const a=new e.B(t).scaleSelf(e.q.devicePixelRatio),l=new Map([[a.toString(),{image:s,imageVariant:a}]]);return this._rasterizeImages(i,l,(e,t)=>this.storePatternImage(a,i,s,r,t)),null}this.storePattern(t,i,s)}return this._updatePatternAtlas(i,r),o.get(n).position}getPatternInFlightId(t,i){return e.C(t,i)}hasPatternsInFlight(){return 0!==this.patternsInFlight.size}storePatternImage(e,t,i,r,n){const o=e.toString(),a=n?n.get(o):void 0;a&&(i.data=a,this.storePattern(e.id,t,i),this._updatePatternAtlas(t,r),this.patternsInFlight.delete(this.getPatternInFlightId(e.id.toString(),t)))}storePattern(t,i,r){const n={w:r.data.width+2*e.F,h:r.data.height+2*e.F,x:0,y:0},o=new e.G(n,r,e.F);this.patterns.get(i).set(t.toString(),{bin:n,position:o})}bind(t,i){const r=t.gl;let n=this.atlasTexture.get(i);n?this.dirty&&(n.update(this.atlasImage.get(i)),this.dirty=!1):(n=new e.T(t,this.atlasImage.get(i),r.RGBA8),this.atlasTexture.set(i,n)),n.bind(r.LINEAR,r.CLAMP_TO_EDGE)}_updatePatternAtlas(t,i){const r=this.patterns.get(t),n=Array.from(r.values()).map(e=>{let{bin:t}=e;return t}),{w:o,h:a}=e.H(n),s=this.atlasImage.get(t);s.resize({width:o||1,height:a||1});const l=this.images.get(t);for(const[c,{bin:u,position:h}]of r.entries()){let t=h.padding;const r=u.x+t,n=u.y+t,o=l.get(c).data,a=o.width,d=o.height;t=t>1?t-1:t,e.r.copy(o,s,{x:0,y:0},{x:r,y:n},{width:a,height:d},i),e.r.copy(o,s,{x:0,y:d-t},{x:r,y:n-t},{width:a,height:t},i),e.r.copy(o,s,{x:0,y:0},{x:r,y:n+d},{width:a,height:t},i),e.r.copy(o,s,{x:a-t,y:0},{x:r-t,y:n},{width:t,height:d},i),e.r.copy(o,s,{x:0,y:0},{x:r+a,y:n},{width:t,height:d},i),e.r.copy(o,s,{x:a-t,y:d-t},{x:r-t,y:n-t},{width:t,height:t},i),e.r.copy(o,s,{x:0,y:d-t},{x:r+a,y:n-t},{width:t,height:t},i),e.r.copy(o,s,{x:0,y:0},{x:r+a,y:n+d},{width:t,height:t},i),e.r.copy(o,s,{x:a-t,y:0},{x:r-t,y:n+d},{width:t,height:t},i)}this.dirty=!0}beginFrame(){for(const e of this.images.keys())this.callbackDispatchedThisFrame.set(e,new Set)}dispatchRenderCallbacks(e,t){const i=this.images.get(t);for(const r of e){if(this.callbackDispatchedThisFrame.get(t).has(r.toString()))continue;this.callbackDispatchedThisFrame.get(t).add(r.toString());const e=i.get(r.toString());G(e)&&this.updateImage(r,t,e)}}}function X(t){const i=t.key,r=t.value,n=t.valueSpec||{},o=t.objectElementValidators||{},a=t.style,s=t.styleSpec;let l=[];const c=e.J(r);if("object"!==c)return[new e.V(i,r,"object expected, ".concat(c," found"))];for(const u in r){const t=u.split(".")[0];let c;o[t]?c=o[t]:n[t]?c=ge:o["*"]?c=o["*"]:n["*"]&&(c=ge),c?l=l.concat(c({key:(i?"".concat(i,"."):i)+u,value:r[u],valueSpec:n[t]||n["*"],style:a,styleSpec:s,object:r,objectKey:u},r)):l.push(new e.K(i,r[u],'unknown property "'.concat(u,'"')))}for(const u in n)o[u]||n[u].required&&void 0===n[u].default&&void 0===r[u]&&l.push(new e.V(i,r,'missing required property "'.concat(u,'"')));return l}function Y(t){const i=t.value,r=t.valueSpec,n=t.style,o=t.styleSpec,a=t.key,s=t.arrayElementValidator||ge;if("array"!==e.J(i))return[new e.V(a,i,"array expected, ".concat(e.J(i)," found"))];if(r.length&&i.length!==r.length)return[new e.V(a,i,"array length ".concat(r.length," expected, length ").concat(i.length," found"))];if(r["min-length"]&&i.length<r["min-length"])return[new e.V(a,i,"array length at least ".concat(r["min-length"]," expected, length ").concat(i.length," found"))];let l={type:r.value,values:r.values,minimum:r.minimum,maximum:r.maximum,function:void 0};o.$version<7&&(l.function=r.function),"object"===e.J(r.value)&&(l=r.value);let c=[];for(let e=0;e<i.length;e++)c=c.concat(s({array:i,arrayIndex:e,value:i[e],valueSpec:l,style:n,styleSpec:o,key:"".concat(a,"[").concat(e,"]")},!0));return c}function K(t){const i=t.key,r=t.value,n=t.valueSpec;let o=e.J(r);if("number"===o&&r!=r&&(o="NaN"),"number"!==o)return[new e.V(i,r,"number expected, ".concat(o," found"))];if("minimum"in n){let o=n.minimum;if("array"===e.J(n.minimum)&&(o=n.minimum[t.arrayIndex]),r<o)return[new e.V(i,r,"".concat(r," is less than the minimum value ").concat(o))]}if("maximum"in n){let o=n.maximum;if("array"===e.J(n.maximum)&&(o=n.maximum[t.arrayIndex]),r>o)return[new e.V(i,r,"".concat(r," is greater than the maximum value ").concat(o))]}return[]}function J(t){const i=t.valueSpec,r=e.M(t.value.type);let n,o,a,s={};const l="categorical"!==r&&void 0===t.value.property,c=!l,u="array"===e.J(t.value.stops)&&"array"===e.J(t.value.stops[0])&&"object"===e.J(t.value.stops[0][0]),h=X({key:t.key,value:t.value,valueSpec:t.styleSpec.function,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===r)return[new e.V(t.key,t.value,'identity function may not have a "stops" property')];let i=[];const n=t.value;return i=i.concat(Y({key:t.key,value:n,valueSpec:t.valueSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===e.J(n)&&0===n.length&&i.push(new e.V(t.key,n,"array must have at least one stop")),i},default:function(e){return ge({key:e.key,value:e.value,valueSpec:i,style:e.style,styleSpec:e.styleSpec})}}});return"identity"===r&&l&&h.push(new e.V(t.key,t.value,'missing required property "property"')),"identity"===r||t.value.stops||h.push(new e.V(t.key,t.value,'missing required property "stops"')),"exponential"===r&&t.valueSpec.expression&&!e.N(t.valueSpec)&&h.push(new e.V(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(c&&!e.O(t.valueSpec)?h.push(new e.V(t.key,t.value,"property functions not supported")):l&&!e.Q(t.valueSpec)&&h.push(new e.V(t.key,t.value,"zoom functions not supported"))),"categorical"!==r&&!u||void 0!==t.value.property||h.push(new e.V(t.key,t.value,'"property" property is required')),h;function d(t){let r=[];const n=t.value,l=t.key;if("array"!==e.J(n))return[new e.V(l,n,"array expected, ".concat(e.J(n)," found"))];if(2!==n.length)return[new e.V(l,n,"array length 2 expected, length ".concat(n.length," found"))];if(u){if("object"!==e.J(n[0]))return[new e.V(l,n,"object expected, ".concat(e.J(n[0])," found"))];if(void 0===n[0].zoom)return[new e.V(l,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new e.V(l,n,"object stop key must have value")];const i=e.M(n[0].zoom);if("number"!=typeof i)return[new e.V(l,n[0].zoom,"stop zoom values must be numbers")];if(a&&a>i)return[new e.V(l,n[0].zoom,"stop zoom values must appear in ascending order")];i!==a&&(a=i,o=void 0,s={}),r=r.concat(X({key:"".concat(l,"[0]"),value:n[0],valueSpec:{zoom:{}},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:K,value:p}}))}else r=r.concat(p({key:"".concat(l,"[0]"),value:n[0],style:t.style,styleSpec:t.styleSpec},n));return e.S(e.U(n[1]))?r.concat([new e.V("".concat(l,"[1]"),n[1],"expressions are not allowed in function stops.")]):r.concat(ge({key:"".concat(l,"[1]"),value:n[1],valueSpec:i,style:t.style,styleSpec:t.styleSpec}))}function p(t,a){const l=e.J(t.value),c=e.M(t.value),u=null!==t.value?t.value:a;if(n){if(l!==n)return[new e.V(t.key,u,"".concat(l," stop domain type must match previous stop domain type ").concat(n))]}else n=l;if("number"!==l&&"string"!==l&&"boolean"!==l&&"number"!=typeof c&&"string"!=typeof c&&"boolean"!=typeof c)return[new e.V(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==l&&"categorical"!==r){let n="number expected, ".concat(l," found");return e.O(i)&&void 0===r&&(n+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new e.V(t.key,u,n)]}return"categorical"!==r||"number"!==l||"number"==typeof c&&isFinite(c)&&Math.floor(c)===c?"categorical"!==r&&"number"===l&&"number"==typeof c&&"number"==typeof o&&void 0!==o&&c<o?[new e.V(t.key,u,"stop domain values must appear in ascending order")]:(o=c,"categorical"===r&&c in s?[new e.V(t.key,u,"stop domain values must be unique")]:(s[c]=!0,[])):[new e.V(t.key,u,"integer expected, found ".concat(String(c)))]}}function Q(t){const i=("property"===t.expressionContext?e.W:e.X)(e.U(t.value),t.valueSpec);if("error"===i.result)return i.value.map(i=>new e.V("".concat(t.key).concat(i.key),t.value,i.message));const r=i.value.expression||i.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!r.outputDefined())return[new e.V(t.key,t.value,'Invalid data expression for "'.concat(t.propertyKey,'". Output values must be contained as literals within the expression.'))];if("property"===t.expressionContext&&"layout"===t.propertyType&&!e.Y(r))return[new e.V(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext)return $(r,t);if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!e.Z(r,["zoom","feature-state"]))return[new e.V(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!e._(r))return[new e.V(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function $(t,i){const r=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(i.valueSpec&&i.valueSpec.expression)for(const e of i.valueSpec.expression.parameters)r.delete(e);if(0===r.size)return[];const n=[];return t instanceof e.$&&r.has(t.name)?[new e.V(i.key,i.value,'["'.concat(t.name,'"] expression is not supported in a filter for a ').concat(i.object.type," layer with id: ").concat(i.object.id))]:(t.eachChild(e=>{n.push(...$(e,i))}),n)}function ee(t){const i=t.key,r=t.value,n=t.valueSpec,o=[];return Array.isArray(n.values)?-1===n.values.indexOf(e.M(r))&&o.push(new e.V(i,r,"expected one of [".concat(n.values.join(", "),"], ").concat(JSON.stringify(r)," found"))):-1===Object.keys(n.values).indexOf(e.M(r))&&o.push(new e.V(i,r,"expected one of [".concat(Object.keys(n.values).join(", "),"], ").concat(JSON.stringify(r)," found"))),o}function te(t){return e.a1(e.U(t.value))?Q(e.L({},t,{expressionContext:"filter",valueSpec:t.styleSpec["filter_".concat(t.layerType||"fill")]})):ie(t)}function ie(t){const i=t.value,r=t.key;if("array"!==e.J(i))return[new e.V(r,i,"array expected, ".concat(e.J(i)," found"))];const n=t.styleSpec;let o,a=[];if(i.length<1)return[new e.V(r,i,"filter array must have at least 1 element")];switch(a=a.concat(ee({key:"".concat(r,"[0]"),value:i[0],valueSpec:n.filter_operator,style:t.style,styleSpec:t.styleSpec})),e.M(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&"$type"===e.M(i[1])&&a.push(new e.V(r,i,'"$type" cannot be use with operator "'.concat(i[0],'"')));case"==":case"!=":3!==i.length&&a.push(new e.V(r,i,'filter array for operator "'.concat(i[0],'" must have 3 elements')));case"in":case"!in":i.length>=2&&(o=e.J(i[1]),"string"!==o&&a.push(new e.V("".concat(r,"[1]"),i[1],"string expected, ".concat(o," found"))));for(let s=2;s<i.length;s++)o=e.J(i[s]),"$type"===e.M(i[1])?a=a.concat(ee({key:"".concat(r,"[").concat(s,"]"),value:i[s],valueSpec:n.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==o&&"number"!==o&&"boolean"!==o&&a.push(new e.V("".concat(r,"[").concat(s,"]"),i[s],"string, number, or boolean expected, ".concat(o," found")));break;case"any":case"all":case"none":for(let e=1;e<i.length;e++)a=a.concat(ie({key:"".concat(r,"[").concat(e,"]"),value:i[e],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":o=e.J(i[1]),2!==i.length?a.push(new e.V(r,i,'filter array for "'.concat(i[0],'" operator must have 2 elements'))):"string"!==o&&a.push(new e.V("".concat(r,"[1]"),i[1],"string expected, ".concat(o," found")))}return a}function re(t,i){const r=t.key,n=t.style,o=t.layer,a=t.styleSpec,s=t.value,l=t.objectKey,c=a["".concat(i,"_").concat(t.layerType)];if(!c)return[];const u=l.match(/^(.*)-use-theme$/);if("paint"===i&&u&&c[u[1]])return e.S(s)?[].concat(ge({key:t.key,value:s,valueSpec:{type:"string",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},style:n,styleSpec:a,expressionContext:"property",propertyType:i,propertyKey:l})):ge({key:r,value:s,valueSpec:{type:"string"},style:n,styleSpec:a});const h=l.match(/^(.*)-transition$/);if("paint"===i&&h&&c[h[1]]&&c[h[1]].transition)return ge({key:r,value:s,valueSpec:a.transition,style:n,styleSpec:a});const d=t.valueSpec||c[l];if(!d)return[new e.K(r,s,'unknown property "'.concat(l,'"'))];let p;if("string"===e.J(s)&&e.O(d)&&!d.tokens&&(p=/^{([^}]+)}$/.exec(s))){const t='`{ "type": "identity", "property": '.concat(p?JSON.stringify(p[1]):'"_"'," }`");return[new e.V(r,s,'"'.concat(l,'" does not support interpolation syntax\nUse an identity property function instead: ').concat(t,"."))]}const f=[];if("symbol"===t.layerType)"text-field"!==l||!n||n.glyphs||n.imports||f.push(new e.V(r,s,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&e.a2(e.U(s))&&"identity"===e.M(s.type)&&f.push(new e.V(r,s,'"text-font" does not support identity functions'));else if("model"===t.layerType&&"paint"===i&&o&&o.layout&&o.layout.hasOwnProperty("model-id")&&e.O(d)&&(e.a3(d)||e.Q(d))){const t=e.W(e.U(s),d),i=t.value.expression||t.value._styleExpression.expression;i&&!e.Z(i,["measure-light"])&&("model-emissive-strength"===l&&e._(i)&&e.Y(i)||f.push(new e.V(r,s,"".concat(l," does not support measure-light expressions when the model layer source is vector tile or GeoJSON."))))}return f.concat(ge({key:t.key,value:s,valueSpec:d,style:n,styleSpec:a,expressionContext:"property",propertyType:i,propertyKey:l}))}function ne(e){return re(e,"paint")}function oe(e){return re(e,"layout")}function ae(t){let i=[];const r=t.value,n=t.key,o=t.style,a=t.styleSpec;r.type||r.ref||i.push(new e.V(n,r,'either "type" or "ref" is required'));let s=e.M(r.type);const l=e.M(r.ref);if(r.id){const a=e.M(r.id);for(let s=0;s<t.arrayIndex;s++){const t=o.layers[s];e.M(t.id)===a&&i.push(new e.V(n,r.id,'duplicate layer id "'.concat(r.id,'", previously used at line ').concat(t.id.__line__)))}}if("ref"in r){let t;["type","source","source-layer","filter","layout"].forEach(t=>{t in r&&i.push(new e.V(n,r[t],'"'.concat(t,'" is prohibited for ref layers')))}),o.layers.forEach(i=>{e.M(i.id)===l&&(t=i)}),t?t.ref?i.push(new e.V(n,r.ref,"ref cannot reference another ref layer")):s=e.M(t.type):"string"==typeof l&&i.push(new e.V(n,r.ref,'ref layer "'.concat(l,'" not found')))}else if("background"!==s&&"sky"!==s&&"slot"!==s)if(r.source){const t=o.sources&&o.sources[r.source],a=t&&e.M(t.type);t?"vector"===a&&"raster"===s?i.push(new e.V(n,r.source,'layer "'.concat(r.id,'" requires a raster source'))):"raster"===a&&"raster"!==s?i.push(new e.V(n,r.source,'layer "'.concat(r.id,'" requires a vector source'))):"vector"!==a||r["source-layer"]?"raster-dem"===a&&"hillshade"!==s?i.push(new e.V(n,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):"raster-array"!==a||["raster","raster-particle"].includes(s)?"line"===s&&r.paint&&(r.paint["line-gradient"]||r.paint["line-trim-offset"])&&"geojson"===a&&!t.lineMetrics?i.push(new e.V(n,r,'layer "'.concat(r.id,'" specifies a line-gradient, which requires the GeoJSON source to have `lineMetrics` enabled.'))):"raster-particle"===s&&"raster-array"!==a&&i.push(new e.V(n,r.source,'layer "'.concat(r.id,"\" requires a 'raster-array' source."))):i.push(new e.V(n,r.source,"raster-array source can only be used with layer type 'raster'.")):i.push(new e.V(n,r,'layer "'.concat(r.id,'" must specify a "source-layer"'))):i.push(new e.V(n,r.source,'source "'.concat(r.source,'" not found')))}else i.push(new e.V(n,r,'missing required property "source"'));return i=i.concat(X({key:n,value:r,valueSpec:a.layer,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":()=>[],type:()=>ge({key:"".concat(n,".type"),value:r.type,valueSpec:a.layer.type,style:t.style,styleSpec:t.styleSpec,object:r,objectKey:"type"}),filter:t=>te(e.L({layerType:s},t)),layout:t=>X({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>oe(e.L({layerType:s},t))}}),paint:t=>X({layer:r,key:t.key,value:t.value,valueSpec:{},style:t.style,styleSpec:t.styleSpec,objectElementValidators:{"*":t=>ne(e.L({layerType:s,layer:r},t))}})}})),i}function se(t){const i=t.value,r=t.key,n=e.J(i);return"string"!==n?[new e.V(r,i,"string expected, ".concat(n," found"))]:[]}const le={promoteId:function t(i){let{key:r,value:n}=i;if("string"===e.J(n))return se({key:r,value:n});if(Array.isArray(n)){const t=[],i=e.U(n),o=e.X(i);return"error"===o.result&&o.value.forEach(i=>{t.push(new e.V("".concat(r).concat(i.key),null,"".concat(i.message)))}),e.Z(o.value.expression,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])||t.push(new e.V("".concat(r),null,"promoteId expression should be only feature dependent")),t}{const e=[];for(const i in n)e.push(...t({key:"".concat(r,".").concat(i),value:n[i]}));return e}}};function ce(t){const i=t.value,r=t.key,n=t.styleSpec,o=t.style;if(!i.type)return[new e.V(r,i,'"type" is required')];const a=e.M(i.type);let s=[];switch(["vector","raster","raster-dem","raster-array"].includes(a)&&(i.url||i.tiles||s.push(new e.K(r,i,'Either "url" or "tiles" is required.'))),a){case"vector":case"raster":case"raster-dem":case"raster-array":return s=s.concat(X({key:r,value:i,valueSpec:n["source_".concat(a.replace("-","_"))],style:t.style,styleSpec:n,objectElementValidators:le})),s;case"geojson":if(s=X({key:r,value:i,valueSpec:n.source_geojson,style:o,styleSpec:n,objectElementValidators:le}),i.cluster)for(const e in i.clusterProperties){const[t,n]=i.clusterProperties[e],o="string"==typeof t?[t,["accumulated"],["get",e]]:t;s.push(...Q({key:"".concat(r,".").concat(e,".map"),value:n,expressionContext:"cluster-map"})),s.push(...Q({key:"".concat(r,".").concat(e,".reduce"),value:o,expressionContext:"cluster-reduce"}))}return s;case"video":return X({key:r,value:i,valueSpec:n.source_video,style:o,styleSpec:n});case"image":return X({key:r,value:i,valueSpec:n.source_image,style:o,styleSpec:n});case"canvas":return[new e.V(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ee({key:"".concat(r,".type"),value:i.type,valueSpec:{values:ue(n)}})}}function ue(e){return e.source.reduce((t,i)=>{const r=e[i];return"enum"===r.type.type&&(t=t.concat(Object.keys(r.type.values))),t},[])}function he(t){const i=t.value,r=t.styleSpec,n=r.light,o=t.style;let a=[];const s=e.J(i);if(void 0===i)return a;if("object"!==s)return a=a.concat([new e.V("light",i,"object expected, ".concat(s," found"))]),a;for(const l in i){const t=l.match(/^(.*)-transition$/),s=l.match(/^(.*)-use-theme$/);a=a.concat(s&&n[s[1]]?ge({key:l,value:i[l],valueSpec:{type:"string"},style:o,styleSpec:r}):t&&n[t[1]]&&n[t[1]].transition?ge({key:l,value:i[l],valueSpec:r.transition,style:o,styleSpec:r}):n[l]?ge({key:l,value:i[l],valueSpec:n[l],style:o,styleSpec:r}):[new e.V(l,i[l],'unknown property "'.concat(l,'"'))])}return a}function de(t){const i=t.value;let r=[];if(!i)return r;const n=e.J(i);if("object"!==n)return r=r.concat([new e.V("light-3d",i,"object expected, ".concat(n," found"))]),r;const o=t.styleSpec,a=o["light-3d"],s=t.key,l=t.style,c=t.style.lights;for(const d of["type","id"])if(!(d in i))return r=r.concat([new e.V("light-3d",i,"missing property ".concat(d," on light"))]),r;if(i.type&&c)for(let d=0;d<t.arrayIndex;d++){const t=e.M(i.type),n=c[d];e.M(n.type)===t&&r.push(new e.V(s,i.id,'duplicate light type "'.concat(i.type,'", previously defined at line ').concat(n.id.__line__)))}const u="properties_light_".concat(i.type);if(!(u in o))return r=r.concat([new e.V("light-3d",i,"Invalid light type ".concat(i.type))]),r;const h=o[u];for(const d in i)if("properties"===d){const n=i[d],a=e.J(n);if("object"!==a)return r=r.concat([new e.V("properties",n,"object expected, ".concat(a," found"))]),r;for(const s in n){const a=s.match(/^(.*)-transition$/),c=s.match(/^(.*)-use-theme$/);r=r.concat(c&&h[c[1]]?ge({key:d,value:n[s],valueSpec:{type:"string"},style:l,styleSpec:o}):a&&h[a[1]]&&h[a[1]].transition?ge({key:d,value:i[d],valueSpec:o.transition,style:l,styleSpec:o}):h[s]?ge({key:s,value:n[s],valueSpec:h[s],style:l,styleSpec:o}):[new e.K(t.key,n[s],'unknown property "'.concat(s,'"'))])}}else r=r.concat(a[d]?ge({key:d,value:i[d],valueSpec:a[d],style:l,styleSpec:o}):[new e.K(d,i[d],'unknown property "'.concat(d,'"'))]);return r}function pe(t){const i=t.value,r=t.key,n=t.style,o=t.styleSpec,a=o.terrain;let s=[];const l=e.J(i);if(void 0===i)return s;if("null"===l)return s;if("object"!==l)return s=s.concat([new e.V("terrain",i,"object expected, ".concat(l," found"))]),s;for(const c in i){const t=c.match(/^(.*)-transition$/),r=c.match(/^(.*)-use-theme$/);s=s.concat(r&&a[r[1]]?ge({key:c,value:i[c],valueSpec:{type:"string"},style:n,styleSpec:o}):t&&a[t[1]]&&a[t[1]].transition?ge({key:c,value:i[c],valueSpec:o.transition,style:n,styleSpec:o}):a[c]?ge({key:c,value:i[c],valueSpec:a[c],style:n,styleSpec:o}):[new e.K(c,i[c],'unknown property "'.concat(c,'"'))])}if(i.source){const t=n.sources&&n.sources[i.source],o=t&&e.M(t.type);t?"raster-dem"!==o&&s.push(new e.V(r,i.source,"terrain cannot be used with a source of type ".concat(String(o),', it only be used with a "raster-dem" source type'))):s.push(new e.V(r,i.source,'source "'.concat(i.source,'" not found')))}else s.push(new e.V(r,i,'terrain is missing required property "source"'));return s}function fe(t){const i=t.value,r=t.style,n=t.styleSpec,o=n.fog;let a=[];const s=e.J(i);if(void 0===i)return a;if("object"!==s)return a=a.concat([new e.V("fog",i,"object expected, ".concat(s," found"))]),a;for(const l in i){const t=l.match(/^(.*)-transition$/),s=l.match(/^(.*)-use-theme$/);a=a.concat(s&&o[s[1]]?ge({key:l,value:i[l],valueSpec:{type:"string"},style:r,styleSpec:n}):t&&o[t[1]]&&o[t[1]].transition?ge({key:l,value:i[l],valueSpec:n.transition,style:r,styleSpec:n}):o[l]?ge({key:l,value:i[l],valueSpec:o[l],style:r,styleSpec:n}):[new e.K(l,i[l],'unknown property "'.concat(l,'"'))])}return a}const me={"*":()=>[],array:Y,boolean:function(t){const i=t.value,r=t.key,n=e.J(i);return"boolean"!==n?[new e.V(r,i,"boolean expected, ".concat(n," found"))]:[]},number:K,color:function(t){const i=t.key,r=t.value,n=e.J(r);return"string"!==n?[new e.V(i,r,"color expected, ".concat(n," found"))]:null===e.a0.parseCSSColor(r)?[new e.V(i,r,'color expected, "'.concat(r,'" found'))]:[]},enum:ee,filter:te,function:J,layer:ae,object:X,source:ce,model:e.a4,light:he,"light-3d":de,terrain:pe,fog:fe,string:se,formatted:function(e){return 0===se(e).length?[]:Q(e)},resolvedImage:function(e){return 0===se(e).length?[]:Q(e)},projection:function(t){const i=t.value,r=t.styleSpec,n=r.projection,o=t.style;let a=[];const s=e.J(i);if("object"===s)for(const e in i)a=a.concat(ge({key:e,value:i[e],valueSpec:n[e],style:o,styleSpec:r}));else"string"!==s&&(a=a.concat([new e.V("projection",i,"object or string expected, ".concat(s," found"))]));return a},import:function(t){const{value:i,styleSpec:o}=t,{data:a}=i,s=r(i,n);Object.defineProperty(s,"__line__",{value:i.__line__,enumerable:!1});let l=X(e.L({},t,{value:s,valueSpec:o.import}));return""===e.M(s.id)&&l.push(new e.V("".concat(t.key,".id"),s,"import id can't be an empty string")),a&&(l=l.concat(_e(a,o,{key:"".concat(t.key,".data")}))),l},iconset:function(t){const i=t.value,r=t.key,n=t.styleSpec,o=t.style;if(!i.type)return[new e.V(r,i,'"type" is required')];const a=e.M(i.type);let s=[];if(s=s.concat(X({key:r,value:i,valueSpec:n["iconset_".concat(a)],style:o,styleSpec:n})),"source"===a&&i.source){const t=o.sources&&o.sources[i.source],n=t&&e.M(t.type);t?"raster-array"!==n&&s.push(new e.V(r,i.source,"iconset cannot be used with a source of type ".concat(String(n),', it only be used with a "raster-array" source type'))):s.push(new e.V(r,i.source,'source "'.concat(i.source,'" not found')))}return s}};function ge(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t.value,n=t.valueSpec,o=t.styleSpec;if(n.expression&&e.a2(e.M(r)))return J(t);if(n.expression&&e.S(e.U(r)))return Q(t);if(n.type&&me[n.type]){const r=me[n.type](t);return!0===i&&r.length>0&&"array"===e.J(t.value)?Q(t):r}return X(e.L({},t,{valueSpec:n.type?o[n.type]:n}))}function ye(t){const i=t.value,r=t.key,n=se(t);return n.length||(-1===i.indexOf("{fontstack}")&&n.push(new e.V(r,i,'"glyphs" url must include a "{fontstack}" token')),-1===i.indexOf("{range}")&&n.push(new e.V(r,i,'"glyphs" url must include a "{range}" token'))),n}function _e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.a5;return ge({key:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).key||"",value:t,valueSpec:i.$root,styleSpec:i,style:t,objectElementValidators:{glyphs:ye,"*":()=>[]}})}function ve(t){return Pe(_e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.a5))}const xe=e=>Pe(ce(e)),Ce=e=>Pe(he(e)),we=e=>Pe(de(e)),be=e=>Pe(pe(e)),Se=e=>Pe(fe(e)),Le=t=>Pe(function(t){const i=t.value,r=t.style,n=t.styleSpec,o=n.snow;let a=[];const s=e.J(i);if(void 0===i)return a;if("object"!==s)return a=a.concat([new e.V("snow",i,"object expected, ".concat(s," found"))]),a;for(const l in i){const t=l.match(/^(.*)-transition$/);a=a.concat(t&&o[t[1]]&&o[t[1]].transition?ge({key:l,value:i[l],valueSpec:n.transition,style:r,styleSpec:n}):o[l]?ge({key:l,value:i[l],valueSpec:o[l],style:r,styleSpec:n}):[new e.K(l,i[l],'unknown property "'.concat(l,'"'))])}return a}(t)),Te=t=>Pe(function(t){const i=t.value,r=t.style,n=t.styleSpec,o=n.rain;let a=[];const s=e.J(i);if(void 0===i)return a;if("object"!==s)return a=a.concat([new e.V("rain",i,"object expected, ".concat(s," found"))]),a;for(const l in i){const t=l.match(/^(.*)-transition$/);a=a.concat(t&&o[t[1]]&&o[t[1]].transition?ge({key:l,value:i[l],valueSpec:n.transition,style:r,styleSpec:n}):o[l]?ge({key:l,value:i[l],valueSpec:o[l],style:r,styleSpec:n}):[new e.K(l,i[l],'unknown property "'.concat(l,'"'))])}return a}(t)),Me=e=>Pe(ae(e)),Ee=e=>Pe(te(e)),Ie=e=>Pe(ne(e)),Ae=e=>Pe(oe(e)),ke=t=>Pe(e.a4(t));function Pe(e){return e.slice().sort((e,t)=>e.line&&t.line?e.line-t.line:0)}function Oe(t,i){let r=!1;if(i&&i.length)for(const n of i)n instanceof e.K?e.w(n.message):(t.fire(new e.z(new Error(n.message))),r=!0);return r}let Re;class ze extends e.E{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"flat";super(),this._transitionable=new e.a6(Re||(Re=new e.a7({anchor:new e.a8(e.a5.light.anchor),position:new e.a9(e.a5.light.position),color:new e.a8(e.a5.light.color),intensity:new e.a8(e.a5.light.intensity)}))),this.setLight(t,i),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._validate(Ce,e,i)||(this._transitionable.setTransitionOrValue(e),this.id=t)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,r){return(!r||!1!==r.validate)&&Oe(this,t.call(ve,e.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.a5})))}}let De=class extends e.E{constructor(t,i,r,n,o){super(),this.scope=r,this._transitionable=new e.a6(new e.a7({source:new e.a8(e.a5.terrain.source),exaggeration:new e.a8(e.a5.terrain.exaggeration)}),r,n),this._transitionable.setTransitionOrValue(t,n),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=i,this.worldview=o}get(){return this._transitionable.serialize()}set(e,t){this._transitionable.setTransitionOrValue(e,t)}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}getExaggeration(t){return this._transitioning.possiblyEvaluate(new e.aa(t,{worldview:this.worldview})).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const t=this._transitionable._values.exaggeration;if(!t)return null;const i=t.value.expression;if(!i)return null;let r=-1,n=-1,o=1;for(const a of i.zoomStops)o=i.evaluate(new e.aa(a,{worldview:this.worldview})),o>.01?(r=a,n=-1):n=a;return o<.01&&r>0&&n>r?[r,n]:null}isZoomDependent(){const t=this._transitionable._values.exaggeration;return null!=t&&null!=t.value&&null!=t.value.expression&&t.value.expression instanceof e.ab}};const Fe=45,Be=65,Ve=.05;function Ne(t,i,r,n){const o=e.af(Fe,Be,r),[a,s]=Ue(t,n);let l=1-Math.min(1,Math.exp((i-a)/(s-a)*-6));return l*=l*l,l=Math.min(1,1.00747*l),l*o*t.alpha}function Ue(e,t){const i=.5/Math.tan(.5*t);return[e.range[0]+i,e.range[1]+i]}function je(t,i,r,n,o){const a=e.ad([],[i,r,n],o.mercatorFogMatrix);return Ne(t,e.ae(a),o.pitch,o._fov)}function He(t,i,r,n,o,a,s){const l=[[r,n,0],[o,n,0],[o,a,0],[r,a,0]];let c=Number.MAX_VALUE,u=-Number.MAX_VALUE;for(const h of l){const t=e.ad([],h,i),r=e.ae(t);c=Math.min(c,r),u=Math.max(u,r)}return[Ne(t,c,s.pitch,s._fov),Ne(t,u,s.pitch,s._fov)]}class Ze extends e.E{constructor(t,i,r,n){super();const o=new e.a7({range:new e.a8(e.a5.fog.range),color:new e.a8(e.a5.fog.color),"color-use-theme":new e.a8({type:"string","property-type":"data-constant",default:"default"}),"high-color":new e.a8(e.a5.fog["high-color"]),"high-color-use-theme":new e.a8({type:"string","property-type":"data-constant",default:"default"}),"space-color":new e.a8(e.a5.fog["space-color"]),"space-color-use-theme":new e.a8({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new e.a8(e.a5.fog["horizon-blend"]),"star-intensity":new e.a8(e.a5.fog["star-intensity"]),"vertical-range":new e.a8(e.a5.fog["vertical-range"])});this._transitionable=new e.a6(o,r,new Map(n)),this.set(t,n),this._transitioning=this._transitionable.untransitioned(),this._transform=i,this.properties=new e.ag(o),this.scope=r}get state(){const t=this._transform,i="globe"===t.projection.name,r=e.ah(t.zoom),n=this.properties.get("range"),o=[.5,3];return{range:i?[e.ai(o[0],n[0],r),e.ai(o[1],n[1],r)]:n,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._validate(Se,t,r))return;const n=e.h({},t);for(const o of Object.keys(e.a5.fog))void 0===n[o]&&(n[o]=e.a5.fog[o].default);this._options=n,this._transitionable.setTransitionOrValue(this._options,i)}getOpacity(t){if(!this._transform.projection.supportsFog)return 0;const i=this.properties&&this.properties.get("color")||1;return("globe"===this._transform.projection.name?1:e.af(Fe,Be,t))*i.a}getOpacityAtLatLng(t,i){return this._transform.projection.supportsFog?function(t,i,r){const n=e.ac.fromLngLat(i),o=r.elevation?r.elevation.getAtPointOrZero(n):0;return je(t,n.x,n.y,o,r)}(this.state,t,i):0}getOpacityForTile(t){if(!this._transform.projection.supportsFog)return[1,1];const i=this._transform.calculateFogTileMatrix(t.toUnwrapped());return He(this.state,i,0,0,e.aj,e.aj,this._transform)}getOpacityForBounds(e,t,i,r,n){return this._transform.projection.supportsFog?He(this.state,e,t,i,r,n,this._transform):[1,1]}getFovAdjustedRange(e){return this._transform.projection.supportsFog?Ue(this.state,e):[0,1]}isVisibleOnFrustum(t){if(!this._transform.projection.supportsFog)return!1;const i=[4,5,6,7];for(const r of i){const i=t.points[r];let n;if(i[2]>=0)n=i;else{const o=t.points[r-4];n=e.ak(o,i,o[2]/(o[2]-i[2]))}if(je(this.state,n[0],n[1],0,this._transform)>=Ve)return!0}return!1}updateConfig(e){this._transitionable.setTransitionOrValue(this._options,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,r){return(!r||!1!==r.validate)&&Oe(this,t.call(ve,e.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.a5})))}}let We,Ge,qe,Xe,Ye=class extends e.E{constructor(t,i,r,n){super();const o=We||(We=new e.a7({density:new e.a8(e.a5.snow.density),intensity:new e.a8(e.a5.snow.intensity),color:new e.a8(e.a5.snow.color),opacity:new e.a8(e.a5.snow.opacity),vignette:new e.a8(e.a5.snow.vignette),"vignette-color":new e.a8(e.a5.snow["vignette-color"]),"center-thinning":new e.a8(e.a5.snow["center-thinning"]),direction:new e.a8(e.a5.snow.direction),"flake-size":new e.a8(e.a5.snow["flake-size"])}));this._transitionable=new e.a6(o,r,new Map(n)),this.set(t,n),this._transitioning=this._transitionable.untransitioned(),this.properties=new e.ag(o),this.scope=r}get state(){const t=this.properties.get("opacity"),i=this.properties.get("color"),r=this.properties.get("direction"),n=e.al(r[0]),o=-Math.max(e.al(r[1]),.01),a=[Math.cos(n)*Math.cos(o),Math.sin(n)*Math.cos(o),Math.sin(o)],s=this.properties.get("vignette"),l=this.properties.get("vignette-color");return l.a=s,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new e.am(i.r,i.g,i.b,i.a*t),direction:a,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:l}}get(){return this._transitionable.serialize()}set(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._validate(Le,t,r))return;const n=e.h({},t);for(const o of Object.keys(e.a5.snow))void 0===n[o]&&(n[o]=e.a5.snow[o].default);this._options=n,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(e){this._transitionable.setTransitionOrValue(this._options,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,r){return(!r||!1!==r.validate)&&Oe(this,t.call(ve,e.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.a5})))}},Ke=class extends e.E{constructor(t,i,r,n){super();const o=Ge||(Ge=new e.a7({density:new e.a8(e.a5.rain.density),intensity:new e.a8(e.a5.rain.intensity),color:new e.a8(e.a5.rain.color),opacity:new e.a8(e.a5.rain.opacity),vignette:new e.a8(e.a5.rain.vignette),"vignette-color":new e.a8(e.a5.rain["vignette-color"]),"center-thinning":new e.a8(e.a5.rain["center-thinning"]),direction:new e.a8(e.a5.rain.direction),"droplet-size":new e.a8(e.a5.rain["droplet-size"]),"distortion-strength":new e.a8(e.a5.rain["distortion-strength"])}));this._transitionable=new e.a6(o,r,new Map(n)),this.set(t,n),this._transitioning=this._transitionable.untransitioned(),this.properties=new e.ag(o),this.scope=r}get state(){const t=this.properties.get("opacity"),i=this.properties.get("color"),r=this.properties.get("direction"),n=e.al(r[0]),o=-Math.max(e.al(r[1]),.01),a=[Math.cos(n)*Math.cos(o),Math.sin(n)*Math.cos(o),Math.sin(o)],s=this.properties.get("vignette-color");return s.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new e.am(i.r,i.g,i.b,i.a*t),direction:a,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:s}}get(){return this._transitionable.serialize()}set(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._validate(Te,t,r))return;const n=e.h({},t);for(const o of Object.keys(e.a5.rain))void 0===n[o]&&(n[o]=e.a5.rain[o].default);this._options=n,this._transitionable.setTransitionOrValue(this._options,i)}updateConfig(e){this._transitionable.setTransitionOrValue(this._options,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(t,i,r){return(!r||!1!==r.validate)&&Oe(this,t.call(ve,e.h({value:i,style:{glyphs:!0,sprite:!0},styleSpec:e.a5})))}};class Je extends e.E{constructor(t,i,r,n){super(),this.scope=r,this._options=t,this.properties=new e.ag(i),this._transitionable=new e.a6(i,r,new Map(n)),this._transitionable.setTransitionOrValue(t.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(e){this._transitionable.setTransitionOrValue(this._options.properties,new Map(e))}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(e,t){this._options=e,this._transitionable.setTransitionOrValue(e.properties,t)}shadowsEnabled(){return!!this.properties&&!0===this.properties.get("cast-shadows")}}class Qe{constructor(e,t,i,r){this.screenBounds=e,this.cameraPoint=t,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=i,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,r)}static createFromScreenPoints(t,i){let r,n;if(t instanceof e.P||"number"==typeof t[0]){const o=e.P.convert(t);r=[o],n=i.isPointAboveHorizon(o)}else{const o=e.P.convert(t[0]),a=e.P.convert(t[1]),s=o.add(a)._div(2);r=[o,a],n=e.ao(o,a).every(e=>i.isPointAboveHorizon(e))&&i.isPointAboveHorizon(s)}return new Qe(r,i.getCameraPoint(),n,i)}isPointQuery(){return 1===this.screenBounds.length}bufferedScreenGeometry(t){return e.ao(this.screenBounds[0],1===this.screenBounds.length?this.screenBounds[0]:this.screenBounds[1],t)}bufferedCameraGeometry(t){const i=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.P(1,1)):this.screenBounds[1],n=e.ao(i,r,0,!1);return this.cameraPoint.y>r.y&&(this.cameraPoint.x>i.x&&this.cameraPoint.x<r.x?n.splice(3,0,this.cameraPoint):this.cameraPoint.x>=r.x?n[2]=this.cameraPoint:this.cameraPoint.x<=i.x&&(n[3]=this.cameraPoint)),e.ap(n,t)}bufferedCameraGeometryGlobe(t){const i=this.screenBounds[0],r=1===this.screenBounds.length?this.screenBounds[0].add(new e.P(1,1)):this.screenBounds[1],n=e.ao(i,r,t),o=this.cameraPoint.clone();switch(3*((o.y>i.y)+(o.y>r.y))+((o.x>i.x)+(o.x>r.x))){case 0:n[0]=o,n[4]=o.clone();break;case 1:n.splice(1,0,o);break;case 2:n[1]=o;break;case 3:n.splice(4,0,o);break;case 5:n.splice(2,0,o);break;case 6:n[3]=o;break;case 7:n.splice(3,0,o);break;case 8:n[2]=o}return n}containsTile(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=t.queryPadding/i._pixelsPerMercatorPixel+1,a=r?this._bufferedCameraMercator(o,i):this._bufferedScreenMercator(o,i);let s=t.tileID.wrap+(a.unwrapped?n:0);const l=a.polygon.map(i=>e.aq(t.tileTransform,i,s));if(!e.ar(l,0,0,e.aj,e.aj))return;s=t.tileID.wrap+(this.screenGeometryMercator.unwrapped?n:0);const c=this.screenGeometryMercator.polygon.map(i=>e.as(t.tileTransform,i,s)),u=c.map(t=>new e.P(t[0],t[1])),h=i.getFreeCameraOptions().position||new e.ac(0,0,0),d=e.as(t.tileTransform,h,s),p=c.map(t=>{const i=e.at(t,t,d);return e.au(i,i),new e.av(d,i)}),f=e.aw(t,1,i.zoom)*i._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:u,tilespaceRays:p,bufferedTilespaceGeometry:l,bufferedTilespaceBounds:(m=e.ax(l),m.min.x=e.ay(m.min.x,0,e.aj),m.min.y=e.ay(m.min.y,0,e.aj),m.max.x=e.ay(m.max.x,0,e.aj),m.max.y=e.ay(m.max.y,0,e.aj),m),tile:t,tileID:t.tileID,pixelToTileUnitsFactor:f};var m}_bufferedScreenMercator(e,t){const i=tt(e);if(this._screenRaycastCache[i])return this._screenRaycastCache[i];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedScreenGeometry(e),t):{polygon:this.bufferedScreenGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._screenRaycastCache[i]=r,r}}_bufferedCameraMercator(e,t){const i=tt(e);if(this._cameraRaycastCache[i])return this._cameraRaycastCache[i];{let r;return r="globe"===t.projection.name?this._projectAndResample(this.bufferedCameraGeometryGlobe(e),t):{polygon:this.bufferedCameraGeometry(e).map(e=>t.pointCoordinate3D(e)),unwrapped:!0},this._cameraRaycastCache[i]=r,r}}_projectAndResample(t,i){const r=function(t,i){const r=e.az([],i.pixelMatrix,i.globeMatrix),n=[0,-e.aB,0,1],o=[0,e.aB,0,1],a=[0,0,0,1];e.aA(n,n,r),e.aA(o,o,r),e.aA(a,a,r);const s=new e.P(n[0]/n[3],n[1]/n[3]),l=new e.P(o[0]/o[3],o[1]/o[3]),c=e.aC(t,s)&&n[3]<a[3],u=e.aC(t,l)&&o[3]<a[3];if(!c&&!u)return null;const h=function(e,t,i){for(let r=1;r<e.length;r++){const n=et(t.pointCoordinate3D(e[r-1]).x),o=et(t.pointCoordinate3D(e[r]).x);if(i<0){if(n<o)return{idx:r,t:-n/(o-1-n)}}else if(o<n)return{idx:r,t:(1-n)/(o+1-n)}}return null}(t,i,c?-1:1);if(!h)return null;const{idx:d,t:p}=h;let f=d>1?$e(t.slice(0,d),i):[],m=d<t.length?$e(t.slice(d),i):[];f=f.map(t=>new e.P(et(t.x),t.y)),m=m.map(t=>new e.P(et(t.x),t.y));const g=[...f];0===g.length&&g.push(m[m.length-1]);const y=e.ai(g[g.length-1].y,(0===m.length?f[0]:m[0]).y,p);let _;return _=c?[new e.P(0,y),new e.P(0,0),new e.P(1,0),new e.P(1,y)]:[new e.P(1,y),new e.P(1,1),new e.P(0,1),new e.P(0,y)],g.push(..._),0===m.length?g.push(f[0]):g.push(...m),{polygon:g.map(t=>new e.ac(t.x,t.y)),unwrapped:!1}}(t,i);if(r)return r;const n=function(t,i){let r=!1,n=-1/0,o=0;for(let e=0;e<t.length-1;e++)t[e].x>n&&(n=t[e].x,o=e);for(let e=0;e<t.length-1;e++){const i=(o+e)%(t.length-1),n=t[i],a=t[i+1];Math.abs(n.x-a.x)>.5&&(n.x<a.x?(n.x+=1,0===i&&(t[t.length-1].x+=1)):(a.x+=1,i+1===t.length-1&&(t[0].x+=1)),r=!0)}const a=e.aD(i.center.lng);return r&&a<Math.abs(a-1)&&t.forEach(e=>{e.x-=1}),{polygon:t,unwrapped:r}}($e(t,i).map(t=>new e.P(et(t.x),t.y)),i);return{polygon:n.polygon.map(t=>new e.ac(t.x,t.y)),unwrapped:n.unwrapped}}}function $e(t,i){return e.aE(t,e=>{const t=i.pointCoordinate3D(e);e.x=t.x,e.y=t.y},1/256)}function et(e){return e<0?1+e%1:e%1}function tt(e){return 100*e|0}function it(t,i,n,a,s){const l=function(r,n){if(r)return s(r);if(n){if(t.url&&n.tiles&&t.tiles&&delete t.tiles,n.variants){if(!Array.isArray(n.variants))return s(new Error("variants must be an array"));for(const t of n.variants){if(null==t||"object"!=typeof t||t.constructor!==Object)return s(new Error("variant must be an object"));if(!Array.isArray(t.capabilities))return s(new Error("capabilities must be an array"));if(1===t.capabilities.length&&"meshopt"===t.capabilities[0]){n=e.h(n,t);break}}}const r=e.aF(e.h({},n,t),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","extra_bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);r.tiles=i.canonicalizeTileset(r,t.url),s(null,r)}},c=function(e,t,i){if(!e)return null;if(!t&&!i)return e;i=i||e.worldview_default;const r=Object.values(e.language||{});if(0===r.length)return null;const n=Object.values(e.worldview||{});if(0===n.length)return null;const o=r.every(e=>e===t),a=n.every(e=>e===i);return o&&a?e:t in(e.language_options||{})||i in(e.worldview_options||{})?null:e.language_options&&e.worldview_options?e:null}(t.data,n,a);return c?e.q.frame(()=>l(null,c)):t.url?e.n(i.transformRequest(i.normalizeSourceURL(t.url,null,n,a),e.R.Source),l):e.q.frame(()=>{const{data:e}=t,i=r(t,o);l(null,i)})}function rt(t,i){const r=Math.pow(2,i.z),n=Math.floor(e.aD(t.getWest())*r),o=Math.floor(e.aH(t.getNorth())*r),a=Math.ceil(e.aD(t.getEast())*r),s=Math.ceil(e.aH(t.getSouth())*r);return i.x>=n&&i.x<a&&i.y>=o&&i.y<s}class nt{constructor(t,i,r){this.bounds=t?e.aG.convert(this.validateBounds(t)):null,this.minzoom=i||0,this.maxzoom=r||24}validateBounds(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}addExtraBounds(t){if(t){this.extraBounds||(this.extraBounds=[]);for(const i of t)this.extraBounds.push(e.aG.convert(this.validateBounds(i)))}}contains(e){if(e.z>this.maxzoom||e.z<this.minzoom)return!1;if(this.bounds&&!rt(this.bounds,e))return!1;if(!this.extraBounds)return!0;for(const t of this.extraBounds)if(rt(t,e))return!0;return!1}static fromTileJSON(e){if(!e.bounds&&!e.extra_bounds)return null;const t=new nt(e.bounds,e.minzoom,e.maxzoom);return t.addExtraBounds(e.extra_bounds),t}}class ot extends e.E{constructor(t,i,r,n){if(super(),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.h(this,e.aF(i,["url","scheme","tileSize","promoteId"])),this._options=e.h({type:"vector"},i),this._collectResourceTiming=!!i.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(n),this._tileWorkers={},this._deduped=new e.aI}load(t){this._loaded=!1,this.fire(new e.A("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map.getWorldview();this._tileJSONRequest=it(this._options,this.map._requestManager,i,r,(n,o)=>{if(this._tileJSONRequest=null,this._loaded=!0,n)i&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(i)),r&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(r)),this.fire(new e.z(n));else if(o){if(e.h(this,o),this.hasWorldviews=!!o.worldview_options,o.worldview_default&&(this.worldviewDefault=o.worldview_default),o.vector_layers){this.vectorLayers=o.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const e of o.vector_layers)this.vectorLayerIds.push(e.id),o.worldview&&o.worldview[e.source]&&this.localizableLayerIds.add(e.id)}this.tileBounds=nt.fromTileJSON(o),R(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.A("data",{dataType:"source",sourceDataType:"content"}))}t&&t(n)})}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();const t=e.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(t))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(e){this.cancelTileJSONRequest()}serialize(){return e.h({},this._options)}loadTile(t,i){const r=t.tileID.canonical.url(this.tiles,this.scheme),n=this.map._requestManager.normalizeTileURL(r),o=this.map._requestManager.transformRequest(n,e.R.Tile),a=this.map.style?this.map.style.getLut(this.scope):null,s=a?{image:a.image.clone()}:null,l={request:o,data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,lut:s,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:e.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:t.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:t.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor(),worldview:this.map.getWorldview()||this.worldviewDefault};if(this.hasWorldviews&&e.j(r)&&(l.localizableLayerIds=this.localizableLayerIds),l.request.collectResourceTiming=this._collectResourceTiming,t.actor&&"expired"!==t.state)"loading"===t.state?t.reloadCallback=i:t.request=t.actor.send("reloadTile",l,c.bind(this));else if(t.actor=this._tileWorkers[n]=this._tileWorkers[n]||this.dispatcher.getActor(),this.dispatcher.ready)t.request=t.actor.send("loadTile",l,c.bind(this),void 0,!0);else{const i=e.aJ.call({deduped:this._deduped},l,(e,i)=>{e||!i?c.call(this,e):(l.data={cacheControl:i.cacheControl,expires:i.expires,rawData:i.rawData.slice(0)},t.actor&&t.actor.send("loadTile",l,c.bind(this),void 0,!0))},!0);t.request={cancel:i}}function c(r,n){return delete t.request,t.aborted?i(null):r&&404!==r.status?i(r):(n&&n.resourceTiming&&(t.resourceTiming=n.resourceTiming),this.map._refreshExpiredTiles&&n&&t.setExpiryData(n),t.loadVectorData(n,this.map.painter),e.aK(this.dispatcher),i(null),void(t.reloadCallback&&(this.loadTile(t,t.reloadCallback),t.reloadCallback=null)))}}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(e,t){e.actor&&e.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope}),e.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class at extends e.E{constructor(t,i,r,n){super(),this.id=t,this.dispatcher=r,this.setEventedParent(n),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.h({type:"raster"},i),e.h(this,e.aF(i,["url","scheme","tileSize"]))}load(t){this._loaded=!1,this.fire(new e.A("dataloading",{dataType:"source"}));const i=this.map.getWorldview();this._tileJSONRequest=it(this._options,this.map._requestManager,null,i,(i,r)=>{this._tileJSONRequest=null,this._loaded=!0,i?this.fire(new e.z(i)):r&&(e.h(this,r),r.raster_layers&&(this.rasterLayers=r.raster_layers,this.rasterLayerIds=this.rasterLayers.map(e=>e.id)),this.tileBounds=nt.fromTileJSON(r),R(r.tiles),this.fire(new e.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.A("data",{dataType:"source",sourceDataType:"content"}))),t&&t(i)})}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();const t=e.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(t))}setTiles(e){return this._options.tiles=e,this.reload(),this}setUrl(e){return this.url=e,this._options.url=e,this.reload(),this}onRemove(e){this.cancelTileJSONRequest()}serialize(){return e.h({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(t,i){const r=e.q.devicePixelRatio>=2,n=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),r,this.tileSize);t.request=e.o(this.map._requestManager.transformRequest(n,e.R.Tile),(r,n,o,a)=>(delete t.request,t.aborted?(t.state="unloaded",i(null)):r?(t.state="errored",i(r)):n?(this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:o,expires:a}),t.setTexture(n,this.map.painter),t.state="loaded",e.aK(this.dispatcher),void i(null)):i(null)))}abortTile(e,t){e.request&&(e.request.cancel(),delete e.request),t&&t()}unloadTile(t,i){t.texture&&t.texture instanceof e.T?(t.destroy(!0),t.texture&&t.texture instanceof e.T&&this.map.painter.saveTileTexture(t.texture)):t.destroy(),i&&i()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class st extends at{constructor(t,i,r,n){super(t,i,r,n),this.type="raster-array",this.maxzoom=22,this.partial=!0,this._options=e.h({type:"raster-array"},i)}triggerRepaint(e){const t=this.map.painter._terrain,i=this.map.style.getSourceCache(this.id);t&&t.enabled&&i&&t._clearRenderCacheForTile(i.id,e.tileID),this.map.triggerRepaint()}loadTile(t,i){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),n=this.map._requestManager.transformRequest(r,e.R.Tile),o={request:n,uid:t.uid,tileID:t.tileID,type:this.type,source:this.id,scope:this.scope,partial:this.partial};t.source=this.id,t.scope=this.scope,t.requestParams=n,t.actor||(t.actor=this.dispatcher.getActor());const a=(e,r,n,o)=>{if(delete t.request,t.aborted)return t.state="unloaded",i(null);if(e){if("AbortError"===e.name)return;return t.state="errored",i(e)}if(this.map._refreshExpiredTiles&&r&&t.setExpiryData({cacheControl:n,expires:o}),this.partial)t.state="empty";else{if(!r)return i(null);t.state="loaded",t._isHeaderLoaded=!0,t._mrt=r}i(null)};t.request=this.partial?t.fetchHeader(void 0,a.bind(this)):t.actor.send("loadTile",o,a.bind(this),void 0,!0)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.actor&&e.actor.send("abortTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(t,i){const r=t.texture;r&&r instanceof e.T?(t.destroy(!0),this.map.painter.saveTileTexture(r)):(t.destroy(),t.flushQueues(),t._isHeaderLoaded=!1,delete t._mrt,delete t.textureDescriptor),t.fbo&&(t.fbo.destroy(),delete t.fbo),delete t.request,delete t.requestParams,delete t.neighboringTiles,t.state="unloaded"}prepareTile(t,i,r){t._isHeaderLoaded&&("empty"!==t.state&&(t.state="reloading"),t.fetchBand(i,r,(i,r)=>{if(i)return t.state="errored",this.fire(new e.z(i)),void this.triggerRepaint(t);r&&(t._isHeaderLoaded=!0,t.setTexture(r,this.map.painter),t.state="loaded",this.triggerRepaint(t))}))}getInitialBand(e){if(!this.rasterLayers)return 0;const t=this.rasterLayers.find(t=>{let{id:i}=t;return i===e}),i=t&&t.fields,r=i&&i.bands&&i.bands;return r?r[0]:0}getTextureDescriptor(t,i,r){if(!t)return;const n=i.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!n)return;let o=null;i instanceof e.aN?o=i.paint.get("raster-array-band"):i instanceof e.aO&&(o=i.paint.get("raster-particle-array-band"));const a=o||this.getInitialBand(n);if(null!=a)if(t.textureDescriptor){if(!t.updateNeeded(n,a)||r)return Object.assign({},t.textureDescriptor,{texture:t.texture})}else this.prepareTile(t,n,a)}getImages(t,i){const r=new Map;for(const n of t)for(const t of i){const[i,o]=t.split("/"),a=n.getLayer(i);if(!a)continue;if(!a.hasBand(o)||!a.hasDataForBand(o))continue;const{bytes:s,tileSize:l,buffer:c}=a.getBandView(o),u=l+2*c,h={data:new e.r({width:u,height:u},s),pixelRatio:2,sdf:!1,usvg:!1,version:0};r.set(t,h)}return r}}const lt={vector:ot,raster:at,"raster-dem":class extends at{constructor(t,i,r,n){super(t,i,r,n),this.type="raster-dem",this.maxzoom=22,this._options=e.h({type:"raster-dem"},i),this.encoding=i.encoding||"mapbox"}loadTile(t,i){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function n(e,r){e&&(t.state="errored",i(e)),r&&(t.dem=r,t.dem.onDeserialize(),t.needsHillshadePrepare=!0,t.needsDEMTextureUpload=!0,t.state="loaded",i(null))}t.request=e.o(this.map._requestManager.transformRequest(r,e.R.Tile),function(r,o,a,s){if(delete t.request,t.aborted)t.state="unloaded",i(null);else if(r)t.state="errored",i(r);else if(o){this.map._refreshExpiredTiles&&t.setExpiryData({cacheControl:a,expires:s});const i=ImageBitmap&&o instanceof ImageBitmap&&e.t(),r=1-(o.width-e.aL(o.width))/2;r<1||t.neighboringTiles||(t.neighboringTiles=this._getNeighboringTiles(t.tileID));const l=i?o:e.q.getImageData(o,r),c={uid:t.uid,tileID:t.tileID,source:this.id,type:this.type,scope:this.scope,rawImageData:l,encoding:this.encoding,padding:r};t.actor&&"expired"!==t.state||(t.actor=this.dispatcher.getActor(),t.actor.send("loadTile",c,n.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(t){const i=t.canonical,r=Math.pow(2,i.z),n=(i.x-1+r)%r,o=0===i.x?t.wrap-1:t.wrap,a=(i.x+1+r)%r,s=i.x+1===r?t.wrap+1:t.wrap,l={};return l[new e.aM(t.overscaledZ,o,i.z,n,i.y).key]={backfilled:!1},l[new e.aM(t.overscaledZ,s,i.z,a,i.y).key]={backfilled:!1},i.y>0&&(l[new e.aM(t.overscaledZ,o,i.z,n,i.y-1).key]={backfilled:!1},l[new e.aM(t.overscaledZ,t.wrap,i.z,i.x,i.y-1).key]={backfilled:!1},l[new e.aM(t.overscaledZ,s,i.z,a,i.y-1).key]={backfilled:!1}),i.y+1<r&&(l[new e.aM(t.overscaledZ,o,i.z,n,i.y+1).key]={backfilled:!1},l[new e.aM(t.overscaledZ,t.wrap,i.z,i.x,i.y+1).key]={backfilled:!1},l[new e.aM(t.overscaledZ,s,i.z,a,i.y+1).key]={backfilled:!1}),l}},"raster-array":st,geojson:class extends e.E{constructor(t,i,r,n){super(),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=r.getActor(),this.setEventedParent(n),this._data=i.data,this._options=e.h({},i),this._collectResourceTiming=i.collectResourceTiming,void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),void 0!==i.minzoom&&(this.minzoom=i.minzoom),i.type&&(this.type=i.type),i.attribution&&(this.attribution=i.attribution),this.promoteId=i.promoteId;const o=e.aj/this.tileSize;this.workerOptions=e.h({source:this.id,scope:this.scope,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*o,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*o,extent:e.aj,maxZoom:this.maxzoom,lineMetrics:i.lineMetrics||!1,generateId:i.generateId||!1},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?i.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,i.clusterMinPoints||2),extent:e.aj,radius:(void 0!==i.clusterRadius?i.clusterRadius:50)*o,log:!1,generateId:i.generateId||!1},clusterProperties:i.clusterProperties,filter:i.filter,dynamic:i.dynamic},i.workerOptions)}onAdd(e){this.map=e,this.setData(this._data)}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(t){if(!this._options.dynamic)return this.fire(new e.z(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if("string"!=typeof t&&("Feature"===t.type&&(t={type:"FeatureCollection",features:[t]}),"FeatureCollection"!==t.type))return this.fire(new e.z(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&"string"!=typeof t&&"string"!=typeof this._data&&"FeatureCollection"===this._data.type){const e=new Map;for(const t of this._data.features)e.set(t.id,t);for(const i of t.features)e.set(i.id,i);this._data.features=[...e.values()]}else this._data=t;return this._updateWorkerData(!0),this}getClusterExpansionZoom(e,t){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:e,source:this.id,scope:this.scope},t),this}getClusterChildren(e,t){return this.actor.send("geojson.getClusterChildren",{clusterId:e,source:this.id,scope:this.scope},t),this}getClusterLeaves(e,t,i,r){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:e,limit:t,offset:i},r),this}_updateWorkerData(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new e.A("dataloading",{dataType:"source"})),this._loaded=!1;const i=e.h({append:t},this.workerOptions);i.scope=this.scope;const r=this._data;"string"==typeof r?(i.request=this.map._requestManager.transformRequest(e.q.resolveURL(r),e.R.Source),i.request.collectResourceTiming=this._collectResourceTiming):i.data=JSON.stringify(r),this._pendingLoad=this.actor.send("".concat(this.type,".loadData"),i,(i,r)=>{if(this._loaded=!0,this._pendingLoad=null,i)this.fire(new e.z(i));else{const i={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&r&&r.resourceTiming&&r.resourceTiming[this.id]&&(i.resourceTiming=r.resourceTiming[this.id]),t&&(this._partialReload=!0),this.fire(new e.A("data",i)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(t),this._coalesce=!1)})}loaded(){return this._loaded}reload(){const t=e.C(this.id,this.scope);this.map.style.clearSource(t),this._updateWorkerData()}loadTile(t,i){const r=t.actor?"reloadTile":"loadTile";t.actor=this.actor;const n=this.map.style?this.map.style.getLut(this.scope):null,o=n?{image:n.image.clone()}:null,a=this._partialReload,s={type:this.type,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:o,scope:this.scope,pixelRatio:e.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:t.isExtraShadowCaster,scaleFactor:this.map.getScaleFactor(),partial:a,worldview:this.map.getWorldview()};t.request=this.actor.send(r,s,(e,n)=>a&&!n?(t.state="loaded",i(null)):(delete t.request,t.destroy(),t.aborted?i(null):e?i(e):(t.loadVectorData(n,this.map.painter,"reloadTile"===r),i(null))),void 0,"loadTile"===r)}abortTile(e){e.request&&(e.request.cancel(),delete e.request),e.aborted=!0}unloadTile(e,t){this.actor.send("removeTile",{uid:e.uid,type:this.type,source:this.id,scope:this.scope}),e.destroy()}onRemove(e){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return e.h({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends e.aP{constructor(e,t,i,r){super(e,t,i,r),this.roundZoom=!0,this.type="video",this.options=t}load(){this._loaded=!1;const t=this.options;this.urls=[];for(const i of t.urls)this.urls.push(this.map._requestManager.transformRequest(i,e.R.Source).url);e.aQ(this.urls,(t,i)=>{this._loaded=!0,t?this.fire(new e.z(t)):i&&(this.video=i,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(t){if(this.video){const i=this.video.seekable;t<i.start(0)||t>i.end(0)?this.fire(new e.z(new e.V("sources.".concat(this.id),null,"Playback for this video can be set only between the ".concat(i.start(0)," and ").concat(i.end(0),"-second mark.")))):this.video.currentTime=t}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const t=this.map.painter.context,i=t.gl;this.texture?this.video.paused||(this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),i.texSubImage2D(i.TEXTURE_2D,0,0,0,i.RGBA,i.UNSIGNED_BYTE,this.video)):(this.texture=new e.T(t,this.video,i.RGBA8),this.texture.bind(i.LINEAR,i.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(t)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:e.aP,model:class extends e.E{constructor(e,t,i,r){super(),this.id=e,this.type="model",this.models=[],this._loaded=!1,this._options=t}load(){const t=[];for(const i in this._options.models){const r=this._options.models[i],n=e.aS(this.map._requestManager.transformRequest(r.uri,e.R.Model).url).then(t=>{if(!t)return;const n=e.aT(t),o=new e.aU(i,r.position,r.orientation,n);o.computeBoundsAndApplyParent(),this.models.push(o)}).catch(t=>{this.fire(new e.z(new Error("Could not load model ".concat(i," from ").concat(r.uri,": ").concat(t.message))))});t.push(n)}Promise.allSettled(t).then(()=>{this._loaded=!0,this.fire(new e.A("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(t=>{this._loaded=!0,this.fire(new e.z(new Error("Could not load models: ".concat(t.message))))})}onAdd(e){this.map=e,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(e,t){}serialize(){return this._options}},"batched-model":class extends e.E{constructor(e,t,i,r){super(),this.type="batched-model",this.id=e,this.tileSize=512,this._options=t,this.tiles=this._options.tiles,this.maxzoom=t.maxzoom||19,this.minzoom=t.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=i,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(r)}onAdd(e){this.map=e,this.load()}reload(){this.cancelTileJSONRequest();const t=e.C(this.id,this.scope);this.load(()=>this.map.style.clearSource(t))}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}load(t){this._loaded=!1,this.fire(new e.A("dataloading",{dataType:"source"}));const i=Array.isArray(this.map._language)?this.map._language.join():this.map._language,r=this.map.getWorldview();this._tileJSONRequest=it(this._options,this.map._requestManager,i,r,(n,o)=>{this._tileJSONRequest=null,this._loaded=!0,n?(i&&console.warn("Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ".concat(i)),r&&2!==r.length&&console.warn("Requested worldview strings must be a valid ISO alpha-2 code. Found: ".concat(r)),this.fire(new e.z(n))):o&&(e.h(this,o),o.bounds&&(this.tileBounds=new nt(o.bounds,this.minzoom,this.maxzoom)),R(o.tiles,this.map._requestManager._customAccessToken),this.fire(new e.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.A("data",{dataType:"source",sourceDataType:"content"}))),t&&t(n)})}hasTransition(){return!1}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loaded(){return this._loaded}loadTile(t,i){const r=this.map._requestManager.normalizeTileURL(t.tileID.canonical.url(this.tiles,this.scheme)),n={request:this.map._requestManager.transformRequest(r,e.R.Tile),data:void 0,uid:t.uid,tileID:t.tileID,tileZoom:t.tileZoom,zoom:t.tileID.overscaledZ,tileSize:this.tileSize*t.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:t.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,pixelRatio:e.q.devicePixelRatio,promoteId:this.promoteId};if(t.actor&&"expired"!==t.state)if("loading"===t.state)t.reloadCallback=i;else{if(t.buckets){const e=Object.values(t.buckets);for(const t of e)t.dirty=!0;return void(t.state="loaded")}t.request=t.actor.send("reloadTile",n,o.bind(this))}else t.actor=this.dispatcher.getActor(),t.request=t.actor.send("loadTile",n,o.bind(this),void 0,!0);function o(e,r){return t.aborted?i(null):e&&404!==e.status?i(e):(this.map._refreshExpiredTiles&&r&&t.setExpiryData(r),t.loadModelData(r,this.map.painter),t.state="loaded",void i(null))}}serialize(){return e.h({},this._options)}},canvas:class extends e.aP{constructor(t,i,r,n){super(t,i,r,n),i.coordinates?Array.isArray(i.coordinates)&&4===i.coordinates.length&&!i.coordinates.some(e=>!Array.isArray(e)||2!==e.length||e.some(e=>"number"!=typeof e))||this.fire(new e.z(new e.V("sources.".concat(t),null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.z(new e.V("sources.".concat(t),null,'missing required property "coordinates"'))),i.animate&&"boolean"!=typeof i.animate&&this.fire(new e.z(new e.V("sources.".concat(t),null,'optional "animate" property must be a boolean value'))),i.canvas?"string"==typeof i.canvas||i.canvas instanceof HTMLCanvasElement||this.fire(new e.z(new e.V("sources.".concat(t),null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.z(new e.V("sources.".concat(t),null,'missing required property "canvas"'))),this.options=i,this.animate=void 0===i.animate||i.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.z(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(e){this.pause()}prepare(){let t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const i=this.map.painter.context;this.texture?!t&&!this._playing||this.texture instanceof e.aR||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.T(i,this.canvas,i.gl.RGBA8,{premultiply:!0}),this._prepareData(i)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}},custom:class extends e.E{constructor(t,i,r,n){super(),this.id=t,this.type="custom",this._dataType="raster",this._dispatcher=r,this._implementation=i,this.setEventedParent(n),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new e.z(new Error("Missing implementation for ".concat(this.id," custom source")))),this._implementation.loadTile||this.fire(new e.z(new Error("Missing loadTile implementation for ".concat(this.id," custom source")))),this._implementation.bounds&&(this.tileBounds=new nt(this._implementation.bounds,this.minzoom,this.maxzoom)),i.update=this._update.bind(this),i.clearTiles=this._clearTiles.bind(this),i.coveringTiles=this._coveringTiles.bind(this),e.h(this,e.aF(i,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return e.aF(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new e.A("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new e.A("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(t){this.map=t,this._loaded=!1,this.fire(new e.A("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(t),this.load()}onRemove(e){this._implementation.onRemove&&this._implementation.onRemove(e)}hasTile(e){if(this._implementation.hasTile){const{x:t,y:i,z:r}=e.canonical;return this._implementation.hasTile({x:t,y:i,z:r})}return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e,t){const{x:i,y:r,z:n}=e.tileID.canonical,o=new AbortController;e.request=Promise.resolve(this._implementation.loadTile({x:i,y:r,z:n},{signal:o.signal})).then(function(i){return delete e.request,e.aborted?(e.state="unloaded",t(null)):void 0===i?(e.state="errored",t(null)):null===i?(this.loadTileData(e,{width:this.tileSize,height:this.tileSize,data:null}),e.state="loaded",t(null)):function(e){return e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof ImageBitmap||e instanceof HTMLImageElement}(i)?(this.loadTileData(e,i),e.state="loaded",void t(null)):(e.state="errored",t(new Error("Can't infer data type for ".concat(this.id,", only raster data supported at the moment"))))}.bind(this)).catch(i=>{"AbortError"!==i.name&&(e.state="errored",t(i))}),e.request.cancel=()=>o.abort()}loadTileData(e,t){e.setTexture(t,this.map.painter)}unloadTile(t,i){if(t.texture&&t.texture instanceof e.T?(t.destroy(!0),t.texture&&t.texture instanceof e.T&&this.map.painter.saveTileTexture(t.texture)):t.destroy(),this._implementation.unloadTile){const{x:e,y:i,z:r}=t.tileID.canonical;this._implementation.unloadTile({x:e,y:i,z:r})}i&&i()}abortTile(e,t){e.request&&e.request.cancel&&(e.request.cancel(),delete e.request),t&&t()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(e=>({x:e.canonical.x,y:e.canonical.y,z:e.canonical.z}))}_clearTiles(){const t=e.C(this.id,this.scope);this.map.style.clearSource(t)}_update(){this.fire(new e.A("data",{dataType:"source",sourceDataType:"content"}))}}},ct=function(t,i,r,n){const o=new lt[i.type](t,i,r,n);if(o.id!==t)throw new Error("Expected Source id to be ".concat(t," instead of ").concat(o.id));return e.aV(["load","abort","unload","serialize","prepare"],o),o};function ut(e,t){return"".concat(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",":").concat(t.id||"",":").concat(t.layer.id,":").concat(function(e){if("layerId"in e)return"layer:".concat(e.layerId);{const{featuresetId:t,importId:i}=e;return"featureset:".concat(t).concat(i?":import:".concat(i):"")}}(e.target))}function ht(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";if(e.uniqueFeatureID){const n=ut(e,t,r);if(i.has(n))return!0;i.add(n)}return!1}function dt(e,t,i,r){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=t.sourceCache.transform,a=t.sourceCache.tilesIn(e,t.has3DLayers,n);a.sort(mt);const s=[];for(const l of a){const e=l.tile.queryRenderedFeatures(t,l,i,r,o,n);Object.keys(e).length&&s.push({wrappedTileID:l.tile.tileID.wrapped().key,queryResults:e})}return 0===s.length?{}:function(e){const t={},i={};for(const r of e){const e=r.queryResults,n=r.wrappedTileID,o=i[n]=i[n]||{};for(const i in e){const r=e[i],n=o[i]=o[i]||{},a=t[i]=t[i]||[];for(const e of r)n[e.featureIndex]||(n[e.featureIndex]=!0,a.push(e))}}return t}(s)}function pt(e,t,i,r,n,o){const a={},s=r.queryRenderedSymbols(e),l=[];for(const c of Object.keys(s).map(Number))l.push(n[c]);l.sort(mt);for(const c of l){const e=c.featureIndex.lookupSymbolFeatures(s[c.bucketInstanceId],c.bucketIndex,c.sourceLayerIndex,t,i,o);for(const t in e){const i=a[t]=a[t]||[],r=e[t];r.sort((e,t)=>{const i=c.featureSortOrder;if(i){const r=i.indexOf(e.featureIndex);return i.indexOf(t.featureIndex)-r}return t.featureIndex-e.featureIndex});for(const e of r)i.push(e)}}return a}function ft(e,t){const i=e.getRenderableIds().map(t=>e.getTileByID(t)),r=[],n={};for(let o=0;o<i.length;o++){const e=i[o],a=e.tileID.canonical.key;n[a]||(n[a]=!0,e.querySourceFeatures(r,t))}return r}function mt(e,t){const i=e.tileID,r=t.tileID;return i.overscaledZ-r.overscaledZ||i.canonical.y-r.canonical.y||i.wrap-r.wrap||i.canonical.x-r.canonical.x}function gt(e,t){const i={};if(!t)return i;for(const r of e){const e=r.layerIds.map(e=>t.getLayer(e)).filter(Boolean);if(0!==e.length){r.layers=e,r.stateDependentLayerIds&&(r.stateDependentLayers=r.stateDependentLayerIds.map(t=>e.filter(e=>e.id===t)[0]));for(const t of e)i[t.fqid]=r}}return i}const yt=32,_t=33,vt=new Uint16Array(8184);for(let r=0;r<2046;r++){let e=r+2,t=0,i=0,n=0,o=0,a=0,s=0;for(1&e?n=o=a=yt:t=i=s=yt;(e>>=1)>1;){const r=t+n>>1,l=i+o>>1;1&e?(n=t,o=i,t=a,i=s):(t=n,i=o,n=a,o=s),a=r,s=l}const l=4*r;vt[l+0]=t,vt[l+1]=i,vt[l+2]=n,vt[l+3]=o}const xt=new Uint16Array(2178),Ct=new Uint8Array(1089),wt=new Uint16Array(1089);function bt(e){return 0===e?-.03125:32===e?.03125:0}const St={type:2,extent:e.aj,loadGeometry:()=>[[new e.P(0,0),new e.P(e.aj+1,0),new e.P(e.aj+1,e.aj+1),new e.P(0,e.aj+1),new e.P(0,0)]]};class Lt{constructor(t,i,r,n,o,a){this.tileID=t,this.uid=e.a$(),this.uses=0,this.tileSize=i,this.tileZoom=r,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=o,n&&n.style&&(this._lastUpdatedBrightness=n.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",n&&n.transform&&(this.projection=n.transform.projection),this.worldview=a}registerFadeDuration(t){const i=t+this.timeAdded;i<e.q.now()||this.fadeEndTime&&i<this.fadeEndTime||(this.fadeEndTime=i)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}get tileTransform(){return this._tileTransform||(this._tileTransform=e.aW(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(t,i,r){if(this.unloadVectorData(),this.state="loaded",t){t.featureIndex&&(this.latestFeatureIndex=t.featureIndex,t.rawTileData?(this.latestRawTileData=t.rawTileData,this.latestFeatureIndex.rawTileData=t.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=t.collisionBoxArray,this.buckets=gt(t.buckets,i.style),this.hasSymbolBuckets=!1;for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.b1){if(this.hasSymbolBuckets=!0,!r)break;i.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const t in this.buckets){const i=this.buckets[t];if(i instanceof e.b1&&i.hasRTLText){this.hasRTLText=!0,e.b2();break}}this.queryPadding=0;for(const e in this.buckets){const t=this.buckets[e],r=i.style.getOwnLayer(e);if(!r)continue;const n=r.queryRadius(t);this.queryPadding=Math.max(this.queryPadding,n)}t.imageAtlas&&(this.imageAtlas=t.imageAtlas),t.glyphAtlasImage&&(this.glyphAtlasImage=t.glyphAtlasImage),t.lineAtlas&&(this.lineAtlas=t.lineAtlas),this._lastUpdatedBrightness=t.brightness}else this.collisionBoxArray=new e.b0}unloadVectorData(){if(this.hasData()){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(e,t,i){e&&(e.resourceTiming&&(this.resourceTiming=e.resourceTiming),this.buckets=Object.assign({},this.buckets,gt(e.buckets,t.style)),e.featureIndex&&(this.latestFeatureIndex=e.featureIndex))}getBucket(e){return this.buckets[e.fqid]}upload(t){for(const e in this.buckets){const i=this.buckets[e];i.uploadPending()&&i.upload(t)}const i=t.gl,r=this.imageAtlas;r&&!r.uploaded&&(this.imageAtlasTexture=new e.T(t,r.image,i.RGBA8,{useMipmap:!!r.patternPositions.size}),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new e.T(t,this.glyphAtlasImage,i.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new e.T(t,this.lineAtlas.image,i.R8),this.lineAtlas.uploaded=!0)}prepare(e,t,i){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture,i),!t||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const r=t.style.getBrightness();(this._lastUpdatedBrightness||r)&&(this._lastUpdatedBrightness&&r&&Math.abs(this._lastUpdatedBrightness-r)<.001||(this.updateBuckets(t,this._lastUpdatedBrightness!==r),this._lastUpdatedBrightness=r))}queryRenderedFeatures(t,i,r,n,o,a){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const s=function(t,i){const r=e.bn([],[.5*t.width,.5*-t.height,1]);return e.bo(r,r,[1,-1,0]),e.az(r,r,t.calculateProjMatrix(i.toUnwrapped())),Float32Array.from(r)}(o,this.tileID);return this.latestFeatureIndex.query(t,{tilespaceGeometry:i,pixelPosMatrix:s,transform:n,availableImages:r,tileTransform:this.tileTransform,worldview:this.worldview})}querySourceFeatures(t,i){const r=this.latestFeatureIndex;if(!r||!r.rawTileData)return;const n=r.loadVTLayers(),o=i?i.sourceLayer:"",a=n._geojsonTileLayer||n[o];if(!a)return;const s=e.b3(i&&i.filter),{z:l,x:c,y:u}=this.tileID.canonical,h={z:l,x:c,y:u};for(let d=0;d<a.length;d++){const i=a.feature(d);if(s.needGeometry){const t=e.b4(i,!0);if(!s.filter(new e.aa(this.tileID.overscaledZ,{worldview:this.worldview}),t,this.tileID.canonical))continue}else if(!s.filter(new e.aa(this.tileID.overscaledZ,{worldview:this.worldview}),i))continue;const n=r.getId(i,o),p=new e.b5(i,l,c,u,n);p.tile=h,t.push(p)}}loaded(){return"loaded"===this.state||"errored"===this.state}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return!!this.imageAtlas&&!!this.imageAtlas.patternPositions.size}setExpiryData(t){const i=this.expirationTime;if(t.cacheControl){const i=e.b6(t.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else t.expires&&(this.expirationTime=new Date(t.expires).getTime());if(this.expirationTime){const e=Date.now();let t=!1;if(this.expirationTime>e)t=!1;else if(i)if(this.expirationTime<i)t=!0;else{const r=this.expirationTime-i;r?this.expirationTime=e+Math.max(r,3e4):t=!0}else t=!0;t?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}refreshFeatureState(e){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&e&&this.updateBuckets(e)}updateBuckets(t,i){if(!this.latestFeatureIndex)return;if(!t.style)return;const r=this.latestFeatureIndex.loadVTLayers(),n=t.style.listImages(),o=t.style.getBrightness();for(const a in this.buckets){if(!t.style.hasLayer(a))continue;const s=this.buckets[a],l=s.layers[0],c=l.sourceLayer||"_geojsonTileLayer",u=r[c],h=t.style.getLayerSourceCache(l);let d={};h&&(d=h._state.getState(c,void 0));const p=this.imageAtlas?Object.fromEntries(this.imageAtlas.patternPositions):{},f=Object.keys(d).length>0&&!i;f&&!s.stateDependentLayers.length&&!i||s.update(d,u,n,p,f?s.stateDependentLayers:s.layers,i,o),(s instanceof e.b7||s instanceof e.b8)&&t._terrain&&t._terrain.enabled&&h&&s.uploadPending()&&t._terrain._clearRenderCacheForTile(h.id,this.tileID);const m=t&&t.style&&t.style.getOwnLayer(a);m&&(this.queryPadding=Math.max(this.queryPadding,m.queryRadius(s)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<e.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(t){this.symbolFadeHoldUntil=e.q.now()+t}setTexture(t,i){const r=i.context,n=r.gl;this.texture=this.texture||i.getTileTexture(t.width),this.texture&&this.texture instanceof e.T?this.texture.update(t):(this.texture=new e.T(r,t,n.RGBA8,{useMipmap:!0}),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE))}setDependencies(e,t){const i={};for(const r of t)i[r]=!0;this.dependencies[e]=i}hasDependency(e,t){for(const i of e){const e=this.dependencies[i];if(e)for(const i of t)if(e[i])return!0}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(t,i){if(!i||"mercator"===i.name||this._tileDebugBuffer)return;const r=e.b9(St,this.tileID.canonical,this.tileTransform)[0],n=new e.ba,o=new e.bb;for(let e=0;e<r.length;e++){const{x:t,y:i}=r[e];n.emplaceBack(t,i),o.emplaceBack(e)}o.emplaceBack(0),this._tileDebugIndexBuffer=t.createIndexBuffer(o),this._tileDebugBuffer=t.createVertexBuffer(n,e.bc.members),this._tileDebugSegments=e.bd.simpleSegment(0,0,n.length,o.length)}_makeTileBoundsBuffers(t,i){if(this._tileBoundsBuffer||!i||"mercator"===i.name)return;const r=e.b9(St,this.tileID.canonical,this.tileTransform)[0];let n,o;if(this.isRaster){const t=function(t,i){const r=e.aW(t,i),n=Math.pow(2,t.z);for(let u=0;u<_t;u++)for(let o=0;o<_t;o++){const a=e.aX((t.x+(o+bt(o))/yt)/n),s=e.aY((t.y+(u+bt(u))/yt)/n),l=i.project(a,s),c=u*_t+o;xt[2*c+0]=Math.round((l.x*r.scale-r.x)*e.aj),xt[2*c+1]=Math.round((l.y*r.scale-r.y)*e.aj)}Ct.fill(0),wt.fill(0);for(let e=2045;e>=0;e--){const t=4*e,i=vt[t+0],r=vt[t+1],n=vt[t+2],o=vt[t+3],a=i+n>>1,s=r+o>>1,l=a+s-r,c=s+i-a,u=r*_t+i,h=o*_t+n,d=s*_t+a,p=Math.hypot((xt[2*u+0]+xt[2*h+0])/2-xt[2*d+0],(xt[2*u+1]+xt[2*h+1])/2-xt[2*d+1])>=16;Ct[d]=Ct[d]||(p?1:0),e<1022&&(Ct[d]=Ct[d]||Ct[(r+c>>1)*_t+(i+l>>1)]||Ct[(o+c>>1)*_t+(n+l>>1)])}const o=new e.aZ,a=new e.a_;let s=0;function l(t,i){const r=i*_t+t;return 0===wt[r]&&(o.emplaceBack(xt[2*r+0],xt[2*r+1],t*e.aj/yt,i*e.aj/yt),wt[r]=++s),wt[r]-1}function c(e,t,i,r,n,o){const s=e+i>>1,u=t+r>>1;if(Math.abs(e-n)+Math.abs(t-o)>1&&Ct[u*_t+s])c(n,o,e,t,s,u),c(i,r,n,o,s,u);else{const s=l(e,t),c=l(i,r),u=l(n,o);a.emplaceBack(s,c,u)}}return c(0,0,yt,yt,yt,0),c(yt,yt,0,0,0,yt),{vertices:o,indices:a}}(this.tileID.canonical,i);n=t.vertices,o=t.indices}else{n=new e.aZ,o=new e.a_;for(const{x:e,y:i}of r)n.emplaceBack(e,i,0,0);const t=e.be(n.int16.subarray(0,4*n.length),void 0,4);for(let e=0;e<t.length;e+=3)o.emplaceBack(t[e],t[e+1],t[e+2])}this._tileBoundsBuffer=t.createVertexBuffer(n,e.bf.members),this._tileBoundsIndexBuffer=t.createIndexBuffer(o),this._tileBoundsSegments=e.bd.simpleSegment(0,0,n.length,o.length)}_makeGlobeTileDebugBuffers(t,i){const r=i.projection;if(!r||"globe"!==r.name||i.freezeTileCoverage)return;const n=this.tileID.canonical,o=e.bg(n,i),a=e.bh(o),s=e.ah(i.zoom);let l;s>0&&(l=e.bi(new Float64Array(16),i.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(t,n,i,a,l,s),this._makeGlobeTileDebugTextBuffer(t,n,i,a,l,s)}_globePoint(t,i,r,n,o,a,s){let l=e.bj(t,i,r);if(a){const o=1<<r.z,c=e.aD(n.center.lng),u=e.aH(n.center.lat),h=(r.x+.5)/o-c;let d=0;h>.5?d=-1:h<-.5&&(d=1);let p=(t/e.aj+r.x)/o+d,f=(i/e.aj+r.y)/o;p=(p-c)*n._pixelsPerMercatorPixel+c,f=(f-u)*n._pixelsPerMercatorPixel+u;const m=[p*n.worldSize,f*n.worldSize,0];e.ad(m,m,a),l=e.bk(l,m,s)}return e.ad(l,l,o)}_makeGlobeTileDebugBorderBuffer(t,i,r,n,o,a){const s=new e.ba,l=new e.bb,c=new e.bl,u=(e,t,u,h,d)=>{const p=(u-e)/(d-1),f=(h-t)/(d-1),m=s.length;for(let g=0;g<d;g++){const u=e+g*p,h=t+g*f;s.emplaceBack(u,h);const d=this._globePoint(u,h,i,r,n,o,a);c.emplaceBack(d[0],d[1],d[2]),l.emplaceBack(m+g)}},h=e.aj;u(0,0,h,0,16),u(h,0,h,h,16),u(h,h,0,h,16),u(0,h,0,0,16),this._tileDebugIndexBuffer=t.createIndexBuffer(l),this._tileDebugBuffer=t.createVertexBuffer(s,e.bc.members),this._globeTileDebugBorderBuffer=t.createVertexBuffer(c,e.bm.members),this._tileDebugSegments=e.bd.simpleSegment(0,0,s.length,l.length)}_makeGlobeTileDebugTextBuffer(t,i,r,n,o,a){const s=e.aj/4,l=new e.ba,c=new e.a_,u=new e.bl,h=25;c.reserve(32),l.reserve(h),u.reserve(h);const d=(e,t)=>h*e+t;for(let e=0;e<h;e++){const t=e*s;for(let e=0;e<h;e++){const c=e*s;l.emplaceBack(c,t);const h=this._globePoint(c,t,i,r,n,o,a);u.emplaceBack(h[0],h[1],h[2])}}for(let e=0;e<4;e++)for(let t=0;t<4;t++){const i=d(e,t),r=d(e,t+1),n=d(e+1,t),o=d(e+1,t+1);c.emplaceBack(i,r,n),c.emplaceBack(n,r,o)}this._tileDebugTextIndexBuffer=t.createIndexBuffer(c),this._tileDebugTextBuffer=t.createVertexBuffer(l,e.bc.members),this._globeTileDebugTextBuffer=t.createVertexBuffer(u,e.bm.members),this._tileDebugTextSegments=e.bd.simpleSegment(0,0,h,32)}destroy(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!t&&this.texture&&this.texture instanceof e.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}e.bp.setPbf(e.bq);class Tt extends Lt{constructor(e,t,i,r,n){super(e,t,i,r,n),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}getLayers(){return this._mrt?Object.values(this._mrt.layers):[]}getLayer(e){return this._mrt&&this._mrt.getLayer(e)}setTexture(t,i){const r=i.context,n=r.gl;this.texture=this.texture||i.getTileTexture(t.width),this.texture&&this.texture instanceof e.T?this.texture.update(t,{premultiply:!1}):this.texture=new e.T(r,t,n.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16384,i=arguments.length>1?arguments[1]:void 0;const r=this._mrt=new e.bp(30),n=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(t-1)}});return this.entireBuffer=null,this.request=e.br(n,(e,n,o,a)=>{if(e)i(e);else try{const e=r.getHeaderLength(n);if(e>t)return void(this.request=this.fetchHeader(e,i));r.parseHeader(n),this._isHeaderLoaded=!0;let s=0;for(const t of Object.values(r.layers))s=Math.max(s,t.dataIndex[t.dataIndex.length-1].lastByte);n.byteLength>=s&&(this.entireBuffer=n),i(null,this.entireBuffer||n,o,a)}catch(e){i(e)}}),this.request}fetchBand(t,i,r){const n=this._mrt;if(!this._isHeaderLoaded||!n)return void r(new Error("Tile header is not ready"));const o=this.actor;if(!o)return void r(new Error("Can't fetch tile band without an actor"));let a;const s=(e,n)=>{a.complete(e,n),e?r(e):(this.updateTextureDescriptor(t,i),r(null,this.textureDescriptor&&this.textureDescriptor.img))},l=(e,t)=>{if(e)return r(e);const i=o.send("decodeRasterArray",{type:"raster-array",source:this.source,scope:this.scope,tileID:this.tileID,uid:this.uid,buffer:t,task:a},s,void 0,!0);this._workQueue.push(()=>{i&&i.cancel(),a.cancel()})},c=n.getLayer(t);if(!c)return void r(new Error('Unknown sourceLayer "'.concat(t,'"')));if(c.hasDataForBand(i))return this.updateTextureDescriptor(t,i),void r(null,this.textureDescriptor?this.textureDescriptor.img:null);const u=c.getDataRange([i]);if(a=n.createDecodingTask(u),!a||a.tasks.length)if(this.flushQueues(),this.entireBuffer)l(null,this.entireBuffer.slice(u.firstByte,u.lastByte+1));else{const t=Object.assign({},this.requestParams,{headers:{Range:"bytes=".concat(u.firstByte,"-").concat(u.lastByte)}}),i=e.br(t,l);this._fetchQueue.push(()=>{i.cancel(),a.cancel()})}else r(null)}updateNeeded(e,t){return(!this.textureDescriptor||this.textureDescriptor.band!==t||this.textureDescriptor.layer!==e)&&"errored"!==this.state}updateTextureDescriptor(t,i){if(!this._mrt)return;const r=this._mrt.getLayer(t);if(!r||!r.hasBand(i)||!r.hasDataForBand(i))return;const{bytes:n,tileSize:o,buffer:a,offset:s,scale:l}=r.getBandView(i),c=o+2*a,u=new e.r({width:c,height:c},n),h=this.texture;h&&h instanceof e.T&&h.update(u,{premultiply:!1}),this.textureDescriptor={layer:t,band:i,img:u,buffer:a,offset:s,tileSize:o,format:r.pixelFormat,mix:[l,256*l,65536*l,16777216*l]}}}class Mt{constructor(e,t){this.max=e,this.onRemove=t,this.reset()}reset(){for(const e in this.data)for(const t of this.data[e])t.timeout&&clearTimeout(t.timeout),this.onRemove(t.value);return this.data={},this.order=[],this}add(e,t,i){const r=e.wrapped().key;void 0===this.data[r]&&(this.data[r]=[]);const n={value:t,timeout:void 0};if(void 0!==i&&(n.timeout=setTimeout(()=>{this.remove(e,n)},i)),this.data[r].push(n),this.order.push(r),this.order.length>this.max){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const t=this.data[e].shift();return t.timeout&&clearTimeout(t.timeout),0===this.data[e].length&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),t.value}getByKey(e){const t=this.data[e];return t?t[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,t){if(!this.has(e))return this;const i=e.wrapped().key,r=void 0===t?0:this.data[i].indexOf(t),n=this.data[i][r];return this.data[i].splice(r,1),n.timeout&&clearTimeout(n.timeout),0===this.data[i].length&&delete this.data[i],this.onRemove(n.value),this.order.splice(this.order.indexOf(i),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const e=this._getAndRemoveByKey(this.order[0]);e&&this.onRemove(e)}return this}filter(e){const t=[];for(const i in this.data)for(const r of this.data[i])e(r.value)||t.push(r);for(const i of t)this.remove(i.value.tileID,i)}}class Et{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(t,i,r){const n=String(i);if(this.stateChanges[t]=this.stateChanges[t]||{},this.stateChanges[t][n]=this.stateChanges[t][n]||{},e.h(this.stateChanges[t][n],r),null===this.deletedStates[t]){this.deletedStates[t]={};for(const e in this.state[t])e!==n&&(this.deletedStates[t][e]=null)}else if(this.deletedStates[t]&&null===this.deletedStates[t][n]){this.deletedStates[t][n]={};for(const e in this.state[t][n])r[e]||(this.deletedStates[t][n][e]=null)}else for(const e in r)this.deletedStates[t]&&this.deletedStates[t][n]&&null===this.deletedStates[t][n][e]&&delete this.deletedStates[t][n][e]}removeFeatureState(e,t,i){if(null===this.deletedStates[e])return;const r=String(t);if(this.deletedStates[e]=this.deletedStates[e]||{},i&&void 0!==t)null!==this.deletedStates[e][r]&&(this.deletedStates[e][r]=this.deletedStates[e][r]||{},this.deletedStates[e][r][i]=null);else if(void 0!==t)if(this.stateChanges[e]&&this.stateChanges[e][r])for(i in this.deletedStates[e][r]={},this.stateChanges[e][r])this.deletedStates[e][r][i]=null;else this.deletedStates[e][r]=null;else this.deletedStates[e]=null}getState(t,i){const r=this.state[t]||{},n=this.stateChanges[t]||{},o=this.deletedStates[t];if(null===o)return{};if(void 0!==i){const t=String(i),a=e.h({},r[t],n[t]);if(o){const e=o[i];if(null===e)return{};for(const t in e)delete a[t]}return a}const a=e.h({},r,n);if(o)for(const e in o)delete a[e];return a}initializeTileState(e,t){e.refreshFeatureState(t)}coalesceChanges(t,i){const r={};for(const n in this.stateChanges){this.state[n]=this.state[n]||{};const t={};for(const i in this.stateChanges[n])this.state[n][i]||(this.state[n][i]={}),e.h(this.state[n][i],this.stateChanges[n][i]),t[i]=this.state[n][i];r[n]=t}for(const n in this.deletedStates){this.state[n]=this.state[n]||{};const t={};if(null===this.deletedStates[n])for(const e in this.state[n])t[e]={},this.state[n][e]={};else for(const e in this.deletedStates[n]){if(null===this.deletedStates[n][e])this.state[n][e]={};else if(this.state[n][e])for(const t of Object.keys(this.deletedStates[n][e]))delete this.state[n][e][t];t[e]=this.state[n][e]}r[n]=r[n]||{},e.h(r[n],t)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(r).length)for(const e in t)t[e].refreshFeatureState(i)}}class It extends e.E{constructor(e,t,i){super(),this.id=e,this._onlySymbols=i,t.on("data",e=>{"source"===e.dataType&&"metadata"===e.sourceDataType&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(this.reload(),this.transform&&this.update(this.transform))}),t.on("error",()=>{this._sourceErrored=!0}),this._source=t,this._tiles={},this._cache=new Mt(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Et,this._isRaster="raster"===this._source.type||"raster-dem"===this._source.type||"raster-array"===this._source.type||"custom"===this._source.type&&"raster"===this._source._dataType}onAdd(e){this.map=e,this._minTileCacheSize=void 0===this._minTileCacheSize&&e?e._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=void 0===this._maxTileCacheSize&&e?e._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;for(const e in this._tiles)if(!this._tiles[e].loaded())return!1;return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(e,t){return e.isSymbolTile=this._onlySymbols,e.isExtraShadowCaster=this._shadowCasterTiles[e.tileID.key],this._source.loadTile(e,t)}_unloadTile(e){if(this._source.unloadTile)return this._source.unloadTile(e)}_abortTile(e){if(this._source.abortTile)return this._source.abortTile(e)}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const t in this._tiles){const i=this._tiles[t];i.upload(e),i.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return Object.values(this._tiles).map(e=>e.tileID).sort(At).map(e=>e.key)}getRenderableIds(t,i){const r=[];for(const e in this._tiles)this._isIdRenderable(+e,t,i)&&r.push(this._tiles[e]);return t?r.sort((t,i)=>{const r=t.tileID,n=i.tileID,o=new e.P(r.canonical.x,r.canonical.y)._rotate(this.transform.angle),a=new e.P(n.canonical.x,n.canonical.y)._rotate(this.transform.angle);return r.overscaledZ-n.overscaledZ||a.y-o.y||a.x-o.x}).map(e=>e.tileID.key):r.map(e=>e.tileID).sort(At).map(e=>e.key)}hasRenderableParent(e){const t=this.findLoadedParent(e,0);return!!t&&this._isIdRenderable(t.tileID.key)}_isIdRenderable(e,t,i){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(t||!this._tiles[e].holdingForFade())&&(i||!this._shadowCasterTiles[e])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)"errored"!==this._tiles[e].state&&this._reloadTile(+e,"reloading")}}_reloadTile(e,t){const i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))}_tileLoaded(t,i,r,n){if(n)if(t.state="errored",404!==n.status)this._source.fire(new e.z(n,{tile:t}));else{if(this._source.fire(new e.A("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:t})),!(t.tileID.key in this._loadedParentTiles))return;if("raster-dem"===this._source.type&&this.usedForTerrain&&this.map.painter.terrain){const e=this.map.painter.terrain;this.update(this.transform,e.getScaledDemTileSize(),!0),e.resetTileLookupCache(this.id)}else this.update(this.transform)}else t.timeAdded=e.q.now(),"expired"===r&&(t.refreshedUponExpiration=!0),this._setTileReloadTimer(i,t),"raster-dem"===this._source.type&&t.dem&&this._backfillDEM(t),this._state.initializeTileState(t,this.map?this.map.painter:null),this._source.fire(new e.A("data",{dataType:"source",tile:t,coord:t.tileID,sourceCacheId:this.id}))}_backfillDEM(e){const t=this.getRenderableIds();for(let r=0;r<t.length;r++){const n=t[r];if(e.neighboringTiles&&e.neighboringTiles[n]){const t=this.getTileByID(n);i(e,t),i(t,e)}}function i(e,t){if(!e.dem||e.dem.borderReady)return;e.needsHillshadePrepare=!0,e.needsDEMTextureUpload=!0;let i=t.tileID.canonical.x-e.tileID.canonical.x;const r=t.tileID.canonical.y-e.tileID.canonical.y,n=Math.pow(2,e.tileID.canonical.z),o=t.tileID.key;0===i&&0===r||Math.abs(r)>1||(Math.abs(i)>1&&(1===Math.abs(i+n)?i+=n:1===Math.abs(i-n)&&(i-=n)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,i,r),e.neighboringTiles&&e.neighboringTiles[o]&&(e.neighboringTiles[o].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,t,i,r){for(const n in this._tiles){let o=this._tiles[n];if(r[n]||!o.hasData()||o.tileID.overscaledZ<=t||o.tileID.overscaledZ>i)continue;let a=o.tileID;for(;o&&o.tileID.overscaledZ>t+1;){const e=o.tileID.scaledTo(o.tileID.overscaledZ-1);o=this._tiles[e.key],o&&o.hasData()&&(a=e)}let s=a;for(;s.overscaledZ>t;)if(s=s.scaledTo(s.overscaledZ-1),e[s.key]){r[a.key]=a;break}}}findLoadedParent(e,t){if(e.key in this._loadedParentTiles){const i=this._loadedParentTiles[e.key];return i&&i.tileID.overscaledZ>=t?i:null}for(let i=e.overscaledZ-1;i>=t;i--){const t=e.scaledTo(i),r=this._getLoadedTile(t);if(r)return r}}_getLoadedTile(e){const t=this._tiles[e.key];return t&&t.hasData()?t:this._cache.getByKey(this._source.reparseOverscaled?e.wrapped().key:e.canonical.key)}updateCacheSize(e,t){t=t||this._source.tileSize;const i=Math.ceil(e.width/t)+1,r=Math.ceil(e.height/t)+1,n=Math.floor(i*r*5),o="number"==typeof this._minTileCacheSize?Math.max(this._minTileCacheSize,n):n,a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(a)}handleWrapJump(e){const t=Math.round((e-(void 0===this._prevLng?e:this._prevLng))/360);if(this._prevLng=e,t){const e={};for(const i in this._tiles){const r=this._tiles[i];r.tileID=r.tileID.unwrapTo(r.tileID.wrap+t),e[r.tileID.key]=r}this._tiles=e;for(const t in this._timers)clearTimeout(this._timers[t]),delete this._timers[t];for(const t in this._tiles)this._setTileReloadTimer(+t,this._tiles[t])}}update(t,i,r,n,o){if(this.transform=t,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage)return;if(this.usedForTerrain&&!r)return;this.updateCacheSize(t,i),"globe"!==this.transform.projection.name&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const a="batched-model"===this._source.type;let s,l=this._source.maxzoom;const c=this.map&&this.map.painter?this.map.painter._terrain:null;if(c&&c.sourceCache===this&&c.attenuationRange()){const e=c.attenuationRange()[0],t=Math.floor(e)-Math.log2(c.getDemUpscale());l>t&&(l=t)}if(this.used||this.usedForTerrain){if(this._source.tileID)s=t.getVisibleUnwrappedCoordinates(this._source.tileID).map(t=>new e.aM(t.canonical.z,t.wrap,t.canonical.z,t.canonical.x,t.canonical.y));else if(0!==this.tileCoverLift){const n=t.clone();n.tileCoverLift=this.tileCoverLift,s=n.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:l,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:a}),this._source.minzoom<=1&&"globe"===t.projection.name&&(s.push(new e.aM(1,0,1,0,0)),s.push(new e.aM(1,0,1,1,0)),s.push(new e.aM(1,0,1,0,1)),s.push(new e.aM(1,0,1,1,1)))}else if(s=t.coveringTiles({tileSize:i||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:l,roundZoom:this._source.roundZoom&&!r,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:a}),this._source.hasTile){const e=this._source.hasTile.bind(this._source);s=s.filter(t=>e(t))}}else s=[];if(s.length>0&&"globe"!==this.transform.projection.name&&!this.usedForTerrain&&!kt(this._source.type)){const e=t.coveringZoomLevel({tileSize:i||this._source.tileSize,roundZoom:this._source.roundZoom&&!r}),l=Math.min(e,this._source.maxzoom);if(a){const e=t.extendTileCover(s,l);for(const t of e)s.push(t)}else if(o){const e=t.extendTileCover(s,l,this.transform._camera.forward());for(const t of e)s.push(t)}else if(this.castsShadows&&n){const e=t.extendTileCover(s,l,n);for(const t of e)this._shadowCasterTiles[t.key]=!0,s.push(t)}}const u=this._updateRetainedTiles(s);if(kt(this._source.type)&&0!==s.length){const t={},i={},r=Object.keys(u);for(const o of r){const r=u[o],n=this._tiles[o];if(!n||n.fadeEndTime&&n.fadeEndTime<=e.q.now())continue;const a=this.findLoadedParent(r,Math.max(r.overscaledZ-It.maxOverzooming,this._source.minzoom));a&&(this._addTile(a.tileID),t[a.tileID.key]=a.tileID),i[o]=r}const n=s[s.length-1].overscaledZ;for(const e in this._tiles){const t=this._tiles[e];if(u[e]||!t.hasData())continue;let r=t.tileID;for(;r.overscaledZ>n;){r=r.scaledTo(r.overscaledZ-1);const n=this._tiles[r.key];if(n&&n.hasData()&&i[r.key]){u[e]=t.tileID;break}}}for(const e in t)u[e]||(this._coveredTiles[e]=!0,u[e]=t[e])}for(const e in u)this._tiles[e].clearFadeHold();const h=e.bs(this._tiles,u);for(const e of h){const t=this._tiles[e];t.hasSymbolBuckets&&!t.holdingForFade()?t.setHoldDuration(this.map._fadeDuration):t.hasSymbolBuckets&&!t.symbolFadeFinished()||this._removeTile(+e)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(+e)}_updateRetainedTiles(e){const t={};if(0===e.length)return t;const i={},r=e.reduce((e,t)=>Math.min(e,t.overscaledZ),1/0),n=e[0].overscaledZ,o=Math.max(n-It.maxOverzooming,this._source.minzoom),a=Math.max(n+It.maxUnderzooming,this._source.minzoom),s={};for(const l of e){const e=this._addTile(l);t[l.key]=l,e.hasData()||r<this._source.maxzoom&&(s[l.key]=l)}this._retainLoadedChildren(s,r,a,t);for(const l of e){let e=this._tiles[l.key];if(e.hasData())continue;if(l.canonical.z>=this._source.maxzoom){const e=l.children(this._source.maxzoom)[0],i=this.getTile(e);if(i&&i.hasData()){t[e.key]=e;continue}}else{const e=l.children(this._source.maxzoom);if(t[e[0].key]&&t[e[1].key]&&t[e[2].key]&&t[e[3].key])continue}let r=e.wasRequested();for(let n=l.overscaledZ-1;n>=o;--n){const o=l.scaledTo(n);if(i[o.key])break;if(i[o.key]=!0,e=this.getTile(o),!e&&r&&(e=this._addTile(o)),e&&(t[o.key]=o,r=e.wasRequested(),e.hasData()))break}}return t}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const t=[];let i,r=this._tiles[e].tileID;for(;r.overscaledZ>0;){if(r.key in this._loadedParentTiles){i=this._loadedParentTiles[r.key];break}t.push(r.key);const e=r.scaledTo(r.overscaledZ-1);if(i=this._getLoadedTile(e),i)break;r=e}for(const e of t)this._loadedParentTiles[e]=i}}_addTile(t){let i=this._tiles[t.key];if(i)return!0!==i.isExtraShadowCaster||!!this._shadowCasterTiles[t.key]||this._reloadTile(t.key,"reloading"),i;i=this._cache.getAndRemove(t),i&&(this._setTileReloadTimer(t.key,i),i.tileID=t,this._state.initializeTileState(i,this.map?this.map.painter:null),this._cacheTimers[t.key]&&(clearTimeout(this._cacheTimers[t.key]),delete this._cacheTimers[t.key],this._setTileReloadTimer(t.key,i)));const r=Boolean(i);if(!r){const e=this.map?this.map.painter:null,r=this._source.tileSize*t.overscaleFactor();i="raster-array"===this._source.type?new Tt(t,r,this.transform.tileZoom,e,this._isRaster):new Lt(t,r,this.transform.tileZoom,e,this._isRaster,this._source.worldview),this._loadTile(i,this._tileLoaded.bind(this,i,t.key,i.state))}return i.uses++,this._tiles[t.key]=i,r||this._source.fire(new e.A("dataloading",{tile:i,coord:i.tileID,dataType:"source"})),i}_setTileReloadTimer(e,t){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const i=t.getExpiryTimeout();i&&(this._timers[e]=setTimeout(()=>{this._reloadTile(e,"expired"),delete this._timers[e]},i))}_removeTile(e){const t=this._tiles[e];t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),t.uses>0||(t.hasData()&&"reloading"!==t.state||"empty"===t.state?this._cache.add(t.tileID,t,t.getExpiryTimeout()):(t.aborted=!0,this._abortTile(t),this._unloadTile(t))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(+e);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(t,i,r){const n=[],o=this.transform;if(!o)return n;const a="globe"===o.projection.name,s=e.aD(o.center.lng);for(const l in this._tiles){const c=this._tiles[l];if(r&&c.clearQueryDebugViz(),c.holdingForFade())continue;let u;if(a){const t=c.tileID.canonical;if(0===t.z){const i=[Math.abs(e.ay(s,...Pt(t,-1))-s),Math.abs(e.ay(s,...Pt(t,1))-s)];u=[0,2*i.indexOf(Math.min(...i))-1]}else{const i=[Math.abs(e.ay(s,...Pt(t,-1))-s),Math.abs(e.ay(s,...Pt(t,0))-s),Math.abs(e.ay(s,...Pt(t,1))-s)];u=[i.indexOf(Math.min(...i))-1]}}else u=[0];for(const e of u){const r=t.containsTile(c,o,i,e);r&&n.push(r)}}return n}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(e){return this._getRenderableCoordinates(e)}_getRenderableCoordinates(e,t){const i=this.getRenderableIds(e,t).map(e=>this._tiles[e].tileID),r="globe"===this.transform.projection.name;for(const n of i)n.projMatrix=this.transform.calculateProjMatrix(n.toUnwrapped()),n.expandedProjMatrix=r?this.transform.calculateProjMatrix(n.toUnwrapped(),!1,!0):n.projMatrix;return i}sortCoordinatesByDistance(e){const t=e.slice(),i=this.transform._camera.position,r=this.transform._camera.forward(),n={};for(const o of t){const e=1/(1<<o.canonical.z);n[o.key]=((o.canonical.x+.5)*e+o.wrap-i[0])*r[0]+((o.canonical.y+.5)*e-i[1])*r[1]-i[2]*r[2]}return t.sort((e,t)=>n[e.key]-n[t.key]),t}hasTransition(){if(this._source.hasTransition())return!0;if(kt(this._source.type))for(const t in this._tiles){const i=this._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=e.q.now())return!0}return!1}setFeatureState(e,t,i){this._state.updateState(e=e||"_geojsonTileLayer",t,i)}removeFeatureState(e,t,i){this._state.removeFeatureState(e=e||"_geojsonTileLayer",t,i)}getFeatureState(e,t){return this._state.getState(e=e||"_geojsonTileLayer",t)}setDependencies(e,t,i){const r=this._tiles[e];r&&r.setDependencies(t,i)}reloadTilesForDependencies(e,t){for(const i in this._tiles)this._tiles[i].hasDependency(e,t)&&this._reloadTile(+i,"reloading");this._cache.filter(i=>!i.hasDependency(e,t))}_preloadTiles(t,i){if(!this._sourceLoaded){const e=()=>{this._sourceLoaded&&(this._source.off("data",e),this._preloadTiles(t,i))};return void this._source.on("data",e)}const r=new Map,n=Array.isArray(t)?t:[t],o=this.map.painter.terrain,a=this.usedForTerrain&&o?o.getScaledDemTileSize():this._source.tileSize;for(const e of n){const t=e.coveringTiles({tileSize:a,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const e of t)r.set(e.key,e);this.usedForTerrain&&e.updateElevation(!1)}const s=Array.from(r.values());e.bt(s,(e,t)=>{const i=new Lt(e,this._source.tileSize*e.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster,this._source.worldview);this._loadTile(i,e=>{"raster-dem"===this._source.type&&i.dem&&this._backfillDEM(i),t(e,i)})},i)}}function At(e,t){const i=Math.abs(2*e.wrap)-+(e.wrap<0),r=Math.abs(2*t.wrap)-+(t.wrap<0);return e.overscaledZ-t.overscaledZ||r-i||t.canonical.y-e.canonical.y||t.canonical.x-e.canonical.x}function kt(e){return"raster"===e||"image"===e||"video"===e||"custom"===e}function Pt(e,t){const i=1<<e.z;return[e.x/i+t,(e.x+1)/i+t]}It.maxOverzooming=10,It.maxUnderzooming=3;class Ot{constructor(e){this.style=e,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const e=!1,t=!1;for(const i in this.style._mergedLayers){const r=this.style._mergedLayers[i];if("fill-extrusion"===r.type||"building"===r.type)this.layers.push({layer:r,visible:e,visibilityChanged:t});else if("model"===r.type){const i=this.style.getLayerSource(r);i&&"batched-model"===i.type&&this.layers.push({layer:r,visible:e,visibilityChanged:t})}}}onNewFrame(e){this.layersGotHidden=!1;for(const t of this.layers){const i=t.layer;let r=!1;"fill-extrusion"===i.type?r=!i.isHidden(e)&&i.paint.get("fill-extrusion-opacity")>0:"building"===i.type?r=!i.isHidden(e)&&i.paint.get("building-opacity")>0:"model"===i.type&&(r=!i.isHidden(e)&&i.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!r&&t.visible,t.visible=r}}updateZOffset(e,t){this.currentBuildingBuckets=[];for(const r of this.layers){const e=r.layer,i=this.style.getLayerSourceCache(e);let n=1;"fill-extrusion"===e.type?n=r.visible?e.paint.get("fill-extrusion-vertical-scale"):0:"building"===e.type&&(n=r.visible?e.paint.get("building-vertical-scale"):0);let o=i?i.getTile(t):null;if(!o&&i&&t.canonical.z>i.getSource().minzoom){let e=t.scaledTo(Math.min(i.getSource().maxzoom,t.overscaledZ-1));for(;e.overscaledZ>=i.getSource().minzoom&&(o=i.getTile(e),!o&&0!==e.overscaledZ);)e=e.scaledTo(e.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:o?o.getBucket(e):null,tileID:o?o.tileID:t,verticalScale:n})}e.hasAnyZOffset=!1;let i=!1;for(let r=0;r<e.symbolInstances.length;r++){const n=e.symbolInstances.get(r),o=n.zOffset,a=this._getHeightAtTileOffset(t,n.tileAnchorX,n.tileAnchorY);n.zOffset=a!==Number.NEGATIVE_INFINITY?a:o,i||o===n.zOffset||(i=!0),e.hasAnyZOffset||0===n.zOffset||(e.hasAnyZOffset=!0)}i&&(e.zOffsetBuffersNeedUpload=!0,e.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(t,i,r,n){let o=i,a=r;if(t.canonical.z!==n.canonical.z){const s=n.canonical,l=1/(1<<t.canonical.z-s.z);o=(i+t.canonical.x*e.aj)*l-s.x*e.aj|0,a=(r+t.canonical.y*e.aj)*l-s.y*e.aj|0}return{tileX:o,tileY:a}}_getHeightAtTileOffset(e,t,i){let r,n;for(let o=0;o<this.layers.length;++o){const a=this.layers[o].layer;if("fill-extrusion"!==a.type&&"building"!==a.type)continue;const{bucket:s,tileID:l,verticalScale:c}=this.currentBuildingBuckets[o];if(!s)continue;const{tileX:u,tileY:h}=this._mapCoordToOverlappingTile(e,t,i,l),d=s.getHeightAtTileCoord(u,h);d&&void 0!==d.height&&(d.hidden?r=d.height:n=Math.max(d.height*c,n||0))}if(void 0!==n)return n;for(let o=0;o<this.layers.length;++o){const n=this.layers[o];if("model"!==n.layer.type||!n.visible)continue;const{bucket:a,tileID:s}=this.currentBuildingBuckets[o];if(!a)continue;const{tileX:l,tileY:c}=this._mapCoordToOverlappingTile(e,t,i,s),u=a.getHeightAtTileCoord(l,c);if(u&&!u.hidden)return void 0===u.height&&void 0!==r?Math.min(u.maxHeight,r)*u.verticalScale:u.height?u.height*u.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Rt(t,i){const r={};for(const e in t)"ref"!==e&&(r[e]=t[e]);return e.bu.forEach(e=>{e in i&&(r[e]=i[e])}),r}function zt(e){e=e.slice();const t=Object.create(null);for(let i=0;i<e.length;i++)t[e[i].id]=e[i];for(let i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=Rt(e[i],t[e[i].ref]));return e}const Dt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport",addIconset:"addIconset",removeIconset:"removeIconset"};function Ft(e,t,i){i.push({command:Dt.addSource,args:[e,t[e]]})}function Bt(e,t,i){t.push({command:Dt.removeSource,args:[e]}),i[e]=!0}function Vt(e,t,i,r){Bt(e,i,r),Ft(e,t,i)}function Nt(t,i,r){let n;for(n in t[r])if(t[r].hasOwnProperty(n)&&"data"!==n&&!e.bv(t[r][n],i[r][n]))return!1;for(n in i[r])if(i[r].hasOwnProperty(n)&&"data"!==n&&!e.bv(t[r][n],i[r][n]))return!1;return!0}function Ut(t,i,r,n,o,a){let s;for(s in i=i||{},t=t||{})t.hasOwnProperty(s)&&(e.bv(t[s],i[s])||r.push({command:a,args:[n,s,i[s],o]}));for(s in i)i.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(e.bv(t[s],i[s])||r.push({command:a,args:[n,s,i[s],o]}))}function jt(e){return e.id}function Ht(e,t){return e[t.id]=t,e}class Zt{constructor(e,t){this.reset(e,t)}reset(e,t){this.points=e||[],this._distances=[0];for(let i=1;i<this.points.length;i++)this._distances[i]=this._distances[i-1]+this.points[i].dist(this.points[i-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(t||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(t){if(1===this.points.length)return this.points[0];t=e.ay(t,0,1);let i=1,r=this._distances[i];const n=t*this.paddedLength+this.padding;for(;r<n&&i<this._distances.length;)r=this._distances[++i];const o=i-1,a=this._distances[o],s=r-a,l=s>0?(n-a)/s:0;return this.points[o].mult(1-l).add(this.points[i].mult(l))}}class Wt{constructor(e,t,i){const r=this.boxCells=[],n=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(let o=0;o<this.xCellCount*this.yCellCount;o++)r.push([]),n.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,t,i,r,n){this._forEachCell(t,i,r,n,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(r),this.bboxes.push(n)}insertCircle(e,t,i,r){this._forEachCell(t-r,i-r,t+r,i+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(r)}_insertBoxCell(e,t,i,r,n,o){this.boxCells[n].push(o)}_insertCircleCell(e,t,i,r,n,o){this.circleCells[n].push(o)}_query(e,t,i,r,n,o){if(i<0||e>this.width||r<0||t>this.height)return!n&&[];const a=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=r){if(n)return!0;for(let e=0;e<this.boxKeys.length;e++)a.push({key:this.boxKeys[e],x1:this.bboxes[4*e],y1:this.bboxes[4*e+1],x2:this.bboxes[4*e+2],y2:this.bboxes[4*e+3]});for(let e=0;e<this.circleKeys.length;e++){const t=this.circles[3*e],i=this.circles[3*e+1],r=this.circles[3*e+2];a.push({key:this.circleKeys[e],x1:t-r,y1:i-r,x2:t+r,y2:i+r})}return o?a.filter(o):a}return this._forEachCell(e,t,i,r,this._queryCell,a,{hitTest:n,seenUids:{box:{},circle:{}}},o),n?a.length>0:a}_queryCircle(e,t,i,r,n){const o=e-i,a=e+i,s=t-i,l=t+i;if(a<0||o>this.width||l<0||s>this.height)return!r&&[];const c=[];return this._forEachCell(o,s,a,l,this._queryCellCircle,c,{hitTest:r,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}},n),r?c.length>0:c}query(e,t,i,r,n){return this._query(e,t,i,r,!1,n)}hitTest(e,t,i,r,n){return this._query(e,t,i,r,!0,n)}hitTestCircle(e,t,i,r){return this._queryCircle(e,t,i,!0,r)}_queryCell(e,t,i,r,n,o,a,s){const l=a.seenUids,c=this.boxCells[n];if(null!==c){const n=this.bboxes;for(const u of c)if(!l.box[u]){l.box[u]=!0;const c=4*u;if(e<=n[c+2]&&t<=n[c+3]&&i>=n[c+0]&&r>=n[c+1]&&(!s||s(this.boxKeys[u]))){if(a.hitTest)return o.push(!0),!0;o.push({key:this.boxKeys[u],x1:n[c],y1:n[c+1],x2:n[c+2],y2:n[c+3]})}}}const u=this.circleCells[n];if(null!==u){const n=this.circles;for(const c of u)if(!l.circle[c]){l.circle[c]=!0;const u=3*c;if(this._circleAndRectCollide(n[u],n[u+1],n[u+2],e,t,i,r)&&(!s||s(this.circleKeys[c]))){if(a.hitTest)return o.push(!0),!0;{const e=n[u],t=n[u+1],i=n[u+2];o.push({key:this.circleKeys[c],x1:e-i,y1:t-i,x2:e+i,y2:t+i})}}}}}_queryCellCircle(e,t,i,r,n,o,a,s){const l=a.circle,c=a.seenUids,u=this.boxCells[n];if(null!==u){const e=this.bboxes;for(const t of u)if(!c.box[t]){c.box[t]=!0;const i=4*t;if(this._circleAndRectCollide(l.x,l.y,l.radius,e[i+0],e[i+1],e[i+2],e[i+3])&&(!s||s(this.boxKeys[t])))return o.push(!0),!0}}const h=this.circleCells[n];if(null!==h){const e=this.circles;for(const t of h)if(!c.circle[t]){c.circle[t]=!0;const i=3*t;if(this._circlesCollide(e[i],e[i+1],e[i+2],l.x,l.y,l.radius)&&(!s||s(this.circleKeys[t])))return o.push(!0),!0}}}_forEachCell(e,t,i,r,n,o,a,s){const l=this._convertToXCellCoord(e),c=this._convertToYCellCoord(t),u=this._convertToXCellCoord(i),h=this._convertToYCellCoord(r);for(let d=l;d<=u;d++)for(let l=c;l<=h;l++)if(n.call(this,e,t,i,r,this.xCellCount*l+d,o,a,s))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,t,i,r,n,o){const a=r-e,s=n-t,l=i+o;return l*l>a*a+s*s}_circleAndRectCollide(e,t,i,r,n,o,a){const s=(o-r)/2,l=Math.abs(e-(r+s));if(l>s+i)return!1;const c=(a-n)/2,u=Math.abs(t-(n+c));if(u>c+i)return!1;if(l<=s||u<=c)return!0;const h=l-s,d=u-c;return h*h+d*d<=i*i}}const Gt={unknown:0,flipRequired:1,flipNotRequired:2},qt=Math.tan(85*Math.PI/180);function Xt(t,i,r,n,o,a,s){const l=e.bz();if(r)if("globe"===a.name){const t=e.bA(o,i);e.az(l,l,t)}else{const t=e.bB([],s);l[0]=t[0],l[1]=t[1],l[4]=t[2],l[5]=t[3],n||e.by(l,l,o.angle)}else e.az(l,o.labelPlaneMatrix,t);return l}function Yt(e,t,i,r,n,o,a){const s=Xt(e,t,i,r,n,o,a);return"globe"===o.name&&i||(s[2]=s[6]=s[10]=s[14]=0),s}function Kt(t,i,r,n,o,a,s){if(r){if("globe"===a.name){const l=Xt(t,i,r,n,o,a,s);return e.bi(l,l),e.az(l,t,l),l}{const i=e.bw(t),r=e.bx([]);return r[0]=s[0],r[1]=s[1],r[4]=s[2],r[5]=s[3],e.az(i,i,r),n||e.by(i,i,-o.angle),i}}return o.glCoordMatrix}function Jt(t,i,r,n){const o=[t,i,r,1];r?e.aA(o,o,n):li(o,o,n);const a=o[3];return o[0]/=a,o[1]/=a,o[2]/=a,o}function Qt(e,t){return Math.min(.5+e/t*.5,1.5)}function $t(e,t){const i=e[0]/e[3],r=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&r>=-t[1]&&r<=t[1]}function ei(t,i,r,n,o,a,s,l,c,u){const h=r.transform,d=n?t.textSizeData:t.iconSizeData,p=e.bH(d,r.transform.zoom),f="globe"===h.projection.name,m=[256/r.width*2+1,256/r.height*2+1],g=n?t.text.dynamicLayoutVertexArray:t.icon.dynamicLayoutVertexArray;g.clear();let y=null;f&&(y=n?t.text.globeExtVertexArray:t.icon.globeExtVertexArray);const _=t.lineVertexArray,v=n?t.text.placedSymbolArray:t.icon.placedSymbolArray,x=r.transform.width/r.transform.height;let C,w=!1;for(let b=0;b<v.length;b++){const n=v.get(b),{numGlyphs:f,writingMode:S}=n;if(S!==e.bI.vertical||w||C===e.bI.horizontal||(w=!0),C=S,(n.hidden||S===e.bI.vertical)&&!w){si(f,g);continue}w=!1;const L=new e.P(n.tileAnchorX,n.tileAnchorY);let{x:T,y:M,z:E}=h.projection.projectTilePoint(L.x,L.y,u.canonical);if(c){const[e,t,i]=c(L);T+=e,M+=t,E+=i}const I=[T,M,E,1];if(e.aA(I,I,i),!$t(I,m)){si(f,g);continue}const A=I[3],k=Qt(r.transform.getCameraToCenterDistance(h.projection),A),P=e.bJ(d,p,n),O=s?P/k:P*k,R=Jt(T,M,E,o);if(R[3]<=0){si(f,g);continue}let z={};const D=e.al(t.layers[0].layout.get("text-max-angle")),F=Math.cos(D),B=s?null:c,V=ri(n,O,!1,l,i,o,a,t.glyphOffsetArray,_,g,y,R,L,z,x,B,h.projection,u,s,F);w=V.useVertical,B&&V.needsFlipping&&(z={}),(V.notEnoughRoom||w||V.needsFlipping&&ri(n,O,!0,l,i,o,a,t.glyphOffsetArray,_,g,y,R,L,z,x,B,h.projection,u,s,F).notEnoughRoom)&&si(f,g)}n?(t.text.dynamicLayoutVertexBuffer.updateData(g),y&&t.text.globeExtVertexBuffer&&t.text.globeExtVertexBuffer.updateData(y)):(t.icon.dynamicLayoutVertexBuffer.updateData(g),y&&t.icon.globeExtVertexBuffer&&t.icon.globeExtVertexBuffer.updateData(y))}function ti(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g){const{lineStartIndex:y,glyphStartIndex:_,segment:v}=s,x=_+s.numGlyphs,C=y+s.lineLength,w=t.getoffsetX(_),b=t.getoffsetX(x-1),S=ai(e*w,i,r,n,o,a,v,y,C,l,c,u,h,d,!0,p,f,m,g);if(!S)return null;const L=ai(e*b,i,r,n,o,a,v,y,C,l,c,u,h,d,!0,p,f,m,g);return L?{first:S,last:L}:null}function ii(t,i,r,n){return t===e.bI.horizontal&&Math.abs(n)>Math.abs(r)?{useVertical:!0}:t===e.bI.vertical?n>0?{needsFlipping:!0}:null:i!==Gt.unknown&&function(e,t){return 0===e||Math.abs(t/e)>qt}(r,n)?i===Gt.flipRequired?{needsFlipping:!0}:null:r<0?{needsFlipping:!0}:null}function ri(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x){const C=i/24,w=t.lineOffsetX*C,b=t.lineOffsetY*C,{lineStartIndex:S,glyphStartIndex:L,numGlyphs:T,segment:M,writingMode:E,flipState:I}=t,A=S+t.lineLength,k=t=>{if(h){const[i,r,n]=t.up,o=u.length;e.bK(h,o+0,i,r,n),e.bK(h,o+1,i,r,n),e.bK(h,o+2,i,r,n),e.bK(h,o+3,i,r,n)}const[i,r,n]=t.point;e.bL(u,i,r,n,t.angle)};if(T>1){const e=ti(C,l,w,b,r,d,p,t,c,a,f,g,!1,y,_,v,x);if(!e)return{notEnoughRoom:!0};if(n&&!r){let[i,r,n]=e.first.point,[o,a,l]=e.last.point;[i,r]=Jt(i,r,n,s),[o,a]=Jt(o,a,l,s);const c=ii(E,I,(o-i)*m,a-r);if(t.flipState=c&&c.needsFlipping?Gt.flipRequired:Gt.flipNotRequired,c)return c}k(e.first);for(let t=L+1;t<L+T-1;t++){const e=ai(C*l.getoffsetX(t),w,b,r,d,p,M,S,A,c,a,f,g,!1,!1,y,_,v,x);if(!e)return u.length-=4*(t-L),{notEnoughRoom:!0};k(e)}k(e.last)}else{if(n&&!r){const i=Jt(p.x,p.y,0,o),r=S+M+1,n=new e.P(c.getx(r),c.gety(r)),a=Jt(n.x,n.y,0,o),s=a[3]>0?a:oi(p,n,i,1,o,void 0,y,_.canonical),l=ii(E,I,(s[0]-i[0])*m,s[1]-i[1]);if(t.flipState=l&&l.needsFlipping?Gt.flipRequired:Gt.flipNotRequired,l)return l}const i=ai(C*l.getoffsetX(L),w,b,r,d,p,M,S,A,c,a,f,g,!1,!1,y,_,v,x);if(!i)return{notEnoughRoom:!0};k(i)}return{}}function ni(e,t,i,r,n){const{x:o,y:a,z:s}=r.projectTilePoint(e.x,e.y,t);if(!n)return Jt(o,a,s,i);const[l,c,u]=n(e);return Jt(o+l,a+c,s+u,i)}function oi(t,i,r,n,o,a,s,l){const c=ni(t.sub(i)._unit()._add(t),l,o,s,a);return e.at(c,r,c),e.au(c,c),e.bE(c,r,c,n)}function ai(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v){const x=n?t-i:t+i;let C=x>0?1:-1,w=0;n&&(C*=-1,w=Math.PI),C<0&&(w+=Math.PI);let b=l+s+(C>0?0:1)|0,S=o,L=o,T=0,M=0;const E=Math.abs(x),I=[],A=[];let k=a,P=k,O=e.bC([]);const R=()=>oi(P,k,L,E-T+1,h,p,g,y.canonical);for(;T+M<=E;){if(b+=C,b<l||b>=c)return null;if(L=S,P=k,I.push(L),f&&A.push(P),k=new e.P(u.getx(b),u.gety(b)),S=d[b],!S){const e=ni(k,y.canonical,h,g,p);S=e[3]>0?d[b]=e:R()}T+=M;const t=e.at([],S,L),i=e.bD(L,S);if(r&&i>0&&M>0&&e.bG(O,t)/(M*i)<v)return null;M=i,O=t}m&&p&&(d[b]&&(S=R(),M=e.bD(L,S),O=e.at([],S,L)),d[b]=S);const z=(E-T)/M,D=k.sub(P)._mult(z)._add(P),F=e.bE([],L,O,z);let B=[0,0,1],V=O[0],N=O[1];if(_&&(B=g.upVector(y.canonical,D.x,D.y),0!==B[0]||0!==B[1]||1!==B[2])){const t=[B[2],0,-B[0]],i=e.bF([],B,t);e.au(t,t),e.au(i,i),V=e.bG(O,t),N=e.bG(O,i)}if(r){const t=e.bF([],B,O);e.au(t,t),e.bE(F,F,t,r*C)}const U=w+Math.atan2(N,V);return I.push(F),f&&A.push(D),{point:F,angle:U,path:I,tilePath:A,up:B}}function si(e,t){const i=t.length,r=i+4*e;t.resize(r),t.float32.fill(-1/0,4*i,4*r)}function li(e,t,i){const r=t[0],n=t[1];return e[0]=i[0]*r+i[4]*n+i[12],e[1]=i[1]*r+i[5]*n+i[13],e[3]=i[3]*r+i[7]*n+i[15],e}const ci=100;class ui{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Wt(e.width+200,e.height+200,25),r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Wt(e.width+200,e.height+200,25);this.transform=e,this.grid=i,this.ignoredGrid=r,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+ci,this.screenBottomBoundary=e.height+ci,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.fogState=t}placeCollisionBox(e,t,i,r,n,o,a,s){let l=i.projectedAnchorX,c=i.projectedAnchorY,u=i.projectedAnchorZ;const h=i.elevation,d=i.tileID,p=e.getProjection();if(h&&d){const[e,t,r]=p.upVector(d.canonical,i.tileAnchorX,i.tileAnchorY),n=p.upVectorScale(d.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;l+=e*h*n,c+=t*h*n,u+=r*h*n}const f=this.projectAndGetPerspectiveRatio(a,l,c,u,i.tileID,"globe"===p.name||!!h||this.transform.pitch>0,p),m=o*f.perspectiveRatio,g=(i.x1*t+r.x-i.padding)*m+f.point.x,y=(i.y1*t+r.y-i.padding)*m+f.point.y,_=(i.x2*t+r.x+i.padding)*m+f.point.x,v=(i.y2*t+r.y+i.padding)*m+f.point.y,x=f.perspectiveRatio<=.55||f.occluded;return!this.isInsideGrid(g,y,_,v)||!n&&this.grid.hitTest(g,y,_,v,s)||x?{box:[],offscreen:!1,occluded:f.occluded}:{box:[g,y,_,v],offscreen:this.isOffscreen(g,y,_,v),occluded:!1}}placeCollisionCircles(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m){const g=[],y=this.transform.elevation,_=t.getProjection(),v=y?y.getAtTileOffsetFunc(m,this.transform.center.lat,this.transform.worldSize,_):null,x=new e.P(r.tileAnchorX,r.tileAnchorY);let{x:C,y:w,z:b}=_.projectTilePoint(x.x,x.y,m.canonical);if(v){const[e,t,i]=v(x);C+=e,w+=t,b+=i}const S="globe"===_.name,L=this.projectAndGetPerspectiveRatio(s,C,w,b,m,S||!!y||this.transform.pitch>0,_),{perspectiveRatio:T}=L,M=(h?a/T:a*T)/e.bO,E=Jt(C,w,b,l),I=r.lineOffsetX*M,A=r.lineOffsetY*M,k=e.al(t.layers[0].layout.get("text-max-angle")),P=Math.cos(k),O=L.signedDistanceFromCamera>0?ti(M,o,I,A,!1,E,x,r,n,l,{},y&&!h?v:null,h&&!!y,_,m,h,P):null;let R=!1,z=!1,D=!0;if(O&&!L.occluded){const t=.5*p*T+f,r=new e.P(-100,-100),n=new e.P(this.screenRightBoundary,this.screenBottomBoundary),o=new Zt,{first:a,last:s}=O,l=a.path.length;let h=[];for(let e=l-1;e>=1;e--)h.push(a.path[e]);for(let e=1;e<s.path.length;e++)h.push(s.path[e]);const m=2.5*t;c&&(h=h.map((e,t)=>{let[i,r,n]=e;return v&&!S&&(n=v(t<l-1?a.tilePath[l-1-t]:s.tilePath[t-l+2])[2]),Jt(i,r,n,c)}),h.some(e=>e[3]<=0)&&(h=[]));let y=[];if(h.length>0){let t=1/0,i=-1/0,o=1/0,a=-1/0;for(const e of h)t=Math.min(t,e[0]),o=Math.min(o,e[1]),i=Math.max(i,e[0]),a=Math.max(a,e[1]);i>=r.x&&t<=n.x&&a>=r.y&&o<=n.y&&(y=[h.map(t=>new e.P(t[0],t[1]))],(t<r.x||i>n.x||o<r.y||a>n.y)&&(y=e.bM(y,r.x,r.y,n.x,n.y)))}for(const e of y){o.reset(e,.25*t);let r=0;r=o.length<=.5*t?1:Math.ceil(o.paddedLength/m)+1;for(let e=0;e<r;e++){const n=e/Math.max(r-1,1),a=o.lerp(n),s=a.x+ci,l=a.y+ci;g.push(s,l,t,0);const c=s-t,h=l-t,p=s+t,f=l+t;if(D=D&&this.isOffscreen(c,h,p,f),z=z||this.isInsideGrid(c,h,p,f),!i&&this.grid.hitTestCircle(s,l,t,d)&&(R=!0,!u))return{circles:[],offscreen:!1,collisionDetected:R,occluded:!1}}}}return{circles:!u&&R||!z?[]:g,offscreen:D,collisionDetected:R,occluded:L.occluded}}queryRenderedSymbols(t){if(0===t.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const i=[];let r=1/0,n=1/0,o=-1/0,a=-1/0;for(const u of t){const t=new e.P(u.x+ci,u.y+ci);r=Math.min(r,t.x),n=Math.min(n,t.y),o=Math.max(o,t.x),a=Math.max(a,t.y),i.push(t)}const s=this.grid.query(r,n,o,a).concat(this.ignoredGrid.query(r,n,o,a)),l={},c={};for(const u of s){const t=u.key;if(void 0===l[t.bucketInstanceId]&&(l[t.bucketInstanceId]={}),l[t.bucketInstanceId][t.featureIndex])continue;const r=[new e.P(u.x1,u.y1),new e.P(u.x2,u.y1),new e.P(u.x2,u.y2),new e.P(u.x1,u.y2)];e.bN(i,r)&&(l[t.bucketInstanceId][t.featureIndex]=!0,void 0===c[t.bucketInstanceId]&&(c[t.bucketInstanceId]=[]),c[t.bucketInstanceId].push(t.featureIndex))}return c}insertCollisionBox(e,t,i,r,n){(t?this.ignoredGrid:this.grid).insert({bucketInstanceId:i,featureIndex:r,collisionGroupID:n},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,t,i,r,n){const o=t?this.ignoredGrid:this.grid,a={bucketInstanceId:i,featureIndex:r,collisionGroupID:n};for(let s=0;s<e.length;s+=4)o.insertCircle(a,e[s],e[s+1],e[s+2])}projectAndGetPerspectiveRatio(t,i,r,n,o,a,s){const l=[i,r,n,1];let c=!1;if(n||this.transform.pitch>0){if(e.aA(l,l,t),this.fogState&&o&&"globe"!==s.name){const t=function(t,i,r,n,o,a){const s=a.calculateFogTileMatrix(o),l=[i,r,n];return e.ad(l,l,s),Ne(t,e.ae(l),a.pitch,a._fov)}(this.fogState,i,r,n,o.toUnwrapped(),this.transform);c=t>.9}}else li(l,l,t);const u=l[3];return{point:new e.P((l[0]/u+1)/2*this.transform.width+ci,(-l[1]/u+1)/2*this.transform.height+ci),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(s)/u*.5,1.5),signedDistanceFromCamera:u,occluded:a&&l[2]>u||c}}isOffscreen(e,t,i,r){return i<ci||e>=this.screenRightBoundary||r<ci||t>this.screenBottomBoundary}isInsideGrid(e,t,i,r){return i>=0&&e<this.gridRightBoundary&&r>=0&&t<this.gridBottomBoundary}getViewportMatrix(){const t=e.bx([]);return e.bo(t,t,[-100,-100,0]),t}}function hi(t,i,r){const n=i.createTileMatrix(t,t.worldSize,r.toUnwrapped());return e.az(new Float32Array(16),t.projMatrix,n)}function di(e,t,i){if(t.projection.name===i.projection.name)return e.projMatrix;const r=i.clone();return r.setProjection(t.projection),hi(r,t.getProjection(),e)}function pi(e,t,i){return t.name===i.projection.name?e.projMatrix:hi(i,t,e)}class fi{constructor(e,t,i,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&i?1:0,this.placed=i}isHidden(){return 0===this.opacity&&!this.placed}}class mi{constructor(e,t,i,r,n){let o=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.text=new fi(e?e.text:null,t,i,n),this.icon=new fi(e?e.icon:null,t,r,n),this.clipped=o}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class gi{constructor(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.text=e,this.icon=t,this.skipFade=i,this.clipped=r}}class yi{constructor(){this.invProjMatrix=e.bz(),this.viewportMatrix=e.bz(),this.circles=[]}}class _i{constructor(e,t,i,r,n){this.bucketInstanceId=e,this.featureIndex=t,this.sourceLayerIndex=i,this.bucketIndex=r,this.tileID=n}}class vi{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const t=++this.maxGroupID;this.collisionGroups[e]={ID:t,predicate:e=>e.collisionGroupID===t}}return this.collisionGroups[e]}}function xi(t,i,r,n,o){const{horizontalAlign:a,verticalAlign:s}=e.bT(t),l=-(a-.5)*i,c=-(s-.5)*r,u=e.bU(t,n);return new e.P(l+u[0]*o,c+u[1]*o)}function Ci(t,i,r,n,o){const a=new e.P(t,i);return r&&a._rotate(n?o:-o),a}class wi{constructor(e,t,i,r,n,o){this.transform=e.clone(),this.projection=e.projection.name,this.collisionIndex=new ui(this.transform,n),this.buildingIndex=o,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=t,this.retainedQueryData={},this.collisionGroups=new vi(i),this.collisionCircleArrays={},this.prevPlacement=r,r&&(r.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(t,i,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const a=r.getBucket(i),s=r.latestFeatureIndex;if(!a||!s||i.fqid!==a.layerIds[0])return;const l=a.layers[0].layout,c=a.layers[0].paint,u=r.collisionBoxArray,h=Math.pow(2,this.transform.zoom-r.tileID.overscaledZ),d=r.tileSize/e.aj,p=r.tileID.toUnwrapped();this.transform.setProjection(a.projection);const f=(m=r.tileID,g=a.getProjection(),y=this.transform,g.name===this.projection?y.calculateProjMatrix(m.toUnwrapped()):hi(y,g,m));var m,g,y;const _="map"===l.get("text-pitch-alignment"),v="map"===l.get("text-rotation-alignment");i.compileFilter(i.options);const x=i.dynamicFilter(),C=i.dynamicFilterNeedsFeature(),w=this.transform.calculatePixelsToTileUnitsMatrix(r),b=Yt(f,r.tileID.canonical,_,v,this.transform,a.getProjection(),w);let S=null;if(_){const t=Kt(f,r.tileID.canonical,_,v,this.transform,a.getProjection(),w);S=e.az([],this.transform.labelPlaneMatrix,t)}let L=null;x&&r.latestFeatureIndex&&(L={unwrappedTileID:p,dynamicFilter:x,dynamicFilterNeedsFeature:C}),this.retainedQueryData[a.bucketInstanceId]=new _i(a.bucketInstanceId,s,a.sourceLayerIndex,a.index,r.tileID);const[T,M]=a.layers[0].layout.get("text-size-scale-range"),E=e.ay(o,T,M),[I,A]=l.get("icon-size-scale-range"),k=e.ay(o,I,A),P={bucket:a,layout:l,paint:c,posMatrix:f,textLabelPlaneMatrix:b,labelToScreenMatrix:S,clippingData:L,scale:h,textPixelRatio:d,holdingForFade:r.holdingForFade(),collisionBoxArray:u,partiallyEvaluatedTextSize:e.bH(a.textSizeData,this.transform.zoom,E),partiallyEvaluatedIconSize:e.bH(a.iconSizeData,this.transform.zoom,k),collisionGroup:this.collisionGroups.get(a.sourceID),latestFeatureIndex:r.latestFeatureIndex};if(n)for(const e of a.sortKeyRanges){const{sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n}=e;t.push({sortKey:i,symbolInstanceStart:r,symbolInstanceEnd:n,parameters:P})}else t.push({symbolInstanceStart:0,symbolInstanceEnd:a.symbolInstances.length,parameters:P})}attemptAnchorPlacement(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y){const{textOffset0:_,textOffset1:v,crossTileID:x}=h,C=[_,v],w=xi(e,i,r,C,n),b=this.collisionIndex.placeCollisionBox(p,n,t,Ci(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate);if(m){const e=p.getSymbolInstanceIconSize(y,this.transform.zoom,h.placedIconSymbolIndex);if(0===this.collisionIndex.placeCollisionBox(p,e,m,Ci(w.x,w.y,o,a,this.transform.angle),u,s,l,c.predicate).box.length)return}if(b.box.length>0){let t;return this.prevPlacement&&this.prevPlacement.variableOffsets[x]&&this.prevPlacement.placements[x]&&this.prevPlacement.placements[x].text&&(t=this.prevPlacement.variableOffsets[x].anchor),this.variableOffsets[x]={textOffset:C,width:i,height:r,anchor:e,textScale:n,prevAnchor:t},this.markUsedJustification(p,e,h,f),p.allowVerticalPlacement&&(this.markUsedOrientation(p,f,h),this.placedOrientations[x]=f),{shift:w,placedGlyphBoxes:b}}}placeLayerBucketPart(t,i,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;const{bucket:a,layout:s,paint:l,posMatrix:c,textLabelPlaneMatrix:u,labelToScreenMatrix:h,clippingData:d,textPixelRatio:p,holdingForFade:f,collisionBoxArray:m,partiallyEvaluatedTextSize:g,partiallyEvaluatedIconSize:y,collisionGroup:_,latestFeatureIndex:v}=t.parameters,x=s.get("text-optional"),C=s.get("icon-optional"),w=s.get("text-allow-overlap"),b=s.get("icon-allow-overlap"),S="map"===s.get("text-rotation-alignment"),L="map"===s.get("text-pitch-alignment"),T=l.get("symbol-z-offset"),M="sea"===s.get("symbol-elevation-reference"),[E,I]=s.get("text-size-scale-range"),[A,k]=s.get("icon-size-scale-range"),P=e.ay(o,E,I),O=e.ay(o,A,k);this.transform.setProjection(a.projection);let R=w&&(b||!a.hasIconData()||C),z=b&&(w||!a.hasTextData()||x);const D=!T.isConstant();!a.collisionArrays&&m&&a.deserializeCollisionBoxes(m),r&&n&&a.updateCollisionDebugBuffers(this.transform.zoom,m,P,O);const F=(t,n,l)=>{const{crossTileID:m,numVerticalGlyphVertices:E}=t;let I=null;if(d&&d.dynamicFilterNeedsFeature||D){const e=this.retainedQueryData[a.bucketInstanceId];I=v.loadFeature({featureIndex:t.featureIndex,bucketIndex:e.bucketIndex,sourceLayerIndex:e.sourceLayerIndex,layoutVertexArrayOffset:0})}if(d&&!(0,d.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},I,this.retainedQueryData[a.bucketInstanceId].tileID.canonical,new e.P(t.tileAnchorX,t.tileAnchorY),this.transform.calculateDistanceTileData(d.unwrappedTileID)))return this.placements[m]=new gi(!1,!1,!1,!0),void i.add(m);const A=T.evaluate(I,{});if(i.has(m))return;if(f)return void(this.placements[m]=new gi(!1,!1,!1));let k=!1,P=!1,O=!0,F=!1,B=!1,V=null,N={box:null,offscreen:null,occluded:null},U={box:null},j=null,H=null,Z=null,W=0,G=0,q=0;l.textFeatureIndex?W=l.textFeatureIndex:t.useRuntimeCollisionCircles&&(W=t.featureIndex),l.verticalTextFeatureIndex&&(G=l.verticalTextFeatureIndex);const X=e=>{e.tileID=this.retainedQueryData[a.bucketInstanceId].tileID;const i=this.transform.elevation;e.elevation=M?A:A+(i?i.getAtTileOffset(e.tileID,e.tileAnchorX,e.tileAnchorY):0),e.elevation+=t.zOffset},Y=l.textBox;if(Y){X(Y);const i=i=>{let r=e.bI.horizontal;if(a.allowVerticalPlacement&&!i&&this.prevPlacement){const e=this.prevPlacement.placedOrientations[m];e&&(this.placedOrientations[m]=e,r=e,this.markUsedOrientation(a,r,t))}return r},r=(t,i)=>{if(a.allowVerticalPlacement&&E>0&&l.verticalTextBox){for(const r of a.writingModes)if(r===e.bI.vertical?(N=i(),U=N):N=t(),N&&N.box&&N.box.length)break}else N=t()};if(s.get("text-variable-anchor")){let o=s.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[m]){const e=this.prevPlacement.variableOffsets[m];o.indexOf(e.anchor)>0&&(o=o.filter(t=>t!==e.anchor),o.unshift(e.anchor))}const u=(e,i,r)=>{const s=a.getSymbolInstanceTextSize(g,t,this.transform.zoom,n),l=(e.x2-e.x1)*s+2*e.padding,u=(e.y2-e.y1)*s+2*e.padding,h=t.hasIconTextFit&&!b?i:null;h&&X(h);let d={box:[],offscreen:!1,occluded:!1};const f=w?2*o.length:o.length;for(let m=0;m<f;++m){const i=this.attemptAnchorPlacement(o[m%o.length],e,l,u,s,S,L,p,c,_,m>=o.length,t,n,a,r,h,g,y);if(i&&(d=i.placedGlyphBoxes,d&&d.box&&d.box.length)){k=!0,V=i.shift;break}}return d};r(()=>u(Y,l.iconBox,e.bI.horizontal),()=>{const t=l.verticalTextBox;return t&&X(t),a.allowVerticalPlacement&&!(N&&N.box&&N.box.length)&&E>0&&t?u(t,l.verticalIconBox,e.bI.vertical):{box:null,offscreen:null,occluded:null}}),N&&(k=N.box,O=N.offscreen,F=N.occluded);const h=i(!(!N||!N.box));if(!k&&this.prevPlacement){const e=this.prevPlacement.variableOffsets[m];e&&(this.variableOffsets[m]=e,this.markUsedJustification(a,e.anchor,t,h))}}else{const s=(i,r)=>{const s=a.getSymbolInstanceTextSize(g,t,this.transform.zoom,n,o),l=this.collisionIndex.placeCollisionBox(a,s,i,new e.P(0,0),w,p,c,_.predicate);return l&&l.box&&l.box.length&&(this.markUsedOrientation(a,r,t),this.placedOrientations[m]=r),l};r(()=>s(Y,e.bI.horizontal),()=>{const t=l.verticalTextBox;return a.allowVerticalPlacement&&E>0&&t?(X(t),s(t,e.bI.vertical)):{box:null,offscreen:null,occluded:null}}),i(!!(N&&N.box&&N.box.length))}}if(j=N,k=j&&j.box&&j.box.length>0,O=j&&j.offscreen,F=j&&j.occluded,t.useRuntimeCollisionCircles){const i=a.text.placedSymbolArray.get(t.centerJustifiedTextSymbolIndex>=0?t.centerJustifiedTextSymbolIndex:t.verticalPlacedTextSymbolIndex),n=e.bJ(a.textSizeData,g,i),o=s.get("text-padding");H=this.collisionIndex.placeCollisionCircles(a,w,i,a.lineVertexArray,a.glyphOffsetArray,n,c,u,h,r,L,_.predicate,t.collisionCircleDiameter*n/e.bO,o,this.retainedQueryData[a.bucketInstanceId].tileID),k=w||H.circles.length>0&&!H.collisionDetected,O=O&&H.offscreen,F=H.occluded}if(l.iconFeatureIndex&&(q=l.iconFeatureIndex),l.iconBox){const i=i=>{X(i);const r=t.hasIconTextFit&&V?Ci(V.x,V.y,S,L,this.transform.angle):new e.P(0,0),n=a.getSymbolInstanceIconSize(y,this.transform.zoom,t.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(a,n,i,r,b,p,c,_.predicate)};U&&U.box&&U.box.length&&l.verticalIconBox?(Z=i(l.verticalIconBox),P=Z.box.length>0):(Z=i(l.iconBox),P=Z.box.length>0),O=O&&Z.offscreen,B=Z.occluded}const K=x||0===t.numHorizontalGlyphVertices&&0===E,J=C||0===t.numIconVertices;if(K||J?J?K||(P=P&&k):k=P&&k:P=k=P&&k,k&&j&&j.box&&this.collisionIndex.insertCollisionBox(j.box,s.get("text-ignore-placement"),a.bucketInstanceId,U&&U.box&&G?G:W,_.ID),P&&Z&&this.collisionIndex.insertCollisionBox(Z.box,s.get("icon-ignore-placement"),a.bucketInstanceId,q,_.ID),H&&(k&&this.collisionIndex.insertCollisionCircles(H.circles,s.get("text-ignore-placement"),a.bucketInstanceId,W,_.ID),r)){const e=a.bucketInstanceId;let t=this.collisionCircleArrays[e];void 0===t&&(t=this.collisionCircleArrays[e]=new yi);for(let i=0;i<H.circles.length;i+=4)t.circles.push(H.circles[i+0]),t.circles.push(H.circles[i+1]),t.circles.push(H.circles[i+2]),t.circles.push(H.collisionDetected?1:0)}const Q="globe"!==a.projection.name;R=R&&(Q||!F),z=z&&(Q||!B),this.placements[m]=new gi(k||R,P||z,O||a.justReloaded),i.add(m)},B=this.retainedQueryData[a.bucketInstanceId].tileID;if("offset"===a.elevationType&&this.buildingIndex&&this.buildingIndex.updateZOffset(a,B),"road"===a.elevationType&&a.updateRoadElevation(B.canonical),a.updateZOffset(),a.sortFeaturesByY){const t=a.getSortedSymbolIndexes(this.transform.angle);for(let e=t.length-1;e>=0;--e){const i=t[e];F(a.symbolInstances.get(i),i,a.collisionArrays[i])}a.hasAnyZOffset&&e.w("".concat(a.layerIds[0]," layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y"))}else if(a.hasAnyZOffset){const e=a.getSortedIndexesByZOffset();for(let t=0;t<e.length;++t){const i=e[t];F(a.symbolInstances.get(i),i,a.collisionArrays[i])}}else for(let e=t.symbolInstanceStart;e<t.symbolInstanceEnd;e++)F(a.symbolInstances.get(e),e,a.collisionArrays[e]);if(r&&a.bucketInstanceId in this.collisionCircleArrays){const t=this.collisionCircleArrays[a.bucketInstanceId];e.bi(t.invProjMatrix,c),t.viewportMatrix=this.collisionIndex.getViewportMatrix()}a.justReloaded=!1}markUsedJustification(t,i,r,n){const{leftJustifiedTextSymbolIndex:o,centerJustifiedTextSymbolIndex:a,rightJustifiedTextSymbolIndex:s,verticalPlacedTextSymbolIndex:l,crossTileID:c}=r,u=e.bV(i),h=n===e.bI.vertical?l:"left"===u?o:"center"===u?a:"right"===u?s:-1;o>=0&&(t.text.placedSymbolArray.get(o).crossTileID=h>=0&&o!==h?0:c),a>=0&&(t.text.placedSymbolArray.get(a).crossTileID=h>=0&&a!==h?0:c),s>=0&&(t.text.placedSymbolArray.get(s).crossTileID=h>=0&&s!==h?0:c),l>=0&&(t.text.placedSymbolArray.get(l).crossTileID=h>=0&&l!==h?0:c)}markUsedOrientation(t,i,r){const n=i===e.bI.horizontal||i===e.bI.horizontalOnly?i:0,o=i===e.bI.vertical?i:0,{leftJustifiedTextSymbolIndex:a,centerJustifiedTextSymbolIndex:s,rightJustifiedTextSymbolIndex:l,verticalPlacedTextSymbolIndex:c}=r,u=t.text.placedSymbolArray;a>=0&&(u.get(a).placedOrientation=n),s>=0&&(u.get(s).placedOrientation=n),l>=0&&(u.get(l).placedOrientation=n),c>=0&&(u.get(c).placedOrientation=o)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const t=this.prevPlacement;let i=!1;this.prevZoomAdjustment=t?t.zoomAdjustment(this.transform.zoom):0;const r=t?t.symbolFadeChange(e):1,n=t?t.opacities:{},o=t?t.variableOffsets:{},a=t?t.placedOrientations:{};for(const s in this.placements){const e=this.placements[s],t=n[s];t?(this.opacities[s]=new mi(t,r,e.text,e.icon,null,e.clipped),i=i||e.text!==t.text.placed||e.icon!==t.icon.placed):(this.opacities[s]=new mi(null,r,e.text,e.icon,e.skipFade,e.clipped),i=i||e.text||e.icon)}for(const s in n){const e=n[s];if(!this.opacities[s]){const t=new mi(e,r,!1,!1);t.isHidden()||(this.opacities[s]=t,i=i||e.text.placed||e.icon.placed)}}for(const s in o)this.variableOffsets[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.variableOffsets[s]=o[s]);for(const s in a)this.placedOrientations[s]||!this.opacities[s]||this.opacities[s].isHidden()||(this.placedOrientations[s]=a[s]);i?this.lastPlacementChangeTime=e:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=t?t.lastPlacementChangeTime:e)}updateLayerOpacities(e,t,i,r){const n=new Set;for(const o of t){const t=o.getBucket(e);t&&o.latestFeatureIndex&&e.fqid===t.layerIds[0]&&(this.updateBucketOpacities(t,n,o,o.collisionBoxArray,i,r,o.tileID,e.scope),"offset"===t.elevationType&&this.buildingIndex&&this.buildingIndex.updateZOffset(t,o.tileID),"road"===t.elevationType&&t.updateRoadElevation(o.tileID.canonical),t.updateZOffset())}}updateBucketOpacities(t,i,r,n,o,a,s,l){t.hasTextData()&&t.text.opacityVertexArray.clear(),t.hasIconData()&&t.icon.opacityVertexArray.clear(),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexArray.clear(),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexArray.clear();const c=t.layers[0].layout,u=t.layers[0].paint,h=!!t.layers[0].dynamicFilter(),d=new mi(null,0,!1,!1,!0),p=c.get("text-allow-overlap"),f=c.get("icon-allow-overlap"),m=c.get("text-variable-anchor"),g="map"===c.get("text-rotation-alignment"),y="map"===c.get("text-pitch-alignment"),_=u.get("symbol-z-offset"),v="sea"===c.get("symbol-elevation-reference"),x=!_.isConstant(),C=new mi(null,0,p&&(f||!t.hasIconData()||c.get("icon-optional")),f&&(p||!t.hasTextData()||c.get("text-optional")),!0);!t.collisionArrays&&n&&(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData())&&t.deserializeCollisionBoxes(n);const w=(e,t,i)=>{for(let r=0;r<t/4;r++)e.opacityVertexArray.emplaceBack(i)};let b=0;a&&t.updateReplacement(s,a);for(let S=0;S<t.symbolInstances.length;S++){const n=t.symbolInstances.get(S),{numHorizontalGlyphVertices:c,numVerticalGlyphVertices:u,crossTileID:p,numIconVertices:f,tileAnchorX:L,tileAnchorY:T}=n;let M=null;const E=this.retainedQueryData[t.bucketInstanceId];x&&n&&E&&(M=r.latestFeatureIndex.loadFeature({featureIndex:n.featureIndex,bucketIndex:E.bucketIndex,sourceLayerIndex:E.sourceLayerIndex,layoutVertexArrayOffset:0}));const I=_.evaluate(M,{}),A=i.has(p);let k=this.opacities[p];A?k=d:k||(k=C,this.opacities[p]=k),i.add(p);const P=c>0||u>0,O=f>0,R=this.placedOrientations[p],z=R===e.bI.vertical,D=R===e.bI.horizontal||R===e.bI.horizontalOnly;!P&&!O||k.isHidden()||b++;let F=!1;if((P||O)&&a)for(const i of t.activeReplacements){if(e.bP(i,o,e.bQ.Symbol,l))continue;if(i.min.x>L||L>i.max.x||i.min.y>T||T>i.max.y)continue;const t=e.bR(L,T,s.canonical,i.footprintTileId.canonical);if(F=e.bS(t,i.footprint),F)break}if(P){const e=F?Pi:ki(k.text);w(t.text,c,z?Pi:e),w(t.text,u,D?Pi:e);const i=k.text.isHidden(),{leftJustifiedTextSymbolIndex:r,centerJustifiedTextSymbolIndex:o,rightJustifiedTextSymbolIndex:a,verticalPlacedTextSymbolIndex:s}=n,l=t.text.placedSymbolArray,h=i||z?1:0;r>=0&&(l.get(r).hidden=h),o>=0&&(l.get(o).hidden=h),a>=0&&(l.get(a).hidden=h),s>=0&&(l.get(s).hidden=i||D?1:0);const d=this.variableOffsets[p];d&&this.markUsedJustification(t,d.anchor,n,R);const f=this.placedOrientations[p];f&&(this.markUsedJustification(t,"left",n,f),this.markUsedOrientation(t,f,n))}if(O){const e=F?Pi:ki(k.icon),{placedIconSymbolIndex:i,verticalPlacedIconSymbolIndex:r}=n,o=t.icon.placedSymbolArray,a=k.icon.isHidden()?1:0;i>=0&&(w(t.icon,f,z?Pi:e),o.get(i).hidden=a),r>=0&&(w(t.icon,n.numVerticalIconVertices,D?Pi:e),o.get(r).hidden=a)}if(t.hasIconCollisionBoxData()||t.hasTextCollisionBoxData()){const i=t.collisionArrays[S];if(i){let r=new e.P(0,0),o=!0;if(i.textBox||i.verticalTextBox){if(m){const e=this.variableOffsets[p];e?(r=xi(e.anchor,e.width,e.height,e.textOffset,e.textScale),g&&r._rotate(y?this.transform.angle:-this.transform.angle)):o=!1}h&&(o=!k.clipped),i.textBox&&bi(t.textCollisionBox.collisionVertexArray,k.text.placed,!o||z,I,v,r.x,r.y),i.verticalTextBox&&bi(t.textCollisionBox.collisionVertexArray,k.text.placed,!o||D,I,v,r.x,r.y)}const a=o&&Boolean(!D&&i.verticalIconBox);i.iconBox&&bi(t.iconCollisionBox.collisionVertexArray,k.icon.placed,a,I,v,n.hasIconTextFit?r.x:0,n.hasIconTextFit?r.y:0),i.verticalIconBox&&bi(t.iconCollisionBox.collisionVertexArray,k.icon.placed,!a,I,v,n.hasIconTextFit?r.x:0,n.hasIconTextFit?r.y:0)}}}if(t.fullyClipped=0===b,t.sortFeatures(this.transform.angle),this.retainedQueryData[t.bucketInstanceId]&&(this.retainedQueryData[t.bucketInstanceId].featureSortOrder=t.featureSortOrder),t.hasTextData()&&t.text.opacityVertexBuffer&&t.text.opacityVertexBuffer.updateData(t.text.opacityVertexArray),t.hasIconData()&&t.icon.opacityVertexBuffer&&t.icon.opacityVertexBuffer.updateData(t.icon.opacityVertexArray),t.hasIconCollisionBoxData()&&t.iconCollisionBox.collisionVertexBuffer&&t.iconCollisionBox.collisionVertexBuffer.updateData(t.iconCollisionBox.collisionVertexArray),t.hasTextCollisionBoxData()&&t.textCollisionBox.collisionVertexBuffer&&t.textCollisionBox.collisionVertexBuffer.updateData(t.textCollisionBox.collisionVertexArray),t.bucketInstanceId in this.collisionCircleArrays){const e=this.collisionCircleArrays[t.bucketInstanceId];t.placementInvProjMatrix=e.invProjMatrix,t.placementViewportMatrix=e.viewportMatrix,t.collisionCircleArray=e.circles,delete this.collisionCircleArrays[t.bucketInstanceId]}}symbolFadeChange(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,t){const i=this.zoomAtLastRecencyCheck===t?1-this.zoomAdjustment(t):1;return this.zoomAtLastRecencyCheck=t,this.commitTime+this.fadeDuration*i>e}setStale(){this.stale=!0}}function bi(e,t,i,r,n,o,a){e.emplaceBack(t?1:0,i?1:0,o||0,a||0,r,n?1:0),e.emplaceBack(t?1:0,i?1:0,o||0,a||0,r,n?1:0),e.emplaceBack(t?1:0,i?1:0,o||0,a||0,r,n?1:0),e.emplaceBack(t?1:0,i?1:0,o||0,a||0,r,n?1:0)}const Si=Math.pow(2,25),Li=Math.pow(2,24),Ti=Math.pow(2,17),Mi=Math.pow(2,16),Ei=Math.pow(2,9),Ii=Math.pow(2,8),Ai=Math.pow(2,1);function ki(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;const t=e.placed?1:0,i=Math.floor(127*e.opacity);return i*Si+t*Li+i*Ti+t*Mi+i*Ei+t*Ii+i*Ai+t}const Pi=0;class Oi{constructor(e){this._sortAcrossTiles="viewport-y"!==e.layout.get("symbol-z-order")&&void 0!==e.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(e,t,i,r,n,o){const a=this._bucketParts;for(;this._currentTileIndex<e.length;)if(t.getBucketParts(a,r,e[this._currentTileIndex],this._sortAcrossTiles,o),this._currentTileIndex++,n())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,a.sort((e,t)=>e.sortKey-t.sortKey));this._currentPartIndex<a.length;){const e=a[this._currentPartIndex];if(t.placeLayerBucketPart(e,this._seenCrossTileIDs,i,0===e.symbolInstanceStart,o),this._currentPartIndex++,n())return!0}return!1}}class Ri{constructor(e,t,i,r,n,o,a,s,l){this.placement=new wi(e,n,o,a,s,l),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=r,this._done=!1}isDone(){return this._done}continuePlacement(t,i,r,n,o){const a=e.q.now(),s=()=>{const t=e.q.now()-a;return!this._forceFullPlacement&&t>2};for(;this._currentPlacementIndex>=0;){const a=i[t[this._currentPlacementIndex]],l=this.placement.collisionIndex.transform.zoom;if("symbol"===a.type&&(!a.minzoom||a.minzoom<=l)&&(!a.maxzoom||a.maxzoom>l)){const t=a,i=t.layout.get("symbol-z-elevate"),l=void 0!==t.layout.get("symbol-sort-key").constantOr(1),c=t.layout.get("symbol-z-order"),u="viewport-y"===c||"auto"===c&&!("viewport-y"!==c&&l),h=t.layout.get("text-allow-overlap")||t.layout.get("icon-allow-overlap")||t.layout.get("text-ignore-placement")||t.layout.get("icon-ignore-placement"),d=u&&h,p=this._inProgressLayer=this._inProgressLayer||new Oi(t),f=e.C(a.source,a.scope);if(p.continuePlacement(i||d?n[f]:r[f],this.placement,this._showCollisionBoxes,a,s,o))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const zi=512/e.aj/2;class Di{constructor(t,i,r){this.tileID=t,this.bucketInstanceId=r,this.index=new e.bW(i.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const n=t.canonical.x*e.aj,o=t.canonical.y*e.aj;for(let e=0;e<i.length;e++){const{key:t,crossTileID:r,tileAnchorX:a,tileAnchorY:s}=i.get(e),l=Math.floor((n+a)*zi),c=Math.floor((o+s)*zi);this.index.add(l,c),this.keys.push(t),this.crossTileIDs.push(r)}this.index.finish()}findMatches(t,i,r){const n=this.tileID.canonical.z<i.canonical.z?1:Math.pow(2,this.tileID.canonical.z-i.canonical.z),o=zi/Math.pow(2,i.canonical.z-this.tileID.canonical.z),a=i.canonical.x*e.aj,s=i.canonical.y*e.aj;for(let e=0;e<t.length;e++){const i=t.get(e);if(i.crossTileID)continue;const{key:l,tileAnchorX:c,tileAnchorY:u}=i,h=Math.floor((a+c)*o),d=Math.floor((s+u)*o),p=this.index.range(h-n,d-n,h+n,d+n).sort((e,t)=>e-t);for(const e of p){const t=this.crossTileIDs[e];if(this.keys[e]===l&&!r.has(t)){r.add(t),i.crossTileID=t;break}}}}}class Fi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Bi{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const t=Math.round((e-this.lng)/360);if(0!==t)for(const i in this.indexes){const e=this.indexes[i],r={};for(const i in e){const n=e[i];n.tileID=n.tileID.unwrapTo(n.tileID.wrap+t),r[n.tileID.key]=n}this.indexes[i]=r}this.lng=e}addBucket(e,t,i){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let n=0;n<t.symbolInstances.length;n++)t.symbolInstances.get(n).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]=new Set);const r=this.usedCrossTileIDs[e.overscaledZ];for(const n in this.indexes){const i=this.indexes[n];if(Number(n)>e.overscaledZ)for(const n in i){const o=i[n];o.tileID.isChildOf(e)&&o.findMatches(t.symbolInstances,e,r)}else{const o=i[e.scaledTo(Number(n)).key];o&&o.findMatches(t.symbolInstances,e,r)}}for(let n=0;n<t.symbolInstances.length;n++){const e=t.symbolInstances.get(n);e.crossTileID||(e.crossTileID=i.generate(),r.add(e.crossTileID))}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new Di(e,t.symbolInstances,t.bucketInstanceId),!0}removeBucketCrossTileIDs(e,t){for(const i of t.crossTileIDs)this.usedCrossTileIDs[e].delete(i)}removeStaleBuckets(e){let t=!1;for(const i in this.indexes){const r=this.indexes[i];for(const n in r)e[r[n].bucketInstanceId]||(this.removeBucketCrossTileIDs(i,r[n]),delete r[n],t=!0)}return t}}class Vi{constructor(){this.layerIndexes={},this.crossTileIDs=new Fi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,t,i,r){let n=this.layerIndexes[e.fqid];void 0===n&&(n=this.layerIndexes[e.fqid]=new Bi);let o=!1;const a={};"globe"!==r.name&&n.handleWrapJump(i);for(const s of t){const t=s.getBucket(e);t&&e.fqid===t.layerIds[0]&&(t.bucketInstanceId||(t.bucketInstanceId=++this.maxBucketInstanceId),n.addBucket(s.tileID,t,this.crossTileIDs)&&(o=!0),a[t.bucketInstanceId]=!0)}return n.removeStaleBuckets(a)&&(o=!0),o}pruneUnusedLayers(e){const t={};e.forEach(e=>{t[e]=!0});for(const i in this.layerIndexes)t[i]||delete this.layerIndexes[i]}}const Ni=771;class Ui{constructor(e,t,i,r){this.blendFunction=e,this.blendColor=t.toNonPremultipliedRenderColor(null),this.mask=i,this.blendEquation=r}}Ui.Replace=[1,0,1,0],Ui.disabled=new Ui(Ui.Replace,e.am.transparent,[!1,!1,!1,!1]),Ui.unblended=new Ui(Ui.Replace,e.am.transparent,[!0,!0,!0,!0]),Ui.alphaBlended=new Ui([1,Ni,1,Ni],e.am.transparent,[!0,!0,!0,!0]),Ui.alphaBlendedNonPremultiplied=new Ui([770,Ni,770,Ni],e.am.transparent,[!0,!0,!0,!0]),Ui.multiply=new Ui([774,0,774,0],e.am.transparent,[!0,!0,!0,!0]);class ji{constructor(e,t,i){this.func=e,this.mask=t,this.range=i}}ji.ReadOnly=!1,ji.ReadWrite=!0,ji.disabled=new ji(519,ji.ReadOnly,[0,1]);const Hi=7680;class Zi{constructor(e,t,i,r,n,o){this.test=e,this.ref=t,this.mask=i,this.fail=r,this.depthFail=n,this.pass=o}}Zi.disabled=new Zi({func:519,mask:0},0,0,Hi,Hi,Hi);const Wi=1029,Gi=2305;class qi{constructor(e,t,i){this.enable=e,this.mode=t,this.frontFace=i}}function Xi(t,i){const r=e.c1(t,3);e.c3(t,i),e.c7(t,3,r)}function Yi(t,i){const r=e.b_([]);return e.b$(r,r,-i),e.c0(r,r,-t),r}function Ki(t,i){const r=[t[0],t[1],0],n=[i[0],i[1],0];if(e.ae(r)>=1e-15){const t=e.au([],r);e.bY(n,t,e.bG(n,t)),i[0]=n[0],i[1]=n[1]}const o=e.bF([],i,t);if(e.bZ(o)<1e-15)return null;const a=Math.atan2(-o[1],o[0]);return Yi(Math.atan2(Math.sqrt(t[0]*t[0]+t[1]*t[1]),-t[2]),a)}qi.disabled=new qi(!1,Wi,Gi),qi.backCCW=new qi(!0,Wi,Gi),qi.backCW=new qi(!0,Wi,2304),qi.frontCW=new qi(!0,1028,2304),qi.frontCCW=new qi(!0,1028,Gi);class Ji{constructor(e,t){this.position=e,this.orientation=t}get position(){return this._position}set position(t){if(t){const i=t instanceof e.ac?t:new e.ac(t[0],t[1],t[2]);this._renderWorldCopies&&(i.x=e.bX(i.x,0,1)),this._position=i}else this._position=null}lookAtPoint(t,i){if(this.orientation=null,!this.position)return;const r=this.position,n=this._elevation?this._elevation.getAtPointOrZero(e.ac.fromLngLat(t)):0,o=e.ac.fromLngLat(t,n),a=[o.x-r.x,o.y-r.y,o.z-r.z];i||(i=[0,0,1]),i[2]=Math.abs(i[2]),this.orientation=Ki(a,i)}setPitchBearing(t,i){this.orientation=Yi(e.al(t),e.al(-i))}}class Qi{constructor(t,i){this._transform=e.bx([]),this.orientation=i,this.position=t}get mercatorPosition(){const t=this.position;return new e.ac(t[0],t[1],t[2])}get position(){const t=e.c1(this._transform,3);return[t[0],t[1],t[2]]}set position(t){var i;t&&e.c7(this._transform,3,[(i=t)[0],i[1],i[2],1])}get orientation(){return this._orientation}set orientation(t){this._orientation=t||e.b_([]),t&&Xi(this._transform,this._orientation)}getPitchBearing(){const e=this.forward(),t=this.right();return{bearing:Math.atan2(-t[1],t[0]),pitch:Math.atan2(Math.sqrt(e[0]*e[0]+e[1]*e[1]),-e[2])}}setPitchBearing(e,t){this._orientation=Yi(e,t),Xi(this._transform,this._orientation)}forward(){const t=e.c1(this._transform,2);return[-t[0],-t[1],-t[2]]}up(){const t=e.c1(this._transform,1);return[-t[0],-t[1],-t[2]]}right(){const t=e.c1(this._transform,0);return[t[0],t[1],t[2]]}getCameraToWorld(t,i){const r=new Float64Array(16);return e.bi(r,this.getWorldToCamera(t,i)),r}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(t,i,r){const n=this.position;e.bY(n,n,-t);const o=new Float64Array(16);return e.bn(o,[r,r,r]),e.bo(o,o,n),o[10]*=i,o}getWorldToCamera(t,i){const r=new Float64Array(16),n=new Float64Array(4),o=this.position;return e.c2(n,this._orientation),e.bY(o,o,-t),e.c3(r,n),e.bo(r,r,o),r[1]*=-1,r[5]*=-1,r[9]*=-1,r[13]*=-1,r[8]*=i,r[9]*=i,r[10]*=i,r[11]*=i,r}getCameraToClipPerspective(t,i,r,n){const o=new Float64Array(16);return e.c4(o,t,i,r,n),o}getCameraToClipOrthographic(t,i,r,n,o,a){const s=new Float64Array(16);return e.c5(s,t,i,r,n,o,a),s}getDistanceToElevation(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=0===t?0:e.c6(t,i?e.aY(this.position[1]):this.position[1]),n=this.forward();return(r-this.position[2])/n[2]}clone(){return new Qi([...this.position],[...this.orientation])}}const $i={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class er{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(isNaN(e)||e<0||isNaN(t)||t<0||isNaN(i)||i<0||isNaN(r)||r<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=t,this.left=i,this.right=r}interpolate(t,i,r){return null!=i.top&&null!=t.top&&(this.top=e.ai(t.top,i.top,r)),null!=i.bottom&&null!=t.bottom&&(this.bottom=e.ai(t.bottom,i.bottom,r)),null!=i.left&&null!=t.left&&(this.left=e.ai(t.left,i.left,r)),null!=i.right&&null!=t.right&&(this.right=e.ai(t.right,i.right,r)),this}getCenter(t,i){const r=e.ay((this.left+t-this.right)/2,0,t),n=e.ay((this.top+i-this.bottom)/2,0,i);return new e.P(r,n)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new er(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const tr=15;class ir{constructor(t,i,r,n,o,a,s){this.tileSize=512,this._renderWorldCopies=void 0===o||o,this._minZoom=t||0,this._maxZoom=i||22,this._minPitch=null!==r&&void 0!==r?r:0,this._maxPitch=null!==n&&void 0!==n?n:60,this.setProjection(a),this.setMaxBounds(s),this.width=0,this.height=0,this._center=new e.cd(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new er,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Qi,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1,this._allowWorldUnderZoom=!1}clone(){const e=new ir(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection(),this.maxBounds);return e._elevation=this._elevation,e._centerAltitude=this._centerAltitude,e._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,e.tileSize=this.tileSize,e.mercatorFromTransition=this.mercatorFromTransition,e.width=this.width,e.height=this.height,e.cameraElevationReference=this.cameraElevationReference,e._center=this._center,e._setZoom(this.zoom),e._seaLevelZoom=this._seaLevelZoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._nearZ=this._nearZ,e._farZ=this._farZ,e._averageElevation=this._averageElevation,e._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,e._unmodified=this._unmodified,e._edgeInsets=this._edgeInsets.clone(),e._camera=this._camera.clone(),e._calcMatrices(),e.freezeTileCoverage=this.freezeTileCoverage,e.frustumCorners=this.frustumCorners,e._allowWorldUnderZoom=this._allowWorldUnderZoom,e}get isOrthographic(){return"globe"!==this.projection.name&&this._orthographicProjectionAtLowPitch&&this.pitch<tr}get elevation(){return this._elevation}set elevation(e){this._elevation!==e&&(this._elevation=e,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return"globe"!==this.projection.name&&!this.isOrthographic}updateElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(null==this._seaLevelZoom||i)&&this._updateCameraOnTerrain(),(e||i)&&this._constrainCamera(t),this._calcMatrices()}getProjection(){return e.aF(this.projection,["name","center","parallels"])}setProjection(t){this.projectionOptions=t||{name:"mercator"};const i=this.projection?this.getProjection():void 0;this.projection=e.ce(this.projectionOptions);const r=this.getProjection(),n=!e.bv(i,r);return n&&this._calcMatrices(),this.mercatorFromTransition=!1,n}setOrthographicProjectionAtLowPitch(e){return this._orthographicProjectionAtLowPitch!==e&&(this._orthographicProjectionAtLowPitch=e,this._calcMatrices(),!0)}setMercatorFromTransition(){const t=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=e.ce({name:"mercator"});const i=t!==this.projection.name;return i&&this._calcMatrices(),i}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies&&!0===this.projection.supportsWorldCopies}set renderWorldCopies(e){void 0===e?e=!0:null===e&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get cameraWorldSize(){const e=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(e))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return e.c6(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new e.P(this.width,this.height)}get bearing(){return e.bX(this.rotation,-180,180)}set bearing(e){this.rotation=e}get rotation(){return-this.angle/Math.PI*180}set rotation(t){const i=-t*Math.PI/180;this.angle!==i&&(this._unmodified=!1,this.angle=i,this._calcMatrices(),this.rotationMatrix=e.cf(),e.cg(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(t){const i=e.ay(t,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==i&&(this._unmodified=!1,this._pitch=i,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}set fov(t){t=Math.max(.01,Math.min(60,t)),this._fov!==t&&(this._unmodified=!1,this._fov=e.al(t),this._calcMatrices())}get fovX(){return this._fov}get fovY(){const e=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/e)}get averageElevation(){return this._averageElevation}set averageElevation(e){this._averageElevation=e,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(e){const t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._setZoom(t),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(e){this._zoom=e,this.scale=this.zoomScale(e),this.tileZoom=Math.floor(e),this.zoomFraction=e-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(e){this._tileCoverLift!==e&&(this._tileCoverLift=e)}_updateCameraOnTerrain(){const e=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,t=this.elevation&&e===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||e===Number.NEGATIVE_INFINITY&&(!t||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const i=this._elevation;t||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&i.exaggeration()&&this._centerAltitudeValidForExaggeration!==i.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*i.exaggeration(),this._centerAltitudeValidForExaggeration=i.exaggeration()):(this._centerAltitude=e||0,this._centerAltitudeValidForExaggeration=i.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){if(void 0===this._centerAltitudeValidForExaggeration)return;const e=Math.max(0,(this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize);this._seaLevelZoom=this._zoomFromMercatorZ(e)}sampleAverageElevation(){if(!this._elevation)return 0;const t=this._elevation,i=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],r=this.horizonLineFromTop();let n=0,o=0;for(let a=0;a<i.length;a++){const s=new e.P(i[a][0]*this.width,r+i[a][1]*(this.height-r)),l=t.pointCoordinate(s);if(!l)continue;const c=1/Math.hypot(l[0]-this._camera.position[0],l[1]-this._camera.position[1]);n+=l[3]*c,o+=c}return 0===o?NaN:n/o}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._terrainEnabled()&&("ground"===this.cameraElevationReference?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(null==this._seaLevelZoom||!this._elevation)return;const e=this._seaLevelZoom,t=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),i=this.pixelsPerMeter/this.worldSize*t,r=this._mercatorZfromZoom(e),n=this._mercatorZfromZoom(this._maxZoom),o=Math.max(r-i,n);this._setZoom(this._zoomFromMercatorZ(o))}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}computeZoomRelativeTo(t){const i=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,t.toAltitude()));let r;r=t.z<this._camera.position[2]?[i.x,i.y,i.z]:[t.x,t.y,t.z];const n=e.ae(e.at([],this._camera.position,r));return e.ay(this._zoomFromMercatorZ(n),this._minZoom,this._maxZoom)}setFreeCameraOptions(t){if(!this.height)return;if(!t.position&&!t.orientation)return;this._updateCameraState();let i=!1;if(t.orientation&&!e.ch(t.orientation,this._camera.orientation)&&(i=this._setCameraOrientation(t.orientation)),t.position){const r=[t.position.x,t.position.y,t.position.z];e.ci(r,this._camera.position)||(this._setCameraPosition(r),i=!0)}i&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const t=this._camera.position,i=new Ji;return i.position=new e.ac(t[0],t[1],t[2]),i.orientation=this._camera.orientation,i._elevation=this.elevation,i._renderWorldCopies=this.renderWorldCopies,i}_setCameraOrientation(t){if(!e.cj(t))return!1;e.ck(t,t);const i=e.cl([],[0,0,-1],t),r=e.cl([],[0,-1,0],t);if(r[2]<0)return!1;const n=Ki(i,r);return!!n&&(this._camera.orientation=n,!0)}_setCameraPosition(t){const i=this.zoomScale(this.minZoom)*this.tileSize,r=this.zoomScale(this.maxZoom)*this.tileSize,n=this.cameraToCenterDistance;t[2]=e.ay(t[2],n/r,n/i),this._camera.position=t}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,t,i){this._unmodified=!1,this._edgeInsets.interpolate(e,t,i),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const t=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,t)}getVisibleUnwrappedCoordinates(t){const i=[new e.cm(0,t)];if(this.renderWorldCopies){const r=this.pointCoordinate(new e.P(0,0)),n=this.pointCoordinate(new e.P(this.width,0)),o=this.pointCoordinate(new e.P(this.width,this.height)),a=this.pointCoordinate(new e.P(0,this.height)),s=Math.floor(Math.min(r.x,n.x,o.x,a.x)),l=Math.floor(Math.max(r.x,n.x,o.x,a.x)),c=1;for(let u=s-c;u<=l+c;u++)0!==u&&i.push(new e.cm(u,t))}return i}isLODDisabled(e){return(!e||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(t,i,r){let n=[];const o=null!=r,a=!o;if(a&&this.zoom<i)return n;if(o&&0===r[0]&&0===r[1])return n;const s=new Set,l=(t,i,r,o,a)=>{const l=e.cK(i,t,r,o,a);s.has(l)||(n.push(new e.aM(t,i,r,o,a)),s.add(l))};for(let e=0;e<t.length;e++){const n=t[e];if(a&&n.canonical.z!==i)continue;const s=n.canonical,c=n.overscaledZ,u=n.wrap,h=1<<s.z,d=s.x+1<h,p=s.x>0,f=s.y+1<h,m=s.y>0,g=n.wrap-(p?0:1),y=n.wrap+(d?0:1),_=p?s.x-1:h-1,v=d?s.x+1:0;if(o)r[0]<0?(l(c,y,s.z,v,s.y),r[1]<0&&f&&(l(c,u,s.z,s.x,s.y+1),l(c,y,s.z,v,s.y+1)),r[1]>0&&m&&(l(c,u,s.z,s.x,s.y-1),l(c,y,s.z,v,s.y-1))):r[0]>0?(l(c,g,s.z,_,s.y),r[1]<0&&f&&(l(c,u,s.z,s.x,s.y+1),l(c,g,s.z,_,s.y+1)),r[1]>0&&m&&(l(c,u,s.z,s.x,s.y-1),l(c,g,s.z,_,s.y-1))):r[1]<0&&f?l(c,u,s.z,s.x,s.y+1):m&&l(c,u,s.z,s.x,s.y-1);else{const e=n.visibleQuadrants;1&e&&(l(c,g,s.z,_,s.y),m&&(l(c,u,s.z,s.x,s.y-1),l(c,g,s.z,_,s.y-1))),2&e&&(l(c,y,s.z,v,s.y),m&&(l(c,u,s.z,s.x,s.y-1),l(c,y,s.z,v,s.y-1))),4&e&&(l(c,g,s.z,_,s.y),f&&(l(c,u,s.z,s.x,s.y+1),l(c,g,s.z,_,s.y+1))),8&e&&(l(c,y,s.z,v,s.y),f&&(l(c,u,s.z,s.x,s.y+1),l(c,y,s.z,v,s.y+1)))}}const c=[];for(const e of n)n.some(t=>e.isChildOf(t))||c.push(e);if(n=c.filter(e=>!t.some(t=>!!(e.overscaledZ<i&&t.isChildOf(e))||e.equals(t)||e.isChildOf(t))),a){const e=1<<i,t="globe"===this.projection.name?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),r=[e*t.x,e*t.y],o=4,a=o*o;n=n.filter(e=>{const t=e.canonical.x+.5-r[0],i=e.canonical.y+.5-r[1];return t*t+i*i<a})}return n}coveringTiles(t){let i=this.coveringZoomLevel(t);const r=i,n=this.elevation&&this.elevation.exaggeration(),o=n&&!t.isTerrainDEM,a="mercator"===this.projection.name;if(void 0!==t.minzoom&&i<t.minzoom)return[];void 0!==t.maxzoom&&i>t.maxzoom&&(i=t.maxzoom);const s=this.locationCoordinate(this.center),l=this.center.lat,c=1<<i,u=[c*s.x,c*s.y,0],h="globe"===this.projection.name,d=!h,p=e.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,i,d),f=h?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),m=c*e.c6(1,this.center.lat),g=this._camera.position[2]/e.c6(1,this.center.lat),y=[c*f.x,c*f.y,g*(d?1:m)],_=h||n,v=this.cameraToCenterDistance/t.tileSize*(t.roundZoom?1:.502),x=this.isLODDisabled(!0)?i:0;let C;if(this._elevation&&t.isTerrainDEM)C=1e4*this._elevation.exaggeration();else if(this._elevation){const e=this._elevation.getMinMaxForVisibleTiles();C=e?e.max:this._centerAltitude}else C=this._centerAltitude;const w=t.isTerrainDEM?-C:this._elevation?this._elevation.getMinElevationBelowMSL():0,b=this.projection.isReprojectedInTileSpace?e.co(this):1,S=t=>{const i=1/4e4,r=new e.ac(t.x+i,t.y,t.z),n=new e.ac(t.x,t.y+i,t.z),o=t.toLngLat(),a=r.toLngLat(),s=n.toLngLat(),l=this.locationCoordinate(o),c=this.locationCoordinate(a),u=this.locationCoordinate(s),h=Math.hypot(c.x-l.x,c.y-l.y),d=Math.hypot(u.x-l.x,u.y-l.y);return Math.sqrt(h*d)*b/i},L=t=>{const i=C,r=w;return{aabb:e.cr(this,c,0,0,0,t,r,i,this.projection),zoom:0,x:0,y:0,minZ:r,maxZ:i,wrap:t,fullyVisible:!1}},T=[];let M=[];const E=i,I=t.reparseOverscaled?r:i,A=(g-this._centerAltitude)*m,k=e=>{if(!this._elevation||!e.tileID||!a)return;const t=this._elevation.getMinMaxForTile(e.tileID),i=e.aabb;t?(i.min[2]=t.min,i.max[2]=t.max,i.center[2]=(i.min[2]+i.max[2])/2):(e.shouldSplit=O(e),e.shouldSplit||(i.min[2]=i.max[2]=i.center[2]=this._centerAltitude))},P=(e,t)=>{if(.707*t<e)return 1;const i=t/e;return i/(1.4144271570014144+(Math.pow(1.1,i-1.4144271570014144+1)-1)/(1.1-1)-1)},O=t=>{if(t.zoom<x)return!0;if(t.zoom===E)return!1;if(null!=t.shouldSplit)return t.shouldSplit;const i=t.aabb.distanceX(y),n=t.aabb.distanceY(y);let s=A,c=1;if(h){s=t.aabb.distanceZ(y);const i=Math.pow(2,t.zoom),r=e.aY((t.y+1)/i),n=e.aY(t.y/i),o=Math.min(Math.max(l,r),n),a=e.cO(o)/e.cO(l);if(c=o===l?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,a/this._mercatorScaleRatio),this.zoom<=e.cL&&t.zoom===E-1&&a>=.9)return!0}else if(o&&(s=t.aabb.distanceZ(y)*m),this.projection.isReprojectedInTileSpace&&r<=5){const i=Math.pow(2,t.zoom),r=S(new e.ac((t.x+.5)/i,(t.y+.5)/i));c=r>.85?1:r}if(!a){const e=Math.sqrt(i*i+n*n+s*s);let r=(1<<E-t.zoom)*v*c;return r*=P(Math.max(s,A),e),e<r}let d=Number.MAX_VALUE,p=0;const f=t.aabb.getCorners(),g=[];for(const r of f){e.at(g,r,y),h||(o?g[2]*=m:g[2]=A);const t=e.bG(g,this._camera.forward());t<d&&(d=t,p=Math.abs(g[2]))}let _=(1<<E-t.zoom)*v*c;if(_*=P(Math.max(p,A),d),d<_)return!0;const C=t.aabb.closestPoint(u);return C[0]===u[0]&&C[1]===u[1]};if(this.renderWorldCopies)for(let e=1;e<=3;e++)T.push(L(-e)),T.push(L(e));for(T.push(L(0));T.length>0;){const r=T.pop(),n=r.x,s=r.y;let l=r.fullyVisible;const d=()=>"globe"===this.projection.name&&(0===r.y||r.y===(1<<r.zoom)-1);if(!l){let t=_?r.aabb.intersects(p):r.aabb.intersectsFlat(p);if(0===t&&d()){const i=new e.cp(r.zoom,n,s);t=e.cq(this,c,i,!0).intersects(p)}if(0===t)continue;l=2===t}if(r.zoom!==E&&O(r))for(let t=0;t<4;t++){const i=(n<<1)+t%2,u=(s<<1)+(t>>1),d={aabb:a?r.aabb.quadrant(t):e.cr(this,c,r.zoom+1,i,u,r.wrap,r.minZ,r.maxZ,this.projection),zoom:r.zoom+1,x:i,y:u,wrap:r.wrap,fullyVisible:l,tileID:void 0,shouldSplit:void 0,minZ:r.minZ,maxZ:r.maxZ};o&&!h&&(d.tileID=new e.aM(r.zoom+1===E?I:r.zoom+1,r.wrap,r.zoom+1,i,u),k(d)),T.push(d)}else{const o=r.zoom===E?I:r.zoom;if(t.minzoom&&t.minzoom>o)continue;let a=0;if(!l){let i=_?r.aabb.intersectsPrecise(p):r.aabb.intersectsPreciseFlat(p);if(0===i&&d()){const t=new e.cp(r.zoom,n,s);i=e.cq(this,c,t,!0).intersectsPrecise(p)}if(0===i)continue;if(t.calculateQuadrantVisibility)if(p.containsPoint(r.aabb.center))a=15;else for(let e=0;e<4;e++)0!==r.aabb.quadrant(e).intersects(p)&&(a|=1<<e)}const h=u[0]-(.5+n+(r.wrap<<r.zoom))*(1<<i-r.zoom),f=u[1]-.5-s,m=r.tileID?r.tileID:new e.aM(o,r.wrap,r.zoom,n,s);t.calculateQuadrantVisibility&&(m.visibleQuadrants=a),M.push({tileID:m,distanceSq:h*h+f*f})}}if(this.fogCullDistSq){const i=this.fogCullDistSq,r=this.horizonLineFromTop();M=M.filter(n=>{const o=[0,0,0,1],a=[e.aj,e.aj,0,1],s=this.calculateFogTileMatrix(n.tileID.toUnwrapped());e.aA(o,o,s),e.aA(a,a,s);const l=e.cs([],o,a),c=e.ct([],o,a),u=e.cM(l,c);if(0===u)return!0;let h=!1;const d=this._elevation;if(d&&u>i&&0!==r){const i=this.calculateProjMatrix(n.tileID.toUnwrapped());let o;t.isTerrainDEM||(o=d.getMinMaxForTile(n.tileID)),o||(o={min:w,max:C});const a=e.cu(this.rotation),s=[a[0]*e.aj,a[1]*e.aj,o.max];e.ad(s,s,i),h=(1-s[1])*this.height*.5<r}return u<i||h})}return M.sort((e,t)=>e.distanceSq-t.distanceSq).map(e=>e.tileID)}resize(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(t){const i=e.ay(t.lat,-85.051129,e.cv),r=this.projection.project(t.lng,i);return new e.P(r.x*this.worldSize,r.y*this.worldSize)}unproject(e){return this.projection.unproject(e.x/this.worldSize,e.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/e.c6(1,this.center.lat)/this.worldSize}setLocationAtPoint(t,i){let r,n;const o=this.centerPoint;if("globe"===this.projection.name){const e=this.worldSize;r=(i.x-o.x)/e,n=(i.y-o.y)/e}else{const e=this.pointCoordinate(i),t=this.pointCoordinate(o);r=e.x-t.x,n=e.y-t.y}const a=this.locationCoordinate(t);this.setLocation(new e.ac(a.x-r,a.y-n))}setLocation(e){this.center=this.coordinateLocation(e),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(e,t){return this.projection.locationPoint(this,e,t)}locationPoint3D(e,t){return this.projection.locationPoint(this,e,t,!0)}pointLocation(e){return this.coordinateLocation(this.pointCoordinate(e))}pointLocation3D(e,t){return this.coordinateLocation(this.pointCoordinate3D(e,t))}locationCoordinate(t,i){const r=i?e.c6(i,t.lat):void 0,n=this.projection.project(t.lng,t.lat);return new e.ac(n.x,n.y,r)}coordinateLocation(e){return this.projection.unproject(e.x,e.y)}pointRayIntersection(t,i){const r=null!=i?i:this._centerAltitude,n=[t.x,t.y,0,1],o=[t.x,t.y,1,1];e.aA(n,n,this.pixelMatrixInverse),e.aA(o,o,this.pixelMatrixInverse);const a=o[3];e.cw(n,n,1/n[3]),e.cw(o,o,1/a);const s=n[2],l=o[2];return{p0:n,p1:o,t:s===l?0:(r-s)/(l-s)}}screenPointToMercatorRay(t){const i=[t.x,t.y,0,1],r=[t.x,t.y,1,1];return e.aA(i,i,this.pixelMatrixInverse),e.aA(r,r,this.pixelMatrixInverse),e.cw(i,i,1/i[3]),e.cw(r,r,1/r[3]),i[2]=e.c6(i[2],this._center.lat)*this.worldSize,r[2]=e.c6(r[2],this._center.lat)*this.worldSize,e.cw(i,i,1/this.worldSize),e.cw(r,r,1/this.worldSize),new e.av([i[0],i[1],i[2]],e.au([],e.at([],r,i)))}rayIntersectionCoordinate(t){const{p0:i,p1:r,t:n}=t,o=e.c6(i[2],this._center.lat),a=e.c6(r[2],this._center.lat);return new e.ac(e.ai(i[0],r[0],n)/this.worldSize,e.ai(i[1],r[1],n)/this.worldSize,e.ai(o,a,n))}pointCoordinate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._centerAltitude;return this.projection.pointCoordinate(this,e.x,e.y,t)}pointCoordinate3D(t,i){if(!this.elevation)return this.pointCoordinate(t,i);let r=this.projection.pointCoordinate3D(this,t.x,t.y);if(r)return new e.ac(r[0],r[1],r[2]);let n=0,o=this.horizonLineFromTop();if(t.y>o)return this.pointCoordinate(t,i);const a=.02*o,s=t.clone();for(let l=0;l<10&&o-n>a;l++){s.y=e.ai(n,o,.66);const t=this.projection.pointCoordinate3D(this,s.x,s.y);t?(o=s.y,r=t):n=s.y}return r?new e.ac(r[0],r[1],r[2]):this.pointCoordinate(t)}isPointAboveHorizon(e){return this.projection.isPointAboveHorizon(this,e)}isPointOnSurface(t){if(t.y<0||t.y>this.height||t.x<0||t.x>this.width)return!1;if(this.elevation||this.zoom>=e.cx)return!this.isPointAboveHorizon(t);const i=this.pointCoordinate(t);return i.y>=0&&i.y<=1}_coordinatePoint(t,i){const r=i&&this.elevation?this.elevation.getAtPointOrZero(t,this._centerAltitude):this._centerAltitude,n=[t.x*this.worldSize,t.y*this.worldSize,r+t.toAltitude(),1];return e.aA(n,n,this.pixelMatrix),n[3]>0?new e.P(n[0]/n[3],n[1]/n[3]):new e.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:t,left:i}=this._edgeInsets,r=this.height-this._edgeInsets.bottom,n=this.width-this._edgeInsets.right,o=this.pointLocation3D(new e.P(i,t)),a=this.pointLocation3D(new e.P(n,t)),s=this.pointLocation3D(new e.P(n,r)),l=this.pointLocation3D(new e.P(i,r));let c=Math.min(o.lng,a.lng,s.lng,l.lng),u=Math.max(o.lng,a.lng,s.lng,l.lng),h=Math.min(o.lat,a.lat,s.lat,l.lat),d=Math.max(o.lat,a.lat,s.lat,l.lat);const p=Math.pow(2,-this.zoom)/16*270,f="globe"===this.projection.name?1:4,m=(t,i,r,n,o)=>{const a=(t+r)/2,s=(i+n)/2,l=new e.P(a,s),{lng:g,lat:y}=this.pointLocation3D(l),_=Math.max(0,c-g,h-y,g-u,y-d);c=Math.min(c,g),u=Math.max(u,g),h=Math.min(h,y),d=Math.max(d,y),(o<f||_>p)&&(m(t,i,a,s,o+1),m(a,s,r,n,o+1))};if(m(i,t,n,t,1),m(n,t,n,r,1),m(n,r,i,r,1),m(i,r,i,t,1),"globe"===this.projection.name){const[t,i]=e.cy(this);t?(d=90,u=180,c=-180):i&&(h=-90,u=180,c=-180)}return new e.aG(new e.cd(c,h),new e.cd(u,d))}_getBoundsRectangular(t,i){const{top:r,left:n}=this._edgeInsets,o=this.height-this._edgeInsets.bottom,a=this.width-this._edgeInsets.right,s=new e.P(n,r),l=new e.P(a,r),c=new e.P(a,o),u=new e.P(n,o);let h=this.pointCoordinate(s,t),d=this.pointCoordinate(l,t);const p=this.pointCoordinate(c,i),f=this.pointCoordinate(u,i),m=(e,t)=>(t.y-e.y)/(t.x-e.x);return h.y>1&&d.y>=0?h=new e.ac((1-f.y)/m(f,h)+f.x,1):h.y<0&&d.y<=1&&(h=new e.ac(-f.y/m(f,h)+f.x,0)),d.y>1&&h.y>=0?d=new e.ac((1-p.y)/m(p,d)+p.x,1):d.y<0&&h.y<=1&&(d=new e.ac(-p.y/m(p,d)+p.x,0)),(new e.aG).extend(this.coordinateLocation(h)).extend(this.coordinateLocation(d)).extend(this.coordinateLocation(f)).extend(this.coordinateLocation(p))}_getBoundsRectangularTerrain(){const e=this.elevation;if(!e.visibleDemTiles.length||e.isUsingMockSource())return this._getBoundsRectangular(0,0);const t=e.visibleDemTiles.reduce((e,t)=>{if(t.dem){const i=t.dem.tree;e.min=Math.min(e.min,i.minimums[0]),e.max=Math.max(e.max,i.maximums[0])}return e},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(t.min*e.exaggeration(),t.max*e.exaggeration())}getBounds(){return"mercator"===this.projection.name||"equirectangular"===this.projection.name?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,i=this.height/2-t*(1-this._horizonShift);return e?Math.max(0,i):i}getMaxBounds(){return this.maxBounds}setMaxBounds(t){this.maxBounds=t,this.minLat=-85.051129,this.maxLat=e.cv,this.minLng=-180,this.maxLng=180,t&&(this.minLat=t.getSouth(),this.maxLat=t.getNorth(),this.minLng=t.getWest(),this.maxLng=t.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=e.aD(this.minLng)*this.tileSize,this.worldMaxX=e.aD(this.maxLng)*this.tileSize,this.worldMinY=e.aH(this.maxLat)*this.tileSize,this.worldMaxY=e.aH(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(e,t){return this.projection.createTileMatrix(this,t,e)}calculateDistanceTileData(t){const i=t.key,r=this._distanceTileDataCache;if(r[i])return r[i];const n=t.canonical,o=1/this.height,a=this.cameraWorldSize,s=a/this.zoomScale(n.z),l=(n.x+Math.pow(2,n.z)*t.wrap)*s,c=n.y*s,u=this.point;u.x*=a/this.worldSize,u.y*=a/this.worldSize;const h=this.angle,d=Math.sin(-h),p=-Math.cos(-h);return r[i]={bearing:[d,p],center:[(u.x-l)*o,(u.y-c)*o],scale:s/e.aj*o},r[i]}calculateFogTileMatrix(t){const i=t.key,r=this._fogTileMatrixCache;if(r[i])return r[i];const n=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,t);return e.az(n,this.worldToFogMatrix,n),r[i]=new Float32Array(n),r[i]}calculateProjMatrix(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=t.key;let o;if(o=r?this._expandedProjMatrixCache:i?this._alignedProjMatrixCache:this._projMatrixCache,o[n])return o[n];const a=this.calculatePosMatrix(t,this.worldSize);let s;return s=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:r?this.expandedFarZProjMatrix:i?this.alignedProjMatrix:this.projMatrix,e.az(a,s,a),o[n]=new Float32Array(a),o[n]}calculatePixelsToTileUnitsMatrix(t){const i=t.tileID.key,r=this._pixelsToTileUnitsCache;if(r[i])return r[i];const n=e.cz(t,this);return r[i]=n,r[i]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if("globe"===this.projection.name){const t=1/this.worldSize,i=e.bn([],[t,t,t]);return e.az(i,i,this.globeMatrix),i}}recenterOnTerrain(){if(!this._elevation||"globe"===this.projection.name)return;const t=this._elevation;this._updateCameraState();const i=e.c6(1,this._center.lat)*this.worldSize,r=this._computeCameraPosition(i),n=this._camera.forward(),o=e.c6(1,this._center.lat);r[2]/=o,n[2]/=o,e.au(n,n);const a=t.raycast(r,n,t.exaggeration());if(a){const t=e.bE([],r,n,a),i=new e.ac(t[0],t[1],e.c6(t[2],e.aY(t[1]))),s=(i.z+e.ae([i.x-r[0],i.y-r[1],i.z-r[2]*o]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(s),this._centerAltitude=i.toAltitude(),this._center=this.coordinateLocation(i),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._elevation)return;const i=this._elevation,r=e.c6(1,this._center.lat)*this.worldSize,n=this._computeCameraPosition(r),o=i.getAtPointOrZero(new e.ac(...n)),a=this.pixelsPerMeter/this.worldSize*o,s=this._minimumHeightOverTerrain(),l=n[2]-a;if(l<=s)if(l<0||t){const t=this.locationCoordinate(this._center,this._centerAltitude),i=[n[0],n[1],t.z-n[2]],r=e.ae(i);i[2]-=(s-l)/this._pixelsPerMercatorPixel;const o=e.ae(i);if(0===o)return;e.bY(i,i,r/o*this._pixelsPerMercatorPixel),this._camera.position=[n[0],n[1],t.z*this._pixelsPerMercatorPixel-i[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const t="globe"===this.projection.name||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||t){const i=this.center;return i.lat=e.ay(i.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!t)&&(i.lng=e.ay(i.lng,this.minLng,this.maxLng)),this.center=i,void(this._constraining=!1)}const i=this._unmodified,{x:r,y:n}=this.point;let o=0,a=r,s=n;const l=this.width/2,c=this.height/2,u=this.worldMinY*this.scale,h=this.worldMaxY*this.scale;if(n-c<u&&(s=u+c),n+c>h&&(s=h-c),h-u<this.height&&(o=Math.max(o,this.height/(h-u)),s=(h+u)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const e=this.worldMinX*this.scale,t=this.worldMaxX*this.scale,i=this.worldSize/2-(e+t)/2;a=(r+i+this.worldSize)%this.worldSize-i,a-l<e&&(a=e+l),a+l>t&&(a=t-l),t-e<this.width&&(o=Math.max(o,this.width/(t-e)),a=(t+e)/2)}a===r&&s===n||this._allowWorldUnderZoom||(this.center=this.unproject(new e.P(a,s))),o&&!this._allowWorldUnderZoom&&(this.zoom+=this.scaleZoom(o)),this._constrainCamera(),this._unmodified=i,this._constraining=!1}_minZoomForBounds(){let e=Math.max(0,this.scaleZoom(Math.max(0,this.height)/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(e=Math.max(e,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),e}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const t=this.centerOffset,i="globe"===this.projection.name,r=this.pixelsPerMeter;"globe"===this.projection.name&&(this._mercatorScaleRatio=e.c6(1,this.center.lat)/e.c6(1,e.cP));const n=e.cA(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,n),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const o="meters"===this.projection.zAxisUnit?r:1,a=this._camera.getWorldToCamera(this.worldSize,o);let s;const l=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(l[8]=2*-t.x/this.width,l[9]=2*t.y/this.height,this.isOrthographic){let i=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),r=i*this.aspect,n=-r,o=-i;r-=t.x,n-=t.x,i+=t.y,o+=t.y,s=this._camera.getCameraToClipOrthographic(n,r,o,i,this._nearZ,this._farZ),((t,i,r,n)=>{for(let o=0;o<16;o++)t[o]=e.ai(i[o],r[o],n)})(s,s,l,e.cN(this.pitch>=tr?1:this.pitch/tr))}else s=l;const c=e.cB([],l,a);let u=e.cB([],s,a);if(this.projection.isReprojectedInTileSpace){const t=this.locationCoordinate(this.center),i=e.bx([]);e.bo(i,i,[t.x*this.worldSize,t.y*this.worldSize,0]),e.az(i,i,e.cC(this)),e.bo(i,i,[-t.x*this.worldSize,-t.y*this.worldSize,0]),e.az(u,u,i),e.az(c,c,i),this.inverseAdjustmentMatrix=e.cD(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=e.cE([],u,[this.worldSize,this.worldSize,this.worldSize/o,1]),this.projMatrix=u,this.invProjMatrix=e.bi(new Float64Array(16),this.projMatrix),i){const i=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);i[8]=2*-t.x/this.width,i[9]=2*t.y/this.height,this.expandedFarZProjMatrix=e.cB([],i,a)}else this.expandedFarZProjMatrix=this.projMatrix;const h=e.bi([],s);this.frustumCorners=e.cF.fromInvProjectionMatrix(h,this.horizonLineFromTop(),this.height),this.cameraFrustum=e.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!i);const d=new Float32Array(16);e.bx(d),e.cE(d,d,[1,-1,1]),e.cG(d,d,this._pitch),e.by(d,d,this.angle);const p=e.c4(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=e.bw(p);const f=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;p[8]=2*-t.x/this.width,p[9]=2*(t.y+f)/this.height,this.skyboxMatrix=e.az(d,p,d);const m=this.point,g=m.x,y=m.y,_=this.width%2/2,v=this.height%2/2,x=Math.cos(this.angle),C=Math.sin(this.angle),w=g-Math.round(g)+x*_+C*v,b=y-Math.round(y)+x*v+C*_,S=new Float64Array(u);if(e.bo(S,S,[w>.5?w-1:w,b>.5?b-1:b,0]),this.alignedProjMatrix=S,u=e.bz(),e.cE(u,u,[this.width/2,-this.height/2,1]),e.bo(u,u,[1,-1,0]),this.labelPlaneMatrix=u,u=e.bz(),e.cE(u,u,[1,-1,1]),e.bo(u,u,[-1,-1,0]),e.cE(u,u,[2/this.width,2/this.height,1]),this.glCoordMatrix=u,this.pixelMatrix=e.az(new Float64Array(16),this.labelPlaneMatrix,c),this._calcFogMatrices(),this._distanceTileDataCache={},u=e.bi(new Float64Array(16),this.pixelMatrix),!u)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=u,"globe"===this.projection.name||this.mercatorFromTransition){this.globeMatrix=e.cH(this);const t=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=e.ad(t,t,a),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=u;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const t=this.cameraWorldSizeForFog,i=this.cameraPixelsPerMeter,r=this._camera.position,n=1/this.height/this._pixelsPerMercatorPixel,o=[t,t,i];e.bY(o,o,n),e.bY(r,r,-1),e.cI(r,r,o);const a=e.bz();e.bo(a,a,r),e.cE(a,a,o),this.mercatorFogMatrix=a,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(t,i,n)}_computeCameraPosition(e){const t=(e=e||this.pixelsPerMeter)/this.pixelsPerMeter,i=this._camera.forward(),r=this.point,n=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*t-e/this.worldSize*this._centerAltitude;return[r.x/this.worldSize-i[0]*n,r.y/this.worldSize-i[1]*n,e/this.worldSize*this._centerAltitude-i[2]*n]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(t){const i=this._maxCameraBoundsDistance()*Math.cos(this._pitch),r=this._camera.position[2],n=t[2];let o=1;this.projection.wrap&&(this.center=this.center.wrap()),n>0&&(o=Math.min((i-r)/n,1)),this._camera.position=e.bE([],this._camera.position,t,o),this._updateStateFromCamera()}_updateStateFromCamera(){const t=this._camera.position,i=this._camera.forward(),{pitch:r,bearing:n}=this._camera.getPitchBearing(),o=e.c6(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,a=this._mercatorZfromZoom(this._maxZoom)*Math.cos(e.al(this._maxPitch)),s=Math.max((t[2]-o)/Math.cos(r),a),l=this._zoomFromMercatorZ(s);e.bE(t,t,i,s),this._pitch=e.ay(r,e.al(this.minPitch),e.al(this.maxPitch)),this.angle=e.bX(n,-Math.PI,Math.PI),this._setZoom(e.ay(l,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new e.ac(t[0],t[1],t[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(e){return Math.pow(2,e)*this.tileSize}_mercatorZfromZoom(e){return this.cameraToCenterDistance/this._worldSizeFromZoom(e)}_minimumHeightOverTerrain(){const e=Math.min(null!=this._seaLevelZoom?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(e)}_zoomFromMercatorZ(e){return this.scaleZoom(this.cameraToCenterDistance/(Math.max(0,e)*this.tileSize))}zoomFromMercatorZAdjusted(t){let i=0,r=e.cx,n=0,o=1/0;for(;r-i>1e-6&&r>i;){const e=i+.5*(r-i),a=this.tileSize*Math.pow(2,e),s=this.getCameraToCenterDistance(this.projection,e,a),l=this.scaleZoom(s/(Math.max(0,t)*this.tileSize)),c=Math.abs(e-l);c<o&&(o=c,n=e),e<l?i=e:r=e}return n}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(e.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(t,i){const r=Math.min(t.x,i.x),n=Math.max(t.x,i.x),o=Math.min(t.y,i.y),a=Math.max(t.y,i.y);if(o<this.horizonLineFromTop(!1))return!0;if("mercator"!==this.projection.name)return!1;const s=[new e.P(r,o),new e.P(n,a),new e.P(r,a),new e.P(n,o)],l=this.renderWorldCopies?-3:0,c=this.renderWorldCopies?4:1;for(const e of s){const t=this.pointRayIntersection(e);if(t.t<0)return!0;const i=this.rayIntersectionCoordinate(t);if(i.x<l||i.y<0||i.x>c||i.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+e.cJ(this.fovAboveCenter)>88||this.anyCornerOffEdge(new e.P(0,0),new e.P(this.width,this.height))}zoomDeltaToMovement(t,i){const r=e.ae(e.at([],this._camera.position,t)),n=this._zoomFromMercatorZ(r)+i;return r-this._mercatorZfromZoom(n)}getCameraPoint(){if("globe"===this.projection.name){const t=function(t,i){let[r,n,o]=t;const a=[r,n,o,1];e.aA(a,a,i);const s=a[3]=Math.max(a[3],1e-6);return a[0]/=s,a[1]/=s,a[2]/=s,a}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new e.P(t[0],t[1])}{const t=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.P(0,t))}}getCameraToCenterDistance(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.zoom,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.worldSize;const n=e.cA(t,i,this.width,this.height,1024),o=t.pixelSpaceConversion(this.center.lat,r,n);let a=.5/Math.tan(.5*this._fov)*this.height*o;return this.isOrthographic&&(a=e.ai(1,a,e.cN(this.pitch>=tr?1:this.pitch/tr))),a}getWorldToCameraMatrix(){const t=this._camera.getWorldToCamera(this.worldSize,"meters"===this.projection.zAxisUnit?this.pixelsPerMeter:1);return"globe"===this.projection.name&&e.az(t,t,this.globeMatrix),t}getFrustum(t){return e.cn.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,t,"meters"===this.projection.zAxisUnit)}}const rr=(t,i)=>{if(i>0&&t.terrain&&e.w("Cutoff is currently disabled on terrain"),i<=0||t.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const r=t.transform,n=Math.max(Math.abs(r._zoom-(t.minCutoffZoom-1)),1),o=r.isLODDisabled(!1)?e.af(60,45,r.pitch):e.af(30,15,r.pitch),a=r._farZ-r._nearZ,s=i*r.height,l=((1-(c=o))*r.cameraToCenterDistance+c*(r._farZ+s))*n;var c;return{shouldRenderCutoff:o<1,uniformValues:{u_cutoff_params:[r._nearZ,r._farZ,(l-r._nearZ)/a,(l-s-r._nearZ)/a]}}},nr={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class or{constructor(e,t){this.aabb=e,this.lastCascade=t}}class ar{add(e,t){const i=this.receivers[e.key];void 0!==i?(i.aabb.min[0]=Math.min(i.aabb.min[0],t.min[0]),i.aabb.min[1]=Math.min(i.aabb.min[1],t.min[1]),i.aabb.min[2]=Math.min(i.aabb.min[2],t.min[2]),i.aabb.max[0]=Math.max(i.aabb.max[0],t.max[0]),i.aabb.max[1]=Math.max(i.aabb.max[1],t.max[1]),i.aabb.max[2]=Math.max(i.aabb.max[2],t.max[2])):this.receivers[e.key]=new or(t,null)}clear(){this.receivers={}}get(e){return this.receivers[e.key]}computeRequiredCascades(t,i,r){const n=e.cW.fromPoints(t.points);let o=0;for(const a in this.receivers){const t=this.receivers[a];if(!t)continue;if(!n.intersectsAabb(t.aabb))continue;t.aabb.min=n.closestPoint(t.aabb.min),t.aabb.max=n.closestPoint(t.aabb.max);const s=t.aabb.getCorners();for(let n=0;n<r.length;n++){let a=!0;for(const t of s){const o=[t[0]*i,t[1]*i,t[2]];if(e.ad(o,o,r[n].matrix),o[0]<-1||o[0]>1||o[1]<-1||o[1]>1){a=!1;break}}if(t.lastCascade=n,o=Math.max(o,n),a)break}}return o+1}}class sr{constructor(e){this.painter=e,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new ar,this._depthMode=new ji(e.context.gl.LEQUAL,ji.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,e.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),e.tp.registerParameter(nr,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),e.tp.registerParameter(nr,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),e.tp.registerParameter(nr,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),e.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const e of this._cascades)e.texture.destroy(),e.framebuffer.destroy();this._cascades=[]}updateShadowParameters(t,i){const r=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!i||!i.properties)return;const n=i.properties.get("shadow-intensity");if(!i.shadowsEnabled()||n<=0)return;if(this._shadowLayerCount=r.style.order.reduce((e,i)=>{const n=r.style._mergedLayers[i];return e+(n.hasShadowPass()&&!n.isHidden(t.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled)return;const o=r.context,a=nr.shadowMapResolution,s=nr.shadowMapResolution;if(0===this._cascades.length||nr.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let t=0;t<nr.cascadeCount;++t){const t=r._shadowMapDebug,i=o.gl,n=o.createFramebuffer(a,s,t,"texture"),l=new e.T(o,{width:a,height:s,data:null},i.DEPTH_COMPONENT16);if(n.depthAttachment.set(l.texture),t){const t=new e.T(o,{width:a,height:s,data:null},i.RGBA8);n.colorAttachment.set(t.texture)}this._cascades.push({framebuffer:n,texture:l,matrix:[],far:0,boundingSphereRadius:0,frustum:new e.cn,scale:0})}}this.shadowDirection=cr(i);let l=0;if(t.elevation){const e=t.elevation,i=[1e4,-1e4];e.visibleDemTiles.filter(e=>e.dem).forEach(e=>{const t=e.dem.tree;i[0]=Math.min(i[0],t.minimums[0]),i[1]=Math.max(i[1],t.maximums[0])}),1e4!==i[0]&&(l=(i[1]-i[0])*e.exaggeration())}const c=1.5*t.cameraToCenterDistance,u=3*c,h=new Float64Array(16);for(let f=0;f<this._cascades.length;++f){const i=this._cascades[f];let r=t.height/50,n=1;1===nr.cascadeCount?n=u:0===f?n=c:(r=c,n=u);const[o,a]=hr(t,this.shadowDirection,r,n,nr.shadowMapResolution,l);i.scale=t.scale,i.matrix=o,i.boundingSphereRadius=a,e.bi(h,i.matrix),i.frustum=e.cn.fromInvProjectionMatrix(h,1,0,!0),i.far=n}const d=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[d].far,this._cascades[d].far],this._uniformValues.u_shadow_intensity=n,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/nr.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=nr.shadowMapResolution,this._uniformValues.u_shadowmap_0=$i.ShadowMap0,this._uniformValues.u_shadowmap_1=$i.ShadowMap0+1,this._groundShadowTiles=r.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const p=r.transform.elevation;for(const e of this._groundShadowTiles){let t={min:0,max:0};if(p){const i=p.getMinMaxForTile(e);i&&(t=i)}this.addShadowReceiver(e.toUnwrapped(),t.min,t.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(e){this._enabled=e}drawShadowPass(t,i){if(!this.enabled)return;const r=this.painter,n=r.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(r.transform.getFrustum(0),r.transform.worldSize,this._cascades),n.viewport.set([0,0,nr.shadowMapResolution,nr.shadowMapResolution]);for(let o=0;o<this._numCascadesToRender;++o){r.currentShadowCascade=o,n.bindFramebuffer.set(this._cascades[o].framebuffer.framebuffer),n.clear({color:e.am.white,depth:1});for(const e of t.order){const n=t._mergedLayers[e];if(!n.hasShadowPass()||n.isHidden(r.transform.zoom))continue;const o=t.getLayerSourceCache(n),a=o?i[o.id]:void 0;("model"===n.type||a&&a.length)&&r.renderLayer(r,o,n,a)}}r.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const e=this.painter,t=e.style,i=e.context,r=i.gl,n=t.directionalLight,o=t.ambientLight;if(!n||!o)return;const a=[],s=rr(e,e.longestCutoffRange);s.shouldRenderCutoff&&a.push("RENDER_CUTOFF"),a.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&a.push("NORMAL_OFFSET");const l=ur(t,n,o),c=new ji(r.LEQUAL,ji.ReadOnly,e.depthRangeFor3D),u=new Zi({func:r.EQUAL,mask:255},0,255,r.KEEP,r.KEEP,r.KEEP);for(const h of this._groundShadowTiles){const t=h.toUnwrapped(),n=e.isTileAffectedByFog(h),o=e.getOrCreateProgram("groundShadow",{defines:a,overrideFog:n});this.setupShadows(t,o),e.uploadCommonUniforms(i,o,t,null,s);const d={u_matrix:e.transform.calculateProjMatrix(t),u_ground_shadow_factor:l};o.draw(e,r.TRIANGLES,c,u,Ui.multiply,qi.disabled,d,"ground_shadow",e.tileExtentBuffer,e.quadTriangleIndexBuffer,e.tileExtentSegments,null,e.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Ui.unblended:Ui.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(t){const i=this.painter.transform,r=i.calculatePosMatrix(t,i.worldSize);return e.az(r,this._cascades[this.painter.currentShadowCascade].matrix,r),Float32Array.from(r)}calculateShadowPassMatrixFromMatrix(t){return e.az(t,this._cascades[this.painter.currentShadowCascade].matrix,t),Float32Array.from(t)}setupShadows(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this.enabled)return;const o=this.painter.transform,a=this.painter.context,s=a.gl,l=this._uniformValues,c=new Float64Array(16),u=o.calculatePosMatrix(t,o.worldSize);for(let h=0;h<this._cascades.length;h++)e.az(c,this._cascades[h].matrix,u),l[0===h?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(c),a.activeTexture.set(s.TEXTURE0+$i.ShadowMap0+h),this._cascades[h].texture.bindExtraParam(s.LINEAR,s.LINEAR,s.CLAMP_TO_EDGE,s.CLAMP_TO_EDGE,s.GREATER);if(this.useNormalOffset=!!r,this.useNormalOffset){const i=e.cU(t.canonical),a=2/o.tileSize*e.aj/nr.shadowMapResolution,s=a*this._cascades[0].boundingSphereRadius,c=a*this._cascades[this._cascades.length-1].boundingSphereRadius,u=("vector-tile"===r?1:3)/Math.pow(2,n-t.canonical.z-(1-o.zoom+Math.floor(o.zoom)));l.u_shadow_normal_offset=[i,s*u,c*u],l.u_shadow_bias=[6e-5,.0012,.012]}else l.u_shadow_bias=[36e-5,.0012,.012];i.setShadowUniformValues(a,l)}setupShadowsFromMatrix(t,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!this.enabled)return;const n=this.painter.context,o=n.gl,a=this._uniformValues,s=new Float64Array(16);for(let l=0;l<nr.cascadeCount;l++)e.az(s,this._cascades[l].matrix,t),a[0===l?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(s),n.activeTexture.set(o.TEXTURE0+$i.ShadowMap0+l),this._cascades[l].texture.bindExtraParam(o.LINEAR,o.LINEAR,o.CLAMP_TO_EDGE,o.CLAMP_TO_EDGE,o.GREATER);if(this.useNormalOffset=r,r){const e=nr.normalOffset;a.u_shadow_normal_offset=[1,e,e],a.u_shadow_bias=[6e-5,.0012,.012]}else a.u_shadow_bias=[36e-5,.0012,.012];i.setShadowUniformValues(n,a)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(t,i,r,n){if(n[2]>=0)return{};const o=function(t,i,r){const n=r/(1<<t.canonical.z);return new e.cW([t.canonical.x*n+t.wrap*r,t.canonical.y*n+t.wrap*r,0],[(t.canonical.x+1)*n+t.wrap*r,(t.canonical.y+1)*n+t.wrap*r,i])}(t,i,r).getCorners(),a=i/-n[2];n[0]<0?(e.cV(o[0],o[0],[n[0]*a,0,0]),e.cV(o[3],o[3],[n[0]*a,0,0])):n[0]>0&&(e.cV(o[1],o[1],[n[0]*a,0,0]),e.cV(o[2],o[2],[n[0]*a,0,0])),n[1]<0?(e.cV(o[0],o[0],[0,n[1]*a,0]),e.cV(o[1],o[1],[0,n[1]*a,0])):n[1]>0&&(e.cV(o[2],o[2],[0,n[1]*a,0]),e.cV(o[3],o[3],[0,n[1]*a,0]));const s={};return s.vertices=o,s.planes=[lr(o[1],o[0],o[4]),lr(o[2],o[1],o[5]),lr(o[3],o[2],o[6]),lr(o[0],o[3],o[7])],s}addShadowReceiver(t,i,r){this._receivers.add(t,e.cW.fromTileIdAndHeight(t,i,r))}getMaxCascadeForTile(e){const t=this._receivers.get(e);return t&&t.lastCascade?t.lastCascade:0}}function lr(t,i,r){const n=e.at([],r,i),o=e.at([],t,i),a=e.bF([],n,o),s=e.ae(a);return 0===s?[0,0,1,0]:(e.bY(a,a,1/s),[a[0],a[1],a[2],-e.bG(a,i)])}function cr(t){const i=t.properties.get("direction"),r=e.cR(i.x,i.y,i.z);r[2]=e.ay(r[2],0,75);const n=e.cT([r[0],r[1],r[2]]);return e.cS(n.x,n.y,n.z)}function ur(t,i,r){const n="none"===i.properties.get("color-use-theme"),o=i.properties.get("color"),a=i.properties.get("intensity"),s=i.properties.get("direction"),l=[s.x,s.y,s.z],c="none"===r.properties.get("color-use-theme"),u=r.properties.get("color"),h=r.properties.get("intensity"),d=Math.max(e.bG([0,0,1],l),0),p=[0,0,0];e.bY(p,u.toPremultipliedRenderColor(c?null:t.getLut(i.scope)).toArray01Linear().slice(0,3),h);const f=[0,0,0];return e.bY(f,o.toPremultipliedRenderColor(n?null:t.getLut(r.scope)).toArray01Linear().slice(0,3),d*a),e.cY([p[0]>0?p[0]/(p[0]+f[0]):0,p[1]>0?p[1]/(p[1]+f[1]):0,p[2]>0?p[2]/(p[2]+f[2]):0])}function hr(t,i,r,n,o,a){const s=t.zoom,l=t.scale,c=t.worldSize,u=1/c,h=t.aspect,d=Math.sqrt(1+h*h)*Math.tan(.5*t.fovX),p=d*d,f=n-r,m=n+r;let g,y;p>f/m?(g=n,y=n*d):(g=.5*m*(1+p),y=.5*Math.sqrt(f*f+2*(n*n+r*r)*p+m*m*p*p));const _=t.projection.pixelsPerMeter(t.center.lat,c),v=t._camera.getCameraToWorldMercator(),x=[0,0,-g*u];e.ad(x,x,v);let C=y*u;const w=t._edgeInsets;if(!(0===w.left&&0===w.top&&0===w.right&&0===w.bottom||w.left===w.right&&w.top===w.bottom)){const i=t._camera.getWorldToCamera(t.worldSize,"meters"===t.projection.zAxisUnit?_:1),o=t._camera.getCameraToClipPerspective(t._fov,t.width/t.height,r,n);o[8]=2*-t.centerOffset.x/t.width,o[9]=2*t.centerOffset.y/t.height;const a=new Float64Array(16);e.cB(a,o,i);const u=new Float64Array(16);e.bi(u,a);const h=e.cn.fromInvProjectionMatrix(u,c,s,!0);for(const r of h.points){const i=((b=r)[0]/=l,b[1]/=l,b[2]=e.c6(b[2],t._center.lat),b);C=Math.max(C,e.bZ(e.cX([],x,i)))}}var b;C*=o/(o-1);const S=Math.acos(i[2]),L=Math.atan2(-i[0],-i[1]),T=new Qi;T.position=x,T.setPitchBearing(S,L);const M=T.getWorldToCamera(c,_),E=C*c,I=Math.min(t._mercatorZfromZoom(17)*c*-2,-2*E),A=T.getCameraToClipOrthographic(-E,E,-E,E,I,(E+a*_)/i[2]),k=new Float64Array(16);e.az(k,A,M);const P=e.cS(Math.floor(1e6*x[0])/1e6*c,Math.floor(1e6*x[1])/1e6*c,0),O=.5*o,R=[0,0,0];e.ad(R,P,k),e.bY(R,R,O);const z=[Math.floor(R[0]),Math.floor(R[1]),Math.floor(R[2])],D=[0,0,0];e.at(D,R,z),e.bY(D,D,-1/O);const F=new Float64Array(16);return e.bx(F),e.bo(F,F,D),e.az(k,F,k),[k,E]}class dr extends e.E{constructor(e){super(),this.requestManager=e,this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}loadModel(t,i){return e.aS(this.requestManager.transformRequest(i,e.R.Model).url).then(i=>{if(!i)return;const r=e.aT(i),n=new e.aU(t,void 0,void 0,r);return n.computeBoundsAndApplyParent(),n}).catch(r=>{if(r&&404===r.status)return null;this.fire(new e.z(new Error("Could not load model ".concat(t," from ").concat(i,": ").concat(r.message))))})}load(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{forceReload:!1};this.models[i]||(this.models[i]={});const n=Object.keys(t),o=[],a=[];for(const e of n){const n=t[e];this.hasURLBeenRequested(n)&&!r.forceReload||(this.modelByURL[n]={modelId:e,scope:i},o.push(this.loadModel(e,n)),a.push(e)),this.models[i][e]||(this.models[i][e]={model:null,numReferences:1})}this.numModelsLoading[i]=(this.numModelsLoading[i]||0)+a.length,Promise.allSettled(o).then(t=>{for(let e=0;e<t.length;e++){const{status:r}=t[e];if("rejected"===r)continue;const{value:n}=t[e];this.models[i][a[e]]||(this.models[i][a[e]]={model:null,numReferences:1}),this.models[i][a[e]].model=n}this.numModelsLoading[i]-=a.length,this.fire(new e.A("data",{dataType:"style"}))}).catch(t=>{this.fire(new e.z(new Error("Could not load models: ".concat(t.message))))})}isLoaded(){for(const e in this.numModelsLoading)if(this.numModelsLoading[e]>0)return!1;return!0}hasModel(e,t){return!!((arguments.length>2&&void 0!==arguments[2]?arguments[2]:{exactIdMatch:!1}).exactIdMatch?this.getModel(e,t):this.getModelByURL(this.modelUris[t][e]))}getModel(e,t){return this.models[t]||(this.models[t]={}),this.models[t][e]?this.models[t][e].model:void 0}getModelByURL(e){if(!e)return null;const t=this.modelByURL[e];return t?this.models[t.scope][t.modelId].model:null}hasModelBeenAdded(e,t){return this.models[t]&&void 0!==this.models[t][e]}getModelURIs(e){return this.modelUris[e]||{}}addModel(e,t,i){this.models[i]||(this.models[i]={}),this.modelUris[i]||(this.modelUris[i]={});const r=this.requestManager.normalizeModelURL(t);if((this.hasModel(e,i,{exactIdMatch:!0})||this.hasModelBeenAdded(e,i))&&this.modelUris[i][e]===r)this.models[i][e].numReferences++;else if(this.hasURLBeenRequested(r)){const{scope:e,modelId:t}=this.modelByURL[r];this.models[e][t].numReferences++}else this.modelUris[i][e]=r,this.load({[e]:this.modelUris[i][e]},i)}addModelURLs(e,t){this.models[t]||(this.models[t]={}),this.modelUris[t]||(this.modelUris[t]={});const i=this.modelUris[t];for(const r in e)i[r]=this.requestManager.normalizeModelURL(e[r])}reloadModels(e){this.load(this.modelUris[e],e,{forceReload:!0})}addModelsFromBucket(t,i){this.models[i]||(this.models[i]={}),this.modelUris[i]||(this.modelUris[i]={});const r={};for(const n of t)this.hasModel(n,i,{exactIdMatch:!0})||this.hasURLBeenRequested(n)?this.models[i][n].numReferences++:this.modelUris[i][n]&&!this.hasURLBeenRequested(n)?r[n]=this.modelUris[i][n]:!this.hasURLBeenRequested(n)&&e.cZ(n,!1)&&(this.modelUris[i][n]=this.requestManager.normalizeModelURL(n),r[n]=this.modelUris[i][n]);this.load(r,i)}hasURLBeenRequested(e){return void 0!==this.modelByURL[e]}removeModel(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.models[t]&&this.models[t][e]&&(this.models[t][e].numReferences--,0===this.models[t][e].numReferences)){const r=this.modelUris[t][e];i||delete this.modelUris[t][e],delete this.modelByURL[r];const n=this.models[t][e].model;if(!n)return;delete this.models[t][e],n.destroy()}}destroy(){for(const e of Object.keys(this.models))for(const t of Object.keys(this.models[e])){const i=this.models[e][t].model;delete this.models[e][t],i&&i.destroy()}this.models={"":{}},this.modelUris={"":{}},this.modelByURL={},this.numModelsLoading={}}listModels(e){return this.models[e]||(this.models[e]={}),Object.keys(this.models[e])}upload(e,t){this.models[t]||(this.models[t]={});for(const i in this.models[t])this.models[t][i].model&&this.models[t][i].model.upload(e.context)}}const pr=new e.a7({data:new e.a8(e.a5.colorTheme.data)}),fr={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function mr(e){return e=e||{},Object.assign(e,fr)}class gr extends e.E{constructor(t){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._floorplanStates={},e.aV(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=t,this._checkFloorplanVisible(),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(t=>{t.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new e.z(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=t.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=t.stylesheet.indoor.buildingFeaturesetId,this._scope=t.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:e=>(e.feature&&e.feature.properties.floorplan&&this.selectFloorplan(e.feature.properties.floorplan),!0)}),this._checkFloorplanVisible()}_onMove(){this._checkFloorplanVisible()}_checkFloorplanVisible(){if(!this._queryFeatureSetId)return;if(!this._map.isStyleLoaded())return;const t=()=>{this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new e.A("floorplangone"))};if(this._map.transform.zoom<13)return void t();const i={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},r=this._map.transform.width,n=this._map.transform.height,o=r*(2/3),a=n*(2/3),s=.5*(r-o),l=.5*(n-a),c=[new e.P(s,l),new e.P(s+o,l+a)],u=this._map.queryRenderedFeatures(c,i);u.length>0?this._selectedFloorplan&&u[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=u[0],this._floorplanSelected()):t()}_floorplanSelected(){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._floorplanStates[this._indoorData.id]=this._floorplanStates[this._indoorData.id]||{},this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[this._indoorData.id]]);const t=this._floorplanStates[this._indoorData.id].selectedBuilding,i=t?this._indoorData.buildings.find(e=>e.id===t):this._indoorData.buildings.length>0?this._indoorData.buildings[0]:null,r=this._floorplanStates[this._indoorData.id].selectedLevel,n=this._indoorData.levels.find(e=>e.id===r),o=this._indoorData.levels.find(e=>!(!i||!i.levels)&&0===Number(e.levelOrder)&&i.levels.includes(e.id)),a=n?n.id:o?o.id:void 0;this.fire(new e.A("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:a})),i&&this._buildingSelected(i,!1),a&&this._levelSelected(a)}_buildingSelected(t,i){if(!t||!t.id)return void console.warn("IndoorManager: Building or building id is undefined");i&&t.extent&&this._map.fitBounds(t.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=t?t.id:void 0;const r=this._indoorData.levels.filter(e=>t.levels.includes(e.id));this.fire(new e.A("buildingselected",{buildingId:t.id,levels:r}))}_levelSelected(t){const i=this._indoorData.levels.find(e=>e.id===t);i?(this._updateLevels(i,!0),this.fire(new e.A("levelselected",{levelId:i.id}))):console.warn("IndoorManager: Level with ID ".concat(t," not found in the current floorplan."))}_updateLevels(e,t){if(!e||!e.id)throw new Error("IndoorManager: Selected level or level ID is undefined");function i(e){const t=e.indexOf("/floor/");if(-1===t)return e;const i=t+7,r=e.indexOf("/",i);return-1===r?e.slice(i):e.slice(i,r)}this._floorplanStates[this._indoorData.id].selectedLevel=e.id;const r=[],n={},o={},a={},s={};for(const l of this._indoorData.levels){if(r.push(l.id),n[l.id]=l.levelOrder>=0?3*Math.abs(l.levelOrder+1):3*Math.abs(l.levelOrder),o[l.id]=l.levelOrder>=0?3*l.levelOrder:0,this.mergeFloors){const t=i(e.id),r=i(l.id);a[l.id]=r===t?"true":"false"}else a[l.id]=l.id===e.id?"true":"false";s[l.id]=l.levelOrder<e.levelOrder?"true":"false"}this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",r]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",n]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",o]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",a]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",s]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",e.levelOrder<0)}selectFloorplan(t){const i={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},r=[new e.P(0,0),new e.P(this._map.transform.width,this._map.transform.height)],n=this._map.queryRenderedFeatures(r,i);if(n.length>0)for(const e of n)if(JSON.parse(e.properties["indoor-data"]).id===t){this._selectedFloorplan=e,this._floorplanSelected();break}}selectBuilding(e){const t=this._indoorData.buildings.find(t=>t.id===e);this._buildingSelected(t,!0)}selectLevel(e){this._levelSelected(e)}}function yr(t){if(!t.metadata||!t.metadata.content_area)return;const i=e.q.devicePixelRatio,{left:r,top:n,width:o,height:a}=t.metadata.content_area,s=r*i,l=n*i;return[s,l,s+o*i,l+a*i]}function _r(t){if(t)return t.map(t=>{let[i,r]=t;return[i*e.q.devicePixelRatio,r*e.q.devicePixelRatio]})}class vr{constructor(e,t,i){this.id=e,this.scope=t,this.sourceCache=i,this.pendingRequests=new Set,this.missingRequests=new Set}addPendingRequest(e){this.missingRequests.has(e.name)||this.pendingRequests.has(e.name)||this.pendingRequests.add(e.name)}hasPendingRequests(){return this.pendingRequests.size>0}resolvePendingRequests(){const t=new Map;if(!this.sourceCache.loaded())return t;const i=this.sourceCache.getVisibleCoordinates();if(0===i.length)return t;const r=this.sourceCache.getSource();if(!(r instanceof st))return t;const n=i.map(e=>this.sourceCache.getTile(e)),o=r.getImages(n,Array.from(this.pendingRequests));for(const[a,s]of o)t.set(e.I.from({name:a,iconsetId:this.id}),s),this.pendingRequests.delete(a);for(const e of this.pendingRequests)this.missingRequests.add(e);return this.pendingRequests.clear(),t}}const xr=(e,t)=>Oe(e,t&&t.filter(e=>"source.canvas"!==e.identifier)),Cr=e.aF(Dt,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport","addIconset","removeIconset"]),wr=e.aF(Dt,["setCenter","setZoom","setBearing","setPitch"]),br=new Set(["background","sky","slot","custom"]),Sr={version:8,layers:[],sources:{}},Lr={duration:300,delay:0};class Tr extends e.E{constructor(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.map=t,this.scope=i.scope||"",this.globalId=null,this.fragments=[],this.importDepth=i.importDepth||0,this.importsCache=i.importsCache||new Map,this.resolvedImports=i.resolvedImports||new Set,this.transition=e.h({},Lr),this._buildingIndex=new Ot(this),this.crossTileSymbolIndex=new Vi,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=i.styleChanges||new W,this.dispatcher=i.dispatcher?i.dispatcher:new e.D(e.c$(),this),i.imageManager?this.imageManager=i.imageManager:(this.imageManager=new q(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.addScope(this.scope),this.glyphManager=i.glyphManager?i.glyphManager:new e.d0(t._requestManager,i.localFontFamily?e.d1.all:i.localIdeographFontFamily?e.d1.ideographs:e.d1.none,i.localFontFamily||i.localIdeographFontFamily),i.modelManager?this.modelManager=i.modelManager:(this.modelManager=new dr(t._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._availableModels={},this._order=[],this._markersNeedUpdate=!1,this.options=i.configOptions?i.configOptions:new Map,this._configDependentLayers=i.configDependentLayers?i.configDependentLayers:new Set,this._config=i.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:i.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=i.initialConfig,this.dispatcher.broadcast("setReferrer",e.d2());const r=this;this._rtlTextPluginCallback=Tr.registerForPluginStateChange(t=>{r.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:t.pluginStatus,pluginURL:t.pluginURL},(t,i)=>{if(e.d3(t),i&&i.every(e=>e))for(const e in r._sourceCaches){const t=r._sourceCaches[e],i=t.getSource().type;"vector"!==i&&"geojson"!==i||t.reload()}})}),this.on("data",e=>{if("source"!==e.dataType||"metadata"!==e.sourceDataType)return;const t=this.getOwnSource(e.sourceId);if(t&&t.vectorLayerIds)for(const i in this._layers){const e=this._layers[i];e.source===t.id&&this._validateLayer(e)}})}load(e){return e?("string"==typeof e?this.loadURL(e):this.loadJSON(e),this):this}_getGlobalId(t){if(!t)return null;if("string"==typeof t){if(e.j(t))return t;const i=e.d4(t);if(!i.startsWith("http"))try{return new URL(i,location.href).toString()}catch(e){return i}return i}return"json://".concat(e.d5(JSON.stringify(t)))}_diffStyle(t,i,r){this.globalId=this._getGlobalId(t);const n=(e,t)=>{try{t(null,this.setState(e,r))}catch(e){t(e,!1)}};if("string"==typeof t){const r=this.map._requestManager.normalizeStyleURL(t),o=this.map._requestManager.transformRequest(r,e.R.Style);e.n(o,(t,r)=>{t?this.fire(new e.z(t)):r&&n(r,i)})}else"object"==typeof t&&n(t,i)}loadURL(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.A("dataloading",{dataType:"style"}));const r="boolean"==typeof i.validate?i.validate:!e.j(t);this.globalId=this._getGlobalId(t),t=this.map._requestManager.normalizeStyleURL(t,i.accessToken),this.resolvedImports.add(t);const n=this.importsCache.get(t);if(n)return this._load(n,r);const o=this.map._requestManager.transformRequest(t,e.R.Style);this._request=e.n(o,(i,n)=>{if(this._request=null,i)this.fire(new e.z(i));else if(n)return this.importsCache.set(t,n),this._load(n,r)})}loadJSON(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.fire(new e.A("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(t),this._request=e.q.frame(()=>{this._request=null,this._load(t,!1!==i.validate)})}loadEmpty(){this.fire(new e.A("dataloading",{dataType:"style"})),this._load(Sr,!1)}_loadImports(t,i,r){if(this.importDepth>=4)return e.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const n=[];for(const e of t){const t=this._createFragmentStyle(e),o=new Promise(e=>{t.once("style.import.load",e),t.once("error",e)}).then(()=>this.mergeAll());if(n.push(o),this.resolvedImports.has(e.url)){t.loadEmpty();continue}const a=e.data||this.importsCache.get(e.url);a?(t.loadJSON(a,{validate:i}),this._isInternalStyle(a)&&(t.globalId=null)):e.url?t.loadURL(e.url,{validate:i}):t.loadEmpty();const s={style:t,id:e.id,config:e.config};if(r){const e=this.fragments.findIndex(e=>{let{id:t}=e;return t===r});this.fragments=this.fragments.slice(0,e).concat(s).concat(this.fragments.slice(e))}else this.fragments.push(s)}return Promise.allSettled(n)}getImportGlobalIds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;for(const i of e.fragments)i.style.globalId&&t.add(i.style.globalId),this.getImportGlobalIds(i.style,t);return[...t.values()]}_createFragmentStyle(t){const i=this.scope?e.C(t.id,this.scope):t.id;let r;const n=this._initialConfig&&this._initialConfig[i];(t.config||n)&&(r=e.h({},t.config,n));const o=new Tr(this.map,{scope:i,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:r,configOptions:this.options,colorThemeOverride:t["color-theme"],configDependentLayers:this._configDependentLayers});return o.setEventedParent(this.map,{style:o}),o}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(e){return this.isRootStyle()&&(e.fragment||!!e.schema&&!1!==e.fragment)}_load(t,i){const r=t.indoor?mr(t.schema):t.schema;if(this._isInternalStyle(t)){const r=e.h({},Sr,{imports:[{id:"basemap",data:t,url:""}]});return void this._load(r,i)}if(this.updateConfig(this._config,r),i&&xr(this,ve(t)))return;this._loaded=!0,this.stylesheet=e.d6(t);const n=()=>{for(const e in t.sources)this.addSource(e,t.sources[e],{validate:!1,isInitialLoad:!0});if(t.iconsets)for(const e in t.iconsets)this.addIconset(e,t.iconsets[e]);t.sprite?this._loadIconset(t.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.setGlyphsUrl(t.glyphs);const r=zt(this.stylesheet.layers);if(this._order=r.map(e=>e.id),this.stylesheet.light&&e.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(1===this.stylesheet.lights.length&&"flat"===this.stylesheet.lights[0].type){const e=this.stylesheet.lights[0];this.light=new ze(e.properties,e.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new ze(this.stylesheet.light)),this._layers={};for(const t of r){const i=e.db(t,this.scope,this._styleColorTheme.lut,this.options);0!==i.configDependencies.size&&this._configDependentLayers.add(i.fqid),i.setEventedParent(this,{layer:{id:i.id}}),this._layers[i.id]=i;const r=this.getOwnLayerSourceCache(i),n=!!this.directionalLight&&this.directionalLight.shadowsEnabled();r&&i.canCastShadows()&&n&&(r.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.addModelURLs(this.stylesheet.models);const n=this.stylesheet.terrain;n&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(n,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new e.A("data",{dataType:"style"}));const o=this.isRootStyle();t.imports?this._loadImports(t.imports,i).then(()=>{this._reloadImports(),this.fire(new e.A(o?"style.load":"style.import.load"))}).catch(t=>{this.fire(new e.z(new Error("Failed to load imports",t))),this.fire(new e.A(o?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new e.A(o?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const o=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(o){const t=this._evaluateColorThemeData(o);this._loadColorTheme(t).then(()=>{n()}).catch(t=>{e.w("Couldn't load color theme from the stylesheet: ".concat(t)),n()})}else this._styleColorTheme.lut=null,n()}isRootStyle(){return 0===this.importDepth}mergeAll(){let t,i,r,n,o,a,s,l,c,u;const h={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(e=>{if(e.stylesheet){if(null!=e.light&&(t=e.light),e.stylesheet.lights)for(const t of e.stylesheet.lights)"ambient"===t.type&&null!=e.ambientLight&&(i=e.ambientLight),"directional"===t.type&&null!=e.directionalLight&&(r=e.directionalLight);n=this._prioritizeTerrain(n,e.terrain,e.stylesheet.terrain),e.stylesheet.fog&&null!=e.fog&&(o=e.fog),e.stylesheet.snow&&null!=e.snow&&(a=e.snow),e.stylesheet.rain&&null!=e.rain&&(s=e.rain),null!=e.stylesheet.camera&&(u=e.stylesheet.camera),null!=e.stylesheet.projection&&(l=e.stylesheet.projection),null!=e.stylesheet.transition&&(c=e.stylesheet.transition),h[e.scope]=e._styleColorTheme}}),this.light=t,this.ambientLight=i,this.directionalLight=r,this.fog=o,this.snow=a,this.rain=s,this._styleColorThemeForScope=h,null===n?delete this.terrain:this.terrain=n,this.camera=u||{"camera-projection":"perspective"},this.projection=l||{name:"mercator"},this.transition=e.h({},Lr,c),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(e){const t=i=>{for(const e of i.fragments)t(e.style);e(i)};t(this)}_prioritizeTerrain(e,t,i){const r=e&&0===e.drapeRenderMode;return null===i?t&&0===t.drapeRenderMode?t:r?e:null:null!=t&&(!e||r||t&&1===t.drapeRenderMode)?t:e}mergeTerrain(){let e;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(t=>{e=this._prioritizeTerrain(e,t.terrain,t.stylesheet.terrain)}),null===e?delete this.terrain:this.terrain=e}mergeProjection(){let e;this.forEachFragmentStyle(t=>{null!=t.stylesheet.projection&&(e=t.stylesheet.projection)}),this.projection=e||{name:"mercator"}}mergeSources(){const t={},i={},r={};this.forEachFragmentStyle(n=>{for(const i in n._sourceCaches){const r=e.C(i,n.scope);t[r]=n._sourceCaches[i]}for(const t in n._otherSourceCaches){const r=e.C(t,n.scope);i[r]=n._otherSourceCaches[t]}for(const t in n._symbolSourceCaches){const i=e.C(t,n.scope);r[i]=n._symbolSourceCaches[t]}}),this._mergedSourceCaches=t,this._mergedOtherSourceCaches=i,this._mergedSymbolSourceCaches=r}mergeLayers(){var t=this;const i={},r=[],n={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(t=>{for(const n of t._order){const o=t._layers[n];if("slot"===o.type){const t=e.d7(n);if(i[t])continue;i[t]=[]}o.slot&&i[o.slot]?i[o.slot].push(o):r.push(o)}}),this._mergedOrder=[];const o=function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(const a of r)if("slot"===a.type){const r=e.d7(a.id);i[r]&&o(i[r]),t._mergedSlots.push(r)}else{const i=e.C(a.id,a.scope);t._mergedOrder.push(i),n[i]=a,a.is3D(!!t.terrain)&&(t._has3DLayers=!0),"circle"===a.type&&(t._hasCircleLayers=!0),"symbol"===a.type&&(t._hasSymbolLayers=!0),"clip"===a.type&&(t._clipLayerPresent=!0)}};o(r),this._mergedOrder.sort((e,t)=>{const i=n[e],r=n[t];return i.hasInitialOcclusionOpacityProperties?r.is3D(!!this.terrain)?1:0:i.is3D(!!this.terrain)&&r.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=n,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&0===this.terrain.drapeRenderMode}getCamera(){return this.stylesheet.camera}setCamera(t){return this.stylesheet.camera=e.h({},this.stylesheet.camera,t),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(t){return t.data?function(t,i,r){const n=e.h({},i);for(const a of Object.keys(e.a5.colorTheme))void 0===n[a]&&(n[a]=e.a5.colorTheme[a].default);const o=new e.a6(pr,t,new Map(r));return o.setTransitionOrValue(n,r),o.untransitioned().possiblyEvaluate(new e.aa(0,{worldview:void 0}))}(this.scope,t,this.options).get("data"):null}_loadColorTheme(t){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const i=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((r,n)=>{const o="data:image/png;base64,";if(!t||0===t.length)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void r();let a=t;a.startsWith(o)||(a=o+a);const s=e.I.from("mapbox-reserved-lut"),l=new Image;l.src=a,l.onerror=()=>{this._styleColorTheme.lutLoading=!1,n(new Error("Failed to load image data"))},l.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==i)return void r();this._styleColorTheme.lutLoading=!1;const{width:o,height:a,data:c}=e.q.getImageData(l);if(a>32)return void n(new Error("The height of the image must be less than or equal to 32 pixels."));if(o!==a*a)return void n(new Error("The width of the image must be equal to the height squared."));this.getImage(s)&&this.removeImage(s),this.addImage(s,{data:new e.r({width:o,height:a},c),pixelRatio:1,sdf:!1,usvg:!1,version:0});const u=this.imageManager.getImage(s,this.scope);u?(this._styleColorTheme.lut={image:u.data,data:t},r()):n(new Error("Missing LUT image."))}})}getLut(e){const t=this._styleColorThemeForScope[e];return t?t.lut:null}setProjection(e){e?this.stylesheet.projection=e:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(t){this._spriteRequest=function(t,i,r){let n,o,a;const s=e.q.devicePixelRatio>1?"@2x":"";let l=e.n(i.transformRequest(i.normalizeSpriteURL(t,s,".json"),e.R.SpriteJSON),(e,t)=>{l=null,a||(a=e,n=t,u())}),c=e.o(i.transformRequest(i.normalizeSpriteURL(t,s,".png"),e.R.SpriteImage),(e,t)=>{c=null,a||(a=e,o=t,u())});function u(){if(a)r(a);else if(n&&o){const t=e.q.getImageData(o),i={};for(const r in n){const{width:o,height:a,x:s,y:l,sdf:c,pixelRatio:u,stretchX:h,stretchY:d,content:p}=n[r],f=new e.r({width:o,height:a});e.r.copy(t,f,{x:s,y:l},{x:0,y:0},{width:o,height:a},null),i[r]={data:f,pixelRatio:u,sdf:c,stretchX:h,stretchY:d,content:p,usvg:!1}}r(null,i)}}return{cancel(){l&&(l.cancel(),l=null),c&&(c.cancel(),c=null)}}}(t,this.map._requestManager,(t,i)=>{if(this._spriteRequest=null,t)this.fire(new e.z(t));else if(i){const t=new Map;for(const r in i)t.set(e.I.from(r),i[r]);this.addImages(t)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new e.A("data",{dataType:"style"}))})}addIconset(t,i){if("sprite"===i.type)return void this._loadSprite(i.url);const r=this.getOwnSourceCache(i.source);if(!r)return void this.fire(new e.z(new Error('Source "'.concat(i.source,'" as specified by iconset "').concat(t,'" does not exist and cannot be used as an iconset source'))));const n=r.getSource();if("raster-array"!==n.type)return void this.fire(new e.z(new Error('Source "'.concat(i.source,'" as specified by iconset "').concat(t,'" is not a "raster-array" source and cannot be used as an iconset source'))));n.partial=!1;const o=new vr(t,this.scope,r);this.imageManager.addImageProvider(o,this.scope)}removeIconset(e){this.imageManager.removeImageProvider(e,this.scope)}_loadIconset(t){if(!e.j(t)&&"icon_set"!==this.map._spriteFormat||"raster"===this.map._spriteFormat)return void this._loadSprite(t);const i="auto"===this.map._spriteFormat;var r,n;this._spriteRequest=(n=(r,n)=>{if(this._spriteRequest=null,r)i?this._loadSprite(t):this.fire(new e.z(r));else if(n){const t=new Map;for(const i in n)t.set(e.I.from(i),n[i]);this.addImages(t)}this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new e.A("data",{dataType:"style"}))},e.br((r=this.map._requestManager).transformRequest(r.normalizeIconsetURL(t),e.R.Iconset),(t,i)=>{if(t)return void n(t);const r={},o=e.c_(new e.bq(i));for(const n of o.icons){const t={version:1,pixelRatio:e.q.devicePixelRatio,content:yr(n),stretchX:n.metadata?_r(n.metadata.stretch_x_areas):void 0,stretchY:n.metadata?_r(n.metadata.stretch_y_areas):void 0,sdf:!1,usvg:!0,icon:n};r[n.name]=t}n(null,r)}))}_validateLayer(t){const i=this.getOwnSource(t.source);if(!i)return;const r=t.sourceLayer;r&&("geojson"===i.type||i.vectorLayerIds&&-1===i.vectorLayerIds.indexOf(r))&&this.fire(new e.z(new Error('Source layer "'.concat(r,'" does not exist on source "').concat(i.id,'" as specified by style layer "').concat(t.id,'"'))))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const e in this._sourceCaches)if(!this._sourceCaches[e].loaded())return!1;if(!this.imageManager.isLoaded())return!1;if(this.imageManager.hasPatternsInFlight())return!1;if(!this.modelManager.isLoaded())return!1;if(this._styleColorTheme.lutLoading)return!1;for(const{style:e}of this.fragments)if(!e.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((e,t)=>{const i=this.fragments[t];return i&&i.style&&(e.data=i.style.serialize()),e})}_serializeSources(){const e={};for(const t in this._sourceCaches){const i=this._sourceCaches[t].getSource();e[i.id]||(e[i.id]=i.serialize())}return e}_serializeLayers(e){const t=[];for(const i of e){const e=this._layers[i];e&&"custom"!==e.type&&t.push(e.serialize())}return t}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions())return!0;if(this.hasFogTransition())return!0;if(this.hasSnowTransition())return!0;if(this.hasRainTransition())return!0;for(const e in this._sourceCaches)if(this._sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(e){return e?this.order:this._mergedOrder}isLayerDraped(e){return!!this.terrain&&e.isDraped(this.getLayerSourceCache(e))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(t){const i=this.getOwnLayer(t);if(i)return i;this.fire(new e.z(new Error("The layer '".concat(t,"' does not exist in the map's style."))))}_checkSource(t){const i=this.getOwnSource(t);if(i)return i;this.fire(new e.z(new Error("The source '".concat(t,"' does not exist in the map's style."))))}precompilePrograms(e,t){const i=this.map.painter;if(i)for(let r=e.minzoom||0;r<(e.maxzoom||25.5);r++){const r=e.getProgramIds();if(r)for(const n of r){const r=e.getDefaultProgramParams(n,t.zoom,this._styleColorTheme.lut);r&&(i.style=this,this.fog&&(i._fogVisible=!0,r.overrideFog=!0,i.getOrCreateProgram(n,r)),i._fogVisible=!1,r.overrideFog=!1,i.getOrCreateProgram(n,r),(this.stylesheet.terrain||this.stylesheet.projection&&"globe"===this.stylesheet.projection.name)&&(r.overrideRtt=!0,i.getOrCreateProgram(n,r)))}}}update(t){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(t),this.directionalLight&&this.directionalLight.recalculate(t);const i=this.calculateLightsBrightness();t.brightness=i||0,i!==this._brightness&&(this._brightness=i,this.dispatcher.broadcast("setBrightness",i)),t.worldview!==this._worldview&&(this._worldview=t.worldview,this.dispatcher.broadcast("setWorldview",this._worldview));const r=this._changes.isDirty();let n=!1;if(this._changes.isDirty()){const e=this._changes.getLayerUpdatesByScope();for(const t in e){const{updatedIds:i,removedIds:r}=e[t];(i||r)&&(this._updateWorkerLayers(t,i,r),n=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(t),this.light&&this.light.updateTransitions(t),this.ambientLight&&this.ambientLight.updateTransitions(t),this.directionalLight&&this.directionalLight.updateTransitions(t),this.fog&&this.fog.updateTransitions(t),this.snow&&this.snow.updateTransitions(t),this.rain&&this.rain.updateTransitions(t),this._changes.reset()}const o={};for(const e in this._mergedSourceCaches){const t=this._mergedSourceCaches[e];o[e]=t.used,t.used=!1,t.tileCoverLift=0}for(const e of this._mergedOrder){const i=this._mergedLayers[e];if(i.recalculate(t,this._availableImages),!i.isHidden(t.zoom)){const e=this.getLayerSourceCache(i);e&&(e.used=!0,e.tileCoverLift=Math.max(e.tileCoverLift,i.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(i,t)}):this.precompilePrograms(i,t))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&n&&this.mergeLayers();const a=this.imageManager.getPendingImageProviders();for(const e of a)e.sourceCache.used=!0;for(const s in o){const t=this._mergedSourceCaches[s];o[s]!==t.used&&t.getSource().fire(new e.A("data",{sourceDataType:"visibility",dataType:"source",sourceId:t.getSource().id}))}this.light&&this.light.recalculate(t),this.terrain&&this.terrain.recalculate(t),this.fog&&this.fog.recalculate(t),this.snow&&this.snow.recalculate(t),this.rain&&this.rain.recalculate(t),this.z=t.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),this.imageManager.clearUpdatedImages(this.scope),r&&this.fire(new e.A("data",{dataType:"style"}))}updateImageProviders(){const e=this.imageManager.getPendingImageProviders();for(const t of e){const e=t.resolvePendingRequests(),i=this.getFragmentStyle(t.scope);i&&i.addImages(e)}}_updateTilesForChangedImages(){const e={};for(const t in this._mergedSourceCaches){const i=this._mergedSourceCaches[t].getSource().scope;e[i]=e[i]||this._changes.getUpdatedImages(i),0!==e[i].length&&this._mergedSourceCaches[t].reloadTilesForDependencies(["icons","patterns"],e[i])}for(const t in e)this._changes.resetUpdatedImages(t)}_updateWorkerLayers(e,t,i){const r=this.getFragmentStyle(e);r&&this.dispatcher.broadcast("updateLayers",{layers:t?r._serializeLayers(t):[],scope:e,removedIds:i||[],options:r.options})}setState(t,i){if(this._checkLoaded(),xr(this,ve(t)))return!1;(t=e.d6(t)).layers=zt(t.layers);const r=function(t,i){if(!t)return[{command:Dt.setStyle,args:[i]}];let r=[];try{if(!e.bv(t.version,i.version))return[{command:Dt.setStyle,args:[i]}];if(e.bv(t.center,i.center)||r.push({command:Dt.setCenter,args:[i.center]}),e.bv(t.zoom,i.zoom)||r.push({command:Dt.setZoom,args:[i.zoom]}),e.bv(t.bearing,i.bearing)||r.push({command:Dt.setBearing,args:[i.bearing]}),e.bv(t.pitch,i.pitch)||r.push({command:Dt.setPitch,args:[i.pitch]}),e.bv(t.sprite,i.sprite)||r.push({command:Dt.setSprite,args:[i.sprite]}),e.bv(t.glyphs,i.glyphs)||r.push({command:Dt.setGlyphs,args:[i.glyphs]}),e.bv(t.imports,i.imports)||function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0;i=i||[];const n=(t=t||[]).map(jt),o=i.map(jt),a=t.reduce(Ht,{}),s=i.reduce(Ht,{}),l=n.slice();let c,u,h,d;for(c=0,u=0;c<n.length;c++)h=n[c],s.hasOwnProperty(h)?u++:(r.push({command:Dt.removeImport,args:[h]}),l.splice(l.indexOf(h,u),1));for(c=0,u=0;c<o.length;c++)h=o[o.length-1-c],l[l.length-1-c]!==h&&(a.hasOwnProperty(h)?(r.push({command:Dt.removeImport,args:[h]}),l.splice(l.lastIndexOf(h,l.length-u),1)):u++,d=l[l.length-c],r.push({command:Dt.addImport,args:[s[h],d]}),l.splice(l.length-c,0,h));for(const p of i){const t=a[p.id];t&&(delete t.data,e.bv(t,p)||r.push({command:Dt.updateImport,args:[p.id,p]}))}}(t.imports,i.imports,r),e.bv(t.transition,i.transition)||r.push({command:Dt.setTransition,args:[i.transition]}),e.bv(t.light,i.light)||r.push({command:Dt.setLight,args:[i.light]}),e.bv(t.fog,i.fog)||r.push({command:Dt.setFog,args:[i.fog]}),e.bv(t.snow,i.snow)||r.push({command:Dt.setSnow,args:[i.snow]}),e.bv(t.rain,i.rain)||r.push({command:Dt.setRain,args:[i.rain]}),e.bv(t.projection,i.projection)||r.push({command:Dt.setProjection,args:[i.projection]}),e.bv(t.lights,i.lights)||r.push({command:Dt.setLights,args:[i.lights]}),e.bv(t.camera,i.camera)||r.push({command:Dt.setCamera,args:[i.camera]}),e.bv(t.iconsets,i.iconsets)||function(t,i,r){let n;for(n in i=i||{},t=t||{})t.hasOwnProperty(n)&&(i.hasOwnProperty(n)||r.push({command:Dt.removeIconset,args:[n]}));for(n in i){if(!i.hasOwnProperty(n))continue;const o=i[n];t.hasOwnProperty(n)?e.bv(t[n],o)||(r.push({command:Dt.removeIconset,args:[n]}),r.push({command:Dt.addIconset,args:[n,o]})):r.push({command:Dt.addIconset,args:[n,o]})}}(t.iconsets,i.iconsets,r),!e.bv(t["color-theme"],i["color-theme"]))return[{command:Dt.setStyle,args:[i]}];const n={},o=[];!function(t,i,r,n){let o;for(o in i=i||{},t=t||{})t.hasOwnProperty(o)&&(i.hasOwnProperty(o)||Bt(o,r,n));for(o in i){if(!i.hasOwnProperty(o))continue;const a=i[o];t.hasOwnProperty(o)?e.bv(t[o],a)||("geojson"===t[o].type&&"geojson"===a.type&&Nt(t,i,o)?r.push({command:Dt.setGeoJSONSourceData,args:[o,a.data]}):Vt(o,i,r,n)):Ft(o,i,r)}}(t.sources,i.sources,o,n);const a=[];t.layers&&t.layers.forEach(e=>{e.source&&n[e.source]?r.push({command:Dt.removeLayer,args:[e.id]}):a.push(e)});let s=t.terrain;s&&n[s.source]&&(r.push({command:Dt.setTerrain,args:[void 0]}),s=void 0),r=r.concat(o),e.bv(s,i.terrain)||r.push({command:Dt.setTerrain,args:[i.terrain]}),function(t,i,r){i=i||[];const n=(t=t||[]).map(jt),o=i.map(jt),a=t.reduce(Ht,{}),s=i.reduce(Ht,{}),l=n.slice(),c=Object.create(null);let u,h,d,p,f,m,g;for(u=0,h=0;u<n.length;u++)d=n[u],s.hasOwnProperty(d)?h++:(r.push({command:Dt.removeLayer,args:[d]}),l.splice(l.indexOf(d,h),1));for(u=0,h=0;u<o.length;u++)d=o[o.length-1-u],l[l.length-1-u]!==d&&(a.hasOwnProperty(d)?(r.push({command:Dt.removeLayer,args:[d]}),l.splice(l.lastIndexOf(d,l.length-h),1)):h++,m=l[l.length-u],r.push({command:Dt.addLayer,args:[s[d],m]}),l.splice(l.length-u,0,d),c[d]=!0);for(u=0;u<o.length;u++)if(d=o[u],p=a[d],f=s[d],!c[d]&&!e.bv(p,f))if(e.bv(p.source,f.source)&&e.bv(p["source-layer"],f["source-layer"])&&e.bv(p.type,f.type)){for(g in Ut(p.layout,f.layout,r,d,null,Dt.setLayoutProperty),Ut(p.paint,f.paint,r,d,null,Dt.setPaintProperty),e.bv(p.slot,f.slot)||r.push({command:Dt.setSlot,args:[d,f.slot]}),e.bv(p.filter,f.filter)||r.push({command:Dt.setFilter,args:[d,f.filter]}),e.bv(p.minzoom,f.minzoom)&&e.bv(p.maxzoom,f.maxzoom)||r.push({command:Dt.setLayerZoomRange,args:[d,f.minzoom,f.maxzoom]}),p)p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&"slot"!==g&&(0===g.indexOf("paint.")?Ut(p[g],f[g],r,d,g.slice(6),Dt.setPaintProperty):e.bv(p[g],f[g])||r.push({command:Dt.setLayerProperty,args:[d,g,f[g]]}));for(g in f)f.hasOwnProperty(g)&&!p.hasOwnProperty(g)&&"layout"!==g&&"paint"!==g&&"filter"!==g&&"metadata"!==g&&"minzoom"!==g&&"maxzoom"!==g&&"slot"!==g&&(0===g.indexOf("paint.")?Ut(p[g],f[g],r,d,g.slice(6),Dt.setPaintProperty):e.bv(p[g],f[g])||r.push({command:Dt.setLayerProperty,args:[d,g,f[g]]}))}else r.push({command:Dt.removeLayer,args:[d]}),m=l[l.lastIndexOf(d)+1],r.push({command:Dt.addLayer,args:[f,m]})}(a,i.layers,r)}catch(e){console.warn("Unable to compute style diff:",e),r=[{command:Dt.setStyle,args:[i]}]}return r}(this.serialize(),t).filter(e=>!(e.command in wr));if(0===r.length)return!1;const n=r.filter(e=>!(e.command in Cr));if(n.length>0)throw new Error("Unimplemented: ".concat(n.map(e=>e.command).join(", "),"."));const o=[];return r.forEach(e=>{o.push(this[e.command](...e.args))}),i&&Promise.all(o).then(i).catch(i),this.stylesheet=t,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}_updateWorkerImages(){this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages})}_updateWorkerModels(){this._availableModels=this.modelManager.getModelURIs(this.scope),this.dispatcher.broadcast("setModels",{scope:this.scope,models:this._availableModels})}addImages(t){for(const[i,r]of t.entries()){if(this.getImage(i))return this.fire(new e.z(new Error('An image with the name "'.concat(i.name,'" already exists.'))));this.imageManager.addImage(i,this.scope,r),this._changes.updateImage(i,this.scope)}return this._updateWorkerImages(),this.fire(new e.A("data",{dataType:"style"})),this}addImage(t,i){return this.getImage(t)?this.fire(new e.z(new Error('An image with the name "'.concat(t.name,'" already exists.')))):(this.imageManager.addImage(t,this.scope,i),this._changes.updateImage(t,this.scope),this._updateWorkerImages(),this.fire(new e.A("data",{dataType:"style"})),this)}updateImage(t,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.imageManager.updateImage(t,this.scope,i),r&&(this._changes.updateImage(t,this.scope),this._updateWorkerImages(),this.fire(new e.A("data",{dataType:"style"})))}getImage(e){return this.imageManager.getImage(e,this.scope)}removeImage(t){return this.getImage(t)?(this.imageManager.removeImage(t,this.scope),this._changes.updateImage(t,this.scope),this._updateWorkerImages(),this.fire(new e.A("data",{dataType:"style"})),this):this.fire(new e.z(new Error("No image with this name exists.")))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModelURLs(t){return this.modelManager.addModelURLs(t,this.scope),this._updateWorkerModels(),this.fire(new e.A("data",{dataType:"style"})),this}addModel(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._checkLoaded(),this._validate(ke,"models.".concat(t),i,null,r)||(this.modelManager.addModel(t,i,this.scope),this.fire(new e.A("data",{dataType:"style"}))),this}hasModel(e){return this.modelManager.hasModel(e,this.scope)}removeModel(t){return this.hasModel(t)?(this.modelManager.removeModel(t,this.scope),this.fire(new e.A("data",{dataType:"style"})),this):this.fire(new e.z(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this._checkLoaded(),void 0!==this.getOwnSource(t))throw new Error('There is already a source with ID "'.concat(t,'".'));if(!i.type)throw new Error("The type property must be defined, but only the following properties were given: ".concat(Object.keys(i).join(", "),"."));if(["vector","raster","geojson","video","image"].indexOf(i.type)>=0&&this._validate(xe,"sources.".concat(t),i,null,r))return;this.map&&this.map._collectResourceTiming&&(i.collectResourceTiming=!0);const n=ct(t,i,this.dispatcher,this);n.scope=this.scope,n.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(n.id),source:n.serialize(),sourceId:n.id}));const o=t=>{const i=(t?"symbol:":"other:")+n.id,r=e.C(i,this.scope),o=this._sourceCaches[i]=new It(r,n,t);(t?this._symbolSourceCaches:this._otherSourceCaches)[n.id]=o,o.onAdd(this.map)};o(!1),"vector"!==i.type&&"geojson"!==i.type||o(!0),n.onAdd&&n.onAdd(this.map),r.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(t){this._checkLoaded();const i=this.getOwnSource(t);if(!i)throw new Error("There is no source with this ID");for(const n in this._layers)if(this._layers[n].source===t)return this.fire(new e.z(new Error('Source "'.concat(t,'" cannot be removed while layer "').concat(n,'" is using it.'))));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===t)return this.fire(new e.z(new Error('Source "'.concat(t,'" cannot be removed while terrain is using it.'))));if(this.stylesheet.iconsets){const i=Object.entries(this.stylesheet.iconsets).find(e=>{let[i,r]=e;return"source"===r.type&&r.source===t});if(i)return this.fire(new e.z(new Error('Source "'.concat(t,'" cannot be removed while iconset "').concat(i[0],'" is using it.'))))}const r=this.getOwnSourceCaches(t);for(const n of r){const t=e.d7(n.id);delete this._sourceCaches[t],this._changes.discardSourceCacheUpdate(n.id),n.fire(new e.A("data",{sourceDataType:"metadata",dataType:"source",sourceId:n.getSource().id})),n.setEventedParent(null),n.clearTiles()}return delete this._otherSourceCaches[t],delete this._symbolSourceCaches[t],this.mergeSources(),i.setEventedParent(null),i.onRemove&&i.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(e,t){this._checkLoaded(),this.getOwnSource(e).setData(t),this._changes.setDirty()}getOwnSource(e){const t=this.getOwnSourceCache(e);return t&&t.getSource()}getOwnSources(){const e=[];for(const t in this._otherSourceCaches){const i=this.getOwnSourceCache(t);i&&e.push(i.getSource())}return e}areTilesLoaded(){const e=this._mergedSourceCaches;for(const t in e){const i=e[t]._tiles;for(const e in i){const t=i[e];if("loaded"!==t.state&&"errored"!==t.state)return!1}}return!0}setLights(t){if(this._checkLoaded(),!t)return delete this.ambientLight,void delete this.directionalLight;const i=this._getTransitionParameters();for(const o of t){if(this._validate(we,"lights",o))return;switch(o.type){case"ambient":if(this.ambientLight){const e=this.ambientLight;e.set(o),e.updateTransitions(i)}else this.ambientLight=new Je(o,qe||(qe=new e.a7({color:new e.a8(e.a5.properties_light_ambient.color),"color-use-theme":new e.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new e.a8(e.a5.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const e=this.directionalLight;e.set(o),e.updateTransitions(i)}else this.directionalLight=new Je(o,Xe||(Xe=new e.a7({direction:new e.an(e.a5.properties_light_directional.direction),color:new e.a8(e.a5.properties_light_directional.color),"color-use-theme":new e.a8({type:"string",default:"default","property-type":"data-constant"}),intensity:new e.a8(e.a5.properties_light_directional.intensity),"cast-shadows":new e.a8(e.a5.properties_light_directional["cast-shadows"]),"shadow-quality":new e.a8(e.a5.properties_light_directional["shadow-quality"]),"shadow-intensity":new e.a8(e.a5.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const r=Object.assign(i,{worldview:this.map.getWorldview()}),n=new e.aa(this.z||0,r);this.ambientLight&&this.ambientLight.recalculate(n),this.directionalLight&&this.directionalLight.recalculate(n),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const t=this.directionalLight,i=this.ambientLight;if(!t||!i)return;const r=e=>.2126*(e[0]<=.03928?e[0]/12.92:Math.pow((e[0]+.055)/1.055,2.4))+.7152*(e[1]<=.03928?e[1]/12.92:Math.pow((e[1]+.055)/1.055,2.4))+.0722*(e[2]<=.03928?e[2]/12.92:Math.pow((e[2]+.055)/1.055,2.4)),n=t.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),o=t.properties.get("intensity"),a=t.properties.get("direction"),s=1-e.cR(a.x,a.y,a.z)[2]/90,l=r(n)*o*s,c=i.properties.get("color").toNonPremultipliedRenderColor(null).toArray01(),u=i.properties.get("intensity"),h=r(c)*u;return Number(((l+h)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const e=[];return this.directionalLight&&e.push(this.directionalLight.get()),this.ambientLight&&e.push(this.ambientLight.get()),e}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(t){if(null==t||""===t&&this.isRootStyle())return this;if(e.d8(t)){const i=e.d9(t),r=this.fragments.find(e=>{let{id:t}=e;return t===i});if(!r)return;const n=e.d7(t);return r.style.getFragmentStyle(n)}{const e=this.fragments.find(e=>{let{id:i}=e;return i===t});return e?e.style:void 0}}setFeaturesetSelectors(t){if(!t)return;const i={},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"".concat(e,"::").concat(t)};this._featuresetSelectors={};for(const n in t){const o=this._featuresetSelectors[n]=[];for(const a of t[n].selectors){if(a.featureNamespace){const t=this.getOwnLayer(a.layer);if(!t){e.w("Layer is undefined for selector: ".concat(a.layer));continue}const o=r(t.source,t.sourceLayer);if(o in i&&i[o]!==a.featureNamespace){e.w('"featureNamespace '.concat(a.featureNamespace," of featureset ").concat(n,"'s selector is not associated to the same source, skip this selector"));continue}i[o]=a.featureNamespace}let t;if(a.properties)for(const i in a.properties){const r=e.X(a.properties[i]);"success"===r.result&&(t=t||{},t[i]=r.value)}o.push({layerId:a.layer,namespace:a.featureNamespace,properties:t,uniqueFeatureID:a._uniqueFeatureID})}}}getFeaturesetDescriptors(e){const t=this.getFragmentStyle(e);if(!t||!t.stylesheet.featuresets)return[];const i=[];for(const r in t.stylesheet.featuresets)i.push({featuresetId:r,importId:t.scope?t.scope:void 0});return i}getFeaturesetLayers(t,i){const r=this.getFragmentStyle(i),n=r.stylesheet.featuresets;if(!n||!n[t])return this.fire(new e.z(new Error("The featureset '".concat(t,"' does not exist in the map's style and cannot be queried.")))),[];const o=[];for(const e of n[t].selectors){const t=r.getOwnLayer(e.layer);t&&o.push(t)}return o}getConfigProperty(t,i){const r=this.getFragmentStyle(t);if(!r)return null;const n=e.C(i,r.scope),o=r.options.get(n),a=o?o.value||o.default:null;return a?a.serialize():null}setConfigProperty(t,i,r){const n=this.getFragmentStyle(t);if(!n)return;const o=n.stylesheet.indoor?mr(n.stylesheet.schema):n.stylesheet.schema;if(!o||!o[i])return;const a=e.X(r);if("success"!==a.result)return void xr(this,a.value);const s=a.value.expression,l=e.C(i,n.scope),c=n.options.get(l);if(!c)return;let u;const{minValue:h,maxValue:d,stepValue:p,type:f,values:m}=o[i],g=e.X(o[i].default);"success"===g.result&&(u=g.value.expression),u?(this.options.set(l,Object.assign({},c,{value:s,default:u,minValue:h,maxValue:d,stepValue:p,type:f,values:m})),this.updateConfigDependencies(i)):this.fire(new e.z(new Error('No schema defined for the config option "'.concat(i,'" in the "').concat(t,'" fragment.'))))}getConfig(t){const i=this.getFragmentStyle(t);if(!i)return null;const r=i.stylesheet.schema;if(!r)return null;const n={};for(const o in r){const t=e.C(o,i.scope),r=i.options.get(t),a=r?r.value||r.default:null;n[o]=a?a.serialize():null}return n}setConfig(e,t){const i=this.getFragmentStyle(e);i&&(i.updateConfig(t,i.stylesheet.schema),this.updateConfigDependencies())}getSchema(e){const t=this.getFragmentStyle(e);return t?t.stylesheet.schema:null}setSchema(e,t){const i=this.getFragmentStyle(e);i&&(i.stylesheet.schema=t,i.updateConfig(i._config,t),this.updateConfigDependencies())}updateConfig(t,i){if(this._config=t,t||i)if(i)for(const r in i){let n,o;const a=e.X(i[r].default);if("success"===a.result&&(n=a.value.expression),t&&void 0!==t[r]){const i=e.X(t[r]);"success"===i.result&&(o=i.value.expression)}const{minValue:s,maxValue:l,stepValue:c,type:u,values:h}=i[r];if(n){const t=e.C(r,this.scope);this.options.set(t,{default:n,value:o,minValue:s,maxValue:l,stepValue:c,type:u,values:h})}else this.fire(new e.z(new Error('No schema defined for config option "'.concat(r,'".'))))}else this.fire(new e.z(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(e){for(const t of this._configDependentLayers){const i=this.getLayer(t);if(i){if(e&&!i.configDependencies.has(e))continue;i.possiblyEvaluateVisibility(),this._updateLayer(i)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(e=>{const t=e._styleColorTheme.colorThemeOverride?e._styleColorTheme.colorThemeOverride:e._styleColorTheme.colorTheme;if(t){const i=e._evaluateColorThemeData(t);(!e._styleColorTheme.lut&&""!==i||e._styleColorTheme.lut&&i!==e._styleColorTheme.lut.data)&&e.setColorTheme(t)}}),this._changes.setDirty()}addLayer(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=t.id;if(this._layers[n])return void this.fire(new e.z(new Error('Layer with id "'.concat(n,'" already exists on this map'))));let o;if("custom"===t.type){if(xr(this,e.da(t)))return;o=e.db(t,this.scope,this._styleColorTheme.lut,this.options)}else{if("object"==typeof t.source&&(this.addSource(n,t.source),t=e.d6(t),t=e.h(t,{source:n})),this._validate(Me,"layers.".concat(n),t,{arrayIndex:-1},r))return;o=e.db(t,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(o),o.setEventedParent(this,{layer:{id:n}})}0!==o.configDependencies.size&&this._configDependentLayers.add(o.fqid);let a=this._order.length;if(i){const t=this._order.indexOf(i);if(-1===t)return void this.fire(new e.z(new Error('Layer with id "'.concat(i,'" does not exist on this map.'))));o.slot===this._layers[i].slot?a=t:e.w('Layer with id "'.concat(i,'" has a different slot. Layers can only be rearranged within the same slot.'))}this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=o;const s=this.getOwnLayerSourceCache(o),l=!!this.directionalLight&&this.directionalLight.shadowsEnabled();s&&o.canCastShadows()&&l&&(s.castsShadows=!0);const c=this._changes.getRemovedLayer(o);if(c&&o.source&&s&&"custom"!==o.type){this._changes.discardLayerRemoval(o);const t=e.C(o.source,o.scope);c.type!==o.type?this._changes.updateSourceCache(t,"clear"):(this._changes.updateSourceCache(t,"reload"),s.pause())}this._updateLayer(o),o.onAdd&&o.onAdd(this.map),o.scope=this.scope,this.mergeLayers()}moveLayer(t,i){this._checkLoaded();const r=this._checkLayer(t);if(!r)return;if(t===i)return;const n=this._order.indexOf(t);this._order.splice(n,1);let o=this._order.length;if(i){const t=this._order.indexOf(i);if(-1===t)return void this.fire(new e.z(new Error('Layer with id "'.concat(i,'" does not exist on this map.'))));r.slot===this._layers[i].slot?o=t:e.w('Layer with id "'.concat(i,'" has a different slot. Layers can only be rearranged within the same slot.'))}this._order.splice(o,0,t),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(e){this._checkLoaded();const t=this._checkLayer(e);if(!t)return;t.setEventedParent(null);const i=this._order.indexOf(e);this._order.splice(i,1),delete this._layers[e],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(t.fqid),this._changes.removeLayer(t);const r=this.getOwnLayerSourceCache(t);if(r&&r.castsShadows){let e=!1;for(const i in this._layers)if(this._layers[i].source===t.source&&this._layers[i].canCastShadows()){e=!0;break}r.castsShadows=e}t.onRemove&&t.onRemove(this.map),this.mergeLayers()}getOwnLayer(e){return this._layers[e]}hasLayer(e){return e in this._mergedLayers}hasLayerType(e){for(const t in this._layers)if(this._layers[t].type===e)return!0;return!1}setLayerZoomRange(e,t,i){this._checkLoaded();const r=this._checkLayer(e);r&&(r.minzoom===t&&r.maxzoom===i||(null!=t&&(r.minzoom=t),null!=i&&(r.maxzoom=i),this._updateLayer(r)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(e,t){this._checkLoaded();const i=this._checkLayer(e);i&&i.slot!==t&&(i.slot=t,this._updateLayer(i))}setFilter(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=this._checkLayer(t);if(n&&!e.bv(n.filter,i))return null==i?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(Ee,"layers.".concat(n.id,".filter"),i,{layerType:n.type},r)||(n.filter=e.d6(i),this._updateLayer(n)))}getFilter(t){const i=this._checkLayer(t);if(i)return e.d6(i.filter)}setLayoutProperty(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this._checkLayer(t);if(o&&!e.bv(o.getLayoutProperty(i),r)){if(null!=r&&(!n||!1!==n.validate)&&xr(o,Ae.call(ve,{key:"layers.".concat(t,".layout.").concat(i),layerType:o.type,objectKey:i,value:r,styleSpec:e.a5,style:{glyphs:!0,sprite:!0}})))return;o.setLayoutProperty(i,r),0!==o.configDependencies.size&&this._configDependentLayers.add(o.fqid),this._updateLayer(o)}}getLayoutProperty(e,t){const i=this._checkLayer(e);if(i)return i.getLayoutProperty(t)}setPaintProperty(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this._checkLoaded();const o=this._checkLayer(t);if(!o)return;if(e.bv(o.getPaintProperty(i),r))return;if(null!=r&&(!n||!1!==n.validate)&&xr(o,Ie.call(ve,{key:"layers.".concat(t,".paint.").concat(i),layerType:o.type,objectKey:i,value:r,styleSpec:e.a5})))return;const a=o.setPaintProperty(i,r);0!==o.configDependencies.size&&this._configDependentLayers.add(o.fqid),a&&this._updateLayer(o),this._changes.updatePaintProperties(o)}getPaintProperty(e,t){const i=this._checkLayer(e);if(i)return i.getPaintProperty(t)}setFeatureState(t,i){if(this._checkLoaded(),"target"in t){if("featuresetId"in t.target){const{featuresetId:e,importId:r}=t.target,n=this.getFragmentStyle(r),o=n.getFeaturesetLayers(e);for(const{source:a,sourceLayer:s}of o)n.setFeatureState({id:t.id,source:a,sourceLayer:s},i)}else if("layerId"in t.target){const{layerId:e}=t.target,r=this.getLayer(e);this.setFeatureState({id:t.id,source:r.source,sourceLayer:r.sourceLayer},i)}return}const r=t.source,n=t.sourceLayer,o=this._checkSource(r);if(!o)return;const a=o.type;if("geojson"===a&&n)return void this.fire(new e.z(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if("vector"===a&&!n)return void this.fire(new e.z(new Error("The sourceLayer parameter must be provided for vector source types.")));void 0===t.id&&this.fire(new e.z(new Error("The feature id parameter must be provided.")));const s=this.getOwnSourceCaches(r);for(const e of s)e.setFeatureState(n,t.id,i)}removeFeatureState(t,i){if(this._checkLoaded(),"target"in t){if("featuresetId"in t.target){const{featuresetId:e,importId:r}=t.target,n=this.getFragmentStyle(r),o=n.getFeaturesetLayers(e);for(const{source:a,sourceLayer:s}of o)n.removeFeatureState({id:t.id,source:a,sourceLayer:s},i)}else if("layerId"in t.target){const{layerId:e}=t.target,r=this.getLayer(e);this.removeFeatureState({id:t.id,source:r.source,sourceLayer:r.sourceLayer},i)}return}const r=t.source,n=this._checkSource(r);if(!n)return;const o=n.type,a="vector"===o?t.sourceLayer:void 0;if("vector"===o&&!a)return void this.fire(new e.z(new Error("The sourceLayer parameter must be provided for vector source types.")));if(i&&"string"!=typeof t.id&&"number"!=typeof t.id)return void this.fire(new e.z(new Error("A feature id is required to remove its specific state property.")));const s=this.getOwnSourceCaches(r);for(const e of s)e.removeFeatureState(a,t.id,i)}getFeatureState(t){if(this._checkLoaded(),"target"in t){let i;if("featuresetId"in t.target){const{featuresetId:r,importId:n}=t.target,o=this.getFragmentStyle(n),a=o.getFeaturesetLayers(r);for(const{source:s,sourceLayer:l}of a){const r=o.getFeatureState({id:t.id,source:s,sourceLayer:l});if(r&&!i)i=r;else if(!e.bv(i,r))return void this.fire(new e.z(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in t.target){const{layerId:e}=t.target,r=this.getLayer(e);i=this.getFeatureState({id:t.id,source:r.source,sourceLayer:r.sourceLayer})}return i}const i=t.source,r=t.sourceLayer,n=this._checkSource(i);if(n){if("vector"!==n.type||r)return void 0===t.id&&this.fire(new e.z(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(i)[0].getFeatureState(r,t.id);this.fire(new e.z(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(t){return this.stylesheet.transition=e.h({},this.stylesheet.transition,t),this.transition=this.stylesheet.transition,this}getTransition(){return e.h({},this.stylesheet.transition)}serialize(){this._checkLoaded();const t=this.getTerrain(),i=t&&this.terrain&&this.terrain.scope===this.scope?t:this.stylesheet.terrain;return e.dc({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,iconsets:this.stylesheet.iconsets,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:i,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},e=>void 0!==e)}_updateFilteredLayers(e){for(const t of Object.values(this._mergedLayers))e(t)&&this._updateLayer(t)}_updateLayer(t){this._changes.updateLayer(t);const i=this.getLayerSourceCache(t),r=e.C(t.source,t.scope),n=this._changes.getUpdatedSourceCaches();t.source&&!n[r]&&i&&"raster"!==i.getSource().type&&(this._changes.updateSourceCache(r,"reload"),i.pause()),t.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(e){const t=e=>this._mergedLayers[e].is3D(!!this.terrain),i=this.order,r={},n=[];for(let a=i.length-1;a>=0;a--){const o=i[a];if(t(o)){r[o]=a;for(const t of e){const e=t[o];if(e)for(const t of e)n.push(t)}}}n.sort((e,t)=>t.intersectionZ-e.intersectionZ);const o=[];for(let a=i.length-1;a>=0;a--){const s=i[a];if(t(s))for(let e=n.length-1;e>=0;e--){const t=n[e].feature;if(t.layer&&r[t.layer.id]<a)break;o.push(t),n.pop()}else for(const t of e){const e=t[s];if(e)for(const t of e)o.push(t.feature)}}return o}queryRenderedFeatures(t,i,r){let n;i&&!Array.isArray(i)&&i.filter&&(this._validate(Ee,"queryRenderedFeatures.filter",i.filter,null,i),n=e.b3(i.filter));const o={},a=e=>{if(br.has(e.type))return;const t=this.getOwnLayerSourceCache(e),i=o[t.id]=o[t.id]||{sourceCache:t,layers:{},has3DLayers:!1};e.is3D(!!this.terrain)&&(i.has3DLayers=!0),i.layers[e.fqid]=i.layers[e.fqid]||{styleLayer:e,targets:[]},i.layers[e.fqid].targets.push({filter:n})};if(i&&i.layers){if(!Array.isArray(i.layers))return this.fire(new e.z(new Error("parameters.layers must be an Array."))),[];for(const t of i.layers){const i=this._layers[t];if(!i)return this.fire(new e.z(new Error("The layer '".concat(t,"' does not exist in the map's style and cannot be queried for features.")))),[];a(i)}}else for(const e in this._layers)a(this._layers[e]);const s=this._queryRenderedFeatures(t,o,r),l=this._flattenAndSortRenderedFeatures(s),c=[];for(const u of l)e.dd(u.layer.id)===this.scope&&c.push(u);return c}queryRenderedFeatureset(t,i,r){let n;i&&!Array.isArray(i)&&i.filter&&(this._validate(Ee,"queryRenderedFeatures.filter",i.filter,null,i),n=e.b3(i.filter));const o="mock",a=[];if(i&&i.target)a.push(Object.assign({},i,{targetId:o,filter:n}));else{const e=this.getFeaturesetDescriptors();for(const t of e)a.push({targetId:o,filter:n,target:t});for(const{style:t}of this.fragments){const e=t.getFeaturesetDescriptors();for(const t of e)a.push({targetId:o,filter:n,target:t})}}const s=this.queryRenderedTargets(t,a,r),l=[],c=new Set;for(const u of s)for(const t of u.variants[o])ht(t,u,c)||l.push(new e.de(u,t));return l}queryRenderedTargets(t,i,r){const n={},o=(e,t,i,r)=>{const o=n[t.id]=n[t.id]||{sourceCache:t,layers:{},has3DLayers:!1};if(o.layers[e.fqid]=o.layers[e.fqid]||{styleLayer:e,targets:[]},e.is3D(!!this.terrain)&&(o.has3DLayers=!0),!r)return i.uniqueFeatureID=!1,void o.layers[e.fqid].targets.push(i);o.layers[e.fqid].targets.push(Object.assign({},i,{namespace:r.namespace,properties:r.properties,uniqueFeatureID:r.uniqueFeatureID}))};for(const s of i)if("featuresetId"in s.target){const{featuresetId:t,importId:i}=s.target,r=this.getFragmentStyle(i);if(!r||!r._featuresetSelectors)continue;const n=r._featuresetSelectors[t];if(!n){this.fire(new e.z(new Error("The featureset '".concat(t,"' does not exist in the map's style and cannot be queried for features."))));continue}for(const e of n){const t=r.getOwnLayer(e.layerId);t&&!br.has(t.type)&&o(t,r.getOwnLayerSourceCache(t),s,e)}}else if("layerId"in s.target){const{layerId:e}=s.target,t=this.getLayer(e);if(!t||br.has(t.type))continue;o(t,this.getLayerSourceCache(t),s)}const a=this._queryRenderedFeatures(t,n,r);return this._flattenAndSortRenderedFeatures(a)}_queryRenderedFeatures(e,t,i){const r=[],n=!!this.map._showQueryGeometry,o=Qe.createFromScreenPoints(e,i);for(const a in t){const e=dt(o,t[a],this._availableImages,i,n);Object.keys(e).length&&r.push(e)}if(this.placement)for(const a in t){if(!t[a].sourceCache._onlySymbols)continue;const e=pt(o.screenGeometry,t[a],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData,this.map.getWorldview());Object.keys(e).length&&r.push(e)}return r}querySourceFeatures(e,t){const i=t&&t.filter;i&&this._validate(Ee,"querySourceFeatures.filter",i,null,t);let r=[];const n=this.getOwnSourceCaches(e);for(const o of n)r=r.concat(ft(o,t));return r}addSourceType(e,t,i){return Tr.getSourceType(e)?i(new Error('A source type called "'.concat(e,'" already exists.'))):(Tr.setSourceType(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._checkLoaded();const n=this.light.getLight();let o=!1;for(const s in t)if(!e.bv(t[s],n[s])){o=!0;break}if(!o)return;const a=this._getTransitionParameters();this.light.setLight(t,i,r),this.light.updateTransitions(a)}getTerrain(){return this.terrain&&1===this.terrain.drapeRenderMode?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){void 0===this.disableElevatedTerrain&&(this.disableElevatedTerrain=e.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&e.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._checkLoaded(),!t)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),0===i&&delete this.terrain,null===t?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let r=t;const n=null==t.source;if(1===i){if(this.disableElevatedTerrain)return;if("object"==typeof r.source){const t="terrain-dem-src";this.addSource(t,r.source),r=e.d6(r),r=e.h(r,{source:t})}const t=e.h({},r),i={};if(this.terrain&&n){t.source=this.terrain.get().source;const e=this.terrain?this.getFragmentStyle(this.terrain.scope):null;e&&(i.style=e.serialize())}if(this._validate(be,"terrain",t,i))return}if(!this.terrain||this.terrain.scope!==this.scope&&!n||this.terrain&&i!==this.terrain.drapeRenderMode){if(!r)return;this._createTerrain(r,i),this.fire(new e.A("data",{dataType:"style"}))}else{const i=this.terrain,n=i.get();for(const t of Object.keys(e.a5.terrain))!r.hasOwnProperty(t)&&e.a5.terrain[t].default&&(r[t]=e.a5.terrain[t].default);for(const r in t)if(!e.bv(t[r],n[r])){i.set(t,this.options),this.stylesheet.terrain=t;const r=this._getTransitionParameters({duration:0});i.updateTransitions(r),this.fire(new e.A("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(e){const t=this.fog=new Ze(e,this.map.transform,this.scope,this.options);this.stylesheet.fog=t.get();const i=this._getTransitionParameters({duration:0});t.updateTransitions(i)}_createSnow(e){const t=this.snow=new Ye(e,this.map.transform,this.scope,this.options);this.stylesheet.snow=t.get();const i=this._getTransitionParameters({duration:0});t.updateTransitions(i)}_createRain(e){const t=this.rain=new Ke(e,this.map.transform,this.scope,this.options);this.stylesheet.rain=t.get();const i=this._getTransitionParameters({duration:0});t.updateTransitions(i)}_updateMarkersOpacity(){0!==this.map._markers.length&&this.map._requestDomTask(()=>{for(const e of this.map._markers)e._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(t){if(this._checkLoaded(),!t)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const i=this.fog;if(!e.bv(i.get(),t)){i.set(t,this.options),this.stylesheet.fog=i.get();const e=this._getTransitionParameters({duration:0});i.updateTransitions(e)}}else this._createFog(t);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(t){if(this._checkLoaded(),!t)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const i=this.snow;if(!e.bv(i.get(),t)){i.set(t,this.options),this.stylesheet.snow=i.get();const e=this._getTransitionParameters({duration:0});i.updateTransitions(e)}}else this._createSnow(t);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(t){if(this._checkLoaded(),!t)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const i=this.rain;if(!e.bv(i.get(),t)){i.set(t,this.options),this.stylesheet.rain=i.get();const e=this._getTransitionParameters({duration:0});i.updateTransitions(e)}}else this._createRain(t);this._markersNeedUpdate=!0}_reloadColorTheme(){const t=()=>{for(const e in this._layers)this._layers[e].lut=this._styleColorTheme.lut;for(const e in this._sourceCaches)this._sourceCaches[e].clearTiles()},i=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!i)return this._styleColorTheme.lut=null,void t();const r=this._evaluateColorThemeData(i);this._loadColorTheme(r).then(()=>{this.fire(new e.A("colorthemeset")),t()}).catch(t=>{e.w("Couldn't set color theme: ".concat(t))})}setColorTheme(t){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&e.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=t,this._reloadColorTheme()}setImportColorTheme(e,t){const i=this.getFragmentStyle(e);i&&(i._styleColorTheme.colorThemeOverride=t,i._reloadColorTheme())}_getTransitionParameters(t){return{now:e.q.now(),transition:e.h(this.transition,t)}}updateDrapeFirstLayers(){if(!this.terrain)return;const e=[],t=[];for(const i of this._mergedOrder)this.isLayerDraped(this._mergedLayers[i])?e.push(i):t.push(i);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...e),this._drapedFirstOrder.push(...t)}_createTerrain(e,t){const i=this.terrain=new De(e,t,this.scope,this.options,this.map.getWorldview());1===t&&(this.stylesheet.terrain=e),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const r=this._getTransitionParameters({duration:0});i.updateTransitions(r)}_force3DLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"fill-extrusion"===t.type&&this._updateLayer(t)}}_forceSymbolLayerUpdate(){for(const e in this._layers){const t=this._layers[e];"symbol"===t.type&&this._updateLayer(t)}}_validate(t,i,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(o&&!1===o.validate)return!1;const a=e.h({},this.serialize());return xr(this,t.call(ve,e.h({key:i,style:a,value:r,styleSpec:e.a5},n)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.df.off("pluginStateChange",this._rtlTextPluginCallback);for(const e in this._mergedLayers)this._mergedLayers[e].setEventedParent(null);for(const e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles(),this._mergedSourceCaches[e].setEventedParent(null);this.imageManager.removeScope(this.scope),this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.modelManager.destroy(),this.dispatcher.remove())}clearSource(e){const t=this.getSourceCaches(e);for(const i of t)i.clearTiles()}clearSources(){for(const e in this._mergedSourceCaches)this._mergedSourceCaches[e].clearTiles()}reloadSource(e){const t=this.getSourceCaches(e);for(const i of t)i.resume(),i.reload()}reloadSources(){for(const e of this.getSources())e.reload&&e.reload()}reloadModels(){this.modelManager.reloadModels(""),this.forEachFragmentStyle(e=>{e.modelManager.reloadModels(e.scope)})}updateSources(e){let t;this.directionalLight&&(t=cr(this.directionalLight));const i=new Set;for(const r in this._mergedLayers){const e=this._mergedLayers[r];e.hasElevation()&&!i.has(e.source)&&i.add(e.source)}for(const r in this._mergedSourceCaches){const n=this._mergedSourceCaches[r],o=i.has(n._source.id);n.update(e,void 0,void 0,t,o)}}_generateCollisionBoxes(){for(const e in this._sourceCaches){const t=this._sourceCaches[e];t.resume(),t.reload()}}_updatePlacement(t,i,r,n,o,a){let s=arguments.length>6&&void 0!==arguments[6]&&arguments[6],l=!1,c=!1;const u={},h={};for(const d of this._mergedOrder){const t=this._mergedLayers[d];if("symbol"!==t.type)continue;const r=e.C(t.source,t.scope);let n=u[r];if(!n){const e=this.getLayerSourceCache(t);if(!e)continue;const i=e.getRenderableIds(!0).map(t=>e.getTileByID(t));h[r]=i.slice(),n=u[r]=i.sort((e,t)=>t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1))}const o=this.crossTileSymbolIndex.addLayer(t,n,i.center.lng,i.projection);l=l||o}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),s=s||this._layerOrderChanged||0===n,this._layerOrderChanged&&this.fire(new e.A("neworder")),(s||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.q.now(),i.zoom))&&(this.pauseablePlacement=new Ri(i,this._mergedOrder,s,r,n,o,this.placement,this.fog&&i.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,u,h,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.q.now()),c=!0),l&&this.pauseablePlacement.placement.setStale()),c||l){this._buildingIndex.onNewFrame(i.zoom);for(let t=0;t<this._mergedOrder.length;t++){const i=this._mergedLayers[this._mergedOrder[t]];if("symbol"!==i.type)continue;const r=this.isLayerClipped(i);this.placement.updateLayerOpacities(i,u[e.C(i.source,i.scope)],t,r?a:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.q.now())}}_releaseSymbolFadeTiles(){for(const e in this._sourceCaches)this._sourceCaches[e].releaseSymbolFadeTiles()}addImport(t,i){this._checkLoaded();const r=this.stylesheet.imports=this.stylesheet.imports||[];if(-1!==r.findIndex(e=>{let{id:i}=e;return i===t.id}))return void this.fire(new e.z(new Error("Import with id '".concat(t.id,"' already exists in the map's style."))));if(!i)return r.push(t),this._loadImports([t],!0);const n=r.findIndex(e=>{let{id:t}=e;return t===i});return-1===n&&this.fire(new e.z(new Error('Import with id "'.concat(i,'" does not exist on this map.')))),this.stylesheet.imports=r.slice(0,n).concat(t).concat(r.slice(n)),this._loadImports([t],!0,i)}updateImport(t,i){this._checkLoaded();const r=this.stylesheet.imports||[],n=this.getImportIndex(t);return-1===n?this:"string"==typeof i?(this.setImportUrl(t,i),this):(i.url&&i.url!==r[n].url&&this.setImportUrl(t,i.url),e.bv(i.config,r[n].config)||this.setImportConfig(t,i.config,i.data.schema),e.bv(i.data,r[n].data)||this.setImportData(t,i.data),this)}moveImport(e,t){this._checkLoaded();let i=this.stylesheet.imports||[];const r=this.getImportIndex(e);if(-1===r)return this;const n=this.getImportIndex(t);if(-1===n)return this;const o=i[r],a=this.fragments[r];return i=i.filter(t=>{let{id:i}=t;return i!==e}),this.fragments=this.fragments.filter(t=>{let{id:i}=t;return i!==e}),this.stylesheet.imports=i.slice(0,n).concat(o).concat(i.slice(n)),this.fragments=this.fragments.slice(0,n).concat(a).concat(this.fragments.slice(n)),this.mergeLayers(),this}setImportUrl(e,t){this._checkLoaded();const i=this.stylesheet.imports||[],r=this.getImportIndex(e);if(-1===r)return this;i[r].url=t;const n=this.fragments[r];return n.style=this._createFragmentStyle(i[r]),n.style.on("style.import.load",()=>this.mergeAll()),n.style.loadURL(t),this}setImportData(e,t){this._checkLoaded();const i=this.getImportIndex(e),r=this.stylesheet.imports||[];return-1===i?this:t?(this.fragments[i].style.setState(t),this._reloadImports(),this):(delete r[i].data,this.setImportUrl(e,r[i].url))}setImportConfig(e,t,i){this._checkLoaded();const r=this.getImportIndex(e),n=this.stylesheet.imports||[];if(-1===r)return this;t?n[r].config=t:delete n[r].config;const o=this.fragments[r];i&&o.style.stylesheet&&(o.style.stylesheet.schema=i);const a=o.style.stylesheet&&o.style.stylesheet.schema;return o.config=t,o.style.updateConfig(t,a),this.updateConfigDependencies(),this}removeImport(e){this._checkLoaded();const t=this.stylesheet.imports||[],i=this.getImportIndex(e);-1!==i&&(t.splice(i,1),this.fragments[i].style._remove(),this.fragments.splice(i,1),this._reloadImports())}getImportIndex(t){const i=(this.stylesheet.imports||[]).findIndex(e=>e.id===t);return-1===i&&this.fire(new e.z(new Error("Import '".concat(t,"' does not exist in the map's style and cannot be updated.")))),i}getLayer(e){return this._mergedLayers[e]}getSources(){const e=[];for(const t in this._mergedOtherSourceCaches){const i=this._mergedOtherSourceCaches[t];i&&e.push(i.getSource())}return e}getSource(e,t){const i=this.getSourceCache(e,t);return i&&i.getSource()}getLayerSource(e){const t=this.getLayerSourceCache(e);return t&&t.getSource()}getSourceCache(t,i){const r=e.C(t,i);return this._mergedOtherSourceCaches[r]}getLayerSourceCache(t){const i=e.C(t.source,t.scope);return"symbol"===t.type?this._mergedSymbolSourceCaches[i]:this._mergedOtherSourceCaches[i]}getSourceCaches(e){if(null==e)return Object.values(this._mergedSourceCaches);const t=[];return this._mergedOtherSourceCaches[e]&&t.push(this._mergedOtherSourceCaches[e]),this._mergedSymbolSourceCaches[e]&&t.push(this._mergedSymbolSourceCaches[e]),t}updateSourceCaches(){const e=this._changes.getUpdatedSourceCaches();for(const t in e){const i=e[t];"reload"===i?this.reloadSource(t):"clear"===i&&this.clearSource(t)}}updateLayers(e){const t=this._changes.getUpdatedPaintProperties();for(const i of t){const t=this.getLayer(i);t&&t.updateTransitions(e)}}getGlyphsUrl(){return this.stylesheet.glyphs}setGlyphsUrl(e){this.stylesheet.glyphs=e,this.glyphManager.setURL(e,this.scope)}getImages(t,i,r){this.imageManager.getImages(i.images,i.scope,r),this._updateTilesForChangedImages();const n=t=>{if(t){const r=i.images.map(t=>e.I.toString(t));t.setDependencies(i.tileID.key,i.type,r)}},o=e.C(i.source,i.scope);n(this._mergedOtherSourceCaches[o]),n(this._mergedSymbolSourceCaches[o])}rasterizeImages(e,t,i){this.imageManager.rasterizeImages(t,i)}getGlyphs(e,t,i){this.glyphManager.getGlyphs(t.stacks,t.scope,i)}getResource(t,i,r){return e.dg(i,r)}getOwnSourceCache(e){return this._otherSourceCaches[e]}getOwnLayerSourceCache(e){return"symbol"===e.type?this._symbolSourceCaches[e.source]:this._otherSourceCaches[e.source]}getOwnSourceCaches(e){const t=[];return this._otherSourceCaches[e]&&t.push(this._otherSourceCaches[e]),this._symbolSourceCaches[e]&&t.push(this._symbolSourceCaches[e]),t}_isSourceCacheLoaded(t){const i=this.getOwnSourceCaches(t);return 0===i.length?(this.fire(new e.z(new Error("There is no source with ID '".concat(t,"'")))),!1):i.every(e=>e.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(e,t){if(!this._clipLayerPresent&&"fill-extrusion"!==e.type&&"building"!==e.type)return!1;const i="fill-extrusion"===e.type&&"building"===e.sourceLayer,r="building"===e.type;if(e.is3D(!!this.terrain)){if(i||r||t&&"batched-model"===t.type)return!0;if("model"===e.type)return!0}else if("symbol"===e.type)return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(e=>{e.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Tr.getSourceType=function(e){return lt[e]},Tr.setSourceType=function(e,t){lt[e]=t},Tr.registerForPluginStateChange=e.dh;var Mr="\n#define EPSILON 0.0000001\n#define PI 3.141592653589793\n#ifdef RENDER_CUTOFF\nfloat cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}\n#endif",Er="\nout vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}\n#ifdef INDICATOR_CUTOUT\nuniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;\n#endif\nvec4 applyCutout(vec4 color,float height) {\n#ifdef INDICATOR_CUTOUT\nfloat verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);\n#else\nreturn color;\n#endif\n}\n#ifdef DEBUG_WIREFRAME\n#define HANDLE_WIREFRAME_DEBUG \\\nglFragColor=vec4(0.7,0.0,0.0,0.7); \\\ngl_FragDepth=gl_FragCoord.z-0.0001;\n#else\n#define HANDLE_WIREFRAME_DEBUG\n#endif\n#ifdef RENDER_CUTOFF\nuniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;\n#endif\nvec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}",Ir="\n#define EXTENT 8192.0\n#define RAD_TO_DEG 180.0/PI\n#define DEG_TO_RAD PI/180.0\n#define GLOBE_RADIUS EXTENT/PI/2.0\nfloat wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {\n#ifndef PROJECTED_POS_ON_VIEWPORT\nfloat tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;\n#else\nreturn vec3(0.0);\n#endif\n}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(\nunpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}\n#ifdef RENDER_CUTOFF\nuniform vec4 u_cutoff_params;out float v_cutoff_opacity;\n#endif\nconst vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)\n{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}",Ar="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",kr="\n#define ELEVATION_SCALE 7.0\n#define ELEVATION_OFFSET 450.0\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(\nmix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}\n#else\nvec3 elevationVector(vec2 pos) { return vec3(0,0,1); }\n#endif\n#ifdef TERRAIN\nuniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}float prevElevation(vec2 apos) {\n#ifdef TERRAIN_DEM_FLOAT_FORMAT\nvec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;\n#else\nfloat dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);\n#endif\n}\n#ifdef TERRAIN_VERTEX_MORPHING\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nfloat nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}\n#else\nfloat elevation(vec2 apos) {\n#ifdef ZERO_EXAGGERATION\nreturn 0.0;\n#endif\nreturn currentElevation(apos);}\n#endif\nvec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}\n#else\nfloat elevation(vec2 pos) { return 0.0; }\n#endif\n#ifdef DEPTH_OCCLUSION\nuniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;\n#ifdef DEPTH_D24\nfloat unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}\n#else\nhighp float unpack_depth_rgba(vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;\n#ifdef DEPTH_D24\nfloat depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);\n#else\nfloat depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));\n#endif\nreturn coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;\n#ifdef DEPTH_D24\nhighp vec4 depth=vec4(\ntexture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r\n);depth=unpack_depth4(depth);\n#else\nhighp vec4 depth=vec4(\nunpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))\n);\n#endif\nreturn depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {\n#ifdef DEPTH_D24\nhighp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);\n#else\nhighp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));\n#endif\nres+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}\n#else\nbool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }\n#endif//DEPTH_OCCLUSION",Pr="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}\n#endif",Or="#ifdef FOG\nuniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {return color;}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}\n#endif",Rr="#ifdef RASTER_ARRAY\nuniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)\n);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)\n);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}\n#endif",zr="#ifdef RASTER_ARRAY\nuniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}\n#endif\nuniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}",Dr="#ifdef RENDER_SHADOWS\nuniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}\n#endif//RENDER_SHADOWS",Fr="#ifdef RENDER_SHADOWS\nprecision highp sampler2DShadow;uniform sampler2DShadow u_shadowmap_0;uniform sampler2DShadow u_shadowmap_1;uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;float shadow_sample(sampler2DShadow shadowmap,highp vec3 pos,highp float bias) {highp vec3 coord=vec3(pos.xy*0.5+0.5,pos.z*0.5+0.5-bias);return texture(shadowmap,coord);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {light_view_pos0.xyz/=light_view_pos0.w;\n#ifdef SHADOWS_SINGLE_CASCADE\nvec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);\n#else\nlight_view_pos1.xyz/=light_view_pos1.w;vec4 abs_bounds=abs(vec4(light_view_pos0.xy,light_view_pos1.xy));if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {return shadow_sample(u_shadowmap_0,light_view_pos0.xyz,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}float occlusion1=shadow_sample(u_shadowmap_1,light_view_pos1.xyz,bias);return clamp(mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth)),0.0,1.0);\n#endif\n}highp float calculate_shadow_bias(float NDotL) {\n#ifdef NORMAL_OFFSET\nreturn 0.5*u_shadow_bias.x;\n#else\nreturn 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));\n#endif\n}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)\n{highp vec2 biasUV=vec2(\npos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}\n#endif";const Br=[];Zr(Mr,Br),Zr(Ir,Br),Zr(Er,Br);const Vr={"_prelude_fog.vertex.glsl":Pr,"_prelude_terrain.vertex.glsl":kr,"_prelude_shadow.vertex.glsl":Dr,"_prelude_fog.fragment.glsl":Or,"_prelude_shadow.fragment.glsl":Fr,"_prelude_lighting.glsl":"\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}\n#endif//LIGHTING_3D_MODE","_prelude_raster_array.glsl":Rr,"_prelude_raster_particle.glsl":zr},Nr={};Wr("",kr),Wr(Or,Pr),Wr(Fr,Dr),Wr(Rr,""),Wr(zr,"");const Ur=Wr(Er,Ir),jr=Mr;var Hr={background:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec4 u_color;uniform float u_opacity;\n#ifdef LIGHTING_3D_MODE\nin vec4 v_color;\n#endif\nvoid main() {vec4 out_color;\n#ifdef LIGHTING_3D_MODE\nout_color=v_color;\n#else\nout_color=u_color;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_lighting.glsl"\nin vec2 a_pos;uniform mat4 u_matrix;\n#ifdef LIGHTING_3D_MODE\nuniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0,1);\n#ifdef LIGHTING_3D_MODE\nv_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),backgroundPattern:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),building:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec4 v_color;in highp vec3 v_normal;in highp float v_height;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;\n#endif\nuniform lowp float u_opacity;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 apply_lighting_linear(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return color*(ambient_contrib+directional_contrib);}void main() {vec4 color=vec4(v_color.rgb,1.0);vec3 normal=normalize(v_normal);vec3 xy_flipped_normal=vec3(-normal.xy,normal.z);float shadowed_lighting_factor=0.0;\n#ifdef RENDER_SHADOWS\nshadowed_lighting_factor=shadowed_light_factor_normal(xy_flipped_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nshadowed_lighting_factor=dot(normal,u_lighting_directional_dir);\n#endif\ncolor.rgb=apply_lighting_linear(color.rgb,xy_flipped_normal,shadowed_lighting_factor);color.rgb=mix(color.rgb,v_color.rgb,v_color.a);\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos,v_height));\n#endif\ncolor.rgb=linearTosRGB(color.rgb);color*=u_opacity;\n#ifdef RENDER_CUTOFF\ncolor*=v_cutoff_opacity;\n#endif\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color,v_height);\n#endif\nglFragColor=color; \n#ifdef DEBUG_SHOW_NORMALS\ncolor.rgb=xy_flipped_normal*0.5+vec3(0.5,0.5,0.5);color.a=1.0;glFragColor=color;\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec3 a_pos_3f;in vec3 a_normal_3f;out vec4 v_color;out highp vec3 v_normal;out highp float v_height;uniform mat4 u_matrix;uniform mat4 u_normal_matrix;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;\n#endif\nvec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}\n#pragma mapbox: define-attribute-vertex-shader-only highp vec2 part_color_emissive\nvoid main() {\n#pragma mapbox: initialize-attribute-custom highp vec2 part_color_emissive\nvec4 color_emissive=decode_color(part_color_emissive);v_color=vec4(sRGBToLinear(color_emissive.rgb),color_emissive.a);v_normal=vec3(u_normal_matrix*vec4(a_normal_3f,0.0));vec3 pos=a_pos_3f;v_height=pos.z;gl_Position=u_matrix*vec4(pos,1.0);\n#ifdef RENDER_SHADOWS\nvec3 shadow_pos=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset_model(v_normal);shadow_pos+=offset*shadow_normal_offset_multiplier0();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shadow_pos,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(shadow_pos,1.0);v_depth_shadows=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n}'),buildingDepth:Wr("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}","in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;void main() {gl_Position=u_matrix*vec4(a_pos_3f,1.0);v_depth=gl_Position.z/gl_Position.w;}"),circle:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nuniform float u_emissive_strength;void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float antialiase_blur_opacity=smoothstep(0.0,antialiasblur,extrude_length-1.0);float opacity_t=blur_positive==1.0 ? \nsmoothstep(0.0,-antialiased_blur,1.0-extrude_length) : \nsmoothstep(antialiased_blur,0.0,extrude_length-1.0)-antialiase_blur_opacity;float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(\nantialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)\n);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#endif\n#ifdef FOG\nout_color=fog_apply_premultiplied(out_color,v_fog_pos);\n#endif\nglFragColor=out_color*(v_visibility*opacity_t);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define NUM_VISIBILITY_RINGS 2\n#define INV_SQRT2 0.70710678\n#define ELEVATION_BIAS 0.0001\n#define NUM_SAMPLES_PER_RING 16\nuniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\n#ifdef ELEVATED_ROADS\nin float a_circle_z_offset;\n#endif\nout vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {\n#if defined(TERRAIN)\nreturn elevation(pos)+ELEVATION_BIAS;\n#else\nreturn 0.0;\n#endif\n}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);\n#ifdef PITCH_WITH_MAP\n#ifdef PROJECTION_GLOBE_VIEW\nreturn u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );\n#else\nreturn u_matrix*( world_center+vec4(sample_offset,0,0) );\n#endif\n#else\nreturn projected_center+vec4(sample_offset,0,0);\n#endif\n}float get_sample_step() {\n#ifdef PITCH_WITH_MAP\nreturn 2.0*PI/float(NUM_SAMPLES_PER_RING);\n#else\nreturn PI/float(NUM_SAMPLES_PER_RING);\n#endif\n}void main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);\n#else \nsurface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);\n#endif\n#ifdef ELEVATED_ROADS\nworld_center.z+=a_circle_z_offset+ELEVATION_BIAS;\n#endif\nvec4 projected_center=u_matrix*world_center;float view_scale=0.0;\n#ifdef PITCH_WITH_MAP\n#ifdef SCALE_WITH_MAP\nview_scale=1.0;\n#else\nview_scale=projected_center.w/u_camera_to_center_distance;\n#endif\n#else\n#ifdef SCALE_WITH_MAP\nview_scale=u_camera_to_center_distance;\n#else\nview_scale=projected_center.w;\n#endif\n#endif\ngl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;\n#ifdef TERRAIN\nfloat step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;\n#ifdef PITCH_WITH_MAP\nfloat cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;\n#else\nocclusion_world_center=world_center;occlusion_projected_center=projected_center;\n#endif\nfor(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);\n#else\nvisibility=1.0;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nvisibility=1.0;\n#endif\nv_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);\n#ifdef FOG\nv_fog_pos=fog_position(world_center.xyz);\n#endif\n}'),clippingMask:Wr("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Wr('#include "_prelude_fog.fragment.glsl"\nuniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);\n#ifdef FOG\nif (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;\n#endif\nout vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#else\npos=vec3(tilePos+extrude,elevation(tilePos));\n#endif\ngl_Position=u_matrix*vec4(pos,1);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),heatmapTexture:Wr("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(0.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}","in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:Wr("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",'#include "_prelude_terrain.vertex.glsl"\nin vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}'),collisionCircle:Wr("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}","in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(\nmix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(\n0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Wr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",'#include "_prelude_terrain.vertex.glsl"\nin vec2 a_pos;\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;\n#endif\nout vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\ngl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);\n#else\ngl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);\n#endif\n}'),elevatedStructuresDepth:Wr("void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=vec4(0.);\n#endif\n}","in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform float u_depth_bias;void main() {gl_Position=u_matrix*vec4(a_pos,a_height,1);gl_Position.z=gl_Position.z+u_depth_bias;}"),elevatedStructuresDepthReconstruct:Wr("#ifdef DEPTH_RECONSTRUCTION\nin float v_height;\n#endif\nvoid main() {\n#ifdef DEPTH_RECONSTRUCTION\nif (v_height >=0.0)\ndiscard;\n#endif\nglFragColor=vec4(1.0,0.0,0.0,1.0);}","in vec2 a_pos;in float a_height;uniform mat4 u_matrix;uniform vec3 u_camera_pos;uniform highp float u_depth_bias;uniform lowp float u_height_scale;uniform lowp float u_reset_depth;\n#ifdef DEPTH_RECONSTRUCTION\nout float v_height;\n#endif\nvoid main() {vec3 vpos=vec3(a_pos,a_height*u_height_scale);\n#ifdef DEPTH_RECONSTRUCTION\nif (u_camera_pos.z > vpos.z) {vpos-=(u_camera_pos-vpos)*(vpos.z/(u_camera_pos.z-vpos.z));}v_height=a_height;\n#endif\ngl_Position=u_matrix*vec4(vpos,1);gl_Position.z=u_reset_depth==1.0 ? gl_Position.w : gl_Position.z+u_depth_bias;}"),elevatedStructures:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nin vec3 v_normal;in float v_height;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth;\n#endif\nvec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}vec3 compute_view_dependent_emissive_color(float ndotl,float emissive_strength,vec3 color)\n{color=sRGBToLinear(color);color=color*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);color=linearTosRGB(color.rgb);return color;}uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 structure_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 structure_color\nvec3 color=structure_color.xyz;\n#ifdef LIGHTING_3D_MODE\nvec3 normal=normalize(v_normal);vec3 transformed_normal=vec3(-normal.xy,normal.z);float ndotl=calculate_NdotL(transformed_normal);float emissive_strength=u_emissive_strength;emissive_strength=0.0;vec3 emissive_color=compute_view_dependent_emissive_color(ndotl,emissive_strength,color.xyz);\n#ifdef RENDER_SHADOWS\nfloat shadowed_lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth);color.rgb=apply_lighting(color.rgb,transformed_normal,shadowed_lighting_factor);\n#else\ncolor=apply_lighting(color,transformed_normal);\n#endif\ncolor=mix(color,emissive_color,emissive_strength);if (v_height < 0.0) {float penetration=max(v_height+7.5,0.0);float occlusion=1.0-1.0/PI*acos(1.0-penetration/4.0);color=color*(1.0-pow(occlusion,2.0)*0.3);}\n#endif\n#ifdef FOG\ncolor=fog_apply(color,v_fog_pos);\n#endif\nvec4 out_color=vec4(color,1.0);\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color,v_height);\n#endif\nglFragColor=out_color;HANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec2 a_pos;in float a_height;in vec3 a_pos_normal_3;uniform mat4 u_matrix;out vec3 v_normal;out float v_height;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth;\n#endif\n#pragma mapbox: define highp vec4 structure_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 structure_color\nv_normal=a_pos_normal_3/16384.0;v_height=a_height;vec3 pos=vec3(a_pos,a_height);gl_Position=u_matrix*vec4(pos,1);\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=pos;vec3 shd_pos1=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(vec3(-v_normal.xy,v_normal.z));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fill:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nuniform float u_emissive_strength;\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\n#ifdef ELEVATED_ROADS\nin highp float v_road_z_offset;\n#endif\n#ifdef INDICATOR_CUTOUT\nin highp float v_z_offset;\n#endif\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nvec4 out_color=color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#ifdef ELEVATED_ROADS\nout_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);\n#else\nout_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nout_color*=opacity;\n#ifdef INDICATOR_CUTOUT\nif (v_z_offset >=0.0) {out_color=applyCutout(out_color,v_z_offset);}\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec2 a_pos;\n#ifdef ELEVATED_ROADS\nin float a_road_z_offset;out highp float v_road_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\n#ifdef INDICATOR_CUTOUT\nout highp float v_z_offset;\n#endif\nuniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp float z_offset\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp float z_offset\n#ifdef ELEVATED_ROADS\nz_offset+=a_road_z_offset;v_road_z_offset=z_offset;\n#endif\nfloat hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#ifdef INDICATOR_CUTOUT\nv_z_offset=z_offset;\n#endif\n}'),fillOutline:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nin highp vec2 v_pos;uniform float u_emissive_strength;\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec2 a_pos;\n#ifdef ELEVATED_ROADS\nin float a_road_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\nuniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp float z_offset\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp float z_offset\n#ifdef ELEVATED_ROADS\nz_offset+=a_road_z_offset;\n#endif\nfloat hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillOutlinePattern:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FILL_PATTERN_TRANSITION\nuniform float u_pattern_transition;\n#endif\nuniform float u_emissive_strength;\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\nin highp vec2 v_pos;in highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef FILL_PATTERN_TRANSITION\nvec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;\n#ifdef ELEVATED_ROADS\nin float a_road_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\nout highp vec2 v_pos;out highp vec2 v_pos_world;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define highp float z_offset\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize highp float z_offset\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;\n#ifdef ELEVATED_ROADS\nz_offset+=a_road_z_offset;\n#endif\nfloat hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillPattern:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FILL_PATTERN_TRANSITION\nuniform float u_pattern_transition;\n#endif\nin highp vec2 v_pos;uniform float u_emissive_strength;\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\n#ifdef ELEVATED_ROADS\nin highp float v_road_z_offset;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef FILL_PATTERN_TRANSITION\nvec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#ifdef ELEVATED_ROADS\nout_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);\n#else\nout_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nglFragColor=out_color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;\n#ifdef ELEVATED_ROADS\nin float a_road_z_offset;out highp float v_road_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\nout highp vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define lowp float pixel_ratio\n#pragma mapbox: define highp float z_offset\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern\n#pragma mapbox: initialize lowp float pixel_ratio\n#pragma mapbox: initialize highp float z_offset\n#ifdef FILL_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;\n#ifdef ELEVATED_ROADS\nz_offset+=a_road_z_offset;v_road_z_offset=z_offset;\n#endif\nfloat hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),fillExtrusion:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nin vec4 v_color;in vec4 v_flat;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;\n#endif\nuniform lowp float u_opacity;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec2 v_ao;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nin vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nin highp vec3 v_normal;\n#endif\nuniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nin float v_flood_radius;in float v_has_floodlight;\n#endif\nin float v_height;\n#pragma mapbox: define highp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp float emissive_strength\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nvec3 normal=normalize(v_normal);\n#endif\nfloat z;vec4 color=v_color;\n#ifdef ZERO_ROOF_RADIUS\nz=float(normal.z > 0.00001);\n#ifdef LIGHTING_3D_MODE\nnormal=mix(normal,vec3(0.0,0.0,1.0),z);\n#else\ncolor=mix(v_color,v_roof_color,z);\n#endif\n#endif\nfloat h=max(0.0,v_height);float ao_shade=1.0;\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;\n#ifdef ZERO_ROOF_RADIUS\nconcave*=(1.0-z);\n#endif\nfloat x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\ncolor.rgb*=mix(ao_shade,1.0,v_has_floodlight);\n#else\ncolor.rgb*=ao_shade;\n#endif\n#else\ncolor.rgb*=ao_shade;\n#endif\n#endif\n#ifdef LIGHTING_3D_MODE\nfloat flood_radiance=0.0;\n#ifdef FLOOD_LIGHT\nflood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;\n#endif\n#ifdef RENDER_SHADOWS\n#ifdef FLOOD_LIGHT\nfloat ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);\n#else\nfloat shadowed_lighting_factor;\n#ifdef RENDER_CUTOFF\nshadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}\n#else\nshadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);\n#endif\ncolor.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);\n#endif\n#else\ncolor.rgb=apply_lighting(color.rgb,normal);\n#ifdef FLOOD_LIGHT\ncolor.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);\n#endif\n#endif\ncolor.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));\n#endif\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color,h);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef RENDER_WALL_MODE\nin vec3 a_join_normal_inside;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\n#ifdef TERRAIN\nuniform int u_height_type;uniform int u_base_type;\n#endif\nuniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nout vec4 v_roof_color;\n#endif\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nout highp vec3 v_normal;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec2 v_ao;\n#endif\n#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)\nout float v_flood_radius;out float v_has_floodlight;\n#endif\nout float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define highp float flood_light_wall_radius\n#pragma mapbox: define highp float line_width\n#pragma mapbox: define highp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize highp float flood_light_wall_radius\n#pragma mapbox: initialize highp float line_width\n#pragma mapbox: initialize highp float emissive_strength\nbase*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));\n#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)\nv_normal=normal;\n#endif\nbase=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;\n#ifdef TERRAIN\nbool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);\n#else\nh=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\nfloat cutoff=1.0;vec3 scaled_pos=pos;\n#ifdef RENDER_CUTOFF\nvec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));\n#ifdef RENDER_WALL_MODE\nvec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;\n#endif\ngl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;\n#ifdef RENDER_SHADOWS\nvec3 shd_pos0=pos;vec3 shd_pos1=pos;\n#ifdef NORMAL_OFFSET\nvec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);\n#endif\nfloat NdotL=0.0;float colorvalue=0.0;\n#ifndef LIGHTING_3D_MODE\ncolorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#endif\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\n#ifdef FLOOD_LIGHT\nfloat is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;\n#endif\nv_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);\n#else\nv_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;\n#endif\n#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)\nfloat roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n}'),fillExtrusionDepth:Wr("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;\n#ifdef TERRAIN\nuniform int u_height_type;uniform int u_base_type;\n#endif\nin vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef RENDER_WALL_MODE\nin vec3 a_join_normal_inside;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp float line_width\n#pragma mapbox: define highp vec4 color\nout highp float v_depth;void main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp float line_width\n#pragma mapbox: initialize highp vec4 color\nbase*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nvec3 pos;\n#ifdef TERRAIN\nbool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);\n#else\npos=vec3(pos_nx.xy,t > 0.0 ? height : base);\n#endif\n#ifdef RENDER_WALL_MODE\nvec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}'),fillExtrusionPattern:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform vec2 u_texsize;uniform sampler2D u_image;\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\nuniform float u_pattern_transition;\n#endif\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;in vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nin vec3 v_normal;\n#endif\nin highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define mediump vec4 pattern\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define highp float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\n#pragma mapbox: initialize highp float pixel_ratio\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\nvec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl/u_texsize,pattern_b_br/u_texsize,imagecoord);vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);out_color=out_color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;\n#else\nout_color=out_color*v_lighting;\n#endif\n#ifdef FAUX_AO\nfloat intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color,height);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_lighting.glsl"\nuniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;\n#ifdef RENDER_WALL_MODE\nin vec3 a_join_normal_inside;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;\n#endif\n#ifdef TERRAIN\nuniform int u_height_type;uniform int u_base_type;\n#endif\nout highp vec2 v_pos;out vec4 v_lighting;\n#ifdef FAUX_AO\nuniform lowp vec2 u_ao;out vec3 v_ao;\n#endif\n#ifdef LIGHTING_3D_MODE\nout vec3 v_normal;\n#endif\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump vec4 pattern\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define highp float pixel_ratio\n#pragma mapbox: define highp float line_width\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef FILL_EXTRUSION_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\n#pragma mapbox: initialize highp float pixel_ratio\n#pragma mapbox: initialize highp float line_width\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);\n#if defined(HAS_CENTROID) || defined(TERRAIN)\ncentroid_pos=a_centroid_pos;\n#endif\nfloat ele=0.0;float h=z;vec3 p;float c_ele;\n#ifdef TERRAIN\nbool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);\n#else\np=vec3(pos_nx.xy,z);\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nfloat lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);\n#endif\n#ifdef RENDER_WALL_MODE\nvec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;\n#endif\nfloat hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0\n? pos_nx.xy\n: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;\n#ifdef LIGHTING_3D_MODE\nNdotL=calculate_NdotL(normal);\n#else\nNdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);\n#endif\nif (normal.y !=0.0) {float r=0.84;\n#ifndef LIGHTING_3D_MODE\nr=mix(0.7,0.98,1.0-u_lightintensity);\n#endif\nNdotL*=(\n(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}\n#ifdef FAUX_AO\nfloat concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;\n#ifdef TERRAIN\ntop_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);\n#endif\nv_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);\n#ifdef PROJECTION_GLOBE_VIEW\ntop_height+=u_height_lift;\n#endif\ngl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;\n#endif\n#ifdef LIGHTING_3D_MODE\nv_normal=normal;\n#else\nv_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(p);\n#endif\n}'),groundShadow:Wr('#include "_prelude_shadow.fragment.glsl"\nprecision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\nvoid main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);\n#ifdef RENDER_CUTOFF\nshadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));\n#endif\n#ifdef FOG\nshadow=mix(shadow,vec3(1.0),v_fog_opacity);\n#endif\n#ifdef INDICATOR_CUTOUT\nshadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);\n#endif\nglFragColor=vec4(shadow,1.0);}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\nvoid main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);\n#endif\n}'),fillExtrusionGroundEffect:Wr("uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;\n#ifdef SDF_SUBPASS\nin highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}\n#ifdef FOG\nin highp float v_fog;\n#endif\n#endif\nvoid main() {\n#ifdef CLEAR_SUBPASS\nvec4 color=vec4(1.0);\n#ifdef CLEAR_FROM_TEXTURE\ncolor=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));\n#endif\nglFragColor=color;\n#else\n#ifdef SDF_SUBPASS\nhighp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;\n#ifdef FOG\nfog=v_fog;\n#endif\n#ifdef RENDER_CUTOFF\nfog*=v_cutoff_opacity;\n#endif\nglFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));\n#else\nvec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);\n#ifdef OVERDRAW_INSPECTOR\ncolor=vec4(1.0);\n#endif\nglFragColor=color;\n#endif\nHANDLE_WIREFRAME_DEBUG;\n#endif\n}",'#include "_prelude_fog.vertex.glsl"\nin highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;\n#ifdef SDF_SUBPASS\nout highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;\n#ifdef FOG\nout highp float v_fog;\n#endif\n#endif\nuniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;\n#pragma mapbox: define highp float flood_light_ground_radius\nconst float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {\n#pragma mapbox: initialize highp float flood_light_ground_radius\nvec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;\n#ifdef SDF_SUBPASS\nv_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);\n#ifdef FOG\nv_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);\n#endif\n#endif\nfloat hidden_by_landmark=0.0;\n#ifdef HAS_CENTROID\nhidden_by_landmark=a_hidden_by_landmark;\n#endif\nfloat isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n}'),hillshadePrepare:Wr("precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(\n(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)\n)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(\nderiv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef LIGHTING_3D_MODE\nglFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);\n#endif\n#ifdef FOG\nglFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n}'),line:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nuniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec3 v_uv;\n#ifdef ELEVATED_ROADS\nin highp float v_road_z_offset;\n#endif\n#ifdef RENDER_LINE_DASH\nuniform sampler2D u_dash_image;in vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform sampler2D u_gradient_image;\n#endif\n#ifdef INDICATOR_CUTOUT\nin highp float v_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\nfloat luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nfloat linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);\n#ifdef RENDER_LINE_DASH\nfloat sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);\n#endif\nhighp vec4 out_color;\n#ifdef RENDER_LINE_GRADIENT\nout_color=texture(u_gradient_image,v_uv.xy);\n#else\nout_color=color;\n#endif\nfloat trim_alpha=1.0;\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}\n#endif\nif (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}\n#ifdef RENDER_LINE_BORDER\nfloat edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}\n#endif\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#ifdef ELEVATED_ROADS\nout_color.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);\n#else\nout_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#endif\n#ifdef FOG\nout_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));\n#endif\nout_color*=(alpha*opacity);\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color,v_z_offset);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define EXTRUDE_SCALE 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)\nin vec3 a_z_offset_width;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nin highp vec3 a_packed;\n#endif\n#ifdef RENDER_LINE_DASH\nin float a_linesofar;\n#endif\nuniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;\n#ifdef ELEVATED\nuniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {\n#ifdef ELEVATION_REFERENCE_SEA\nreturn 0.0;\n#else\nreturn elevation(apos);\n#endif\n}\n#endif\nout vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec3 v_uv;\n#ifdef ELEVATED_ROADS\nout highp float v_road_z_offset;\n#endif\n#ifdef RENDER_LINE_DASH\nuniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;\n#endif\n#ifdef RENDER_LINE_GRADIENT\nuniform float u_image_height;\n#endif\n#ifdef INDICATOR_CUTOUT\nout highp float v_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 dash\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float border_width\n#pragma mapbox: define lowp vec4 border_color\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize lowp vec4 dash\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float border_width\n#pragma mapbox: initialize lowp vec4 border_color\nfloat a_z_offset;\n#if defined(ELEVATED) || defined(ELEVATED_ROADS)\na_z_offset=a_z_offset_width.x;\n#endif\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;\n#ifdef VARIABLE_LINE_WIDTH\nfloat left=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);halfwidth=(u_width_scale*(left==1.0 ? a_z_offset_width.y : a_z_offset_width.z))/2.0;\n#else\nhalfwidth=(u_width_scale*width)/2.0;\n#endif\noffset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;\n#ifdef ELEVATED_ROADS\nv_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;\n#else\n#ifdef ELEVATED\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;\n#ifdef CROSS_SLOPE_VERTICAL\nfloat top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);\n#else\n#ifdef CROSS_SLOPE_HORIZONTAL\nfloat ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;\n#else\nfloat ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;\n#endif\n#endif\ngl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);\n#else\ngl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);\n#endif\n#endif\n#ifdef ELEVATED_ROADS\n#ifdef RENDER_SHADOWS\nvec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;\n#ifdef NORMAL_OFFSET\nvec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat epsilon=0.0001;float extrude_length_without_perspective=max(length(dist),epsilon);float extrude_length_with_perspective=max(length(projected_extrude_xy/gl_Position.w*u_units_to_pixels),epsilon);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));\n#else\nv_gamma_scale=1.0;\n#endif\n#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)\nhighp float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float line_progress=a_packed[2];\n#ifdef RENDER_LINE_GRADIENT\nhighp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec3(a_uv_x,a_split_index*texel_height-half_texel_height,line_progress);\n#else\nv_uv=vec3(a_uv_x,0.0,line_progress);\n#endif\n#endif\n#ifdef RENDER_LINE_DASH\nfloat scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);\n#endif\nv_width2=vec2(outset,inset);\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n#ifdef INDICATOR_CUTOUT\nv_z_offset=a_z_offset;\n#endif\n}'),linePattern:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\nuniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;\n#ifdef LINE_PATTERN_TRANSITION\nuniform float u_pattern_transition;\n#endif\nin vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec3 v_uv;\n#endif\n#ifdef ELEVATED_ROADS\nin highp float v_road_z_offset;\n#endif\n#ifdef LINE_JOIN_NONE\nin vec2 v_pattern_data;\n#endif\n#ifdef INDICATOR_CUTOUT\nin highp float v_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\nuniform float u_emissive_strength;\n#pragma mapbox: define mediump vec4 pattern\n#ifdef LINE_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define mediump float pixel_ratio\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef LINE_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\n#pragma mapbox: initialize mediump float pixel_ratio\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\nvec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);\n#ifdef LINE_PATTERN_TRANSITION\nvec2 pattern_b_tl=pattern_b.xy;vec2 pattern_b_br=pattern_b.zw;highp vec2 pos_b=mix(pattern_b_tl*texel_size-texel_size,pattern_b_br*texel_size+texel_size,vec2(x,y));vec4 color_b=textureLodCustom(u_image,pos_b,lod_pos);color=color*(1.0-u_pattern_transition)+color_b*u_pattern_transition;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=v_uv[2];if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}\n#endif\n#ifdef LINE_JOIN_NONE\nhighp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}\n#endif\n#ifdef LIGHTING_3D_MODE\ncolor=apply_lighting_with_emission_ground(color,u_emissive_strength);\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);\n#ifdef ELEVATED_ROADS\ncolor.rgb*=mix(v_road_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);\n#else\ncolor.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);\n#endif\n#endif\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}\n#ifdef INDICATOR_CUTOUT\ncolor=applyCutout(color,v_z_offset);\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;\n#if defined(ELEVATED) || defined(ELEVATED_ROADS)\nin vec3 a_z_offset_width;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nin highp vec3 a_packed;\n#endif\nin highp float a_linesofar;\n#ifdef LINE_JOIN_NONE\nin highp vec3 a_pattern_data;out vec2 v_pattern_data;\n#endif\n#ifdef INDICATOR_CUTOUT\nout highp float v_z_offset;\n#endif\nuniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;\n#ifdef ELEVATED\nuniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {\n#ifdef ELEVATION_REFERENCE_SEA\nreturn 0.0;\n#else\nreturn elevation(apos);\n#endif\n}\n#endif\nout vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef RENDER_LINE_TRIM_OFFSET\nout highp vec3 v_uv;\n#endif\n#ifdef ELEVATED_ROADS\nout highp float v_road_z_offset;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\n#pragma mapbox: define mediump float blur\n#pragma mapbox: define mediump float opacity\n#pragma mapbox: define mediump float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define mediump float floorwidth\n#pragma mapbox: define mediump vec4 pattern\n#ifdef LINE_PATTERN_TRANSITION\n#pragma mapbox: define mediump vec4 pattern_b\n#endif\n#pragma mapbox: define mediump float pixel_ratio\nvoid main() {\n#pragma mapbox: initialize mediump float blur\n#pragma mapbox: initialize mediump float opacity\n#pragma mapbox: initialize mediump float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize mediump float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern\n#ifdef LINE_PATTERN_TRANSITION\n#pragma mapbox: initialize mediump vec4 pattern_b\n#endif\n#pragma mapbox: initialize mediump float pixel_ratio\nfloat a_z_offset;\n#if defined(ELEVATED) || defined(ELEVATED_ROADS)\na_z_offset=a_z_offset_width.x;\n#endif\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;\n#ifdef ELEVATED_ROADS\nv_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset,1.0)+projected_extrude;\n#else\n#ifdef ELEVATED\nvec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;\n#ifdef CROSS_SLOPE_VERTICAL\nfloat top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);\n#else\n#ifdef CROSS_SLOPE_HORIZONTAL\nfloat ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;\n#else\nfloat ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;\n#endif\n#endif\ngl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);\n#else\ngl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);\n#endif\n#endif\n#ifdef ELEVATED_ROADS\n#ifdef RENDER_SHADOWS\nvec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;\n#ifdef NORMAL_OFFSET\nvec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#endif\n#ifndef RENDER_TO_TEXTURE\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));\n#else\nv_gamma_scale=1.0;\n#endif\n#ifdef RENDER_LINE_TRIM_OFFSET\nhighp float a_uv_x=a_packed[0];highp float line_progress=a_packed[2];v_uv=vec3(a_uv_x,0.0,line_progress);\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);\n#ifdef LINE_JOIN_NONE\nv_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(pos);\n#endif\n#ifdef INDICATOR_CUTOUT\nv_z_offset=a_z_offset;\n#endif\n}'),raster:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\n#include "_prelude_raster_array.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nin float v_split_fade;\n#endif\nuniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;\n#ifndef RASTER_ARRAY\nuniform highp sampler2D u_image0;uniform sampler2D u_image1;\n#endif\n#ifdef RASTER_COLOR\nuniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;\n#endif\nvoid main() {vec4 color0,color1,color;vec2 value;\n#ifdef RASTER_COLOR\n#ifdef RASTER_ARRAY\n#ifdef RASTER_ARRAY_LINEAR\nvalue=mix(\nraTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#else\nvalue=mix(\nraTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t\n);\n#endif\nif (value.y > 0.0) value.x/=value.y;\n#else\ncolor=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);\n#endif\ncolor=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;\n#else\ncolor0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);\n#endif\ncolor.a*=u_opacity;\n#ifdef GLOBE_POLES\ncolor.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);\n#endif\nvec3 rgb=color.rgb;rgb=vec3(\ndot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef PROJECTION_GLOBE_VIEW\nglFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));\n#endif\n#ifdef RENDER_CUTOFF\nglFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);\n#endif\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;in vec2 a_texture_pos;\n#endif\nout vec2 v_pos0;out vec2 v_pos1;out float v_depth;\n#ifdef PROJECTION_GLOBE_VIEW\nout float v_split_fade;\n#endif\nvoid main() {vec2 uv;\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);\n#endif\n#else\nfloat w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    \nv_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\ngl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;\n#ifdef RENDER_CUTOFF\nv_depth=gl_Position.z;\n#endif\n}'),rasterParticle:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;\n#endif\n#ifdef FOG\nhighp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));\n#endif\nglFragColor=vec4(out_color*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\nuniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;\n#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8\nin vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n#else\nuv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);\n#ifdef FOG\nv_fog_pos=fog_position(a_pos);\n#endif\n#endif\nv_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}'),rasterParticleDraw:Wr("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",'#include "_prelude_raster_particle.glsl"\nin float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(\nmod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}'),rasterParticleTexture:Wr("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:Wr('#include "_prelude_raster_particle.glsl"\nuniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(\nlinearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)\n);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}',"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:Wr('#include "_prelude_lighting.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;\n#ifdef ICON_TRANSITION\nuniform float u_icon_transition;\n#endif\n#ifdef COLOR_ADJUSTMENT\nuniform mat4 u_color_adj_mat;\n#endif\n#ifdef INDICATOR_CUTOUT\nin highp float v_z_offset;\n#else\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nin highp float v_z_offset;\n#endif\n#endif\n#endif\nin vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nin vec2 v_tex_b;\n#endif\nin float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;\n#ifdef RENDER_TEXT_AND_SYMBOL\nin float is_sdf;in vec2 v_tex_a_icon;\n#endif\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nuniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;\n#endif\n#endif\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\nvec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];\n#ifdef RENDER_TEXT_AND_SYMBOL\nif (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nreturn;}\n#endif\n#ifdef RENDER_SDF\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;\n#else\n#ifdef ICON_TRANSITION\nvec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);\n#else\nout_color=texture(u_texture,v_tex_a);\n#endif\n#ifdef COLOR_ADJUSTMENT\nout_color=u_color_adj_mat*out_color;\n#endif\n#endif\nout_color*=opacity*fade_opacity;\n#ifdef LIGHTING_3D_MODE\nout_color=apply_lighting_with_emission_ground(out_color,emissive_strength);\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nfloat light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(v_z_offset !=0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);\n#endif\n#endif\n#endif\n#ifdef INDICATOR_CUTOUT\nout_color=applyCutout(out_color,v_z_offset);\n#endif\nglFragColor=out_color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_terrain.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;\n#ifdef Z_OFFSET\nin float a_auto_z_offset;\n#endif\n#ifdef PROJECTION_GLOBE_VIEW\nin vec3 a_globe_anchor;in vec3 a_globe_normal;\n#endif\n#ifdef ICON_TRANSITION\nin vec2 a_texb;\n#endif\n#ifdef OCCLUSION_QUERIES\nin float a_occlusion_query_opacity;\n#endif\n#ifdef ELEVATED_ROADS\nin vec3 a_x_axis;in vec3 a_y_axis;uniform float u_normal_scale;\n#endif\n#ifdef INDICATOR_CUTOUT\nout highp float v_z_offset;\n#else\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nout highp float v_z_offset;\n#endif\n#endif\n#endif\nuniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;\n#ifdef PROJECTION_GLOBE_VIEW\nuniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;\n#endif\nout vec2 v_tex_a;\n#ifdef ICON_TRANSITION\nout vec2 v_tex_b;\n#endif\nout float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;\n#ifdef RENDER_TEXT_AND_SYMBOL\nout float is_sdf;out vec2 v_tex_a_icon;\n#endif\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;\n#endif\n#endif\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n#pragma mapbox: define lowp float emissive_strength\n#pragma mapbox: define lowp float occlusion_opacity\n#pragma mapbox: define lowp float z_offset\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\n#pragma mapbox: initialize lowp float emissive_strength\n#pragma mapbox: initialize lowp float occlusion_opacity\n#pragma mapbox: initialize lowp float z_offset\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);\n#ifdef Z_OFFSET\ne+=a_auto_z_offset;\n#endif\nvec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;\n#ifdef PROJECTION_GLOBE_VIEW\nmercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;\n#else\nworld_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(\n0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;\n#else\noffsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;\n#endif\nvec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;\n#ifdef PROJECTION_GLOBE_VIEW\n#ifdef PROJECTED_POS_ON_VIEWPORT\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xyz+h,1.0);\n#else\nvec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz,mercator_pos,u_zoom_transition)+h;projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);    \n#endif\n#else\nprojected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);\n#endif\nhighp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);\n#ifdef TERRAIN\n#ifdef PITCH_WITH_MAP_TERRAIN\nvec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);\n#endif\n#endif\n#ifdef Z_OFFSET\nz+=u_pitch_with_map ? a_auto_z_offset+z_offset : 0.0;\n#else\nz+=u_pitch_with_map ? z_offset : 0.0;\n#endif\nfloat occlusion_fade=globe_occlusion_fade;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float out_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));\n#ifdef DEPTH_OCCLUSION\nfloat depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;\n#endif\n#ifdef OCCLUSION_QUERIES\nfloat occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;\n#endif\nfloat alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);vec3 pos;\n#ifdef PROJECTION_GLOBE_VIEW\nvec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;\n#else\n#ifdef ELEVATED_ROADS\nvec3 xAxis=vec3(a_x_axis.xy,a_x_axis.z*u_normal_scale);vec3 yAxis=vec3(a_y_axis.xy,a_y_axis.z*u_normal_scale);pos=projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y;\n#else\npos=vec3(projected_pos.xy/projected_pos.w+offset,z);\n#endif\n#endif\ngl_Position=mix(u_coord_matrix*vec4(pos,1.0),AWAY,hidden);float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;\n#ifdef RENDER_TEXT_AND_SYMBOL\nis_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;\n#endif\n#ifdef ICON_TRANSITION\nv_tex_b=a_texb/u_texsize;\n#endif\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nvec4 shd_pos=u_inv_matrix*vec4(pos,1.0);vec3 shd_pos0=shd_pos.xyz;vec3 shd_pos1=shd_pos.xyz;\n#ifdef NORMAL_OFFSET\nvec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();\n#endif\nv_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;\n#endif\n#endif\n#ifdef INDICATOR_CUTOUT\nv_z_offset=e;\n#else\n#ifdef Z_OFFSET\n#ifdef RENDER_SHADOWS\nv_z_offset=e;\n#endif\n#endif\n#endif\n}'),terrainRaster:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;in vec2 v_pos0;\n#ifdef FOG\nin float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nin vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;\n#endif\nuniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;\n#ifdef LIGHTING_3D_MODE\nconst vec3 normal=vec3(0.0,0.0,1.0);\n#ifdef RENDER_SHADOWS\nfloat cutoffOpacity=1.0;\n#ifdef RENDER_CUTOFF\ncutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);\n#endif\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nvec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;\n#else\nfloat lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));\n#endif\n#else\nfloat lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;\n#endif\n#endif\n#else\ncolor=image_color;\n#endif\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#else\ncolor=fog_dither(fog_apply_from_vert(color,v_fog_opacity));\n#endif\n#endif\nglFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;\n#ifdef FOG\nout float v_fog_opacity;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;\n#endif\nvoid main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);\n#ifdef FOG\n#ifdef ZERO_EXAGGERATION\nv_fog_pos=fog_position(decodedPos);\n#else\nv_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);\n#endif\n}'),terrainDepth:Wr("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",'#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}'),skybox:Wr('#include "_prelude_fog.fragment.glsl"\nin lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(\ncos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;\n#ifdef FOG\nsky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);\n#endif\nsky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',Ar),skyboxGradient:Wr('#include "_prelude_fog.fragment.glsl"\nin highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));\n#ifdef FOG\ncolor.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;\n#endif\ncolor*=u_opacity;glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\n}',Ar),skyboxCapture:Wr("\nin highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;\n#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)\n#define BETA_M                  vec3(21e-6,21e-6,21e-6)\n#define MIE_G                   0.76\n#define DENSITY_HEIGHT_SCALE_R  8000.0\n#define DENSITY_HEIGHT_SCALE_M  1200.0\n#define PLANET_RADIUS           6360e3\n#define ATMOSPHERE_RADIUS       6420e3\n#define SAMPLE_STEPS            10\n#define DENSITY_STEPS           4\nfloat ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}","in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;\n#ifndef FOG\nuniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;\n#endif\nvoid main() {vec4 color;\n#ifdef CUSTOM_ANTIALIASING\nhighp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;highp float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);highp float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\nraster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(clamp(raster.rgb,vec3(0),vec3(1))*antialias,antialias);\n#else\nraster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=vec4(raster.rgb*antialias,raster.a*antialias);\n#endif\n#else\ncolor=texture(u_image0,v_pos0);\n#ifdef LIGHTING_3D_MODE\n#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS\ncolor=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;\n#else\ncolor=apply_lighting_ground(color);\n#endif\n#endif\n#endif\n#ifdef FOG\ncolor=fog_dither(fog_apply_premultiplied(color,v_fog_pos));\n#endif\ncolor*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_terrain.vertex.glsl"\nuniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;\n#ifdef GLOBE_POLES\nin vec3 a_globe_pos;in vec2 a_uv;\n#else\nin vec2 a_pos;\n#endif\nout vec2 v_pos0;void main() {\n#ifdef GLOBE_POLES\nvec3 globe_pos=a_globe_pos;vec2 uv=a_uv;\n#else\nfloat tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);\n#endif\nv_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;\n#ifdef GLOBE_POLES\nvec3 up_vector=globe_derived_up_vector;\n#else\nvec3 up_vector=elevationVector(tile_pos);\n#endif\nfloat height=elevation(tile_pos);globe_pos+=up_vector*height;\n#ifndef GLOBE_POLES\nglobe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;\n#endif\n#ifdef GLOBE_POLES\nvec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);\n#else\nvec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);\n#endif\ngl_Position=u_proj_matrix*interpolated_pos;\n#ifdef FOG\nv_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);\n#endif\n}'),globeAtmosphere:Wr('#include "_prelude_fog.fragment.glsl"\nuniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;\n#ifdef PROJECTION_GLOBE_VIEW\nglobe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {\n#ifdef ALPHA_PASS\nglFragColor=vec4(0,0,0,0);return;\n#else\n#ifdef NATIVE\nglFragColor=vec4(1,1,1,1);\n#else\nglFragColor=vec4(0,0,0,1);\n#endif\nreturn;\n#endif\n}\n#endif\nhighp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?\n0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;\n#ifdef PROJECTION_GLOBE_VIEW\nhighp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?\nPI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);\n#else\nhorizon_angle=horizon_angle_mercator;\n#endif\nhorizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;\n#ifdef ALPHA_PASS\nfloat a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);\n#else\nvec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;glFragColor=vec4(c*t,t);\n#endif\n}',"in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(\nmix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(\nmix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}"),model:Wr('#include "_prelude_fog.fragment.glsl"\n#include "_prelude_shadow.fragment.glsl"\n#include "_prelude_lighting.glsl"\nuniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;\n#ifdef RENDER_SHADOWS\nin highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;\n#endif\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nuniform vec4 u_occlusionTextureTransform;\n#endif\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#ifdef HAS_ATTRIBUTE_a_pbr\nin lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;\n#endif\n#ifdef HAS_TEXTURE_u_baseColorTexture\nuniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;\n#endif\n#ifdef HAS_TEXTURE_u_metallicRoughnessTexture\nuniform sampler2D u_metallicRoughnessTexture;\n#endif\n#ifdef HAS_TEXTURE_u_occlusionTexture\nuniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;\n#endif\n#ifdef HAS_TEXTURE_u_normalTexture\nuniform sampler2D u_normalTexture;\n#endif\n#ifdef HAS_TEXTURE_u_emissionTexture\nuniform sampler2D u_emissionTexture;\n#endif\n#ifdef APPLY_LUT_ON_GPU\nuniform highp sampler3D u_lutTexture;\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nin highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;\n#ifdef DEPTH_D24\nhighp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}\n#else\nhighp float unpack_depth_rgba(highp vec4 rgba_depth)\n{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}\n#endif\nbool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;\n#ifdef DEPTH_D24\nhighp float depth=unpack_depth(texture(u_depthTexture,coord).r);\n#else\nhighp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));\n#endif\nreturn v_depth > depth+0.0005;}\n#endif\n#define saturate(_x) clamp(_x,0.,1.)\nvec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)\n{\n#ifdef LIGHTING_3D_MODE\nvec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));\n#endif\nreturn apply_lighting(albedo,transformed_normal,lighting_factor);\n#else\nvec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;\n#endif\n}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;\n#ifdef HAS_ATTRIBUTE_a_color_3f\nalbedo*=vec4(color_3f,1.0);\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#else\n#ifdef HAS_ATTRIBUTE_a_color_4f\nalbedo*=color_4f;\n#endif\n#endif\n#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)\nvec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}\n#ifdef UNPREMULT_TEXTURE_IN_SHADER\nif(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;\n#endif\nif(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}\n#endif\nvec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);\n#ifdef APPLY_LUT_ON_GPU\ncolor=applyLUT(u_lutTexture,color);\n#endif\nreturn color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {\n#ifdef HAS_TEXTURE_u_normalTexture\nhighp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;\n#else\nreturn mat3(1.0);\n#endif\n}highp vec3 getNormal(){highp vec3 n;\n#ifdef HAS_ATTRIBUTE_a_normal_3f\nn=normalize(normal_3f);\n#else\nhighp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;\n#endif\n#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nvec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);\n#endif\nreturn n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;\n#ifdef HAS_ATTRIBUTE_a_pbr\nmat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;\n#endif\n#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) \nvec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;\n#endif\nconst float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)\n{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)\n{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)\n{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)\n{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)\n{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)\n{\n#ifdef LIGHTING_3D_MODE\nreturn mat.diffuseColor;\n#else\nreturn mat.diffuseColor/PI;\n#endif\n}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)\n{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)\n{vec3 env_light=vec3(0.65,0.65,0.65);\n#ifdef LIGHTING_3D_MODE\nfloat ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;\n#endif\nvec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)\n{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;\n#ifdef RENDER_SHADOWS\nlighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);\n#else\nlighting_factor=NdotL;\n#endif\nvec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;\n#if !defined(LIGHTING_3D_MODE)\nconst vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);\n#endif\ncolor*=intensityFactor;return color;}void main() {\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nif (isOccluded()) {discard;}\n#endif\nvec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;\n#ifdef LIGHTING_3D_MODE\nlightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;\n#endif\nvec4 finalColor;\n#ifdef DIFFUSE_SHADED\nvec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);\n#ifdef HAS_TEXTURE_u_occlusionTexture\nfloat ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;\n#endif\nfinalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;\n#else\nMaterial mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;\n#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\n#ifdef OCCLUSION_TEXTURE_TRANSFORM\nvec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;\n#else\nvec2 uv=uv_2f;\n#endif\nao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;\n#endif\nvec4 emissive=u_emissiveFactor;\n#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)\nemissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);\n#endif\n#ifdef APPLY_LUT_ON_GPU\nfloat emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;\n#endif\ncolor+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;\n#ifdef HAS_ATTRIBUTE_a_pbr\nfloat resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;\n#ifdef APPLY_LUT_ON_GPU\ncolor_mix=applyLUT(u_lutTexture,color_mix);\n#endif\ncolor=mix(color,color_mix,min(1.0,resEmission));\n#ifdef HAS_ATTRIBUTE_a_color_4f\nfloat distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);\n#endif\n#endif\nvec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);\n#endif\n#ifdef FOG\nfinalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));\n#endif\n#ifdef RENDER_CUTOFF\nfinalColor*=v_cutoff_opacity;\n#endif\n#ifdef INDICATOR_CUTOUT\nfinalColor=applyCutout(finalColor,v_position_height.w);\n#endif\nglFragColor=finalColor;\n#ifdef OVERDRAW_INSPECTOR\nglFragColor=vec4(1.0);\n#endif\nHANDLE_WIREFRAME_DEBUG;}','#include "_prelude_fog.vertex.glsl"\n#include "_prelude_shadow.vertex.glsl"\nin vec3 a_pos_3f;\n#pragma mapbox: define-attribute highp vec3 normal_3f\n#pragma mapbox: define-attribute highp vec2 uv_2f\n#pragma mapbox: define-attribute highp vec3 color_3f\n#pragma mapbox: define-attribute highp vec4 color_4f\n#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr\n#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength\nuniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_normal_matrix;\n#endif\n#ifdef RENDER_SHADOWS\nuniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;\n#endif\nout vec4 v_position_height;out lowp vec4 v_color_mix;\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nout highp float v_depth;\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\nout lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;\n#endif\nvec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {\n#pragma mapbox: initialize-attribute highp vec3 normal_3f\n#pragma mapbox: initialize-attribute highp vec2 uv_2f\n#pragma mapbox: initialize-attribute highp vec3 color_3f\n#pragma mapbox: initialize-attribute highp vec4 color_4f\n#pragma mapbox: initialize-attribute-custom highp vec4 pbr\n#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength\nhighp mat4 normal_matrix;\n#ifdef INSTANCED_ARRAYS\nnormal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\nnormal_matrix=u_normal_matrix;\n#endif\nvec3 local_pos;mat3 rs;\n#ifdef MODEL_POSITION_ON_GPU\nvec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;\n#else\nlocal_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);\n#endif\nv_position_height.w=a_pos_3f.z;\n#ifdef HAS_ATTRIBUTE_a_pbr\nvec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;\n#endif\n#ifdef FOG\nv_fog_pos=fog_position(local_pos);\n#endif\n#ifdef RENDER_CUTOFF\nv_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);\n#endif\n#ifdef TERRAIN_FRAGMENT_OCCLUSION\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nfloat x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);\n#else\nnormal_3f=vec3(normal_matrix*vec4(normal_3f,0));\n#endif\n#endif\n#ifdef HAS_ATTRIBUTE_a_pbr\n#ifdef HAS_ATTRIBUTE_a_color_4f\nv_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);\n#endif\n#endif\n#ifdef RENDER_SHADOWS\nvec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);\n#ifdef NORMAL_OFFSET\n#ifdef HAS_ATTRIBUTE_a_normal_3f\n#ifdef MODEL_POSITION_ON_GPU\nvec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#else\nvec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();\n#endif\n#endif\n#endif\nv_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;\n#endif\n}'),modelDepth:Wr("in highp float v_depth;void main() {\n#ifndef DEPTH_TEXTURE\nglFragColor=pack_depth(v_depth);\n#endif\n}","in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;\n#ifdef MODEL_POSITION_ON_GPU\n#ifdef INSTANCED_ARRAYS\nin vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;\n#else\nuniform highp mat4 u_instance;\n#endif\nuniform highp mat4 u_node_matrix;\n#endif\nvoid main() {\n#ifdef MODEL_POSITION_ON_GPU\nhighp mat4 instance;\n#ifdef INSTANCED_ARRAYS\ninstance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);\n#else\ninstance=u_instance;\n#endif\nvec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);\n#else\ngl_Position=u_matrix*vec4(a_pos_3f,1);\n#endif\nv_depth=gl_Position.z/gl_Position.w;}"),stars:Wr("in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)\n{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}","\nin vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}"),snowParticle:Wr("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}","\nin highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; \nuniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; \nuniform float u_horizontalOscillationRate; \nuniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+\nlocalY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}"),rainParticle:Wr("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}","\nin highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; \nuniform float u_velocity; \nuniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; \npos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+\nlocalY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}"),vignette:Wr("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:Wr("uniform vec4 u_color;void main() {glFragColor=u_color;}",'#include "_prelude_terrain.vertex.glsl"\nin highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;\n#ifdef TERRAIN\nfloat e=elevation(world_pos.xy);world_pos.z+=e;\n#endif\nvec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}')};function Zr(e,t){const i=e.replace(/\s*\/\/[^\n]*\n/g,"\n").split("\n");for(let r of i)if(r=r.trim(),"#"===r[0]&&r.includes("if")&&!r.includes("endif")){r=r.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const e=r.split(" ");for(const i of e)t.includes(i)||t.push(i)}}function Wr(e,t){const i=/#include\s+"([^"]+)"/g,r=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let n=t.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);n&&(n=n.map(e=>{const t=e.split(" ");return t[t.length-1]}),n=[...new Set(n)]);const o={},a=[],s=[];if(e=e.replace(i,(e,t)=>(s.push(t),"")),(t=t.replace(i,(e,t)=>(a.push(t),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let l=[...Br];Zr(e,l),Zr(t,l);for(const c of[...a,...s])Vr[c]||console.error("Undefined include: ".concat(c)),Nr[c]||(Nr[c]=[],Zr(Vr[c],Nr[c])),l=[...l,...Nr[c]];return{fragmentSource:e=e.replace(r,(e,t,i,r,n)=>(o[n]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nin ").concat(i," ").concat(r," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"initialize"===t?"\n#ifdef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"define-attribute"===t?"\n#ifdef HAS_ATTRIBUTE_a_".concat(n,"\n    in ").concat(i," ").concat(r," ").concat(n,";\n#endif\n"):"initialize-attribute"===t?"":void 0)),vertexSource:t=t.replace(r,(e,t,i,r,n)=>{const a="float"===r?"vec2":r,s=n.match(/color/)?"color":a;return"define-attribute-vertex-shader-only"===t?"\n#ifdef HAS_ATTRIBUTE_a_".concat(n,"\nin ").concat(i," ").concat(r," a_").concat(n,";\n#endif\n"):o[n]?"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nin ").concat(i," ").concat(a," a_").concat(n,";\nout ").concat(i," ").concat(r," ").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"initialize"===t?"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(n," = unpack_mix_").concat(s,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"define-attribute"===t?"\n#ifdef HAS_ATTRIBUTE_a_".concat(n,"\n    in ").concat(i," ").concat(r," a_").concat(n,";\n    out ").concat(i," ").concat(r," ").concat(n,";\n#endif\n"):"initialize-attribute"===t?"\n#ifdef HAS_ATTRIBUTE_a_".concat(n,"\n    ").concat(n," = a_").concat(n,";\n#endif\n"):void 0:"define"===t?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\nuniform lowp float u_").concat(n,"_t;\nin ").concat(i," ").concat(a," a_").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"define-instanced"===t?"mat4"===s?"\n#ifdef INSTANCED_ARRAYS\nin vec4 a_".concat(n,"0;\nin vec4 a_").concat(n,"1;\nin vec4 a_").concat(n,"2;\nin vec4 a_").concat(n,"3;\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"\n#ifdef INSTANCED_ARRAYS\nin ".concat(i," ").concat(a," a_").concat(n,";\n#else\nuniform ").concat(i," ").concat(r," u_").concat(n,";\n#endif\n"):"initialize-attribute-custom"===t?"\n#ifdef HAS_ATTRIBUTE_a_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = a_").concat(n,";\n#endif\n"):"vec4"===s?"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = a_").concat(n,";\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n"):"\n#ifndef HAS_UNIFORM_u_".concat(n,"\n    ").concat(i," ").concat(r," ").concat(n," = unpack_mix_").concat(s,"(a_").concat(n,", u_").concat(n,"_t);\n#else\n    ").concat(i," ").concat(r," ").concat(n," = u_").concat(n,";\n#endif\n")}),staticAttributes:n,usedDefines:l,vertexIncludes:a,fragmentIncludes:s}}class Gr{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(e,t,i,r,n,o,a,s){this.context=e;let l=this.boundPaintVertexBuffers.length!==r.length;for(let u=0;!l&&u<r.length;u++)this.boundPaintVertexBuffers[u]!==r[u]&&(l=!0);let c=this.boundDynamicVertexBuffers.length!==a.length;for(let u=0;!c&&u<a.length;u++)this.boundDynamicVertexBuffers[u]!==a[u]&&(c=!0);if(!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==i||l||c||this.boundIndexBuffer!==n||this.boundVertexOffset!==o)this.freshBind(t,i,r,n,o,a,s);else{e.bindVertexArrayOES.set(this.vao);for(const i of a)i&&(i.bind(),s&&i.instanceCount&&i.setVertexAttribDivisor(e.gl,t,s));n&&n.dynamicDraw&&n.bind()}}freshBind(e,t,i,r,n,o,a){const s=e.numAttributes,l=this.context,c=l.gl;this.vao&&this.destroy(),this.vao=l.gl.createVertexArray(),l.bindVertexArrayOES.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=i,this.boundIndexBuffer=r,this.boundVertexOffset=n,this.boundDynamicVertexBuffers=o,t.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,n);for(const u of i)u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,n);for(const u of o)u&&(u.enableAttributes(c,e),u.bind(),u.setVertexAttribPointers(c,e,n),a&&u.instanceCount&&u.setVertexAttribDivisor(c,e,a));r&&r.bind(),l.currentNumAttributes=s}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function qr(t,i){const r=Math.pow(2,i.canonical.z),n=i.canonical.y;return[new e.ac(0,n/r).toLngLat().lat,new e.ac(0,(n+1)/r).toLngLat().lat]}function Xr(t,i,r,n,o,a,s){const l=t.context,c=l.gl,u=r.hillshadeFBO;if(!u)return;t.prepareDrawTile();const h=t.isTileAffectedByFog(i),d=t.getOrCreateProgram("hillshade",{overrideFog:h});l.activeTexture.set(c.TEXTURE0),c.bindTexture(c.TEXTURE_2D,u.colorAttachment.get());const p=((t,i,r,n)=>{const o=r.paint.get("hillshade-shadow-color"),a="none"===r.paint.get("hillshade-shadow-color-use-theme").constantOr("default"),s=r.paint.get("hillshade-highlight-color"),l="none"===r.paint.get("hillshade-highlight-color-use-theme").constantOr("default"),c=r.paint.get("hillshade-accent-color"),u="none"===r.paint.get("hillshade-accent-color-use-theme").constantOr("default"),h=r.paint.get("hillshade-emissive-strength");let d=e.al(r.paint.get("hillshade-illumination-direction"));if("viewport"===r.paint.get("hillshade-illumination-anchor"))d-=t.transform.angle;else if(t.style&&t.style.enable3dLights()&&t.style.directionalLight){const i=t.style.directionalLight.properties.get("direction"),r=e.cR(i.x,i.y,i.z);d=e.al(r[1])}const p=!t.options.moving;return{u_matrix:n||t.transform.calculateProjMatrix(i.tileID.toUnwrapped(),p),u_image:0,u_latrange:qr(0,i.tileID),u_light:[r.paint.get("hillshade-exaggeration"),d],u_shadow:o.toPremultipliedRenderColor(a?null:r.lut),u_highlight:s.toPremultipliedRenderColor(l?null:r.lut),u_emissive_strength:h,u_accent:c.toPremultipliedRenderColor(u?null:r.lut)}})(t,r,n,t.terrain?i.projMatrix:null);t.uploadCommonUniforms(l,d,i.toUnwrapped());const{tileBoundsBuffer:f,tileBoundsIndexBuffer:m,tileBoundsSegments:g}=t.getTileBoundsBuffers(r);d.draw(t,c.TRIANGLES,o,a,s,qi.disabled,p,n.id,f,m,g)}function Yr(t,i,r){if(!i.needsDEMTextureUpload)return;const n=t.context,o=n.gl;n.pixelStoreUnpackPremultiplyAlpha.set(!1),i.demTexture=i.demTexture||t.getTileTexture(r.stride);const a=r.getPixels();i.demTexture?i.demTexture.update(a,{premultiply:!1}):i.demTexture=new e.T(n,a,o.R32F,{premultiply:!1}),i.needsDEMTextureUpload=!1}function Kr(t,i,r){const n=t.context,o=n.gl;if(!i.dem)return;const a=i.dem;if(n.activeTexture.set(o.TEXTURE1),Yr(t,i,a),!i.demTexture)return;i.demTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE);const s=a.dim;n.activeTexture.set(o.TEXTURE0);let l=i.hillshadeFBO;if(!l){const t=new e.T(n,{width:s,height:s,data:null},o.RGBA8);t.bind(o.LINEAR,o.CLAMP_TO_EDGE),l=i.hillshadeFBO=n.createFramebuffer(s,s,!0,"renderbuffer"),l.colorAttachment.set(t.texture)}n.bindFramebuffer.set(l.framebuffer),n.viewport.set([0,0,s,s]);const{tileBoundsBuffer:c,tileBoundsIndexBuffer:u,tileBoundsSegments:h}=t.getMercatorTileBoundsBuffers(),d=[];t.linearFloatFilteringSupported()&&d.push("TERRAIN_DEM_FLOAT_FORMAT"),t.getOrCreateProgram("hillshadePrepare",{defines:d}).draw(t,o.TRIANGLES,ji.disabled,Zi.disabled,Ui.unblended,qi.disabled,((t,i)=>{const r=i.stride,n=e.bz();return e.c5(n,0,e.aj,-8192,0,0,1),e.bo(n,n,[0,-8192,0]),{u_matrix:n,u_image:1,u_dimension:[r,r],u_zoom:t.overscaledZ}})(i.tileID,a),r.id,c,u,h),i.needsHillshadePrepare=!1}class Jr{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Qr extends Jr{getDefault(){return e.am.transparent.toNonPremultipliedRenderColor(null)}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class $r extends Jr{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class en extends Jr{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class tn extends Jr{getDefault(){return[!0,!0,!0,!0]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class rn extends Jr{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class nn extends Jr{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class on extends Jr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const t=this.current;(e.func!==t.func||e.ref!==t.ref||e.mask!==t.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class an extends Jr{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class sn extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e,this.dirty=!1}}class ln extends Jr{getDefault(){return[0,1]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class cn extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e,this.dirty=!1}}class un extends Jr{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class hn extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e,this.dirty=!1}}class dn extends Jr{getDefault(){const e=this.gl;return[e.ONE,e.ZERO,e.ONE,e.ZERO]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class pn extends Jr{getDefault(){return e.am.transparent.toNonPremultipliedRenderColor(null)}set(e){const t=this.current;(e.r!==t.r||e.g!==t.g||e.b!==t.b||e.a!==t.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class fn extends Jr{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(e,e),this.current=e,this.dirty=!1)}}class mn extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;e?t.enable(t.CULL_FACE):t.disable(t.CULL_FACE),this.current=e,this.dirty=!1}}class gn extends Jr{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class yn extends Jr{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}let _n=class extends Jr{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}};class vn extends Jr{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class xn extends Jr{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const t=this.current;(e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Cn extends Jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class wn extends Jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class bn extends Jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Sn extends Jr{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Ln extends Jr{getDefault(){return null}set(e){const t=this.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Tn extends Jr{getDefault(){return null}set(e){this.gl&&(e!==this.current||this.dirty)&&(this.gl.bindVertexArray(e),this.current=e,this.dirty=!1)}}class Mn extends Jr{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class En extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class In extends Jr{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const t=this.gl;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class An extends Jr{constructor(e,t){super(e),this.context=e,this.parent=t}getDefault(){return null}}class kn extends An{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Pn extends An{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferRenderbuffer(t.FRAMEBUFFER,this.attachment(),t.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class On extends An{attachment(){return this.gl.DEPTH_ATTACHMENT}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const t=this.gl;t.framebufferTexture2D(t.FRAMEBUFFER,this.attachment(),t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Rn extends Pn{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const zn=(e,t,i)=>({u_matrix:e,u_image0:0,u_skirt_height:t,u_ground_shadow_factor:i}),Dn=(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m)=>({u_proj_matrix:Float32Array.from(e),u_globe_matrix:t,u_normalize_matrix:Float32Array.from(r),u_merc_matrix:i,u_zoom_transition:n,u_merc_center:o,u_image0:0,u_frustum_tl:a,u_frustum_tr:s,u_frustum_br:l,u_frustum_bl:c,u_globe_pos:u,u_globe_radius:h,u_viewport:d,u_grid_matrix:m?Float32Array.from(m):new Float32Array(9),u_skirt_height:p,u_far_z_cutoff:f});function Fn(e,t){return null!=e&&null!=t&&!(!e.hasData()||!t.hasData())&&null!=e.demTexture&&null!=t.demTexture&&e.tileID.key!==t.tileID.key}const Bn=new class{constructor(){this.operations={}}newMorphing(e,t,i,r,n){if(e in this.operations){const t=this.operations[e];t.to.tileID.key!==i.tileID.key&&(t.queued=i)}else this.operations[e]={startTime:r,phase:0,duration:n,from:t,to:i,queued:null}}getMorphValuesForProxy(e){if(!(e in this.operations))return null;const t=this.operations[e];return{from:t.from,to:t.to,phase:t.phase}}update(e){for(const t in this.operations){const i=this.operations[t];for(i.phase=(e-i.startTime)/i.duration;i.phase>=1||!this._validOp(i);)if(!this._nextOp(i,e)){delete this.operations[t];break}}}_nextOp(e,t){return!!e.queued&&(e.from=e.to,e.to=e.queued,e.queued=null,e.phase=0,e.startTime=t,!0)}_validOp(e){return e.from.hasData()&&e.to.hasData()}},Vn={0:null,1:"TERRAIN_VERTEX_MORPHING"};function Nn(e,t,i){if(0===t)return 0;const r=t<1&&514===i?.25/t:1;return 6*Math.pow(1.5,22-e)*Math.max(t,1)*r}function Un(e,t){const i=1<<e.z;return!t&&(0===e.x||e.x===i-1)||0===e.y||e.y===i-1}const jn=e=>({u_matrix:e});function Hn(t,i,r,n,o){if(o>0){const a=e.q.now(),s=(a-t.timeAdded)/o,l=i?(a-i.timeAdded)/o:-1,c=r.getSource(),u=n.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),h=!i||Math.abs(i.tileID.overscaledZ-u)>Math.abs(t.tileID.overscaledZ-u),d=h&&t.refreshedUponExpiration?1:e.ay(h?s:1-l,0,1);return t.refreshedUponExpiration&&s>=1&&(t.refreshedUponExpiration=!1),i?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}class Zn extends It{constructor(t){const i={type:"raster-dem",maxzoom:t.transform.maxZoom},r=new e.D(e.c$(),null),n=ct("mock-dem",i,r,t.style);super("mock-dem",n,!1),n.setEventedParent(this),this._sourceLoaded=!0}_loadTile(e,t){e.state="loaded",t(null)}}class Wn extends It{constructor(t){const i=ct("proxy",{type:"geojson",maxzoom:t.transform.maxZoom},new e.D(e.c$(),null),t.style);super("proxy",i,!1),i.setEventedParent(this),this.map=this.getSource().map=t,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(e,t,i){if(e.freezeTileCoverage)return;this.transform=e;const r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((t,i)=>{if(t[i.key]="",!this._tiles[i.key]){const t=new Lt(i,this._source.tileSize*i.overscaleFactor(),e.tileZoom,void 0,void 0,this._source.worldview);t.state="loaded",this._tiles[i.key]=t}return t},{});for(const n in this._tiles)n in r||(this.freeFBO(n),this._tiles[n].unloadVectorData(),delete this._tiles[n])}freeFBO(e){const t=this.proxyCachedFBO[e];if(void 0!==t){const i=Object.values(t);this.renderCachePool.push(...i),delete this.proxyCachedFBO[e]}}deallocRenderCache(){this.renderCache.forEach(e=>e.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class Gn extends e.aM{constructor(e,t,i){super(e.overscaledZ,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y),this.proxyTileKey=t,this.projMatrix=i}}class qn extends e.dt{constructor(t,i){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},t.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),t.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),t.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=t,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[r,n,o]=function(){const t=new e.ba,i=new e.a_,r=131;t.reserve(17161),i.reserve(33800);const n=e.aj/128,o=e.aj+n/2,a=o+n;for(let l=-64;l<a;l+=n)for(let i=-64;i<a;i+=n){const r=i<0||i>o||l<0||l>o?24575:0,n=e.ay(Math.round(i),0,e.aj),a=e.ay(Math.round(l),0,e.aj);t.emplaceBack(n+r,a)}const s=(e,t)=>{const n=t*r+e;i.emplaceBack(n+1,n,n+r),i.emplaceBack(n+r,n+r+1,n+1)};for(let e=1;e<129;e++)for(let t=1;t<129;t++)s(t,e);return[0,129].forEach(e=>{for(let t=0;t<130;t++)s(t,e),s(e,t)}),[t,i,32768]}(),a=t.context;this.gridBuffer=a.createVertexBuffer(r,e.bc.members),this.gridIndexBuffer=a.createIndexBuffer(n),this.gridSegments=e.bd.simpleSegment(0,0,r.length,n.length),this.gridNoSkirtSegments=e.bd.simpleSegment(0,0,r.length,o),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Wn(i.map),this.orthoMatrix=e.bz(),e.c5(this.orthoMatrix,"globe"===this.painter.transform.projection.name?.015:0,e.aj,0,e.aj,0,1);const s=a.gl;this._overlapStencilMode=new Zi({func:s.GEQUAL,mask:255},0,255,s.KEEP,s.KEEP,s.REPLACE),this._previousZoom=t.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=i,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Zn(i.map),this._pendingGroundEffectLayers=[]}set style(e){e.on("data",this._onStyleDataEvent.bind(this)),this._style=e,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(t,i,r){if(t&&t.terrain){this._style!==t&&(this.style=t,this._evaluationZoom=void 0);const n=t.terrain.properties,o=0===t.terrain.drapeRenderMode,a=t.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=e.q.now();const s=t.terrain&&t.terrain.scope,l=n.get("source"),c=o?this._mockSourceCache:t.getSourceCache(l,s);if(!c)return void e.w("Couldn't find terrain source \"".concat(l,'".'));if(this.sourceCache=c,this._attenuationRange=t.terrain.getAttenuationRange(),this._exaggeration=a?this.calculateExaggeration(i):n.get("exaggeration"),!i.projection.requiresDraping&&a&&0===this._exaggeration)return void this._disable();this.enabled=!0;const u=()=>{this.sourceCache.used&&e.w("Raster DEM source '".concat(this.sourceCache.id,"' is used both for terrain and as layer source.\nThis leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source."));const t=this.getScaledDemTileSize();this.sourceCache.update(i,t,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,u(),this._initializing=!0),u(),i.updateElevation(!0,r),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(i),this._emptyDEMTextureDirty=!0,this._previousZoom=i.zoom}else this._disable()}calculateExaggeration(t){if(this._attenuationRange&&t.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(t.zoom);const i=this._previousCameraAltitude,r=t.getFreeCameraOptions().position.z/t.pixelsPerMeter*t.worldSize;this._previousCameraAltitude=r;const n=null!=i?r-i:Number.MAX_VALUE;if(Math.abs(n)<2)return this._exaggeration;const o=t.zoom,a=this._style.terrain;if(!this._previousUpdateTimestamp)return a.getExaggeration(o);let s=o-this._previousZoom;const l=this._previousUpdateTimestamp;let c=o;null!=this._evaluationZoom&&(c=this._evaluationZoom,Math.abs(o-c)>.5&&(s=.5*(o-c+s)),s*n<0&&(c+=s)),this._evaluationZoom=c;const u=a.getExaggeration(c),h=u===a.getExaggeration(Math.max(0,c-.1));if(h&&Math.abs(u-this._exaggeration)<.01)return u;let d=Math.min(.1,.00375*(this._updateTimestamp-l));return(h||u<.1||Math.abs(s)<1e-4)&&(d=Math.min(.2,4*d)),e.ai(this._exaggeration,u,d)}resetTileLookupCache(e){this._findCoveringTileCache[e]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(e){e.coord&&"source"===e.dataType?this._clearRenderCacheForTile(e.sourceCacheId,e.coord):"style"===e.dataType&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const e in this._style._mergedSourceCaches)this._style._mergedSourceCaches[e].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(e=>e.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const e=2*this.proxySourceCache.getSource().tileSize;return[e,e]}set useVertexMorphing(e){this._useVertexMorphing=e}updateTileBinding(t){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const i=this.proxySourceCache,r=this.painter.transform;this._initializing&&(this._initializing=0===r._centerAltitude&&-1===this.getAtPointOrZero(e.ac.fromLngLat(r.center),-1),this._emptyDEMTextureDirty=!this._initializing);const n=this.proxyCoords=i.getIds().map(e=>{const t=i.getTileByID(e).tileID;return t.projMatrix=r.calculateProjMatrix(t.toUnwrapped()),t});!function(t,i){const r=i.transform.pointCoordinate(i.transform.getCameraPoint()),n=new e.P(r.x,r.y);t.sort((t,i)=>{if(i.overscaledZ-t.overscaledZ)return i.overscaledZ-t.overscaledZ;const r=new e.P(t.canonical.x+(1<<t.canonical.z)*t.wrap,t.canonical.y),o=new e.P(i.canonical.x+(1<<i.canonical.z)*i.wrap,i.canonical.y),a=n.mult(1<<t.canonical.z);return a.x-=.5,a.y-=.5,a.distSqr(r)-a.distSqr(o)})}(n,this.painter);const o=this.proxyToSource||{};this.proxyToSource={},n.forEach(e=>{this.proxyToSource[e.key]={}}),this.terrainTileForTile={};const a=this._style._mergedSourceCaches;for(const e in a){const i=a[e];if(!i.used)continue;if(i!==this.sourceCache&&this.resetTileLookupCache(i.id),this._setupProxiedCoordsForOrtho(i,t[e],o),i.usedForTerrain)continue;const r=t[e];i.getSource().reparseOverscaled&&this._assignTerrainTiles(r)}this.proxiedCoords[i.id]=n.map(e=>new Gn(e,e.key,this.orthoMatrix)),this._assignTerrainTiles(n),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(o),this.renderingToTexture=!1;const s={};this._visibleDemTiles=[];for(const e of this.proxyCoords){const t=this.terrainTileForTile[e.key];if(!t)continue;const i=t.tileID.key;i in s||(this._visibleDemTiles.push(t),s[i]=i)}}_assignTerrainTiles(e){this._initializing||e.forEach(e=>{if(this.terrainTileForTile[e.key])return;const t=this._findTileCoveringTileID(e,this.sourceCache);t&&(this.terrainTileForTile[e.key]=t)})}_prepareDEMTextures(){const e=this.painter.context,t=e.gl;for(const i in this.terrainTileForTile){const r=this.terrainTileForTile[i],n=r.dem;!n||r.demTexture&&!r.needsDEMTextureUpload||(e.activeTexture.set(t.TEXTURE1),Yr(this.painter,r,n))}}_prepareDemTileUniforms(e,t,i,r){if(!t||null==t.demTexture)return!1;const n=e.tileID.canonical,o=Math.pow(2,t.tileID.canonical.z-n.z),a=r||"";return i["u_dem_tl".concat(a)]=[n.x*o%1,n.y*o%1],i["u_dem_scale".concat(a)]=o,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let e=0;const t=this._visibleDemTiles.reduce((t,i)=>{if(!i.dem)return t;const r=i.dem.tree.minimums[0];return r>0&&e++,t+r},0);return e?t/e:0}_updateEmptyDEMTexture(){const t=this.painter.context,i=t.gl;t.activeTexture.set(i.TEXTURE2);const r=this._getLoadedAreaMinimum(),n=new e.du({width:1,height:1},new Float32Array([r]));this._emptyDEMTextureDirty=!1;let o=this._emptyDEMTexture;return o?o.update(n,{premultiply:!1}):o=this._emptyDEMTexture=new e.T(t,n,i.R32F,{premultiply:!1}),o}setupElevationDraw(t,i,r){const n=this.painter.context,o=n.gl,a={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};a.u_exaggeration=this.exaggeration();let s=null,l=null,c=1;if(r&&r.morphing&&this._useVertexMorphing){const e=r.morphing.srcDemTile,i=r.morphing.dstDemTile;c=r.morphing.phase,e&&i&&(this._prepareDemTileUniforms(t,e,a,"_prev")&&(l=e),this._prepareDemTileUniforms(t,i,a)&&(s=i))}const u=e=>e&&e.demTexture&&this.painter.linearFloatFilteringSupported()?o.LINEAR:o.NEAREST;let h=null;var d;if(this.enabled?l&&s?(h=s.demTexture,n.activeTexture.set(o.TEXTURE4),l.demTexture.bind(u(l),o.CLAMP_TO_EDGE),a.u_dem_lerp=c):(s=this.terrainTileForTile[t.tileID.key],h=this._prepareDemTileUniforms(t,s,a)?s.demTexture:this.emptyDEMTexture):h=this.emptyDEMTexture,n.activeTexture.set(o.TEXTURE2),h&&(a.u_dem_size=1===(d=h).size[0]?1:d.size[0]-2,h.bind(u(s),o.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(r&&r.useDepthForOcclusion,i,a),r&&r.useMeterToDem&&s){const t=(1<<s.tileID.canonical.z)*e.c6(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;a.u_meter_to_dem=t}if(r&&r.labelPlaneMatrixInv&&(a.u_label_plane_matrix_inv=r.labelPlaneMatrixInv),i.setTerrainUniformValues(n,a),"globe"===this.painter.transform.projection.name){const e=this.globeUniformValues(this.painter.transform,t.tileID.canonical,r&&r.useDenormalizedUpVectorScale);i.setGlobeUniformValues(n,e)}}globeUniformValues(t,i,r){const n=t.projection;return{u_tile_tl_up:n.upVector(i,0,0),u_tile_tr_up:n.upVector(i,e.aj,0),u_tile_br_up:n.upVector(i,e.aj,e.aj),u_tile_bl_up:n.upVector(i,0,e.aj),u_tile_up_scale:r?e.dv(1):n.upVectorScale(i,t.center.lat,t.worldSize).metersToTile}}renderToBackBuffer(t){const i=this.painter,r=this.painter.context;0!==t.length&&(r.bindFramebuffer.set(null),r.viewport.set([0,0,i.width,i.height]),i.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(t,i,r,n,o){if("globe"===t.transform.projection.name)!function(t,i,r,n,o){const a=t.context,s=a.gl;let l,c;const u=t.transform,h=e.dl(t,a,u),d=(e,i)=>{if(c===i)return;const r=[Vn[i],"PROJECTION_GLOBE_VIEW"];h&&r.push("CUSTOM_ANTIALIASING");const n=t.isTileAffectedByFog(e);l=t.getOrCreateProgram("globeRaster",{defines:r,overrideFog:n}),c=i},p=t.colorModeForRenderPass(),f=new ji(s.LEQUAL,ji.ReadWrite,t.depthRangeFor3D);Bn.update(o);const m=e.dm(u),g=[e.aD(u.center.lng),e.aH(u.center.lat)],y=t.globeSharedBuffers,_=[u.width*e.q.devicePixelRatio,u.height*e.q.devicePixelRatio],v=Float32Array.from(u.globeMatrix),x={useDenormalizedUpVectorScale:!0};{const u=t.transform,h=Nn(u.zoom,i.exaggeration(),i.sourceCache._source.tileSize);c=-1;const C=s.TRIANGLES;for(const c of n){const n=r.getTile(c),w=Zi.disabled,b=i.prevTerrainTileForTile[c.key],S=i.terrainTileForTile[c.key];Fn(b,S)&&Bn.newMorphing(c.key,b,S,o,250),a.activeTexture.set(s.TEXTURE0),n.texture&&n.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const L=Bn.getMorphValuesForProxy(c.key),T=L?1:0;L&&e.L(x,{morphing:{srcDemTile:L.from,dstDemTile:L.to,phase:e.dk(L.phase)}});const M=e.dn(c.canonical),E=e.dp(M.getCenter().lat),I=e.dq(c.canonical,M,E,u.worldSize/u._pixelsPerMercatorPixel),A=e.bh(e.dr(c.canonical)),k=Dn(u.expandedFarZProjMatrix,v,m,A,e.ah(u.zoom),g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,_,h,u._farZ,I);if(d(c,T),l&&(i.setupElevationDraw(n,l,x),t.uploadCommonUniforms(a,l,c.toUnwrapped()),y)){const[e,i,r]=y.getGridBuffers(E,0!==h);l.draw(t,C,f,w,p,qi.backCCW,k,"globe_raster",e,i,r)}}}if(y&&(t.renderDefaultNorthPole||t.renderDefaultSouthPole)){const o=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];h&&o.push("CUSTOM_ANTIALIASING"),l=t.getOrCreateProgram("globeRaster",{defines:o});for(const c of n){const{x:n,y:o,z:h}=c.canonical,d=0===o,m=o===(1<<h)-1,[v,C,w,b]=y.getPoleBuffers(h,!1);if(b&&(d||m)){const o=r.getTile(c);a.activeTexture.set(s.TEXTURE0),o.texture&&o.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);let y=e.ds(h,n,u);const S=e.bh(e.dr(c.canonical)),L=(e,i)=>e.draw(t,s.TRIANGLES,f,Zi.disabled,p,qi.disabled,Dn(u.expandedFarZProjMatrix,y,y,S,0,g,u.frustumCorners.TL,u.frustumCorners.TR,u.frustumCorners.BR,u.frustumCorners.BL,u.globeCenterInViewSpace,u.globeRadius,_,0,u._farZ),"globe_pole_raster",i,w,b);i.setupElevationDraw(o,l,x),t.uploadCommonUniforms(a,l,c.toUnwrapped()),d&&t.renderDefaultNorthPole&&L(l,v),m&&t.renderDefaultSouthPole&&(y=e.cE(e.bz(),y,[1,-1,1]),L(l,C))}}}}(t,i,r,n,o);else{const a=t.context,s=a.gl;let l,c;const u=t.shadowRenderer,h=rr(t,t.longestCutoffRange),d=e=>{if(c===e)return;const i=[];i.push(Vn[e]),h.shouldRenderCutoff&&i.push("RENDER_CUTOFF"),u&&(i.push("RENDER_SHADOWS","DEPTH_TEXTURE"),u.useNormalOffset&&i.push("NORMAL_OFFSET")),l=t.getOrCreateProgram("terrainRaster",{defines:i}),c=e},p=t.colorModeForRenderPass(),f=new ji(s.LEQUAL,ji.ReadWrite,t.depthRangeFor3D);Bn.update(o);const m=t.transform,g=Nn(m.zoom,i.exaggeration(),i.sourceCache._source.tileSize);let y=[0,0,0];if(u){const e=t.style.directionalLight,i=t.style.ambientLight;e&&i&&(y=ur(t.style,e,i))}{c=-1;const _=s.TRIANGLES,[v,x]=[i.gridIndexBuffer,i.gridSegments];for(const c of n){const n=r.getTile(c),C=Zi.disabled,w=i.prevTerrainTileForTile[c.key],b=i.terrainTileForTile[c.key];Fn(w,b)&&Bn.newMorphing(c.key,w,b,o,250),a.activeTexture.set(s.TEXTURE0),n.texture&&n.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE);const S=Bn.getMorphValuesForProxy(c.key),L=S?1:0;let T;S&&(T={morphing:{srcDemTile:S.from,dstDemTile:S.to,phase:e.dk(S.phase)}});const M=zn(c.projMatrix,Un(c.canonical,m.renderWorldCopies)?g/10:g,y);if(d(L),!l)continue;i.setupElevationDraw(n,l,T);const E=c.toUnwrapped();u&&u.setupShadows(E,l),t.uploadCommonUniforms(a,l,E,null,h),l.draw(t,_,f,C,p,qi.backCCW,M,"terrain_raster",i.gridBuffer,v,x)}}}}(i,this,this.proxySourceCache,t,this._updateTimestamp),this.renderingToTexture=!0,i.gpuTimingDeferredRenderEnd(),t.splice(0,t.length))}renderBatch(t){if(0===this._drapedRenderBatches.length)return t+1;this.renderingToTexture=!0;const i=this.painter,r=this.painter.context,n=this.proxySourceCache,o=this.proxiedCoords[n.id],a=this._drapedRenderBatches.shift(),s=i.style.order,l=[];let c=0;for(const u of o){const o=n.getTileByID(u.proxyTileKey),h=n.proxyCachedFBO[u.key]?n.proxyCachedFBO[u.key][t]:void 0,d=void 0!==h?n.renderCache[h]:this.pool[c++],p=void 0!==h;if(o.texture=d.tex,p&&!d.dirty){l.push(o.tileID);continue}let f;r.bindFramebuffer.set(d.fb.framebuffer),this.renderedToTile=!1,d.dirty&&(r.clear({color:e.am.transparent,stencil:0}),d.dirty=!1);for(let e=a.start;e<=a.end;++e){const t=i.style._mergedLayers[s[e]];if(t.isHidden(i.transform.zoom))continue;const n=i.style.getLayerSourceCache(t),o=n?this.proxyToSource[u.key][n.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(n?n.id:null)&&(this._setupStencil(d,o,t,n),f=n?n.id:null),i.renderLayer(i,n,t,a)}if(0===this._drapedRenderBatches.length)for(const e of this._pendingGroundEffectLayers){const t=i.style._mergedLayers[s[e]];if(t.isHidden(i.transform.zoom))continue;const n=i.style.getLayerSourceCache(t),o=n?this.proxyToSource[u.key][n.id]:[u];if(!o)continue;const a=o;r.viewport.set([0,0,d.fb.width,d.fb.height]),f!==(n?n.id:null)&&(this._setupStencil(d,o,t,n),f=n?n.id:null),i.renderLayer(i,n,t,a)}this.renderedToTile?(d.dirty=!0,l.push(o.tileID)):p||--c,5===c&&(c=0,this.renderToBackBuffer(l))}return this.renderToBackBuffer(l),this.renderingToTexture=!1,r.bindFramebuffer.set(null),r.viewport.set([0,0,i.width,i.height]),a.end+1}postRender(){}isLayerOrderingCorrect(e){const t=e.order.length;let i=-1,r=t;for(let n=0;n<t;++n)this._style.isLayerDraped(e._mergedLayers[e.order[n]])?i=Math.max(i,n):r=Math.min(r,n);return r>i}getMinElevationBelowMSL(){let e=0;return this._visibleDemTiles.filter(e=>e.dem).forEach(t=>{e=Math.min(e,t.dem.tree.minimums[0])}),0===e?e:(e-30)*this._exaggeration}raycast(e,t,i){if(!this._visibleDemTiles)return null;const r=this._visibleDemTiles.filter(e=>e.dem).map(r=>{const n=r.tileID,o=1<<n.overscaledZ,{x:a,y:s}=n.canonical,l=a/o,c=(a+1)/o,u=s/o,h=(s+1)/o;return{minx:l,miny:u,maxx:c,maxy:h,t:r.dem.tree.raycastRoot(l,u,c,h,e,t,i),tile:r}});r.sort((e,t)=>(null!==e.t?e.t:Number.MAX_VALUE)-(null!==t.t?t.t:Number.MAX_VALUE));for(const n of r){if(null==n.t)return null;const r=n.tile.dem.tree.raycast(n.minx,n.miny,n.maxx,n.maxy,e,t,i);if(null!=r)return r}return null}_createFBO(){const t=this.painter.context,i=t.gl,r=this.drapeBufferSize;t.activeTexture.set(i.TEXTURE0);const n=new e.T(t,{width:r[0],height:r[1],data:null},i.RGBA8);n.bind(i.LINEAR,i.CLAMP_TO_EDGE);const o=t.createFramebuffer(r[0],r[1],!0,null);return o.colorAttachment.set(n.texture),o.depthAttachment=new Rn(t,o.framebuffer),void 0===this._sharedDepthStencil?(this._sharedDepthStencil=t.createRenderbuffer(t.gl.DEPTH_STENCIL,r[0],r[1]),this._stencilRef=0,o.depthAttachment.set(this._sharedDepthStencil),t.clear({stencil:0})):o.depthAttachment.set(this._sharedDepthStencil),t.extTextureFilterAnisotropic&&i.texParameterf(i.TEXTURE_2D,t.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,t.extTextureFilterAnisotropicMax),{fb:o,tex:n,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache)return!0;if(this._style.hasLightTransitions())return!0;for(const e in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[e].hasTransition())return!0;return this._style.order.some(e=>{const t=this._style._mergedLayers[e],i=t.isHidden(this.painter.transform.zoom);return"hillshade"===t.type||"custom"===t.type?!i&&t.shouldRedrape():!i&&t.hasTransition()})}_clearLineLayersFromRenderCache(){let t=!1;for(const e of this._style.getSources())if(e instanceof ot){t=!0;break}if(!t)return;const i={};for(let r=0;r<this._style.order.length;++r){const t=this._style._mergedLayers[this._style.order[r]],n=this._style.getLayerSourceCache(t);if(n&&!i[n.id]&&!t.isHidden(this.painter.transform.zoom)&&"line"===t.type&&t.widthExpression()instanceof e.ab){i[n.id]=!0;for(const e of this.proxyCoords){const t=this.proxyToSource[e.key][n.id];if(t)for(const e of t)this._clearRenderCacheForTile(n.id,e)}}}}_clearRasterLayersFromRenderCache(){let e=!1;for(const i in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[i]._source instanceof at){e=!0;break}if(!e)return;const t={};for(let i=0;i<this._style.order.length;++i){const e=this._style._mergedLayers[this._style.order[i]],r=this._style.getLayerSourceCache(e);if(!r||t[r.id])continue;if(e.isHidden(this.painter.transform.zoom)||"raster"!==e.type)continue;const n=e.paint.get("raster-fade-duration");for(const t of this.proxyCoords){const e=this.proxyToSource[t.key][r.id];if(e)for(const t of e){const e=Hn(r.getTile(t),r.findLoadedParent(t,0),r,this.painter.transform,n);(1!==e.opacity||0!==e.mix)&&this._clearRenderCacheForTile(r.id,t)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const t=this._style.order,i=t.length;if(0===i)return;const r=[];this._pendingGroundEffectLayers=[];let n,o=0,a=this._style._mergedLayers[t[o]];for(;!this._style.isLayerDraped(a)&&a.isHidden(this.painter.transform.zoom)&&++o<i;)a=this._style._mergedLayers[t[o]];for(;o<i;++o){const e=this._style._mergedLayers[t[o]];e.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(e)?void 0===n&&(n=o):("fill-extrusion"===e.type&&this._pendingGroundEffectLayers.push(o),void 0!==n&&(r.push({start:n,end:o-1}),n=void 0)))}if(void 0!==n&&r.push({start:n,end:o-1}),0!==r.length){const t=r[r.length-1];this._pendingGroundEffectLayers.every(e=>e>t.end)||e.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=r}_setupRenderCache(e){const t=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,t.renderCache.length>t.renderCachePool.length){const e=Object.values(t.proxyCachedFBO);t.proxyCachedFBO={};for(let i=0;i<e.length;++i){const r=Object.values(e[i]);t.renderCachePool.push(...r)}}return}this._clearRasterLayersFromRenderCache();const i=this.proxyCoords,r=this._tilesDirty;for(let o=i.length-1;o>=0;o--){const n=i[o];if(t.getTileByID(n.key),void 0!==t.proxyCachedFBO[n.key]){const i=e[n.key],o=this.proxyToSource[n.key];let a=0;for(const e in o){const t=o[e],n=i[e];if(!n||n.length!==t.length||t.some((t,i)=>t!==n[i]||r[e]&&r[e].hasOwnProperty(t.key))){a=-1;break}++a}for(const e in t.proxyCachedFBO[n.key])t.renderCache[t.proxyCachedFBO[n.key][e]].dirty=a<0||a!==Object.values(i).length}}const n=[...this._drapedRenderBatches];n.sort((e,t)=>t.end-t.start-(e.end-e.start));for(const o of n)for(const e of i){if(t.proxyCachedFBO[e.key])continue;let i=t.renderCachePool.pop();void 0===i&&t.renderCache.length<50&&(i=t.renderCache.length,t.renderCache.push(this._createFBO())),void 0!==i&&(t.proxyCachedFBO[e.key]={},t.proxyCachedFBO[e.key][o.start]=i,t.renderCache[i].dirty=!0)}this._tilesDirty={}}_setupStencil(e,t,i,r){if(!r||!this._sourceTilesOverlap[r.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const n=this.painter.context,o=n.gl;if(t.length<=1)return void(this._overlapStencilType=!1);let a;if(i.isTileClipped())a=t.length,this._overlapStencilMode.test={func:o.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(t[0].overscaledZ>t[t.length-1].overscaledZ))return void(this._overlapStencilType=!1);a=1,this._overlapStencilMode.test={func:o.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+a>255&&(n.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=a,this._overlapStencilMode.ref=this._stencilRef,i.isTileClipped()&&this._renderTileClippingMasks(t,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return"Clip"===this._overlapStencilType||"Mask"===this._overlapStencilType}stencilModeForRTTOverlap(e){return this.renderingToTexture&&this._overlapStencilType?("Clip"===this._overlapStencilType&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[e.key]),this._overlapStencilMode):Zi.disabled}_renderTileClippingMasks(e,t){const i=this.painter,r=this.painter.context,n=r.gl;i._tileClippingMaskIDs={},r.setColorMode(Ui.disabled),r.setDepthMode(ji.disabled);const o=i.getOrCreateProgram("clippingMask");for(const a of e){const e=i._tileClippingMaskIDs[a.key]=--t;o.draw(i,n.TRIANGLES,ji.disabled,new Zi({func:n.ALWAYS,mask:0},e,255,n.KEEP,n.KEEP,n.REPLACE),Ui.disabled,qi.disabled,jn(a.projMatrix),"$clipping",i.tileExtentBuffer,i.quadTriangleIndexBuffer,i.tileExtentSegments)}}pointCoordinate(t){const i=this.painter.transform;if(t.x<0||t.x>i.width||t.y<0||t.y>i.height)return null;const r=[t.x,t.y,1,1];e.aA(r,r,i.pixelMatrixInverse),e.cw(r,r,1/r[3]),r[0]/=i.worldSize,r[1]/=i.worldSize;const n=i._camera.position,o=e.c6(1,i.center.lat),a=[n[0],n[1],n[2]/o,0],s=e.cX([],r.slice(0,3),a);e.au(s,s);const l=this.raycast(a,s,this._exaggeration);return null!==l&&l?(e.bE(a,a,s,l),a[3]=a[2],a[2]*=o,a):null}_setupProxiedCoordsForOrtho(t,i,r){if(t.getSource()instanceof e.aP)return this._setupProxiedCoordsForImageSource(t,i,r);this._findCoveringTileCache[t.id]=this._findCoveringTileCache[t.id]||{};const n=this.proxiedCoords[t.id]=[],o=this.proxyCoords;for(let e=0;e<o.length;e++){const i=o[e],a=this._findTileCoveringTileID(i,t);if(a){const e=this._createProxiedId(i,a,r[i.key]&&r[i.key][t.id]);n.push(e),this.proxyToSource[i.key][t.id]=[e]}}let a=!1;const s=new Set;for(let e=0;e<i.length;e++){const o=t.getTile(i[e]);if(!o||!o.hasData())continue;const l=this._findTileCoveringTileID(o.tileID,this.proxySourceCache);if(l&&l.tileID.canonical.z!==o.tileID.canonical.z){const e=this.proxyToSource[l.tileID.key][t.id],i=this._createProxiedId(l.tileID,o,r[l.tileID.key]&&r[l.tileID.key][t.id]);e?e.splice(e.length-1,0,i):this.proxyToSource[l.tileID.key][t.id]=[i];const c=this.proxyToSource[l.tileID.key][t.id];s.has(c)||s.add(c),n.push(i),a=!0}}if(this._sourceTilesOverlap[t.id]=a,a&&this._debugParams.sortTilesHiZFirst)for(const e of s)e.sort((e,t)=>t.overscaledZ-e.overscaledZ)}_setupProxiedCoordsForImageSource(t,i,r){if(!t.getSource().loaded())return;const n=this.proxiedCoords[t.id]=[],o=this.proxyCoords,a=t.getSource(),s=a.tileID;if(!s)return;const l=new e.P(s.x,s.y)._div(1<<s.z),c=a.coordinates.map(e.ac.fromLngLat).reduce((e,t)=>(e.min.x=Math.min(e.min.x,t.x-l.x),e.min.y=Math.min(e.min.y,t.y-l.y),e.max.x=Math.max(e.max.x,t.x-l.x),e.max.y=Math.max(e.max.y,t.y-l.y),e),{min:new e.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new e.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),u=(t,i)=>{const r=t.wrap+t.canonical.x/(1<<t.canonical.z),n=t.canonical.y/(1<<t.canonical.z),o=e.aj/(1<<t.canonical.z),a=i.wrap+i.canonical.x/(1<<i.canonical.z),s=i.canonical.y/(1<<i.canonical.z);return r+o<a+c.min.x||r>a+c.max.x||n+o<s+c.min.y||n>s+c.max.y};for(let e=0;e<o.length;e++){const a=o[e];for(let e=0;e<i.length;e++){const o=t.getTile(i[e]);if(!o||!o.hasData())continue;if(u(a,o.tileID))continue;const s=this._createProxiedId(a,o,r[a.key]&&r[a.key][t.id]),l=this.proxyToSource[a.key][t.id];l?l.push(s):this.proxyToSource[a.key][t.id]=[s],n.push(s)}}}_createProxiedId(t,i,r){let n=this.orthoMatrix;if(r){const e=r.find(e=>e.key===i.tileID.key);if(e)return e}if(i.tileID.key!==t.key){const r=t.canonical.z-i.tileID.canonical.z;let o,a,s;n=e.bz();const l=i.tileID.wrap-t.wrap<<t.overscaledZ;r>0?(o=e.aj>>r,a=o*((i.tileID.canonical.x<<r)-t.canonical.x+l),s=o*((i.tileID.canonical.y<<r)-t.canonical.y)):(o=e.aj<<-r,a=e.aj*(i.tileID.canonical.x-(t.canonical.x+l<<-r)),s=e.aj*(i.tileID.canonical.y-(t.canonical.y<<-r))),e.c5(n,0,o,0,o,0,1),e.bo(n,n,[a,s,0])}return new Gn(i.tileID,t.key,n)}_findTileCoveringTileID(t,i){let r=i.getTile(t);if(r&&r.hasData())return r;const n=this._findCoveringTileCache[i.id],o=n[t.key];if(r=o?i.getTileByID(o):null,r&&r.hasData()||null===o)return r;let a=r?r.tileID:t,s=a.overscaledZ;const l=i.getSource().minzoom,c=[];if(!o){const n=i.getSource().maxzoom;if(t.canonical.z>=n){const r=t.canonical.z-n;i.getSource().reparseOverscaled?(s=Math.max(t.canonical.z+2,i.transform.tileZoom),a=new e.aM(s,t.wrap,n,t.canonical.x>>r,t.canonical.y>>r)):0!==r&&(s=n,a=new e.aM(s,t.wrap,n,t.canonical.x>>r,t.canonical.y>>r))}a.key!==t.key&&(c.push(a.key),r=i.getTile(a))}const u=e=>{c.forEach(t=>{n[t]=e}),c.length=0};for(s-=1;s>=l&&(!r||!r.hasData());s--){r&&u(r.tileID.key);const e=a.calculateScaledKey(s);if(r=i.getTileByID(e),r&&r.hasData())break;const t=n[e];if(null===t)break;void 0===t?c.push(e):r=i.getTileByID(t)}return u(r?r.tileID.key:null),r&&r.hasData()?r:null}findDEMTileFor(e){return this.enabled?this._findTileCoveringTileID(e,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(e,t){let i=this._tilesDirty[e];i||(i=this._tilesDirty[e]={}),i[t.key]=!0}}function Xn(t,i,r){const n=function(t,i,r){const n=e.bG(i,t),o=e.bG(r,[.2126,.7152,.0722]),a=(e,t,i)=>(1-i)*e+i*t,s=a(1-.3*Math.min(o,1),1,Math.min(n+1,1));return a(.92,1,Math.asin(e.ay(i[2],-1,1))/Math.PI+.5)*s}(t,[0,0,1],i),o=[0,0,0];e.bY(o,r.slice(0,3),n);const a=[0,0,0];e.bY(a,i.slice(0,3),t[2]);const s=[0,0,0];return e.cV(s,o,a),e.cY(s)}const Yn=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],Kn=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","elevatedStructures","model","symbol"];class Jn{static cacheKey(e,t,i,r){let n="".concat(t).concat(r?r.cacheKey:"");for(const o of i)e.usedDefines.includes(o)&&(n+="/".concat(o));return n}constructor(t,i,r,n,o,a){const s=t.gl;this.program=s.createProgram(),this.configuration=n,this.name=i,this.fixedDefines=[...a];const l=n?n.getBinderAttributes():[],c=(r.staticAttributes||[]).concat(l);let u=n?n.defines():[];u=u.concat(a.map(e=>"#define ".concat(e)));const h="#version 300 es\n";let d=h+u.concat("precision mediump float;",jr,Ur.fragmentSource).join("\n");for(const e of r.fragmentIncludes)d+="\n".concat(Vr[e]);d+="\n".concat(r.fragmentSource);let p=h+u.concat("precision highp float;",jr,Ur.vertexSource).join("\n");for(const e of r.vertexIncludes)p+="\n".concat(Vr[e]);this.forceManualRenderingForInstanceIDShaders=t.forceManualRenderingForInstanceIDShaders&&-1!==r.vertexSource.indexOf("gl_InstanceID"),this.forceManualRenderingForInstanceIDShaders&&(p+="\nuniform int u_instanceID;\n"),p+="\n".concat(r.vertexSource),this.forceManualRenderingForInstanceIDShaders&&(p=p.replaceAll("gl_InstanceID","u_instanceID"));const f=s.createShader(s.FRAGMENT_SHADER);if(s.isContextLost())return void(this.failedToCreate=!0);s.shaderSource(f,d),s.compileShader(f),s.attachShader(this.program,f);const m=s.createShader(s.VERTEX_SHADER);if(s.isContextLost())this.failedToCreate=!0;else{s.shaderSource(m,p),s.compileShader(m),s.attachShader(this.program,m),this.attributes={},this.numAttributes=c.length;for(let e=0;e<this.numAttributes;e++)if(c[e]){const t=c[e].startsWith("a_")?c[e]:"a_".concat(c[e]);s.bindAttribLocation(this.program,e,t),this.attributes[t]=e}s.linkProgram(this.program),s.deleteShader(m),s.deleteShader(f),this.fixedUniforms=o(t),this.binderUniforms=n?n.getUniforms(t):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(t=>({u_instanceID:new e.c8(t)}))(t)),(a.includes("TERRAIN")||-1!==i.indexOf("symbol")||-1!==i.indexOf("circle"))&&(this.terrainUniforms=(t=>({u_dem:new e.c8(t),u_dem_prev:new e.c8(t),u_dem_tl:new e.cb(t),u_dem_scale:new e.ca(t),u_dem_tl_prev:new e.cb(t),u_dem_scale_prev:new e.ca(t),u_dem_size:new e.ca(t),u_dem_lerp:new e.ca(t),u_exaggeration:new e.ca(t),u_depth:new e.c8(t),u_depth_size_inv:new e.cb(t),u_depth_range_unpack:new e.cb(t),u_occluder_half_size:new e.ca(t),u_occlusion_depth_offset:new e.ca(t),u_meter_to_dem:new e.ca(t),u_label_plane_matrix_inv:new e.cc(t)}))(t)),a.includes("GLOBE")&&(this.globeUniforms=(t=>({u_tile_tl_up:new e.c9(t),u_tile_tr_up:new e.c9(t),u_tile_br_up:new e.c9(t),u_tile_bl_up:new e.c9(t),u_tile_up_scale:new e.ca(t)}))(t)),a.includes("FOG")&&(this.fogUniforms=(t=>({u_fog_matrix:new e.cc(t),u_fog_range:new e.cb(t),u_fog_color:new e.cQ(t),u_fog_horizon_blend:new e.ca(t),u_fog_vertical_limit:new e.cb(t),u_fog_temporal_offset:new e.ca(t),u_frustum_tl:new e.c9(t),u_frustum_tr:new e.c9(t),u_frustum_br:new e.c9(t),u_frustum_bl:new e.c9(t),u_globe_pos:new e.c9(t),u_globe_radius:new e.ca(t),u_globe_transition:new e.ca(t),u_is_globe:new e.c8(t),u_viewport:new e.cb(t)}))(t)),a.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(t=>({u_cutoff_params:new e.cQ(t)}))(t)),a.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(t=>({u_lighting_ambient_color:new e.c9(t),u_lighting_directional_dir:new e.c9(t),u_lighting_directional_color:new e.c9(t),u_ground_radiance:new e.c9(t)}))(t)),a.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(t=>({u_light_matrix_0:new e.cc(t),u_light_matrix_1:new e.cc(t),u_fade_range:new e.cb(t),u_shadow_normal_offset:new e.c9(t),u_shadow_intensity:new e.ca(t),u_shadow_texel_size:new e.ca(t),u_shadow_map_resolution:new e.ca(t),u_shadow_direction:new e.c9(t),u_shadow_bias:new e.c9(t),u_shadowmap_0:new e.c8(t),u_shadowmap_1:new e.c8(t)}))(t))}}setTerrainUniformValues(e,t){if(!this.terrainUniforms)return;const i=this.terrainUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e])}}setGlobeUniformValues(e,t){if(!this.globeUniforms)return;const i=this.globeUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e]&&i[e].set(this.program,e,t[e])}}setFogUniformValues(e,t){if(!this.fogUniforms)return;const i=this.fogUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(this.program,e,t[e])}}setCutoffUniformValues(e,t){if(!this.cutoffUniforms)return;const i=this.cutoffUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(this.program,e,t[e])}}setLightsUniformValues(e,t){if(!this.lightsUniforms)return;const i=this.lightsUniforms;if(!this.failedToCreate){e.program.set(this.program);for(const e in t)i[e].set(this.program,e,t[e])}}setShadowUniformValues(e,t){if(this.failedToCreate||!this.shadowUniforms)return;const i=this.shadowUniforms;e.program.set(this.program);for(const r in t)i[r].set(this.program,r,t[r])}_drawDebugWireframe(t,i,r,n,o,a,s,l,c,u){const h=t.options.wireframe;if(!1===h.terrain&&!1===h.layers2D&&!1===h.layers3D)return;const d=t.context;if(!(()=>!(!h.terrain||"terrainRaster"!==this.name&&"globeRaster"!==this.name)||!(!h.layers2D||t._terrain&&t._terrain.renderingToTexture||!Yn.includes(this.name))||!(!h.layers3D||!Kn.includes(this.name)))())return;const p=d.gl,f=t.wireframeDebugCache.getLinesFromTrianglesBuffer(t.frameCounter,o,d);if(!f)return;const m=[...this.fixedDefines];m.push("DEBUG_WIREFRAME");const g=t.getOrCreateProgram(this.name,{config:this.configuration,defines:m});d.program.set(g.program);const y=(e,t,i)=>{if(t[e]&&i[e])for(const r in t[e])i[e][r]&&i[e][r].set(i.program,r,t[e][r].current)};c&&c.setUniforms(g.program,d,g.binderUniforms,s,{zoom:l}),y("fixedUniforms",this,g),y("terrainUniforms",this,g),y("globeUniforms",this,g),y("fogUniforms",this,g),y("lightsUniforms",this,g),y("shadowUniforms",this,g),f.bind(),d.setColorMode(new Ui([p.ONE,p.ONE_MINUS_SRC_ALPHA,p.ZERO,p.ONE],e.am.transparent,[!0,!0,!0,!1])),d.setDepthMode(new ji(i.func===p.LESS?p.LEQUAL:i.func,ji.ReadOnly,i.range)),d.setStencilMode(Zi.disabled);const _=3*a.primitiveLength*2,v=3*a.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const e=u||1;for(let t=0;t<e;++t)g.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",t),p.drawElements(p.LINES,_,p.UNSIGNED_SHORT,v)}else u&&u>1?p.drawElementsInstanced(p.LINES,_,p.UNSIGNED_SHORT,v,u):p.drawElements(p.LINES,_,p.UNSIGNED_SHORT,v);o.bind(),d.program.set(this.program),d.setDepthMode(i),d.setStencilMode(r),d.setColorMode(n)}checkUniforms(e,t,i){if(this.fixedDefines.includes(t))for(const r of Object.keys(i))if(!i[r].initialized)throw new Error("Program '".concat(this.name,"', from draw '").concat(e,"': uniform ").concat(r," not set but required by ").concat(t," being defined"))}draw(e,t,i,r,n,o,a,s,l,c,u,h,d,p,f,m){const g=e.context,y=g.gl;if(this.failedToCreate)return;g.program.set(this.program),g.setDepthMode(i),g.setStencilMode(r),g.setColorMode(n),g.setCullFace(o);for(const x of Object.keys(this.fixedUniforms))this.fixedUniforms[x].set(this.program,x,a[x]);p&&p.setUniforms(this.program,g,this.binderUniforms,h,{zoom:d});const _={[y.POINTS]:1,[y.LINES]:2,[y.TRIANGLES]:3,[y.LINE_STRIP]:1}[t];this.checkUniforms(s,"RENDER_SHADOWS",this.shadowUniforms);const v=m&&m>0?1:void 0;for(const x of u.get()){const o=x.vaos||(x.vaos={});if((o[s]||(o[s]=new Gr)).bind(g,this,l,p?p.getPaintVertexBuffers():[],c,x.vertexOffset,f||[],v),this.forceManualRenderingForInstanceIDShaders){const e=m||1;for(let i=0;i<e;++i)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",i),c?y.drawElements(t,x.primitiveLength*_,y.UNSIGNED_SHORT,x.primitiveOffset*_*2):y.drawArrays(t,x.vertexOffset,x.vertexLength)}else m&&m>1?y.drawElementsInstanced(t,x.primitiveLength*_,y.UNSIGNED_SHORT,x.primitiveOffset*_*2,m):c?y.drawElements(t,x.primitiveLength*_,y.UNSIGNED_SHORT,x.primitiveOffset*_*2):y.drawArrays(t,x.vertexOffset,x.vertexLength);t===y.TRIANGLES&&c&&this._drawDebugWireframe(e,i,r,n,c,x,h,d,p,m)}}}function Qn(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const n=Math.pow(2,i.tileID.overscaledZ),o=i.tileSize*Math.pow(2,t.transform.tileZoom)/n,a=o*(i.tileID.canonical.x+i.tileID.wrap*n),s=o*i.tileID.canonical.y;return{u_image:0,u_texsize:i.imageAtlasTexture?i.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/e.aw(i,1,t.transform.tileZoom),u_pixel_coord_upper:[a>>16,s>>16],u_pixel_coord_lower:[65535&a,65535&s],u_pattern_transition:r}}const $n={terrain:0,flat:1},eo=e.bz(),to=(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_)=>{const v=i.style.light,x=v.properties.get("position"),C=[x.x,x.y,x.z],w=e.dx();"viewport"===v.properties.get("anchor")&&(e.dy(w,-i.transform.angle),e.dz(C,C,w));const b=v.properties.get("color").toPremultipliedRenderColor(null),S=i.transform,L={u_matrix:t,u_lightpos:C,u_lightintensity:v.properties.get("intensity"),u_lightcolor:[b.r,b.g,b.b],u_vertical_gradient:+r,u_opacity:n,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:eo,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:$n[u],u_base_type:$n[h],u_ao:o,u_edge_radius:a,u_width_scale:s,u_flood_light_color:m,u_vertical_scale:g,u_flood_light_intensity:y,u_ground_shadow_factor:_};return"globe"===S.projection.name&&(L.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],L.u_zoom_transition=d,L.u_inv_rot_matrix=f,L.u_merc_center=p,L.u_up_dir=S.projection.upVector(new e.cp(0,0,0),p[0]*e.aj,p[1]*e.aj),L.u_height_lift=c),L},io=(e,t,i,r,n,o)=>({u_matrix:e,u_edge_radius:t,u_width_scale:i,u_vertical_scale:r,u_height_type:$n[n],u_base_type:$n[o]}),ro=(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_)=>{const v=to(t,i,r,n,o,a,s,l,u,h,d,p,f,m,g,y,1,[0,0,0]),x={u_height_factor:-Math.pow(2,l.overscaledZ)/c.tileSize/8};return e.h(v,Qn(i,c,_),x)},no=(e,t,i)=>({u_matrix:e,u_emissive_strength:t,u_ground_shadow_factor:i}),oo=function(t,i,r,n,o){let a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;return e.h(no(t,i,o),Qn(r,n,a))},ao=(e,t,i,r)=>({u_matrix:e,u_world:i,u_emissive_strength:t,u_ground_shadow_factor:r}),so=function(t,i,r,n,o,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return e.h(oo(t,i,r,n,a,s),{u_world:o})},lo=(e,t)=>({u_matrix:e,u_ground_shadow_factor:t}),co=(e,t,i,r,n)=>({u_matrix:e,u_camera_pos:[t[0],t[1],t[2]],u_depth_bias:i,u_height_scale:r,u_reset_depth:n}),uo=(t,i,r,n)=>{const o=e.aj/r.tileSize;return{u_matrix:t,u_camera_to_center_distance:i.getCameraToCenterDistance(n),u_extrude_scale:[i.pixelsToGLUnits[0]/o,i.pixelsToGLUnits[1]/o]}},ho=function(e,t){return{u_matrix:e,u_color:t,u_overlay:0,u_overlay_scale:arguments.length>2&&void 0!==arguments[2]?arguments[2]:1}},po=e.bz(),fo=(t,i,r,n,o,a,s)=>{const l=t.transform,c="globe"===l.projection.name,u=c?e.dA(l.zoom,i.canonical)*l._pixelsPerMercatorPixel:e.aw(r,1,a),h={u_matrix:i.projMatrix,u_extrude_scale:u,u_intensity:s,u_inv_rot_matrix:po,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(c){h.u_inv_rot_matrix=n,h.u_merc_center=o,h.u_tile_id=[i.canonical.x,i.canonical.y,1<<i.canonical.z],h.u_zoom_transition=e.ah(l.zoom);const t=o[0]*e.aj,r=o[1]*e.aj;h.u_up_dir=l.projection.upVector(new e.cp(0,0,0),t,r)}return h};function mo(e,t,i){let[r,n,o,a]=t,[s,l]=i;if(s===l)return[0,0,0,0];const c=255*(e-1)/(e*(l-s));return[r*c,n*c,o*c,a*c]}function go(e,t,i){let[r,n]=i;return r===n?0:.5/e+(t-r)*(e-1)/(e*(n-r))}const yo=(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C)=>({u_matrix:t,u_normalize_matrix:i,u_globe_matrix:r,u_merc_matrix:n,u_grid_matrix:o,u_tl_parent:a,u_scale_parent:u,u_fade_t:h.mix,u_opacity:h.opacity*d.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:d.paint.get("raster-brightness-min"),u_brightness_high:d.paint.get("raster-brightness-max"),u_saturation_factor:e.dC(d.paint.get("raster-saturation")),u_contrast_factor:e.dB(d.paint.get("raster-contrast")),u_spin_weights:_o(d.paint.get("raster-hue-rotate")),u_perspective_transform:p,u_raster_elevation:f,u_zoom_transition:s,u_merc_center:l,u_cutoff_params:c,u_colorization_mix:mo(e.dD,g,_),u_colorization_offset:go(e.dD,y,_),u_color_ramp:m,u_texture_offset:[x/(v+2*x),v/(v+2*x)],u_texture_res:[v+2*x,v+2*x],u_emissive_strength:C});function _o(e){e*=Math.PI/180;const t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}const vo=.05,xo=(e,t,i,r,n,o,a,s,l,c,u,h)=>({u_matrix:e,u_normalize_matrix:t,u_globe_matrix:i,u_merc_matrix:r,u_grid_matrix:n,u_tl_parent:o,u_scale_parent:c,u_fade_t:u.mix,u_opacity:u.opacity,u_image0:0,u_image1:1,u_raster_elevation:h,u_zoom_transition:a,u_merc_center:s,u_cutoff_params:l}),Co=(e,t,i,r,n,o,a,s,l,c)=>({u_particle_texture:e,u_particle_texture_side_len:t,u_tile_offset:i,u_velocity:r,u_color_ramp:o,u_velocity_res:n,u_max_speed:a,u_uv_offset:s,u_data_scale:[255*l[0],255*l[1]],u_data_offset:c,u_particle_pos_scale:1.1,u_particle_pos_offset:[vo,vo]}),wo=(e,t,i,r,n,o,a,s,l,c)=>({u_particle_texture:e,u_particle_texture_side_len:t,u_velocity:i,u_velocity_res:r,u_max_speed:n,u_speed_factor:o,u_reset_rate:a,u_rand_seed:Math.random(),u_uv_offset:s,u_data_scale:[255*l[0],255*l[1]],u_data_offset:c,u_particle_pos_scale:1.1,u_particle_pos_offset:[vo,vo]}),bo=e.bz(),So=(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v,x,C,w,b,S)=>{const L=o.transform,T={u_is_size_zoom_constant:+("constant"===t||"source"===t),u_is_size_feature_constant:+("constant"===t||"camera"===t),u_size_t:i?i.uSizeT:0,u_size:i?i.uSize:0,u_camera_to_center_distance:L.getCameraToCenterDistance(v),u_rotate_symbol:+r,u_aspect_ratio:L.width/L.height,u_fade_change:o.options.fadeDuration?o.symbolFadeChange:1,u_matrix:a,u_label_plane_matrix:s,u_coord_matrix:l,u_is_text:+u,u_elevation_from_sea:c?1:0,u_pitch_with_map:+n,u_texsize:h,u_texsize_icon:d,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:bo,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:bo,u_up_vector:[0,-1,0],u_color_adj_mat:w,u_icon_transition:b||0,u_gamma_scale:n?o.transform.getCameraToCenterDistance(v)*Math.cos(o.terrain?0:o.transform._pitch):1,u_device_pixel_ratio:e.q.devicePixelRatio,u_is_halo:1,u_scale_factor:S||1,u_ground_shadow_factor:x,u_inv_matrix:e.bi(e.bz(),s),u_normal_scale:C};return"globe"===v.name&&(T.u_tile_id=[f.canonical.x,f.canonical.y,1<<f.canonical.z],T.u_zoom_transition=m,T.u_inv_rot_matrix=y,T.u_merc_center=g,T.u_camera_forward=L._camera.forward(),T.u_ecef_origin=e.dE(L.globeMatrix,f.toUnwrapped()),T.u_tile_matrix=Float32Array.from(L.globeMatrix),T.u_up_vector=_),T},Lo=(e,t,i,r)=>({u_matrix:e,u_emissive_strength:t,u_opacity:i,u_color:r}),To=(t,i,r,n,o,a,s,l,c)=>e.h(function(t,i,r,n,o,a){const{width:s,height:l}=n.imageManager.getPixelSize(i),c=Math.pow(2,a.tileID.overscaledZ),u=a.tileSize*Math.pow(2,n.transform.tileZoom)/c,h=u*(a.tileID.canonical.x+a.tileID.wrap*c),d=u*a.tileID.canonical.y;return{u_image:0,u_pattern_tl:r.tl,u_pattern_br:r.br,u_texsize:[s,l],u_pattern_size:r.displaySize,u_pattern_units_to_pixels:o?[n.transform.width,-1*n.transform.height]:[1/e.aw(a,1,n.transform.tileZoom),1/e.aw(a,1,n.transform.tileZoom)],u_pixel_coord_upper:[h>>16,d>>16],u_pixel_coord_lower:[65535&h,65535&d]}}(0,a,s,n,l,c),{u_matrix:t,u_emissive_strength:i,u_opacity:r}),Mo=new Float32Array(e.bx([])),Eo=function(t,i,r,n,o,a,s,l,c,u,h,d,p){let f=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[0,0,0],m=arguments.length>14?arguments[14]:void 0;const g=o.style.light,y=g.properties.get("position"),_=[-y.x,-y.y,y.z],v=e.dx();"viewport"===g.properties.get("anchor")&&(e.dy(v,-o.transform.angle),e.dz(_,_,v));const x="MASK"===h.alphaMode,C=g.properties.get("color").toNonPremultipliedRenderColor(null),w=p.paint.get("model-ambient-occlusion-intensity"),b=p.paint.get("model-color").constantOr(e.am.white).toNonPremultipliedRenderColor(null);return b.a=p.paint.get("model-color-mix-intensity").constantOr(0),{u_matrix:t,u_lighting_matrix:i,u_normal_matrix:r,u_node_matrix:n||Mo,u_lightpos:_,u_lightintensity:g.properties.get("intensity"),u_lightcolor:[C.r,C.g,C.b],u_camera_pos:f,u_opacity:a,u_baseTextureIsAlpha:0,u_alphaMask:+x,u_alphaCutoff:h.alphaCutoff,u_baseColorFactor:s.toNonPremultipliedRenderColor(null).toArray01(),u_emissiveFactor:l.toNonPremultipliedRenderColor(null).toArray01(),u_metallicFactor:c,u_roughnessFactor:u,u_baseColorTexture:$i.BaseColor,u_metallicRoughnessTexture:$i.MetallicRoughness,u_normalTexture:$i.Normal,u_occlusionTexture:$i.Occlusion,u_emissionTexture:$i.Emission,u_lutTexture:$i.LUT,u_color_mix:b.toArray01(),u_aoIntensity:w,u_emissive_strength:d,u_occlusionTextureTransform:m||[0,0,0,0]}},Io=function(e){return{u_matrix:e,u_instance:arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mo,u_node_matrix:arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mo}},Ao={fillExtrusion:t=>({u_matrix:new e.cc(t),u_lightpos:new e.c9(t),u_lightintensity:new e.ca(t),u_lightcolor:new e.c9(t),u_vertical_gradient:new e.ca(t),u_opacity:new e.ca(t),u_edge_radius:new e.ca(t),u_width_scale:new e.ca(t),u_ao:new e.cb(t),u_height_type:new e.c8(t),u_base_type:new e.c8(t),u_tile_id:new e.c9(t),u_zoom_transition:new e.ca(t),u_inv_rot_matrix:new e.cc(t),u_merc_center:new e.cb(t),u_up_dir:new e.c9(t),u_height_lift:new e.ca(t),u_flood_light_color:new e.c9(t),u_vertical_scale:new e.ca(t),u_flood_light_intensity:new e.ca(t),u_ground_shadow_factor:new e.c9(t)}),fillExtrusionDepth:t=>({u_matrix:new e.cc(t),u_edge_radius:new e.ca(t),u_width_scale:new e.ca(t),u_vertical_scale:new e.ca(t),u_height_type:new e.c8(t),u_base_type:new e.c8(t)}),fillExtrusionPattern:t=>({u_matrix:new e.cc(t),u_lightpos:new e.c9(t),u_lightintensity:new e.ca(t),u_lightcolor:new e.c9(t),u_vertical_gradient:new e.ca(t),u_height_factor:new e.ca(t),u_edge_radius:new e.ca(t),u_width_scale:new e.ca(t),u_ao:new e.cb(t),u_height_type:new e.c8(t),u_base_type:new e.c8(t),u_tile_id:new e.c9(t),u_zoom_transition:new e.ca(t),u_inv_rot_matrix:new e.cc(t),u_merc_center:new e.cb(t),u_up_dir:new e.c9(t),u_height_lift:new e.ca(t),u_image:new e.c8(t),u_texsize:new e.cb(t),u_pixel_coord_upper:new e.cb(t),u_pixel_coord_lower:new e.cb(t),u_tile_units_to_pixels:new e.ca(t),u_opacity:new e.ca(t),u_pattern_transition:new e.ca(t)}),fillExtrusionGroundEffect:t=>({u_matrix:new e.cc(t),u_opacity:new e.ca(t),u_ao_pass:new e.ca(t),u_meter_to_tile:new e.ca(t),u_ao:new e.cb(t),u_flood_light_intensity:new e.ca(t),u_flood_light_color:new e.c9(t),u_attenuation:new e.ca(t),u_edge_radius:new e.ca(t),u_fb:new e.c8(t),u_fb_size:new e.ca(t),u_dynamic_offset:new e.ca(t)}),fill:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_ground_shadow_factor:new e.c9(t)}),fillPattern:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_image:new e.c8(t),u_texsize:new e.cb(t),u_pixel_coord_upper:new e.cb(t),u_pixel_coord_lower:new e.cb(t),u_tile_units_to_pixels:new e.ca(t),u_ground_shadow_factor:new e.c9(t),u_pattern_transition:new e.ca(t)}),fillOutline:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_world:new e.cb(t),u_ground_shadow_factor:new e.c9(t)}),fillOutlinePattern:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_world:new e.cb(t),u_image:new e.c8(t),u_texsize:new e.cb(t),u_pixel_coord_upper:new e.cb(t),u_pixel_coord_lower:new e.cb(t),u_tile_units_to_pixels:new e.ca(t),u_ground_shadow_factor:new e.c9(t),u_pattern_transition:new e.ca(t)}),building:t=>({u_matrix:new e.cc(t),u_normal_matrix:new e.cc(t),u_opacity:new e.ca(t)}),buildingDepth:t=>({u_matrix:new e.cc(t)}),elevatedStructuresDepth:t=>({u_matrix:new e.cc(t),u_depth_bias:new e.ca(t)}),elevatedStructures:t=>({u_matrix:new e.cc(t),u_ground_shadow_factor:new e.c9(t)}),elevatedStructuresDepthReconstruct:t=>({u_matrix:new e.cc(t),u_camera_pos:new e.c9(t),u_depth_bias:new e.ca(t),u_height_scale:new e.ca(t),u_reset_depth:new e.ca(t)}),circle:e.dH,collisionBox:t=>({u_matrix:new e.cc(t),u_camera_to_center_distance:new e.ca(t),u_extrude_scale:new e.cb(t)}),collisionCircle:t=>({u_matrix:new e.cc(t),u_inv_matrix:new e.cc(t),u_camera_to_center_distance:new e.ca(t),u_viewport_size:new e.cb(t)}),debug:t=>({u_color:new e.di(t),u_matrix:new e.cc(t),u_overlay:new e.c8(t),u_overlay_scale:new e.ca(t)}),clippingMask:t=>({u_matrix:new e.cc(t)}),heatmap:t=>({u_extrude_scale:new e.ca(t),u_intensity:new e.ca(t),u_matrix:new e.cc(t),u_inv_rot_matrix:new e.cc(t),u_merc_center:new e.cb(t),u_tile_id:new e.c9(t),u_zoom_transition:new e.ca(t),u_up_dir:new e.c9(t)}),heatmapTexture:t=>({u_image:new e.c8(t),u_color_ramp:new e.c8(t),u_opacity:new e.ca(t)}),hillshade:t=>({u_matrix:new e.cc(t),u_image:new e.c8(t),u_latrange:new e.cb(t),u_light:new e.cb(t),u_shadow:new e.di(t),u_highlight:new e.di(t),u_emissive_strength:new e.ca(t),u_accent:new e.di(t)}),hillshadePrepare:t=>({u_matrix:new e.cc(t),u_image:new e.c8(t),u_dimension:new e.cb(t),u_zoom:new e.ca(t)}),line:e.dG,linePattern:e.dF,raster:t=>({u_matrix:new e.cc(t),u_normalize_matrix:new e.cc(t),u_globe_matrix:new e.cc(t),u_merc_matrix:new e.cc(t),u_grid_matrix:new e.dj(t),u_tl_parent:new e.cb(t),u_scale_parent:new e.ca(t),u_fade_t:new e.ca(t),u_opacity:new e.ca(t),u_image0:new e.c8(t),u_image1:new e.c8(t),u_brightness_low:new e.ca(t),u_brightness_high:new e.ca(t),u_saturation_factor:new e.ca(t),u_contrast_factor:new e.ca(t),u_spin_weights:new e.c9(t),u_perspective_transform:new e.cb(t),u_raster_elevation:new e.ca(t),u_zoom_transition:new e.ca(t),u_merc_center:new e.cb(t),u_cutoff_params:new e.cQ(t),u_colorization_mix:new e.cQ(t),u_colorization_offset:new e.ca(t),u_color_ramp:new e.c8(t),u_texture_offset:new e.cb(t),u_texture_res:new e.cb(t),u_emissive_strength:new e.ca(t)}),rasterParticle:t=>({u_matrix:new e.cc(t),u_normalize_matrix:new e.cc(t),u_globe_matrix:new e.cc(t),u_merc_matrix:new e.cc(t),u_grid_matrix:new e.dj(t),u_tl_parent:new e.cb(t),u_scale_parent:new e.ca(t),u_fade_t:new e.ca(t),u_opacity:new e.ca(t),u_image0:new e.c8(t),u_image1:new e.c8(t),u_raster_elevation:new e.ca(t),u_zoom_transition:new e.ca(t),u_merc_center:new e.cb(t),u_cutoff_params:new e.cQ(t)}),rasterParticleTexture:t=>({u_texture:new e.c8(t),u_opacity:new e.ca(t)}),rasterParticleDraw:t=>({u_particle_texture:new e.c8(t),u_particle_texture_side_len:new e.ca(t),u_tile_offset:new e.cb(t),u_velocity:new e.c8(t),u_color_ramp:new e.c8(t),u_velocity_res:new e.cb(t),u_max_speed:new e.ca(t),u_uv_offset:new e.cb(t),u_data_scale:new e.cb(t),u_data_offset:new e.ca(t),u_particle_pos_scale:new e.ca(t),u_particle_pos_offset:new e.cb(t)}),rasterParticleUpdate:t=>({u_particle_texture:new e.c8(t),u_particle_texture_side_len:new e.ca(t),u_velocity:new e.c8(t),u_velocity_res:new e.cb(t),u_max_speed:new e.ca(t),u_speed_factor:new e.ca(t),u_reset_rate:new e.ca(t),u_rand_seed:new e.ca(t),u_uv_offset:new e.cb(t),u_data_scale:new e.cb(t),u_data_offset:new e.ca(t),u_particle_pos_scale:new e.ca(t),u_particle_pos_offset:new e.cb(t)}),symbol:t=>({u_is_size_zoom_constant:new e.c8(t),u_is_size_feature_constant:new e.c8(t),u_size_t:new e.ca(t),u_size:new e.ca(t),u_camera_to_center_distance:new e.ca(t),u_rotate_symbol:new e.c8(t),u_aspect_ratio:new e.ca(t),u_fade_change:new e.ca(t),u_matrix:new e.cc(t),u_label_plane_matrix:new e.cc(t),u_coord_matrix:new e.cc(t),u_is_text:new e.c8(t),u_elevation_from_sea:new e.c8(t),u_pitch_with_map:new e.c8(t),u_texsize:new e.cb(t),u_texsize_icon:new e.cb(t),u_texture:new e.c8(t),u_texture_icon:new e.c8(t),u_gamma_scale:new e.ca(t),u_device_pixel_ratio:new e.ca(t),u_tile_id:new e.c9(t),u_zoom_transition:new e.ca(t),u_inv_rot_matrix:new e.cc(t),u_merc_center:new e.cb(t),u_camera_forward:new e.c9(t),u_tile_matrix:new e.cc(t),u_up_vector:new e.c9(t),u_ecef_origin:new e.c9(t),u_is_halo:new e.c8(t),u_icon_transition:new e.ca(t),u_color_adj_mat:new e.cc(t),u_scale_factor:new e.ca(t),u_ground_shadow_factor:new e.c9(t),u_inv_matrix:new e.cc(t),u_normal_scale:new e.ca(t)}),background:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_opacity:new e.ca(t),u_color:new e.di(t)}),backgroundPattern:t=>({u_matrix:new e.cc(t),u_emissive_strength:new e.ca(t),u_opacity:new e.ca(t),u_image:new e.c8(t),u_pattern_tl:new e.cb(t),u_pattern_br:new e.cb(t),u_texsize:new e.cb(t),u_pattern_size:new e.cb(t),u_pixel_coord_upper:new e.cb(t),u_pixel_coord_lower:new e.cb(t),u_pattern_units_to_pixels:new e.cb(t)}),terrainRaster:t=>({u_matrix:new e.cc(t),u_image0:new e.c8(t),u_skirt_height:new e.ca(t),u_ground_shadow_factor:new e.c9(t)}),skybox:t=>({u_matrix:new e.cc(t),u_sun_direction:new e.c9(t),u_cubemap:new e.c8(t),u_opacity:new e.ca(t),u_temporal_offset:new e.ca(t)}),skyboxGradient:t=>({u_matrix:new e.cc(t),u_color_ramp:new e.c8(t),u_center_direction:new e.c9(t),u_radius:new e.ca(t),u_opacity:new e.ca(t),u_temporal_offset:new e.ca(t)}),skyboxCapture:t=>({u_matrix_3f:new e.dj(t),u_sun_direction:new e.c9(t),u_sun_intensity:new e.ca(t),u_color_tint_r:new e.cQ(t),u_color_tint_m:new e.cQ(t),u_luminance:new e.ca(t)}),globeRaster:t=>({u_proj_matrix:new e.cc(t),u_globe_matrix:new e.cc(t),u_normalize_matrix:new e.cc(t),u_merc_matrix:new e.cc(t),u_zoom_transition:new e.ca(t),u_merc_center:new e.cb(t),u_image0:new e.c8(t),u_grid_matrix:new e.dj(t),u_skirt_height:new e.ca(t),u_far_z_cutoff:new e.ca(t),u_frustum_tl:new e.c9(t),u_frustum_tr:new e.c9(t),u_frustum_br:new e.c9(t),u_frustum_bl:new e.c9(t),u_globe_pos:new e.c9(t),u_globe_radius:new e.ca(t),u_viewport:new e.cb(t)}),globeAtmosphere:t=>({u_frustum_tl:new e.c9(t),u_frustum_tr:new e.c9(t),u_frustum_br:new e.c9(t),u_frustum_bl:new e.c9(t),u_horizon:new e.ca(t),u_transition:new e.ca(t),u_fadeout_range:new e.ca(t),u_color:new e.cQ(t),u_high_color:new e.cQ(t),u_space_color:new e.cQ(t),u_temporal_offset:new e.ca(t),u_horizon_angle:new e.ca(t)}),model:t=>({u_matrix:new e.cc(t),u_lighting_matrix:new e.cc(t),u_normal_matrix:new e.cc(t),u_node_matrix:new e.cc(t),u_lightpos:new e.c9(t),u_lightintensity:new e.ca(t),u_lightcolor:new e.c9(t),u_camera_pos:new e.c9(t),u_opacity:new e.ca(t),u_baseColorFactor:new e.cQ(t),u_emissiveFactor:new e.cQ(t),u_metallicFactor:new e.ca(t),u_roughnessFactor:new e.ca(t),u_baseTextureIsAlpha:new e.c8(t),u_alphaMask:new e.c8(t),u_alphaCutoff:new e.ca(t),u_baseColorTexture:new e.c8(t),u_metallicRoughnessTexture:new e.c8(t),u_normalTexture:new e.c8(t),u_occlusionTexture:new e.c8(t),u_emissionTexture:new e.c8(t),u_lutTexture:new e.c8(t),u_color_mix:new e.cQ(t),u_aoIntensity:new e.ca(t),u_emissive_strength:new e.ca(t),u_occlusionTextureTransform:new e.cQ(t)}),modelDepth:t=>({u_matrix:new e.cc(t),u_instance:new e.cc(t),u_node_matrix:new e.cc(t)}),groundShadow:t=>({u_matrix:new e.cc(t),u_ground_shadow_factor:new e.c9(t)}),stars:t=>({u_matrix:new e.cc(t),u_up:new e.c9(t),u_right:new e.c9(t),u_intensity_multiplier:new e.ca(t)}),snowParticle:t=>({u_modelview:new e.cc(t),u_projection:new e.cc(t),u_time:new e.ca(t),u_cam_pos:new e.c9(t),u_velocityConeAperture:new e.ca(t),u_velocity:new e.ca(t),u_horizontalOscillationRadius:new e.ca(t),u_horizontalOscillationRate:new e.ca(t),u_boxSize:new e.ca(t),u_billboardSize:new e.ca(t),u_simpleShapeParameters:new e.cb(t),u_screenSize:new e.cb(t),u_thinningCenterPos:new e.cb(t),u_thinningShape:new e.c9(t),u_thinningAffectedRatio:new e.ca(t),u_thinningParticleOffset:new e.ca(t),u_particleColor:new e.cQ(t),u_direction:new e.c9(t)}),rainParticle:t=>({u_modelview:new e.cc(t),u_projection:new e.cc(t),u_time:new e.ca(t),u_cam_pos:new e.c9(t),u_texScreen:new e.c8(t),u_velocityConeAperture:new e.ca(t),u_velocity:new e.ca(t),u_boxSize:new e.ca(t),u_rainDropletSize:new e.cb(t),u_distortionStrength:new e.ca(t),u_rainDirection:new e.c9(t),u_color:new e.cQ(t),u_screenSize:new e.cb(t),u_thinningCenterPos:new e.cb(t),u_thinningShape:new e.c9(t),u_thinningAffectedRatio:new e.ca(t),u_thinningParticleOffset:new e.ca(t),u_shapeDirectionalPower:new e.ca(t),u_shapeNormalPower:new e.ca(t),u_mode:new e.ca(t)}),vignette:t=>({u_vignetteShape:new e.c9(t),u_vignetteColor:new e.cQ(t)}),occlusion:t=>({u_matrix:new e.cc(t),u_anchorPos:new e.c9(t),u_screenSizePx:new e.cb(t),u_occluderSizePx:new e.cb(t),u_color:new e.cQ(t)})};class ko{constructor(e,t,i,r){this.id=ko.uniqueIdxCounter,ko.uniqueIdxCounter++,this.context=e;const n=e.gl;this.buffer=n.createBuffer(),this.dynamicDraw=Boolean(i),this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),n.bufferData(n.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?n.DYNAMIC_DRAW:n.STATIC_DRAW),this.dynamicDraw||r||t.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){this.id=ko.uniqueIdxCounter,ko.uniqueIdxCounter++;const t=this.context.gl;this.context.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}ko.uniqueIdxCounter=0;const Po={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Oo{constructor(e,t,i,r,n,o){this.length=t.length,this.attributes=i,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.instanceCount=o,this.context=e;const a=e.gl;this.buffer=a.createBuffer(),e.bindVertexBuffer.set(this.buffer),a.bufferData(a.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?a.DYNAMIC_DRAW:a.STATIC_DRAW),this.dynamicDraw||n||t.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){const t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,t){for(let i=0;i<this.attributes.length;i++){const r=t.attributes[this.attributes[i].name];void 0!==r&&e.enableVertexAttribArray(r)}}setVertexAttribPointers(e,t,i){for(let r=0;r<this.attributes.length;r++){const n=this.attributes[r],o=t.attributes[n.name];void 0!==o&&e.vertexAttribPointer(o,n.components,e[Po[n.type]],!1,this.itemSize,n.offset+this.itemSize*(i||0))}}setVertexAttribDivisor(e,t,i){for(let r=0;r<this.attributes.length;r++){const n=t.attributes[this.attributes[r].name];void 0!==n&&this.instanceCount&&this.instanceCount>0&&e.vertexAttribDivisor(n,i)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ro{constructor(e,t,i,r,n){this.context=e,this.width=t,this.height=i;const o=this.framebuffer=e.gl.createFramebuffer();r&&(this.colorAttachment=new kn(e,o)),n&&(this.depthAttachmentType=n,this.depthAttachment="renderbuffer"===n?new Pn(e,o):new On(e,o))}destroy(){const e=this.context.gl;if(this.colorAttachment){const t=this.colorAttachment.get();t&&e.deleteTexture(t)}if(this.depthAttachment&&this.depthAttachmentType)if("renderbuffer"===this.depthAttachmentType){const t=this.depthAttachment.get();t&&e.deleteRenderbuffer(t)}else{const t=this.depthAttachment.get();t&&e.deleteTexture(t)}e.deleteFramebuffer(this.framebuffer)}}class zo{constructor(e,t){this.gl=e,this.clearColor=new Qr(this),this.clearDepth=new $r(this),this.clearStencil=new en(this),this.colorMask=new tn(this),this.depthMask=new rn(this),this.stencilMask=new nn(this),this.stencilFunc=new on(this),this.stencilOp=new an(this),this.stencilTest=new sn(this),this.depthRange=new ln(this),this.depthTest=new cn(this),this.depthFunc=new un(this),this.blend=new hn(this),this.blendFunc=new dn(this),this.blendColor=new pn(this),this.blendEquation=new fn(this),this.cullFace=new mn(this),this.cullFaceSide=new gn(this),this.frontFace=new yn(this),this.program=new _n(this),this.activeTexture=new vn(this),this.viewport=new xn(this),this.bindFramebuffer=new Cn(this),this.bindRenderbuffer=new wn(this),this.bindTexture=new bn(this),this.bindVertexBuffer=new Sn(this),this.bindElementBuffer=new Ln(this),this.bindVertexArrayOES=new Tn(this),this.pixelStoreUnpack=new Mn(this),this.pixelStoreUnpackPremultiplyAlpha=new En(this),this.pixelStoreUnpackFlipY=new In(this),this.options=t?Object.assign({},t):{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=e.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=e.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=e.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=t&&!!t.forceManualRenderingForInstanceIDShaders||this.renderer&&-1!==this.renderer.indexOf("PowerVR"),this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=e.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=e.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=e.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.maxPointSize=e.getParameter(e.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,t,i){return new ko(this,e,t,i)}createVertexBuffer(e,t,i,r,n){return new Oo(this,e,t,i,r,n)}createRenderbuffer(e,t,i){const r=this.gl,n=r.createRenderbuffer();return this.bindRenderbuffer.set(n),r.renderbufferStorage(r.RENDERBUFFER,e,t,i),this.bindRenderbuffer.set(null),n}createFramebuffer(e,t,i,r){return new Ro(this,e,t,i,r)}clear(e){let{color:t,depth:i,stencil:r,colorMask:n}=e;const o=this.gl;let a=0;t&&(a|=o.COLOR_BUFFER_BIT,this.clearColor.set(t.toNonPremultipliedRenderColor(null)),this.colorMask.set(n||[!0,!0,!0,!0])),void 0!==i&&(a|=o.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(i),this.depthMask.set(!0)),void 0!==r&&(a|=o.STENCIL_BUFFER_BIT,this.clearStencil.set(r),this.stencilMask.set(255)),o.clear(a)}setCullFace(e){!1===e.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(t){e.bv(t.blendFunction,Ui.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(t.blendFunction),this.blendColor.set(t.blendColor),t.blendEquation?this.blendEquation.set(t.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(t.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Do;function Fo(t,i,r,n,o,a,s){const l=t.context,c=l.gl,u=t.transform,h=t.getOrCreateProgram("collisionBox"),d=[];let p=0,f=0;for(let C=0;C<n.length;C++){const l=n[C],m=i.getTile(l),g=m.getBucket(r);if(!g)continue;const y=di(l,g,u);let _=y;0===o[0]&&0===o[1]||(_=t.translatePosMatrix(y,m,o,a));const v=s?g.textCollisionBox:g.iconCollisionBox,x=g.collisionCircleArray;if(x.length>0){const t=e.bz(),i=_;e.cB(t,g.placementInvProjMatrix,u.glCoordMatrix),e.cB(t,t,g.placementViewportMatrix),d.push({circleArray:x,circleOffset:f,transform:i,invTransform:t,projection:g.getProjection()}),p+=x.length/4,f=p}v&&(t.terrain&&t.terrain.setupElevationDraw(m,h),h.draw(t,c.LINES,ji.disabled,Zi.disabled,t.colorModeForRenderPass(),qi.disabled,uo(_,u,m,g.getProjection()),r.id,v.layoutVertexBuffer,v.indexBuffer,v.segments,null,u.zoom,null,[v.collisionVertexBuffer,v.collisionVertexBufferExt]))}if(!s||!d.length)return;const m=t.getOrCreateProgram("collisionCircle"),g=new e.dI;g.resize(4*p),g._trim();let y=0;for(const e of d)for(let t=0;t<e.circleArray.length/4;t++){const i=4*t,r=e.circleArray[i+0],n=e.circleArray[i+1],o=e.circleArray[i+2],a=e.circleArray[i+3];g.emplace(y++,r,n,o,a,0),g.emplace(y++,r,n,o,a,1),g.emplace(y++,r,n,o,a,2),g.emplace(y++,r,n,o,a,3)}(!Do||Do.length<2*p)&&(Do=function(t){const i=2*t,r=new e.a_;r.resize(i),r._trim();for(let e=0;e<i;e++){const t=6*e;r.uint16[t+0]=4*e+0,r.uint16[t+1]=4*e+1,r.uint16[t+2]=4*e+2,r.uint16[t+3]=4*e+2,r.uint16[t+4]=4*e+3,r.uint16[t+5]=4*e+0}return r}(p));const _=l.createIndexBuffer(Do,!0),v=l.createVertexBuffer(g,e.dJ.members,!0);for(const C of d){const i={u_matrix:C.transform,u_inv_matrix:C.invTransform,u_camera_to_center_distance:(x=u).getCameraToCenterDistance(C.projection),u_viewport_size:[x.width,x.height]};m.draw(t,c.TRIANGLES,ji.disabled,Zi.disabled,t.colorModeForRenderPass(),qi.disabled,i,r.id,v,_,e.bd.simpleSegment(0,2*C.circleOffset,C.circleArray.length,C.circleArray.length/2),null,u.zoom)}var x;v.destroy(),_.destroy()}const Bo=e.bz();function Vo(t){const i=t._camera.getWorldToCamera(t.worldSize,1),r=e.az([],i,t.globeMatrix);e.bi(r,r);const n=[0,0,0],o=[0,1,0,0];return e.aA(o,o,r),n[0]=o[0],n[1]=o[1],n[2]=o[2],e.au(n,n),n}function No(t,i){let{width:r,height:n,anchor:o,textOffset:a,textScale:s}=t;const{horizontalAlign:l,verticalAlign:c}=e.bT(o),u=-(l-.5)*r,h=-(c-.5)*n,d=e.bU(o,a);return new e.P((u/s+d[0])*i,(h/s+d[1])*i)}function Uo(t,i,r,n,o,a,s,l,c,u){const h=t.text.placedSymbolArray,d=t.text.dynamicLayoutVertexArray,p=t.icon.dynamicLayoutVertexArray,f={},m=t.getProjection(),g=pi(s,m,o),y=o.elevation,_=m.upVectorScale(s.canonical,o.center.lat,o.worldSize).metersToTile;d.clear();for(let v=0;v<h.length;v++){const p=h.get(v),{tileAnchorX:x,tileAnchorY:C,numGlyphs:w}=p,b=p.hidden||!p.crossTileID||t.allowVerticalPlacement&&!p.placedOrientation?null:n[p.crossTileID];if(b){let n=0,h=0,v=0;if(y){const e=y?y.getAtTileOffset(s,x,C):0,[t,i,r]=m.upVector(s.canonical,x,C);n=e*t*_,h=e*i*_,v=e*r*_}let[S,L,T,M]=Jt(p.projectedAnchorX+n,p.projectedAnchorY+h,p.projectedAnchorZ+v,r?g:a);const E=Qt(o.getCameraToCenterDistance(m),M);let I=e.bJ(t.textSizeData,c,p)*E/e.bO;r&&(I*=t.tilePixelRatio/l);const A=No(b,I);r?(({x:S,y:L,z:T}=m.projectTilePoint(x+A.x,C+A.y,s.canonical)),[S,L,T]=Jt(S+n,L+h,T+v,a)):(i&&A._rotate(-o.angle),S+=A.x,L+=A.y,T=0);const k=t.allowVerticalPlacement&&p.placedOrientation===e.bI.vertical?Math.PI/2:0;for(let t=0;t<w;t++)e.bL(d,S,L,T,k);u&&p.associatedIconIndex>=0&&(f[p.associatedIconIndex]={x:S,y:L,z:T,angle:k})}else si(w,d)}if(u){p.clear();const i=t.icon.placedSymbolArray;for(let t=0;t<i.length;t++){const r=i.get(t),{numGlyphs:n}=r,o=f[t];if(r.hidden||!o)si(n,p);else{const{x:t,y:i,z:r,angle:a}=o;for(let o=0;o<n;o++)e.bL(p,t,i,r,a)}}t.icon.dynamicLayoutVertexBuffer.updateData(p)}t.text.dynamicLayoutVertexBuffer.updateData(d)}function jo(t,i,r,n,o,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};const l=r.paint.get("icon-translate"),c=r.paint.get("text-translate"),u=r.paint.get("icon-translate-anchor"),h=r.paint.get("text-translate-anchor"),d=r.layout.get("icon-rotation-alignment"),p=r.layout.get("text-rotation-alignment"),f=r.layout.get("icon-pitch-alignment"),m=r.layout.get("text-pitch-alignment"),g=r.layout.get("icon-keep-upright"),y=r.layout.get("text-keep-upright"),_=r.paint.get("icon-color-saturation"),v=r.paint.get("icon-color-contrast"),x=r.paint.get("icon-color-brightness-min"),C=r.paint.get("icon-color-brightness-max"),w="sea"===r.layout.get("symbol-elevation-reference"),b=t.context,S=b.gl,L=t.transform,T="map"===d,M="map"===p,E="map"===f,I="map"===m,A=void 0!==r.layout.get("symbol-sort-key").constantOr(1);let k=!1;const P=t.depthModeForSublayer(0,ji.ReadOnly),O=new ji(t.context.gl.LEQUAL,ji.ReadOnly,t.depthRangeFor3D),R=[e.aD(L.center.lng),e.aH(L.center.lat)],z=r.layout.get("text-variable-anchor"),D="globe"===L.projection.name,F=[],B=[0,-1,0];for(const V of n){const n=i.getTile(V),o=n.getBucket(r);if(!o)continue;if("mercator"===o.projection.name&&D)continue;if(o.fullyClipped)continue;const a="globe"===o.projection.name,d=a?e.ah(L.zoom):0,p=pi(V,o.getProjection(),L),f=L.calculatePixelsToTileUnitsMatrix(n),m=z&&o.hasTextData(),b=o.hasIconTextFit()&&m&&o.hasIconData(),N=o.getProjection().createInversionMatrix(L,V.canonical),U=(1<<n.tileID.canonical.z)*e.aj/t.transform.worldSize,j=e=>{let i=[0,0,0];if(e){const e=t.style.directionalLight,r=t.style.ambientLight;e&&r&&(i=ur(t.style,e,r))}return i},H=e=>{L.depthOcclusionForSymbolsAndCircles&&(r.hasInitialOcclusionOpacityProperties||t.terrain)&&(e.push("DEPTH_D24"),e.push("DEPTH_OCCLUSION"))},Z=()=>{const i=T&&"point"!==r.layout.get("symbol-placement"),s=[];H(s);const c=i||b,h="road"===o.elevationType&&E,m=t.shadowRenderer,y=h&&!!m&&m.enabled,M=j(y),I=h?O:P,A=r.paint.get("icon-image-cross-fade");t.terrainRenderModeElevated()&&E&&s.push("PITCH_WITH_MAP_TERRAIN"),a&&(s.push("PROJECTION_GLOBE_VIEW"),c&&s.push("PROJECTED_POS_ON_VIEWPORT")),A>0&&s.push("ICON_TRANSITION"),o.icon.zOffsetVertexBuffer&&s.push("Z_OFFSET"),0===_&&0===v&&0===x&&1===C||s.push("COLOR_ADJUSTMENT"),o.sdfIcons&&s.push("RENDER_SDF"),y&&s.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),h&&o.icon.orientationVertexBuffer&&s.push("ELEVATED_ROADS");const k=o.icon.programConfigurations.get(r.id),z=t.getOrCreateProgram("symbol",{config:k,defines:s}),F=n.imageAtlasTexture?n.imageAtlasTexture.size:[0,0],Z=o.iconSizeData,W=e.bH(Z,L.zoom),G=E||!L.isOrthographic,q=Xt(p,n.tileID.canonical,E,T,L,o.getProjection(),f),X=Kt(p,n.tileID.canonical,E,T,L,o.getProjection(),f),Y=t.translatePosMatrix(X,n,l,u,!0),K=t.translatePosMatrix(p,n,l,u),J=c?Bo:q,Q=T&&!E&&!i;let $=B;!D&&!L.mercatorFromTransition||T||($=Vo(L));const ee=a?$:B,te=r.getColorAdjustmentMatrix(_,v,x,C),ie=So(Z.kind,W,Q,E,t,K,J,Y,w,!1,F,[0,0],0,V,d,R,N,ee,o.getProjection(),M,U,te,A,null),re=n.imageAtlasTexture?n.imageAtlasTexture:null,ne=1!==r.layout.get("icon-size").constantOr(0)||o.iconsNeedLinear,oe=o.sdfIcons||t.options.rotating||t.options.zooming||ne||G?S.LINEAR:S.NEAREST,ae=o.sdfIcons&&0!==r.paint.get("icon-halo-width").constantOr(1),se=t.terrain&&E&&i?e.bi(e.bz(),q):Bo;if(i&&o.icon){const e=L.elevation,i=e?e.getAtTileOffsetFunc(V,L.center.lat,L.worldSize,o.getProjection()):null,r=Yt(p,n.tileID.canonical,E,T,L,o.getProjection(),f);ei(o,p,t,!1,r,X,E,g,i,V)}return{program:z,buffers:o.icon,uniformValues:ie,atlasTexture:re,atlasTextureIcon:null,atlasInterpolation:oe,atlasInterpolationIcon:null,isSDF:o.sdfIcons,hasHalo:ae,depthMode:I,tile:n,renderWithShadows:y,labelPlaneMatrixInv:se}},W=()=>{const i=M&&"point"!==r.layout.get("symbol-placement"),s=[],l=i||z||b,u="road"===o.elevationType&&I,m=t.shadowRenderer,g=u&&!!m&&m.enabled,_=j(g),v=u?O:P;t.terrainRenderModeElevated()&&I&&s.push("PITCH_WITH_MAP_TERRAIN"),a&&(s.push("PROJECTION_GLOBE_VIEW"),l&&s.push("PROJECTED_POS_ON_VIEWPORT")),o.text.zOffsetVertexBuffer&&s.push("Z_OFFSET"),o.iconsInText&&s.push("RENDER_TEXT_AND_SYMBOL"),s.push("RENDER_SDF"),g&&s.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),u&&o.text.orientationVertexBuffer&&s.push("ELEVATED_ROADS"),H(s);const x=o.text.programConfigurations.get(r.id),C=t.getOrCreateProgram("symbol",{config:x,defines:s});let T,E=[0,0],A=null;const k=o.textSizeData;o.iconsInText&&(E=n.imageAtlasTexture?n.imageAtlasTexture.size:[0,0],A=n.imageAtlasTexture?n.imageAtlasTexture:null,T=I||!L.isOrthographic||t.options.rotating||t.options.zooming||"composite"===k.kind||"camera"===k.kind?S.LINEAR:S.NEAREST);const F=n.glyphAtlasTexture?n.glyphAtlasTexture.size:[0,0],Z=r.layout.get("text-size-scale-range"),W=e.ay(t.scaleFactor,Z[0],Z[1]),G=e.bH(k,L.zoom,W),q=Xt(p,n.tileID.canonical,I,M,L,o.getProjection(),f),X=Kt(p,n.tileID.canonical,I,M,L,o.getProjection(),f),Y=t.translatePosMatrix(X,n,c,h,!0),K=t.translatePosMatrix(p,n,c,h),J=l?Bo:q,Q=M&&!I&&!i;let $=B;!D&&!L.mercatorFromTransition||M||($=Vo(L));const ee=So(k.kind,G,Q,I,t,K,J,Y,w,!0,F,E,0,V,d,R,N,a?$:B,o.getProjection(),_,U,null,null,W),te=n.glyphAtlasTexture?n.glyphAtlasTexture:null,ie=S.LINEAR,re=0!==r.paint.get("text-halo-width").constantOr(1),ne=t.terrain&&I&&i?e.bi(e.bz(),q):Bo;if(i&&o.text){const e=L.elevation,i=e?e.getAtTileOffsetFunc(V,L.center.lat,L.worldSize,o.getProjection()):null,r=Yt(p,n.tileID.canonical,I,M,L,o.getProjection(),f);ei(o,p,t,!0,r,X,I,y,i,V)}return{program:C,buffers:o.text,uniformValues:ee,atlasTexture:te,atlasTextureIcon:A,atlasInterpolation:ie,atlasInterpolationIcon:T,isSDF:!0,hasHalo:re,depthMode:v,tile:n,renderWithShadows:g,labelPlaneMatrixInv:ne}},G=o.icon.segments.get().length,q=o.text.segments.get().length,X=G&&!s.onlyText?Z():null,Y=q&&!s.onlyIcons?W():null,K=r.paint.get("icon-opacity").constantOr(1),J=r.paint.get("text-opacity").constantOr(1);if(A&&o.canOverlap){k=!0;const t=K&&!s.onlyText?o.icon.segments.get():[],i=J&&!s.onlyIcons?o.text.segments.get():[];for(const r of t)F.push({segments:new e.bd([r]),sortKey:r.sortKey,state:X});for(const r of i)F.push({segments:new e.bd([r]),sortKey:r.sortKey,state:Y})}else s.onlyText||F.push({segments:K?o.icon.segments:new e.bd([]),sortKey:0,state:X}),s.onlyIcons||F.push({segments:J?o.text.segments:new e.bd([]),sortKey:0,state:Y})}k&&F.sort((e,t)=>e.sortKey-t.sortKey);for(const e of F){const i=e.state;if(i)if(t.terrain?t.terrain.setupElevationDraw(i.tile,i.program,{useDepthForOcclusion:L.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:i.labelPlaneMatrixInv}):t.setupDepthForOcclusion(L.depthOcclusionForSymbolsAndCircles,i.program),b.activeTexture.set(S.TEXTURE0),i.atlasTexture&&i.atlasTexture.bind(i.atlasInterpolation,S.CLAMP_TO_EDGE,!0),i.atlasTextureIcon&&(b.activeTexture.set(S.TEXTURE1),i.atlasTextureIcon&&i.atlasTextureIcon.bind(i.atlasInterpolationIcon,S.CLAMP_TO_EDGE,!0)),i.renderWithShadows&&t.shadowRenderer.setupShadows(i.tile.tileID.toUnwrapped(),i.program,"vector-tile",i.tile.tileID.overscaledZ),t.uploadCommonLightUniforms(t.context,i.program),i.hasHalo){const n=i.uniformValues;n.u_is_halo=1,Ho(i.buffers,e.segments,r,t,i.program,i.depthMode,o,a,n,2),n.u_is_halo=0}else{if(i.isSDF){const n=i.uniformValues;i.hasHalo&&(n.u_is_halo=1,Ho(i.buffers,e.segments,r,t,i.program,i.depthMode,o,a,n,1)),n.u_is_halo=0}Ho(i.buffers,e.segments,r,t,i.program,i.depthMode,o,a,i.uniformValues,1)}}}function Ho(e,t,i,r,n,o,a,s,l,c){const u=[e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer,e.iconTransitioningVertexBuffer,e.globeExtVertexBuffer,e.zOffsetVertexBuffer,e.orientationVertexBuffer];n.draw(r,r.context.gl.TRIANGLES,o,a,s,qi.disabled,l,i.id,e.layoutVertexBuffer,e.indexBuffer,t,i.paint,r.transform.zoom,e.programConfigurations.get(i.id),u,c)}function Zo(t,i){const r=1<<t.canonical.z,n=(i.x*r-t.canonical.x-t.wrap*r)*e.aj,o=(i.y*r-t.canonical.y)*e.aj,a=e.dS(i.z,i.y);return e.cS(n,o,a)}function Wo(t,i,r,n,o){if(!r.layout||"none"===r.layout.get("fill-elevation-reference"))return;const a=t.context.gl,s=new ji(t.context.gl.LEQUAL,ji.ReadWrite,t.depthRangeFor3D),l=new ji(t.context.gl.GREATER,ji.ReadWrite,t.depthRangeFor3D),c=function(t){const i=e.cJ(t.pitch);let r=.01;return t.isOrthographic&&(r=e.ai(1e-4,r,e.cN(i>=tr?1:i/tr))),2*r}(t.transform),u=t.transform.getFreeCameraOptions().position,h="elevatedStructuresDepthReconstruct",d=t.getOrCreateProgram(h,{defines:["DEPTH_RECONSTRUCTION"]}),p=t.getOrCreateProgram(h);for(const e of n){const n=i.getTile(e),h=n.getBucket(r);if(!h)continue;const f=h.elevatedStructures;if(!f)continue;const m=h.elevationBufferData.heightRange,g=Zo(e.toUnwrapped(),u),y=t.translatePosMatrix(e.projMatrix,n,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));let _,v,x,C;if("initialize"===o){if(!m||m.min>=1||0===f.depthSegments.segments[0].primitiveLength)continue;_=co(y,g,c,1,0),v=s,x=f.depthSegments,C=d}else if("reset"===o){if(!m||m.min>=0||0===f.maskSegments.segments[0].primitiveLength)continue;_=co(y,g,0,0,1),v=l,x=f.maskSegments,C=d}else if("geometry"===o){if(0===f.depthSegments.segments[0].primitiveLength)continue;_=co(y,g,c,1,0),v=s,x=f.depthSegments,C=p}C.draw(t,a.TRIANGLES,v,Zi.disabled,Ui.disabled,qi.disabled,_,r.id,f.vertexBuffer,f.indexBuffer,x,r.paint,t.transform.zoom)}}function Go(t,i,r){const{painter:n,sourceCache:o,layer:a,coords:s,colorMode:l,elevationType:c,terrainEnabled:u,pass:h}=t,d=n.context.gl,p=a.paint.get("fill-pattern"),f=a.paint.get("fill-pattern-cross-fade"),m=p.constantOr(null);let g=c;"road"!==c||i&&!u||(g="none");const y="road"===g,_=t.painter.shadowRenderer,v=y&&!!_&&_.enabled,x=new ji(n.context.gl.LEQUAL,ji.ReadOnly,n.depthRangeFor3D);let C=[0,0,0];if(v){const e=n.style.directionalLight,t=n.style.ambientLight;e&&t&&(C=ur(n.style,e,t))}const w=p&&p.constantOr(1),b=(t,h)=>{let p,g,b,S,L;h?(p=w&&!a.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",b=d.LINES):(p=w?"fillPattern":"fill",b=d.TRIANGLES);for(const T of s){const s=o.getTile(T);if(w&&!s.patternsLoaded())continue;const M=s.getBucket(a);if(!M)continue;const E=i?M.elevationBufferData:M.bufferData;if(E.isEmpty())continue;n.prepareDrawTile();const I=E.programConfigurations.get(a.id),A=n.isTileAffectedByFog(T),k=[],P=[];y&&(k.push("ELEVATED_ROADS"),P.push(E.elevatedLayoutVertexBuffer)),v&&k.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET"),w&&(n.context.activeTexture.set(d.TEXTURE0),s.imageAtlasTexture&&s.imageAtlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE),I.updatePaintBuffers());let O=!1;if(m&&s.imageAtlas){const t=s.imageAtlas,i=e.dN.from(m),r=i.getPrimary().scaleSelf(e.q.devicePixelRatio).toString(),n=i.getSecondary(),o=t.patternPositions.get(r),a=n?t.patternPositions.get(n.scaleSelf(e.q.devicePixelRatio).toString()):null;O=!!o&&!!a,o&&I.setConstantPatternPositions(o,a)}f>0&&(O||I.getPatternTransitionVertexBuffer("fill-pattern"))&&k.push("FILL_PATTERN_TRANSITION");const R=n.getOrCreateProgram(p,{config:I,overrideFog:A,defines:k}),z=n.translatePosMatrix(T.projMatrix,s,a.paint.get("fill-translate"),a.paint.get("fill-translate-anchor"));v&&_.setupShadows(s.tileID.toUnwrapped(),R,"vector-tile",s.tileID.overscaledZ);const D=a.paint.get("fill-emissive-strength");if(h){S=E.lineIndexBuffer,L=E.lineSegments;const e=n.terrain&&n.terrain.renderingToTexture?n.terrain.drapeBufferSize:[d.drawingBufferWidth,d.drawingBufferHeight];g="fillOutlinePattern"===p&&w?so(z,D,n,s,e,C,f):ao(z,D,e,C)}else S=E.indexBuffer,L=E.triangleSegments,g=w?oo(z,D,n,s,C,f):no(z,D,C);n.uploadCommonUniforms(n.context,R,T.toUnwrapped());let F=t;("road"===c&&!u||"offset"===c)&&(F=x),R.draw(n,b,F,r||n.stencilModeForClipping(T),l,qi.disabled,g,a.id,E.layoutVertexBuffer,S,L,a.paint,n.transform.zoom,I,P)}};n.renderPass===h&&b(n.depthModeForSublayer(1,"opaque"===n.renderPass?ji.ReadWrite:ji.ReadOnly),!1),"none"===g&&"translucent"===n.renderPass&&a.paint.get("fill-antialias")&&b(n.depthModeForSublayer(a.getPaintProperty("fill-outline-color")?2:0,ji.ReadOnly),!0)}function qo(t,i,r,n,o,a,s,l){r.resetLayerRenderingStats(t);const c=t.context,u=c.gl,h=t.transform,d=r.paint.get("fill-extrusion-pattern"),p=r.paint.get("fill-extrusion-pattern-cross-fade"),f=d.constantOr(null),m=d.constantOr(1),g=r.paint.get("fill-extrusion-opacity"),y=t.style.enable3dLights(),_=r.paint.get(y&&!m?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),v=[r.paint.get("fill-extrusion-ambient-occlusion-intensity"),_],x=r.layout.get("fill-extrusion-edge-radius"),C=x>0&&!r.paint.get("fill-extrusion-rounded-roof"),w=C?0:x,b="globe"===h.projection.name?e.dV():0,S="globe"===h.projection.name,L=S?e.ah(h.zoom):0,T=[e.aD(h.center.lng),e.aH(h.center.lat)],M="none"===r.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default"),E=r.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(M?null:r.lut).toArray01().slice(0,3),I=r.paint.get("fill-extrusion-flood-light-intensity"),A=r.paint.get("fill-extrusion-vertical-scale"),k=0!==r.paint.get("fill-extrusion-line-width").constantOr(1),P=r.paint.get("fill-extrusion-height-alignment"),O=r.paint.get("fill-extrusion-base-alignment"),R=rr(t,r.paint.get("fill-extrusion-cutoff-fade-range")),z=[];let D;S&&z.push("PROJECTION_GLOBE_VIEW"),v[0]>0&&z.push("FAUX_AO"),C&&z.push("ZERO_ROOF_RADIUS"),l&&z.push("HAS_CENTROID"),I>0&&z.push("FLOOD_LIGHT"),R.shouldRenderCutoff&&z.push("RENDER_CUTOFF"),k&&z.push("RENDER_WALL_MODE");const F="shadow"===t.renderPass,B=t.shadowRenderer,V=F&&!!B,N=F?qi.disabled:qi.backCCW;t.shadowRenderer&&(t.shadowRenderer.useNormalOffset=!0);let U=[0,0,0];if(B){const e=t.style.directionalLight,i=t.style.ambientLight;e&&i&&(U=ur(t.style,e,i)),F||(z.push("RENDER_SHADOWS","DEPTH_TEXTURE"),B.useNormalOffset&&z.push("NORMAL_OFFSET")),D=z.concat(["SHADOWS_SINGLE_CASCADE"])}const j=V?"fillExtrusionDepth":m?"fillExtrusionPattern":"fillExtrusion",H=r.getLayerRenderingStats();for(const Z of n){const n=i.getTile(Z),d=n.getBucket(r);if(!d||d.projection.name!==h.projection.name)continue;let y=!1;B&&(y=0===B.getMaxCascadeForTile(Z.toUnwrapped()));const _=t.isTileAffectedByFog(Z),x=d.programConfigurations.get(r.id);let C=!1;if(f&&n.imageAtlas){const t=n.imageAtlas,i=e.dN.from(f),r=i.getPrimary().scaleSelf(e.q.devicePixelRatio).toString(),o=i.getSecondary(),a=t.patternPositions.get(r),s=o?t.patternPositions.get(o.scaleSelf(e.q.devicePixelRatio).toString()):null;C=!!a&&!!s,a&&x.setConstantPatternPositions(a,s)}p>0&&(C||x.getPatternTransitionVertexBuffer("fill-extrusion-pattern"))&&z.push("FILL_EXTRUSION_PATTERN_TRANSITION");const M=t.getOrCreateProgram(j,{config:x,defines:y?D:z,overrideFog:_});if(t.terrain&&t.terrain.setupElevationDraw(n,M,{useMeterToDem:!0}),!d.centroidVertexBuffer){const e=M.attributes.a_centroid_pos;void 0!==e&&u.vertexAttrib2f(e,0,0)}!F&&B&&B.setupShadows(n.tileID.toUnwrapped(),M,"vector-tile",n.tileID.overscaledZ),m&&(t.context.activeTexture.set(u.TEXTURE0),n.imageAtlasTexture&&n.imageAtlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),x.updatePaintBuffers());const V=r.paint.get("fill-extrusion-vertical-gradient"),W=1/d.tileToMeter;let G;if(F&&B){if($o(n.tileID,d,t))continue;const e=B.calculateShadowPassMatrixFromTile(n.tileID.toUnwrapped());G=io(e,w,W,A,P,O)}else{const e=t.translatePosMatrix(Z.expandedProjMatrix,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),i=h.projection.createInversionMatrix(h,Z.canonical);G=m?ro(e,t,V,g,v,w,W,Z,n,b,P,O,L,T,i,E,A,p):to(e,t,V,g,v,w,W,Z,b,P,O,L,T,i,E,A,I,U)}t.uploadCommonUniforms(c,M,Z.toUnwrapped(),null,R);let q=d.segments;if("mercator"===h.projection.name&&!F&&(q=d.getVisibleSegments(n.tileID,t.terrain,t.transform.getFrustum(0)),!q.get().length))continue;if(H)if(F)for(const e of q.get())H.numRenderedVerticesInShadowPass+=e.primitiveLength;else for(const e of q.get())H.numRenderedVerticesInTransparentPass+=e.primitiveLength;const X=[];(t.terrain||l)&&X.push(d.centroidVertexBuffer),S&&X.push(d.layoutVertexExtBuffer),k&&X.push(d.wallVertexBuffer),M.draw(t,c.gl.TRIANGLES,o,a,s,N,G,r.id,d.layoutVertexBuffer,d.indexBuffer,q,r.paint,t.transform.zoom,x,X)}t.shadowRenderer&&(t.shadowRenderer.useNormalOffset=!1)}function Xo(t,i,r,n,o,a,s,l,c,u,h,d,p,f,m,g,y,_,v){const x=t.context,C=x.gl,w=t.transform,b=t.transform.zoom,S=[],L=rr(t,r.paint.get("fill-extrusion-cutoff-fade-range"));"clear"===u?(S.push("CLEAR_SUBPASS"),v&&(S.push("CLEAR_FROM_TEXTURE"),x.activeTexture.set(C.TEXTURE0),v.bind(C.LINEAR,C.CLAMP_TO_EDGE))):"sdf"===u&&S.push("SDF_SUBPASS"),y&&S.push("HAS_CENTROID"),L.shouldRenderCutoff&&S.push("RENDER_CUTOFF");const T=r.layout.get("fill-extrusion-edge-radius"),M=(e,i,n,u,_)=>{const C=i.programConfigurations.get(r.id),w=t.isTileAffectedByFog(e),M=t.getOrCreateProgram("fillExtrusionGroundEffect",{config:C,defines:S,overrideFog:w}),E=((e,t,i,r,n,o,a,s,l,c,u)=>({u_matrix:t,u_opacity:i,u_ao_pass:r?1:0,u_meter_to_tile:n,u_ao:o,u_flood_light_intensity:a,u_flood_light_color:s,u_attenuation:l,u_edge_radius:c,u_fb:0,u_fb_size:u,u_dynamic_offset:1}))(0,u,h,c,_,[d,p*_],f,m,g,b>=17?0:T*_,v?v.size[0]:0),I=[];y&&I.push(i.hiddenByLandmarkVertexBuffer),t.uploadCommonUniforms(x,M,e.toUnwrapped(),null,L),M.draw(t,x.gl.TRIANGLES,o,a,s,l,E,r.id,i.vertexBuffer,i.indexBuffer,n,r.paint,b,C,I)};for(const E of n){const n=i.getTile(E),o=n.getBucket(r);if(!o||o.projection.name!==w.projection.name||!o.groundEffect||o.groundEffect&&!o.groundEffect.hasData())continue;const a=o.groundEffect,s=1/o.tileToMeter;{const e=t.translatePosMatrix(E.projMatrix,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),i=a.getDefaultSegment();M(E,a,i,e,s)}if(_)for(let l=0;l<4;l++){const o=e.dT[l](E),a=i.getTile(o);if(!a)continue;const c=a.getBucket(r);if(!c||c.projection.name!==w.projection.name||!c.groundEffect||c.groundEffect&&!c.groundEffect.hasData())continue;const u=c.groundEffect;let h,d;0===l?(h=[-8192,0,0],d=1):1===l?(h=[e.aj,0,0],d=0):2===l?(h=[0,-8192,0],d=3):(h=[0,e.aj,0],d=2);const p=u.regionSegments[d];if(!p)continue;const f=new Float32Array(16);e.bo(f,E.projMatrix,h),M(E,u,p,t.translatePosMatrix(f,n,r.paint.get("fill-extrusion-translate"),r.paint.get("fill-extrusion-translate-anchor")),s)}}}function Yo(t,i,r,n,o,a,s){0===n.centroidVertexArray.length&&n.createCentroidsBuffer();const l=a?a.findDEMTileFor(r):null;if(!(l&&l.dem||s))return;a&&l&&l.dem&&n.selfDEMTileTimestamp!==l.dem._timestamp&&(n.borderDoneWithNeighborZ=[-1,-1,-1,-1],n.selfDEMTileTimestamp=l.dem._timestamp);const c=t=>new e.P(Math.ceil((t+e.dX)*e.dY),0),u=e=>{const t=i.getSource().minzoom,r=e=>{const t=i.getTileByID(e);if(t&&t.hasData())return t.getBucket(o)},n=[0,-1,1];for(const i of n){if(e.overscaledZ+i<t)continue;const n=r(e.calculateScaledKey(e.overscaledZ+i));if(n)return n}},h=[0,0,0],d=(t,i)=>(h[0]=Math.min(t.min.y,i.min.y),h[1]=Math.max(t.max.y,i.max.y),h[2]=e.aj-i.min.x>t.max.x?i.min.x-e.aj:t.max.x,h),p=(t,i)=>(h[0]=Math.min(t.min.x,i.min.x),h[1]=Math.max(t.max.x,i.max.x),h[2]=e.aj-i.min.y>t.max.y?i.min.y-e.aj:t.max.y,h),f=[(e,t)=>d(e,t),(e,t)=>d(t,e),(e,t)=>p(e,t),(e,t)=>p(t,e)],m=(t,i,n,o,s,c,u)=>{if(!a)return 0;const h=[[c?n:t,c?t:n,0],[c?n:i,c?i:n,0]],d=u<0?e.aj+u:u,p=[c?d:(t+i)/2,c?(t+i)/2:d,0];return 0===n&&u<0||0!==n&&u>0?a.getForTilePoints(s,[p],!0,o):h.push(p),a.getForTilePoints(r,h,!0,l),Math.max(h[0][2],h[1][2],p[2])/a.exaggeration()};for(let _=0;_<4;_++){const t=n.borderFeatureIndices[_];if(0===t.length)continue;const i=e.dT[_](r),o=u(i);if(!(o&&o instanceof e.dU))continue;const l=a?a.findDEMTileFor(i):null;if(!(l&&l.dem||s))continue;if(a&&l&&l.dem&&n.borderDEMTileTimestamp[_]!==l.dem._timestamp&&(n.borderDoneWithNeighborZ[_]=-1,n.borderDEMTileTimestamp[_]=l.dem._timestamp),n.borderDoneWithNeighborZ[_]===o.canonical.z)continue;0===o.centroidVertexArray.length&&o.createCentroidsBuffer();const h=(_<2?1:5)-_,d=o.borderDoneWithNeighborZ[h]!==n.canonical.z,p=o.borderFeatureIndices[h];let v=0;if(n.canonical.z!==o.canonical.z){for(const e of t)n.showCentroid(n.featuresOnBorder[e]);if(d)for(const e of p)o.showCentroid(o.featuresOnBorder[e]);n.borderDoneWithNeighborZ[_]=o.canonical.z,o.borderDoneWithNeighborZ[h]=n.canonical.z}for(const r of t){const t=n.featuresOnBorder[r],a=n.centroidData[t.centroidDataIndex],u=t.borders[_];let d;for(;v<p.length;){d=o.featuresOnBorder[p[v]];const e=d.borders[h];if(e[1]>u[0]+3||e[0]>u[0]-3)break;o.showCentroid(d),v++}if(d&&v<p.length){const r=v;let x=0;for(;!(d.borders[h][0]>u[1]-3)&&(x++,++v!==p.length);)d=o.featuresOnBorder[p[v]];d=o.featuresOnBorder[p[r]];let C=!1;if(x>=1){const e=d.borders[h];Math.abs(u[0]-e[0])<3&&Math.abs(u[1]-e[1])<3&&(x=1,C=!0,v=r+1)}else if(0===x){n.showCentroid(t);continue}const w=o.centroidData[d.centroidDataIndex];s&&C&&(((g=a).flags|(y=w).flags)&e.dW?(g.flags|=e.dW,y.flags|=e.dW):(g.flags&=2147483647,y.flags&=2147483647));const b=t.intersectsCount()>1||d.intersectsCount()>1;if(x>1)v=r,a.centroidXY=w.centroidXY=new e.P(0,0);else if(l&&l.dem&&!b){const t=f[_](a,w),r=_%2?e.aj-1:0,n=m(t[0],Math.min(e.aj-1,t[1]),r,l,i,_<2,t[2]);a.centroidXY=w.centroidXY=c(n)}else b?a.centroidXY=w.centroidXY=new e.P(0,0):(a.centroidXY=n.encodeBorderCentroid(t),w.centroidXY=o.encodeBorderCentroid(d));n.writeCentroidToBuffer(a),o.writeCentroidToBuffer(w)}else n.showCentroid(t)}n.borderDoneWithNeighborZ[_]=o.canonical.z,o.borderDoneWithNeighborZ[h]=n.canonical.z}var g,y;(n.needsCentroidUpdate||!n.centroidVertexBuffer&&0!==n.centroidVertexArray.length)&&n.uploadCentroid(t)}const Ko=[1,0,0],Jo=[0,1,0],Qo=[0,0,1];function $o(t,i,r){const n=r.transform,o=r.shadowRenderer;if(!o)return!0;const a=t.toUnwrapped(),s=n.tileSize*o._cascades[r.currentShadowCascade].scale;let l=i.maxHeight;if(n.elevation){const e=n.elevation.getMinMaxForTile(t);e&&(l+=e.max)}const c=[...o.shadowDirection];c[2]=-c[2];const u=o.computeSimplifiedTileShadowVolume(a,l,s,c);if(!u)return!1;const h=[Ko,Jo,Qo,c,[c[0],0,c[2]],[0,c[1],c[2]]],d="globe"===n.projection.name,p=n.scaleZoom(s),f=e.cn.fromInvProjectionMatrix(n.invProjMatrix,n.worldSize,p,!d),m=o.getCurrentCascadeFrustum();return 0===f.intersectsPrecise(u.vertices,u.planes,h)||0===m.intersectsPrecise(u.vertices,u.planes,h)}function ea(t){return[t[0]*e.dZ,t[1]*e.dZ,t[2]*e.dZ,0]}function ta(t,i,r,n,o,a,s,l,c){const u=n.getSource(),h=r.globeSharedBuffers;if(!h)return;let d,p,f;if(i&&(d=n.getTile(i)),u instanceof e.aP?(p=u.texture,f=e.ds(0,0,r.transform)):d&&i&&(p=d.texture,f=e.ds(i.canonical.z,i.canonical.x,r.transform)),!p||!f)return;t||(f=e.cE(e.bz(),f,[1,-1,1]));const m=r.context,g=m.gl,y="nearest"===o.paint.get("raster-resampling")?g.NEAREST:g.LINEAR,_=r.colorModeForDrapableLayerRenderPass(a),v=s.defines;v.push("GLOBE_POLES");const x=new ji(g.LEQUAL,ji.ReadWrite,r.depthRangeFor3D),C=Float32Array.from(r.transform.expandedFarZProjMatrix),w=Float32Array.from(e.bh(e.dr(new e.cp(0,0,0))));r.terrain&&r.terrain.prepareDrawTile(),m.activeTexture.set(g.TEXTURE0),p.bind(y,g.CLAMP_TO_EDGE),m.activeTexture.set(g.TEXTURE1),p.bind(y,g.CLAMP_TO_EDGE),"useMipmap"in p&&m.extTextureFilterAnisotropic&&r.transform.pitch>20&&g.texParameterf(g.TEXTURE_2D,m.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,m.extTextureFilterAnisotropicMax);const[b,S,L,T]=i?h.getPoleBuffers(i.canonical.z,!1):h.getPoleBuffers(0,!0),M=o.paint.get("raster-elevation");let E;t?(E=b,r.renderDefaultNorthPole=0!==M):(E=S,r.renderDefaultSouthPole=0!==M);const I=ea(s.mix),A=((e,t,i,r,n,o,a,s,l,c,u,h,d)=>yo(e,t,i,new Float32Array(16),new Float32Array(9),[0,0],r,[0,0],[0,0,0,0],1,{opacity:1,mix:0},o,[0,0]||0,s,2,c,u,h,1,0,d))(C,w,f,e.ah(r.transform.zoom),0,o,0,M,0,I,s.offset,s.range,a),k=r.getOrCreateProgram("raster",{defines:v});r.uploadCommonUniforms(m,k,null),k.draw(r,g.TRIANGLES,x,c,_,l,A,o.id,E,L,T)}function ia(e){const t=e._nearZ,i=e.projection.farthestPixelDistance(e),r=i-t,n=.2*e.height,o=t+n;return[t,i,(o-n-t)/r,(o-t)/r]}function ra(e,t,i,r){if(e)return t instanceof st&&e instanceof Tt?t.getTextureDescriptor(e,i,!0):{texture:e.texture,mix:ea(r.mix),offset:r.offset,buffer:0,tileSize:1}}var na=e.d_([{name:"a_index",type:"Int16",components:1}]);class oa{constructor(t,i,r,n){const o={width:r[0],height:r[1],data:null},a=t.gl;this.targetColorTexture=new e.T(t,o,a.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new e.T(t,o,a.RGBA8,{useMipmap:!1}),this.context=t,this.updateParticleTexture(i,n),this.lastInvalidatedAt=0}updateParticleTexture(t,i){if(this.particleTextureDimension===i.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const r=this.context.gl,n=i.width*i.height;this.particleTexture0=new e.T(this.context,i,r.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new e.T(this.context,i,r.RGBA8,{premultiply:!1,useMipmap:!1});const o=new e.d$;o.reserve(n);for(let e=0;e<n;e++)o.emplaceBack(e);this.particleIndexBuffer=this.context.createVertexBuffer(o,na.members,!0),this.particleSegment=e.bd.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=i.width}update(t){return!(this.lastInvalidatedAt<t&&(this.lastInvalidatedAt=e.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function aa(t,i,r){if(!t)return null;const n=i.getTextureDescriptor(t,r,!0);if(!n)return null;let{texture:o,mix:a,offset:s,tileSize:l,buffer:c,format:u}=n;if(!o||!u)return null;let h=!1;return"uint32"===u&&(h=!0,a[3]=0,a=mo(e.e0,a,[0,r.paint.get("raster-particle-max-speed")]),s=go(e.e0,s,[0,r.paint.get("raster-particle-max-speed")])),{texture:o,textureOffset:[c/(l+2*c),l/(l+2*c)],tileSize:l,scalarData:h,scale:a,offset:s,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[u]]}}function sa(e){const t=e._nearZ,i=e.projection.farthestPixelDistance(e),r=i-t,n=.2*e.height,o=t+n;return[t,i,(o-n-t)/r,(o-t)/r]}const la=new e.am(1,0,0,1),ca=new e.am(0,1,0,1),ua=new e.am(0,0,1,1),ha=new e.am(1,0,1,1),da=new e.am(0,1,1,1);function pa(t,i,r,n,o,a){for(let s=0;s<r.length;s++)if(o){const o=1,l=.8,c=new e.am(n.r*l,n.g*l,n.b*l,1);fa(t,i,r[s],n,-1,-1,a),fa(t,i,r[s],n,-1,o,a),fa(t,i,r[s],n,o,o,a),fa(t,i,r[s],n,o,-1,a),fa(t,i,r[s],c,0,0,a)}else fa(t,i,r[s],n,0,0,a)}function fa(t,i,r,n,o,a,s){const l=t.context,c=t.transform,u=l.gl,h="globe"===c.projection.name,d=h?["PROJECTION_GLOBE_VIEW"]:[];let p=e.bw(r.projMatrix);if(h&&e.ah(c.zoom)>0){const t=e.bg(r.canonical,c),i=e.e1(t);p=e.az(new Float32Array(16),c.globeMatrix,i),e.az(p,c.projMatrix,p)}const f=e.bz();f[12]+=2*o/(e.q.devicePixelRatio*c.width),f[13]+=2*a/(e.q.devicePixelRatio*c.height),e.az(p,f,p);const m=t.getOrCreateProgram("debug",{defines:d}),g=i.getTileByID(r.key);t.terrain&&t.terrain.setupElevationDraw(g,m);const y=ji.disabled,_=Zi.disabled,v=t.colorModeForRenderPass(),x="$debug";l.activeTexture.set(u.TEXTURE0),t.emptyTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),h?g._makeGlobeTileDebugBuffers(t.context,c):g._makeDebugTileBoundsBuffers(t.context,c.projection);const C=g._tileDebugBuffer||t.debugBuffer,w=g._tileDebugIndexBuffer||t.debugIndexBuffer,b=g._tileDebugSegments||t.debugSegments;if(m.draw(t,u.LINE_STRIP,y,_,v,qi.disabled,ho(p,n.toPremultipliedRenderColor(null)),x,C,w,b,null,null,null,[g._globeTileDebugBorderBuffer]),s){const e=g.latestRawTileData,i=Math.floor((e&&e.byteLength||0)/1024);let n=r.canonical.toString();r.overscaledZ!==r.canonical.z&&(n+=" => ".concat(r.overscaledZ)),n+=" ".concat(g.state),n+=" ".concat(i,"kb"),function(e,t){e.initDebugOverlayCanvas();const i=e.debugOverlayCanvas,r=e.context.gl,n=e.debugOverlayCanvas.getContext("2d");n.clearRect(0,0,i.width,i.height),n.shadowColor="white",n.shadowBlur=2,n.lineWidth=1.5,n.strokeStyle="white",n.textBaseline="top",n.font="bold 36px Open Sans, sans-serif",n.fillText(t,5,5),n.strokeText(t,5,5),e.debugOverlayTexture.update(i),e.debugOverlayTexture.bind(r.LINEAR,r.CLAMP_TO_EDGE)}(t,n)}const S=i.getTile(r).tileSize,L=512/Math.min(S,512)*(r.overscaledZ/c.zoom)*.5,T=g._tileDebugTextBuffer||t.debugBuffer,M=g._tileDebugTextIndexBuffer||t.quadTriangleIndexBuffer,E=g._tileDebugTextSegments||t.debugSegments;m.draw(t,u.TRIANGLES,y,_,Ui.alphaBlended,qi.disabled,ho(p,e.am.transparent.toPremultipliedRenderColor(null),L),x,T,M,E,null,null,null,[g._globeTileDebugTextBuffer])}function ma(e,t,i,r){ya(e,0,t+i/2,e.transform.width,i,r)}function ga(e,t,i,r){ya(e,t-i/2,0,i,e.transform.height,r)}function ya(t,i,r,n,o,a){const s=t.context,l=s.gl;l.enable(l.SCISSOR_TEST),l.scissor(i*e.q.devicePixelRatio,r*e.q.devicePixelRatio,n*e.q.devicePixelRatio,o*e.q.devicePixelRatio),s.clear({color:a}),l.disable(l.SCISSOR_TEST)}const _a=e.d_([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:va}=_a;function xa(e,t,i,r){e.emplaceBack(t,i,r)}class Ca{constructor(t){this.vertexArray=new e.e2,this.indices=new e.a_,xa(this.vertexArray,-1,-1,1),xa(this.vertexArray,1,-1,1),xa(this.vertexArray,-1,1,1),xa(this.vertexArray,1,1,1),xa(this.vertexArray,-1,-1,-1),xa(this.vertexArray,1,-1,-1),xa(this.vertexArray,-1,1,-1),xa(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=t.createVertexBuffer(this.vertexArray,va),this.indexBuffer=t.createIndexBuffer(this.indices),this.segment=e.bd.simpleSegment(0,0,36,12)}}function wa(t,i,r,n,o,a){const s=t.context.gl,l=i.paint.get("sky-atmosphere-color"),c=i.paint.get("sky-atmosphere-halo-color"),u=i.paint.get("sky-atmosphere-sun-intensity"),h=((e,t,i,r,n)=>({u_matrix_3f:e,u_sun_direction:t,u_sun_intensity:i,u_color_tint_r:[r.r,r.g,r.b,r.a],u_color_tint_m:[n.r,n.g,n.b,n.a],u_luminance:5e-5}))(e.e4(e.dx(),n),o,u,l.toPremultipliedRenderColor(null),c.toPremultipliedRenderColor(null));s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_CUBE_MAP_POSITIVE_X+a,i.skyboxTexture,0),r.draw(t,s.TRIANGLES,ji.disabled,Zi.disabled,Ui.unblended,qi.frontCW,h,"skyboxCapture",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}const ba=e.d_([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class Sa{constructor(t){const i=new e.e5;i.emplaceBack(-1,1,1,0,0),i.emplaceBack(1,1,1,1,0),i.emplaceBack(1,-1,1,1,1),i.emplaceBack(-1,-1,1,0,1);const r=new e.a_;r.emplaceBack(0,1,2),r.emplaceBack(2,3,0),this.vertexBuffer=t.createVertexBuffer(i,ba.members),this.indexBuffer=t.createIndexBuffer(r),this.segments=e.bd.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const La=e.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class Ta{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class Ma{constructor(t){this.colorModeAlphaBlendedWriteRGB=new Ui([1,Ni,1,Ni],e.am.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Ui([1,0,1,0],e.am.transparent,[!1,!1,!1,!0]),this.params=new Ta,this.updateNeeded=!0,t.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),t.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),t.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),t.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(t){const i=t.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new Sa(i);const t=this.params.sizeRange,r=this.params.intensityRange,n=function(t){const i=e.e7(30),r=[];for(let n=0;n<t;++n){const t=2*Math.PI*i(),n=Math.acos(1-2*i())-.5*Math.PI;r.push(e.cS(Math.cos(n)*Math.cos(t),Math.cos(n)*Math.sin(t),Math.sin(n)))}return r}(this.params.starsCount),o=e.e7(300),a=new e.e6,s=new e.a_;let l=0;for(let i=0;i<n.length;++i){const c=e.bY([],n[i],200),u=Math.max(0,1+.01*t*(1*o()-.5)),h=Math.max(0,1+.01*r*(1*o()-.5));a.emplaceBack(c[0],c[1],c[2],-1,-1,u,h),a.emplaceBack(c[0],c[1],c[2],1,-1,u,h),a.emplaceBack(c[0],c[1],c[2],1,1,u,h),a.emplaceBack(c[0],c[1],c[2],-1,1,u,h),s.emplaceBack(l+0,l+1,l+2),s.emplaceBack(l+0,l+2,l+3),l+=4}this.starsVx=i.createVertexBuffer(a,La.members),this.starsIdx=i.createIndexBuffer(s),this.starsSegments=e.bd.simpleSegment(0,0,a.length,s.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(t,i){const r=t.context,n=r.gl,o=t.transform,a=new ji(n.LEQUAL,ji.ReadOnly,[0,1]),s=e.ah(o.zoom),l=t.style.getLut(i.scope),c="none"===i.properties.get("color-use-theme"),u=i.properties.get("color").toNonPremultipliedRenderColor(c?null:l).toArray01(),h="none"===i.properties.get("high-color-use-theme"),d=i.properties.get("high-color").toNonPremultipliedRenderColor(h?null:l).toArray01(),p="none"===i.properties.get("space-color-use-theme"),f=i.properties.get("space-color").toNonPremultipliedRenderColor(p?null:l).toArray01(),m=5e-4,g=e.e8(i.properties.get("horizon-blend"),0,1,m,.25),y=e.dl(t,r,o)&&g===m?o.worldSize/(2*Math.PI*1.025)-1:o.globeRadius,_=t.frameCounter/1e3%1,v=e.ae(o.globeCenterInViewSpace),x=Math.sqrt(Math.pow(v,2)-Math.pow(y,2)),C=Math.acos(x/v),w=e=>{const i="globe"===o.projection.name?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];e&&i.push("ALPHA_PASS");const l=t.getOrCreateProgram("globeAtmosphere",{defines:i}),c=((e,t,i,r,n,o,a,s,l,c,u,h)=>({u_frustum_tl:e,u_frustum_tr:t,u_frustum_br:i,u_frustum_bl:r,u_horizon:n,u_transition:o,u_fadeout_range:a,u_color:s,u_high_color:l,u_space_color:c,u_temporal_offset:u,u_horizon_angle:h}))(o.frustumCorners.TL,o.frustumCorners.TR,o.frustumCorners.BR,o.frustumCorners.BL,o.frustumCorners.horizon,s,g,u,d,f,_,C);t.uploadCommonUniforms(r,l);const h=this.atmosphereBuffer;h&&l.draw(t,n.TRIANGLES,a,Zi.disabled,e?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,qi.backCW,c,e?"atmosphere_glow_alpha":"atmosphere_glow",h.vertexBuffer,h.indexBuffer,h.segments)};w(!1),w(!0)}drawStars(t,i){const r=e.ay(i.properties.get("star-intensity"),0,1);if(0===r)return;const n=t.context,o=n.gl,a=t.transform,s=t.getOrCreateProgram("stars"),l=e.b_([]);e.c0(l,l,-a._pitch),e.b$(l,l,-a.angle),e.c0(l,l,e.al(a._center.lat)),e.e9(l,l,-e.al(a._center.lng));const c=e.c3(new Float32Array(16),l),u=e.az([],a.starsProjMatrix,c),h=e.e4([],c),d=e.ea([],h),p=[0,1,0];e.dz(p,p,d),e.bY(p,p,this.params.sizeMultiplier);const f=[1,0,0];e.dz(f,f,d),e.bY(f,f,this.params.sizeMultiplier);const m=(g=p,y=f,_=r,{u_matrix:Float32Array.from(u),u_up:g,u_right:y,u_intensity_multiplier:_});var g,y,_;t.uploadCommonUniforms(n,s),this.starsVx&&this.starsIdx&&s.draw(t,o.TRIANGLES,ji.disabled,Zi.disabled,this.colorModeAlphaBlendedWriteRGB,qi.disabled,m,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function Ea(t,i){const r=[...t],n=i.cameraWorldSizeForFog/i.worldSize,o=e.bx([]);return e.cE(o,o,[n,n,1]),e.az(r,o,r),e.az(r,i.worldToFogMatrix,r),r}function Ia(t,i,r,n,o){const a=r.material,s=n.context,{baseColorTexture:l,metallicRoughnessTexture:c}=a.pbrMetallicRoughness,{normalTexture:u,occlusionTexture:h,emissionTexture:d}=a;function p(e,i,r){if(e&&(t.push(i),s.activeTexture.set(s.gl.TEXTURE0+r),e.gfxTexture)){const{minFilter:t,magFilter:i,wrapS:r,wrapT:n}=e.sampler;e.gfxTexture.bindExtraParam(t,i,r,n)}}p(l,"HAS_TEXTURE_u_baseColorTexture",$i.BaseColor),p(c,"HAS_TEXTURE_u_metallicRoughnessTexture",$i.MetallicRoughness),p(u,"HAS_TEXTURE_u_normalTexture",$i.Normal),p(h,"HAS_TEXTURE_u_occlusionTexture",$i.Occlusion),p(d,"HAS_TEXTURE_u_emissionTexture",$i.Emission),o&&(o.texture||(o.texture=new e.eh(n.context,o.image,[o.image.height,o.image.height,o.image.height],s.gl.RGBA8)),s.activeTexture.set(s.gl.TEXTURE0+$i.LUT),o.texture&&o.texture.bind(s.gl.LINEAR,s.gl.CLAMP_TO_EDGE),t.push("APPLY_LUT_ON_GPU")),r.texcoordBuffer&&(t.push("HAS_ATTRIBUTE_a_uv_2f"),i.push(r.texcoordBuffer)),r.colorBuffer&&(t.push(12===r.colorBuffer.itemSize?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),i.push(r.colorBuffer)),r.normalBuffer&&(t.push("HAS_ATTRIBUTE_a_normal_3f"),i.push(r.normalBuffer)),r.pbrBuffer&&(t.push("HAS_ATTRIBUTE_a_pbr"),t.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),i.push(r.pbrBuffer)),"OPAQUE"!==a.alphaMode&&"MASK"!==a.alphaMode||t.push("UNPREMULT_TEXTURE_IN_SHADER"),a.defined||t.push("DIFFUSE_SHADED");const f=n.shadowRenderer;f&&(t.push("RENDER_SHADOWS","DEPTH_TEXTURE"),f.useNormalOffset&&t.push("NORMAL_OFFSET"))}function Aa(t,i,r,n,o,a){const s=r.paint.get("model-opacity").constantOr(1),l=i.context,c=new ji(i.context.gl.LEQUAL,ji.ReadWrite,i.depthRangeFor3D),u=i.transform,h=t.mesh,d=h.material,p=d.pbrMetallicRoughness,f=i.style.fog;let m;m="pixels"===i.transform.projection.zAxisUnit?[...t.nodeModelMatrix]:e.az([],n.zScaleMatrix,t.nodeModelMatrix),e.az(m,n.negCameraPosMatrix,m);const g=e.bi([],m);e.ee(g,g);const y="none"===r.paint.get("model-color-use-theme").constantOr("default"),_=r.paint.get("model-emissive-strength").constantOr(0),v=Eo(new Float32Array(t.worldViewProjection),new Float32Array(m),new Float32Array(g),null,i,s,p.baseColorFactor,d.emissiveFactor,p.metallicFactor,p.roughnessFactor,d,_,r),x={defines:[]},C=[],w=i.shadowRenderer;w&&(w.useNormalOffset=!1),Ia(x.defines,C,h,i,y?null:r.lut);let b=null;if(f){const e=Ea(t.nodeModelMatrix,i.transform);if(b=new Float32Array(e),"globe"!==u.projection.name){const t=h.aabb.min,i=h.aabb.max,[r,n]=f.getOpacityForBounds(e,t[0],t[1],i[0],i[1]);x.overrideFog=r>=Ve||n>=Ve}}const S=rr(i,r.paint.get("model-cutoff-fade-range"));S.shouldRenderCutoff&&x.defines.push("RENDER_CUTOFF");const L=i.getOrCreateProgram("model",x);i.uploadCommonUniforms(l,L,null,b,S),"shadow"!==i.renderPass&&w&&w.setupShadowsFromMatrix(t.nodeModelMatrix,L),L.draw(i,l.gl.TRIANGLES,c,o,a,h.material.doubleSided?qi.disabled:qi.backCCW,v,r.id,h.vertexBuffer,h.indexBuffer,h.segments,r.paint,i.transform.zoom,void 0,C)}function ka(t,i,r,n,o,a,s){let l;l="globe"===t.projection.name?e.ed(r,t):[...r],e.az(l,l,i.matrix);const c=e.az([],n,l);if(i.meshes)for(const u of i.meshes){if("BLEND"!==u.material.alphaMode){s.push({mesh:u,depth:0,modelIndex:o,worldViewProjection:c,nodeModelMatrix:l});continue}const i=e.ad([],u.centroid,c);!t.isOrthographic&&i[2]<=0||a.push({mesh:u,depth:i[2],modelIndex:o,worldViewProjection:c,nodeModelMatrix:l})}if(i.children)for(const e of i.children)ka(t,e,r,n,o,a,s)}function Pa(e,t,i,r){const n=i.shadowRenderer;if(!n)return;const o=n.getShadowPassDepthMode(),a=n.getShadowPassColorMode(),s=n.calculateShadowPassMatrixFromMatrix(t),l=Io(s);i.getOrCreateProgram("modelDepth",{defines:i._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(i,i.context.gl.TRIANGLES,o,Zi.disabled,a,qi.backCCW,l,r.id,e.vertexBuffer,e.indexBuffer,e.segments,r.paint,i.transform.zoom,void 0,void 0)}function Oa(t,i,r){const n=i.updateZoomBasedPaintProperties(),o=function(t,i,r){let n,o,a,s=t.terrain?t.terrain.exaggeration():0;if(t.terrain&&s>0){const i=t.terrain,o=i.findDEMTileFor(r);o&&o.dem?n=e.ei.create(i,r,o):s=0}if(0===s&&(i.terrainElevationMin=0,i.terrainElevationMax=0),s===i.validForExaggeration&&(0===s||n&&n._demTile&&n._demTile.tileID===i.validForDEMTile.id&&n._dem._timestamp===i.validForDEMTile.timestamp))return!1;for(const e in i.instancesPerModel){const t=i.instancesPerModel[e];for(let e=0;e<t.instancedDataArray.length;++e){const r=(n?s*n.getElevationAt(0|t.instancedDataArray.float32[16*e],0|t.instancedDataArray.float32[16*e+1],!0,!0):0)+t.instancesEvaluatedElevation[e];t.instancedDataArray.float32[16*e+6]=r,o=o?Math.min(i.terrainElevationMin,r):r,a=a?Math.max(i.terrainElevationMax,r):r}}return i.terrainElevationMin=o||0,i.terrainElevationMax=a||0,i.validForExaggeration=s,i.validForDEMTile=n&&n._demTile?{id:n._demTile.tileID,timestamp:n._dem._timestamp}:{id:void 0,timestamp:0},!0}(t,i,r);(n||o)&&(i.uploaded=!1,i.upload(t.context))}const Ra={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new e.cW([0,0,0],[e.aj,e.aj,0])};function za(t,i){const r=1<<t.canonical.z,n=i.getFreeCameraOptions().position,o=i.elevation,a=t.canonical.x/r,s=(t.canonical.x+1)/r,l=t.canonical.y/r,c=(t.canonical.y+1)/r;let u=i._centerAltitude;if(o){const e=o.getMinMaxForTile(t);e&&e.max>u&&(u=e.max)}const h=e.ay(n.x,a,s)-n.x,d=e.ay(n.y,l,c)-n.y,p=e.c6(u,i.center.lat)-n.z;return i._zoomFromMercatorZ(Math.sqrt(h*h+d*d+p*p))}function Da(e,t,i,r,n,o,a){const s=e.context,l="shadow"===e.renderPass,c=e.shadowRenderer,u=l&&c?c.getShadowPassDepthMode():new ji(s.gl.LEQUAL,ji.ReadWrite,e.depthRangeFor3D),h=e.isTileAffectedByFog(o);if(i.meshes)for(const d of i.meshes){const p=["MODEL_POSITION_ON_GPU"],f=[];let m,g,y;r.instancedDataArray.length>20&&p.push("INSTANCED_ARRAYS");const _=rr(e,t.paint.get("model-cutoff-fade-range"));if(_.shouldRenderCutoff&&p.push("RENDER_CUTOFF"),l&&c)m=e.getOrCreateProgram("modelDepth",{defines:p}),g=Io(a.shadowTileMatrix,a.shadowTileMatrix,Float32Array.from(i.matrix)),y=c.getShadowPassColorMode();else{Ia(p,f,d,e,"none"===t.paint.get("model-color-use-theme").constantOr("default")?null:t.lut),m=e.getOrCreateProgram("model",{defines:p,overrideFog:h});const r=d.material,l=r.pbrMetallicRoughness,u=t.paint.get("model-opacity").constantOr(1),v=t.paint.get("model-emissive-strength").constantOr(0);g=Eo(o.expandedProjMatrix,Float32Array.from(i.matrix),new Float32Array(16),null,e,u,l.baseColorFactor,r.emissiveFactor,l.metallicFactor,l.roughnessFactor,r,v,t,n),c&&(a.shadowUniformsInitialized?m.setShadowUniformValues(s,c.getShadowUniformValues()):(c.setupShadows(o.toUnwrapped(),m,"model-tile",o.overscaledZ),a.shadowUniformsInitialized=!0)),y=_.shouldRenderCutoff||u<1||"OPAQUE"!==r.alphaMode?Ui.alphaBlended:Ui.unblended}e.uploadCommonUniforms(s,m,o.toUnwrapped(),null,_);const v=d.material.doubleSided?qi.disabled:qi.backCCW;if(r.instancedDataArray.length>20)f.push(r.instancedDataBuffer),m.draw(e,s.gl.TRIANGLES,u,Zi.disabled,y,v,g,t.id,d.vertexBuffer,d.indexBuffer,d.segments,t.paint,e.transform.zoom,void 0,f,r.instancedDataArray.length);else{const i=l?"u_instance":"u_normal_matrix";for(let n=0;n<r.instancedDataArray.length;++n)g[i]=new Float32Array(r.instancedDataArray.arrayBuffer,64*n,16),m.draw(e,s.gl.TRIANGLES,u,Zi.disabled,y,v,g,t.id,d.vertexBuffer,d.indexBuffer,d.segments,t.paint,e.transform.zoom,void 0,f)}}if(i.children)for(const d of i.children)Da(e,t,d,r,n,o,a)}const Fa=[1,-1,1];function Ba(t,i,r,n){if(!r.modelManager)return!0;const o=r.modelManager;if(!r.shadowRenderer)return!0;const a=r.shadowRenderer,s=i.aabb;let l=!0,c=t.maxHeight;if(0===c){let e=0;for(const i in t.instancesPerModel){const t=o.getModel(i,n);t?e=Math.max(e,Math.max(Math.max(t.aabb.max[0],t.aabb.max[1]),t.aabb.max[2])):l=!1}c=t.maxScale*e*1.41+t.maxVerticalOffset,l&&(t.maxHeight=c)}s.max[2]=c,s.min[2]+=t.terrainElevationMin,s.max[2]+=t.terrainElevationMax,e.ad(s.min,s.min,i.tileMatrix),e.ad(s.max,s.max,i.tileMatrix);const u=s.intersects(a.getCurrentCascadeFrustum());return 0===r.currentShadowCascade&&(t.isInsideFirstShadowMapFrustum=2===u),0===u}function Va(t,i){const r=t.uniformValues.u_cutoff_params[0],n=t.uniformValues.u_cutoff_params[1],o=t.uniformValues.u_cutoff_params[2],a=t.uniformValues.u_cutoff_params[3];return n===r||a===o?1:e.ay(((i-r)/(n-r)-o)/(a-o),0,1)}function Na(t,i,r,n){if(i.pitch<20)return 1;const o=i.getWorldToCameraMatrix();e.az(o,o,t);const a=e.ej(r.min[0],r.min[1],r.min[2],1);let s=e.aA(e.ek(),a,o),l=s,c=s;a[1]=r.max[1],s=e.aA(e.ek(),a,o),l=s[1]<l[1]?s:l,c=s[1]>c[1]?s:c,a[0]=r.max[0],s=e.aA(e.ek(),a,o),l=s[1]<l[1]?s:l,c=s[1]>c[1]?s:c,a[1]=r.min[1],s=e.aA(e.ek(),a,o),l=s[1]<l[1]?s:l,c=s[1]>c[1]?s:c;const u=e.ay(n[0],0,1),h=100*i.pixelsPerMeter*e.ay(n[1],0,1),d=e.ay(n[2],0,1),p=e.el(e.ek(),l,c,u),f=Math.tan(.5*i.fovX),m=-p[2]*f;if(0===h)return p[1]<-Math.abs(m)?d:1;const g=(-Math.abs(m)-p[1])/h,y=(e,t,i)=>(1-i)*e+i*t,_=e.ay(y(1,d,g),d,1);return y(1,_,e.ay((i.pitch-20)/20,0,1))}class Ua{}class ja{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(t,i,r){{const e=this._storage.get(i.id);if(e)return e.lastUsedFrameIdx=t,e.buf}const n=r.gl,o=n.getBufferParameter(n.ELEMENT_ARRAY_BUFFER,n.BUFFER_SIZE),a=new ArrayBuffer(o),s=new Int16Array(a);n.getBufferSubData(n.ELEMENT_ARRAY_BUFFER,0,new Int16Array(a));const l=new e.en;for(let e=0;e<o/2;e+=3){const t=s[e],i=s[e+1],r=s[e+2];l.emplaceBack(t,i),l.emplaceBack(i,r),l.emplaceBack(r,t)}const c=r.bindVertexArrayOES.current,u=new Ua;return u.buf=new ko(r,l),u.lastUsedFrameIdx=t,this._storage.set(i.id,u),r.bindVertexArrayOES.set(c),u.buf}update(e){for(const[t,i]of this._storage)e-i.lastUsedFrameIdx>30&&(i.buf.destroy(),this._storage.delete(t))}destroy(){for(const[e,t]of this._storage)t.buf.destroy(),this._storage.delete(e)}}class Ha{constructor(e){this.occluderSize=30,this.depthOffset=-1e-4,e.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),e.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const Za=e.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class Wa{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class Ga{constructor(e,t){this.revealStart=11,this.revealRange=2,e.registerParameter(this,[...t,"Reveal"],"revealStart",{min:0,max:17,step:.05}),e.registerParameter(this,[...t,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const qa=e.d_([{type:"Float32",name:"a_pos_2f",components:2}]);class Xa{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(t,i){const r=t.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const i=new e.eo,r=new e.a_;i.emplaceBack(-1,-1),i.emplaceBack(1,-1),i.emplaceBack(1,1),i.emplaceBack(-1,1),r.emplaceBack(0,1,2),r.emplaceBack(0,2,3),this.vignetteVx=t.context.createVertexBuffer(i,qa.members),this.vignetteIdx=t.context.createIndexBuffer(r)}const n=e.bd.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){t.uploadCommonUniforms(t.context,r);const e={u_vignetteShape:(o={vignetteShape:[i.start,i.range,Math.pow(10,i.fadePower)],vignetteColor:[i.color.r,i.color.g,i.color.b,i.color.a*i.strength]}).vignetteShape,u_vignetteColor:o.vignetteColor};r.draw(t,t.context.gl.TRIANGLES,ji.disabled,Zi.disabled,Ui.alphaBlended,qi.disabled,e,"vignette",this.vignetteVx,this.vignetteIdx,n)}var o}}class Ya{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(t,i){const r=t.getFreeCameraOptions().position,n=r.toAltitude(),o=r.toLngLat(),a=e.al(o.lng),s=e.al(o.lat),l=t.pixelsPerMeter/i,c=a*e.eq,u=e.eq*Math.log(Math.tan(Math.PI/4+s/2));if(void 0===this._offsetXPrev)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const e=-this._offsetYPrev+u,t=-this._elevationPrev+n;this._accumulatedOffsetX+=(-this._offsetXPrev+c)*l,this._accumulatedOffsetY+=e*l,this._accumulatedElevation+=t*l,this._offsetXPrev=c,this._offsetYPrev=u,this._elevationPrev=n}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function Ka(e,t){return[-(e[0]-Math.floor(e[0]/t)*t),-(e[1]-Math.floor(e[1]/t)*t),-(e[2]-Math.floor(e[2]/t)*t)]}function Ja(t){const i=e.e7(1323123451230),r=[];for(let n=0;n<t;++n){const t=2*i()-1,n=2*i()-1,o=2*i()-1;r.push(e.cS(t,n,o))}return r}function Qa(t,i,r,n,o){const a=e.ay((o-r)/(n-r),0,1);return(1-a)*t+a*i}class $a{constructor(e){this._movement=new Ya,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new Xa,this._ppmScaleFactor=e}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(t,i){const r=t.transform;this._movement.update(r,this._ppmScaleFactor);const n=r.starsProjMatrix,o=e.b_([]);e.c0(o,o,e.al(90)-r._pitch),e.b$(o,o,-r.angle);const a=e.c3(new Float32Array(16),o),s=e.ep(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),l=e.ee([],s),c=e.az([],l,a),u=Date.now()/1e3;return this._accumulatedTimeFromStart+=(u-this._prevTime)*i,this._prevTime=u,{projectionMatrix:n,modelviewMatrix:c}}}class es extends $a{constructor(e){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new Ga(e.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(t){const i=t.context;if(!this.particlesVx){const t=Ja(this.particlesCount),r=new e.er,n=new e.a_;let o=0;const a=e.e7(1323123451230);for(let e=0;e<t.length;++e){const i=t[e],s=[2*a()-1,a(),a(),a()];r.emplaceBack(i[0],i[1],i[2],-1,-1,...s),r.emplaceBack(i[0],i[1],i[2],1,-1,...s),r.emplaceBack(i[0],i[1],i[2],1,1,...s),r.emplaceBack(i[0],i[1],i[2],-1,1,...s),n.emplaceBack(o+0,o+1,o+2),n.emplaceBack(o+0,o+2,o+3),o+=4}this.particlesVx=i.createVertexBuffer(r,Za.members),this.particlesIdx=i.createIndexBuffer(n)}}draw(t){if(!this._params.overrideStyleParameters&&!t.style.rain)return;const i=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},r=t.transform.zoom;if(i.revealStart>r)return;const n=Qa(0,1,i.revealStart,i.revealStart+i.revealRange,r);if(!this.particlesVx||!this.particlesIdx)return;const o=structuredClone(this._params);let a=[-o.direction.x,o.direction.y,-100];e.au(a,a);const s=structuredClone(this._vignetteParams);s.strength*=n,o.overrideStyleParameters||(o.intensity=t.style.rain.state.density,o.timeFactor=t.style.rain.state.intensity,o.color=structuredClone(t.style.rain.state.color),a=structuredClone(t.style.rain.state.direction),o.screenThinning.intensity=t.style.rain.state.centerThinning,o.dropletSizeX=t.style.rain.state.dropletSize[0],o.dropletSizeYScale=t.style.rain.state.dropletSize[1]/t.style.rain.state.dropletSize[0],o.distortionStrength=100*t.style.rain.state.distortionStrength,s.strength=1,s.color=structuredClone(t.style.rain.state.vignetteColor));const l=this.updateOnRender(t,o.timeFactor),c=t.context,u=c.gl,h=t.transform;this.screenTexture&&this.screenTexture.size[0]===t.width&&this.screenTexture.size[1]===t.height||(this.screenTexture=new e.T(c,{width:t.width,height:t.height,data:null},u.RGBA8)),o.distortionStrength>0&&(c.activeTexture.set(u.TEXTURE0),this.screenTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.copyTexSubImage2D(u.TEXTURE_2D,0,0,0,0,0,t.width,t.height));const d=t.getOrCreateProgram("rainParticle");t.uploadCommonUniforms(c,d),c.activeTexture.set(u.TEXTURE0),this.screenTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE);const p=[o.color.r,o.color.g,o.color.b,o.color.a],f=(i,r)=>{const n=Ka(this._movement.getPosition(),i),s=o.dropletSizeX,c=o.dropletSizeX*o.dropletSizeYScale,f=t.width/2,m=t.height/2,g=Qa(0,o.screenThinning.start,0,1,o.screenThinning.intensity),y=Qa(.001,o.screenThinning.range,0,1,o.screenThinning.intensity),_=Qa(0,o.screenThinning.particleOffset,0,1,o.screenThinning.intensity),v=(x={modelview:l.modelviewMatrix,projection:l.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:n,velocityConeAperture:o.velocityConeAperture,velocity:o.velocity,boxSize:i,rainDropletSize:[s,c],distortionStrength:o.distortionStrength,rainDirection:a,color:p,screenSize:[h.width,h.height],thinningCenterPos:[f,m],thinningShape:[g,y,Math.pow(10,o.screenThinning.fadePower)],thinningAffectedRatio:o.screenThinning.affectedRatio,thinningParticleOffset:_,shapeDirectionalPower:o.shapeDirPower,shapeNormalPower:o.shapeNormalPower,mode:r?0:1},{u_modelview:Float32Array.from(x.modelview),u_projection:Float32Array.from(x.projection),u_time:x.time,u_cam_pos:x.camPos,u_texScreen:0,u_velocityConeAperture:x.velocityConeAperture,u_velocity:x.velocity,u_boxSize:x.boxSize,u_rainDropletSize:x.rainDropletSize,u_distortionStrength:x.distortionStrength,u_rainDirection:x.rainDirection,u_color:x.color,u_screenSize:x.screenSize,u_thinningCenterPos:x.thinningCenterPos,u_thinningShape:x.thinningShape,u_thinningAffectedRatio:x.thinningAffectedRatio,u_thinningParticleOffset:x.thinningParticleOffset,u_shapeDirectionalPower:x.shapeDirectionalPower,u_shapeNormalPower:x.shapeNormalPower,u_mode:x.mode});var x;const C=Math.round(o.intensity*this.particlesCount),w=e.bd.simpleSegment(0,0,4*C,2*C);d.draw(t,u.TRIANGLES,ji.disabled,Zi.disabled,Ui.alphaBlended,qi.disabled,v,"rain_particles",this.particlesVx,this.particlesIdx,w)};o.distortionStrength>0&&f(o.boxSize,!0),f(o.boxSize,!1),this._vignette.draw(t,s)}}const ts=e.d_([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class is extends $a{constructor(e){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new Ga(e.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(t){const i=t.context;if(!this.particlesVx){const t=Ja(this.particlesCount),r=new e.es,n=new e.a_;let o=0;const a=e.e7(1323123451230);for(let e=0;e<t.length;++e){const i=t[e],s=a(),l=a(),c=a(),u=[e/t.length,s,l,c],h=[a(),a()];r.emplaceBack(i[0],i[1],i[2],-1,-1,...u,...h),r.emplaceBack(i[0],i[1],i[2],1,-1,...u,...h),r.emplaceBack(i[0],i[1],i[2],1,1,...u,...h),r.emplaceBack(i[0],i[1],i[2],-1,1,...u,...h),n.emplaceBack(o+0,o+1,o+2),n.emplaceBack(o+0,o+2,o+3),o+=4}this.particlesVx=i.createVertexBuffer(r,ts.members),this.particlesIdx=i.createIndexBuffer(n)}}draw(t){if(!this._params.overrideStyleParameters&&!t.style.snow)return;const i=structuredClone(this._params);let r=[-i.direction.x,i.direction.y,-100];e.au(r,r);const n=structuredClone(this._vignetteParams),o=i.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},a=t.transform.zoom;if(o.revealStart>a)return;const s=Qa(0,1,o.revealStart,o.revealStart+o.revealRange,a);n.strength*=s,i.overrideStyleParameters||(i.intensity=t.style.snow.state.density,i.timeFactor=t.style.snow.state.intensity,i.color=structuredClone(t.style.snow.state.color),r=structuredClone(t.style.snow.state.direction),i.screenThinning.intensity=t.style.snow.state.centerThinning,i.billboardSize=2.79*t.style.snow.state.flakeSize,n.strength=1,n.color=structuredClone(t.style.snow.state.vignetteColor));const l=this.updateOnRender(t,i.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const c=t.context,u=c.gl,h=t.transform,d=t.getOrCreateProgram("snowParticle");t.uploadCommonUniforms(c,d),((i,n,o)=>{const a=Ka(this._movement.getPosition(),i),s=h.width/2,c=h.height/2,p=Qa(0,o.screenThinning.start,0,1,o.screenThinning.intensity),f=Qa(.001,o.screenThinning.range,0,1,o.screenThinning.intensity),m=Qa(0,o.screenThinning.particleOffset,0,1,o.screenThinning.intensity),g=(y={modelview:l.modelviewMatrix,projection:l.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:a,velocityConeAperture:o.velocityConeAperture,velocity:o.velocity,horizontalOscillationRadius:o.horizontalOscillationRadius,horizontalOscillationRate:o.horizontalOscillationRate,boxSize:i,billboardSize:1*o.billboardSize,simpleShapeParameters:[o.shapeFadeStart,o.shapeFadePower],screenSize:[h.width,h.height],thinningCenterPos:[s,c],thinningShape:[p,f,Math.pow(10,o.screenThinning.fadePower)],thinningAffectedRatio:o.screenThinning.affectedRatio,thinningParticleOffset:m,color:[o.color.r,o.color.g,o.color.b,o.color.a],direction:r},{u_modelview:Float32Array.from(y.modelview),u_projection:Float32Array.from(y.projection),u_time:y.time,u_cam_pos:y.camPos,u_velocityConeAperture:y.velocityConeAperture,u_velocity:y.velocity,u_horizontalOscillationRadius:y.horizontalOscillationRadius,u_horizontalOscillationRate:y.horizontalOscillationRate,u_boxSize:y.boxSize,u_billboardSize:y.billboardSize,u_simpleShapeParameters:y.simpleShapeParameters,u_screenSize:y.screenSize,u_thinningCenterPos:y.thinningCenterPos,u_thinningShape:y.thinningShape,u_thinningAffectedRatio:y.thinningAffectedRatio,u_thinningParticleOffset:y.thinningParticleOffset,u_particleColor:y.color,u_direction:y.direction});var y;const _=Math.round(o.intensity*this.particlesCount),v=e.bd.simpleSegment(0,0,4*_,2*_);this.particlesVx&&this.particlesIdx&&d.draw(t,u.TRIANGLES,ji.disabled,Zi.disabled,Ui.alphaBlended,qi.disabled,g,"snow_particles",this.particlesVx,this.particlesIdx,v)})(i.boxSize,0,i),this._vignette.draw(t,n)}}const rs={symbol:function(t,i,r,n,o){if("translucent"!==t.renderPass)return;const a=Zi.disabled,s=t.colorModeForRenderPass(),l=r.layout.get("text-variable-anchor"),c=r.layout.get("text-size-scale-range"),u=e.ay(t.scaleFactor,c[0],c[1]);l&&function(t,i,r,n,o,a,s,l){const c=i.transform,u="map"===o,h="map"===a;for(const d of t){const t=n.getTile(d),i=t.getBucket(r);if(!i||!i.text||!i.text.segments.get().length)continue;const o=e.bH(i.textSizeData,c.zoom,l),a=pi(d,i.getProjection(),c),p=c.calculatePixelsToTileUnitsMatrix(t),f=Xt(a,t.tileID.canonical,h,u,c,i.getProjection(),p),m=i.hasIconTextFit()&&i.hasIconData();o&&Uo(i,u,h,s,c,f,d,Math.pow(2,c.zoom-t.tileID.overscaledZ),o,m)}}(n,t,r,i,r.layout.get("text-rotation-alignment"),r.layout.get("text-pitch-alignment"),o,u);const h=0!==r.paint.get("icon-opacity").constantOr(1),d=0!==r.paint.get("text-opacity").constantOr(1);void 0!==r.layout.get("symbol-sort-key").constantOr(1)&&(h||d)?jo(t,i,r,n,a,s):(h&&jo(t,i,r,n,a,s,{onlyIcons:!0}),d&&jo(t,i,r,n,a,s,{onlyText:!0})),i.map.showCollisionBoxes&&(Fo(t,i,r,n,r.paint.get("text-translate"),r.paint.get("text-translate-anchor"),!0),Fo(t,i,r,n,r.paint.get("icon-translate"),r.paint.get("icon-translate-anchor"),!1))},circle:function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("circle-opacity"),a=r.paint.get("circle-stroke-width"),s=r.paint.get("circle-stroke-opacity"),l=void 0!==r.layout.get("circle-sort-key").constantOr(1),c=r.paint.get("circle-emissive-strength");if(0===o.constantOr(1)&&(0===a.constantOr(1)||0===s.constantOr(1)))return;const u=t.context,h=u.gl,d=t.transform,p=!(!t.terrain||!t.terrain.enabled),f=r.layout.get("circle-elevation-reference"),m=t.depthModeForSublayer(0,ji.ReadOnly),g=new ji(t.context.gl.LEQUAL,ji.ReadOnly,t.depthRangeFor3D),y="none"===f||p?m:g,_=Zi.disabled,v=t.colorModeForDrapableLayerRenderPass(c),x="globe"===d.projection.name,C=[e.aD(d.center.lng),e.aH(d.center.lat)],w=[];for(let S=0;S<n.length;S++){const o=n[S],a=i.getTile(o),s=a.getBucket(r);if(!s||s.projection.name!==d.projection.name)continue;const c=s.programConfigurations.get(r.id),u=s.layoutVertexBuffer,h=s.globeExtVertexBuffer,p=s.indexBuffer,f=e.dK(r),m=[h],g=t.isTileAffectedByFog(o);x&&f.push("PROJECTION_GLOBE_VIEW"),f.push("DEPTH_D24"),t.terrain&&d.depthOcclusionForSymbolsAndCircles&&f.push("DEPTH_OCCLUSION"),s.hasElevation&&(f.push("ELEVATED_ROADS"),m.push(s.elevatedLayoutVertexBuffer));const y=t.getOrCreateProgram("circle",{config:c,defines:f,overrideFog:g}),_=d.projection.createInversionMatrix(d,o.canonical),v={programConfiguration:c,program:y,layoutVertexBuffer:u,dynamicBuffers:m,indexBuffer:p,uniformValues:e.dL(t,o,a,_,C,r),tile:a};if(l){const t=s.segments.get();for(const i of t)w.push({segments:new e.bd([i]),sortKey:i.sortKey,state:v})}else w.push({segments:s.segments,sortKey:0,state:v})}l&&w.sort((e,t)=>e.sortKey-t.sortKey);const b={useDepthForOcclusion:d.depthOcclusionForSymbolsAndCircles};for(const e of w){const{programConfiguration:i,program:n,layoutVertexBuffer:o,dynamicBuffers:a,indexBuffer:s,uniformValues:l,tile:c}=e.state,p=e.segments;t.terrain&&t.terrain.setupElevationDraw(c,n,b),t.uploadCommonUniforms(u,n,c.tileID.toUnwrapped()),n.draw(t,h.TRIANGLES,y,_,v,qi.disabled,l,r.id,o,s,p,r.paint,d.zoom,i,a)}},heatmap:function(t,i,r,n){if(0!==r.paint.get("heatmap-opacity"))if("offscreen"===t.renderPass){const o=t.context,a=o.gl,s=Zi.disabled,l=new Ui([a.ONE,a.ONE,a.ONE,a.ONE],e.am.transparent,[!0,!0,!0,!0]);!function(e,t,i,r){const n=e.gl,o=t.width*r,a=t.height*r;e.activeTexture.set(n.TEXTURE1),e.viewport.set([0,0,o,a]);let s=i.heatmapFbo;if(!s||s&&(s.width!==o||s.height!==a)){s&&s.destroy();const t=n.createTexture();n.bindTexture(n.TEXTURE_2D,t),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR),s=i.heatmapFbo=e.createFramebuffer(o,a,!0,null),function(e,t,i,r,n,o){const a=e.gl;a.texImage2D(a.TEXTURE_2D,0,e.extRenderToTextureHalfFloat?a.RGBA16F:a.RGBA,n,o,0,a.RGBA,e.extRenderToTextureHalfFloat?a.HALF_FLOAT:a.UNSIGNED_BYTE,null),r.colorAttachment.set(i)}(e,0,t,s,o,a)}else n.bindTexture(n.TEXTURE_2D,s.colorAttachment.get()),e.bindFramebuffer.set(s.framebuffer)}(o,t,r,"globe"===t.transform.projection.name?.5:.25),o.clear({color:e.am.transparent});const c=t.transform,u="globe"===c.projection.name,h=u?["PROJECTION_GLOBE_VIEW"]:[],d=u?qi.frontCCW:qi.disabled,p=[e.aD(c.center.lng),e.aH(c.center.lat)];for(let e=0;e<n.length;e++){const f=n[e];if(i.hasRenderableParent(f))continue;const m=i.getTile(f),g=m.getBucket(r);if(!g||g.projection.name!==c.projection.name)continue;const y=t.isTileAffectedByFog(f),_=g.programConfigurations.get(r.id),v=t.getOrCreateProgram("heatmap",{config:_,defines:h,overrideFog:y}),{zoom:x}=t.transform;t.terrain&&t.terrain.setupElevationDraw(m,v),t.uploadCommonUniforms(o,v,f.toUnwrapped());const C=c.projection.createInversionMatrix(c,f.canonical);v.draw(t,a.TRIANGLES,ji.disabled,s,l,d,fo(t,f,m,C,p,x,r.paint.get("heatmap-intensity")),r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,_,u?[g.globeExtVertexBuffer]:null)}o.viewport.set([0,0,t.width,t.height])}else"translucent"===t.renderPass&&(t.context.setColorMode(t.colorModeForRenderPass()),function(t,i){const r=t.context,n=r.gl,o=i.heatmapFbo;if(!o)return;r.activeTexture.set(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,o.colorAttachment.get()),r.activeTexture.set(n.TEXTURE1);let a=i.colorRampTexture;a||(a=i.colorRampTexture=new e.T(r,i.colorRamp,n.RGBA8)),a.bind(n.LINEAR,n.CLAMP_TO_EDGE),t.getOrCreateProgram("heatmapTexture").draw(t,n.TRIANGLES,ji.disabled,Zi.disabled,t.colorModeForRenderPass(),qi.disabled,((e,t)=>({u_image:0,u_color_ramp:1,u_opacity:t.paint.get("heatmap-opacity")}))(0,i),i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments,i.paint,t.transform.zoom)}(t,r))},line:function(t,i,r,n){if("translucent"!==t.renderPass)return;const o=r.paint.get("line-opacity"),a=r.paint.get("line-width");if(0===o.constantOr(1)||0===a.constantOr(1))return;const s=r.paint.get("line-emissive-strength"),l=r.paint.get("line-occlusion-opacity"),c=r.layout.get("line-elevation-reference"),u="meters"===r.layout.get("line-width-unit"),h="sea"===c,d=!(!t.terrain||!t.terrain.enabled),p=t.context,f=p.gl;if(r.hasElevatedBuckets&&"globe"===t.transform.projection.name)return;const m=r.layout.get("line-cross-slope"),g=void 0!==m,y=m<1,_=t.colorModeForDrapableLayerRenderPass(s),v=t.terrain&&t.terrain.renderingToTexture,x=v?1:e.q.devicePixelRatio,C=r.paint.get("line-dasharray"),w=C.constantOr(1),b=r.layout.get("line-cap"),S=C.constantOr(null),L=b.constantOr(null),T=r.paint.get("line-pattern"),M=T.constantOr(1),E=r.paint.get("line-pattern-cross-fade"),I=T.constantOr(null),A=r.paint.get("line-opacity").constantOr(1);let k=!M&&1!==A||t.depthOcclusion&&l>0&&l<1;const P=r.paint.get("line-gradient"),O=M?"linePattern":"line",R=e.dM(r);let z;if(v&&t.terrain&&t.terrain.clipOrMaskOverlapStencilType()&&(k=!1),0!==l&&t.depthOcclusion){const t=r.paint._values["line-opacity"];t&&t.value&&"constant"===t.value.kind?z=t.value:e.w("Occlusion opacity for layer ".concat(r.id," is supported only when line-opacity isn't data-driven."))}"constant"!==a.value.kind&&!1===a.value.isLineProgressConstant&&R.push("VARIABLE_LINE_WIDTH");const D=(n,o,a,s,c,d)=>{for(const m of n){const n=i.getTile(m);if(M&&!n.patternsLoaded())continue;const g=n.getBucket(r);if(!g)continue;if("none"!==g.elevationType&&!c||"none"===g.elevationType&&c)continue;t.prepareDrawTile();const y=[...o],C=t.shadowRenderer,b="road"===g.elevationType&&!!C&&C.enabled;let T=[0,0,0];if(b){const e=t.style.directionalLight,i=t.style.ambientLight;e&&i&&(T=ur(t.style,e,i)),y.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET")}const R=g.programConfigurations.get(r.id);let D=!1;if(I&&n.imageAtlas){const t=e.dN.from(I),i=t.getPrimary().scaleSelf(x).toString(),r=n.imageAtlas.patternPositions.get(i),o=t.getSecondary(),a=o?n.imageAtlas.patternPositions.get(o.scaleSelf(x).toString()):null;D=!!r&&!!a,r&&R.setConstantPatternPositions(r,a)}E>0&&(D||R.getPatternTransitionVertexBuffer("line-pattern"))&&y.push("LINE_PATTERN_TRANSITION");const F=t.isTileAffectedByFog(m),B=t.getOrCreateProgram(O,{config:R,defines:y,overrideFog:F,overrideRtt:!c&&void 0});if(!M&&S&&L&&n.lineAtlas){const e=n.lineAtlas.getDash(S,L);e&&R.setConstantPatternPositions(e)}b&&C.setupShadows(n.tileID.toUnwrapped(),B,"vector-tile",n.tileID.overscaledZ);let[V,N]=r.paint.get("line-trim-offset");if("round"===L||"square"===L){const e=1;V!==N&&(0===V&&(V-=e),1===N&&(N+=e))}const U=v?m.projMatrix:null,j=u?1/g.tileToMeter/e.aw(n,1,t.transform.zoom):1,H=u?1/g.tileToMeter/e.aw(n,1,Math.floor(t.transform.zoom)):1,Z=M?e.dO(t,n,r,U,x,j,H,[V,N],T,E):e.dP(t,n,r,U,g.lineClipsArray.length,x,j,H,[V,N],T);if(P){const n=g.gradients[r.id];let o=n.texture;if(r.gradientVersion!==n.version){let a=256;if(r.stepInterpolant){const r=i.getSource().maxzoom,n=m.canonical.z===r?Math.ceil(1<<t.transform.maxZoom-m.canonical.z):1;a=e.ay(e.dQ(g.maxLineLength/e.aj*1024*n),256,p.maxTextureSize)}n.gradient=e.dR({expression:r.gradientExpression(),evaluationKey:"lineProgress",resolution:a,image:n.gradient||void 0,clips:g.lineClipsArray}),n.texture?n.texture.update(n.gradient):n.texture=new e.T(p,n.gradient,f.RGBA8),n.version=r.gradientVersion,o=n.texture}p.activeTexture.set(f.TEXTURE1),o.bind(r.stepInterpolant?f.NEAREST:f.LINEAR,f.CLAMP_TO_EDGE)}w&&(p.activeTexture.set(f.TEXTURE0),n.lineAtlasTexture&&n.lineAtlasTexture.bind(f.LINEAR,f.REPEAT),R.updatePaintBuffers()),M&&(p.activeTexture.set(f.TEXTURE0),n.imageAtlasTexture&&n.imageAtlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE),R.updatePaintBuffers()),c&&!h&&t.terrain.setupElevationDraw(n,B),t.uploadCommonUniforms(p,B,m.toUnwrapped());const W=e=>{null!=z&&(z.value=A*l),B.draw(t,f.TRIANGLES,a,e,_,qi.disabled,Z,r.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,r.paint,t.transform.zoom,R,[g.layoutVertexBuffer2,g.patternVertexBuffer,g.zOffsetVertexBuffer]),null!=z&&(z.value=A)};if(k&&!c){const e=t.stencilModeForClipping(m).ref;0===e&&v&&p.clear({stencil:0});const i={func:f.EQUAL,mask:255};Z.u_alpha_discard_threshold=.8,W(new Zi(i,e,255,f.KEEP,f.KEEP,f.INVERT)),Z.u_alpha_discard_threshold=0,W(new Zi(i,e,255,f.KEEP,f.KEEP,f.KEEP))}else Z.u_alpha_discard_threshold=k&&c&&d?.8:0,W(c?s:t.stencilModeForClipping(m))}};let F=t.depthModeForSublayer(0,ji.ReadOnly);const B=new ji(t.depthOcclusion?f.GREATER:f.LEQUAL,ji.ReadOnly,t.depthRangeFor3D);if(r.hasNonElevatedBuckets){const i=!v&&t.terrain;0!==l&&i?e.w("Occlusion opacity for layer ".concat(r.id," is supported on terrain only if the layer has line-z-offset enabled.")):i?e.w("Cannot render non-elevated lines in immediate mode when terrain is enabled. Layer: ".concat(r.id,".")):D(n,R,F,Zi.disabled,!1,!0)}if(r.hasElevatedBuckets){"hd-road-markup"===c?d||(F=B,R.push("ELEVATED_ROADS")):(R.push("ELEVATED"),F=B,g&&R.push(y?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),h&&R.push("ELEVATION_REFERENCE_SEA"));const e=k?t.stencilModeFor3D():Zi.disabled;t.forceTerrainMode=!0,D(n,R,F,e,!0,!0),k&&D(n,R,F,e,!0,!1),t.forceTerrainMode=!1}k&&(t.resetStencilClippingMasks(),v&&p.clear({stencil:0})),0===l||t.depthOcclusion||v||t.layersWithOcclusionOpacity.push(t.currentLayer)},fill:function(t,i,r,n){const o=r.paint.get("fill-color"),a=r.paint.get("fill-opacity");if(0===a.constantOr(1))return;const s=r.paint.get("fill-emissive-strength"),l=t.colorModeForDrapableLayerRenderPass(s),c=r.paint.get("fill-pattern"),u=t.opaquePassEnabledForLayer()&&!c.constantOr(1)&&1===o.constantOr(e.am.transparent).a&&1===a.constantOr(0)?"opaque":"translucent";let h="none";"none"!==r.layout.get("fill-elevation-reference")?h="road":0!==r.paint.get("fill-z-offset").constantOr(1)&&(h="offset");const d=!(!t.terrain||!t.terrain.enabled),p={painter:t,sourceCache:i,layer:r,coords:n,colorMode:l,elevationType:h,terrainEnabled:d,pass:u};if("shadow"!==t.renderPass)if("offset"!==h){if(Go(p,!1),"road"===h){const e=!d&&"translucent"===t.renderPass;e&&Wo(t,i,r,n,"geometry"),Go(p,!0,Zi.disabled),e&&function(e){const{painter:t,sourceCache:i,layer:r,coords:n,colorMode:o}=e,a=t.context.gl,s=e.painter.shadowRenderer,l=!!s&&s.enabled,c=new ji(t.context.gl.LEQUAL,ji.ReadOnly,t.depthRangeFor3D);let u=[0,0,0];if(l){const e=t.style.directionalLight,i=t.style.ambientLight;e&&i&&(u=ur(t.style,e,i))}const h=e=>{for(const h of n){const n=i.getTile(h),d=n.getBucket(r);if(!d)continue;const p=d.elevatedStructures;if(!p)continue;let f,m;if(e?(f=p.renderableBridgeSegments,m=p.bridgeProgramConfigurations.get(r.id)):(f=p.renderableTunnelSegments,m=p.tunnelProgramConfigurations.get(r.id)),!f||0===f.segments[0].primitiveLength)continue;m.updatePaintBuffers(),t.prepareDrawTile();const g=t.isTileAffectedByFog(h),y=[];l&&y.push("RENDER_SHADOWS","DEPTH_TEXTURE","NORMAL_OFFSET");const _=t.getOrCreateProgram("elevatedStructures",{config:m,overrideFog:g,defines:y}),v=t.translatePosMatrix(h.projMatrix,n,r.paint.get("fill-translate"),r.paint.get("fill-translate-anchor"));l&&s.setupShadows(n.tileID.toUnwrapped(),_,"vector-tile",n.tileID.overscaledZ);const x=lo(v,u);t.uploadCommonUniforms(t.context,_,h.toUnwrapped()),_.draw(t,a.TRIANGLES,c,Zi.disabled,o,qi.backCCW,x,r.id,p.vertexBuffer,p.indexBuffer,f,r.paint,t.transform.zoom,m,[p.vertexBufferNormal])}};h(!0),h(!1)}(p)}}else Go(p,!1,t.stencilModeFor3D());else t.shadowRenderer&&"road"===h&&!d&&function(e){const{painter:t,sourceCache:i,layer:r,coords:n}=e,o=t.context.gl,a=e.painter.shadowRenderer;for(const s of n){const e=i.getTile(s),n=e.getBucket(r);if(!n)continue;const l=n.elevatedStructures;if(!l)continue;if(!l.shadowCasterSegments||0===l.shadowCasterSegments.segments[0].primitiveLength)continue;t.prepareDrawTile();const c=n.bufferData.programConfigurations.get(r.id),u=t.isTileAffectedByFog(s),h=t.getOrCreateProgram("elevatedStructuresDepth",{config:c,overrideFog:u}),d=a.calculateShadowPassMatrixFromTile(e.tileID.toUnwrapped());t.uploadCommonUniforms(t.context,h,s.toUnwrapped());const p={u_matrix:d,u_depth_bias:.001};h.draw(t,o.TRIANGLES,a.getShadowPassDepthMode(),Zi.disabled,a.getShadowPassColorMode(),qi.disabled,p,r.id,l.vertexBuffer,l.indexBuffer,l.shadowCasterSegments,r.paint,t.transform.zoom,c)}}(p)},"fill-extrusion":function(t,i,r,n){const o=r.paint.get("fill-extrusion-opacity"),a=t.context,s=a.gl,l=t.terrain,c=l&&l.renderingToTexture;if(0===o)return;const u=t.conflationActive&&t.style.isLayerClipped(r,i.getSource()),h=t.style.order.indexOf(r.fqid);if(u&&function(e,t,i,r,n){for(const o of r){const r=t.getTile(o).getBucket(i);r&&(r.updateReplacement(o,e.replacementSource,n),r.uploadCentroid(e.context))}}(t,i,r,n,h),l||u)for(const e of n){const n=i.getTile(e).getBucket(r);n&&Yo(t.context,i,e,n,r,l,u)}if("shadow"===t.renderPass&&t.shadowRenderer){const a=t.shadowRenderer;if(l&&o<.65&&r._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof e.ab)return;const s=a.getShadowPassDepthMode(),c=a.getShadowPassColorMode();qo(t,i,r,n,s,Zi.disabled,c,u)}else if("translucent"===t.renderPass){const h=!r.paint.get("fill-extrusion-pattern").constantOr(1),d=r.paint.get("fill-extrusion-color").constantOr(e.am.white);if(!c&&0!==d.a){const e=new ji(t.context.gl.LEQUAL,ji.ReadWrite,t.depthRangeFor3D);1===o&&h?qo(t,i,r,n,e,Zi.disabled,Ui.unblended,u):(qo(t,i,r,n,e,Zi.disabled,Ui.disabled,u),qo(t,i,r,n,e,t.stencilModeFor3D(),t.colorModeForRenderPass(),u),t.resetStencilClippingMasks())}if(t.style.enable3dLights()&&h&&(!l&&"globe"!==t.transform.projection.name||c)){const o=r.paint.get("fill-extrusion-opacity"),h=r.paint.get("fill-extrusion-ambient-occlusion-intensity"),d=r.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),p=r.paint.get("fill-extrusion-flood-light-intensity"),f="none"===r.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default"),m=r.paint.get("fill-extrusion-flood-light-color").toNonPremultipliedRenderColor(f?null:r.lut).toArray01().slice(0,3),g=h>0&&d>0,y=p>0,_=(e,t,i)=>(1-i)*e+i*t,v=a=>{const l=t.depthModeForSublayer(1,ji.ReadOnly,s.LEQUAL,!0),c=r.paint.get(a?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),f=_(.1,3,c),g=t._showOverdrawInspector;if(!g){const c=new Zi({func:s.ALWAYS,mask:255},255,255,s.KEEP,s.KEEP,s.REPLACE),g=new Ui([s.ONE,s.ONE,s.ONE,s.ONE],e.am.transparent,[!1,!1,!1,!0],s.MIN);Xo(t,i,r,n,l,c,g,qi.disabled,a,"sdf",o,h,d,p,m,f,u,!1)}{const c=g?Zi.disabled:new Zi({func:s.EQUAL,mask:255},255,255,s.KEEP,s.DECR,s.DECR),y=g?t.colorModeForRenderPass():new Ui([s.ONE_MINUS_DST_ALPHA,s.DST_ALPHA,s.ONE,s.ONE],e.am.transparent,[!0,!0,!0,!0]);Xo(t,i,r,n,l,c,y,qi.disabled,a,"color",o,h,d,p,m,f,u,!1)}};if(c){const c=(a,l,c)=>{const f=t.depthModeForSublayer(1,ji.ReadOnly,s.LEQUAL,!1),g=r.paint.get(a?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),y=_(.1,3,g);{const c=new Ui([s.ONE,s.ONE,s.ONE,s.ONE],e.am.transparent,[!1,!1,!1,!0]);Xo(t,i,r,n,f,Zi.disabled,c,qi.disabled,a,"clear",o,h,d,p,m,y,u,l)}{const c=new Zi({func:s.ALWAYS,mask:255},255,255,s.KEEP,s.KEEP,s.REPLACE),g=new Ui([s.ONE,s.ONE,s.ONE,s.ONE],e.am.transparent,[!1,!1,!1,!0],s.MIN);Xo(t,i,r,n,f,c,g,qi.disabled,a,"sdf",o,h,d,p,m,y,u,l)}{const c=a?s.ZERO:s.ONE_MINUS_DST_ALPHA,g=new Zi({func:s.EQUAL,mask:255},255,255,s.KEEP,s.DECR,s.DECR),_=new Ui([c,s.DST_ALPHA,s.ONE_MINUS_DST_ALPHA,s.ZERO],e.am.transparent,[!0,!0,!0,!0]);Xo(t,i,r,n,f,g,_,qi.disabled,a,"color",o,h,d,p,m,y,u,l)}{const g=new Ui([s.ONE,s.ONE,s.ONE,a?s.ZERO:s.ONE],e.am.transparent,[!1,!1,!1,!0],a?s.FUNC_ADD:s.MAX);Xo(t,i,r,n,f,Zi.disabled,g,qi.disabled,a,"clear",o,h,d,p,m,y,u,l,c)}};if(g||y){let i;if(t.prepareDrawTile(),l){const t=l.drapeBufferSize[0],r=l.drapeBufferSize[1];i=l.framebufferCopyTexture,i&&(!i||i.size[0]===t&&i.size[1]===r)||(i&&i.destroy(),i=l.framebufferCopyTexture=new e.T(a,new e.r({width:t,height:r}),s.RGBA8)),i.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.copyTexSubImage2D(s.TEXTURE_2D,0,0,0,0,0,t,r)}g&&c(!0,!1,i),y&&c(!1,!0,i)}}else g&&v(!0),y&&v(!1),(g||y)&&t.resetStencilClippingMasks()}}},building:function(e,t,i,r){},hillshade:function(e,t,i,r){if("offscreen"!==e.renderPass&&"translucent"!==e.renderPass)return;if(e.style.disableElevatedTerrain)return;const n=e.context,o=e.terrain&&e.terrain.renderingToTexture,[a,s]="translucent"!==e.renderPass||o?[{},r]:e.stencilConfigForOverlap(r);for(const l of s){const r=t.getTile(l);if(r.needsHillshadePrepare&&"offscreen"===e.renderPass)Kr(e,r,i);else if("translucent"===e.renderPass){const t=e.depthModeForSublayer(0,ji.ReadOnly),n=i.paint.get("hillshade-emissive-strength"),s=e.colorModeForDrapableLayerRenderPass(n),c=o&&e.terrain?e.terrain.stencilModeForRTTOverlap(l):a[l.overscaledZ];Xr(e,l,r,i,t,c,s)}}n.viewport.set([0,0,e.width,e.height]),e.resetStencilClippingMasks()},raster:function(t,i,r,n,o,a){if("translucent"!==t.renderPass)return;if(0===r.paint.get("raster-opacity"))return;const s="globe"===t.transform.projection.name,l=0!==r.paint.get("raster-elevation"),c=l&&s;if(t.renderElevatedRasterBackface&&!c)return;const u=t.context,h=u.gl,d=i.getSource(),p=function(t,i,r,n){const o=i.paint.get("raster-color"),a="raster-array"===t.type,s=[],l=i.paint.get("raster-resampling"),c=i.paint.get("raster-color-mix");let u=i.paint.get("raster-color-range");const h=[c[0],c[1],c[2],0],d=c[3];let p="nearest"===l?n.NEAREST:n.LINEAR;if(a&&(s.push("RASTER_ARRAY"),o||s.push("RASTER_COLOR"),"linear"===l&&s.push("RASTER_ARRAY_LINEAR"),p=n.NEAREST,!u&&t.rasterLayers)){const e=t.rasterLayers.find(e=>{let{id:t}=e;return t===i.sourceLayer});e&&e.fields&&e.fields.range&&(u=e.fields.range)}if(u=u||[0,1],o){s.push("RASTER_COLOR"),r.activeTexture.set(n.TEXTURE2),i.updateColorRamp(u);let t=i.colorRampTexture;t||(t=i.colorRampTexture=new e.T(r,i.colorRamp,n.RGBA8)),t.bind(n.LINEAR,n.CLAMP_TO_EDGE)}return{mix:h,range:u,offset:d,defines:s,resampling:p}}(d,r,u,h);if(d instanceof e.aP&&!n.length&&!s)return;const f=r.paint.get("raster-emissive-strength"),m=t.colorModeForDrapableLayerRenderPass(f),g=t.terrain&&t.terrain.renderingToTexture,y=!t.options.moving,_="nearest"===r.paint.get("raster-resampling")?h.NEAREST:h.LINEAR;if(d instanceof e.aP&&!n.length&&(d.onNorthPole||d.onSouthPole)){const e=l?t.stencilModeFor3D():Zi.disabled;return void ta(!!d.onNorthPole,null,t,i,r,f,p,qi.disabled,e)}if(!n.length)return;const[v,x]=d instanceof e.aP||g?[{},n]:t.stencilConfigForOverlap(n),C=x[x.length-1].overscaledZ;c&&p.defines.push("PROJECTION_GLOBE_VIEW"),l&&p.defines.push("RENDER_CUTOFF");const w=(n,o,x)=>{for(const w of n){const n=w.toUnwrapped(),b=i.getTile(w);if(g&&(!b||!b.hasData()))continue;u.activeTexture.set(h.TEXTURE0);const S=ra(b,d,r,p);if(!S||!S.texture)continue;const{texture:L,mix:T,offset:M,tileSize:E,buffer:I}=S;let A,k;g?(A=ji.disabled,k=w.projMatrix):l?(A=new ji(h.LEQUAL,ji.ReadWrite,t.depthRangeFor3D),k=s?Float32Array.from(t.transform.expandedFarZProjMatrix):t.transform.calculateProjMatrix(n,y)):(A=t.depthModeForSublayer(w.overscaledZ-C,1===r.paint.get("raster-opacity")?ji.ReadWrite:ji.ReadOnly,h.LESS),k=t.transform.calculateProjMatrix(n,y));const P=t.terrain&&g?t.terrain.stencilModeForRTTOverlap(w):v[w.overscaledZ],O=a?0:r.paint.get("raster-fade-duration");b.registerFadeDuration(O);const R=i.findLoadedParent(w,0),z=Hn(b,R,i,t.transform,O);let D,F;t.terrain&&t.terrain.prepareDrawTile(),u.activeTexture.set(h.TEXTURE0),L.bind(_,h.CLAMP_TO_EDGE),u.activeTexture.set(h.TEXTURE1),R?(R.texture&&R.texture.bind(_,h.CLAMP_TO_EDGE),D=Math.pow(2,R.tileID.overscaledZ-b.tileID.overscaledZ),F=[b.tileID.canonical.x*D%1,b.tileID.canonical.y*D%1]):L.bind(_,h.CLAMP_TO_EDGE),"useMipmap"in L&&u.extTextureFilterAnisotropic&&t.transform.pitch>20&&h.texParameterf(h.TEXTURE_2D,u.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,u.extTextureFilterAnisotropicMax);const B=t.transform;let V;const N=l?ia(B):[0,0,0,0];let U,j,H,Z,W,G=0;if(c&&d instanceof e.aP&&d.coordinates.length>3)U=Float32Array.from(e.bh(e.dr(new e.cp(0,0,0)))),j=Float32Array.from(B.globeMatrix),H=Float32Array.from(e.dm(B)),Z=[e.aD(B.center.lng),e.aH(B.center.lat)],V=d.elevatedGlobePerspectiveTransform,W=d.elevatedGlobeGridMatrix||new Float32Array(9);else if(c){const t=e.dn(w.canonical);G=e.dp(t.getCenter().lat),U=Float32Array.from(e.bh(e.dr(w.canonical))),j=Float32Array.from(B.globeMatrix),H=Float32Array.from(e.dm(B)),Z=[e.aD(B.center.lng),e.aH(B.center.lat)],V=[0,0],W=Float32Array.from(e.dq(w.canonical,t,G,B.worldSize/B._pixelsPerMercatorPixel))}else V=d instanceof e.aP?d.perspectiveTransform:[0,0],U=new Float32Array(16),j=new Float32Array(9),H=new Float32Array(16),Z=[0,0],W=new Float32Array(9);const q=yo(k,U,j,H,W,F||[0,0],e.ah(t.transform.zoom),Z,N,D||1,z,r,V,l?r.paint.get("raster-elevation"):0,2,T,M,p.range,E,I,f),X=t.isTileAffectedByFog(w),Y=t.getOrCreateProgram("raster",{defines:p.defines,overrideFog:X});if(t.uploadCommonUniforms(u,Y,n),d instanceof e.aP){const i=d.elevatedGlobeVertexBuffer,n=d.elevatedGlobeIndexBuffer;if(g||!s)d.boundsBuffer&&d.boundsSegments&&Y.draw(t,h.TRIANGLES,A,Zi.disabled,m,qi.disabled,q,r.id,d.boundsBuffer,t.quadTriangleIndexBuffer,d.boundsSegments);else if(i&&n){const a=B.zoom<=e.cL?d.elevatedGlobeSegments:d.getSegmentsForLongitude(B.center.lng);a&&Y.draw(t,h.TRIANGLES,A,Zi.disabled,m,o,q,r.id,i,n,a)}}else if(c){A=new ji(h.LEQUAL,ji.ReadOnly,t.depthRangeFor3D);const e=t.globeSharedBuffers;if(e){const[i,n,a]=e.getGridBuffers(G,!1);Y.draw(t,h.TRIANGLES,A,x||P,t.colorModeForRenderPass(),o,q,r.id,i,n,a)}}else{const{tileBoundsBuffer:e,tileBoundsIndexBuffer:i,tileBoundsSegments:n}=t.getTileBoundsBuffers(b);Y.draw(t,h.TRIANGLES,A,P,m,qi.disabled,q,r.id,e,i,n)}}if(!(d instanceof e.aP)&&c)for(const e of n){const n=e.canonical.y===(1<<e.canonical.z)-1;0===e.canonical.y&&ta(!0,e,t,i,r,f,p,o,x||Zi.disabled),n&&ta(!1,e,t,i,r,f,p,o===qi.frontCW?qi.backCW:qi.frontCW,x||Zi.disabled)}};c?w(x,t.renderElevatedRasterBackface?qi.backCW:qi.frontCW,t.stencilModeFor3D()):w(x,qi.disabled,void 0),t.resetStencilClippingMasks()},"raster-particle":function(t,i,r,n,o,a){"offscreen"===t.renderPass&&function(t,i,r,n){if(!n.length)return;const o=t.context,a=o.gl,s=i.getSource();if(!(s instanceof st))return;const l=Math.ceil(Math.sqrt(r.paint.get("raster-particle-count")));let c=r.particlePositionRGBAImage;if(!c||c.width!==l){const t=function(e){const t=e*e,i=new Uint8Array(4*t),r=function(e){return e|=0,e=Math.imul(2747636419^e,2654435769),e=Math.imul(e^e>>>16,2654435769),((e=Math.imul(e^e>>>16,2654435769))>>>0)/4294967296},n=1/1.1;for(let o=0;o<t;o++){const e=n*(r(2*o+0)+vo),t=n*(r(2*o+1)+vo),a=255*e%1,s=255*t%1,l=a,c=t-s/255,u=s;i[4*o+0]=255*(e-a/255),i[4*o+1]=255*l,i[4*o+2]=255*c,i[4*o+3]=255*u}return i}(l);c=r.particlePositionRGBAImage=new e.r({width:l,height:l},t)}let u=r.particleFramebuffer;u?u.width!==l&&(u.destroy(),u=r.particleFramebuffer=o.createFramebuffer(l,l,!0,null)):u=r.particleFramebuffer=o.createFramebuffer(l,l,!0,null);const h=[];for(const e of n){const t=i.getTile(e);if(!(t instanceof Tt))continue;const n=aa(t,s,r);if(!n)continue;const a=[t.tileSize,t.tileSize];let u=r.tileFramebuffer;u||(u=r.tileFramebuffer=o.createFramebuffer(a[0],a[1],!0,null));let d=t.rasterParticleState;d||(d=t.rasterParticleState=new oa(o,e,a,c));const p=d.update(r.lastInvalidatedAt);d.particleTextureDimension!==l&&d.updateParticleTexture(e,c);const f=d.targetColorTexture;d.targetColorTexture=d.backgroundColorTexture,d.backgroundColorTexture=f;const m=d.particleTexture0;d.particleTexture0=d.particleTexture1,d.particleTexture1=m,h.push([e,n,d,p])}if(0===h.length)return;const d=e.q.now(),p=r.previousDrawTimestamp?.001*(d-r.previousDrawTimestamp):.0167;if(r.previousDrawTimestamp=d,r.hasColorMap()){o.activeTexture.set(a.TEXTURE0+2);let t=r.colorRampTexture;t||(t=r.colorRampTexture=new e.T(o,r.colorRamp,a.RGBA8)),t.bind(a.LINEAR,a.CLAMP_TO_EDGE)}o.bindFramebuffer.set(r.tileFramebuffer.framebuffer),function(t,i,r){const n=t.context,o=n.gl,a=i.tileFramebuffer;n.activeTexture.set(o.TEXTURE0);const s={u_texture:0,u_opacity:1.05*(c=i.paint.get("raster-particle-fade-opacity-factor"))/(c+.05)},l=t.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var c;for(const u of r){const[,,r,c]=u;a.colorAttachment.set(r.targetColorTexture.texture),n.viewport.set([0,0,a.width,a.height]),n.clear({color:e.am.transparent}),c&&(r.backgroundColorTexture.bind(o.NEAREST,o.CLAMP_TO_EDGE),l.draw(t,o.TRIANGLES,ji.disabled,Zi.disabled,Ui.alphaBlended,qi.disabled,s,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments))}}(t,r,h),function(t,i,r,n){const o=t.context,a=o.gl,s=r.tileFramebuffer,l="globe"===t.transform.projection.name,c=r.paint.get("raster-particle-max-speed");for(const u of n){const[n,h,d]=u;o.activeTexture.set(a.TEXTURE0+0),h.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),s.colorAttachment.set(d.targetColorTexture.texture);const p=t.getOrCreateProgram("rasterParticleDraw",{defines:h.defines,overrideFog:!1});o.activeTexture.set(a.TEXTURE0+1);const f=h.scalarData?[]:[0,1,2,3].map(t=>e.dT[t](n));f.push(n);const m=n.canonical.x,g=n.canonical.y;for(const e of f){const o=i.getTile(l?e.wrapped():e);if(!o)continue;const s=o.rasterParticleState;if(!s)continue;const u=e.canonical.x+(1<<e.canonical.z)*(e.wrap-n.wrap),d=e.canonical.y;s.particleTexture0.bind(a.NEAREST,a.CLAMP_TO_EDGE);const f=Co(1,s.particleTexture0.size[0],[u-m,d-g],0,h.texture.size,2,c,h.textureOffset,h.scale,h.offset);p.draw(t,a.POINTS,ji.disabled,Zi.disabled,Ui.alphaBlended,qi.disabled,f,r.id,s.particleIndexBuffer,void 0,s.particleSegment)}}}(t,i,r,h),o.bindFramebuffer.set(r.particleFramebuffer.framebuffer),function(t,i,r,n){const o=t.context,a=o.gl,s=i.paint.get("raster-particle-max-speed"),l=n*i.paint.get("raster-particle-speed-factor")*.15,c=function(e){return Math.pow(e,6)}(.01+1*i.paint.get("raster-particle-reset-rate-factor")),u=i.particleFramebuffer;o.viewport.set([0,0,u.width,u.height]);for(const h of r){const[,r,n]=h;o.activeTexture.set(a.TEXTURE0+0),r.texture.bind(a.LINEAR,a.CLAMP_TO_EDGE),o.activeTexture.set(a.TEXTURE0+1);const d=n.particleTexture0;d.bind(a.NEAREST,a.CLAMP_TO_EDGE);const p=wo(1,d.size[0],0,r.texture.size,s,l,c,r.textureOffset,r.scale,r.offset);u.colorAttachment.set(n.particleTexture1.texture),o.clear({color:e.am.transparent}),t.getOrCreateProgram("rasterParticleUpdate",{defines:r.defines}).draw(t,a.TRIANGLES,ji.disabled,Zi.disabled,Ui.unblended,qi.disabled,p,i.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments)}}(t,r,h,p)}(t,i,r,n),"translucent"===t.renderPass&&(function(t,i,r,n){const o=t.context,a=o.gl,s=i.getSource().tileSize,l=5*(1-e.af(e.cx,e.cx+1,t.transform.zoom))*s+r.paint.get("raster-particle-elevation"),c=!t.options.moving,u="globe"===t.transform.projection.name;if(!n.length)return;const[h,d]=t.stencilConfigForOverlap(n),p=[];u&&p.push("PROJECTION_GLOBE_VIEW");const f=t.stencilModeFor3D();for(const m of d){const n=m.toUnwrapped(),s=i.getTile(m);if(!s.rasterParticleState)continue;const d=s.rasterParticleState,g=100;s.registerFadeDuration(g);const y=i.findLoadedParent(m,0),_=Hn(s,y,i,t.transform,g);let v,x;t.terrain&&t.terrain.prepareDrawTile(),o.activeTexture.set(a.TEXTURE0),d.targetColorTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),o.activeTexture.set(a.TEXTURE1),y&&y.rasterParticleState?(y.rasterParticleState.targetColorTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),v=Math.pow(2,y.tileID.overscaledZ-s.tileID.overscaledZ),x=[s.tileID.canonical.x*v%1,s.tileID.canonical.y*v%1]):d.targetColorTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE);const C=u?Float32Array.from(t.transform.expandedFarZProjMatrix):t.transform.calculateProjMatrix(n,c),w=t.transform,b=sa(w),S=e.dn(m.canonical),L=e.dp(S.getCenter().lat);let T,M,E,I,A;u?(T=Float32Array.from(e.bh(e.dr(m.canonical))),M=Float32Array.from(w.globeMatrix),E=Float32Array.from(e.dm(w)),I=[e.aD(w.center.lng),e.aH(w.center.lat)],A=Float32Array.from(e.dq(m.canonical,S,L,w.worldSize/w._pixelsPerMercatorPixel))):(T=new Float32Array(16),M=new Float32Array(9),E=new Float32Array(16),I=[0,0],A=new Float32Array(9));const k=xo(C,T,M,E,A,x||[0,0],e.ah(t.transform.zoom),I,b,v||1,_,l),P=t.isTileAffectedByFog(m),O=t.getOrCreateProgram("rasterParticle",{defines:p,overrideFog:P});if(t.uploadCommonUniforms(o,O,n),u){const e=new ji(a.LEQUAL,ji.ReadOnly,t.depthRangeFor3D),i=0,n=t.globeSharedBuffers;if(n){const[o,s,l]=n.getGridBuffers(L,0!==i);O.draw(t,a.TRIANGLES,e,f,Ui.alphaBlended,t.renderElevatedRasterBackface?qi.frontCCW:qi.backCCW,k,r.id,o,s,l)}}else{const e=t.depthModeForSublayer(0,ji.ReadOnly),i=h[m.overscaledZ],{tileBoundsBuffer:n,tileBoundsIndexBuffer:o,tileBoundsSegments:l}=t.getTileBoundsBuffers(s);O.draw(t,a.TRIANGLES,e,i,Ui.alphaBlended,qi.disabled,k,r.id,n,o,l)}}t.resetStencilClippingMasks()}(t,i,r,n),t.style.map.triggerRepaint())},background:function(t,i,r,n){const o=r.paint.get("background-color"),a="none"===r.paint.get("background-color-use-theme").constantOr("default"),s=r.paint.get("background-opacity"),l=r.paint.get("background-emissive-strength"),c="viewport"===r.paint.get("background-pitch-alignment");if(0===s)return;const u=t.context,h=u.gl,d=t.transform,p=d.tileSize,f=r.paint.get("background-pattern");let m;if(void 0!==f){if(null===f)return;if(m=t.imageManager.getPattern(e.I.from(f.toString()),r.scope,t.style.getLut(r.scope)),!m)return}const g=!f&&1===o.a&&1===s&&t.opaquePassEnabledForLayer()?"opaque":"translucent";if(t.renderPass!==g)return;const y=Zi.disabled,_=t.depthModeForSublayer(0,"opaque"===g?ji.ReadWrite:ji.ReadOnly),v=t.colorModeForDrapableLayerRenderPass(l),x=f?"backgroundPattern":"background";let C,w=n;if(w||(C=t.getBackgroundTiles(),w=Object.values(C).map(e=>e.tileID)),f&&(u.activeTexture.set(h.TEXTURE0),t.imageManager.bind(t.context,r.scope)),c){const i=t.getOrCreateProgram(x,{overrideFog:!1,overrideRtt:!0}),n=new Float32Array(e.bx([])),u=new e.aM(0,0,0,0,0),d=f?To(n,l,s,t,0,r.scope,m,c,{tileID:u,tileSize:p}):Lo(n,l,s,o.toPremultipliedRenderColor(a?null:r.lut));i.draw(t,h.TRIANGLES,_,y,v,qi.disabled,d,r.id,t.viewportBuffer,t.quadTriangleIndexBuffer,t.viewportSegments)}else for(const e of w){const g=t.isTileAffectedByFog(e),w=t.getOrCreateProgram(x,{overrideFog:g}),b=e.toUnwrapped(),S=n?e.projMatrix:t.transform.calculateProjMatrix(b);t.prepareDrawTile();const L=i?i.getTile(e):C?C[e.key]:new Lt(e,p,d.zoom,t),T=f?To(S,l,s,t,0,r.scope,m,c,{tileID:e,tileSize:p}):Lo(S,l,s,o.toPremultipliedRenderColor(a?null:r.lut));t.uploadCommonUniforms(u,w,b);const{tileBoundsBuffer:M,tileBoundsIndexBuffer:E,tileBoundsSegments:I}=t.getTileBoundsBuffers(L);w.draw(t,h.TRIANGLES,_,y,v,qi.disabled,T,r.id,M,E,I)}},sky:function(t,i,r){const n=t._atmosphere?e.ah(t.transform.zoom):1,o=r.paint.get("sky-opacity")*n;if(0===o)return;const a=t.context,s=r.paint.get("sky-type"),l=new ji(a.gl.LEQUAL,ji.ReadOnly,[0,1]),c=t.frameCounter/1e3%1;"atmosphere"===s?"offscreen"===t.renderPass?r.needsSkyboxCapture(t)&&(function(t,i){const r=t.context,n=r.gl;let o=i.skyboxFbo;if(!o){o=i.skyboxFbo=r.createFramebuffer(32,32,!0,null),i.skyboxGeometry=new Ca(r),i.skyboxTexture=r.gl.createTexture(),n.bindTexture(n.TEXTURE_CUBE_MAP,i.skyboxTexture),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_CUBE_MAP,n.TEXTURE_MAG_FILTER,n.LINEAR);for(let e=0;e<6;++e)n.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,n.RGBA,32,32,0,n.RGBA,n.UNSIGNED_BYTE,null)}r.bindFramebuffer.set(o.framebuffer),r.viewport.set([0,0,32,32]);const a=i.getCenter(t,!0),s=t.getOrCreateProgram("skyboxCapture"),l=new Float64Array(16);e.bx(l),e.e3(l,l,.5*-Math.PI),wa(t,i,s,l,a,0),e.bx(l),e.e3(l,l,.5*Math.PI),wa(t,i,s,l,a,1),e.bx(l),e.cG(l,l,.5*-Math.PI),wa(t,i,s,l,a,2),e.bx(l),e.cG(l,l,.5*Math.PI),wa(t,i,s,l,a,3),e.bx(l),wa(t,i,s,l,a,4),e.bx(l),e.e3(l,l,Math.PI),wa(t,i,s,l,a,5),r.viewport.set([0,0,t.width,t.height])}(t,r),r.markSkyboxValid(t)):"sky"===t.renderPass&&function(e,t,i,r,n){const o=e.context,a=o.gl,s=e.transform,l=e.getOrCreateProgram("skybox");o.activeTexture.set(a.TEXTURE0),a.bindTexture(a.TEXTURE_CUBE_MAP,t.skyboxTexture);const c=((e,t,i,r,n)=>({u_matrix:e,u_sun_direction:t,u_cubemap:0,u_opacity:r,u_temporal_offset:n}))(s.skyboxMatrix,t.getCenter(e,!1),0,r,n);e.uploadCommonUniforms(o,l),l.draw(e,a.TRIANGLES,i,Zi.disabled,e.colorModeForRenderPass(),qi.backCW,c,"skybox",t.skyboxGeometry.vertexBuffer,t.skyboxGeometry.indexBuffer,t.skyboxGeometry.segment)}(t,r,l,o,c):"gradient"===s&&"sky"===t.renderPass&&function(t,i,r,n,o){const a=t.context,s=a.gl,l=t.transform,c=t.getOrCreateProgram("skyboxGradient");i.skyboxGeometry||(i.skyboxGeometry=new Ca(a)),a.activeTexture.set(s.TEXTURE0);let u=i.colorRampTexture;u||(u=i.colorRampTexture=new e.T(a,i.colorRamp,s.RGBA8)),u.bind(s.LINEAR,s.CLAMP_TO_EDGE);const h=((t,i,r,n,o)=>({u_matrix:t,u_color_ramp:0,u_center_direction:i,u_radius:e.al(r),u_opacity:n,u_temporal_offset:o}))(l.skyboxMatrix,i.getCenter(t,!1),i.paint.get("sky-gradient-radius"),n,o);t.uploadCommonUniforms(a,c),c.draw(t,s.TRIANGLES,r,Zi.disabled,t.colorModeForRenderPass(),qi.backCW,h,"skyboxGradient",i.skyboxGeometry.vertexBuffer,i.skyboxGeometry.indexBuffer,i.skyboxGeometry.segment)}(t,r,l,o,c)},custom:function(t,i,r,n){const o=t.context,a=r.implementation;if(!t.transform.projection.unsupportedLayers||!t.transform.projection.unsupportedLayers.includes("custom")||t.terrain&&(t.terrain.renderingToTexture||"offscreen"===t.renderPass)&&r.isDraped(i)){if("offscreen"===t.renderPass){const i=a.prerender;if(i){if(t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),"globe"===t.transform.projection.name){const r=t.transform.pointMerc;i.call(a,o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.ah(t.transform.zoom),[r.x,r.y],t.transform.pixelsPerMeterRatio)}else i.call(a,o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState()}}else if("translucent"===t.renderPass){if(t.terrain&&t.terrain.renderingToTexture){const e=a.renderToTile;if(e){const i=n[0].canonical,r={x:i.x+n[0].wrap*(a.wrapTileId?0:1<<i.z),y:i.y,z:i.z};o.setDepthMode(ji.disabled),o.setStencilMode(Zi.disabled),o.setColorMode(t.colorModeForRenderPass()),t.setCustomLayerDefaults(),e.call(a,o.gl,r),o.setDirty(),t.setBaseState()}return}t.setCustomLayerDefaults(),o.setColorMode(t.colorModeForRenderPass()),o.setStencilMode(Zi.disabled);const i="3d"===a.renderingMode?new ji(t.context.gl.LEQUAL,ji.ReadWrite,t.depthRangeFor3D):t.depthModeForSublayer(0,ji.ReadOnly);if(o.setDepthMode(i),"globe"===t.transform.projection.name){const i=t.transform.pointMerc;a.render(o.gl,t.transform.customLayerMatrix(),t.transform.getProjection(),t.transform.globeToMercatorMatrix(),e.ah(t.transform.zoom),[i.x,i.y],t.transform.pixelsPerMeterRatio)}else a.render(o.gl,t.transform.customLayerMatrix());o.setDirty(),t.setBaseState(),o.bindFramebuffer.set(null)}}else e.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(t,i,r,n){if("opaque"===t.renderPass)return;const o=r.paint.get("model-opacity").constantOr(1);if(0===o)return;const a=r.paint.get("model-cast-shadows");if("shadow"===t.renderPass){if(!a)return;if(t.terrain&&o<.65&&r._transitionablePaint._values["model-opacity"].value.expression instanceof e.ab)return}const s=t.shadowRenderer,l=r.paint.get("model-receive-shadows");s&&(s.useNormalOffset=!0,l||(s.enabled=!1));const c=()=>{s&&(s.useNormalOffset=!0,l||(s.enabled=!0))},u=i.getSource();if("light-beam"===t.renderPass&&"batched-model"!==u.type)return;if("vector"===u.type||"geojson"===u.type)return function(t,i,r,n,o){const a=t.transform;if("mercator"!==a.projection.name)return void e.w("Drawing 3D models for ".concat(a.projection.name," projection is not yet implemented"));const s=a.getFreeCameraOptions().position;if(!t.modelManager)return;const l=t.modelManager;r.modelManager=l;const c=t.shadowRenderer;if(!r._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const u=r._unevaluatedLayout._values["model-id"],h=Object.assign({},r.layout.get("model-id").parameters),d=t.style.order.indexOf(r.fqid);for(const p of n){const n=i.getTile(p).getBucket(r);if(!n||n.projection.name!==a.projection.name)continue;const f=n.getModelUris();f&&!n.modelsRequested&&(l.addModelsFromBucket(f,o),n.modelsRequested=!0);const m=za(p,a);h.zoom=m;const g=u.possiblyEvaluate(h);if(Oa(t,n,p),Ra.shadowUniformsInitialized=!1,Ra.useSingleShadowCascade=!!c&&0===c.getMaxCascadeForTile(p.toUnwrapped()),"shadow"===t.renderPass&&c){if(1===t.currentShadowCascade&&n.isInsideFirstShadowMapFrustum)continue;const i=a.calculatePosMatrix(p.toUnwrapped(),a.worldSize);if(Ra.tileMatrix.set(i),Ra.shadowTileMatrix=Float32Array.from(c.calculateShadowPassMatrixFromMatrix(i)),Ra.aabb.min.fill(0),Ra.aabb.max[0]=Ra.aabb.max[1]=e.aj,Ra.aabb.max[2]=0,Ba(n,Ra,t,r.scope))continue}const y=1<<p.canonical.z,_=[((s.x-p.wrap)*y-p.canonical.x)*e.aj,(s.y*y-p.canonical.y)*e.aj,s.z*y*e.aj];t.conflationActive&&Object.keys(n.instancesPerModel).length>0&&t.style.isLayerClipped(r,i.getSource())&&n.updateReplacement(p,t.replacementSource,d,o)&&(n.uploaded=!1,n.upload(t.context));for(let e in n.instancesPerModel){const i=n.instancesPerModel[e];i.features.length>0&&(e=g.evaluate(i.features[0].feature,{}));const a=l.getModel(e,o);if(a||l.hasURLBeenRequested(e)||n.modelUris.includes(e)||(n.modelUris.push(e),n.modelsRequested=!1),a&&a.uploaded)for(const e of a.nodes)Da(t,r,e,i,_,p,Ra)}}}(t,i,r,n,"vector"===u.type?r.scope:""),void c();if(!u.loaded())return;if("batched-model"===u.type)return function(t,i,r,n){r.resetLayerRenderingStats(t);const o=t.context,a=t.transform,s=t.style.fog,l=t.shadowRenderer;if("mercator"!==a.projection.name)return void e.w("Drawing 3D landmark models for ".concat(a.projection.name," projection is not yet implemented"));const c=t.transform.getFreeCameraOptions().position,u=e.bY([],[c.x,c.y,c.z],t.transform.worldSize),h=e.eb([],u),d=e.bx([]),p=e.ec(a.center.lat,a.zoom),f=e.bn([],[1,1,1/p]);e.bo(d,d,h);const m=r.paint.get("model-opacity").constantOr(1),g=new ji(o.gl.LEQUAL,ji.ReadWrite,t.depthRangeFor3D),y=new ji(o.gl.LEQUAL,ji.ReadOnly,t.depthRangeFor3D),_=new e.cW([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),v="shadow"===t.renderPass,x=v&&l?l.getCurrentCascadeFrustum():a.getFrustum(a.scaleZoom(a.worldSize)),C=r.paint.get("model-front-cutoff"),w=C[2]<1,b=rr(t,r.paint.get("model-cutoff-fade-range")),S=r.getLayerRenderingStats();(function(e,t,i,r){const n=e.terrain?e.terrain.exaggeration():0,o=e.transform.zoom;for(const a of r){const r=t.getTile(a).getBucket(i);r&&(r.setFilter(i.filter),e.conflationActive&&r.updateReplacement(a,e.replacementSource),r.evaluateTransform(e,i),e.terrain&&n>0&&r.elevationUpdate(e.terrain,n,a,i.source),r.needsReEvaluation(e,o,i)&&r.evaluate(i))}})(t,i,r,n),function(){let c,h,L;w?(c=n.length-1,h=-1,L=-1):(c=0,h=n.length,L=1);const T=new Float64Array(16),M=e.ef(),E=new e.P(0,0);for(let I=c;I!==h;I+=L){const c=n[I],h=i.getTile(c).getBucket(r);if(!h||!h.uploaded)continue;let L=!1;l&&(L=0===l.getMaxCascadeForTile(c.toUnwrapped()));const A=a.calculatePosMatrix(c.toUnwrapped(),a.worldSize),k=h.modelTraits;!v&&w&&(e.bi(T,A),e.ad(M,u,T),E.x=M[0],E.y=M[1]);const P=[];h.setFilter(r.filter);for(const i of h.getNodesInfo()){if(i.hiddenByReplacement)continue;if(!i.node.meshes)continue;const r=i.node;let n=0;t.terrain&&r.elevation&&(n=r.elevation*t.terrain.exaggeration());const o=(()=>{const t=i.aabb;return _.min=[...t.min],_.max=[...t.max],_.min[2]+=n,_.max[2]+=n,e.ad(_.min,_.min,A),e.ad(_.max,_.max,A),_})(),s=i.evaluatedScale;if(s[0]<=1&&s[1]<=1&&s[2]<=1&&0===o.intersects(x))continue;if(!v&&w){const t=1/6;i.cameraCollisionOpacity=u[0]>o.min[0]&&u[0]<o.max[0]&&u[1]>o.min[1]&&u[1]<o.max[1]&&u[2]*p<o.max[2]&&r.footprint&&e.bS(E,r.footprint)?Math.max(i.cameraCollisionOpacity-t,0):Math.min(1,i.cameraCollisionOpacity+t)}const l=[...A],h=1/e.cU(c.canonical),d=r.anchor?r.anchor[0]:0,f=r.anchor?r.anchor[1]:0;e.bo(l,l,[d*(s[0]-1)+i.evaluatedTranslation[0]*h,f*(s[1]-1)+i.evaluatedTranslation[1]*h,n+i.evaluatedTranslation[2]]),e.ci(s,e.eg)||e.cE(l,l,s);const g=e.az([],l,r.matrix),y=e.az([],a.expandedFarZProjMatrix,g),S=e.az([],a.expandedFarZProjMatrix,l),L=e.aA([],[d,f,n,1],y)[2];r.hidden=!1;let T=m;v||(w&&(T*=i.cameraCollisionOpacity,T*=Na(l,a,i.aabb,C)),T*=Va(b,L)),0!==T?P.push({nodeInfo:i,depth:L,opacity:T,wvpForNode:y,wvpForTile:S,nodeModelMatrix:g,tileModelMatrix:l}):r.hidden=!0}v||P.sort((e,t)=>!w||1===e.opacity&&1===t.opacity?e.depth<t.depth?-1:1:1===e.opacity?-1:1===t.opacity?1:e.depth>t.depth?-1:1);for(const i of P){const n=i.nodeInfo,c=n.node;let u=e.az([],f,i.tileModelMatrix);e.az(u,d,u);const h=e.bi([],u);e.ee(h,h),e.cE(h,h,Fa),u=e.az(u,u,c.matrix);const p="light-beam"===t.renderPass,m="none"===r.paint.get("model-color-use-theme").constantOr("default"),_=k&e.em.HasMapboxMeshFeatures,x=_?0:n.evaluatedRMEA[0][2];for(let e=0;e<c.meshes.length;++e){const d=c.meshes[e],f=e===c.lightMeshIndex;let C=i.wvpForNode;if(f){if(!p&&!t.terrain&&t.shadowRenderer){t.currentLayer<t.firstLightBeamLayer&&(t.firstLightBeamLayer=t.currentLayer);continue}C=i.wvpForTile}else if(p)continue;const w={defines:[]},b=[];if(!v&&l&&(l.useNormalOffset=!!d.normalBuffer),Ia(w.defines,b,d,t,m?null:r.lut),_||w.defines.push("DIFFUSE_SHADED"),L&&w.defines.push("SHADOWS_SINGLE_CASCADE"),S&&(v?S.numRenderedVerticesInShadowPass+=d.vertexArray.length:S.numRenderedVerticesInTransparentPass+=d.vertexArray.length),v){Pa(d,i.nodeModelMatrix,t,r);continue}let T=null;if(s){const e=Ea(i.nodeModelMatrix,t.transform);if(T=new Float32Array(e),"globe"!==a.projection.name){const t=d.aabb.min,i=d.aabb.max,[r,n]=s.getOpacityForBounds(e,t[0],t[1],i[0],i[1]);w.overrideFog=r>=Ve||n>=Ve}}const M=d.material;let E;M.occlusionTexture&&M.occlusionTexture.offsetScale&&(E=M.occlusionTexture.offsetScale,w.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const I=t.getOrCreateProgram("model",w);!v&&l&&l.setupShadowsFromMatrix(i.tileModelMatrix,I,l.useNormalOffset),t.uploadCommonUniforms(o,I,null,T);const A=M.pbrMetallicRoughness;A.metallicFactor=.9,A.roughnessFactor=.5;const k=Eo(new Float32Array(C),new Float32Array(u),new Float32Array(h),new Float32Array(c.matrix),t,i.opacity,A.baseColorFactor,M.emissiveFactor,A.metallicFactor,A.roughnessFactor,M,x,r,[0,0,0],E);!f&&(n.hasTranslucentParts||i.opacity<1)&&I.draw(t,o.gl.TRIANGLES,g,Zi.disabled,Ui.disabled,qi.backCCW,k,r.id,d.vertexBuffer,d.indexBuffer,d.segments,r.paint,t.transform.zoom,void 0,b),I.draw(t,o.gl.TRIANGLES,f?y:g,Zi.disabled,f||i.opacity<1||n.hasTranslucentParts?Ui.alphaBlended:Ui.unblended,qi.backCCW,k,r.id,d.vertexBuffer,d.indexBuffer,d.segments,r.paint,t.transform.zoom,void 0,b)}}}}()}(t,i,r,n),void c();if("model"!==u.type)return;const h=u.getModels(),d=[],p=t.transform.getFreeCameraOptions().position,f=e.bY([],[p.x,p.y,p.z],t.transform.worldSize);e.eb(f,f);const m=[],g=[];let y=0;for(const _ of h){const i=r.paint.get("model-rotation").constantOr(null),n=r.paint.get("model-scale").constantOr(null),o=r.paint.get("model-translation").constantOr(null);_.computeModelMatrix(t,i,n,o,!0,!0,!1);const a=e.bx([]),s=e.ec(_.position.lat,t.transform.zoom),l=e.bn([],[1,1,1/s]);e.bo(a,a,f),d.push({zScaleMatrix:l,negCameraPosMatrix:a});for(const e of _.nodes)ka(t.transform,e,_.matrix,t.transform.expandedFarZProjMatrix,y,m,g);y++}if(m.sort((e,t)=>t.depth-e.depth),"shadow"!==t.renderPass){if(1===o)for(const e of g)Aa(e,t,r,d[e.modelIndex],Zi.disabled,t.colorModeForRenderPass());else{for(const e of g)Aa(e,t,r,d[e.modelIndex],Zi.disabled,Ui.disabled);for(const e of g)Aa(e,t,r,d[e.modelIndex],t.stencilModeFor3D(),t.colorModeForRenderPass());t.resetStencilClippingMasks()}for(const e of m)Aa(e,t,r,d[e.modelIndex],Zi.disabled,t.colorModeForRenderPass());c()}else{for(const e of g)Pa(e.mesh,e.nodeModelMatrix,t,r);for(const e of m)Pa(e.mesh,e.nodeModelMatrix,t,r);c()}}},ns={line:function(e,t,i){if(e.hasElevatedBuckets=!1,e.hasNonElevatedBuckets=!1,void 0!==e._unevaluatedLayout.getValue("line-elevation-reference")||void 0!==e._unevaluatedLayout.getValue("line-z-offset")){if(t){const i=t.getVisibleCoordinates();for(const r of i){const i=t.getTile(r).getBucket(e);if(i&&("none"!==i.elevationType?e.hasElevatedBuckets=!0:e.hasNonElevatedBuckets=!0,e.hasElevatedBuckets&&e.hasNonElevatedBuckets))break}}}else e.hasNonElevatedBuckets=!0},model:function(e,t,i){const r=t.getSource();if(!r.loaded())return;if("vector"===r.type||"geojson"===r.type)return void(i.modelManager&&i.modelManager.upload(i,"vector"===r.type?e.scope:""));if("batched-model"===r.type)return;if("model"!==r.type)return;const n=r.getModels();for(const o of n)o.upload(i.context)},raster:function(e,t,i){const r=t.getSource();if(!(r instanceof st&&r.loaded()))return;const n=e.sourceLayer||r.rasterLayerIds&&r.rasterLayerIds[0];if(!n)return;const o=e.paint.get("raster-array-band")||r.getInitialBand(n);if(null==o)return;const a=t.getIds().map(e=>t.getTileByID(e));for(const s of a)s.updateNeeded(n,o)&&r.prepareTile(s,n,o)},"raster-particle":function(e,t,i){const r=t.getSource();if(!(r instanceof st&&r.loaded()))return;const n=e.sourceLayer||r.rasterLayerIds&&r.rasterLayerIds[0];if(!n)return;const o=e.paint.get("raster-particle-array-band")||r.getInitialBand(n);if(null==o)return;const a=t.getIds().map(e=>t.getTileByID(e));for(const s of a)s.updateNeeded(n,o)&&r.prepareTile(s,n,o)}},os={fill:Wo},as={fill:function(e,t,i,r){if(!i.layout||"none"===i.layout.get("fill-elevation-reference"))return;const n=e.context.gl,o=new ji(n.LEQUAL,ji.ReadOnly,e.depthRangeFor3D),a=new Zi({func:n.ALWAYS,mask:255},255,255,n.KEEP,n.KEEP,n.REPLACE),s=e.transform.getFreeCameraOptions().position,l=e.getOrCreateProgram("elevatedStructuresDepthReconstruct",{defines:["DEPTH_RECONSTRUCTION"]});for(const c of r){const r=t.getTile(c),u=r.getBucket(i);if(!u)continue;const h=u.elevatedStructures;if(!h||0===h.maskSegments.segments[0].primitiveLength)continue;const d=Zo(c.toUnwrapped(),s),p=e.translatePosMatrix(c.projMatrix,r,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor")),f=co(p,d,0,0,0);l.draw(e,n.TRIANGLES,o,a,Ui.disabled,qi.disabled,f,i.id,h.vertexBuffer,h.indexBuffer,h.maskSegments,i.paint,e.transform.zoom)}}};class ss{constructor(t,i,r,n,o,a){this.context=new zo(t,i),this.transform=r,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=o,this._timeStamp=e.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const s=["fill","line","symbol","circle","heatmap","fill-extrusion","building","raster","raster-particle","hillshade","model","background","sky"];for(const e of s)this._debugParams.enabledLayers[e]=!0;o.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),o.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),o.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),o.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),o.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),o.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const e of s)o.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],e);this.occlusionParams=new Ha(o),this.setup(),this.numSublayers=It.maxUnderzooming+It.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new e.et,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new sr(this),this._wireframeDebugCache=new ja,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const l=new e.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new e.T(this.context,l,t.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=n,this.worldview=a}updateTerrain(e,t){const i=!!e&&!!e.terrain&&this.transform.projection.supportsTerrain;if(!(i||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new qn(this,e));const r=this._terrain;this.transform.elevation=i?r:null,r.update(e,this.transform,t),this.transform.elevation&&!r.enabled&&(this.transform.elevation=null)}_updateFog(e){const t=e.fog;if(!t||"globe"===this.transform.projection.name||t.getOpacity(this.transform.pitch)<1||t.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[i,r]=t.getFovAdjustedRange(this.transform._fov);if(i>r)return void(this.transform.fogCullDistSq=null);const n=i+.78*(r-i);this.transform.fogCullDistSq=n*n}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(e){e&&!this._terrain&&(this._terrain=new qn(this,this.style)),this._forceTerrainMode=e}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(t,i){if(this.width=t*e.q.devicePixelRatio,this.height=i*e.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const e of this.style.order)this.style._mergedLayers[e].resize()}setup(){const t=this.context,i=new e.ba;i.emplaceBack(0,0),i.emplaceBack(e.aj,0),i.emplaceBack(0,e.aj),i.emplaceBack(e.aj,e.aj),this.tileExtentBuffer=t.createVertexBuffer(i,e.bc.members),this.tileExtentSegments=e.bd.simpleSegment(0,0,4,2);const r=new e.ba;r.emplaceBack(0,0),r.emplaceBack(e.aj,0),r.emplaceBack(0,e.aj),r.emplaceBack(e.aj,e.aj),this.debugBuffer=t.createVertexBuffer(r,e.bc.members),this.debugSegments=e.bd.simpleSegment(0,0,4,5);const n=new e.ba;n.emplaceBack(-1,-1),n.emplaceBack(1,-1),n.emplaceBack(-1,1),n.emplaceBack(1,1),this.viewportBuffer=t.createVertexBuffer(n,e.bc.members),this.viewportSegments=e.bd.simpleSegment(0,0,4,2);const o=new e.aZ;o.emplaceBack(0,0,0,0),o.emplaceBack(e.aj,0,e.aj,0),o.emplaceBack(0,e.aj,0,e.aj),o.emplaceBack(e.aj,e.aj,e.aj,e.aj),this.mercatorBoundsBuffer=t.createVertexBuffer(o,e.bf.members),this.mercatorBoundsSegments=e.bd.simpleSegment(0,0,4,2);const a=new e.a_;a.emplaceBack(0,1,2),a.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=t.createIndexBuffer(a);const s=new e.bb;for(const e of[0,1,3,2,0])s.emplaceBack(e);this.debugIndexBuffer=t.createIndexBuffer(s),this.emptyTexture=new e.T(t,new e.r({width:1,height:1},Uint8Array.of(0,0,0,0)),t.gl.RGBA8),this.identityMat=e.bz();const l=this.context.gl;this.stencilClearMode=new Zi({func:l.ALWAYS,mask:0},0,255,l.ZERO,l.ZERO,l.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(e){return e._makeTileBoundsBuffers(this.context,this.transform.projection),e._tileBoundsBuffer?{tileBoundsBuffer:e._tileBoundsBuffer,tileBoundsIndexBuffer:e._tileBoundsIndexBuffer,tileBoundsSegments:e._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const e=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,e.TRIANGLES,ji.disabled,this.stencilClearMode,Ui.disabled,qi.disabled,jn(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(e,t,i){if(!t||this.currentStencilSource===t.id||!e.isTileClipped()||!i||0===i.length)return;if(this._tileClippingMaskIDs&&!this.terrain){let e=!1;for(const t of i)if(void 0===this._tileClippingMaskIDs[t.key]){e=!0;break}if(!e)return}this.currentStencilSource=t.id;const r=this.context,n=r.gl;this.nextStencilID+i.length>256&&this.clearStencil(),r.setColorMode(Ui.disabled),r.setDepthMode(ji.disabled);const o=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const a of i){const e=t.getTile(a),i=this._tileClippingMaskIDs[a.key]=this.nextStencilID++,{tileBoundsBuffer:r,tileBoundsIndexBuffer:s,tileBoundsSegments:l}=this.getTileBoundsBuffers(e);o.draw(this,n.TRIANGLES,ji.disabled,new Zi({func:n.ALWAYS,mask:0},i,255,n.KEEP,n.KEEP,n.REPLACE),Ui.disabled,qi.disabled,jn(a.projMatrix),"$clipping",r,s,l)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,t=this.context.gl;return new Zi({func:t.NOTEQUAL,mask:255},e,255,t.KEEP,t.KEEP,t.REPLACE)}stencilModeForClipping(e){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(e);const t=this.context.gl;return new Zi({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)}stencilConfigForOverlap(e){const t=this.context.gl,i=e.sort((e,t)=>t.overscaledZ-e.overscaledZ),r=i[i.length-1].overscaledZ,n=i[0].overscaledZ-r+1;if(n>1){this.currentStencilSource=void 0,this.nextStencilID+n>256&&this.clearStencil();const e={};for(let i=0;i<n;i++)e[i+r]=new Zi({func:t.GEQUAL,mask:255},i+this.nextStencilID,255,t.KEEP,t.KEEP,t.REPLACE);return this.nextStencilID+=n,[e,i]}return[{[r]:Zi.disabled},i]}colorModeForRenderPass(){const t=this.context.gl;if(this._showOverdrawInspector){const i=1/8;return new Ui([t.CONSTANT_COLOR,t.ONE,t.CONSTANT_COLOR,t.ONE],new e.am(i,i,i,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?Ui.unblended:Ui.alphaBlended}colorModeForDrapableLayerRenderPass(t){const i=this.context.gl;return(()=>this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture)()&&"translucent"===this.renderPass?new Ui([i.ONE,i.ONE_MINUS_SRC_ALPHA,i.CONSTANT_ALPHA,i.ONE_MINUS_SRC_ALPHA],new e.am(0,0,0,void 0===t?0:t),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.depthOcclusion)return new ji(this.context.gl.GREATER,ji.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!r)return ji.disabled;const n=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new ji(i||this.context.gl.LEQUAL,t,[n,n])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const t=this.context.gl,i=Math.ceil(this.width),r=Math.ceil(this.height),n=this.context.bindFramebuffer.get(),o=t.getParameter(t.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===i&&this.depthFBO.height===r||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),0!==i&&0!==r&&(this.depthFBO=new Ro(this.context,i,r,!1,"texture"),this.depthTexture=new e.T(this.context,{width:i,height:r,data:null},t.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(n),t.bindTexture(t.TEXTURE_2D,o),this.depthFBO&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),t.blitFramebuffer(0,0,i,r,0,0,i,r,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(t.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(0===this._dt?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((e,t)=>e+t/this._fpsHistory.length,0))}render(t,i){const r=e.q.now();this._dt=r-this._timeStamp,this._timeStamp=r,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=t.map.repaint,this.style=t,this.options=i;const n=this.style._mergedLayers,o=!(!this.terrain||!this.terrain.enabled),a=()=>this.style._getOrder(o).filter(e=>{const t=n[e];return!(t.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[t.type]});let s=a(),l=!1,c=!1;for(const e of s){const t=n[e];"circle"===t.type&&(l=!0),"symbol"===t.type&&(t.hasInitialOcclusionOpacityProperties?c=!0:l=!0)}let u=s.map(e=>n[e]);const h=this.style._mergedSourceCaches;this.imageManager=t.imageManager,this.modelManager=t.modelManager,this.symbolFadeChange=t.placement.symbolFadeChange(e.q.now()),this.imageManager.beginFrame();let d=0,p=!1;for(const e in h){const t=h[e];t.used&&(t.prepare(this.context),t.getSource().usedInConflation&&++d)}let f=!1;for(const e of u)e.isHidden(this.transform.zoom)||("clip"===e.type&&(f=!0),this.prepareLayer(e));const m={},g={},y={},_={},v={};for(const e in h){const t=h[e];m[e]=t.getVisibleCoordinates(),g[e]=m[e].slice().reverse(),y[e]=t.getVisibleCoordinates(!0).reverse(),_[e]=t.getShadowCasterCoordinates(),v[e]=t.sortCoordinatesByDistance(m[e])}const x=e=>{const t=this.style.getLayerSourceCache(e);return t&&t.used?t.getSource():null};if(d||f||this._clippingActiveLastFrame){const t=[],i=[];let r=0;for(const e of u)this.isSourceForClippingOrConflation(e,x(e))&&(t.push(e),i.push(r)),r++;if(t&&(f||t.length>1)||this._clippingActiveLastFrame){f=!1;const r=[];for(let n=0;n<t.length;n++){const o=t[n],a=i[n],s=this.style.getLayerSourceCache(o);if(!s||!s.used||!s.getSource().usedInConflation&&"clip"!==o.type)continue;let l=e.eu,c=e.bQ.None;const u=[];let h=!0;if("clip"===o.type){l=a;for(const t of o.layout.get("clip-layer-types"))c|="model"===t?e.bQ.Model:"symbol"===t?e.bQ.Symbol:e.bQ.FillExtrusion;for(const e of o.layout.get("clip-layer-scope"))u.push(e);o.isHidden(this.transform.zoom)?h=!1:f=!0}h&&r.push({layer:o.fqid,cache:s,order:l,clipMask:c,clipScope:u})}this.replacementSource.setSources(r),p=!0}}this._clippingActiveLastFrame=f,p||this.replacementSource.clear(),this.conflationActive=p,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let e=0;e<u.length;e++){const t=u[e],i=t.cutoffRange();if(this.longestCutoffRange=Math.max(i,this.longestCutoffRange),i>0){const e=x(t);e&&(this.minCutoffZoom=Math.max(e.minzoom,this.minCutoffZoom)),t.minzoom&&(this.minCutoffZoom=Math.max(t.minzoom,this.minCutoffZoom))}t.is3D(o)&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=e),this._lastOcclusionLayer=e)}const C=this.style&&this.style.fog;C?(this._fogVisible=0!==C.getOpacity(this.transform.pitch),this._fogVisible&&"globe"!==this.transform.projection.name&&(this._fogVisible=C.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(y),this.opaquePassCutoff=0,s=a(),u=s.map(e=>n[e]));const w=this._shadowRenderer;if(w){w.updateShadowParameters(this.transform,this.style.directionalLight);for(const e in h)for(const t of m[e]){let e={min:0,max:0};this.terrain&&(e=this.terrain.getMinMaxForTile(t)||e),w.addShadowReceiver(t.toUnwrapped(),e.min,e.max)}}"globe"!==this.transform.projection.name||this.globeSharedBuffers||(this.globeSharedBuffers=new e.ev(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new Ma(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const b=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),S=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(b&&!this._snow&&(this._snow=new is(this)),!b&&this._snow&&(this._snow.destroy(),delete this._snow),S&&!this._rain&&(this._rain=new es(this)),!S&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!H.has(this.context.gl))return;this.renderPass="offscreen";for(const e of u){const i=t.getLayerSourceCache(e);if(!e.hasOffscreenPass()||e.isHidden(this.transform.zoom))continue;const r=i?g[i.id]:void 0;("custom"===e.type||"raster"===e.type||"raster-particle"===e.type||e.isSky()||r&&r.length)&&this.renderLayer(this,i,e,r)}this.depthRangeFor3D=[0,1-(u.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,_)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const L="globe"===this.transform.projection.name||this.transform.isHorizonVisible(),T=(()=>{if(i.showOverdrawInspector)return e.am.black;const t=this.style.fog;if(t&&this.transform.projection.supportsFog){const i=this.style.getLut(t.scope);if(!L){const r="none"===t.properties.get("color-use-theme"),n=t.properties.get("color").toNonPremultipliedRenderColor(r?null:i).toArray01();return new e.am(...n)}if(L){const r="none"===t.properties.get("space-color-use-theme"),n=t.properties.get("space-color").toNonPremultipliedRenderColor(r?null:i).toArray01();return new e.am(...n)}}return e.am.transparent})();if(this.context.clear({color:T,depth:1}),this.clearStencil(),this._showOverdrawInspector=i.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&L&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=s.length-1;this.currentLayer>=0;this.currentLayer--){const e=u[this.currentLayer],i=t.getLayerSourceCache(e);if(e.isSky())continue;const r=i?(e.is3D(o)?v:g)[i.id]:void 0;this._renderTileClippingMasks(e,i,r),this.renderLayer(this,i,e,r)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&L&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||e.ah(this.transform.zoom)>0)&&("globe"===this.transform.projection.name||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<s.length;this.currentLayer++){const e=u[this.currentLayer],i=t.getLayerSourceCache(e);e.isSky()&&this.renderLayer(this,i,e,i?g[i.id]:void 0)}function M(e,t){let i;return t&&(i=("symbol"===e.type?y:e.is3D(o)?v:g)[t.id]),i}if(this.renderPass="translucent","globe"===this.transform.projection.name){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<s.length;){const e=u[this.currentLayer];if("raster"===e.type||"raster-particle"===e.type){const i=t.getLayerSourceCache(e);this.renderLayer(this,i,e,M(e,i))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let E=0;w&&(E=w.getShadowCastingLayerCount());let I=!1,A=-1;for(let e=0;e<s.length;++e){const t=u[e];t.isHidden(this.transform.zoom)||t.is3D(o)&&(A=e)}c&&-1===A&&(l=!0);let k=!1;for(;this.currentLayer<s.length;){const e=u[this.currentLayer],i=t.getLayerSourceCache(e);if(e.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(e)){if(e.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(!k&&e.is3D(o)&&!o){const e=this.currentLayer,t=e=>{for(this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){const t=u[this.currentLayer];if(os[t.type]){const i=this.style.getLayerSourceCache(t);os[t.type](this,i,t,M(t,i),e)}}};t("initialize"),t("reset"),this.currentLayer=e,k=!0}if(l&&!I&&this.terrain&&!this.transform.isOrthographic&&(I=!0,this.blitDepth()),c&&-1!==A&&this.currentLayer===A+1&&!this.transform.isOrthographic&&this.blitDepth(),this.terrain||this._renderTileClippingMasks(e,i,i?m[i.id]:void 0),this.renderLayer(this,i,e,M(e,i)),!this.terrain&&w&&E>0&&e.hasShadowPass()&&0==--E){{this.clearStencil();const e=this.currentLayer;for(this.currentLayer=0;this.currentLayer<u.length;this.currentLayer++){const e=u[this.currentLayer];if(as[e.type]){const t=this.style.getLayerSourceCache(e);as[e.type](this,t,e,M(e,t))}}this.currentLayer=e}if(w.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer){const e=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=e;this.currentLayer++){const e=u[this.currentLayer];if(!e.hasLightBeamPass())continue;const i=t.getLayerSourceCache(e);this.renderLayer(this,i,e,i?g[i.id]:void 0)}this.currentLayer=e,this.renderPass="translucent"}}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const e=this.currentLayer;this.depthOcclusion=!0;for(const i of this.layersWithOcclusionOpacity){this.currentLayer=i;const e=u[this.currentLayer],r=t.getLayerSourceCache(e),n=r?g[r.id]:void 0;this.terrain||this._renderTileClippingMasks(e,r,r?m[r.id]:void 0),this.renderLayer(this,r,e,n)}this.depthOcclusion=!1,this.currentLayer=e,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let i=null;u.forEach(e=>{const r=t.getLayerSourceCache(e);r&&!e.isHidden(this.transform.zoom)&&r.getVisibleCoordinates().length&&(!i||i.getSource().maxzoom<r.getSource().maxzoom)&&(i=r)}),i&&this.options.showTileBoundaries&&pa(this,i,i.getVisibleCoordinates(),e.am.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&pa(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new e.am(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(e){const t=e.transform.padding;ma(e,e.transform.height-(t.top||0),3,la),ma(e,t.bottom||0,3,ca),ga(e,t.left||0,3,ua),ga(e,e.transform.width-(t.right||0),3,ha);const i=e.transform.centerPoint;!function(e,t,i,r){ya(e,t-1,i-10,2,20,r),ya(e,t-10,i-1,20,2,r)}(e,i.x,e.transform.height-i.y,da)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),p||(this.conflationActive=!1)}prepareLayer(e){this.gpuTimingStart(e);const{unsupportedLayers:t}=this.transform.projection,i=!t||!t.includes(e.type);if(ns[e.type]&&(i||this.terrain&&"custom"===e.type)){const t=this.style.getLayerSourceCache(e);ns[e.type](e,t,this)}this.gpuTimingEnd()}renderLayer(e,t,i,r){i.isHidden(this.transform.zoom)||("background"===i.type||"sky"===i.type||"custom"===i.type||"model"===i.type||"raster"===i.type||"raster-particle"===i.type||r&&r.length)&&(this.id=i.id,this.gpuTimingStart(i),e.transform.projection.unsupportedLayers&&e.transform.projection.unsupportedLayers.includes(i.type)&&(!e.terrain||"custom"!==i.type)||"clip"===i.type||rs[i.type](e,t,i,r,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(e){if(!this.options.gpuTiming)return;const t=this.context.extTimerQuery,i=this.context.gl;let r=this.gpuTimers[e.id];r||(r=this.gpuTimers[e.id]={calls:0,cpuTime:0,query:i.createQuery()}),r.calls++,i.beginQuery(t.TIME_ELAPSED_EXT,r.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const e=this.context.extTimerQuery,t=this.context.gl,i=t.createQuery();this.deferredRenderGpuTimeQueries.push(i),t.beginQuery(e.TIME_ELAPSED_EXT,i)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const e=this.gpuTimers;return this.gpuTimers={},e}collectDeferredRenderGpuQueries(){const e=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],e}queryGpuTimers(e){const t={};for(const i in e){const r=e[i],n=this.context.extTimerQuery,o=n.getQueryParameter(r.query,this.context.gl.QUERY_RESULT)/1e6;n.deleteQueryEXT(r.query),t[i]=o}return t}queryGpuTimeDeferredRender(e){if(!this.options.gpuTimingDeferredRender)return 0;const t=this.context.gl;let i=0;for(const r of e)i+=t.getQueryParameter(r,t.QUERY_RESULT)/1e6,t.deleteQuery(r);return i}translatePosMatrix(t,i,r,n,o){if(!r[0]&&!r[1])return t;const a=o?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){const e=Math.sin(a),t=Math.cos(a);r=[r[0]*t-r[1]*e,r[0]*e+r[1]*t]}const s=[o?r[0]:e.aw(i,r[0],this.transform.zoom),o?r[1]:e.aw(i,r[1],this.transform.zoom),0],l=new Float32Array(16);return e.bo(l,t,s),l}saveTileTexture(e){const t=e.size[0],i=this._tileTextures[t];i?i.push(e):this._tileTextures[t]=[e]}getTileTexture(e){const t=this._tileTextures[e];return t&&t.length>0?t.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return null!=this.context.extTextureFloatLinear}currentGlobalDefines(e,t,i){const r=void 0===i?this.terrain&&this.terrain.renderingToTexture:i,n=[];return this.style&&this.style.enable3dLights()&&("globeRaster"===e||"terrainRaster"===e?(n.push("LIGHTING_3D_MODE"),n.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):r||n.push("LIGHTING_3D_MODE")),"shadow"===this.renderPass&&(this._shadowMapDebug||n.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(n.push("TERRAIN"),this.linearFloatFilteringSupported()&&n.push("TERRAIN_DEM_FLOAT_FORMAT")),"globe"===this.transform.projection.name&&n.push("GLOBE"),!this._fogVisible||r||void 0!==t&&!t||n.push("FOG","FOG_DITHERING"),r&&n.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&n.push("OVERDRAW_INSPECTOR"),n}getOrCreateProgram(e,t){this.cache=this.cache||{};const i=t&&t.defines||[],r=t&&t.config,n=this.currentGlobalDefines(e,t&&t.overrideFog,t&&t.overrideRtt).concat(i),o=Jn.cacheKey(Hr[e],e,n,r);return this.cache[o]||(this.cache[o]=new Jn(this.context,e,Hr[e],r,Ao[e],n)),this.cache[o]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(t,i){if(this.style.enable3dLights()){const r=this.style.directionalLight,n=this.style.ambientLight;if(r&&n){const o=((t,i,r)=>{const n=t.properties.get("direction"),o="none"===t.properties.get("color-use-theme"),a=t.properties.get("color").toNonPremultipliedRenderColor(o?null:r.getLut(t.scope)).toArray01(),s=t.properties.get("intensity"),l="none"===i.properties.get("color-use-theme"),c=i.properties.get("color").toNonPremultipliedRenderColor(l?null:r.getLut(i.scope)).toArray01(),u=i.properties.get("intensity"),h=[n.x,n.y,n.z],d=e.dw(c,u),p=e.dw(a,s);return{u_lighting_ambient_color:d,u_lighting_directional_dir:h,u_lighting_directional_color:p,u_ground_radiance:Xn(h,p,d)}})(r,n,this.style);i.setLightsUniformValues(t,o)}}}uploadCommonUniforms(t,i,r,n,o){if(this.uploadCommonLightUniforms(t,i),this.terrain&&this.terrain.renderingToTexture)return;const a=this.style.fog;if(a){const o=a.getOpacity(this.transform.pitch),s=((t,i,r,n,o,a,s,l,c,u,h,d)=>{const p=t.transform,f="none"===i.properties.get("color-use-theme"),m=i.properties.get("color").toNonPremultipliedRenderColor(f?null:t.style.getLut(i.scope)).toArray01();m[3]=n;const g=t.frameCounter/1e3%1,[y,_]=i.properties.get("vertical-range");return{u_fog_matrix:r?p.calculateFogTileMatrix(r):d||t.identityMat,u_fog_range:i.getFovAdjustedRange(p._fov),u_fog_color:m,u_fog_horizon_blend:i.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(y,_),_],u_fog_temporal_offset:g,u_frustum_tl:o,u_frustum_tr:a,u_frustum_br:s,u_frustum_bl:l,u_globe_pos:c,u_globe_radius:u,u_viewport:h,u_globe_transition:e.ah(p.zoom),u_is_globe:+("globe"===p.projection.name)}})(this,a,r,o,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*e.q.devicePixelRatio,this.transform.height*e.q.devicePixelRatio],n);i.setFogUniformValues(t,s)}o&&i.setCutoffUniformValues(t,o.uniformValues)}setTileLoadedFlag(e){this.tileLoaded=e}saveCanvasCopy(){const e=this.canvasCopy();e&&(this.frameCopies.push(e),this.tileLoaded=!1)}canvasCopy(){const e=this.context.gl,t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.copyTexImage2D(e.TEXTURE_2D,0,e.RGBA,0,0,e.drawingBufferWidth,e.drawingBufferHeight,0),t}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const e=this.style&&this.style.fog;return!!e&&0!==e.getOpacity(this.transform.pitch)}getBackgroundTiles(){const e=this._backgroundTiles,t=this._backgroundTiles={},i=this.transform.coveringTiles({tileSize:512});for(const r of i)t[r.key]=e[r.key]||new Lt(r,512,this.transform.tileZoom,this,void 0,this.worldview);return t}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(e,t){return!(!e.is3D(!(!this.terrain||!this.terrain.enabled))||"clip"!==e.type&&(e.minzoom&&e.minzoom>this.transform.zoom||(this.style._clipLayerPresent||"building"!==e.sourceLayer)&&(!t||"batched-model"!==t.type)))}isTileAffectedByFog(e){if(!this.style||!this.style.fog)return!1;if("globe"===this.transform.projection.name)return!0;let t=this._cachedTileFogOpacities[e.key];return t||(this._cachedTileFogOpacities[e.key]=t=this.style.fog.getOpacityForTile(e)),t[0]>=Ve||t[1]>=Ve}setupDepthForOcclusion(e,t,i){const r=this.context,n=r.gl,o=!!i;var a;i||(i={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),r.activeTexture.set(n.TEXTURE3),e&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),i.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],i.u_depth_range_unpack=[2/((a=this.depthRangeFor3D)[1]-a[0]),-1-2*a[0]/(a[1]-a[0])],i.u_occluder_half_size=.5*this.occlusionParams.occluderSize,i.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(n.NEAREST,n.CLAMP_TO_EDGE),r.activeTexture.set(n.TEXTURE0),o||t.setTerrainUniformValues(r,i)}}function ls(e,t){let i=!1,r=null;const n=()=>{r=null,i&&(e(),r=setTimeout(n,t),i=!1)};return()=>(i=!0,r||n(),r)}class cs{constructor(t){this._hashName=t&&encodeURIComponent(t),e.aV(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=ls(this._updateHashUnthrottled.bind(this),300)}addTo(e){return this._map=e,window.addEventListener("hashchange",this._onHashChange,!1),e.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const e=this._map;if(!e)return"";const t=us(e);if(this._hashName){const e=this._hashName;let i=!1;const r=location.hash.slice(1).split("&").map(r=>{const n=r.split("=")[0];return n===e?(i=!0,"".concat(n,"=").concat(t)):r}).filter(e=>e);return i||r.push("".concat(e,"=").concat(t)),"#".concat(r.join("&"))}return"#".concat(t)}_getCurrentHash(){const e=location.hash.replace("#","");if(this._hashName){let t;return e.split("&").map(e=>e.split("=")).forEach(e=>{e[0]===this._hashName&&(t=e)}),(t&&t[1]||"").split("/")}return e.split("/")}_onHashChange(){const e=this._map;if(!e)return!1;const t=this._getCurrentHash();if(t.length>=3&&!t.some(e=>isNaN(Number(e)))){const i=e.dragRotate.isEnabled()&&e.touchZoomRotate.isEnabled()?+(t[3]||0):e.getBearing();return e.jumpTo({center:[+t[2],+t[1]],zoom:+t[0],bearing:i,pitch:+(t[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function us(e,t){const i=e.getCenter(),r=Math.round(100*e.getZoom())/100,n=Math.ceil((r*Math.LN2+Math.log(512/360/.5))/Math.LN10),o=Math.pow(10,n),a=Math.round(i.lng*o)/o,s=Math.round(i.lat*o)/o,l=e.getBearing(),c=e.getPitch();let u=t?"/".concat(a,"/").concat(s,"/").concat(r):"".concat(r,"/").concat(s,"/").concat(a);return(l||c)&&(u+="/"+Math.round(10*l)/10),c&&(u+="/".concat(Math.round(c))),u}const hs={linearity:.3,easing:e.ew(0,0,.3,1)},ds=e.h({deceleration:2500,maxSpeed:1400},hs),ps=e.h({deceleration:20,maxSpeed:1400},hs),fs=e.h({deceleration:1e3,maxSpeed:360},hs),ms=e.h({deceleration:1e3,maxSpeed:90},hs);class gs{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(t){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.q.now(),settings:t})}_drainInertiaBuffer(){const t=this._inertiaBuffer,i=e.q.now();for(;t.length>0&&i-t[0].time>160;)t.shift()}_onMoveEnd(t){if(this._map._prefersReducedMotion())return;if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const i={zoom:0,bearing:0,pitch:0,pan:new e.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:e}of this._inertiaBuffer)i.zoom+=e.zoomDelta||0,i.bearing+=e.bearingDelta||0,i.pitch+=e.pitchDelta||0,e.panDelta&&i.pan._add(e.panDelta),e.around&&(i.around=e.around),e.pinchAround&&(i.pinchAround=e.pinchAround);const r=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,n={};if(i.pan.mag()){const o=_s(i.pan.mag(),r,e.h({},ds,t||{}));n.offset=i.pan.mult(o.amount/i.pan.mag()),n.center=this._map.transform.center,ys(n,o)}if(i.zoom){const e=_s(i.zoom,r,ps);n.zoom=this._map.transform.zoom+e.amount,ys(n,e)}if(i.bearing){const t=_s(i.bearing,r,fs);n.bearing=this._map.transform.bearing+e.ay(t.amount,-179,179),ys(n,t)}if(i.pitch){const e=_s(i.pitch,r,ms);n.pitch=this._map.transform.pitch+e.amount,ys(n,e)}if(n.zoom||n.bearing){const e=void 0===i.pinchAround?i.around:i.pinchAround;n.around=e?this._map.unproject(e):this._map.getCenter()}return this.clear(),n.noMoveStart=!0,n}}function ys(e,t){(!e.duration||e.duration<t.duration)&&(e.duration=t.duration,e.easing=t.easing)}function _s(t,i,r){const{maxSpeed:n,linearity:o,deceleration:a}=r,s=e.ay(t*o/(i/1e3),-n,n),l=Math.abs(s)/(a*o);return{easing:r.easing,duration:1e3*l,amount:s*(l/2)}}class vs extends e.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const o=x(i.getCanvasContainer(),r),a=i.unproject(o);super(t,e.h({point:o,lngLat:a,originalEvent:r},n)),this._defaultPrevented=!1,this.target=i}}class xs extends e.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(t,i,r){const n="touchend"===t?r.changedTouches:r.touches,o=C(i.getCanvasContainer(),n),a=o.map(e=>i.unproject(e)),s=o.reduce((e,t,i,r)=>e.add(t.div(r.length)),new e.P(0,0));super(t,{points:o,point:s,lngLats:a,lngLat:i.unproject(s),originalEvent:r}),this._defaultPrevented=!1}}class Cs extends e.A{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,t){super("wheel",{originalEvent:t}),this._defaultPrevented=!1}}class ws{constructor(e,t){this._map=e,this._clickTolerance=t.clickTolerance}reset(){this._mousedownPos=void 0}wheel(e){return this._firePreventable(new Cs(this._map,e))}mousedown(e,t){return this._mousedownPos=t,this._firePreventable(new vs(e.type,this._map,e))}mouseup(e){this._map.fire(new vs(e.type,this._map,e))}preclick(t){const i=e.h({},t);i.type="preclick",this._map.fire(new vs(i.type,this._map,i))}click(e,t){this._mousedownPos&&this._mousedownPos.dist(t)>=this._clickTolerance||(this.preclick(e),this._map.fire(new vs(e.type,this._map,e)))}dblclick(e){return this._firePreventable(new vs(e.type,this._map,e))}mouseover(e){this._map.fire(new vs(e.type,this._map,e))}mouseout(e){this._map.fire(new vs(e.type,this._map,e))}touchstart(e){return this._firePreventable(new xs(e.type,this._map,e))}touchmove(e){this._map.fire(new xs(e.type,this._map,e))}touchend(e){this._map.fire(new xs(e.type,this._map,e))}touchcancel(e){this._map.fire(new xs(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class bs{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(e){this._map.fire(new vs(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._map.fire(new vs(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Ss{constructor(e,t){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=t.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,t){this.isEnabled()&&e.shiftKey&&0===e.button&&(g(),this._startPos=this._lastPos=t,this._active=!0)}mousemoveWindow(e,t){if(!this._active)return;const i=t,r=this._startPos,n=this._lastPos;if(!r||!n||n.equals(i)||!this._box&&i.dist(r)<this._clickTolerance)return;this._lastPos=i,this._box||(this._box=h("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));const o=Math.min(r.x,i.x),a=Math.max(r.x,i.x),s=Math.min(r.y,i.y),l=Math.max(r.y,i.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform="translate(".concat(o,"px,").concat(s,"px)"),this._box.style.width=a-o+"px",this._box.style.height=l-s+"px")})}mouseupWindow(t,i){if(!this._active)return;const r=this._startPos,n=i;if(r&&0===t.button){if(this.reset(),v(),r.x!==n.x||r.y!==n.y)return this._map.fire(new e.A("boxzoomend",{originalEvent:t})),{cameraAnimation:e=>e.fitScreenCoordinates(r,n,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",t)}}keydown(e){this._active&&27===e.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",e))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),y(),delete this._startPos,delete this._lastPos}_fireEvent(t,i){return this._map.fire(new e.A(t,{originalEvent:i}))}}function Ls(e,t){const i={};for(let r=0;r<e.length;r++)i[e[r].identifier]=t[r];return i}class Ts{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(t,i,r){(this.centroid||r.length>this.numTouches)&&(this.aborted=!0),this.aborted||(0===this.startTime&&(this.startTime=t.timeStamp),r.length===this.numTouches&&(this.centroid=function(t){const i=new e.P(0,0);for(const e of t)i._add(e);return i.div(t.length)}(i),this.touches=Ls(r,i)))}touchmove(e,t,i){if(this.aborted||!this.centroid)return;const r=Ls(i,t);for(const n in this.touches){const e=r[n];(!e||e.dist(this.touches[n])>30)&&(this.aborted=!0)}}touchend(e,t,i){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),0===i.length){const e=!this.aborted&&this.centroid;if(this.reset(),e)return e}}}class Ms{constructor(e){this.singleTap=new Ts(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(e,t,i){this.singleTap.touchstart(e,t,i)}touchmove(e,t,i){this.singleTap.touchmove(e,t,i)}touchend(e,t,i){const r=this.singleTap.touchend(e,t,i);if(r){const t=e.timeStamp-this.lastTime<500,i=!this.lastTap||this.lastTap.dist(r)<30;if(t&&i||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=r,this.count===this.numTaps)return this.reset(),r}}}class Es{constructor(){this._zoomIn=new Ms({numTouches:1,numTaps:2}),this._zoomOut=new Ms({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,t,i){this._zoomIn.touchstart(e,t,i),this._zoomOut.touchstart(e,t,i)}touchmove(e,t,i){this._zoomIn.touchmove(e,t,i),this._zoomOut.touchmove(e,t,i)}touchend(e,t,i){const r=this._zoomIn.touchend(e,t,i),n=this._zoomOut.touchend(e,t,i);return r?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()+1,around:t.unproject(r)},{originalEvent:e})}):n?(this._active=!0,e.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:t=>t.easeTo({duration:300,zoom:t.getZoom()-1,around:t.unproject(n)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const Is={0:1,2:2},As={Control:"ctrlKey",Alt:"altKey",Shift:"shiftKey",Meta:"metaKey"};class ks{constructor(e){this.reset(),this._clickTolerance=e.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(e,t){return!1}_move(e,t){return{}}mousedown(e,t){if(this._lastPoint)return;const i=w(e);this._correctButton(e,i)&&(this._lastPoint=t,this._eventButton=i)}mousemoveWindow(e,t){const i=this._lastPoint;if(i)if(e.preventDefault(),null!=this._eventButton&&function(e,t){const i=Is[t];return void 0===e.buttons||(e.buttons&i)!==i}(e,this._eventButton))this.reset();else if(this._moved||!(t.dist(i)<this._clickTolerance))return this._moved=!0,this._lastPoint=t,this._move(i,t)}mouseupWindow(e){this._lastPoint&&w(e)===this._eventButton&&(this._moved&&v(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Ps extends ks{mousedown(e,t){super.mousedown(e,t),this._lastPoint&&(this._active=!0)}_correctButton(e,t){return 0===t&&!e.ctrlKey}_move(e,t){return{around:t,panDelta:t.sub(e)}}}class Os extends ks{constructor(e){super(e),this._pitchRotateKey=e.pitchRotateKey?As[e.pitchRotateKey]:void 0}_correctButton(e,t){return this._pitchRotateKey?0===t&&e[this._pitchRotateKey]:0===t&&e.ctrlKey||2===t}_move(e,t){const i=.8*(t.x-e.x);if(i)return this._active=!0,{bearingDelta:i}}contextmenu(e){this._pitchRotateKey||e.preventDefault()}}class Rs extends ks{constructor(e){super(e),this._pitchRotateKey=e.pitchRotateKey?As[e.pitchRotateKey]:void 0}_correctButton(e,t){return this._pitchRotateKey?0===t&&e[this._pitchRotateKey]:0===t&&e.ctrlKey||2===t}_move(e,t){const i=-.5*(t.y-e.y);if(i)return this._active=!0,{pitchDelta:i}}contextmenu(e){this._pitchRotateKey||e.preventDefault()}}class zs{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._minTouches=1,this._clickTolerance=i.clickTolerance||1,this.reset(),e.aV(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new e.P(0,0)}touchstart(e,t,i){return this._calculateTransform(e,t,i)}touchmove(t,i,r){if(this._active&&!(r.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(1===r.length&&!e.ex())return void this._showTouchPanBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return t.cancelable&&t.preventDefault(),this._calculateTransform(t,i,r)}}touchend(e,t,i){this._calculateTransform(e,t,i),this._active&&i.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(t,i,r){r.length>0&&(this._active=!0);const n=Ls(r,i),o=new e.P(0,0),a=new e.P(0,0);let s=0;for(const e in n){const t=n[e],i=this._touches[e];i&&(o._add(t),a._add(t.sub(i)),s++,n[e]=t)}if(this._touches=n,s<this._minTouches||!a.mag())return;const l=a.div(s);return this._sum._add(l),this._sum.mag()<this._clickTolerance?void 0:{around:o.div(s),panDelta:l}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=h("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class Ds{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(e){}_move(e,t,i){return{}}touchstart(e,t,i){this._firstTwoTouches||i.length<2||(this._firstTwoTouches=[i[0].identifier,i[1].identifier],this._start([t[0],t[1]]))}touchmove(e,t,i){const r=this._firstTwoTouches;if(!r)return;e.preventDefault();const[n,o]=r,a=Fs(i,t,n),s=Fs(i,t,o);if(!a||!s)return;const l=this._aroundCenter?null:a.add(s).div(2);return this._move([a,s],l,e)}touchend(e,t,i){if(!this._firstTwoTouches)return;const[r,n]=this._firstTwoTouches,o=Fs(i,t,r),a=Fs(i,t,n);o&&a||(this._active&&v(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function Fs(e,t,i){for(let r=0;r<e.length;r++)if(e[r].identifier===i)return t[r]}function Bs(e,t){return Math.log(e/t)/Math.LN2}class Vs extends Ds{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,t){const i=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Bs(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Bs(this._distance,i),pinchAround:t}}}function Ns(e,t){return 180*e.angleWith(t)/Math.PI}class Us extends Ds{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,t){const i=this._vector;if(this._vector=e[0].sub(e[1]),i&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:Ns(this._vector,i),pinchAround:t}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const t=25/(Math.PI*this._minDiameter)*360,i=this._startVector;if(!i)return!1;const r=Ns(e,i);return Math.abs(r)<t}}function js(e){return Math.abs(e.y)>Math.abs(e.x)}class Hs extends Ds{constructor(e){super(),this._map=e}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(e){this._lastPoints=e,js(e[0].sub(e[1]))&&(this._valid=!1)}_move(t,i,r){const n=this._lastPoints;if(!n)return;const o=t[0].sub(n[0]),a=t[1].sub(n[1]);return this._map._cooperativeGestures&&!e.ex()&&r.touches.length<3||(this._valid=this.gestureBeginsVertically(o,a,r.timeStamp),!this._valid)?void 0:(this._lastPoints=t,this._active=!0,{pitchDelta:(o.y+a.y)/2*-.5})}gestureBeginsVertically(e,t,i){if(void 0!==this._valid)return this._valid;const r=e.mag()>=2,n=t.mag()>=2;if(!r&&!n)return;if(!r||!n)return null==this._firstMove&&(this._firstMove=i),i-this._firstMove<100&&void 0;const o=e.y>0==t.y>0;return js(e)&&js(t)&&o}}const Zs={panStep:100,bearingStep:15,pitchStep:10};class Ws{constructor(){const e=Zs;this._panStep=e.panStep,this._bearingStep=e.bearingStep,this._pitchStep=e.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let t=0,i=0,r=0,n=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),n=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),n=1);break;case 38:e.shiftKey?r=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?r=-1:(e.preventDefault(),o=1);break;default:return}return this._rotationDisabled&&(i=0,r=0),{cameraAnimation:a=>{const s=a.getZoom();a.easeTo({duration:300,easeId:"keyboardHandler",easing:Gs,zoom:t?Math.round(s)+t*(e.shiftKey?2:1):s,bearing:a.getBearing()+i*this._bearingStep,pitch:a.getPitch()+r*this._pitchStep,offset:[-n*this._panStep,-o*this._panStep],center:a.getCenter()},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Gs(e){return e*(2-e)}const qs=4.000244140625,Xs=1/450;class Ys{constructor(t,i){this._map=t,this._el=t.getCanvasContainer(),this._handler=i,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Xs,e.aV(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&"center"===e.around,this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(t){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(t.ctrlKey||t.metaKey||this.isZooming()||e.ex()))return void this._showBlockerAlert();"hidden"!==this._alertContainer.style.visibility&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let i=t.deltaMode===WheelEvent.DOM_DELTA_LINE?40*t.deltaY:t.deltaY;const r=e.q.now(),n=r-(this._lastWheelEventTime||0);this._lastWheelEventTime=r,0!==i&&i%qs==0?this._type="wheel":0!==i&&Math.abs(i)<4?this._type="trackpad":n>400?(this._type=null,this._lastValue=i,this._timeout=window.setTimeout(this._onTimeout,40,t)):this._type||(this._type=Math.abs(n*i)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,i+=this._lastValue)),t.shiftKey&&i&&(i/=4),this._type&&(this._lastWheelEvent=t,this._delta-=i,this._active||this._start(t)),t.preventDefault()}_onTimeout(e){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(e)}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const t=x(this._el,e);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:t,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const t=this._map.transform;"wheel"===this._type&&t.projection.wrap&&(t._center.lng>=180||t._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const i=()=>t._terrainEnabled()&&this._aroundCoord?t.computeZoomRelativeTo(this._aroundCoord):t.zoom;if(0!==this._delta){const e="wheel"===this._type&&Math.abs(this._delta)>qs?this._wheelZoomRate:this._defaultZoomRate;let r=2/(1+Math.exp(-Math.abs(this._delta*e)));this._delta<0&&0!==r&&(r=1/r);const n=i(),o=Math.pow(2,n),a="number"==typeof this._targetZoom?t.zoomScale(this._targetZoom):o;this._targetZoom=Math.min(t.maxZoom,Math.max(t.minZoom,t.scaleZoom(a*r))),"wheel"===this._type&&(this._startZoom=n,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const r="number"==typeof this._targetZoom?this._targetZoom:i(),n=this._startZoom,o=this._easing;let a,s=!1;if("wheel"===this._type&&n&&o){const t=Math.min((e.q.now()-this._lastWheelEventTime)/200,1),i=o(t);a=e.ai(n,r,i),t<1?this._frameId||(this._frameId=!0):s=!0}else a=r,s=!0;this._active=!0,s&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let l=a-i();return l*this._lastDelta<0&&(l=0),{noInertia:!0,needsRenderFrame:!s,zoomDelta:l,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(t){let i=e.ey;if(this._prevEase){const t=this._prevEase,r=(e.q.now()-t.start)/t.duration,n=t.easing(r+.01)-t.easing(r),o=.27/Math.sqrt(n*n+1e-4)*.01,a=Math.sqrt(.0729-o*o);i=e.ew(o,a,.25,1)}return this._prevEase={start:e.q.now(),duration:t,easing:i},i}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=h("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize="".concat(Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth))),"px"))}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class Ks{constructor(e,t){this._clickZoom=e,this._tapZoom=t}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Js{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(e,t){return e.preventDefault(),{cameraAnimation:i=>{i.easeTo({duration:300,zoom:i.getZoom()+(e.shiftKey?-1:1),around:i.unproject(t)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Qs{constructor(){this._tap=new Ms({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(e,t,i){this._swipePoint||(this._tapTime&&e.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?i.length>0&&(this._swipePoint=t[0],this._swipeTouch=i[0].identifier):this._tap.touchstart(e,t,i))}touchmove(e,t,i){if(this._tapTime){if(this._swipePoint){if(i[0].identifier!==this._swipeTouch)return;const r=t[0],n=r.y-this._swipePoint.y;return this._swipePoint=r,e.preventDefault(),this._active=!0,{zoomDelta:n/128}}}else this._tap.touchmove(e,t,i)}touchend(e,t,i){this._tapTime?this._swipePoint&&0===i.length&&this.reset():this._tap.touchend(e,t,i)&&(this._tapTime=e.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $s{constructor(e,t,i){this._el=e,this._mousePan=t,this._touchPan=i}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class el{constructor(e,t,i){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=t,this._mousePitch=i}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class tl{constructor(e,t,i,r){this._el=e,this._touchZoom=t,this._touchRotate=i,this._tapDragZoom=r,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const il=e=>e.zoom||e.drag||e.pitch||e.rotate;class rl extends e.A{}class nl{constructor(){this.constants=[1,1,.01],this.radius=0}setup(t,i){const r=e.at([],i,t);this.radius=e.ae(r[2]<0?e.eA([],r,this.constants):[r[0],r[1],0])}projectRay(t){e.eA(t,t,this.constants),e.au(t,t),e.eB(t,t,this.constants);const i=e.bY([],t,this.radius);if(i[2]>0){const t=e.bY([],[0,0,1],e.bG(i,[0,0,1])),r=e.bY([],e.au([],[i[0],i[1],0]),this.radius),n=e.cV([],i,e.bY([],e.at([],e.cV([],r,t),i),2));i[0]=n[0],i[1]=n[1]}return i}}function ol(e){return e.panDelta&&e.panDelta.mag()||e.zoomDelta||e.bearingDelta||e.pitchDelta}class al{constructor(t,i){this._map=t,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new gs(t),this._bearingSnap=i.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new nl,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(i),e.aV(["handleEvent","handleWindowEvent"],this);const r=this._el;this._listeners=[[r,"touchstart",{passive:!0}],[r,"touchmove",{passive:!1}],[r,"touchend",void 0],[r,"touchcancel",void 0],[r,"mousedown",void 0],[r,"mousemove",void 0],[r,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[r,"mouseover",void 0],[r,"mouseout",void 0],[r,"dblclick",void 0],[r,"click",void 0],[r,"keydown",{capture:!1}],[r,"keyup",void 0],[r,"wheel",{passive:!1}],[r,"contextmenu",void 0],[window,"blur",void 0]];for(const[e,n,o]of this._listeners){const t=e===document?this.handleWindowEvent:this.handleEvent;e.addEventListener(n,t,o)}}destroy(){for(const[e,t,i]of this._listeners){const r=e===document?this.handleWindowEvent:this.handleEvent;e.removeEventListener(t,r,i)}}_addDefaultHandlers(e){const t=this._map,i=t.getCanvasContainer();this._add("mapEvent",new ws(t,e));const r=t.boxZoom=new Ss(t,e);this._add("boxZoom",r);const n=new Es,o=new Js;t.doubleClickZoom=new Ks(o,n),this._add("tapZoom",n),this._add("clickZoom",o);const a=new Qs;this._add("tapDragZoom",a);const s=t.touchPitch=new Hs(t);this._add("touchPitch",s);const l=new Os(e),c=new Rs(e);t.dragRotate=new el(e,l,c),this._add("mouseRotate",l,["mousePitch"]),this._add("mousePitch",c,["mouseRotate"]);const u=new Ps(e),h=new zs(t,e);t.dragPan=new $s(i,u,h),this._add("mousePan",u),this._add("touchPan",h,["touchZoom","touchRotate"]);const d=new Us,p=new Vs;t.touchZoomRotate=new tl(i,p,d,a),this._add("touchRotate",d,["touchPan","touchZoom"]),this._add("touchZoom",p,["touchPan","touchRotate"]),this._add("blockableMapEvent",new bs(t));const f=t.scrollZoom=new Ys(t,this);this._add("scrollZoom",f,["mousePan"]);const m=t.keyboard=new Ws;this._add("keyboard",m);for(const g of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])e.interactive&&e[g]&&t[g].enable(e[g])}_add(e,t,i){this._handlers.push({handlerName:e,handler:t,allowed:i}),this._handlersById[e]=t}stop(e){if(!this._updatingCamera){for(const{handler:e}of this._handlers)e.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!il(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(e,t,i){for(const r in e)if(r!==i&&(!t||t.indexOf(r)<0))return!0;return!1}handleWindowEvent(e){this.handleEvent(e,"".concat(e.type,"Window"))}_getMapTouches(e){const t=[];for(const i of e)this._el.contains(i.target)&&t.push(i);return t}handleEvent(e,t){this._updatingCamera=!0;const i="renderFrame"===e.type,r=i?void 0:e,n={needsRenderFrame:!1},o={},a={},s=e.touches?this._getMapTouches(e.touches):void 0,l=s?C(this._el,s):i?void 0:x(this._el,e);for(const{handlerName:h,handler:d,allowed:p}of this._handlers){if(!d.isEnabled())continue;let i;this._blockedByActive(a,p,h)?d.reset():d[t||e.type]&&(i=d[t||e.type](e,l,s),this.mergeHandlerResult(n,o,i,h,r),i&&i.needsRenderFrame&&this._triggerRenderFrame()),(i||d.isActive())&&(a[h]=d)}const c={};for(const h in this._previousActiveHandlers)a[h]||(c[h]=r);this._previousActiveHandlers=a,(Object.keys(c).length||ol(n))&&(this._changes.push([n,o,c]),this._triggerRenderFrame()),(Object.keys(a).length||ol(n))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:u}=n;u&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],u(this._map))}mergeHandlerResult(t,i,r,n,o){if(!r)return;e.h(t,r);const a={handlerName:n,originalEvent:r.originalEvent||o};void 0!==r.zoomDelta&&(i.zoom=a),void 0!==r.panDelta&&(i.drag=a),void 0!==r.pitchDelta&&(i.pitch=a),void 0!==r.bearingDelta&&(i.rotate=a)}_applyChanges(){const t={},i={},r={};for(const[n,o,a]of this._changes)n.panDelta&&(t.panDelta=(t.panDelta||new e.P(0,0))._add(n.panDelta)),n.zoomDelta&&(t.zoomDelta=(t.zoomDelta||0)+n.zoomDelta),n.bearingDelta&&(t.bearingDelta=(t.bearingDelta||0)+n.bearingDelta),n.pitchDelta&&(t.pitchDelta=(t.pitchDelta||0)+n.pitchDelta),void 0!==n.around&&(t.around=n.around),void 0!==n.aroundCoord&&(t.aroundCoord=n.aroundCoord),void 0!==n.pinchAround&&(t.pinchAround=n.pinchAround),n.noInertia&&(t.noInertia=n.noInertia),e.h(i,o),e.h(r,a);this._updateMapTransform(t,i,r),this._changes=[]}_updateMapTransform(t,i,r){const n=this._map,o=n.transform,a=e=>[e.x,e.y,e.z];if((()=>{const e=this._eventsInProgress.drag;return e&&!this._handlersById[e.handlerName].isActive()})()&&!ol(t)){const e=o.zoom;o.cameraElevationReference="sea",null!=this._originalZoom&&o._orthographicProjectionAtLowPitch&&"globe"!==o.projection.name&&0===o.pitch?(o.cameraElevationReference="ground",o.zoom=this._originalZoom):(o.recenterOnTerrain(),o.cameraElevationReference="ground"),e!==o.zoom&&this._map._update(!0)}if(o._isCameraConstrained&&n._stop(!0),!ol(t))return void this._fireEvents(i,r,!0);let{panDelta:s,zoomDelta:l,bearingDelta:c,pitchDelta:u,around:h,aroundCoord:d,pinchAround:p}=t;o._isCameraConstrained&&(l>0&&(l=0),o._isCameraConstrained=!1),void 0!==p&&(h=p),(l||(e=>i[e]&&!this._eventsInProgress[e])("drag"))&&h&&(this._dragOrigin=a(o.pointCoordinate3D(h)),this._originalZoom=o.zoom,this._trackingEllipsoid.setup(o._camera.position,this._dragOrigin)),o.cameraElevationReference="sea",n._stop(!0),h=h||n.transform.centerPoint,c&&(o.bearing+=c),u&&(o.pitch+=u),o._updateCameraState();const f=[0,0,0];if(s)if("mercator"===o.projection.name){const e=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h).dir),t=this._trackingEllipsoid.projectRay(o.screenPointToMercatorRay(h.sub(s)).dir);f[0]=t[0]-e[0],f[1]=t[1]-e[1]}else{const t=o.pointCoordinate(h);if("globe"===o.projection.name){s=s.rotate(-o.angle);const i=o._pixelsPerMercatorPixel/o.worldSize;f[0]=-s.x*e.ez(e.aY(t.y))*i,f[1]=-s.y*e.ez(o.center.lat)*i}else{const e=o.pointCoordinate(h.sub(s));t&&e&&(f[0]=e.x-t.x,f[1]=e.y-t.y)}}const m=o.zoom,g=[0,0,0];if(l){const t=a(d||o.pointCoordinate3D(h)),i={dir:e.au([],e.at([],t,o._camera.position))};if(i.dir[2]<0){const r=o.zoomDeltaToMovement(t,l);e.bY(g,i.dir,r)}}const y=e.cV(f,f,g);o._translateCameraConstrained(y),l&&Math.abs(o.zoom-m)>1e-4&&o.recenterOnTerrain(),o.cameraElevationReference="ground",this._map._update(),t.noInertia||this._inertia.record(t),this._fireEvents(i,r,!0)}_fireEvents(t,i,r){const n=il(this._eventsInProgress),o=il(t),a={};for(const e in t){const{originalEvent:i}=t[e];this._eventsInProgress[e]||(a["".concat(e,"start")]=i),this._eventsInProgress[e]=t[e]}!n&&o&&this._fireEvent("movestart",o.originalEvent);for(const e in a)this._fireEvent(e,a[e]);o&&this._fireEvent("move",o.originalEvent);for(const e in t){const{originalEvent:i}=t[e];this._fireEvent(e,i)}const s={};let l;for(const e in this._eventsInProgress){const{handlerName:t,originalEvent:r}=this._eventsInProgress[e];this._handlersById[t].isActive()||(delete this._eventsInProgress[e],l=i[t]||r,s["".concat(e,"end")]=l)}for(const e in s)this._fireEvent(e,s[e]);const c=il(this._eventsInProgress);if(r&&(n||o)&&!c){this._updatingCamera=!0;const t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=e=>0!==e&&-this._bearingSnap<e&&e<this._bearingSnap;t?(i(t.bearing||this._map.getBearing())&&(t.bearing=0),this._map.easeTo(t,{originalEvent:l})):(this._map.fire(new e.A("moveend",{originalEvent:l})),i(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(t,i){this._map.fire(new e.A(t,i?{originalEvent:i}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(e=>{this._frameId=void 0,this.handleEvent(new rl("renderFrame",{timeStamp:e})),this._applyChanges()})}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}const sl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class ll extends e.E{constructor(t,i){super(),this._moving=!1,this._zooming=!1,this.transform=t,this._bearingSnap=i.bearingSnap,this._respectPrefersReducedMotion=!1!==i.respectPrefersReducedMotion,e.aV(["_renderFrameCallback"],this)}getCenter(){return new e.cd(this.transform.center.lng,this.transform.center.lat)}setCenter(e,t){return this.jumpTo({center:e},t)}panBy(t,i,r){return t=e.P.convert(t).mult(-1),this.panTo(this.transform.center,e.h({offset:t},i),r)}panTo(t,i,r){return this.easeTo(e.h({center:t},i),r)}getZoom(){return this.transform.zoom}setZoom(e,t){return this.jumpTo({zoom:e},t),this}zoomTo(t,i,r){return this.easeTo(e.h({zoom:t},i),r)}zoomIn(e,t){return this.zoomTo(this.getZoom()+1,e,t),this}zoomOut(e,t){return this.zoomTo(this.getZoom()-1,e,t),this}getBearing(){return this.transform.bearing}setBearing(e,t){return this.jumpTo({bearing:e},t),this}getPadding(){return this.transform.padding}setPadding(e,t){return this.jumpTo({padding:e},t),this}rotateTo(t,i,r){return this.easeTo(e.h({bearing:t},i),r)}resetNorth(t,i){return this.rotateTo(0,e.h({duration:1e3},t),i),this}resetNorthPitch(t,i){return this.easeTo(e.h({bearing:0,pitch:0,duration:1e3},t),i),this}snapToNorth(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this}getPitch(){return this.transform.pitch}setPitch(e,t){return this.jumpTo({pitch:e},t),this}cameraForBounds(t,i){t=e.aG.convert(t);const r=i&&i.bearing||0,n=i&&i.pitch||0,o=t.getNorthWest(),a=t.getSouthEast();return this._cameraForBounds(this.transform,o,a,r,n,i)}_extendPadding(t){const i={top:0,right:0,bottom:0,left:0};return null==t?e.h({},i,this.transform.padding):"number"==typeof t?{top:t,bottom:t,right:t,left:t}:e.h({},i,t)}_extendCameraOptions(t){return(t=e.h({offset:[0,0],maxZoom:this.transform.maxZoom},t)).padding=this._extendPadding(t.padding),t}_minimumAABBFrustumDistance(e,t){const i=t.max[0]-t.min[0],r=t.max[1]-t.min[1];return i/r>e.aspect?i/(2*Math.tan(.5*e.fovX)*e.aspect):r/(2*Math.tan(.5*e.fovY)*e.aspect)}_cameraForBoundsOnGlobe(t,i,r,n,o,a){const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=n,s.pitch=o;const c=e.cd.convert(i),u=e.cd.convert(r),h=.5*(c.lat+u.lat),d=.5*(c.lng+u.lng),p=e.eC(h,d),f=e.au([],p),m=e.au([],e.bF([],f,[0,1,0])),g=e.bF([],m,f),y=[m[0],m[1],m[2],0,g[0],g[1],g[2],0,f[0],f[1],f[2],0,0,0,0,1],_=[p,e.eC(c.lat,c.lng),e.eC(u.lat,c.lng),e.eC(u.lat,u.lng),e.eC(c.lat,u.lng),e.eC(h,c.lng),e.eC(h,u.lng),e.eC(c.lat,d),e.eC(u.lat,d)];let v=e.cW.fromPoints(_.map(t=>[e.bG(m,t),e.bG(g,t),e.bG(f,t)]));const x=e.ad([],v.center,y);0===e.eD(x)&&e.eE(x,0,0,1),e.au(x,x),e.bY(x,x,e.aB),s.center=e.eF(x);const C=s.getWorldToCameraMatrix(),w=e.bi(new Float64Array(16),C);v=e.cW.applyTransform(v,e.az([],C,y));const b=this._extendAABB(v,s,l,n);if(!b)return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");v=b,e.ad(x,x,C);const S=.5*(v.max[2]-v.min[2]),L=this._minimumAABBFrustumDistance(s,v),T=e.bY([],[0,0,1],S),M=e.cV(T,x,T),E=L+(0===s.pitch?0:e.bD(x,M)),I=s.globeCenterInViewSpace,A=e.at([],x,[I[0],I[1],I[2]]);e.au(A,A),e.bY(A,A,E);const k=e.cV([],x,A);e.ad(k,k,w);const P=e.eq/e.aB,O=e.ae(k),R=e.c6(Math.max(O*P-e.eq,Number.EPSILON),0),z=Math.min(s.zoomFromMercatorZAdjusted(R),l.maxZoom);return z>.5*(e.cL+e.cx)?(s.setProjection({name:"mercator"}),s.zoom=z,this._cameraForBounds(s,i,r,n,o,a)):{center:s.center,zoom:z,bearing:n,pitch:o}}_extendAABB(t,i,r,n){const o=.5*((r.padding.left||0)+(r.padding.right||0)),a=.5*((r.padding.top||0)+(r.padding.bottom||0)),s=a,l=o,c=o,u=a,h=i.width-(l+c),d=i.height-(s+u),p=e.at([],t.max,t.min),f=Math.min(h/p[0],d/p[1]),m=Math.min(i.scaleZoom(i.scale*f),r.maxZoom);if(isNaN(m))return null;const g=i.scale/i.zoomScale(m),y=new e.cW([t.min[0]-l*g,t.min[1]-u*g,t.min[2]],[t.max[0]+c*g,t.max[1]+s*g,t.max[2]]),_=("number"==typeof r.offset.x&&"number"==typeof r.offset.y?new e.P(r.offset.x,r.offset.y):e.P.convert(r.offset)).rotate(-e.al(n));return y.center[0]-=_.x*g,y.center[1]+=_.y*g,y}queryTerrainElevation(t,i){const r=this.transform.elevation;return r?(i=e.h({},{exaggerated:!0},i),r.getAtPoint(e.ac.fromLngLat(t),null,i.exaggerated)):null}_cameraForBounds(t,i,r,n,o,a){if("globe"===t.projection.name)return this._cameraForBoundsOnGlobe(t,i,r,n,o,a);const s=t.clone(),l=this._extendCameraOptions(a);s.bearing=n,s.pitch=o;const c=e.cd.convert(i),u=e.cd.convert(r),h=new e.cd(c.lng,u.lat),d=new e.cd(u.lng,c.lat),p=s.project(c),f=s.project(u),m=this.queryTerrainElevation(c),g=this.queryTerrainElevation(u),y=this.queryTerrainElevation(h),_=this.queryTerrainElevation(d),v=[[p.x,p.y,Math.min(m||0,g||0,y||0,_||0)],[f.x,f.y,Math.max(m||0,g||0,y||0,_||0)]];let x=e.cW.fromPoints(v);const C=s.getWorldToCameraMatrix(),w=e.bi(new Float64Array(16),C);x=e.cW.applyTransform(x,C);const b=this._extendAABB(x,s,l,n);if(!b)return void e.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");x=b;const S=.5*e.at([],x.max,x.min)[2],L=this._minimumAABBFrustumDistance(s,x),T=[0,0,1,0];e.aA(T,T,C),e.eG(T,T);const M=e.bY([],T,L+S),E=e.cV([],x.center,M);e.ad(x.center,x.center,w),e.ad(E,E,w);const I=s.unproject(new e.P(x.center[0],x.center[1])),A=e.eH(s.projection,I),k=Math.pow(2,A),P=Math.min(s._zoomFromMercatorZ(E[2]*s.pixelsPerMeter*k/s.worldSize),l.maxZoom);return s.mercatorFromTransition&&P<.5*(e.cL+e.cx)?(s.setProjection({name:"globe"}),s.zoom=P,this._cameraForBounds(s,i,r,n,o,a)):{center:I,zoom:P,bearing:n,pitch:o}}fitBounds(e,t,i){const r=this.cameraForBounds(e,t);return this._fitInternal(r,t,i)}fitScreenCoordinates(t,i,r,n,o){const a=e.P.convert(t),s=e.P.convert(i),l=new e.P(Math.min(a.x,s.x),Math.min(a.y,s.y)),c=new e.P(Math.max(a.x,s.x),Math.max(a.y,s.y));if("mercator"===this.transform.projection.name&&this.transform.anyCornerOffEdge(a,s))return this;const u=this.transform.pointLocation3D(l),h=this.transform.pointLocation3D(c),d=this.transform.pointLocation3D(new e.P(l.x,c.y)),p=this.transform.pointLocation3D(new e.P(c.x,l.y)),f=[Math.min(u.lng,h.lng,d.lng,p.lng),Math.min(u.lat,h.lat,d.lat,p.lat)],m=[Math.max(u.lng,h.lng,d.lng,p.lng),Math.max(u.lat,h.lat,d.lat,p.lat)],g=n&&n.pitch?n.pitch:this.getPitch(),y=this._cameraForBounds(this.transform,f,m,r,g,n);return this._fitInternal(y,n,o)}_fitInternal(t,i,r){return t?(i=e.h(t,i)).linear?this.easeTo(i,r):this.flyTo(i,r):this}jumpTo(t,i){this.stop();const r=t.preloadOnly?this.transform.clone():this.transform;let n=!1,o=!1,a=!1;"zoom"in t&&r.zoom!==+t.zoom&&(n=!0,r.zoom=+t.zoom),void 0!==t.center&&(r.center=e.cd.convert(t.center)),"bearing"in t&&r.bearing!==+t.bearing&&(o=!0,r.bearing=+t.bearing),"pitch"in t&&r.pitch!==+t.pitch&&(a=!0,r.pitch=+t.pitch);const s="number"==typeof t.padding?this._extendPadding(t.padding):t.padding;if(null!=t.padding&&!r.isPaddingEqual(s))if(!1===t.retainPadding){const e=r.clone();e.padding=s,r.setLocationAtPoint(r.center,e.centerPoint)}else r.padding=s;return t.preloadOnly?(this._preloadTiles(r),this):(this.fire(new e.A("movestart",i)).fire(new e.A("move",i)),n&&this.fire(new e.A("zoomstart",i)).fire(new e.A("zoom",i)).fire(new e.A("zoomend",i)),o&&this.fire(new e.A("rotatestart",i)).fire(new e.A("rotate",i)).fire(new e.A("rotateend",i)),a&&this.fire(new e.A("pitchstart",i)).fire(new e.A("pitch",i)).fire(new e.A("pitchend",i)),this.fire(new e.A("moveend",i)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||e.w(sl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(t,i){const r=this.transform;if(!r.projection.supportsFreeCamera)return e.w(sl),this;this.stop();const n=r.zoom,o=r.pitch,a=r.bearing;r.setFreeCameraOptions(t);const s=n!==r.zoom,l=o!==r.pitch,c=a!==r.bearing;return this.fire(new e.A("movestart",i)).fire(new e.A("move",i)),s&&this.fire(new e.A("zoomstart",i)).fire(new e.A("zoom",i)).fire(new e.A("zoomend",i)),c&&this.fire(new e.A("rotatestart",i)).fire(new e.A("rotate",i)).fire(new e.A("rotateend",i)),l&&this.fire(new e.A("pitchstart",i)).fire(new e.A("pitch",i)).fire(new e.A("pitchend",i)),this.fire(new e.A("moveend",i)),this}easeTo(t,i){this._stop(!1,t.easeId),(!1===(t=e.h({offset:[0,0],duration:500,easing:e.ey},t)).animate||this._prefersReducedMotion(t))&&(t.duration=0);const r=this.transform,n=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?+t.zoom:n,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h=this._extendPadding(t.padding),d=e.P.convert(t.offset);let p,f,m;if("globe"===r.projection.name){const i=e.ac.fromLngLat(r.center),n=d.rotate(-r.angle);i.x+=n.x/r.worldSize,i.y+=n.y/r.worldSize;const o=i.toLngLat(),a=e.cd.convert(t.center||o);this._normalizeCenter(a),p=r.centerPoint.add(n),f=new e.P(i.x,i.y).mult(r.worldSize),m=new e.P(e.aD(a.lng),e.aH(a.lat)).mult(r.worldSize).sub(f)}else{p=r.centerPoint.add(d);const i=r.pointLocation(p),n=e.cd.convert(t.center||i);this._normalizeCenter(n),f=r.project(i),m=r.project(n).sub(f)}const g=r.zoomScale(l-n);let y,_;t.around&&(y=e.cd.convert(t.around),_=r.locationPoint(y));const v=this._zooming||l!==n,x=this._rotating||o!==c,C=this._pitching||u!==a,w=!r.isPaddingEqual(h),b=!1===t.retainPadding?r.clone():r,S=r=>S=>{if(v&&(r.zoom=e.ai(n,l,S)),x&&(r.bearing=e.ai(o,c,S)),C&&(r.pitch=e.ai(a,u,S)),w&&(b.interpolatePadding(s,h,S),p=b.centerPoint.add(d)),y)r.setLocationAtPoint(y,_);else{const e=r.zoomScale(r.zoom-n),t=l>n?Math.min(2,g):Math.max(.5,g),i=Math.pow(t,1-S),o=r.unproject(f.add(m.mult(S*i)).mult(e));r.setLocationAtPoint(r.renderWorldCopies?o.wrap():o,p)}return t.preloadOnly||this._fireMoveEvents(i),r};if(t.preloadOnly){const e=this._emulate(S,t.duration,r);return this._preloadTiles(e),this}const L={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=v,this._rotating=x,this._pitching=C,this._padding=w,this._easeId=t.easeId,this._prepareEase(i,t.noMoveStart,L),this._ease(S(r),e=>{"sea"===r.cameraElevationReference&&r.recenterOnTerrain(),this._afterEase(i,e)},t),this}_prepareEase(t,i){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&0===this.transform.pitch&&"globe"!==this.transform.projection.name&&(this.transform.cameraElevationReference="ground"),i||r.moving||this.fire(new e.A("movestart",t)),this._zooming&&!r.zooming&&this.fire(new e.A("zoomstart",t)),this._rotating&&!r.rotating&&this.fire(new e.A("rotatestart",t)),this._pitching&&!r.pitching&&this.fire(new e.A("pitchstart",t))}_fireMoveEvents(t){this.fire(new e.A("move",t)),this._zooming&&this.fire(new e.A("zoom",t)),this._rotating&&this.fire(new e.A("rotate",t)),this._pitching&&this.fire(new e.A("pitch",t))}_afterEase(t,i){if(this._easeId&&i&&this._easeId===i)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const r=this._zooming,n=this._rotating,o=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,r&&this.fire(new e.A("zoomend",t)),n&&this.fire(new e.A("rotateend",t)),o&&this.fire(new e.A("pitchend",t)),this.fire(new e.A("moveend",t))}flyTo(t,i){if(this._prefersReducedMotion(t)){const r=e.aF(t,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(r,i)}this.stop(),t=e.h({offset:[0,0],speed:1.2,curve:1.42,easing:e.ey},t);const r=this.transform,n=this.getZoom(),o=this.getBearing(),a=this.getPitch(),s=this.getPadding(),l="zoom"in t?e.ay(+t.zoom,r.minZoom,r.maxZoom):n,c="bearing"in t?this._normalizeBearing(t.bearing,o):o,u="pitch"in t?+t.pitch:a,h=this._extendPadding(t.padding),d=r.zoomScale(l-n),p=e.P.convert(t.offset);let f=r.centerPoint.add(p);const m=r.pointLocation(f),g=e.cd.convert(t.center||m);this._normalizeCenter(g);const y=r.project(m),_=r.project(g).sub(y);let v=t.curve;const x=Math.max(r.width,r.height),C=x/d,w=_.mag();if("minZoom"in t){const i=e.ay(Math.min(t.minZoom,n,l),r.minZoom,r.maxZoom),o=x/r.zoomScale(i-n);v=Math.sqrt(o/w*2)}const b=v*v;function S(e){const t=(C*C-x*x+(e?-1:1)*b*b*w*w)/(2*(e?C:x)*b*w);return Math.log(Math.sqrt(t*t+1)-t)}function L(e){return(Math.exp(e)-Math.exp(-e))/2}function T(e){return(Math.exp(e)+Math.exp(-e))/2}const M=S(0);let E=function(e){return T(M)/T(M+v*e)},I=function(e){return x*((T(M)*(L(t=M+v*e)/T(t))-L(M))/b)/w;var t},A=(S(1)-M)/v;if(Math.abs(w)<1e-6||!isFinite(A)){if(Math.abs(x-C)<1e-6)return this.easeTo(t,i);const e=C<x?-1:1;A=Math.abs(Math.log(C/x))/v,I=function(){return 0},E=function(t){return Math.exp(e*v*t)}}t.duration="duration"in t?+t.duration:1e3*A/("screenSpeed"in t?+t.screenSpeed/v:+t.speed),t.maxDuration&&t.duration>t.maxDuration&&(t.duration=0);const k=o!==c,P=u!==a,O=!r.isPaddingEqual(h),R=!1===t.retainPadding?r.clone():r,z=r=>d=>{const m=d*A,v=1/E(m);r.zoom=1===d?l:n+r.scaleZoom(v),k&&(r.bearing=e.ai(o,c,d)),P&&(r.pitch=e.ai(a,u,d)),O&&(R.interpolatePadding(s,h,d),f=R.centerPoint.add(p));const x=1===d?g:r.unproject(y.add(_.mult(I(m))).mult(v));return r.setLocationAtPoint(r.renderWorldCopies?x.wrap():x,f),r._updateCameraOnTerrain(),t.preloadOnly||this._fireMoveEvents(i),r};if(t.preloadOnly){const e=this._emulate(z,t.duration,r);return this._preloadTiles(e),this}return this._zooming=!0,this._rotating=k,this._pitching=P,this._padding=O,this._prepareEase(i,!1),this._ease(z(r),()=>this._afterEase(i),t),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(e){}_cancelRenderFrame(e){}_stop(e,t){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const e=this._onEaseEnd;this._onEaseEnd=void 0,e.call(this,t)}if(!e){const e=this.handlers;e&&e.stop(!1)}return this}_ease(t,i,r){!1===r.animate||0===r.duration?(t(1),i()):(this._easeStart=e.q.now(),this._easeOptions=r,this._onEaseFrame=t,this._onEaseEnd=i,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const t=Math.min((e.q.now()-this._easeStart)/this._easeOptions.duration,1),i=this._onEaseFrame;i&&i(this._easeOptions.easing(t)),t<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(t,i){t=e.bX(t,-180,180);const r=Math.abs(t-i);return Math.abs(t-360-i)<r&&(t-=360),Math.abs(t+360-i)<r&&(t+=360),t}_normalizeCenter(e){const t=this.transform;if(t.maxBounds)return;if("globe"!==t.projection.name&&!t.renderWorldCopies)return;const i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}_prefersReducedMotion(t){return this._respectPrefersReducedMotion&&e.q.prefersReducedMotion&&!(t&&t.essential)}_emulate(e,t,i){const r=Math.ceil(15*t/1e3),n=[],o=e(i.clone());for(let a=0;a<=r;a++){const e=o(a/r);n.push(e.clone())}return n}_preloadTiles(e,t){}}class cl{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t,e.aV(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(e){const t=this.options&&this.options.compact,i=e._getUIString("AttributionControl.ToggleAttribution");this._map=e,this._container=h("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=h("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",i);const r=h("span","mapboxgl-ctrl-icon",this._compactButton);return r.setAttribute("aria-hidden","true"),r.setAttribute("title",i),this._innerContainer=h("div","mapboxgl-ctrl-attrib-inner",this._container),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let t=this._editLink;t||(t=this._editLink=this._container.querySelector(".mapbox-improve-map"));const i=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.e.ACCESS_TOKEN}];if(t){const r=i.reduce((e,t,r)=>(t.value&&(e+="".concat(t.key,"=").concat(t.value).concat(r<i.length-1?"&":"")),e),"?");t.href="".concat(e.e.FEEDBACK_URL,"/").concat(r,"#").concat(us(this._map,!0)),t.rel="noopener nofollow"}}_updateData(e){!e||"metadata"!==e.sourceDataType&&"visibility"!==e.sourceDataType&&"style"!==e.dataType||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let e=[];if(this._map.style.stylesheet){const e=this._map.style.stylesheet;this.styleOwner=e.owner,this.styleId=e.id}const t=this._map.style._mergedSourceCaches;for(const r in t){const i=t[r];if(i.used){const t=i.getSource();t.attribution&&e.indexOf(t.attribution)<0&&e.push(t.attribution)}}e.sort((e,t)=>e.length-t.length),e=e.filter((t,i)=>{for(let r=i+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=[...this.options.customAttribution,...e]:e.unshift(this.options.customAttribution));const i=e.join(" | ");i!==this._attribHTML&&(this._attribHTML=i,e.length?(this._innerContainer.innerHTML=i,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class ul{constructor(){e.aV(["_updateLogo","_updateCompact"],this)}onAdd(e){this._map=e,this._container=h("div","mapboxgl-ctrl");const t=h("a","mapboxgl-ctrl-logo");return t.target="_blank",t.rel="noopener nofollow",t.href="https://www.mapbox.com/",t.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),t.setAttribute("rel","noopener nofollow"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const e=this._map.style._sourceCaches;if(0===Object.entries(e).length)return!0;for(const t in e){const i=e[t].getSource();if(i.hasOwnProperty("mapbox_logo")&&!i.mapbox_logo)return!1}return!0}_updateCompact(){const e=this._container.children;if(e.length){const t=e[0];this._map.getCanvasContainer().offsetWidth<250?t.classList.add("mapboxgl-compact"):t.classList.remove("mapboxgl-compact")}}}class hl{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const t=++this._id;return this._queue.push({callback:e,id:t,cancelled:!1}),t}remove(e){const t=this._currentlyRunning,i=t?this._queue.concat(t):this._queue;for(const r of i)if(r.id===e)return void(r.cancelled=!0)}run(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const t=this._currentlyRunning=this._queue;this._queue=[];for(const i of t)if(!i.cancelled&&(i.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class dl{constructor(e){this.jumpTo(e)}getValue(t){if(t<=this._startTime)return this._start;if(t>=this._endTime)return this._end;const i=e.dk((t-this._startTime)/(this._endTime-this._startTime));return this._start*(1-i)+this._end*i}isEasing(e){return e>=this._startTime&&e<=this._endTime}jumpTo(e){this._startTime=-1/0,this._endTime=-1/0,this._start=e,this._end=e}easeTo(e,t,i){this._start=this.getValue(t),this._end=e,this._startTime=t,this._endTime=t+i}}const pl={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use \u2318 + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"};class fl extends e.A{constructor(e,t,i,r){const{point:n,lngLat:o,originalEvent:a,target:s}=e;super(e.type,{point:n,lngLat:o,originalEvent:a,target:s}),this.preventDefault=()=>{e.preventDefault()},this.id=t,this.interaction=i,this.feature=r}}class ml{constructor(e){this.map=e,this.interactionsByType=new Map,this.delegatedInteractions=new Map,this.typeById=new Map,this.filters=new Map,this.handleType=this.handleType.bind(this),this.handleMove=this.handleMove.bind(this),this.handleOut=this.handleOut.bind(this),this.hoveredFeatures=new Map,this.prevHoveredFeatures=new Map}add(t,i){if(this.typeById.has(t))throw new Error('Interaction id "'.concat(t,'" already exists.'));const r=i.filter;let n=i.type;r&&this.filters.set(t,e.b3(r)),"mouseover"===n&&(n="mouseenter"),"mouseout"===n&&(n="mouseleave");const o=this.interactionsByType.get(n)||new Map;"mouseenter"===n||"mouseleave"===n?(0===this.delegatedInteractions.size&&(this.map.on("mousemove",this.handleMove),this.map.on("mouseout",this.handleOut)),this.delegatedInteractions.set(t,i)):0===o.size&&this.map.on(n,this.handleType),0===o.size&&this.interactionsByType.set(n,o),o.set(t,i),this.typeById.set(t,n)}get(e){const t=this.typeById.get(e);if(!t)return;const i=this.interactionsByType.get(t);return i?i.get(e):void 0}remove(e){const t=this.typeById.get(e);if(!t)return;this.typeById.delete(e),this.filters.delete(e);const i=this.interactionsByType.get(t);i&&(i.delete(e),"mouseenter"===t||"mouseleave"===t?(this.delegatedInteractions.delete(e),0===this.delegatedInteractions.size&&(this.map.off("mousemove",this.handleMove),this.map.off("mouseout",this.handleOut))):0===i.size&&this.map.off(t,this.handleType))}queryTargets(e,t){const i=[];for(const[r,n]of t)n.target&&i.push({targetId:r,target:n.target,filter:this.filters.get(r)});return this.map.style.queryRenderedTargets(e,i,this.map.transform)}handleMove(e){this.prevHoveredFeatures=this.hoveredFeatures,this.hoveredFeatures=new Map;const t=this.queryTargets(e.point,Array.from(this.delegatedInteractions).reverse());t.length&&(e.type="mouseenter",this.handleType(e,t));const i=new Map;for(const[r,{feature:n}]of this.prevHoveredFeatures)this.hoveredFeatures.has(r)||i.set(n.id,n);i.size&&(e.type="mouseleave",this.handleType(e,Array.from(i.values())))}handleOut(e){const t=Array.from(this.hoveredFeatures.values()).map(e=>{let{feature:t}=e;return t});t.length&&(e.type="mouseleave",this.handleType(e,t)),this.hoveredFeatures.clear()}handleType(t,i){const r="mouseenter"===t.type;if(r&&!this.interactionsByType.has(t.type))return void e.w("mouseenter interaction required for mouseleave to work.");const n=Array.from(this.interactionsByType.get(t.type)).reverse(),o=!!i;i=i||this.queryTargets(t.point,n);let a=!1;const s=new Set;for(const l of i){for(const[i,c]of n){if(!c.target)continue;const n=l.variants?l.variants[i]:null;if(n){for(const u of n){if(ht(u,l,s,i))continue;const n=new e.de(l,u),h=ut(u,l,i);o&&(n.state=this.map.getFeatureState(n));const d=r?this.prevHoveredFeatures.get(h):null,p=new fl(t,i,c,n),f=d?d.stop:c.handler(p);if(r&&this.hoveredFeatures.set(h,{feature:l,stop:f}),!1!==f){a=!0;break}}if(a)break}}if(a)break}if(!a)for(const[e,l]of n){const{handler:i,target:r}=l;if(!r&&!1!==i(new fl(t,e,l,null)))break}}}function gl(t,i){if(Array.isArray(t)&&Array.isArray(i)){const e=new Set(t),r=new Set(i);return e.size===r.size&&t.every(e=>r.has(e))}return e.bv(t,i)}const yl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},_l={showCompass:!0,showZoom:!0,visualizePitch:!1};class vl{constructor(t,i){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._clickTolerance=10,this.element=i,this.mouseRotate=new Os({clickTolerance:t.dragRotate._mouseRotate._clickTolerance}),this.map=t,r&&(this.mousePitch=new Rs({clickTolerance:t.dragRotate._mousePitch._clickTolerance})),e.aV(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),i.addEventListener("mousedown",this.mousedown),i.addEventListener("touchstart",this.touchstart,{passive:!1}),i.addEventListener("touchmove",this.touchmove),i.addEventListener("touchend",this.touchend),i.addEventListener("touchcancel",this.reset)}down(e,t){this.mouseRotate.mousedown(e,t),this.mousePitch&&this.mousePitch.mousedown(e,t),g()}move(e,t){const i=this.map,r=this.mouseRotate.mousemoveWindow(e,t),n=r&&r.bearingDelta;if(n&&i.setBearing(i.getBearing()+n),this.mousePitch){const r=this.mousePitch.mousemoveWindow(e,t),n=r&&r.pitchDelta;n&&i.setPitch(i.getPitch()+n)}}off(){const e=this.element;e.removeEventListener("mousedown",this.mousedown),e.removeEventListener("touchstart",this.touchstart),e.removeEventListener("touchmove",this.touchmove),e.removeEventListener("touchend",this.touchend),e.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){y(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(t){this.down(e.h({},t,{ctrlKey:!0,preventDefault:()=>t.preventDefault()}),x(this.element,t)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(e){this.move(e,x(this.element,e))}mouseup(e){this.mouseRotate.mouseupWindow(e),this.mousePitch&&this.mousePitch.mouseupWindow(e),this.offTemp()}touchstart(e){1!==e.targetTouches.length?this.reset():(this._startPos=this._lastPos=C(this.element,e.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>e.preventDefault()},this._startPos))}touchmove(e){1!==e.targetTouches.length?this.reset():(this._lastPos=C(this.element,e.targetTouches)[0],this.move({preventDefault:()=>e.preventDefault()},this._lastPos))}touchend(e){0===e.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function xl(t,i,r){if(t=new e.cd(t.lng,t.lat),i){const n=new e.cd(t.lng-360,t.lat),o=new e.cd(t.lng+360,t.lat),a=360*Math.ceil(Math.abs(t.lng-r.center.lng)/360),s=r.locationPoint3D(t).distSqr(i),l=i.x<0||i.y<0||i.x>r.width||i.y>r.height;r.locationPoint3D(n).distSqr(i)<s&&(l||Math.abs(n.lng-r.center.lng)<a)?t=n:r.locationPoint3D(o).distSqr(i)<s&&(l||Math.abs(o.lng-r.center.lng)<a)&&(t=o)}for(;Math.abs(t.lng-r.center.lng)>180;){const e=r.locationPoint3D(t);if(e.x>=0&&e.y>=0&&e.x<=r.width&&e.y<=r.height)break;t.lng>r.center.lng?t.lng-=360:t.lng+=360}return t}const Cl={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},wl={rotation:0,rotationAlignment:"auto",pitchAlignment:"auto",occludedOpacity:.2,altitude:0};class bl extends e.E{constructor(t,i){super(),(t instanceof HTMLElement||i)&&(t=e.h({element:t},i)),e.aV(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this);const{anchor:r="center",color:n="#3FB1CE",scale:o=1,draggable:a=!1,clickTolerance:s=0,rotation:l=wl.rotation,rotationAlignment:c=wl.rotationAlignment,pitchAlignment:u=wl.pitchAlignment,occludedOpacity:h=wl.occludedOpacity,altitude:d=wl.altitude}=t||{};this._anchor=r,this._color=n,this._scale=o,this._draggable=a,this._clickTolerance=s,this._rotation=l,this._rotationAlignment=c,this._pitchAlignment=u,this._occludedOpacity=h,this._altitude=d,this._state="inactive",this._isDragging=!1,this._updateMoving=()=>this._update(!0),t&&t.element?(this._element=t.element,this._offset=e.P.convert(t&&t.offset||[0,0])):(this._defaultMarker=!0,this._element=this._createDefaultMarker(),this._offset=e.P.convert(t&&t.offset||[0,-14])),this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",e=>{e.preventDefault()}),this._element.addEventListener("mousedown",e=>{e.preventDefault()});const p=this._element.classList;for(const e in Cl)p.remove("mapboxgl-marker-anchor-".concat(e));p.add("mapboxgl-marker-anchor-".concat(this._anchor));const f=t&&t.className?t.className.trim().split(/\s+/):[];p.add(...f),this._popup=null}_createDefaultMarker(){const e=h("div"),t=d("svg",{display:"block",height:41*this._scale+"px",width:27*this._scale+"px",viewBox:"0 0 27 41"},e);if(0===this._altitude){const e=d("radialGradient",{id:"shadowGradient"},d("defs",{},t));d("stop",{offset:"10%","stop-opacity":.4},e),d("stop",{offset:"100%","stop-opacity":.05},e),d("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},t)}return d("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},t),d("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},t),d("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},t),e}addTo(e){return e===this._map||(this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._updateMoving),e.on("moveend",this._update),e.on("remove",this._clearFadeTimer),e._addMarker(this),this.setDraggable(this._draggable),this._update(),e.on("click",this._onMapClick)),this}remove(){const e=this._map;return e&&(e.off("click",this._onMapClick),e.off("move",this._updateMoving),e.off("moveend",this._update),e.off("mousedown",this._addDragHandler),e.off("touchstart",this._addDragHandler),e.off("mouseup",this._onUp),e.off("touchend",this._onUp),e.off("mousemove",this._onMove),e.off("touchmove",this._onMove),e.off("remove",this._clearFadeTimer),e._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(t){return this._lngLat=e.cd.convert(t),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}setAltitude(e){return e===this._altitude||(this._defaultMarker&&(0===this._altitude&&0!==e||0!==this._altitude&&0===e)&&(this._element=this._createDefaultMarker()),this._altitude=e||wl.altitude,this._update()),this}getAltitude(){return this._altitude}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const t=38.1,i=13.5,r=Math.sqrt(Math.pow(i,2)/2);e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[r,-1*(t-i+r)],"bottom-right":[-r,-1*(t-i+r)],left:[i,-1*(t-i)],right:[-13.5,-1*(t-i)]}:this._offset}this._popup=e,e._marker=this,e._altitude=this._altitude,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(e){const t=e.code,i=e.charCode||e.keyCode;"Space"!==t&&"Enter"!==t&&32!==i&&13!==i||this.togglePopup()}_onMapClick(e){const t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const e=this._popup;return e?(e.isOpen()?(e.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(e.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const e=this._map,t=this._pos;if(!e||!t)return!1;const i=e.unproject(t,this._altitude),r=e.getFreeCameraOptions();if(!r.position)return!1;const n=r.position.toLngLat();return n.distanceTo(i)<.9*n.distanceTo(this._lngLat)}_evaluateOpacity(){const t=this._map;if(!t)return;const i=this._pos;if(!i||i.x<0||i.x>t.transform.width||i.y<0||i.y>t.transform.height)return void this._clearFadeTimer();const r=t.unproject(i,this._altitude);let n;t._showingGlobe()&&e.eK(t.transform,this._lngLat)?n=0:(n=1-t._queryFogOpacity(r),t.transform._terrainEnabled()&&t.getTerrain()&&this._behindTerrain()&&(n*=this._occludedOpacity)),this._element.style.opacity="".concat(n),this._element.style.pointerEvents=n>0?"auto":"none",this._popup&&this._popup._setOpacity(n),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const e=this._pos;if(!e||!this._map)return;const t=this._offset.mult(this._scale);this._element.style.transform="\n            translate(".concat(e.x,"px,").concat(e.y,"px)\n            ").concat(Cl[this._anchor],"\n            ").concat(this._calculateXYTransform()," ").concat(this._calculateZTransform(),"\n            translate(").concat(t.x,"px,").concat(t.y,"px)\n        ")}_calculateXYTransform(){const t=this._pos,i=this._map,r=this.getPitchAlignment();if(!i||!t||"map"!==r)return"";if(!i._showingGlobe()){const e=i.getPitch();return e?"rotateX(".concat(e,"deg)"):""}const n=e.cJ(e.eL(i.transform,this._lngLat)),o=t.sub(e.eM(i.transform)),a=Math.abs(o.x)+Math.abs(o.y);if(0===a)return"";const s=n/a;return"rotateX(".concat(-o.y*s,"deg) rotateY(").concat(o.x*s,"deg)")}_calculateZTransform(){const t=this._pos,i=this._map;if(!i||!t)return"";let r=0;const n=this.getRotationAlignment();if("map"===n)if(i._showingGlobe()){const t=i.project(new e.cd(this._lngLat.lng,this._lngLat.lat+.001),this._altitude),n=i.project(new e.cd(this._lngLat.lng,this._lngLat.lat-.001),this._altitude).sub(t);r=e.cJ(Math.atan2(n.y,n.x))-90}else r=-i.getBearing();else if("horizon"===n){const n=e.af(4,6,i.getZoom()),o=e.eM(i.transform);o.y+=n*i.transform.height;const a=t.sub(o),s=e.cJ(Math.atan2(a.y,a.x));r=(s>90?s-270:s+90)*(1-n)}return r+=this._rotation,r?"rotateZ(".concat(r,"deg)"):""}_update(e){cancelAnimationFrame(this._updateFrameId);const t=this._map;t&&(t.transform.renderWorldCopies&&(this._lngLat=xl(this._lngLat,this._pos,t.transform)),this._pos=t.project(this._lngLat,this._altitude),!0===e?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),t._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(t._showingGlobe()||t.getTerrain()||t.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(t){return this._offset=e.P.convert(t),this._update(),this}addClassName(e){return this._element.classList.add(e),this}removeClassName(e){return this._element.classList.remove(e),this}toggleClassName(e){return this._element.classList.toggle(e)}_onMove(t){const i=this._map;if(!i)return;const r=this._pointerdownPos,n=this._positionDelta;if(r&&n){if(!this._isDragging){const e=this._clickTolerance||i._clickTolerance;if(t.point.dist(r)<e)return;this._isDragging=!0}this._pos=t.point.sub(n),this._lngLat=i.unproject(this._pos,this._altitude),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.A("dragstart"))),this.fire(new e.A("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const t=this._map;t&&(t.off("mousemove",this._onMove),t.off("touchmove",this._onMove)),"active"===this._state&&this.fire(new e.A("dragend")),this._state="inactive"}_addDragHandler(e){const t=this._map,i=this._pos;t&&i&&this._element.contains(e.originalEvent.target)&&(e.preventDefault(),this._positionDelta=e.point.sub(i),this._pointerdownPos=e.point,this._state="pending",t.on("mousemove",this._onMove),t.on("touchmove",this._onMove),t.once("mouseup",this._onUp),t.once("touchend",this._onUp))}setDraggable(e){this._draggable=!!e;const t=this._map;return t&&(e?(t.on("mousedown",this._addDragHandler),t.on("touchstart",this._addDragHandler)):(t.off("mousedown",this._addDragHandler),t.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||wl.rotation,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||wl.rotationAlignment,this._update(),this}getRotationAlignment(){return"auto"===this._rotationAlignment||"horizon"===this._rotationAlignment&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e||wl.pitchAlignment,this._update(),this}getPitchAlignment(){return"auto"===this._pitchAlignment?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(e){return this._occludedOpacity=e||wl.occludedOpacity,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Sl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Ll={maxWidth:100,unit:"metric"},Tl={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ml={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",altitude:0},El=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Il(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new e.P(0,0),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"bottom";if("number"==typeof t){const r=Math.round(Math.sqrt(.5*Math.pow(t,2)));switch(i){case"top":return new e.P(0,t);case"top-left":return new e.P(r,r);case"top-right":return new e.P(-r,r);case"bottom":return new e.P(0,-t);case"bottom-left":return new e.P(r,-r);case"bottom-right":return new e.P(-r,-r);case"left":return new e.P(t,0);case"right":return new e.P(-t,0)}return new e.P(0,0)}return t instanceof e.P||Array.isArray(t)?e.P.convert(t):e.P.convert(t[i]||[0,0])}const Al={version:t,supported:u.supported,setRTLTextPlugin:e.eQ,getRTLTextPluginStatus:e.eP,Map:class extends ll{constructor(t){a.mark(i.create);const r=t;if(null!=(t=e.h({},yl,t)).minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=t.minPitch&&null!=t.maxPitch&&t.minPitch>t.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=t.minPitch&&t.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=t.maxPitch&&t.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(t.antialias&&e.eI(window)&&(t.antialias=!1,e.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new ir(t.minZoom,t.maxZoom,t.minPitch,t.maxPitch,t.renderWorldCopies,null,null),t),this._repaint=!!t.repaint,this._interactive=t.interactive,this._minTileCacheSize=t.minTileCacheSize,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._antialias=t.antialias,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=t.crossSourceCollisions,this._collectResourceTiming=t.collectResourceTiming,this._language=this._parseLanguage(t.language),this._worldview=t.worldview,this._renderTaskQueue=new hl,this._domRenderTaskQueue=new hl,this._controls=[],this._markers=[],this._popups=[],this._mapId=e.a$(),this._locale=e.h({},pl,t.locale),this._clickTolerance=t.clickTolerance,this._cooperativeGestures=t.cooperativeGestures,this._performanceMetricsCollection=t.performanceMetricsCollection,this._tessellationStep=t.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=t.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new dl(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=t.scaleFactor,this._requestManager=new T(t.transformRequest,t.accessToken,t.testMode),this._silenceAuthErrors=!!t.testMode,this._contextCreateOptions=t.contextCreateOptions?Object.assign({},t.contextCreateOptions):{},"string"==typeof t.container){const e=document.getElementById(t.container);if(!e)throw new Error("Container '".concat(t.container.toString(),"' not found."));this._container=e}else{if(!(t.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}if(this._container.childNodes.length>0&&e.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),t.maxBounds&&this.setMaxBounds(t.maxBounds),this._spriteFormat=t.spriteFormat,e.aV(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new Wa),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new al(this,t),this._localFontFamily=t.localFontFamily,this._localIdeographFontFamily=t.localIdeographFontFamily,(t.style||!t.testMode)&&this.setStyle(t.style||e.e.DEFAULT_STYLE,{config:t.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),t.projection&&this.setProjection(t.projection),this.indoor=new gr(this),t.hash&&(this._hash=new cs("string"==typeof t.hash&&t.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){null==r.center&&null==r.zoom||(this.transform._unmodified=!1),this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch});const i=t.bounds;i&&(this.resize(),this.fitBounds(i,e.h({},t.fitBoundsOptions,{duration:0})))}this.resize(),t.attributionControl&&this.addControl(new cl({customAttribution:t.customAttribution})),this._logoControl=new ul,this.addControl(this._logoControl,t.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",t=>{this._update("style"===t.dataType),this.fire(new e.A("".concat(t.dataType,"data"),t))}),this.on("dataloading",t=>{this.fire(new e.A("".concat(t.dataType,"dataloading"),t))}),this._interactions=new ml(this)}_getMapId(){return this._mapId}addControl(t,i){if(void 0===i&&(i=t.getDefaultPosition?t.getDefaultPosition():"top-right"),!t||!t.onAdd)return this.fire(new e.z(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const r=t.onAdd(this);this._controls.push(t);const n=this._controlPositions[i];return-1!==i.indexOf("bottom")?n.insertBefore(r,n.firstChild):n.appendChild(r),this}removeControl(t){if(!t||!t.onRemove)return this.fire(new e.z(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const i=this._controls.indexOf(t);return i>-1&&this._controls.splice(i,1),t.onRemove(this),this}hasControl(e){return this._controls.indexOf(e)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(t){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const i=!this._moving;return i&&this.fire(new e.A("movestart",t)).fire(new e.A("move",t)),this.fire(new e.A("resize",t)),i&&this.fire(new e.A("moveend",t)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(t){return this.transform.setMaxBounds(e.aG.convert(t)),this._update()}setMinZoom(t){if((t=null!==t&&void 0!==t?t:-2)>=-2&&t<=this.transform.maxZoom)return this.transform.minZoom=t,this._update(),this.getZoom()<t?this.setZoom(t):this.fire(new e.A("zoomstart")).fire(new e.A("zoom")).fire(new e.A("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(t){if((t=null!==t&&void 0!==t?t:22)>=this.transform.minZoom)return this.transform.maxZoom=t,this._update(),this.getZoom()>t?this.setZoom(t):this.fire(new e.A("zoomstart")).fire(new e.A("zoom")).fire(new e.A("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(t){if((t=null!==t&&void 0!==t?t:0)<0)throw new Error("minPitch must be greater than or equal to 0");if(t>=0&&t<=this.transform.maxPitch)return this.transform.minPitch=t,this._update(),this.getPitch()<t?this.setPitch(t):this.fire(new e.A("pitchstart")).fire(new e.A("pitch")).fire(new e.A("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(t){if((t=null!==t&&void 0!==t?t:85)>85)throw new Error("maxPitch must be less than or equal to 85");if(t>=this.transform.minPitch)return this.transform.maxPitch=t,this._update(),this.getPitch()>t?this.setPitch(t):this.fire(new e.A("pitchstart")).fire(new e.A("pitch")).fire(new e.A("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(e){return this._scaleFactor=e,this.painter.scaleFactor=e,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(e=>"symbol"===e.type),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(e){return this.transform.renderWorldCopies=e,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(e){return"auto"===e?navigator.language:Array.isArray(e)?0===e.length?void 0:e.map(e=>"auto"===e?navigator.language:e):e}setLanguage(e){const t=this._parseLanguage(e);if(!this.style||t===this._language)return this;this._language=t,this.style.reloadSources();for(const i of this._controls)i._setLanguage&&i._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(e){return this.style&&e!==this._worldview?(this._worldview=e,this._styleDirty=!0,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return"globe"===this.transform.projection.name}setProjection(e){return this._lazyInitEmptyStyle(),e?"string"==typeof e&&(e={name:e}):e=null,this._useExplicitProjection=!!e,this._prioritizeAndUpdateProjection(e,this.style.projection)}_updateProjectionTransition(){if("globe"!==this.getProjection().name)return;const t=this.transform,i=t.projection.name;let r;"globe"===i&&t.zoom>=e.cx?(t.setMercatorFromTransition(),r=!0):"mercator"===i&&t.zoom<e.cx&&(t.setProjection({name:"globe"}),r=!0),r&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate(),this._update(!0))}_prioritizeAndUpdateProjection(e,t){return this._updateProjection(e||t||{name:"mercator"})}_updateProjection(t){let i;return i="globe"===t.name&&this.transform.zoom>=e.cx?this.transform.setMercatorFromTransition():this.transform.setProjection(t),this.style.applyProjectionUpdate(),i&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(t,i){return this.transform.locationPoint3D(e.cd.convert(t),i)}unproject(t,i){return this.transform.pointLocation3D(e.P.convert(t),i)}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(e,t,i){const r=e=>{let i=[];if(Array.isArray(t)){const r=t.filter(e=>this.getLayer(e));i=r.length?this.queryRenderedFeatures(e,{layers:r}):[]}else i=this.queryRenderedFeatures(e,{target:t});return i};if("mouseenter"===e||"mouseover"===e){let n=!1;const o=t=>{const o=r(t.point);o.length?n||(n=!0,i.call(this,new vs(e,this,t.originalEvent,{features:o}))):n=!1};return{listener:i,targets:t,delegates:{mousemove:o,mouseout:()=>{n=!1}}}}if("mouseleave"===e||"mouseout"===e){let n=!1;const o=t=>{r(t.point).length?n=!0:n&&(n=!1,i.call(this,new vs(e,this,t.originalEvent)))},a=t=>{n&&(n=!1,i.call(this,new vs(e,this,t.originalEvent)))};return{listener:i,targets:t,delegates:{mousemove:o,mouseout:a}}}{const n=e=>{const t=r(e.point);t.length&&(e.features=t,i.call(this,e),delete e.features)};return{listener:i,targets:t,delegates:{[e]:n}}}}on(e,t,i){if("function"==typeof t||void 0===i)return super.on(e,t);if("string"==typeof t&&(t=[t]),!this._areTargetsValid(t))return this;const r=this._createDelegatedListener(e,t,i);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[e]=this._delegatedListeners[e]||[],this._delegatedListeners[e].push(r);for(const n in r.delegates)this.on(n,r.delegates[n]);return this}once(e,t,i){if("function"==typeof t||void 0===i)return super.once(e,t);if("string"==typeof t&&(t=[t]),!this._areTargetsValid(t))return this;const r=this._createDelegatedListener(e,t,i);for(const n in r.delegates)this.once(n,r.delegates[n]);return this}off(e,t,i){if("function"==typeof t||void 0===i)return super.off(e,t);if("string"==typeof t&&(t=[t]),!this._areTargetsValid(t))return this;const r=this._delegatedListeners?this._delegatedListeners[e]:void 0;return r&&(e=>{for(let r=0;r<e.length;r++){const n=e[r];if(n.listener===i&&gl(n.targets,t)){for(const e in n.delegates)this.off(e,n.delegates[e]);return e.splice(r,1),this}}})(r),this}queryRenderedFeatures(t,i){if(!this.style)return[];if(void 0===t||t instanceof e.P||Array.isArray(t)||void 0!==i||(i=t,t=void 0),t=t||[[0,0],[this.transform.width,this.transform.height]],!i){const e=this.style.queryRenderedFeatures(t,void 0,this.transform),i=this.style.queryRenderedFeatureset(t,void 0,this.transform);return e.concat(i)}let r=!0;if(i.target&&(r=this._isTargetValid(i.target),r&&!i.layers))return this.style.queryRenderedFeatureset(t,i,this.transform);let n=!0;if(i.layers&&Array.isArray(i.layers)){for(const e of i.layers)if(!this._isValidId(e)){n=!1;break}if(n&&!i.target)return this.style.queryRenderedFeatures(t,i,this.transform)}let o=[];return n&&(o=o.concat(this.style.queryRenderedFeatures(t,i,this.transform))),r&&(o=o.concat(this.style.queryRenderedFeatureset(t,i,this.transform))),o}querySourceFeatures(e,t){return!e||"string"==typeof e&&!this._isValidId(e)?[]:this.style.querySourceFeatures(e,t)}isPointOnSurface(t){const{name:i}=this.transform.projection;return"globe"!==i&&"mercator"!==i&&e.w("".concat(i," projection does not support isPointOnSurface, this API may behave unexpectedly.")),this.transform.isPointOnSurface(e.P.convert(t))}addInteraction(e,t){return this._interactions.add(e,t),this}removeInteraction(e){return this._interactions.remove(e),this}getCooperativeGestures(){return this._cooperativeGestures}setCooperativeGestures(e){return this._cooperativeGestures=e,this}setStyle(t,i){return i=e.h({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},i),this.style&&t&&!1!==i.diff&&i.localFontFamily===this._localFontFamily&&i.localIdeographFontFamily===this._localIdeographFontFamily&&!i.config?(this.style._diffStyle(t,(r,n)=>{if(r){const n="string"==typeof r?r:r instanceof Error?r.message:r.error;e.w("Unable to perform style diff: ".concat(n,". Rebuilding the style from scratch.")),this._updateStyle(t,i)}else n&&this._update(!0)},()=>this._postStyleLoadEvent()),this):(this._localIdeographFontFamily=i.localIdeographFontFamily,this._localFontFamily=i.localFontFamily,this._updateStyle(t,i))}_getUIString(e){const t=this._locale[e];if(null==t)throw new Error("Missing UI string '".concat(e,"'"));return t}_updateStyle(t,i){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),t){const r=e.h({},i);i&&i.config&&(r.initialConfig=i.config,delete r.config),this.style=new Tr(this,r).load(t),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Tr(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(e.w("There is no style added to the map."),!1)}_isValidId(t){return null==t?(this.fire(new e.z(new Error("IDs can't be empty."))),!1):!e.d8(t)||(this.fire(new e.z(new Error("IDs can't contain special symbols: \"".concat(t,'".')))),!1)}_isTargetValid(e){return"featuresetId"in e?this._isValidId("importId"in e?e.importId:e.featuresetId):"layerId"in e&&this._isValidId(e.layerId)}_areTargetsValid(e){if(Array.isArray(e)){for(const t of e)if(!this._isValidId(t))return!1;return!0}return this._isTargetValid(e)}addSource(e,t){return this._isValidId(e)?(this._lazyInitEmptyStyle(),this.style.addSource(e,t),this._update(!0)):this}isSourceLoaded(e){return!!this._isValidId(e)&&!!this.style&&this.style._isSourceCacheLoaded(e)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(e,t,i){this._lazyInitEmptyStyle(),this.style.addSourceType(e,t,i)}removeSource(e){return this._isValidId(e)?(this.style.removeSource(e),this._updateTerrain(),this._update(!0)):this}getSource(e){return this._isValidId(e)?this.style.getOwnSource(e):null}addImage(t,i){let{pixelRatio:r=1,sdf:n=!1,stretchX:o,stretchY:a,content:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this._lazyInitEmptyStyle();const l=e.I.from(t);if(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap){const{width:t,height:c,data:u}=e.q.getImageData(i);this.style.addImage(l,{data:new e.r({width:t,height:c},u),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,version:0,usvg:!1})}else if(void 0===i.width||void 0===i.height)this.fire(new e.z(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:c,height:u}=i,h=i;this.style.addImage(l,{data:new e.r({width:c,height:u},new Uint8Array(h.data)),pixelRatio:r,stretchX:o,stretchY:a,content:s,sdf:n,usvg:!1,version:0,userImage:h}),h.onAdd&&h.onAdd(this,t)}}updateImage(t,i){this._lazyInitEmptyStyle();const r=e.I.from(t),n=this.style.getImage(r);if(!n)return void this.fire(new e.z(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const o=i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap?e.q.getImageData(i):i,{width:a,height:s,data:l}=o;if(void 0===a||void 0===s)return void this.fire(new e.z(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(a!==(n.usvg?n.icon.usvg_tree.width:n.data.width)||s!==(n.usvg?n.icon.usvg_tree.height:n.data.height))return void this.fire(new e.z(new Error("The width and height of the updated image (".concat(a,", ").concat(s,")\n                must be that same as the previous version of the image\n                (").concat(n.data.width,", ").concat(n.data.height,")"))));const c=!(i instanceof HTMLImageElement||ImageBitmap&&i instanceof ImageBitmap);let u=!1;n.usvg?(n.data=new e.r({width:a,height:s},new Uint8Array(l)),n.usvg=!1,n.icon=void 0,u=!0):n.data.replace(l,c),this.style.updateImage(r,n,u)}hasImage(t){return t?!!this.style&&!!this.style.getImage(e.I.from(t)):(this.fire(new e.z(new Error("Missing required image id"))),!1)}removeImage(t){this.style.removeImage(e.I.from(t))}loadImage(t,i){e.o(this._requestManager.transformRequest(t,e.R.Image),(t,r)=>{i(t,r instanceof HTMLImageElement?e.q.getImageData(r):r)})}listImages(){return this.style.listImages().map(e=>e.name)}addModel(e,t){this._lazyInitEmptyStyle(),this.style.addModel(e,t)}hasModel(t){return t?this.style.hasModel(t):(this.fire(new e.z(new Error("Missing required model id"))),!1)}removeModel(e){this.style.removeModel(e)}listModels(){return this.style.listModels()}addLayer(e,t){return this._isValidId(e.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(e,t),this._update(!0)):this}getSlot(e){const t=this.getLayer(e);return t&&t.slot||null}setSlot(e,t){return this.style.setSlot(e,t),this.style.mergeLayers(),this._update(!0)}addImport(t,i){return this.style.addImport(t,i).catch(t=>this.fire(new e.z(new Error("Failed to add import",t)))),this}updateImport(e,t){return"string"!=typeof t&&t.id!==e?(this.removeImport(e),this.addImport(t)):(this.style.updateImport(e,t),this._update(!0))}removeImport(e){return this.style.removeImport(e),this}moveImport(e,t){return this.style.moveImport(e,t),this._update(!0)}moveLayer(e,t){return this._isValidId(e)?(this.style.moveLayer(e,t),this._update(!0)):this}removeLayer(e){return this._isValidId(e)?(this.style.removeLayer(e),this._update(!0)):this}getLayer(e){if(!this._isValidId(e))return null;const t=this.style.getOwnLayer(e);return t?"custom"===t.type?t.implementation:t.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(e,t,i){return this._isValidId(e)?(this.style.setLayerZoomRange(e,t,i),this._update(!0)):this}setFilter(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._isValidId(e)?(this.style.setFilter(e,t,i),this._update(!0)):this}getFilter(e){return this._isValidId(e)?this.style.getFilter(e):null}setPaintProperty(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this._isValidId(e)?(this.style.setPaintProperty(e,t,i,r),this._update(!0)):this}getPaintProperty(e,t){return this._isValidId(e)?this.style.getPaintProperty(e,t):null}setLayoutProperty(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this._isValidId(e)?(this.style.setLayoutProperty(e,t,i,r),this._update(!0)):this}getLayoutProperty(e,t){return this._isValidId(e)?this.style.getLayoutProperty(e,t):null}getGlyphsUrl(){return this.style.getGlyphsUrl()}setGlyphsUrl(e){return this.style.setGlyphsUrl(e),this._update(!0)}getSchema(e){return this.style.getSchema(e)}setSchema(e,t){return this.style.setSchema(e,t),this._update(!0)}getConfig(e){return this.style.getConfig(e)}setConfig(e,t){return this.style.setConfig(e,t),this._update(!0)}getConfigProperty(e,t){return this.style.getConfigProperty(e,t)}setConfigProperty(e,t,i){return this.style.setConfigProperty(e,t,i),this._update(!0)}getFeaturesetDescriptors(e){return this.style.getFeaturesetDescriptors(e)}setLights(e){if(this._lazyInitEmptyStyle(),e&&1===e.length&&"flat"===e[0].type){const t=e[0];t.properties?this.style.setFlatLight(t.properties,t.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(e),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const e=this.style.getLights()||[];return 0===e.length&&e.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),e}setLight(e){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:e}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(e){return this._lazyInitEmptyStyle(),!e&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(e),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(e){return this._lazyInitEmptyStyle(),this.style.setFog(e),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(e){return this._lazyInitEmptyStyle(),this.style.setSnow(e),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(e){return this._lazyInitEmptyStyle(),this.style.setRain(e),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(e){return this._lazyInitEmptyStyle(),this.style.setColorTheme(e),this._update(!0)}setImportColorTheme(e,t){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(e,t),this._update(!0)}setCamera(e){return this.style.setCamera(e),this._triggerCameraUpdate(e)}_triggerCameraUpdate(e){return this._update(this.transform.setOrthographicProjectionAtLowPitch("orthographic"===e["camera-projection"]))}getCamera(){return this.style.camera}_queryFogOpacity(t){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(e.cd.convert(t),this.transform):0}setFeatureState(e,t){return e.source&&!this._isValidId(e.source)?this:(this.style.setFeatureState(e,t),this._update())}removeFeatureState(e,t){return e.source&&!this._isValidId(e.source)?this:(this.style.removeFeatureState(e,t),this._update())}getFeatureState(e){return e.source&&!this._isValidId(e.source)?null:this.style.getFeatureState(e)}_updateContainerDimensions(){if(!this._container)return;const e=this._container.getBoundingClientRect().width||400,t=this._container.getBoundingClientRect().height||300;let i,r,n,o=this._container;for(;o&&(!r||!n);){const e=window.getComputedStyle(o).transform;e&&"none"!==e&&(i=e.match(/matrix.*\((.+)\)/)[1].split(", "),i[0]&&"0"!==i[0]&&"1"!==i[0]&&(r=i[0]),i[3]&&"0"!==i[3]&&"1"!==i[3]&&(n=i[3])),o=o.parentElement}this._containerWidth=r?Math.abs(e/r):e,this._containerHeight=n?Math.abs(t/n):t}_detectMissingCSS(){"rgb(250, 128, 114)"!==window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSCanary=h("div","mapboxgl-canary",e)).style.visibility="hidden",this._detectMissingCSS();const t=this._canvasContainer=h("div","mapboxgl-canvas-container",e);this._canvas=h("canvas","mapboxgl-canvas",t),this._interactive&&(t.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const i=this._controlContainer=h("div","mapboxgl-control-container",e),r=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(e=>{r[e]=h("div","mapboxgl-ctrl-".concat(e),i)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(t,i){const r=e.q.devicePixelRatio||1;this._canvas.width=r*Math.ceil(t),this._canvas.height=r*Math.ceil(i),this._canvas.style.width="".concat(t,"px"),this._canvas.style.height="".concat(i,"px")}_addMarker(e){this._markers.push(e)}_removeMarker(e){const t=this._markers.indexOf(e);-1!==t&&this._markers.splice(t,1)}_addPopup(e){this._popups.push(e)}_removePopup(e){const t=this._popups.indexOf(e);-1!==t&&this._popups.splice(t,1)}_setupPainter(){const t=e.h({},u.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),i=this._canvas.getContext("webgl2",t);i?(Z(i,!0),this.painter=new ss(i,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp,this._worldview),this.on("data",e=>{"source"===e.dataType&&this.painter.setTileLoadedFlag(!0)}),e.l.testSupport(i)):this.fire(new e.z(new Error("Failed to initialize WebGL")))}_contextLost(t){t.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.A("webglcontextlost",{originalEvent:t}))}_contextRestored(t){this._setupPainter(),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight)),this._updateTerrain(),this.style&&(this.style.reloadModels(),this.style.clearSources()),this._update(),this.fire(new e.A("webglcontextrestored",{originalEvent:t}))}_onMapScroll(e){if(e.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(e){return this._update(),this._renderTaskQueue.add(e)}_cancelRenderFrame(e){this._renderTaskQueue.remove(e)}_requestDomTask(e){!this.loaded()||this.loaded()&&!this.isMoving()?e():this._domRenderTaskQueue.add(e)}_render(t){let r;this.fire(new e.A("renderstart")),++this._frameId;const n=this.painter.context.extTimerQuery,o=e.q.now(),s=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(r=s.createQuery(),s.beginQuery(n.TIME_ELAPSED_EXT,r)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(t),this._domRenderTaskQueue.run(t),this._removed)return;this._updateProjectionTransition();const l=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const t=this.transform.zoom,i=this.transform.pitch,r=e.q.now(),n=new e.aa(t,{now:r,fadeDuration:l,pitch:i,transition:this.style.transition,worldview:this._worldview});this.style.update(n)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let c=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),c=this._updateAverageElevation(o),this.style.updateSources(this.transform),this.style.updateImageProviders(),this.isMoving()||this._forceMarkerAndPopupUpdate()):c=this._updateAverageElevation(o);const u=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,l,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),u&&(this._placementDirty=u.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:l,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new e.A("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,a.mark(i.load),this.fire(new e.A("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&this.style.imageManager.hasPatternsInFlight()&&(this._styleDirty=!0),this.style&&!this.style.modelManager.isLoaded()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),r){const t=e.q.now()-o;s.endQuery(n.TIME_ELAPSED_EXT),setTimeout(()=>{const i=s.getQueryParameter(r,s.QUERY_RESULT)/1e6;s.deleteQuery(r),this.fire(new e.A("gpu-timing-frame",{cpuTime:t,gpuTime:i}))},50)}if(this.listens("gpu-timing-layer")){const t=this.painter.collectGpuTimers();setTimeout(()=>{const i=this.painter.queryGpuTimers(t);this.fire(new e.A("gpu-timing-layer",{layerTimes:i}))},50)}if(this.listens("gpu-timing-deferred-render")){const t=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const i=this.painter.queryGpuTimeDeferredRender(t);this.fire(new e.A("gpu-timing-deferred-render",{gpuTime:i}))},50)}const h=this._sourcesDirty||this._styleDirty||this._placementDirty||c;if(h||this._repaint)this.triggerRepaint();else{const t=this.idle();if(t&&(c=this._updateAverageElevation(o,!0)),c)this.triggerRepaint();else if(this._triggerFrame(!1),t&&(this.fire(new e.A("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const t=this._calculateSpeedIndex();this.fire(new e.A("speedindexcompleted",{speedIndex:t})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||h||(this._fullyLoaded=!0,a.mark(i.fullLoad),this._performanceMetricsCollection&&N(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(e){for(const t of this._markers)e&&!this.getRenderWorldCopies()&&(t._lngLat=t._lngLat.wrap()),t._update();for(const t of this._popups)!e||this.getRenderWorldCopies()||t._trackPointer||(t._lngLat=t._lngLat.wrap()),t._update()}_updateAverageElevation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=e=>(this.transform.averageElevation=e,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return 0!==this.transform.averageElevation&&i(0);const r=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(r||(t||e-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(e)){const t=this.transform.averageElevation;let n=this.transform.sampleAverageElevation();null!=this.transform.elevation&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(n)?n=0:this._averageElevationLastSampledAt=e;const o=Math.abs(t-n);if(o>1){if(this._isInitialLoad||r)return this._averageElevation.jumpTo(n),i(n);this._averageElevation.easeTo(n,e,300)}else if(o>1e-4)return this._averageElevation.jumpTo(n),i(n)}return!!this._averageElevation.isEasing(e)&&i(this._averageElevation.getValue(e))}_authenticate(){j(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,t=>{if(t&&(t.message===L||401===t.status)){const t=this.painter.context.gl;Z(t,!1),this._logoControl instanceof ul&&this._logoControl._updateLogo(),t&&t.clear(t.DEPTH_BUFFER_BIT|t.COLOR_BUFFER_BIT|t.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new e.z(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),D(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&B(this._requestManager._customAccessToken,{map:this,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const e=this._isDragging();this.painter.updateTerrain(this.style,e)}_calculateSpeedIndex(){const e=this.painter.canvasCopy(),t=this.painter.getCanvasCopiesAndTimestamps();t.timeStamps.push(performance.now());const i=this.painter.context.gl,r=i.createFramebuffer();function n(e){i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,e,0);const t=new Uint8Array(i.drawingBufferWidth*i.drawingBufferHeight*4);return i.readPixels(0,0,i.drawingBufferWidth,i.drawingBufferHeight,i.RGBA,i.UNSIGNED_BYTE,t),t}return i.bindFramebuffer(i.FRAMEBUFFER,r),this._canvasPixelComparison(n(e),t.canvasCopies.map(n),t.timeStamps)}_canvasPixelComparison(e,t,i){let r=i[1]-i[0];const n=e.length/4;for(let o=0;o<t.length;o++){const a=t[o];let s=0;for(let t=0;t<a.length;t+=4)a[t]===e[t]&&a[t+1]===e[t+1]&&a[t+2]===e[t+2]&&a[t+3]===e[t+3]&&(s+=1);r+=(i[o+2]-i[o+1])*(1-s/n)}return r}remove(){this._hash&&this._hash.remove();for(const e of this._controls)e.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const t=this.painter.context.gl.getExtension("WEBGL_lose_context");t&&t.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),H.delete(this.painter.context.gl),U.remove(),z.remove(),this._removed=!0,this.fire(new e.A("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(t){this._renderNextFrame=this._renderNextFrame||t,this.style&&!this._frame&&(this._frame=e.q.frame(e=>{const t=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,t&&this._render(e)}))}_preloadTiles(t){const i=this.style?this.style.getSourceCaches():[];return e.bt(i,(e,i)=>e._preloadTiles(t,i),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(e){this._trackResize&&this.resize({originalEvent:e})._update()}_onVisibilityChange(){"hidden"===document.visibilityState&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(e){this._showParseStatus!==e&&(this._showParseStatus=e,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(e){this._showTerrainWireframe!==e&&(this._showTerrainWireframe=e,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(e){this._showLayers2DWireframe!==e&&(this._showLayers2DWireframe=e,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(e){this._showLayers3DWireframe!==e&&(this._showLayers3DWireframe=e,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(e){this._speedIndexTiming!==e&&(this._speedIndexTiming=e,this._update())}get showPadding(){return!!this._showPadding}set showPadding(e){this._showPadding!==e&&(this._showPadding=e,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,this._tp.refreshUI(),e?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(e){this._repaint!==e&&(this._repaint=e,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(e){this._vertices=e,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(e){this._showTileAABBs!==e&&(this._showTileAABBs=e,this._tp.refreshUI(),e&&this._update())}_setCacheLimits(t,i){e.eJ(t,i)}get version(){return t}},NavigationControl:class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e.h({},_l,t),this._container=h("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",e=>e.preventDefault()),this.options.showZoom&&(e.aV(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",e=>{this._map&&this._map.zoomIn({},{originalEvent:e})}),h("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",e=>{this._map&&this._map.zoomOut({},{originalEvent:e})}),h("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(e.aV(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",e=>{const t=this._map;t&&(this.options.visualizePitch?t.resetNorthPitch({},{originalEvent:e}):t.resetNorth({},{originalEvent:e}))}),this._compassIcon=h("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const e=this._map;if(!e)return;const t=e.getZoom(),i=t===e.getMaxZoom(),r=t===e.getMinZoom();this._zoomInButton.disabled=i,this._zoomOutButton.disabled=r,this._zoomInButton.setAttribute("aria-disabled",i.toString()),this._zoomOutButton.setAttribute("aria-disabled",r.toString())}_rotateCompassArrow(){const e=this._map;if(!e)return;const t=this.options.visualizePitch?"scale(".concat(1/Math.pow(Math.cos(e.transform.pitch*(Math.PI/180)),.5),") rotateX(").concat(e.transform.pitch,"deg) rotateZ(").concat(e.transform.angle*(180/Math.PI),"deg)"):"rotate(".concat(e.transform.angle*(180/Math.PI),"deg)");e._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=t)})}onAdd(e){return this._map=e,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),e.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&e.on("pitch",this._rotateCompassArrow),e.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new vl(e,this._compass,this.options.visualizePitch)),this._container}onRemove(){const e=this._map;e&&(this._container.remove(),this.options.showZoom&&e.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&e.off("pitch",this._rotateCompassArrow),e.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(e,t){const i=h("button",e,this._container);return i.type="button",i.addEventListener("click",t),i}_setButtonTitle(e,t){if(!this._map)return;const i=this._map._getUIString("NavigationControl.".concat(t));e.setAttribute("aria-label",i),e.firstElementChild&&e.firstElementChild.setAttribute("title",i)}},GeolocateControl:class extends e.E{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super();const i=navigator.geolocation;this.options=e.h({geolocation:i},Sl,t),e.aV(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=ls(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(e){return this._map=e,this._container=h("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){void 0!==this._geolocationWatchID&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(e){var t=this;const i=function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!!t.options.geolocation;t._supportsGeolocation=i,e(i)};void 0!==this._supportsGeolocation?e(this._supportsGeolocation):void 0!==navigator.permissions?navigator.permissions.query({name:"geolocation"}).then(e=>i("denied"!==e.state)).catch(()=>i()):i()}_isOutOfMapMaxBounds(e){const t=this._map.getMaxBounds(),i=e.coords;return!!t&&(i.longitude<t.getWest()||i.longitude>t.getEast()||i.latitude<t.getSouth()||i.latitude>t.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(t){if(this._map){if(this._isOutOfMapMaxBounds(t))return this._setErrorState(),this.fire(new e.A("outofmaxbounds",t)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=t,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(t),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(t),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new e.A("geolocate",t)),this._finish()}}_updateCamera(t){const i=new e.cd(t.coords.longitude,t.coords.latitude),r=t.coords.accuracy,n=this._map.getBearing(),o=e.h({bearing:n},this.options.fitBoundsOptions);this._map.fitBounds(i.toBounds(r),o,{geolocateSource:!0})}_updateMarker(t){if(t){const i=new e.cd(t.coords.longitude,t.coords.latitude);this._accuracyCircleMarker.setLngLat(i).addTo(this._map),this._userLocationDotMarker.setLngLat(i).addTo(this._map),this._accuracy=t.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const t=this._map.transform,i=e.c6(1,t._center.lat)*t.worldSize,r=Math.ceil(2*this._accuracy*i);this._circleElement.style.width="".concat(r,"px"),this._circleElement.style.height="".concat(r,"px")}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&"number"==typeof this._heading?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(t){if(this._map){if(this.options.trackUserLocation)if(1===t.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const e=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===t.code&&this._noTimeout)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new e.A("error",t)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(t){if(void 0!==this._map){if(this._container.addEventListener("contextmenu",e=>e.preventDefault()),this._geolocateButton=h("button","mapboxgl-ctrl-geolocate",this._container),h("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",!1===t){e.w("Geolocation support is not available so the GeolocateControl will be disabled.");const t=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",t),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",t)}else{const e=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",e),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",e)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=h("div","mapboxgl-user-location"),this._dotElement.appendChild(h("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(h("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new bl({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=h("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new bl({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",t=>{t.geolocateSource||"ACTIVE_LOCK"!==this._watchState||t.originalEvent&&"resize"===t.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new e.A("trackuserlocationend")))})}}_onDeviceOrientation(e){this._userLocationDotMarker&&(e.webkitCompassHeading?this._heading=e.webkitCompassHeading:!0===e.absolute&&(this._heading=-1*e.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return e.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.A("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.A("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.A("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let e;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(e={maximumAge:6e5,timeout:0},this._noTimeout=!0):(e=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,e),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const e=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};"undefined"!=typeof DeviceMotionEvent&&"function"==typeof DeviceMotionEvent.requestPermission?DeviceOrientationEvent.requestPermission().then(t=>{"granted"===t&&e()}).catch(console.error):e()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:cl,ScaleControl:class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=e.h({},Ll,t),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch(e){return!1}}(),e.aV(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const e=this.options.maxWidth||100,t=this._map,i=t._containerHeight/2,r=t._containerWidth/2-e/2,n=t.unproject([r,i]),o=t.unproject([r+e,i]),a=n.distanceTo(o);if("imperial"===this.options.unit){const t=3.2808*a;t>5280?this._setScale(e,t/5280,"mile"):this._setScale(e,t,"foot")}else"nautical"===this.options.unit?this._setScale(e,a/1852,"nautical-mile"):a>=1e3?this._setScale(e,a/1e3,"kilometer"):this._setScale(e,a,"meter")}_setScale(e,t,i){this._map._requestDomTask(()=>{const r=function(e){const t=Math.pow(10,"".concat(Math.floor(e)).length-1);let i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:i>=1?1:function(e){const t=Math.pow(10,Math.ceil(-Math.log(e)/Math.LN10));return Math.round(e*t)/t}(i),t*i}(t),n=r/t;this._container.innerHTML=this._isNumberFormatSupported&&"nautical-mile"!==i?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:i}).format(r):"".concat(r,"&nbsp;").concat(Tl[i]),this._container.style.width=e*n+"px"})}onAdd(e){return this._map=e,this._language=e.getLanguage(),this._container=h("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(e){this._language=e,this._update()}setUnit(e){this.options.unit=e,this._update()}},FullscreenControl:class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._fullscreen=!1,t&&t.container&&(t.container instanceof HTMLElement?this._container=t.container:e.w("Full screen control 'container' must be a DOM element.")),e.aV(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(t){return this._map=t,this._container||(this._container=this._map.getContainer()),this._controlContainer=h("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const e=this._fullscreenButton=h("button","mapboxgl-ctrl-fullscreen",this._controlContainer);h("span","mapboxgl-ctrl-icon",e).setAttribute("aria-hidden","true"),e.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const e=this._getTitle();this._fullscreenButton.setAttribute("aria-label",e),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",e)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends e.E{constructor(t){super(),this.options=e.h(Object.create(Ml),t),this._altitude=this.options.altitude,e.aV(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(t&&t.className?t.className.trim().split(/\s+/):[])}addTo(t){return this._map&&this.remove(),this._map=t,this.options.closeOnClick&&t.on("preclick",this._onClose),this.options.closeOnMove&&t.on("move",this._onClose),t.on("remove",this.remove),this._update(),t._addPopup(this),this._focusFirstElement(),this._trackPointer?(t.on("mousemove",this._onMouseEvent),t.on("mouseup",this._onMouseEvent),t._canvasContainer.classList.add("mapboxgl-track-pointer")):t.on("move",this._update),this.fire(new e.A("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const t=this._map;return t&&(t.off("move",this._update),t.off("move",this._onClose),t.off("preclick",this._onClose),t.off("click",this._onClose),t.off("remove",this.remove),t.off("mousemove",this._onMouseEvent),t.off("mouseup",this._onMouseEvent),t.off("drag",this._onMouseEvent),t._canvasContainer&&t._canvasContainer.classList.remove("mapboxgl-track-pointer"),t._removePopup(this),this._map=void 0),this.fire(new e.A("close")),this}getLngLat(){return this._lngLat}setLngLat(t){this._lngLat=e.cd.convert(t),this._pos=null,this._trackPointer=!1,this._update();const i=this._map;return i&&(i.on("move",this._update),i.off("mousemove",this._onMouseEvent),i._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}getAltitude(){return this._altitude}setAltitude(e){return this._altitude=e,this._update(),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const e=this._map;return e&&(e.off("move",this._update),e.on("mousemove",this._onMouseEvent),e.on("drag",this._onMouseEvent),e._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(e){return this.setDOMContent(document.createTextNode(e))}setHTML(e){const t=document.createDocumentFragment(),i=document.createElement("body");let r;for(i.innerHTML=e;r=i.firstChild,r;)t.appendChild(r);return this.setDOMContent(t)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(e){return this.options.maxWidth=e,this._update(),this}setDOMContent(e){let t=this._content;if(t)for(;t.hasChildNodes();)t.firstChild&&t.removeChild(t.firstChild);else t=this._content=h("div","mapboxgl-popup-content",this._container||void 0);if(t.appendChild(e),this.options.closeButton){const e=this._closeButton=h("button","mapboxgl-popup-close-button",t);e.type="button",e.setAttribute("aria-label","Close popup"),e.innerHTML='<span aria-hidden="true">&#215;</span>',e.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(e){return this._classList.add(e),this._updateClassList(),this}removeClassName(e){return this._classList.delete(e),this._updateClassList(),this}setOffset(e){return this.options.offset=e,this._update(),this}toggleClassName(e){let t;return this._classList.delete(e)?t=!1:(this._classList.add(e),t=!0),this._updateClassList(),t}_onMouseEvent(e){this._update(e.point)}_getAnchor(e){if(this.options.anchor)return this.options.anchor;const t=this._map,i=this._container,r=this._pos;if(!t||!i||!r)return"bottom";const n=i.offsetWidth,o=i.offsetHeight,a=r.x<n/2,s=r.x>t.transform.width-n/2;if(r.y+e<o)return a?"top-left":s?"top-right":"top";if(r.y>t.transform.height-o){if(a)return"bottom-left";if(s)return"bottom-right"}return a?"left":s?"right":"bottom"}_updateClassList(){const e=this._container;if(!e)return;const t=[...this._classList];t.push("mapboxgl-popup"),this._anchor&&t.push("mapboxgl-popup-anchor-".concat(this._anchor)),this._trackPointer&&t.push("mapboxgl-popup-track-pointer"),e.className=t.join(" ")}_update(t){const i=this._map,r=this._content;if(!i||!this._lngLat&&!this._trackPointer||!r)return;let n=this._container;if(n||(n=this._container=h("div","mapboxgl-popup",i.getContainer()),this._tip=h("div","mapboxgl-popup-tip",n),n.appendChild(r)),this.options.maxWidth&&n.style.maxWidth!==this.options.maxWidth&&(n.style.maxWidth=this.options.maxWidth),i.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=xl(this._lngLat,this._pos,i.transform)),!this._trackPointer||t){const r=this._pos=this._trackPointer&&t instanceof e.P?t:i.project(this._lngLat,this._altitude),n=Il(this.options.offset),o=this._anchor=this._getAnchor(n.y),a=Il(this.options.offset,o),s=r.add(a).round();i._requestDomTask(()=>{this._container&&o&&(this._container.style.transform="".concat(Cl[o]," translate(").concat(s.x,"px,").concat(s.y,"px)"))})}if(!this._marker&&i._showingGlobe()){const t=e.eK(i.transform,this._lngLat)?0:1;this._setOpacity(t)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const e=this._container.querySelector(El);e&&e.focus()}_onClose(){this.remove()}_setOpacity(e){this._container&&(this._container.style.opacity="".concat(e)),this._content&&(this._content.style.pointerEvents=e?"auto":"none")}},Marker:bl,Style:Tr,LngLat:e.cd,LngLatBounds:e.aG,Point:e.P,MercatorCoordinate:e.ac,FreeCameraOptions:Ji,Evented:e.E,config:e.e,prewarm:e.eO,clearPrewarmedResources:e.eN,get accessToken(){return e.e.ACCESS_TOKEN},set accessToken(t){e.e.ACCESS_TOKEN=t},get baseApiUrl(){return e.e.API_URL},set baseApiUrl(t){e.e.API_URL=t},get workerCount(){return e.eX.workerCount},set workerCount(t){e.eX.workerCount=t},get maxParallelImageRequests(){return e.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(t){e.e.MAX_PARALLEL_IMAGE_REQUESTS=t},clearStorage(t){e.eW(t)},get workerUrl(){return e.eV.workerUrl},set workerUrl(t){e.eV.workerUrl=t},get workerClass(){return e.eV.workerClass},set workerClass(t){e.eV.workerClass=t},get workerParams(){return e.eV.workerParams},set workerParams(t){e.eV.workerParams=t},get dracoUrl(){return e.eU()},set dracoUrl(t){e.eT(t)},get meshoptUrl(){return e.eS()},set meshoptUrl(t){e.eR(t)},setNow:e.q.setNow,restoreNow:e.q.restoreNow};return Al}),i}()},893:e=>{e.exports=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i},e.exports.__esModule=!0,e.exports.default=e.exports},896:(e,t)=>{"use strict";function i(e,t){var i=e.length;e.push(t);e:for(;0<i;){var r=i-1>>>1,n=e[r];if(!(0<o(n,t)))break e;e[r]=t,e[i]=n,i=r}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],i=e.pop();if(i!==t){e[0]=i;e:for(var r=0,n=e.length,a=n>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,i))c<n&&0>o(u,l)?(e[r]=u,e[c]=i,r=c):(e[r]=l,e[s]=i,r=s);else{if(!(c<n&&0>o(u,i)))break e;e[r]=u,e[c]=i,r=c}}}return t}function o(e,t){var i=e.sortIndex-t.sortIndex;return 0!==i?i:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,p=3,f=!1,m=!1,g=!1,y=!1,_="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function C(e){for(var t=r(u);null!==t;){if(null===t.callback)n(u);else{if(!(t.startTime<=e))break;n(u),t.sortIndex=t.expirationTime,i(c,t)}t=r(u)}}function w(e){if(g=!1,C(e),!m)if(null!==r(c))m=!0,S||(S=!0,b());else{var t=r(u);null!==t&&P(w,t.startTime-e)}}var b,S=!1,L=-1,T=5,M=-1;function E(){return!!y||!(t.unstable_now()-M<T)}function I(){if(y=!1,S){var e=t.unstable_now();M=e;var i=!0;try{e:{m=!1,g&&(g=!1,v(L),L=-1),f=!0;var o=p;try{t:{for(C(e),d=r(c);null!==d&&!(d.expirationTime>e&&E());){var a=d.callback;if("function"===typeof a){d.callback=null,p=d.priorityLevel;var s=a(d.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof s){d.callback=s,C(e),i=!0;break t}d===r(c)&&n(c),C(e)}else n(c);d=r(c)}if(null!==d)i=!0;else{var l=r(u);null!==l&&P(w,l.startTime-e),i=!1}}break e}finally{d=null,p=o,f=!1}i=void 0}}finally{i?b():S=!1}}}if("function"===typeof x)b=function(){x(I)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,k=A.port2;A.port1.onmessage=I,b=function(){k.postMessage(null)}}else b=function(){_(I,0)};function P(e,i){L=_(function(){e(t.unstable_now())},i)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var i=p;p=t;try{return e()}finally{p=i}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var i=p;p=e;try{return t()}finally{p=i}},t.unstable_scheduleCallback=function(e,n,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:n,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,i(u,e),null===r(c)&&e===r(u)&&(g?(v(L),L=-1):g=!0,P(w,o-a))):(e.sortIndex=s,i(c,e),m||f||(m=!0,S||(S=!0,b()))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var i=p;p=t;try{return e.apply(this,arguments)}finally{p=i}}}},978:(e,t,i)=>{e.exports=i(386)}},t={};function i(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,i),o.loaded=!0,o.exports}i.m=e,i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var r in t)i.o(t,r)&&!i.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce((t,r)=>(i.f[r](e,t),t),[])),i.u=e=>"static/js/"+e+".5ca8ecbe.chunk.js",i.miniCssF=e=>{},i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="boston-landway:";i.l=(r,n,o,a)=>{if(e[r])e[r].push(n);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,i.nc&&s.setAttribute("nonce",i.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[n];var d=(t,i)=>{s.onerror=s.onload=null,clearTimeout(p);var n=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),n&&n.forEach(e=>e(i)),t)return t(i)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),i.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),i.p="/boston-landway/",(()=>{var e={792:0};i.f.j=(t,r)=>{var n=i.o(e,t)?e[t]:void 0;if(0!==n)if(n)r.push(n[2]);else{var o=new Promise((i,r)=>n=e[t]=[i,r]);r.push(n[2]=o);var a=i.p+i.u(t),s=new Error;i.l(a,r=>{if(i.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,n[1](s)}},"chunk-"+t,t)}};var t=(t,r)=>{var n,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(n in s)i.o(s,n)&&(i.m[n]=s[n]);if(l)l(i)}for(t&&t(r);c<a.length;c++)o=a[c],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkboston_landway=self.webpackChunkboston_landway||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e=i(43),t=i(391);const r=e=>{e&&e instanceof Function&&i.e(453).then(i.bind(i,453)).then(t=>{let{getCLS:i,getFID:r,getFCP:n,getLCP:o,getTTFB:a}=t;i(e),r(e),n(e),o(e),a(e)})};var n,o=i(879),a=i.n(o);const s=["title","titleId"];function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},l.apply(null,arguments)}function c(t,i){let{title:r,titleId:o}=t,a=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,s);return e.createElement("svg",l({width:107,height:86,viewBox:"0 0 107 86",fill:"none",id:"svg40",ref:i,"aria-labelledby":o},a),r?e.createElement("title",{id:o},r):null,e.createElement("g",{clipPath:"url(#clip0_16_6435)",id:"g40"},e.createElement("path",{d:"M57.1527 67.3353L57.1277 66.7328C57.1139 66.4001 56.833 66.1416 56.5003 66.1553L52.5844 66.3176L48.6687 66.4799C48.336 66.4937 48.0775 66.7746 48.0913 67.1073L48.1162 67.7097M57.1527 67.3353L66.9863 66.9277C67.2326 66.9175 67.4604 67.0583 67.5614 67.2833L67.7627 67.7319C67.9529 68.1556 67.9729 68.6363 67.8184 69.0743L67.6548 69.5381C67.5728 69.7706 67.3575 69.9297 67.1111 69.9399L66.6509 69.959C66.4416 69.9677 66.2545 70.0793 66.1456 70.2583C65.2543 71.7236 60.9027 78.3442 54.9036 78.5928L51.2891 78.7426C45.29 78.9912 40.4055 72.7534 39.396 71.3669C39.2727 71.1975 39.0769 71.1017 38.8676 71.1104L38.4074 71.1295C38.1611 71.1397 37.9333 70.9989 37.8324 70.774L37.631 70.3253C37.4408 69.9016 37.4209 69.4209 37.5754 68.9829L37.7389 68.5191C37.8209 68.2866 38.0363 68.1275 38.2826 68.1173L48.1162 67.7097M57.1527 67.3353L57.2775 70.3475M57.2775 70.3475L57.2962 70.7993C57.31 71.132 57.0515 71.4129 56.7188 71.4267L48.8872 71.7513C48.5545 71.765 48.2736 71.5065 48.2598 71.1738L48.241 70.722M57.2775 70.3475L60.72 70.2048C61.1908 70.1853 61.4821 70.6772 61.2052 71.0585C60.1917 72.4541 57.921 74.9977 54.76 75.1287L51.1455 75.2785C47.9846 75.4095 45.5111 73.0625 44.3856 71.7555C44.0781 71.3984 44.3278 70.8841 44.7986 70.8646L48.241 70.722M48.1162 67.7097L48.241 70.722",stroke:"#63B281",strokeWidth:2.11035,strokeLinecap:"round",id:"path1",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{opacity:.2,d:"M72.3775 67.1782C68.9713 61.453 62.4493 57.5813 54.9631 57.5813H51.4044C43.9183 57.5813 37.3962 61.453 33.99 67.1782",stroke:"#63B281",strokeWidth:2.4483,id:"path2",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M79.1155 67.3618C84.8104 67.1258 89.0738 68.5739 89.2172 72.0341C89.3248 74.6292 93.1745 76.9609 93.1745 76.9609",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path3",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M79.1201 67.47C86.1638 67.1781 87.2902 70.1942 87.4458 73.9489C87.5625 76.7649 90.6672 78.0397 90.6672 78.0397",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path4",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M79.1201 67.47C82.4995 67.3299 85.0625 68.9867 85.2181 72.7414C85.3348 75.5574 85.9856 77.3672 85.9856 77.3672",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path5",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M79.1226 67.5344C85.104 67.2865 82.8528 71.7006 83.0069 75.4193C83.1225 78.2083 83.4948 78.9393 83.4948 78.9393",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path6",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M79.1201 67.47C83.4662 67.2899 80.0813 72.551 80.2369 76.3056C80.3536 79.1216 80.7652 81.8079 80.7652 81.8079",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path7",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M25.8457 69.5696C20.1508 69.8056 16.0218 71.6014 16.1652 75.0616C16.2727 77.6568 12.6292 80.299 12.6292 80.299",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path8",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M25.8503 69.6777C18.8067 69.9696 17.9337 73.0686 18.0893 76.8233C18.206 79.6393 15.2174 81.1667 15.2174 81.1667",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path9",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M25.8503 69.6777C22.471 69.8178 20.0538 71.681 20.2094 75.4357C20.3261 78.2516 19.8273 80.1091 19.8273 80.1091",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path10",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M25.853 69.7422C19.8716 69.9901 22.4803 74.2028 22.6344 77.9215C22.75 80.7105 22.4394 81.4697 22.4394 81.4697",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path11",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M25.8503 69.6777C21.5042 69.8578 25.3129 74.8208 25.4685 78.5755C25.5852 81.3915 25.3973 84.1026 25.3973 84.1026",stroke:"#63B281",strokeWidth:1.38222,strokeLinecap:"round",id:"path12",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M65.8923 48.8938L65.6314 50.9563C65.6041 51.172 65.7879 51.3612 65.9974 51.4197C67.0306 51.7079 68.1222 53.2686 66.3418 54.8364C65.2242 55.8205 64.0656 54.7887 63.8441 54.6406C61.5941 58.1998 59.0162 61.7144 53.5475 61.0227C48.9439 60.4403 46.4573 56.2851 45.1644 52.2778C44.913 52.3661 43.3197 52.8706 42.4824 51.6392C41.1445 49.6716 42.7859 48.4561 43.9031 48.4475C44.1205 48.4458 44.3454 48.3069 44.3726 48.0913L44.6116 46.202C44.864 45.4732 47.6837 42.047 55.8176 43.0759C63.9516 44.1047 65.8293 48.1251 65.8923 48.8938Z",fill:"#F3F3F0",id:"path13",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M44.4416 48.897C43.4075 48.5259 41.0854 49.7905 42.6046 52.0246C43.4419 53.256 44.821 52.5452 45.0724 52.4569C45.9899 59.4319 51.2181 60.9829 53.4475 61.2649C55.677 61.5469 61.1267 61.3465 63.7521 54.8197C63.9736 54.9678 65.1322 55.9996 66.2498 55.0155C68.2774 53.23 66.3433 51.4271 65.2494 51.5289M69.6908 45.8156C70.7562 37.3926 65.7348 31.7799 57.3119 30.7145C48.8889 29.6491 42.6281 33.8347 41.5627 42.2577C41.4638 43.0397 41.4254 43.8154 41.4441 44.5801C41.4781 45.9782 42.9154 47.7883 43.8113 48.8172C43.9465 48.9725 44.2017 48.8949 44.2275 48.6906L44.5196 46.3811C44.772 45.6523 47.6292 41.9293 55.7632 42.9582C63.8971 43.987 65.7374 48.3042 65.8003 49.0729L65.5633 50.9461C65.523 51.2651 65.9072 51.4566 66.1376 51.2322L67.6469 49.7622C68.4239 49.0055 69.1129 48.1238 69.4365 47.0885C69.5401 46.7573 69.6189 46.3845 69.6908 45.8156Z",stroke:"#63B281",strokeWidth:2.03903,id:"path14",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M59.0098 50.7502L58.983 50.9618",stroke:"#63B281",strokeWidth:1.75516,strokeLinecap:"round",id:"path15",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M51.3931 49.7869L51.3663 49.9984",stroke:"#63B281",strokeWidth:1.75516,strokeLinecap:"round",id:"path16",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M55.9868 55.957V55.957C54.9897 56.2427 53.9192 56.1072 53.0247 55.5823V55.5823",stroke:"#63B281",strokeWidth:1.27959,strokeLinecap:"round",id:"path17",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M56.9598 56.8191V56.8191C56.598 56.2453 56.5019 55.543 56.6963 54.8931V54.8931",stroke:"#63B281",strokeWidth:1.27959,strokeLinecap:"round",id:"path18",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M51.8746 56.1757V56.1757C52.3679 55.7101 52.6358 55.0539 52.6094 54.376V54.376",stroke:"#63B281",strokeWidth:1.27959,strokeLinecap:"round",id:"path19",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M53.4567 50.8808L54.2276 49.8127C54.7062 49.1496 55.7317 49.2916 56.012 50.0599L56.4721 51.3207C56.6949 51.9315 56.402 52.61 55.8046 52.8668C55.1263 53.1583 54.3354 53.0625 53.7401 52.6258C53.1869 52.22 53.0552 51.4371 53.4567 50.8808Z",fill:"#63B281",id:"path20",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M56.4795 30.72L56.1007 35.1385C56.0552 35.6696 56.4369 36.1419 56.9657 36.2088V36.2088C57.4945 36.2757 57.9818 35.9133 58.0699 35.3876L58.8033 31.0139",stroke:"#63B281",strokeWidth:1.70611,id:"path21",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M56.4878 30.6545L56.109 35.0731C56.0635 35.6042 56.4452 36.0765 56.974 36.1434V36.1434C57.5028 36.2102 57.9901 35.8479 58.0782 35.3222L58.8116 30.9485",stroke:"#63B281",strokeWidth:1.70611,id:"path22",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M56.3406 31.0659L57.9997 22.7791C58.0582 22.4868 58.3326 22.2894 58.6283 22.3268V22.3268C58.924 22.3642 59.1406 22.6237 59.1245 22.9214L58.6679 31.3603",stroke:"#63B281",strokeWidth:1.70611,id:"path23",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M49.6785 31.5935L50.4716 36.1251C50.5695 36.6842 51.092 37.0658 51.6544 36.9889V36.9889C52.2171 36.9119 52.6179 36.4035 52.5616 35.8384L52.0648 30.8559",stroke:"#63B281",strokeWidth:1.70611,id:"path24",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M63.0707 32.3074L61.3697 36.9525C61.1745 37.4858 61.4361 38.0779 61.9619 38.2926V38.2926C62.4874 38.5072 63.0885 38.2677 63.3225 37.7505L65.219 33.5591",stroke:"#63B281",strokeWidth:1.70611,id:"path25",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M68.2745 36.5839L65.8594 40.1522C65.5568 40.5992 65.6565 41.2048 66.0864 41.5313V41.5313C66.5146 41.8564 67.1219 41.7918 67.4721 41.3839L69.4586 39.0704",stroke:"#63B281",strokeWidth:1.70611,id:"path26",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M46.0559 33.6982L47.5347 37.8344C47.7165 38.3427 47.4691 38.9044 46.9715 39.1135V39.1135C46.4758 39.3217 45.9038 39.108 45.6661 38.6258L44.239 35.7297",stroke:"#63B281",strokeWidth:1.70611,id:"path27",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M45.64 42.2032C46.9179 40.8939 49.9765 39.5858 56.1243 40.3635C62.2722 41.1411 64.9087 43.1696 65.8203 44.7558",stroke:"#63B281",strokeWidth:2.03903,strokeLinecap:"round",id:"path28",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M66.5718 71.6034L66.4441 71.6153C65.9167 71.6643 65.4254 71.3424 65.2598 70.8393L64.7206 69.2012C64.6878 69.1016 64.669 68.9979 64.6647 68.8931L64.6074 67.5126L64.6216 65.8111C64.6257 65.3081 64.9603 64.8677 65.4438 64.7287L69.5525 63.548C69.7103 63.5027 69.876 63.4921 70.0382 63.5169L72.8919 63.9539C73.2307 64.0058 73.5279 64.2078 73.7008 64.5038L74.6047 66.0512C74.6982 66.2113 74.7511 66.3919 74.7587 66.5771L74.8133 67.8942L74.8772 69.4352C74.9023 70.0419 74.3777 70.5564 73.7054 70.5842C73.0331 70.6121 72.4677 70.1428 72.4425 69.5361L72.4653 70.0868C72.4905 70.6936 71.9658 71.208 71.2935 71.2359C70.6212 71.2637 70.0558 70.7944 70.0307 70.1877L70.0381 70.3685C70.0633 70.9753 69.5387 71.4897 68.8663 71.5176C68.194 71.5454 67.6118 70.67 67.5866 70.0632L67.6016 70.4253C67.6267 71.0295 67.174 71.5474 66.5718 71.6034Z",fill:"#F3F3F0",id:"path29",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M66.4441 71.6153L66.5164 72.3935L66.5164 72.3935L66.4441 71.6153ZM66.5718 71.6034L66.4995 70.8251L66.4995 70.8251L66.5718 71.6034ZM66.7284 68.2292C66.7105 67.7979 67.0456 67.4338 67.4769 67.4159C67.9082 67.398 68.2724 67.7332 68.2902 68.1645L66.7284 68.2292ZM64.6074 67.5126L63.8265 67.5449L63.8257 67.5255L63.8259 67.5061L64.6074 67.5126ZM64.6216 65.8111L63.84 65.8046L63.84 65.8046L64.6216 65.8111ZM73.7008 64.5038L73.0259 64.898L73.7008 64.5038ZM74.6047 66.0512L73.9297 66.4454L74.6047 66.0512ZM69.163 68.1283C69.1452 67.697 69.4803 67.3329 69.9116 67.315C70.3429 67.2971 70.707 67.6323 70.7249 68.0636L69.163 68.1283ZM71.5977 68.0274C71.5798 67.5961 71.915 67.232 72.3463 67.2141C72.7776 67.1962 73.1417 67.5314 73.1596 67.9627L71.5977 68.0274ZM74.8133 67.8942L74.0324 67.9265L74.0324 67.9265L74.8133 67.8942ZM74.7587 66.5771L75.5397 66.5448L75.5397 66.5448L74.7587 66.5771ZM65.4438 64.7287L65.2279 63.9775L65.2279 63.9775L65.4438 64.7287ZM69.5525 63.548L69.7684 64.2992L69.7684 64.2992L69.5525 63.548ZM70.0382 63.5169L70.1565 62.7443L70.0382 63.5169ZM72.8919 63.9539L73.0102 63.1813L73.0102 63.1813L72.8919 63.9539ZM64.7206 69.2012L65.4631 68.9568L65.4631 68.9568L64.7206 69.2012ZM65.2598 70.8393L64.5174 71.0837L64.5174 71.0837L65.2598 70.8393ZM66.3717 70.837L66.4995 70.8251L66.6442 72.3816L66.5164 72.3935L66.3717 70.837ZM66.8207 70.4576L66.8057 70.0956L68.3676 70.0309L68.3826 70.3929L66.8207 70.4576ZM66.8057 70.0956L66.7284 68.2292L68.2902 68.1645L68.3676 70.0309L66.8057 70.0956ZM63.8259 67.5061L63.84 65.8046L65.4031 65.8176L65.389 67.519L63.8259 67.5061ZM74.3757 64.1096L75.2796 65.657L73.9297 66.4454L73.0259 64.898L74.3757 64.1096ZM69.2572 70.4009L69.2497 70.2201L70.8116 70.1554L70.8191 70.3362L69.2572 70.4009ZM69.2497 70.2201L69.163 68.1283L70.7249 68.0636L70.8116 70.1554L69.2497 70.2201ZM68.834 70.7366C69.1523 70.7234 69.2614 70.5028 69.2572 70.4009L70.8191 70.3362C70.8652 71.4477 69.925 72.256 68.8987 72.2985L68.834 70.7366ZM68.3676 70.0309C68.3719 70.1346 68.4424 70.3502 68.5944 70.5404C68.7539 70.7401 68.854 70.7358 68.834 70.7366L68.8987 72.2985C68.2064 72.3272 67.6791 71.8991 67.3732 71.5163C67.0598 71.1241 66.8265 70.5986 66.8057 70.0956L68.3676 70.0309ZM71.6844 70.1192L71.6616 69.5685L73.2235 69.5037L73.2463 70.0545L71.6844 70.1192ZM71.6616 69.5685L71.5977 68.0274L73.1596 67.9627L73.2235 69.5037L71.6616 69.5685ZM71.2612 70.4549C71.5795 70.4417 71.6886 70.2211 71.6844 70.1192L73.2463 70.0545C73.2923 71.166 72.3522 71.9743 71.3259 72.0168L71.2612 70.4549ZM70.8116 70.1554C70.8158 70.2573 70.9428 70.4681 71.2612 70.4549L71.3259 72.0168C70.2996 72.0593 69.2958 71.3316 69.2497 70.2201L70.8116 70.1554ZM73.673 69.8033C73.9914 69.7901 74.1005 69.5695 74.0962 69.4676L75.6581 69.4028C75.7042 70.5143 74.764 71.3226 73.7377 71.3652L73.673 69.8033ZM73.2235 69.5037C73.2277 69.6057 73.3547 69.8165 73.673 69.8033L73.7377 71.3652C72.7115 71.4077 71.7076 70.68 71.6616 69.5685L73.2235 69.5037ZM74.0962 69.4676L74.0324 67.9265L75.5943 67.8618L75.6581 69.4028L74.0962 69.4676ZM75.5397 66.5448L75.5943 67.8618L74.0324 67.9265L73.9778 66.6095L75.5397 66.5448ZM65.2279 63.9775L69.3366 62.7968L69.7684 64.2992L65.6596 65.48L65.2279 63.9775ZM70.1565 62.7443L73.0102 63.1813L72.7736 64.7265L69.9199 64.2895L70.1565 62.7443ZM65.3884 67.4802L65.4456 68.8607L63.8837 68.9255L63.8265 67.5449L65.3884 67.4802ZM65.4631 68.9568L66.0023 70.595L64.5174 71.0837L63.9782 69.4456L65.4631 68.9568ZM65.4456 68.8607C65.4469 68.8934 65.4528 68.9258 65.4631 68.9568L63.9782 69.4456C63.9228 69.2774 63.891 69.1024 63.8837 68.9255L65.4456 68.8607ZM69.3366 62.7968C69.6029 62.7203 69.8826 62.7024 70.1565 62.7443L69.9199 64.2895C69.8693 64.2818 69.8176 64.2851 69.7684 64.2992L69.3366 62.7968ZM75.2796 65.657C75.4374 65.9273 75.5267 66.232 75.5397 66.5448L73.9778 66.6095C73.9754 66.5517 73.9589 66.4954 73.9297 66.4454L75.2796 65.657ZM73.0259 64.898C72.972 64.8057 72.8792 64.7427 72.7736 64.7265L73.0102 63.1813C73.5821 63.2688 74.0839 63.61 74.3757 64.1096L73.0259 64.898ZM63.84 65.8046C63.847 64.9555 64.4117 64.2121 65.2279 63.9775L65.6596 65.48C65.5088 65.5233 65.4045 65.6607 65.4031 65.8176L63.84 65.8046ZM66.4995 70.8251C66.6873 70.8077 66.8285 70.6461 66.8207 70.4576L68.3826 70.3929C68.4249 71.4128 67.6607 72.2871 66.6442 72.3816L66.4995 70.8251ZM66.5164 72.3935C65.6262 72.4763 64.7969 71.933 64.5174 71.0837L66.0023 70.595C66.0539 70.7519 66.2072 70.8523 66.3717 70.837L66.5164 72.3935Z",fill:"#63B281",id:"path30",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M77.2016 65.4358L76.0706 66.1875C75.9465 66.27 75.8744 66.4114 75.8806 66.5604L75.9756 68.8545C75.9818 69.0035 76.0653 69.1384 76.1959 69.2104L77.3852 69.8659C78.113 70.2671 78.9997 69.7183 78.9653 68.8879L78.8572 66.2798C78.8228 65.4494 77.8938 64.9758 77.2016 65.4358Z",fill:"#63B281",stroke:"#63B281",strokeWidth:1.49285,strokeLinecap:"round",id:"path31",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M38.7792 72.8197L39.0164 72.8216C39.5409 72.8258 40.0001 72.4703 40.1274 71.9615L40.5551 70.2528C40.5815 70.1473 40.5926 70.0386 40.5881 69.9299L40.5306 68.5424L40.3711 66.8327C40.3241 66.329 39.9497 65.9171 39.4528 65.8223L35.0116 64.9754C34.8563 64.9458 34.6964 64.9489 34.5424 64.9847L31.5505 65.6781C31.22 65.7547 30.941 65.975 30.7899 66.2787L29.9734 67.9199C29.888 68.0914 29.8475 68.2816 29.8554 68.473L29.9101 69.7938L29.9745 71.3477C29.9999 71.9595 30.5913 72.4318 31.2954 72.4026C31.9995 72.3735 32.5498 71.8538 32.5244 71.242L32.5475 71.7974C32.5728 72.4092 33.1642 72.8815 33.8683 72.8523C34.5725 72.8231 35.1227 72.3035 35.0974 71.6917L35.1049 71.874C35.1303 72.4858 35.7217 72.9581 36.4258 72.9289C37.1299 72.8998 37.6632 71.9706 37.6379 71.3588L37.6533 71.7308C37.6784 72.3358 38.1736 72.8148 38.7792 72.8197Z",fill:"#F3F3F0",id:"path32",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M39.0164 72.8216L39.0226 72.04L39.0226 72.04L39.0164 72.8216ZM38.7792 72.8197L38.7729 73.6013L38.7729 73.6013L38.7792 72.8197ZM38.3408 69.4444C38.3229 69.0131 37.9588 68.678 37.5275 68.6958C37.0962 68.7137 36.7611 69.0778 36.7789 69.5091L38.3408 69.4444ZM40.5306 68.5424L41.3116 68.51L41.3108 68.4899L41.3089 68.4698L40.5306 68.5424ZM40.3711 66.8327L41.1493 66.76L41.1493 66.76L40.3711 66.8327ZM30.7899 66.2787L31.4897 66.6269L30.7899 66.2787ZM29.9734 67.9199L29.2736 67.5718L29.2736 67.5718L29.9734 67.9199ZM35.7909 69.5501C35.773 69.1188 35.4089 68.7836 34.9776 68.8015C34.5463 68.8194 34.2111 69.1835 34.229 69.6148L35.7909 69.5501ZM33.241 69.6558C33.2231 69.2245 32.859 68.8893 32.4277 68.9072C31.9964 68.9251 31.6612 69.2892 31.6791 69.7205L33.241 69.6558ZM29.9101 69.7938L30.6911 69.7614L30.6911 69.7614L29.9101 69.7938ZM29.8554 68.473L29.0745 68.5053L29.0745 68.5053L29.8554 68.473ZM39.4528 65.8223L39.5992 65.0546L39.5992 65.0546L39.4528 65.8223ZM35.0116 64.9754L34.8652 65.7432L34.8652 65.7432L35.0116 64.9754ZM34.5424 64.9847L34.3659 64.2232L34.3659 64.2232L34.5424 64.9847ZM31.5505 65.6781L31.7269 66.4395L31.7269 66.4395L31.5505 65.6781ZM40.5551 70.2528L41.3133 70.4426L41.3133 70.4426L40.5551 70.2528ZM40.1274 71.9615L39.3692 71.7717L39.3692 71.7717L40.1274 71.9615ZM39.0226 72.04L38.7854 72.0381L38.7729 73.6013L39.0101 73.6032L39.0226 72.04ZM38.4342 71.6984L38.4188 71.3264L36.8569 71.3911L36.8723 71.7631L38.4342 71.6984ZM38.4188 71.3264L38.3408 69.4444L36.7789 69.5091L36.8569 71.3911L38.4188 71.3264ZM41.3089 68.4698L41.1493 66.76L39.5929 66.9053L39.7524 68.615L41.3089 68.4698ZM30.0901 65.9306L29.2736 67.5718L30.6731 68.2681L31.4897 66.6269L30.0901 65.9306ZM35.8859 71.8417L35.8783 71.6593L34.3164 71.7241L34.324 71.9064L35.8859 71.8417ZM35.8783 71.6593L35.7909 69.5501L34.229 69.6148L34.3164 71.7241L35.8783 71.6593ZM36.3934 72.148C36.2234 72.155 36.0857 72.1007 35.9986 72.0311C35.9131 71.9629 35.888 71.8933 35.8859 71.8417L34.324 71.9064C34.3713 73.0489 35.4294 73.7525 36.4582 73.7099L36.3934 72.148ZM36.8569 71.3911C36.861 71.4892 36.8082 71.7091 36.6646 71.9148C36.5172 72.1259 36.4025 72.1476 36.3934 72.148L36.4582 73.7099C37.1532 73.6811 37.6572 73.2237 37.9462 72.8098C38.2389 72.3907 38.4401 71.8401 38.4188 71.3264L36.8569 71.3911ZM33.3284 71.765L33.3054 71.2097L31.7435 71.2744L31.7665 71.8297L33.3284 71.765ZM33.3054 71.2097L33.241 69.6558L31.6791 69.7205L31.7435 71.2744L33.3054 71.2097ZM33.836 72.0714C33.666 72.0784 33.5282 72.024 33.4411 71.9545C33.3557 71.8862 33.3305 71.8166 33.3284 71.765L31.7665 71.8297C31.8139 72.9723 32.8719 73.6759 33.9007 73.6332L33.836 72.0714ZM34.3164 71.7241C34.3186 71.7757 34.2993 71.8471 34.2198 71.9222C34.1387 71.9987 34.006 72.0643 33.836 72.0714L33.9007 73.6332C34.9294 73.5906 35.9257 72.8019 35.8783 71.6593L34.3164 71.7241ZM31.263 71.6217C31.093 71.6287 30.9553 71.5744 30.8682 71.5048C30.7828 71.4366 30.7576 71.367 30.7555 71.3153L29.1936 71.3801C29.2409 72.5226 30.299 73.2262 31.3278 73.1836L31.263 71.6217ZM31.7435 71.2744C31.7456 71.326 31.7264 71.3975 31.6469 71.4725C31.5658 71.5491 31.433 71.6147 31.263 71.6217L31.3278 73.1836C32.3565 73.141 33.3527 72.3522 33.3054 71.2097L31.7435 71.2744ZM30.7555 71.3153L30.6911 69.7614L29.1292 69.8262L29.1936 71.3801L30.7555 71.3153ZM29.0745 68.5053L29.1292 69.8262L30.6911 69.7614L30.6363 68.4406L29.0745 68.5053ZM39.5992 65.0546L35.158 64.2076L34.8652 65.7432L39.3064 66.5901L39.5992 65.0546ZM34.3659 64.2232L31.374 64.9166L31.7269 66.4395L34.7188 65.7461L34.3659 64.2232ZM39.7497 68.5748L39.8072 69.9623L41.3691 69.8976L41.3116 68.51L39.7497 68.5748ZM39.7969 70.063L39.3692 71.7717L40.8856 72.1513L41.3133 70.4426L39.7969 70.063ZM39.8072 69.9623C39.8086 69.9962 39.8051 70.0301 39.7969 70.063L41.3133 70.4426C41.3579 70.2645 41.3767 70.081 41.3691 69.8976L39.8072 69.9623ZM35.158 64.2076C34.8958 64.1576 34.626 64.1629 34.3659 64.2232L34.7188 65.7461C34.7669 65.7349 34.8168 65.734 34.8652 65.7432L35.158 64.2076ZM29.2736 67.5718C29.1296 67.8612 29.0611 68.1824 29.0745 68.5053L30.6363 68.4406C30.6339 68.3809 30.6465 68.3216 30.6731 68.2681L29.2736 67.5718ZM31.4897 66.6269C31.5368 66.5321 31.6238 66.4634 31.7269 66.4395L31.374 64.9166C30.8161 65.0459 30.3452 65.4178 30.0901 65.9306L31.4897 66.6269ZM41.1493 66.76C41.07 65.9098 40.438 65.2145 39.5992 65.0546L39.3064 66.5901C39.4614 66.6197 39.5782 66.7482 39.5929 66.9053L41.1493 66.76ZM38.7854 72.0381C38.5965 72.0366 38.442 71.8871 38.4342 71.6984L36.8723 71.7631C36.9147 72.7845 37.7507 73.5931 38.7729 73.6013L38.7854 72.0381ZM39.0101 73.6032C39.8955 73.6102 40.6706 73.0102 40.8856 72.1513L39.3692 71.7717C39.3295 71.9304 39.1862 72.0413 39.0226 72.04L39.0101 73.6032Z",fill:"#63B281",id:"path33",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M27.3802 67.5004L28.5695 68.1559C28.7001 68.2279 28.7836 68.3628 28.7898 68.5118L28.8848 70.8059C28.891 70.9549 28.8189 71.0963 28.6948 71.1788L27.5638 71.9305C26.8717 72.3905 25.9426 71.9169 25.9082 71.0866L25.8001 68.4784C25.7657 67.648 26.6524 67.0992 27.3802 67.5004Z",fill:"#63B281",stroke:"#63B281",strokeWidth:1.49285,strokeLinecap:"round",id:"path34",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M54.0135 74.1652L52.6913 74.22L51.3407 74.276C51.2845 74.2783 51.2293 74.2944 51.1783 74.3232L50.4159 74.754C50.2674 74.838 50.169 75.0208 50.16 75.2294L49.9641 79.7941C49.9551 80.0043 50.0384 80.2058 50.1803 80.317L51.1179 81.0518C51.2451 81.1515 51.3263 81.3249 51.3341 81.5139L51.7079 90.5324C51.7214 90.8581 51.9963 91.1112 52.322 91.0977L54.4844 91.0081C54.8101 90.9946 55.0632 90.7196 55.0497 90.3939L54.6747 81.3451C54.6676 81.1724 54.7364 81.0052 54.8632 80.8878L55.7196 80.0939C55.8591 79.9645 55.9278 79.7758 55.9039 79.587L55.3246 75.0038C55.299 74.8016 55.171 74.6269 54.9859 74.5417L54.2849 74.2188C54.1999 74.1797 54.1069 74.1614 54.0135 74.1652Z",fill:"#63B281",stroke:"#63B281",strokeWidth:1.77074,id:"path35",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M45.3132 46.8684L46.203 53.4299",stroke:"#63B281",strokeWidth:2.13448,strokeLinecap:"round",id:"path36",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M65.8364 49.4644L63.3409 55.5976",stroke:"#63B281",strokeWidth:2.13448,strokeLinecap:"round",id:"path37",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M10.1006 8.10404C17.5648 17.8076 33.3464 21.6463 45.6091 16.1014C57.8718 10.5566 78.2385 4.15865 86.3425 8.74384C95.2709 13.7954 95.193 25.6983 84.8497 31.5631",stroke:"#63B281",strokeWidth:3.19896,strokeLinecap:"round",strokeDasharray:"1.49 5.54",id:"path38",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M34.8511 33.5076C25.7874 25.8301 16.0839 29.9887 11.1788 34.1474C6.27372 38.306 1.68851 57.7131 14.2711 59.8457C24.3372 61.5518 34.8511 56.6467 34.8511 56.6467",stroke:"#63B281",strokeWidth:3.19896,strokeLinecap:"round",strokeDasharray:"1.49 5.54",id:"path39",style:{stroke:"#007191",strokeOpacity:1}}),e.createElement("path",{d:"M76.7456 50.2239C85.8093 47.3448 91.994 48.0912 94.5532 54.1693C96.6005 59.0317 94.4821 64.1571 93.1669 66.112",stroke:"#63B281",strokeWidth:3.19896,strokeLinecap:"round",strokeDasharray:"1.49 5.54",id:"path40",style:{stroke:"#007191",strokeOpacity:1}})),n||(n=e.createElement("defs",{id:"defs40"},e.createElement("clipPath",{id:"clip0_16_6435"},e.createElement("rect",{width:106.632,height:85.3057,fill:"white",transform:"translate(0.183838)",id:"rect40"})))))}const u=e.forwardRef(c),h=i.p+"static/media/Icon_LTS1.c5233453dafa8ef5010b9e72486e9a0e.svg";var d,p,f,m;const g=["title","titleId"];function y(){return y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},y.apply(null,arguments)}function _(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,g);return e.createElement("svg",y({width:107,height:86,viewBox:"0 0 107 86",fill:"none",id:"svg28",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,e.createElement("g",{clipPath:"url(#clip0_16_6444)",id:"g28"},e.createElement("path",{opacity:.2,d:"M87.3061 78.0546V78.0546C87.3061 63.9207 75.8483 52.4629 61.7144 52.4629H44.6532C30.5193 52.4629 19.0615 63.9207 19.0615 78.0546V78.0546",stroke:"#DDA34E",strokeWidth:2.4483,id:"path1",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("rect",{x:71.7769,y:66.6453,width:3.40171,height:4.86392,rx:1.70085,transform:"rotate(25.5145 71.7769 66.6453)",fill:"#F8F8F8",stroke:"#DDA34E",strokeWidth:1.85548,id:"rect1",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("rect",{width:3.40171,height:4.86392,rx:1.70085,transform:"matrix(-0.902476 0.43074 0.43074 0.902476 34.1433 66.6453)",fill:"#F8F8F8",stroke:"#DDA34E",strokeWidth:1.85548,id:"rect2",style:{stroke:"#62c8d3",strokeOpacity:1}}),d||(d=e.createElement("path",{d:"M75.5338 74.107L74.5088 73.161C73.8485 72.5517 73.7196 71.5569 74.2029 70.7995L76.2206 67.6369C76.3162 67.487 76.3898 67.3242 76.4391 67.1534L76.931 65.4489C77.1096 64.83 77.5964 64.3481 78.2171 64.1756L82.4633 62.9962C82.9659 62.8566 83.504 62.9349 83.9458 63.2121L90.0681 67.052C90.299 67.1969 90.4951 67.3907 90.6426 67.6199L93.048 71.3584C93.3782 71.8715 93.4349 72.5143 93.1998 73.0774L91.7545 76.5381C91.6613 76.7613 91.5254 76.9641 91.3544 77.1351L89.6325 78.857L87.7236 80.7659C86.9721 81.5174 85.7535 81.5174 85.002 80.7659C84.2504 80.0143 84.2504 78.7958 85.002 78.0442L84.3198 78.7264C83.5682 79.478 82.3497 79.478 81.5981 78.7264C80.8466 77.9748 80.8466 76.7563 81.5981 76.0047L81.3742 76.2287C80.6226 76.9803 79.4041 76.9803 78.6525 76.2287C77.901 75.4771 78.4041 73.7555 79.1557 73.0039L78.1042 74.0554C77.4 74.7595 76.2656 74.7823 75.5338 74.107Z",fill:"#F8F8F8",id:"path2"})),e.createElement("path",{d:"M74.5088 73.161L75.1379 72.4792L75.1379 72.4792L74.5088 73.161ZM75.5338 74.107L74.9046 74.7887L74.9046 74.7887L75.5338 74.107ZM80.8116 70.036C81.1739 69.6737 81.7613 69.6737 82.1236 70.036C82.4859 70.3983 82.4859 70.9857 82.1236 71.348L80.8116 70.036ZM78.2171 64.1756L77.9688 63.2818L77.9688 63.2818L78.2171 64.1756ZM82.4633 62.9962L82.215 62.1023L82.215 62.1023L82.4633 62.9962ZM93.1998 73.0774L94.0559 73.4349L93.1998 73.0774ZM91.7545 76.5381L90.8985 76.1806L90.8985 76.1806L91.7545 76.5381ZM83.5332 72.7576C83.8955 72.3953 84.4829 72.3953 84.8452 72.7576C85.2075 73.1199 85.2075 73.7074 84.8452 74.0697L83.5332 72.7576ZM86.2549 75.4793C86.6172 75.117 87.2046 75.117 87.5669 75.4793C87.9292 75.8416 87.9292 76.429 87.5669 76.7913L86.2549 75.4793ZM89.6325 78.857L88.9765 78.2009L88.9765 78.2009L89.6325 78.857ZM91.3544 77.1351L92.0104 77.7911L92.0104 77.7911L91.3544 77.1351ZM83.9458 63.2121L83.4529 63.998L83.9458 63.2121ZM90.0681 67.052L90.561 66.2661L90.0681 67.052ZM90.6426 67.6199L91.4228 67.1179L91.4228 67.1179L90.6426 67.6199ZM93.048 71.3584L92.2678 71.8603L93.048 71.3584ZM76.931 65.4489L77.8224 65.7062L77.8224 65.7062L76.931 65.4489ZM76.4391 67.1534L77.3305 67.4106L77.3304 67.4106L76.4391 67.1534ZM76.2206 67.6369L77.0027 68.1358L77.0027 68.1359L76.2206 67.6369ZM74.2029 70.7995L74.985 71.2985L74.985 71.2985L74.2029 70.7995ZM75.1379 72.4792L76.163 73.4252L74.9046 74.7887L73.8796 73.8428L75.1379 72.4792ZM77.4482 73.3994L78.4997 72.3479L79.8117 73.6599L78.7602 74.7114L77.4482 73.3994ZM78.4997 72.3479L80.8116 70.036L82.1236 71.348L79.8117 73.6599L78.4997 72.3479ZM77.9688 63.2818L82.215 62.1023L82.7116 63.8901L78.4654 65.0695L77.9688 63.2818ZM94.0559 73.4349L92.6106 76.8956L90.8985 76.1806L92.3437 72.7199L94.0559 73.4349ZM80.7182 75.5727L80.9421 75.3487L82.2541 76.6607L82.0302 76.8847L80.7182 75.5727ZM80.9421 75.3487L83.5332 72.7576L84.8452 74.0697L82.2541 76.6607L80.9421 75.3487ZM79.3085 75.5727C79.6978 75.9619 80.3289 75.9619 80.7182 75.5727L82.0302 76.8847C80.9163 77.9986 79.1104 77.9986 77.9965 76.8847L79.3085 75.5727ZM79.8117 73.6599C79.5862 73.8854 79.3456 74.3291 79.2495 74.8012C79.1464 75.308 79.2631 75.5273 79.3085 75.5727L77.9965 76.8847C77.2904 76.1786 77.2828 75.1612 77.4313 74.4314C77.5868 73.6669 77.9736 72.8739 78.4997 72.3479L79.8117 73.6599ZM83.6638 78.0704L84.346 77.3882L85.658 78.7002L84.9758 79.3824L83.6638 78.0704ZM84.346 77.3882L86.2549 75.4793L87.5669 76.7913L85.658 78.7002L84.346 77.3882ZM82.2541 78.0704C82.6434 78.4596 83.2745 78.4596 83.6638 78.0704L84.9758 79.3824C83.8619 80.4963 82.056 80.4963 80.9421 79.3824L82.2541 78.0704ZM82.2541 76.6607C81.8649 77.05 81.8649 77.6811 82.2541 78.0704L80.9421 79.3824C79.8283 78.2685 79.8283 76.4626 80.9421 75.3487L82.2541 76.6607ZM85.658 80.1098C86.0473 80.4991 86.6784 80.4991 87.0676 80.1098L88.3797 81.4219C87.2658 82.5357 85.4598 82.5357 84.346 81.4219L85.658 80.1098ZM85.658 78.7002C85.2687 79.0895 85.2687 79.7206 85.658 80.1098L84.346 81.4219C83.2321 80.308 83.2321 78.5021 84.346 77.3882L85.658 78.7002ZM87.0676 80.1098L88.9765 78.2009L90.2885 79.513L88.3797 81.4219L87.0676 80.1098ZM92.0104 77.7911L90.2885 79.513L88.9765 78.2009L90.6984 76.4791L92.0104 77.7911ZM84.4388 62.4261L90.561 66.2661L89.5751 67.838L83.4529 63.998L84.4388 62.4261ZM91.4228 67.1179L93.8282 70.8564L92.2678 71.8603L89.8624 68.1219L91.4228 67.1179ZM77.8224 65.7062L77.3305 67.4106L75.5477 66.8961L76.0396 65.1917L77.8224 65.7062ZM77.0027 68.1359L74.985 71.2985L73.4208 70.3005L75.4385 67.1379L77.0027 68.1359ZM77.3304 67.4106C77.2565 67.6668 77.1461 67.9111 77.0027 68.1358L75.4385 67.1379C75.4863 67.0629 75.5231 66.9815 75.5477 66.8961L77.3304 67.4106ZM90.561 66.2661C90.9073 66.4833 91.2016 66.7741 91.4228 67.1179L89.8624 68.1219C89.7886 68.0073 89.6906 67.9104 89.5751 67.838L90.561 66.2661ZM92.6106 76.8956C92.4708 77.2304 92.2669 77.5346 92.0104 77.7911L90.6984 76.4791C90.7839 76.3936 90.8519 76.2922 90.8985 76.1806L92.6106 76.8956ZM92.3437 72.7199C92.4613 72.4383 92.4329 72.1169 92.2678 71.8603L93.8282 70.8564C94.3235 71.6261 94.4086 72.5902 94.0559 73.4349L92.3437 72.7199ZM82.215 62.1023C82.9688 61.8929 83.776 62.0104 84.4388 62.4261L83.4529 63.998C83.2319 63.8595 82.9629 63.8203 82.7116 63.8901L82.215 62.1023ZM76.163 73.4252C76.5289 73.7628 77.0961 73.7515 77.4482 73.3994L78.7602 74.7114C77.704 75.7676 76.0024 75.8017 74.9046 74.7887L76.163 73.4252ZM73.8796 73.8428C72.8892 72.9289 72.6959 71.4366 73.4208 70.3005L74.985 71.2985C74.7434 71.6772 74.8078 72.1746 75.1379 72.4792L73.8796 73.8428ZM78.4654 65.0695C78.1551 65.1557 77.9117 65.3967 77.8224 65.7062L76.0396 65.1917C76.3076 64.2633 77.0378 63.5404 77.9688 63.2818L78.4654 65.0695Z",fill:"#DDA34E",id:"path3",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),p||(p=e.createElement("path",{d:"M30.3864 74.107L31.4114 73.161C32.0717 72.5517 32.2005 71.5569 31.7173 70.7995L29.6996 67.6369C29.6039 67.487 29.5304 67.3242 29.4811 67.1534L28.9892 65.4489C28.8106 64.83 28.3237 64.3481 27.7031 64.1756L23.4569 62.9962C22.9543 62.8566 22.4162 62.9349 21.9744 63.2121L15.8521 67.052C15.6212 67.1969 15.4251 67.3907 15.2776 67.6199L12.8722 71.3584C12.542 71.8715 12.4852 72.5143 12.7204 73.0774L14.1656 76.5381C14.2588 76.7613 14.3948 76.9641 14.5658 77.1351L16.2876 78.857L18.1965 80.7659C18.9481 81.5174 20.1666 81.5174 20.9182 80.7659C21.6697 80.0143 21.6697 78.7958 20.9182 78.0442L21.6004 78.7264C22.3519 79.478 23.5705 79.478 24.322 78.7264C25.0736 77.9748 25.0736 76.7563 24.322 76.0047L24.546 76.2287C25.2976 76.9803 26.5161 76.9803 27.2677 76.2287C28.0192 75.4771 27.5161 73.7555 26.7645 73.0039L27.816 74.0554C28.5201 74.7595 29.6545 74.7823 30.3864 74.107Z",fill:"#F8F8F8",id:"path4"})),e.createElement("path",{d:"M31.4114 73.161L30.7822 72.4792L30.7822 72.4792L31.4114 73.161ZM30.3864 74.107L31.0155 74.7887L31.0155 74.7887L30.3864 74.107ZM25.1086 70.036C24.7463 69.6737 24.1589 69.6737 23.7966 70.036C23.4343 70.3983 23.4343 70.9857 23.7966 71.348L25.1086 70.036ZM27.7031 64.1756L27.9514 63.2818L27.9514 63.2818L27.7031 64.1756ZM23.4569 62.9962L23.7052 62.1023L23.7052 62.1023L23.4569 62.9962ZM12.7204 73.0774L11.8643 73.4349L12.7204 73.0774ZM14.1656 76.5381L15.0217 76.1806L15.0217 76.1806L14.1656 76.5381ZM22.387 72.7576C22.0246 72.3953 21.4372 72.3953 21.0749 72.7576C20.7126 73.1199 20.7126 73.7074 21.0749 74.0697L22.387 72.7576ZM19.6653 75.4793C19.303 75.117 18.7156 75.117 18.3533 75.4793C17.991 75.8416 17.991 76.429 18.3533 76.7913L19.6653 75.4793ZM16.2876 78.857L16.9436 78.2009L16.9436 78.2009L16.2876 78.857ZM14.5658 77.1351L13.9098 77.7911L13.9098 77.7911L14.5658 77.1351ZM21.9744 63.2121L22.4673 63.998L21.9744 63.2121ZM15.8521 67.052L15.3591 66.2661L15.8521 67.052ZM15.2776 67.6199L14.4974 67.1179L14.4974 67.1179L15.2776 67.6199ZM12.8722 71.3584L13.6524 71.8603L12.8722 71.3584ZM28.9892 65.4489L28.0978 65.7062L28.0978 65.7062L28.9892 65.4489ZM29.4811 67.1534L28.5897 67.4106L28.5897 67.4106L29.4811 67.1534ZM29.6996 67.6369L28.9174 68.1358L28.9174 68.1359L29.6996 67.6369ZM31.7173 70.7995L30.9352 71.2985L30.9352 71.2985L31.7173 70.7995ZM30.7822 72.4792L29.7572 73.4252L31.0155 74.7887L32.0406 73.8428L30.7822 72.4792ZM28.472 73.3994L27.4205 72.3479L26.1085 73.6599L27.16 74.7114L28.472 73.3994ZM27.4205 72.3479L25.1086 70.036L23.7966 71.348L26.1085 73.6599L27.4205 72.3479ZM27.9514 63.2818L23.7052 62.1023L23.2086 63.8901L27.4548 65.0695L27.9514 63.2818ZM11.8643 73.4349L13.3095 76.8956L15.0217 76.1806L13.5765 72.7199L11.8643 73.4349ZM25.202 75.5727L24.978 75.3487L23.666 76.6607L23.89 76.8847L25.202 75.5727ZM24.978 75.3487L22.387 72.7576L21.0749 74.0697L23.666 76.6607L24.978 75.3487ZM26.6116 75.5727C26.2224 75.9619 25.5913 75.9619 25.202 75.5727L23.89 76.8847C25.0039 77.9986 26.8098 77.9986 27.9237 76.8847L26.6116 75.5727ZM26.1085 73.6599C26.334 73.8854 26.5746 74.3291 26.6706 74.8012C26.7737 75.308 26.6571 75.5273 26.6116 75.5727L27.9237 76.8847C28.6298 76.1786 28.6373 75.1612 28.4889 74.4314C28.3334 73.6669 27.9466 72.8739 27.4205 72.3479L26.1085 73.6599ZM22.2564 78.0704L21.5742 77.3882L20.2622 78.7002L20.9444 79.3824L22.2564 78.0704ZM21.5742 77.3882L19.6653 75.4793L18.3533 76.7913L20.2622 78.7002L21.5742 77.3882ZM23.666 78.0704C23.2768 78.4596 22.6456 78.4596 22.2564 78.0704L20.9444 79.3824C22.0582 80.4963 23.8642 80.4963 24.978 79.3824L23.666 78.0704ZM23.666 76.6607C24.0553 77.05 24.0553 77.6811 23.666 78.0704L24.978 79.3824C26.0919 78.2685 26.0919 76.4626 24.978 75.3487L23.666 76.6607ZM20.2622 80.1098C19.8729 80.4991 19.2418 80.4991 18.8525 80.1098L17.5405 81.4219C18.6544 82.5357 20.4603 82.5357 21.5742 81.4219L20.2622 80.1098ZM20.2622 78.7002C20.6514 79.0895 20.6514 79.7206 20.2622 80.1098L21.5742 81.4219C22.6881 80.308 22.6881 78.5021 21.5742 77.3882L20.2622 78.7002ZM18.8525 80.1098L16.9436 78.2009L15.6316 79.513L17.5405 81.4219L18.8525 80.1098ZM13.9098 77.7911L15.6316 79.513L16.9436 78.2009L15.2218 76.4791L13.9098 77.7911ZM21.4814 62.4261L15.3591 66.2661L16.345 67.838L22.4673 63.998L21.4814 62.4261ZM14.4974 67.1179L12.092 70.8564L13.6524 71.8603L16.0578 68.1219L14.4974 67.1179ZM28.0978 65.7062L28.5897 67.4106L30.3724 66.8961L29.8805 65.1917L28.0978 65.7062ZM28.9174 68.1359L30.9352 71.2985L32.4994 70.3005L30.4817 67.1379L28.9174 68.1359ZM28.5897 67.4106C28.6637 67.6668 28.774 67.9111 28.9174 68.1358L30.4817 67.1379C30.4339 67.0629 30.3971 66.9815 30.3724 66.8961L28.5897 67.4106ZM15.3591 66.2661C15.0128 66.4833 14.7186 66.7741 14.4974 67.1179L16.0578 68.1219C16.1315 68.0073 16.2296 67.9104 16.345 67.838L15.3591 66.2661ZM13.3095 76.8956C13.4493 77.2304 13.6532 77.5346 13.9098 77.7911L15.2218 76.4791C15.1363 76.3936 15.0683 76.2922 15.0217 76.1806L13.3095 76.8956ZM13.5765 72.7199C13.4589 72.4383 13.4873 72.1169 13.6524 71.8603L12.092 70.8564C11.5967 71.6261 11.5116 72.5902 11.8643 73.4349L13.5765 72.7199ZM23.7052 62.1023C22.9513 61.8929 22.1442 62.0104 21.4814 62.4261L22.4673 63.998C22.6882 63.8595 22.9573 63.8203 23.2086 63.8901L23.7052 62.1023ZM29.7572 73.4252C29.3913 73.7628 28.8241 73.7515 28.472 73.3994L27.16 74.7114C28.2162 75.7676 29.9178 75.8017 31.0155 74.7887L29.7572 73.4252ZM32.0406 73.8428C33.031 72.9289 33.2243 71.4366 32.4994 70.3005L30.9352 71.2985C31.1768 71.6772 31.1124 72.1746 30.7822 72.4792L32.0406 73.8428ZM27.4548 65.0695C27.7651 65.1557 28.0085 65.3967 28.0978 65.7062L29.8805 65.1917C29.6126 64.2633 28.8824 63.5404 27.9514 63.2818L27.4548 65.0695Z",fill:"#DDA34E",id:"path5",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M52.4336 70.5904V71.4434H53.2866C58.4786 71.4434 61.3587 69.9714 63.5437 68.4731C63.918 68.2165 64.2518 67.9782 64.5522 67.7638L64.5543 67.7623C65.9862 66.7403 66.6006 66.3251 67.7886 66.3251C69.3843 66.3251 70.656 66.8101 71.8871 67.5264C72.5235 67.8966 73.1279 68.3156 73.7903 68.7796L73.8808 68.8431L73.8868 68.8472C74.2985 69.1358 74.7433 69.4475 75.2012 69.7434C75.855 70.166 76.6556 70.2091 77.3404 69.9319C78.2153 69.5778 78.7692 68.7079 78.7199 67.7654L78.7165 67.6992C78.672 66.8475 78.2014 66.107 77.5315 65.6611C77.2196 65.4534 76.8939 65.2254 76.5314 64.9713L76.0419 65.67L76.5314 64.9713L76.4822 64.9369L76.4821 64.9369C75.8314 64.481 75.0763 63.9537 74.2466 63.471C72.5456 62.4813 70.4583 61.6333 67.7886 61.6333C64.9796 61.6333 63.1138 62.9933 61.6754 64.0418L61.6351 64.0712C61.3722 64.2628 61.1286 64.4403 60.8904 64.6036C59.3435 65.6643 57.3718 66.7516 53.2866 66.7516H52.4336V67.6047V70.5904Z",fill:"#DDA34E",stroke:"#DDA34E",strokeWidth:1.70611,id:"path6",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M53.6997 70.5904V71.4434H52.8467C47.6547 71.4434 44.7746 69.9714 42.5896 68.4731C42.2154 68.2165 41.8815 67.9782 41.5811 67.7638L41.579 67.7623C40.1471 66.7403 39.5327 66.3251 38.3447 66.3251C36.749 66.3251 35.4773 66.8101 34.2462 67.5264C33.6098 67.8966 33.0054 68.3156 32.343 68.7796L32.2525 68.8431L32.2465 68.8472C31.8348 69.1358 31.39 69.4475 30.9321 69.7434C30.2783 70.166 29.4777 70.2091 28.7929 69.9319C27.918 69.5778 27.3641 68.7079 27.4134 67.7654L27.4168 67.6992C27.4613 66.8475 27.9319 66.107 28.6018 65.6611C28.9137 65.4534 29.2394 65.2254 29.6019 64.9713L30.0914 65.67L29.6019 64.9713L29.6511 64.9369L29.6512 64.9369C30.3019 64.481 31.057 63.9537 31.8867 63.471C33.5877 62.4813 35.675 61.6333 38.3447 61.6333C41.1537 61.6333 43.0195 62.9933 44.4579 64.0418L44.4982 64.0712C44.7611 64.2628 45.0047 64.4403 45.2429 64.6036C46.7898 65.6643 48.7615 66.7516 52.8467 66.7516H53.6997V67.6047V70.5904Z",fill:"#DDA34E",stroke:"#DDA34E",strokeWidth:1.70611,id:"path7",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),f||(f=e.createElement("path",{d:"M69.1305 31.8888V35.1839C69.1305 35.4118 69.344 35.5823 69.5715 35.5942C71.1859 35.679 73.3499 37.8492 70.911 40.6133C69.439 42.2816 67.528 40.9694 67.1719 40.7913C64.5041 46.4889 61.3419 54.83 53.106 54.83C46.1729 54.83 41.7078 46.4889 39.04 40.7913C38.6839 40.9694 36.4168 42.0159 34.9448 40.3476C32.5021 37.5792 34.9745 35.4106 36.6406 35.3329C36.8681 35.3223 37.0814 35.1509 37.0814 34.9231V31.8888C37.3188 30.7612 40.8561 25.1538 53.106 25.1538C65.3558 25.1538 68.8931 30.7612 69.1305 31.8888Z",fill:"#F8F8F8",id:"path8"})),e.createElement("path",{d:"M37.4872 35.8562C35.8847 35.5001 32.6798 37.8099 35.3506 40.8368C36.8226 42.5051 38.7335 41.1929 39.0896 41.0148C41.7574 51.1818 49.798 54.8301 53.1556 54.8301C56.5132 54.8301 64.5538 51.1818 67.2216 41.0148C67.5777 41.1929 69.4886 42.5051 70.9606 40.8368C73.6314 37.8099 70.4265 35.5001 68.824 35.8562M74.3363 26.5546C74.3363 13.8694 65.8407 6.49121 53.1556 6.49121C40.4704 6.49121 31.9749 13.8694 31.9749 26.5546C31.9749 27.7323 32.0635 28.8894 32.2345 30.0194C32.5471 32.0854 35.017 34.499 36.5379 35.8562C36.7674 36.061 37.1311 35.8981 37.1311 35.5905L37.1311 32.1123C37.3685 30.9847 40.9057 24.9304 53.1556 24.9304C65.4055 24.9304 68.9427 30.9847 69.1801 32.1123V35.3671C69.1801 35.7041 69.6047 35.8526 69.8147 35.5891L72.504 32.2139C73.2122 31.325 73.7498 30.3044 74.0375 29.2049C74.2341 28.4535 74.3363 27.8193 74.3363 26.5546Z",stroke:"#DDA34E",strokeWidth:2.1366,id:"path9",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M59.2344 35.2053V36.4517",stroke:"#DDA34E",strokeWidth:2.73365,strokeLinecap:"round",id:"path10",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M47.9336 35.2053V36.4517",stroke:"#DDA34E",strokeWidth:2.73365,strokeLinecap:"round",id:"path11",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M55.308 46.4111V46.4111C54.1435 46.9404 52.8071 46.9404 51.6426 46.4111V46.4111",stroke:"#DDA34E",strokeWidth:2.0381,strokeLinecap:"round",id:"path12",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M50.8794 39.1082L52.4229 36.2784C52.8333 35.526 53.918 35.5388 54.3105 36.3007L55.7799 39.153C56.136 39.8444 55.8903 40.6936 55.2199 41.0879L54.6163 41.443C53.8551 41.8908 52.9138 41.9024 52.1418 41.4735L51.4544 41.0916C50.7506 40.7006 50.4939 39.815 50.8794 39.1082Z",fill:"#DDA34E",id:"path13",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M51.7705 6.7146L52.0375 13.3353C52.0696 14.131 52.724 14.7595 53.5204 14.7595V14.7595C54.3167 14.7595 54.9711 14.131 55.0032 13.3353L55.2702 6.7146",stroke:"#DDA34E",strokeWidth:1.78776,id:"path14",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M41.8533 9.28457L43.8786 15.8531C44.1285 16.6636 44.9746 17.1313 45.7938 16.9118V16.9118C46.6134 16.6922 47.1123 15.8634 46.9228 15.0363L45.2522 7.74384",stroke:"#DDA34E",strokeWidth:1.78776,id:"path15",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M61.8381 7.83185L60.1877 15.0362C59.9982 15.8632 60.4972 16.692 61.3168 16.9116V16.9116C62.1359 17.1311 62.982 16.6634 63.2319 15.853L65.2573 9.28441",stroke:"#DDA34E",strokeWidth:1.78776,id:"path16",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M70.3537 13.1952L67.4427 18.9373C67.078 19.6566 67.3394 20.5356 68.0379 20.9389V20.9389C68.7335 21.3405 69.6215 21.1309 70.0642 20.4607L72.575 16.6589",stroke:"#DDA34E",strokeWidth:1.78776,id:"path17",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M36.8778 13.0834L39.8454 18.9372C40.2101 19.6566 39.9488 20.5356 39.2503 20.9389V20.9389C38.5547 21.3405 37.6666 21.1309 37.224 20.4606L34.5656 16.4354",stroke:"#DDA34E",strokeWidth:1.78776,id:"path18",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M38.0085 25.7097C39.6573 23.5293 43.9457 21.0168 53.2045 21.0168C62.4633 21.0168 66.7517 23.5293 68.4004 25.7097",stroke:"#DDA34E",strokeWidth:2.1366,strokeLinecap:"round",id:"path19",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M38.5481 30.8494L41.0063 45.3749",stroke:"#DDA34E",strokeWidth:2.23662,strokeLinecap:"round",id:"path20",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M68.7166 30.8494L66.2584 45.3749",stroke:"#DDA34E",strokeWidth:2.23662,strokeLinecap:"round",id:"path21",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("circle",{cx:71.1746,cy:28.1678,r:.893879,fill:"#DDA34E",id:"circle21",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("circle",{cx:35.8665,cy:28.1678,r:.893879,fill:"#DDA34E",id:"circle22",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M54.6648 64.3049H52.8224H50.9934C50.9173 64.3049 50.8418 64.3233 50.7712 64.3589L49.7165 64.8915C49.511 64.9952 49.3677 65.2337 49.3439 65.5114L48.8233 71.5897C48.7993 71.8696 48.9007 72.143 49.0862 72.2992L50.3126 73.3312C50.4791 73.4713 50.579 73.707 50.579 73.9595V86.2083C50.579 86.5343 50.8433 86.7985 51.1693 86.7985H54.5142C54.8402 86.7985 55.1045 86.5343 55.1045 86.2083V73.8301C55.1045 73.6559 55.1814 73.4907 55.3147 73.3785L56.6651 72.2422C56.8119 72.1186 56.8895 71.9314 56.8731 71.7402L56.3291 65.3882C56.3116 65.1842 56.1897 65.0039 56.007 64.9116L54.9308 64.3683C54.8484 64.3266 54.7572 64.3049 54.6648 64.3049Z",fill:"#DDA34E",stroke:"#DDA34E",strokeWidth:1.77074,id:"path22",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M23.1499 27.8625C15.9182 26.226 5.41272 26.9734 5.41272 33.7337C5.41272 41.032 11.8164 42.9223 16.6472 40.2275C21.827 37.3381 18.3191 19.2168 9.44393 15.0623",stroke:"#DDA34E",strokeWidth:2.9857,strokeLinecap:"round",strokeDasharray:"3.63 5.76",id:"path23",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M98.3703 55.2844C99.0858 54.7138 97.0317 47.1639 91.0226 50.8825C86.1217 53.9152 83.4144 51.6175 80.0227 47.3647C77.5796 44.3015 80.5551 42.4057 78.7151 39.9355",stroke:"#DDA34E",strokeWidth:2.9857,strokeLinecap:"round",strokeDasharray:"1.49 5.54",id:"path24",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{d:"M97.2523 10.6632C97.9774 18.3636 91.8598 20.9464 81.941 23.6041",stroke:"#DDA34E",strokeWidth:2.9857,strokeLinecap:"round",strokeDasharray:"1.49 5.54",id:"path25",style:{stroke:"#62c8d3",strokeOpacity:1}}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.0509 55.2934C19.2576 55.6348 19.7058 55.7475 20.0201 55.5015C21.2011 54.577 21.7799 53.3827 21.3328 52.6444C20.9905 52.0792 20.1329 51.9229 19.1365 52.1581C19.8065 51.384 20.0655 50.5516 19.7232 49.9864C19.2761 49.2481 17.9495 49.2077 16.5831 49.8259C16.2194 49.9904 16.1116 50.4397 16.3184 50.7811L17.8156 53.2536C17.8156 53.2536 17.8157 53.2536 17.8157 53.2536L19.0509 55.2934Z",fill:"#DDA34E",id:"path26",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.1803 52.5064C11.9736 52.165 11.5254 52.0523 11.2111 52.2983C10.0301 53.2228 9.45129 54.4171 9.89839 55.1554C10.2407 55.7206 11.0983 55.8769 12.0947 55.6417C11.4247 56.4158 11.1657 57.2482 11.508 57.8134C11.9551 58.5517 13.2817 58.5922 14.6481 57.9739C15.0118 57.8094 15.1196 57.3601 14.9128 57.0187L13.4156 54.5462C13.4156 54.5462 13.4156 54.5462 13.4155 54.5462L12.1803 52.5064Z",fill:"#DDA34E",id:"path27",style:{stroke:"#62c8d3",strokeOpacity:1,fill:"#62c8d3",fillOpacity:1}}),e.createElement("path",{d:"M13.2218 50.1963C15.0558 52.5024 15.6429 54.4654 17.6013 57.4284",stroke:"#DDA34E",strokeWidth:1.70611,strokeLinecap:"round",id:"path28",style:{stroke:"#62c8d3",strokeOpacity:1}})),m||(m=e.createElement("defs",{id:"defs28"},e.createElement("clipPath",{id:"clip0_16_6444"},e.createElement("rect",{width:106.632,height:85.3057,fill:"white",transform:"translate(0.183838)",id:"rect28"})))))}const v=e.forwardRef(_);i.p;var x,C,w,b;const S=["title","titleId"];function L(){return L=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},L.apply(null,arguments)}function T(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,S);return e.createElement("svg",L({width:107,height:86,viewBox:"0 0 107 86",fill:"none",id:"svg31",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,e.createElement("g",{clipPath:"url(#clip0_16_6453)",id:"g31"},e.createElement("path",{opacity:.2,d:"M87.3061 78.0547V78.0547C87.3061 60.5051 73.0793 46.2783 55.5297 46.2783H50.8379C33.2883 46.2783 19.0615 60.5051 19.0615 78.0547V78.0547",stroke:"#AA5939",strokeWidth:2.4483,id:"path1",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M101.883 71.3089L98.7735 70.6348C98.4231 70.5588 98.077 70.78 97.9988 71.1299L97.1098 75.1074C97.0338 75.4471 97.2381 75.7866 97.5739 75.8786L100.551 76.6942C101.608 76.9837 102.696 76.3489 102.965 75.2864L103.365 73.7004C103.636 72.6274 102.964 71.5434 101.883 71.3089Z",fill:"#AA5939",stroke:"#AA5939",strokeWidth:1.95659,id:"path2",style:{stroke:"#f47a00",strokeOpacity:1,fill:"#f47a00",fillOpacity:1}}),x||(x=e.createElement("path",{d:"M82.8342 76.9995L82.0285 76.7871C81.0699 76.5343 80.4174 75.6474 80.4613 74.6571L80.6661 70.0349L80.429 65.618C80.4014 65.1022 80.5642 64.5942 80.8865 64.1906L83.2499 61.2315C83.7293 60.6312 84.4976 60.3395 85.2547 60.4704L93.3247 61.8662C93.5355 61.9027 93.7396 61.9711 93.9299 62.069L98.5472 64.4463C99.1631 64.7634 99.5837 65.363 99.6722 66.0501L100.216 70.2727C100.251 70.545 100.232 70.8216 100.161 71.0868L99.4457 73.7569L98.6525 76.7171C98.3402 77.8825 97.1423 78.5742 95.9768 78.2619C94.8113 77.9496 94.1197 76.7516 94.432 75.5862L94.1485 76.6441C93.8362 77.8095 92.6383 78.5012 91.4728 78.1889C90.3073 77.8766 89.6157 76.6786 89.928 75.5132L89.8349 75.8605C89.5226 77.026 88.3247 77.7176 87.1592 77.4053C85.9937 77.093 85.5112 75.1148 85.8235 73.9494L85.4058 75.508C85.1056 76.6285 83.9559 77.2953 82.8342 76.9995Z",fill:"#F8F8F8",id:"path3"})),e.createElement("path",{d:"M82.0285 76.7871L81.7599 77.8054L82.0285 76.7871ZM82.8342 76.9995L82.5656 78.0179L82.8342 76.9995ZM85.7668 70.0917C85.9173 69.5298 86.4948 69.1964 87.0567 69.3469C87.6185 69.4975 87.9519 70.075 87.8014 70.6368L85.7668 70.0917ZM80.8865 64.1906L81.7094 64.8479L80.8865 64.1906ZM83.2499 61.2315L82.4269 60.5742L82.427 60.5742L83.2499 61.2315ZM99.6722 66.0501L100.717 65.9156L99.6722 66.0501ZM100.216 70.2727L99.1711 70.4072L99.1711 70.4072L100.216 70.2727ZM89.9873 71.2225C90.1379 70.6607 90.7154 70.3273 91.2772 70.4778C91.839 70.6284 92.1724 71.2059 92.0219 71.7677L89.9873 71.2225ZM94.2078 72.3534C94.3584 71.7916 94.9359 71.4582 95.4977 71.6087C96.0596 71.7593 96.393 72.3368 96.2424 72.8986L94.2078 72.3534ZM99.4457 73.7569L98.4284 73.4843L98.4284 73.4843L99.4457 73.7569ZM100.161 71.0868L101.178 71.3594L101.178 71.3594L100.161 71.0868ZM85.2547 60.4704L85.0752 61.5082L85.2547 60.4704ZM93.3247 61.8662L93.5042 60.8284L93.3247 61.8662ZM93.9299 62.069L93.4478 63.0054L93.4478 63.0054L93.9299 62.069ZM98.5472 64.4463L99.0293 63.5099L99.0293 63.5099L98.5472 64.4463ZM80.429 65.618L79.3774 65.6744L79.3774 65.6744L80.429 65.618ZM80.6661 70.0349L81.7178 69.9785L81.7206 70.03L81.7183 70.0815L80.6661 70.0349ZM80.4613 74.6571L79.4091 74.6104L79.4091 74.6104L80.4613 74.6571ZM82.297 75.7687L83.1027 75.9812L82.5656 78.0179L81.7599 77.8054L82.297 75.7687ZM84.3885 75.2354L84.8062 73.6768L86.8407 74.2219L86.4231 75.7805L84.3885 75.2354ZM84.8062 73.6768L85.7668 70.0917L87.8014 70.6368L86.8407 74.2219L84.8062 73.6768ZM80.0636 63.5334L82.4269 60.5742L84.0728 61.8887L81.7094 64.8479L80.0636 63.5334ZM100.717 65.9156L101.26 70.1383L99.1711 70.4072L98.6276 66.1845L100.717 65.9156ZM88.8176 75.5879L88.9107 75.2406L90.9453 75.7858L90.8522 76.1331L88.8176 75.5879ZM88.9107 75.2406L89.9873 71.2225L92.0219 71.7677L90.9453 75.7858L88.9107 75.2406ZM87.4318 76.388C88.0354 76.5498 88.6559 76.1915 88.8176 75.5879L90.8522 76.1331C90.3894 77.8604 88.6139 78.8854 86.8866 78.4226L87.4318 76.388ZM86.8407 74.2219C86.747 74.5716 86.7623 75.1443 86.9359 75.6631C87.1222 76.2198 87.3613 76.3691 87.4318 76.388L86.8866 78.4226C85.7916 78.1292 85.2067 77.1333 84.9384 76.3315C84.6574 75.4917 84.5876 74.4925 84.8062 73.6768L86.8407 74.2219ZM93.1312 76.3715L93.4147 75.3136L95.4493 75.8588L95.1658 76.9166L93.1312 76.3715ZM93.4147 75.3136L94.2078 72.3534L96.2424 72.8986L95.4493 75.8588L93.4147 75.3136ZM91.7454 77.1716C92.349 77.3333 92.9695 76.9751 93.1312 76.3715L95.1658 76.9166C94.703 78.6439 92.9275 79.669 91.2002 79.2062L91.7454 77.1716ZM90.9453 75.7858C90.7835 76.3894 91.1417 77.0099 91.7454 77.1716L91.2002 79.2062C89.4729 78.7433 88.4479 76.9679 88.9107 75.2406L90.9453 75.7858ZM96.2494 77.2446C96.853 77.4063 97.4735 77.0481 97.6352 76.4445L99.6698 76.9896C99.207 78.7169 97.4315 79.742 95.7042 79.2792L96.2494 77.2446ZM95.4493 75.8588C95.2875 76.4624 95.6457 77.0828 96.2494 77.2446L95.7042 79.2792C93.9769 78.8163 92.9518 77.0409 93.4147 75.3136L95.4493 75.8588ZM97.6352 76.4445L98.4284 73.4843L100.463 74.0295L99.6698 76.9896L97.6352 76.4445ZM101.178 71.3594L100.463 74.0295L98.4284 73.4843L99.1438 70.8142L101.178 71.3594ZM85.4342 59.4327L93.5042 60.8284L93.1452 62.904L85.0752 61.5082L85.4342 59.4327ZM94.4119 61.1327L99.0293 63.5099L98.0651 65.3826L93.4478 63.0054L94.4119 61.1327ZM81.4807 65.5615L81.7178 69.9785L79.6145 70.0914L79.3774 65.6744L81.4807 65.5615ZM81.7183 70.0815L81.5134 74.7037L79.4091 74.6104L79.614 69.9883L81.7183 70.0815ZM93.5042 60.8284C93.8205 60.8832 94.1266 60.9857 94.4119 61.1327L93.4478 63.0054C93.3526 62.9564 93.2506 62.9222 93.1452 62.904L93.5042 60.8284ZM101.26 70.1383C101.313 70.5468 101.285 70.9616 101.178 71.3594L99.1438 70.8142C99.1794 70.6816 99.1886 70.5433 99.1711 70.4072L101.26 70.1383ZM98.6276 66.1845C98.5834 65.841 98.3731 65.5412 98.0651 65.3826L99.0293 63.5099C99.9532 63.9855 100.584 64.885 100.717 65.9156L98.6276 66.1845ZM82.427 60.5742C83.1462 59.6737 84.2986 59.2363 85.4342 59.4327L85.0752 61.5082C84.6967 61.4427 84.3125 61.5886 84.0728 61.8887L82.427 60.5742ZM83.1027 75.9812C83.6636 76.1291 84.2384 75.7956 84.3885 75.2354L86.4231 75.7805C85.9728 77.4613 84.2482 78.4616 82.5656 78.0179L83.1027 75.9812ZM81.7599 77.8054C80.3221 77.4263 79.3433 76.0959 79.4091 74.6104L81.5134 74.7037C81.4915 75.1989 81.8178 75.6423 82.297 75.7687L81.7599 77.8054ZM81.7094 64.8479C81.5483 65.0497 81.4669 65.3036 81.4807 65.5615L79.3774 65.6744C79.3359 64.9007 79.5801 64.1388 80.0636 63.5334L81.7094 64.8479Z",fill:"#AA5939",id:"path4",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("rect",{x:76.1272,y:68.9817,width:3.86164,height:5.52155,rx:1.93082,transform:"rotate(15 76.1272 68.9817)",fill:"#F8F8F8",stroke:"#AA5939",strokeWidth:2.10635,id:"rect4",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M4.97058 72.2872L8.08001 71.6131C8.43044 71.5371 8.77647 71.7583 8.85469 72.1082L9.74374 76.0856C9.81969 76.4254 9.61537 76.7649 9.27959 76.8569L6.30284 77.6725C5.24592 77.962 4.15729 77.3271 3.88886 76.2647L3.48816 74.6786C3.2171 73.6057 3.88907 72.5217 4.97058 72.2872Z",fill:"#AA5939",stroke:"#AA5939",strokeWidth:1.95659,id:"path5",style:{stroke:"#f47a00",strokeOpacity:1,fill:"#f47a00",fillOpacity:1}}),C||(C=e.createElement("path",{d:"M24.6966 77.3495L25.4715 77.0432C26.3933 76.6788 26.9364 75.7209 26.7757 74.7427L26.0254 70.1773L25.7382 65.7633C25.7047 65.2479 25.4829 64.7627 25.1151 64.4001L22.4183 61.7414C21.8711 61.202 21.0737 61.0033 20.3375 61.2229L12.4893 63.5636C12.2843 63.6247 12.0897 63.7168 11.9124 63.8366L7.60869 66.7434C7.03463 67.1311 6.68792 67.7763 6.6814 68.469L6.64129 72.7263C6.63871 73.0009 6.68982 73.2733 6.79176 73.5282L7.81809 76.0949L8.95591 78.9405C9.40389 80.0608 10.6753 80.6058 11.7956 80.1579C12.9159 79.7099 13.461 78.4385 13.013 77.3182L13.4196 78.3351C13.8676 79.4554 15.139 80.0005 16.2593 79.5525C17.3796 79.1045 17.9247 77.8332 17.4767 76.7128L17.6102 77.0467C18.0582 78.167 19.3296 78.7121 20.4499 78.2641C21.5702 77.8161 21.8154 75.7947 21.3674 74.6744L21.9665 76.1726C22.3972 77.2498 23.6177 77.7759 24.6966 77.3495Z",fill:"#F8F8F8",id:"path6"})),e.createElement("path",{d:"M25.4715 77.0432L25.8586 78.0226L25.4715 77.0432ZM24.6966 77.3495L25.0837 78.3289L24.6966 77.3495ZM20.9673 70.8371C20.7513 70.297 20.1384 70.0343 19.5983 70.2502C19.0583 70.4662 18.7955 71.0791 19.0115 71.6191L20.9673 70.8371ZM25.1151 64.4001L25.8545 63.6501L25.8545 63.6501L25.1151 64.4001ZM22.4183 61.7414L21.6789 62.4914L21.6789 62.4914L22.4183 61.7414ZM6.6814 68.469L7.73452 68.479L7.73452 68.479L6.6814 68.469ZM6.64129 72.7263L5.58816 72.7164L5.58816 72.7164L6.64129 72.7263ZM16.9102 72.4594C16.6942 71.9193 16.0813 71.6565 15.5413 71.8725C15.0012 72.0884 14.7384 72.7013 14.9544 73.2414L16.9102 72.4594ZM12.8531 74.0816C12.6371 73.5416 12.0242 73.2788 11.4842 73.4948C10.9441 73.7107 10.6813 74.3236 10.8973 74.8637L12.8531 74.0816ZM7.81809 76.0949L8.79599 75.7039L8.79598 75.7039L7.81809 76.0949ZM6.79176 73.5282L5.81386 73.9192L5.81387 73.9192L6.79176 73.5282ZM20.3375 61.2229L20.6385 62.2321L20.3375 61.2229ZM12.4893 63.5636L12.1883 62.5543L12.4893 63.5636ZM11.9124 63.8366L12.5019 64.7093L12.5019 64.7093L11.9124 63.8366ZM7.60869 66.7434L8.19817 67.6161L7.60869 66.7434ZM25.7382 65.7633L26.7892 65.695L26.7892 65.695L25.7382 65.7633ZM26.0254 70.1773L24.9744 70.2456L24.9778 70.2971L24.9862 70.3481L26.0254 70.1773ZM26.7757 74.7427L25.7364 74.9135L25.7364 74.9135L26.7757 74.7427ZM25.0843 76.0637L24.3094 76.37L25.0837 78.3289L25.8586 78.0226L25.0843 76.0637ZM22.9444 75.7816L22.3453 74.2834L20.3895 75.0654L20.9886 76.5637L22.9444 75.7816ZM22.3453 74.2834L20.9673 70.8371L19.0115 71.6191L20.3895 75.0654L22.3453 74.2834ZM25.8545 63.6501L23.1577 60.9914L21.6789 62.4914L24.3757 65.1501L25.8545 63.6501ZM5.62827 68.4591L5.58816 72.7164L7.69442 72.7362L7.73452 68.479L5.62827 68.4591ZM18.5881 76.6557L18.4546 76.3218L16.4988 77.1039L16.6323 77.4377L18.5881 76.6557ZM18.4546 76.3218L16.9102 72.4594L14.9544 73.2414L16.4988 77.1039L18.4546 76.3218ZM20.0589 77.2862C19.4786 77.5182 18.8201 77.2359 18.5881 76.6557L16.6323 77.4377C17.2963 79.0981 19.1805 79.9059 20.8409 79.242L20.0589 77.2862ZM20.3895 75.0654C20.5239 75.4016 20.5765 75.9721 20.4655 76.5077C20.3464 77.0825 20.1266 77.2591 20.0589 77.2862L20.8409 79.242C21.8935 78.8211 22.3565 77.763 22.528 76.9351C22.7077 76.0679 22.6589 75.0676 22.3453 74.2834L20.3895 75.0654ZM14.3975 77.9441L13.9909 76.9272L12.0351 77.7092L12.4417 78.7261L14.3975 77.9441ZM13.9909 76.9272L12.8531 74.0816L10.8973 74.8637L12.0351 77.7092L13.9909 76.9272ZM15.8683 78.5746C15.288 78.8066 14.6295 78.5243 14.3975 77.9441L12.4417 78.7261C13.1057 80.3865 14.9899 81.1943 16.6503 80.5304L15.8683 78.5746ZM16.4988 77.1039C16.7309 77.6841 16.4485 78.3426 15.8683 78.5746L16.6503 80.5304C18.3107 79.8665 19.1185 77.9822 18.4546 76.3218L16.4988 77.1039ZM11.4046 79.18C10.8243 79.412 10.1658 79.1297 9.9338 78.5494L7.97801 79.3315C8.64195 80.9919 10.5262 81.7997 12.1866 81.1358L11.4046 79.18ZM12.0351 77.7092C12.2671 78.2895 11.9848 78.9479 11.4046 79.18L12.1866 81.1358C13.847 80.4718 14.6548 78.5876 13.9909 76.9272L12.0351 77.7092ZM9.9338 78.5494L8.79599 75.7039L6.8402 76.4859L7.97801 79.3315L9.9338 78.5494ZM5.81387 73.9192L6.8402 76.4859L8.79598 75.7039L7.76965 73.1372L5.81387 73.9192ZM20.0365 60.2136L12.1883 62.5543L12.7903 64.5728L20.6385 62.2321L20.0365 60.2136ZM11.3229 62.9638L7.01922 65.8706L8.19817 67.6161L12.5019 64.7093L11.3229 62.9638ZM24.6873 65.8317L24.9744 70.2456L27.0763 70.1089L26.7892 65.695L24.6873 65.8317ZM24.9862 70.3481L25.7364 74.9135L27.8149 74.572L27.0646 70.0065L24.9862 70.3481ZM12.1883 62.5543C11.8807 62.6461 11.5889 62.7842 11.3229 62.9638L12.5019 64.7093C12.5905 64.6494 12.6878 64.6034 12.7903 64.5728L12.1883 62.5543ZM5.58816 72.7164C5.58429 73.1282 5.66096 73.5368 5.81386 73.9192L7.76965 73.1372C7.71868 73.0097 7.69313 72.8735 7.69442 72.7362L5.58816 72.7164ZM7.73452 68.479C7.73779 68.1326 7.91114 67.81 8.19817 67.6161L7.01922 65.8706C6.15813 66.4522 5.63806 67.4201 5.62827 68.4591L7.73452 68.479ZM23.1577 60.9914C22.337 60.1823 21.1408 59.8842 20.0365 60.2136L20.6385 62.2321C21.0066 62.1223 21.4053 62.2217 21.6789 62.4914L23.1577 60.9914ZM24.3094 76.37C23.77 76.5832 23.1597 76.3202 22.9444 75.7816L20.9886 76.5637C21.6346 78.1793 23.4655 78.9685 25.0837 78.3289L24.3094 76.37ZM25.8586 78.0226C27.2414 77.476 28.056 76.0392 27.8149 74.572L25.7364 74.9135C25.8168 75.4026 25.5453 75.8815 25.0843 76.0637L25.8586 78.0226ZM24.3757 65.1501C24.5596 65.3314 24.6705 65.574 24.6873 65.8317L26.7892 65.695C26.7389 64.9218 26.4063 64.1941 25.8545 63.6501L24.3757 65.1501Z",fill:"#AA5939",id:"path7",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("rect",{width:3.86164,height:5.52155,rx:1.93082,transform:"matrix(-0.928521 0.371279 0.371279 0.928521 30.408 68.5942)",fill:"#DDBDB0",stroke:"#AA5939",strokeWidth:2.10635,id:"rect7",style:{stroke:"#f47a00",strokeOpacity:1,fill:"#f8f8f8",fillOpacity:1}}),w||(w=e.createElement("path",{d:"M70.501 38.3415V41.8162C70.501 42.0564 70.7262 42.2362 70.9661 42.2488C72.6684 42.3382 74.9503 44.6266 72.3785 47.5414C70.8263 49.3006 68.8112 47.9169 68.4357 47.7291C65.6225 53.7372 63.7419 59.3351 53.6032 59.3351C43.4645 59.3351 41.5839 53.7372 38.7707 47.7291C38.3952 47.9169 36.0046 49.0204 34.4524 47.2612C31.8765 44.3419 34.4837 42.0552 36.2405 41.9732C36.4805 41.962 36.7054 41.7813 36.7054 41.5411V38.3415C36.9558 37.1524 40.6858 34.7742 53.6032 34.7742C66.5206 34.7742 70.2506 37.1524 70.501 38.3415Z",fill:"#F8F8F8",id:"path8"})),e.createElement("path",{d:"M37.0809 42.2895C35.3912 41.914 32.0116 44.3497 34.8279 47.5415C36.3801 49.3007 38.3952 47.917 38.7707 47.7293C41.5839 53.7374 43.4645 59.3353 53.6032 59.3353C63.7419 59.3353 65.6225 53.7374 68.4357 47.7293C68.8112 47.917 70.8263 49.3007 72.3785 47.5415C75.1948 44.3497 71.8153 41.914 70.1255 42.2895M77.8234 30.8315C77.8234 17.4551 66.9796 6.61133 53.6032 6.61133C40.2268 6.61133 29.3831 17.4551 29.3831 30.8315C29.3831 32.0734 29.4765 33.2935 29.6568 34.4851C29.9103 36.1601 30.8568 37.6287 32.1208 38.7566L36.0799 42.2895C36.3219 42.5055 36.7054 42.3337 36.7054 42.0093V38.3416C36.9558 37.1525 40.6858 34.7743 53.6032 34.7743C66.5206 34.7743 70.2506 37.1525 70.501 38.3416V42.0093C70.501 42.3337 70.8845 42.5055 71.1265 42.2895L75.0856 38.7566C76.3497 37.6287 77.2962 36.1601 77.5496 34.4851C77.7299 33.2935 77.8234 32.0734 77.8234 30.8315Z",stroke:"#AA5939",strokeWidth:2.25304,id:"path9",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M37.0809 42.2895C35.3912 41.914 32.0116 44.3497 34.8279 47.5415C36.3801 49.3007 38.3952 47.917 38.7707 47.7293C41.5839 53.7374 43.4645 59.3353 53.6032 59.3353C63.7419 59.3353 65.6225 53.7374 68.4357 47.7293C68.8112 47.917 70.8263 49.3007 72.3785 47.5415C75.1948 44.3497 71.8153 41.914 70.1255 42.2895M77.8234 30.8315C77.8234 17.4551 66.9796 6.61133 53.6032 6.61133C40.2268 6.61133 29.3831 17.4551 29.3831 30.8315C29.3831 32.0734 29.4765 33.2935 29.6568 34.4851C29.9103 36.1601 30.8568 37.6287 32.1208 38.7566L36.0799 42.2895C36.3219 42.5055 36.7054 42.3337 36.7054 42.0093V38.3416C36.9558 37.1525 40.6858 34.7743 53.6032 34.7743C66.5206 34.7743 70.2506 37.1525 70.501 38.3416V42.0093C70.501 42.3337 70.8845 42.5055 71.1265 42.2895L75.0856 38.7566C76.3497 37.6287 77.2962 36.1601 77.5496 34.4851C77.7299 33.2935 77.8234 32.0734 77.8234 30.8315Z",stroke:"#AA5939",strokeWidth:2.25304,id:"path10",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M37.6016 32.8277C39.3377 31.6519 43.8535 30.2971 53.6032 30.2971C63.353 30.2971 67.8688 31.6519 69.6049 32.8277",stroke:"#AA5939",strokeWidth:2.25304,strokeLinecap:"round",id:"path11",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M51.7488 6.72925L52.2429 20.8106C52.2686 21.5434 52.87 22.1241 53.6032 22.1241V22.1241C54.3364 22.1241 54.9379 21.5434 54.9636 20.8106L55.4577 6.72925",stroke:"#AA5939",strokeWidth:1.88518,id:"path12",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M67.3278 11.2065L63.5028 23.5928C63.2864 24.2937 62.5546 24.698 61.8461 24.5081V24.5081C61.1372 24.3182 60.7056 23.6016 60.8692 22.8862L63.9977 9.20346",stroke:"#AA5939",strokeWidth:1.88518,id:"path13",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M39.7223 11.0999L43.4894 23.3173C43.7529 24.1719 44.6451 24.6651 45.5089 24.4336V24.4336C46.3732 24.2021 46.8993 23.3282 46.6995 22.456L43.6095 8.9679",stroke:"#AA5939",strokeWidth:1.88518,id:"path14",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M75.1264 66.3898L57.9566 70.0585C57.6332 70.1277 57.4127 70.4279 57.4435 70.7572L57.8097 74.6632C57.8463 75.0533 58.2161 75.3233 58.5988 75.2394L75.0137 71.6396C75.9685 71.4302 76.9592 71.4497 77.9049 71.6964L78.7957 71.9288C79.6814 72.1598 80.6238 71.9258 81.2985 71.3074L81.3608 71.2502C81.8783 70.7759 82.1729 70.1062 82.1729 69.4043C82.1729 68.2362 81.3654 67.2233 80.2267 66.9631L77.8017 66.4088C76.9219 66.2077 76.0089 66.2012 75.1264 66.3898Z",fill:"#AA5939",stroke:"#AA5939",strokeWidth:1.95659,id:"path15",style:{stroke:"#f47a00",strokeOpacity:1,fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M73.7734 17.0906L68.667 26.9883C68.3289 27.6437 68.5652 28.4492 69.2039 28.8179V28.8179C69.8404 29.1854 70.6531 28.9902 71.0532 28.3738L75.7764 21.0987",stroke:"#AA5939",strokeWidth:1.88518,id:"path16",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M31.5477 21.4572L36.0241 28.3722C36.4236 28.9893 37.2365 29.1851 37.8731 28.8175V28.8175C38.5114 28.449 38.7476 27.6441 38.4097 26.9891L33.732 17.9224",stroke:"#AA5939",strokeWidth:1.88518,id:"path17",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M60.2878 44.4875V45.8018",stroke:"#AA5939",strokeWidth:2.88262,strokeLinecap:"round",id:"path18",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M46.9573 44.4875V45.8018",stroke:"#AA5939",strokeWidth:2.88262,strokeLinecap:"round",id:"path19",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M50.7706 46.482L52.3983 43.4981C52.831 42.7047 53.9748 42.7182 54.3887 43.5216L55.9382 46.5294C56.3137 47.2584 56.0546 48.1539 55.3477 48.5697L54.7111 48.9442C53.9085 49.4163 52.9159 49.4285 52.1019 48.9763L51.377 48.5736C50.6348 48.1613 50.3641 47.2274 50.7706 46.482Z",fill:"#AA5939",id:"path20",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M59.8547 40.7458C60.8648 40.5956 60.6383 40.6832 61.5771 40.7458",stroke:"#AA5939",strokeWidth:2.88262,strokeLinecap:"round",id:"path21",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M47.4954 40.7458C46.4853 40.5956 46.7118 40.6832 45.773 40.7458",stroke:"#AA5939",strokeWidth:2.88262,strokeLinecap:"round",id:"path22",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M55.4074 54.1189V54.1189C54.1795 53.5607 52.7702 53.5607 51.5422 54.1189V54.1189",stroke:"#AA5939",strokeWidth:2.14917,strokeLinecap:"round",id:"path23",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M31.7271 66.3898L48.8969 70.0585C49.2203 70.1277 49.4408 70.4279 49.41 70.7572L49.0438 74.6632C49.0072 75.0533 48.6374 75.3233 48.2547 75.2394L31.8398 71.6396C30.8851 71.4302 29.8944 71.4497 28.9486 71.6964L28.0578 71.9288C27.1721 72.1598 26.2298 71.9258 25.5551 71.3074L25.4927 71.2502C24.9753 70.7759 24.6807 70.1062 24.6807 69.4043C24.6807 68.2362 25.4882 67.2233 26.6268 66.9631L29.0518 66.4088C29.9316 66.2077 30.8446 66.2012 31.7271 66.3898Z",fill:"#AA5939",stroke:"#AA5939",strokeWidth:1.95659,id:"path24",style:{stroke:"#f47a00",strokeOpacity:1,fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M55.8132 85.3059V78.5171C55.8132 78.3246 55.8982 78.142 56.0455 78.0181L57.5375 76.7625C57.6998 76.626 57.7855 76.4191 57.7674 76.2078L57.1663 69.1891C57.147 68.9638 57.0123 68.7645 56.8104 68.6626L55.6213 68.0622C55.5302 68.0162 55.4295 67.9922 55.3274 67.9922H53.2916H51.2706C51.1865 67.9922 51.1032 68.0124 51.0251 68.0519L49.8597 68.6403C49.6326 68.7549 49.4743 69.0184 49.448 69.3253L48.8728 76.0416C48.8463 76.3508 48.9583 76.653 49.1633 76.8255L50.5184 77.9658C50.7023 78.1206 50.8128 78.3811 50.8128 78.6601V85.3059",stroke:"#AA5939",strokeWidth:1.95659,id:"path25",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("circle",{cx:73.4198,cy:35.0069,r:1.06041,fill:"#AA5939",id:"circle25",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("circle",{cx:33.8312,cy:35.0069,r:1.06041,fill:"#AA5939",id:"circle26",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M71.5208 5.95386L70.1097 8.62352M98.5754 23.1423L80.4786 29.8656M24.0249 5.95386L30.0447 12.8521M13.0828 1.62671L28.8947 16.5417M4.18481 31.5562L24.9263 35.0371M6.22894 61.3655L22.8225 53.8295M93.5252 29.3926L84.026 31.8809M80.8714 47.4316L97.3295 53.2366",stroke:"#AA5939",strokeWidth:1.9672,strokeLinecap:"round",id:"path26",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M37.2495 37.7959L38.8218 48.0161",stroke:"#AA5939",strokeWidth:2.3585,strokeLinecap:"round",id:"path27",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M70.0063 37.7959L68.434 48.0161",stroke:"#AA5939",strokeWidth:2.3585,strokeLinecap:"round",id:"path28",style:{stroke:"#f47a00",strokeOpacity:1}}),e.createElement("path",{d:"M84.0464 11.4259C83.3071 12.5088 80.5525 16.2321 80.7768 16.5148C80.9621 16.7483 84.624 13.7491 85.6607 12.9463C86.8242 12.0453 87.2976 11.2934 86.4479 10.4932C85.5982 9.69295 84.876 10.2106 84.0464 11.4259Z",fill:"#AA5939",id:"path29",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M17.1281 46.4941C18.3758 46.091 22.8339 44.8355 22.8297 44.4746C22.8263 44.1765 18.0947 44.3039 16.7834 44.3034C15.3119 44.3029 14.4771 44.6072 14.6585 45.7602C14.8399 46.9132 15.7278 46.9465 17.1281 46.4941Z",fill:"#AA5939",id:"path30",style:{fill:"#f47a00",fillOpacity:1}}),e.createElement("path",{d:"M96.4393 7.40909C93.723 9.31454 83.951 15.8608 84.0909 16.3681C84.2064 16.7871 95.0133 11.5483 98.021 10.1473C101.396 8.57496 103.201 7.25101 102.369 5.80987C101.536 4.36872 99.4877 5.27071 96.4393 7.40909Z",fill:"#AA5939",id:"path31",style:{fill:"#f47a00",fillOpacity:1}})),b||(b=e.createElement("defs",{id:"defs31"},e.createElement("clipPath",{id:"clip0_16_6453"},e.createElement("rect",{width:106.632,height:85.3057,fill:"white",transform:"translate(0.183838)",id:"rect31"})))))}const M=e.forwardRef(T);i.p;var E,I,A,k,P;const O=["title","titleId"];function R(){return R=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},R.apply(null,arguments)}function z(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,O);return e.createElement("svg",R({width:107,height:86,viewBox:"0 0 107 86",fill:"none",id:"svg34",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,e.createElement("g",{clipPath:"url(#clip0_16_6462)",id:"g34"},e.createElement("path",{opacity:.2,d:"M87.3061 71.0169C87.3061 58.061 79.5524 46.916 68.4322 41.9692M19.0615 71.0169C19.0615 58.061 26.8152 46.916 37.9354 41.9692",stroke:"#522B2A",strokeWidth:2.4483,id:"path1",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M56.9766 85.5353V75.6705C56.9766 75.3445 56.7124 75.0802 56.3864 75.0802H55.8608C55.5348 75.0802 55.2705 74.8159 55.2705 74.49V70.866C55.2705 70.6918 55.3475 70.5265 55.4807 70.4144L56.8311 69.2781C56.9779 69.1545 57.0555 68.9673 57.0391 68.7761L56.4951 62.4241C56.4777 62.2201 56.3558 62.0398 56.1731 61.9475L55.0969 61.4042C55.0144 61.3625 54.9233 61.3408 54.8308 61.3408H52.9885H51.1594C51.0833 61.3408 51.0079 61.3592 50.9372 61.3948L49.8825 61.9274C49.677 62.0311 49.5337 62.2696 49.5099 62.5473L48.9893 68.6256C48.9654 68.9055 49.0667 69.1789 49.2523 69.3351L50.4787 70.3671C50.6451 70.5072 50.7451 70.7429 50.7451 70.9954V74.692C50.7451 75.018 50.4808 75.2823 50.1548 75.2823H49.4159C49.0899 75.2823 48.8257 75.5465 48.8257 75.8725V85.5353",stroke:"#522B2A",strokeWidth:1.77074,id:"path2",style:{stroke:"#d31f11",strokeOpacity:1}}),E||(E=e.createElement("path",{d:"M69.116 40.0834V43.3565C69.116 43.574 69.3198 43.7366 69.5371 43.7465C71.1294 43.8187 73.281 45.9689 70.8707 48.7098C69.42 50.3593 67.5369 49.0618 67.186 48.8858C64.557 54.5193 62.7994 58.5684 53.3245 58.5684C43.8496 58.5684 42.0921 54.5193 39.4631 48.8858C39.1122 49.0618 36.878 50.0966 35.4274 48.447C33.0136 45.7022 35.4702 43.5537 37.1122 43.4882C37.3295 43.4795 37.533 43.316 37.533 43.0985V40.0834C37.7669 38.9685 41.2528 40.0834 53.3245 40.0834C65.3963 40.0834 68.8821 38.9685 69.116 40.0834Z",fill:"#F8F8F8",id:"path3"})),e.createElement("path",{d:"M37.7966 43.8624C36.212 43.5121 33.0428 45.784 35.6838 48.7611C37.1394 50.402 39.0291 49.1114 39.3812 48.9363C42.0193 54.5403 43.7829 58.5682 53.2905 58.5682C62.7981 58.5682 64.5617 54.5403 67.1998 48.9363C67.5519 49.1114 69.4416 50.402 70.8972 48.7611C73.5382 45.784 70.369 43.5121 68.7844 43.8624M76.0032 33.175C76.0032 20.6982 65.8344 10.5837 53.2905 10.5837C40.7467 10.5837 30.5779 20.6982 30.5779 33.175C30.5779 34.3334 30.6655 35.4714 30.8346 36.5828C31.0723 38.1452 31.9599 39.5151 33.1452 40.5671L36.8579 43.8624C37.0849 44.0638 37.4445 43.9036 37.4445 43.601V40.18C37.6792 39.0709 41.1771 40.18 53.2905 40.18C65.4039 40.18 68.9018 39.0709 69.1365 40.18V43.627C69.1365 43.9201 69.4828 44.0757 69.702 43.8812L73.4909 40.5183C74.6402 39.4982 75.5006 38.1675 75.7363 36.6489C75.912 35.5165 76.0032 34.3563 76.0032 33.175Z",stroke:"#522B2A",strokeWidth:2.03903,id:"path4",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M69.1366 44.3832V40.6067M36.8579 43.8625C37.0849 44.064 37.4445 43.9037 37.4445 43.6012V40.6067M37.7967 43.8625C36.2121 43.5123 33.0429 45.7842 35.6839 48.7613C37.1395 50.4022 39.0291 49.1116 39.3813 48.9364C42.0194 54.5405 43.7829 58.5684 53.2906 58.5684C62.7982 58.5684 64.5618 54.5405 67.1999 48.9364C67.552 49.1116 69.4416 50.4022 70.8973 48.7613C73.5383 45.7842 70.3691 43.5123 68.7845 43.8625",stroke:"#522B2A",strokeWidth:2.03903,id:"path5",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M38.2554 35.749C39.8866 35.9472 44.1297 36.1755 53.2905 36.1755C62.4513 36.1755 66.6944 35.9472 68.3256 35.749",stroke:"#522B2A",strokeWidth:2.03903,strokeLinecap:"round",id:"path6",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M50.8379 10.3706L51.9609 30.2273C52.0008 30.9324 52.5842 31.4838 53.2904 31.4838V31.4838C53.9966 31.4838 54.58 30.9324 54.6199 30.2274L55.743 10.3706",stroke:"#522B2A",strokeWidth:1.70611,id:"path7",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M67.1564 15.5427L62.5236 30.0936C62.3167 30.7433 61.6356 31.1157 60.977 30.9393V30.9393C60.3113 30.7609 59.9074 30.0863 60.0646 29.4153L63.855 13.2318",stroke:"#522B2A",strokeWidth:1.70611,id:"path8",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M39.2054 15.4324L43.8085 29.8267C44.0641 30.626 44.9023 31.0837 45.7129 30.8665V30.8665C46.5218 30.6498 47.0188 29.837 46.8432 29.0182L43.3871 12.9015",stroke:"#522B2A",strokeWidth:1.70611,id:"path9",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M72.1084 20.2678L67.3392 29.5118C67.0234 30.1239 67.2441 30.8762 67.8406 31.2206V31.2206C68.435 31.5638 69.1941 31.3815 69.5678 30.8058L73.9791 24.0111",stroke:"#522B2A",strokeWidth:1.70611,id:"path10",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M32.6714 24.346L36.8522 30.8043C37.2252 31.3807 37.9845 31.5635 38.5791 31.2203V31.2203C39.1752 30.8761 39.3958 30.1243 39.0802 29.5126L34.7115 21.0447",stroke:"#522B2A",strokeWidth:1.70611,id:"path11",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M58.0081 41.407C59.8317 41.2668 60.5006 41.3486 61.3774 41.407",stroke:"#522B2A",strokeWidth:2.60881,strokeLinecap:"round",id:"path12",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M48.2258 41.407C46.4022 41.2668 45.7333 41.3486 44.8565 41.407",stroke:"#522B2A",strokeWidth:2.60881,strokeLinecap:"round",id:"path13",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M50.603 48.8048L52.1738 45.9249C52.5655 45.2069 53.6006 45.2191 53.9752 45.9462L55.4698 48.8476C55.8098 49.5074 55.5752 50.3178 54.9355 50.6941L54.267 51.0874C53.5406 51.5147 52.6423 51.5257 51.9056 51.1165L51.1517 50.6977C50.48 50.3245 50.235 49.4794 50.603 48.8048Z",fill:"#522B2A",id:"path14",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("rect",{x:48.9993,y:52.627,width:8.14315,height:2.64102,rx:1.27959,stroke:"#522B2A",strokeWidth:1.27959,id:"rect14",style:{stroke:"#d31f11",strokeOpacity:1}}),I||(I=e.createElement("path",{d:"M63.0847 47.565C63.0847 49.0844 61.1108 50.3161 59.464 50.3161C57.8172 50.3161 56.4822 49.0844 56.4822 47.565C56.4822 46.0457 57.8172 44.814 59.464 44.814C61.1108 44.814 63.0847 46.0457 63.0847 47.565Z",fill:"#F8F8F8",id:"path15"})),e.createElement("path",{d:"M47.283 47.343V47.9102",stroke:"#522B2A",strokeWidth:1.75516,strokeLinecap:"round",id:"path16",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M59.0789 47.343V47.9102",stroke:"#522B2A",strokeWidth:1.75516,strokeLinecap:"round",id:"path17",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M50.98 52.8469V55.2679",stroke:"#522B2A",strokeWidth:.853057,id:"path18",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M53.1809 52.8469V55.2679",stroke:"#522B2A",strokeWidth:.853057,id:"path19",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M55.1616 52.8469V55.2679",stroke:"#522B2A",strokeWidth:.853057,id:"path20",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("circle",{cx:71.8445,cy:36.9221,r:.959689,fill:"#522B2A",id:"circle20",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("circle",{cx:34.7365,cy:36.9221,r:.959689,fill:"#522B2A",id:"circle21",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("rect",{width:3.33425,height:4.76747,rx:1.66713,transform:"matrix(-0.290075 0.957004 0.957004 0.290075 30.8616 63.3613)",fill:"#F8F8F8",stroke:"#522B2A",strokeWidth:1.81868,id:"rect21",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M49.2385 67.1998V68.1595H48.2788C44.4738 68.1595 41.8343 67.3071 39.467 66.5427L39.4498 66.5371L39.7447 65.6239L39.4498 66.5371L39.2571 66.4749C36.9111 65.7182 34.7462 65.0493 31.4042 65.0493C29.3048 65.0493 28.3668 65.4937 27.8832 65.9197C27.3721 66.37 26.9083 67.2007 26.6528 68.8977L26.6487 68.925L26.643 68.952C26.5682 69.3083 26.5093 69.5064 26.4636 69.6482C26.4567 69.6694 26.4529 69.6811 26.4498 69.6907C26.4467 69.7002 26.4442 69.7078 26.44 69.7208L26.4366 69.7318C26.434 69.7711 26.4328 69.8694 26.4412 70.154C26.4454 70.2917 26.4509 70.4543 26.4579 70.6567C26.4619 70.7731 26.4663 70.9026 26.4712 71.0481C26.4854 71.0813 26.4955 71.1101 26.5024 71.1314C26.5099 71.1545 26.5155 71.1747 26.5196 71.1906C26.5238 71.2067 26.527 71.2211 26.5295 71.233C26.5345 71.2564 26.5379 71.2765 26.5402 71.2913C26.5448 71.3203 26.5476 71.3461 26.5495 71.3644C26.5532 71.4015 26.5558 71.4406 26.5578 71.4771C26.5599 71.5155 26.5618 71.5596 26.5637 71.6096C26.5797 72.0488 26.5962 72.467 26.6123 72.8762C26.6231 73.1517 26.6338 73.4232 26.6441 73.6942C26.8468 73.2336 27.1837 72.8353 27.6224 72.5581C28.4599 72.0288 29.5272 72.0288 30.3647 72.5581C31.109 73.0284 31.5603 73.8474 31.5603 74.7279V78.3069C31.5603 79.7404 31.0613 81.0443 30.0854 82.0037C29.1278 82.945 27.8488 83.4136 26.5829 83.4136C25.3169 83.4136 24.0379 82.945 23.0803 82.0037C22.1044 81.0443 21.6054 79.7404 21.6054 78.3069C21.6054 76.188 21.5489 74.7543 21.484 73.1072C21.4738 72.8495 21.4635 72.5865 21.4531 72.3149C21.4408 72.2873 21.4318 72.2634 21.4254 72.2453C21.4153 72.2167 21.408 72.1919 21.403 72.1733C21.3979 72.1544 21.394 72.1377 21.3911 72.1243C21.3854 72.0982 21.3817 72.0761 21.3793 72.0607C21.3747 72.0303 21.3719 72.0038 21.3702 71.9861C21.3668 71.95 21.3646 71.9122 21.3629 71.8778C21.3611 71.8414 21.3595 71.7993 21.358 71.7516C21.3477 71.4249 21.338 71.1454 21.3297 70.904C21.304 70.1615 21.2908 69.7807 21.3118 69.5035C21.3291 69.2753 21.3678 69.1034 21.4103 68.9231C21.4153 68.9016 21.4206 68.8795 21.426 68.8566C21.464 68.6967 21.5116 68.4959 21.5746 68.1818C21.9033 66.018 22.6356 63.8867 24.3936 62.3381C26.186 60.7592 28.6039 60.1678 31.4042 60.1678C35.6154 60.1678 38.4323 61.0538 40.9081 61.8524L41.0298 61.8916C43.3772 62.6491 45.3375 63.278 48.2788 63.278H49.2385V64.2377V67.1998Z",fill:"#522B2A",stroke:"#522B2A",strokeWidth:1.91938,id:"path21",style:{stroke:"#d31f11",strokeOpacity:1,fill:"#d31f11",fillOpacity:1}}),A||(A=e.createElement("path",{d:"M32.4595 67.9576L32.6051 67.0418C32.7395 66.1965 32.2663 65.3719 31.4687 65.0615L27.4813 63.5094L23.8655 61.6767C23.4677 61.475 23.0097 61.4266 22.5785 61.5406L19.164 62.4432C18.5226 62.6127 18.0245 63.118 17.8641 63.7617L16.0482 71.0482C16.0035 71.2275 15.9864 71.4125 15.9975 71.597L16.284 76.3698C16.3199 76.9669 16.647 77.5081 17.1589 77.8174L20.5273 79.8526C20.7302 79.9752 20.9551 80.057 21.1894 80.0933L23.6891 80.4805L26.4399 80.9067C27.523 81.0744 28.537 80.3325 28.7048 79.2494C28.8726 78.1664 28.1306 77.1524 27.0475 76.9846L28.0306 77.1369C29.1137 77.3047 30.1277 76.5627 30.2954 75.4797C30.4632 74.3966 29.7213 73.3827 28.6382 73.2149L28.961 73.2649C30.044 73.4327 31.058 72.6907 31.2258 71.6076C31.3936 70.5246 29.9265 69.3983 28.8435 69.2305L30.385 69.4693C31.3748 69.6226 32.3022 68.9468 32.4595 67.9576Z",fill:"#F8F8F8",id:"path22"})),e.createElement("path",{d:"M32.6051 67.0418L33.5032 67.1846L32.6051 67.0418ZM32.4595 67.9576L31.5614 67.8148L32.4595 67.9576ZM25.6511 67.8157C25.1548 67.7389 24.6902 68.0789 24.6133 68.5752C24.5364 69.0715 24.8764 69.5361 25.3727 69.613L25.6511 67.8157ZM22.5785 61.5406L22.3461 60.6614L22.3461 60.6614L22.5785 61.5406ZM19.164 62.4432L18.9316 61.564L18.9316 61.564L19.164 62.4432ZM17.1589 77.8174L17.6292 77.0391L17.1589 77.8174ZM20.5273 79.8526L20.9976 79.0743L20.5273 79.8526ZM25.0435 71.7378C24.5472 71.6609 24.0826 72.0009 24.0057 72.4972C23.9288 72.9935 24.2688 73.4582 24.7651 73.535L25.0435 71.7378ZM24.4359 75.6598C23.9396 75.583 23.475 75.923 23.3981 76.4192C23.3212 76.9155 23.6612 77.3802 24.1575 77.4571L24.4359 75.6598ZM23.6891 80.4805L23.8283 79.5819L23.8283 79.5819L23.6891 80.4805ZM21.1894 80.0933L21.0502 80.9919L21.0502 80.9919L21.1894 80.0933ZM17.8641 63.7617L18.7464 63.9816L17.8641 63.7617ZM16.0482 71.0482L16.9306 71.2681L16.0482 71.0482ZM15.9975 71.597L15.0898 71.6515L15.9975 71.597ZM16.284 76.3698L17.1917 76.3153L16.284 76.3698ZM23.8655 61.6767L23.4544 62.4878L23.4544 62.4878L23.8655 61.6767ZM27.4813 63.5094L27.0702 64.3205L27.1099 64.3406L27.1515 64.3568L27.4813 63.5094ZM31.4687 65.0615L31.1388 65.9089L31.1388 65.9089L31.4687 65.0615ZM31.707 66.899L31.5614 67.8148L33.3576 68.1004L33.5032 67.1846L31.707 66.899ZM30.5242 68.5707L28.9827 68.3319L28.7043 70.1291L30.2457 70.3679L30.5242 68.5707ZM28.9827 68.3319L25.6511 67.8157L25.3727 69.613L28.7043 70.1291L28.9827 68.3319ZM22.3461 60.6614L18.9316 61.564L19.3964 63.3223L22.8109 62.4197L22.3461 60.6614ZM16.6887 78.5957L20.0571 80.6309L20.9976 79.0743L17.6292 77.0391L16.6887 78.5957ZM29.1002 72.3662L28.7774 72.3162L28.499 74.1135L28.8218 74.1635L29.1002 72.3662ZM28.7774 72.3162L25.0435 71.7378L24.7651 73.535L28.499 74.1135L28.7774 72.3162ZM30.3272 71.4684C30.2363 72.0552 29.6869 72.4571 29.1002 72.3662L28.8218 74.1635C30.4011 74.4082 31.8797 73.3262 32.1244 71.7469L30.3272 71.4684ZM28.7043 70.1291C29.04 70.1811 29.5186 70.4088 29.8916 70.7483C30.2903 71.1112 30.341 71.3794 30.3272 71.4684L32.1244 71.7469C32.2784 70.7528 31.6795 69.9164 31.1158 69.4033C30.5265 68.867 29.7301 68.4477 28.9827 68.3319L28.7043 70.1291ZM28.1698 76.2383L27.1868 76.086L26.9083 77.8832L27.8914 78.0355L28.1698 76.2383ZM27.1868 76.086L24.4359 75.6598L24.1575 77.4571L26.9083 77.8832L27.1868 76.086ZM29.3968 75.3405C29.3059 75.9272 28.7566 76.3292 28.1698 76.2383L27.8914 78.0355C29.4707 78.2802 30.9494 77.1982 31.1941 75.6189L29.3968 75.3405ZM28.499 74.1135C29.0858 74.2044 29.4877 74.7537 29.3968 75.3405L31.1941 75.6189C31.4387 74.0396 30.3568 72.5609 28.7774 72.3162L28.499 74.1135ZM27.8061 79.1102C27.7152 79.697 27.1659 80.0989 26.5792 80.008L26.3007 81.8053C27.8801 82.05 29.3587 80.968 29.6034 79.3887L27.8061 79.1102ZM26.9083 77.8832C27.4951 77.9741 27.897 78.5235 27.8061 79.1102L29.6034 79.3887C29.8481 77.8093 28.7661 76.3307 27.1868 76.086L26.9083 77.8832ZM26.5792 80.008L23.8283 79.5819L23.5499 81.3791L26.3007 81.8053L26.5792 80.008ZM21.0502 80.9919L23.5499 81.3791L23.8283 79.5819L21.3286 79.1946L21.0502 80.9919ZM16.9817 63.5418L15.1659 70.8283L16.9306 71.2681L18.7464 63.9816L16.9817 63.5418ZM15.0898 71.6515L15.3763 76.4243L17.1917 76.3153L16.9052 71.5425L15.0898 71.6515ZM23.4544 62.4878L27.0702 64.3205L27.8924 62.6983L24.2766 60.8656L23.4544 62.4878ZM27.1515 64.3568L31.1388 65.9089L31.7985 64.214L27.8112 62.662L27.1515 64.3568ZM15.1659 70.8283C15.0988 71.0972 15.0732 71.3748 15.0898 71.6515L16.9052 71.5425C16.8997 71.4503 16.9082 71.3577 16.9306 71.2681L15.1659 70.8283ZM20.0571 80.6309C20.3614 80.8148 20.6988 80.9374 21.0502 80.9919L21.3286 79.1946C21.2115 79.1765 21.099 79.1356 20.9976 79.0743L20.0571 80.6309ZM17.6292 77.0391C17.3732 76.8845 17.2097 76.6138 17.1917 76.3153L15.3763 76.4243C15.4301 77.3199 15.9208 78.1318 16.6887 78.5957L17.6292 77.0391ZM18.9316 61.564C17.9696 61.8183 17.2223 62.5763 16.9817 63.5418L18.7464 63.9816C18.8266 63.6597 19.0757 63.4071 19.3964 63.3223L18.9316 61.564ZM31.5614 67.8148C31.4828 68.3094 31.0191 68.6473 30.5242 68.5707L30.2457 70.3679C31.7304 70.5979 33.1217 69.5842 33.3576 68.1004L31.5614 67.8148ZM33.5032 67.1846C33.7047 65.9167 32.995 64.6798 31.7985 64.214L31.1388 65.9089C31.5376 66.0641 31.7742 66.4764 31.707 66.899L33.5032 67.1846ZM22.8109 62.4197C23.0265 62.3627 23.2555 62.3869 23.4544 62.4878L24.2766 60.8656C23.6799 60.5631 22.9929 60.4905 22.3461 60.6614L22.8109 62.4197Z",fill:"#522B2A",id:"path23",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("rect",{x:75.293,y:63.3613,width:3.33425,height:4.76747,rx:1.66713,transform:"rotate(73.1375 75.293 63.3613)",fill:"#A89595",stroke:"#522B2A",strokeWidth:1.81868,id:"rect23",style:{stroke:"#d31f11",strokeOpacity:1,fill:"#f8f8f8",fillOpacity:1}}),e.createElement("path",{d:"M56.916 67.1998V68.1595H57.8757C61.6808 68.1595 64.3203 67.3071 66.6876 66.5427L66.7047 66.5371L66.4098 65.6239L66.7047 66.5371L66.8975 66.4749C69.2435 65.7182 71.4083 65.0493 74.7503 65.0493C76.8498 65.0493 77.7877 65.4937 78.2713 65.9197C78.7824 66.37 79.2462 67.2007 79.5017 68.8977L79.5058 68.925L79.5115 68.952C79.5863 69.3083 79.6452 69.5064 79.691 69.6482C79.6978 69.6694 79.7016 69.6811 79.7048 69.6907C79.7079 69.7002 79.7104 69.7078 79.7145 69.7208L79.718 69.7318C79.7205 69.7711 79.7218 69.8694 79.7133 70.154C79.7092 70.2917 79.7036 70.4543 79.6967 70.6567C79.6927 70.7731 79.6882 70.9026 79.6834 71.0481C79.6691 71.0813 79.659 71.1101 79.6521 71.1314C79.6446 71.1545 79.639 71.1747 79.6349 71.1906C79.6308 71.2067 79.6275 71.2211 79.625 71.233C79.62 71.2564 79.6166 71.2765 79.6143 71.2913C79.6098 71.3203 79.6069 71.3461 79.6051 71.3644C79.6014 71.4015 79.5988 71.4406 79.5968 71.4771C79.5947 71.5155 79.5927 71.5596 79.5909 71.6096C79.5748 72.0488 79.5584 72.467 79.5423 72.8762C79.5314 73.1517 79.5207 73.4232 79.5104 73.6942C79.3077 73.2336 78.9708 72.8353 78.5322 72.5581C77.6947 72.0288 76.6273 72.0288 75.7898 72.5581C75.0455 73.0284 74.5942 73.8474 74.5942 74.7279V78.3069C74.5942 79.7404 75.0932 81.0443 76.0691 82.0037C77.0267 82.945 78.3057 83.4136 79.5717 83.4136C80.8376 83.4136 82.1166 82.945 83.0742 82.0037C84.0501 81.0443 84.5491 79.7404 84.5491 78.3069C84.5491 76.188 84.6056 74.7543 84.6706 73.1072C84.6807 72.8495 84.6911 72.5865 84.7015 72.3149C84.7137 72.2873 84.7227 72.2634 84.7291 72.2453C84.7393 72.2167 84.7465 72.1919 84.7515 72.1733C84.7567 72.1544 84.7605 72.1377 84.7634 72.1243C84.7691 72.0982 84.7728 72.0761 84.7752 72.0607C84.7799 72.0303 84.7826 72.0038 84.7843 71.9861C84.7877 71.95 84.79 71.9122 84.7917 71.8778C84.7935 71.8414 84.7951 71.7993 84.7966 71.7516C84.8068 71.4249 84.8165 71.1454 84.8249 70.904C84.8506 70.1615 84.8638 69.7807 84.8428 69.5035C84.8255 69.2753 84.7868 69.1034 84.7443 68.9231C84.7392 68.9016 84.734 68.8795 84.7285 68.8566C84.6906 68.6967 84.6429 68.4959 84.5799 68.1818C84.2513 66.018 83.5189 63.8867 81.7609 62.3381C79.9685 60.7592 77.5506 60.1678 74.7503 60.1678C70.5392 60.1678 67.7222 61.0538 65.2465 61.8524L65.1248 61.8916C62.7773 62.6491 60.817 63.278 57.8757 63.278H56.916V64.2377V67.1998Z",fill:"#522B2A",stroke:"#522B2A",strokeWidth:1.91938,id:"path24",style:{stroke:"#d31f11",strokeOpacity:1,fill:"#d31f11",fillOpacity:1}}),k||(k=e.createElement("path",{d:"M74.0007 67.9576L73.8551 67.0418C73.7207 66.1965 74.1939 65.3719 74.9915 65.0615L78.9789 63.5094L82.5947 61.6767C82.9925 61.475 83.4505 61.4266 83.8817 61.5406L87.2962 62.4432C87.9376 62.6127 88.4357 63.118 88.5961 63.7617L90.412 71.0482C90.4567 71.2275 90.4738 71.4125 90.4627 71.597L90.1762 76.3698C90.1403 76.9669 89.8132 77.5081 89.3013 77.8174L85.9329 79.8526C85.73 79.9752 85.5051 80.057 85.2708 80.0933L82.7711 80.4805L80.0203 80.9067C78.9372 81.0744 77.9232 80.3325 77.7554 79.2494C77.5877 78.1664 78.3296 77.1524 79.4127 76.9846L78.4296 77.1369C77.3465 77.3047 76.3325 76.5627 76.1648 75.4797C75.997 74.3966 76.7389 73.3827 77.822 73.2149L77.4992 73.2649C76.4162 73.4327 75.4022 72.6907 75.2344 71.6076C75.0666 70.5246 76.5337 69.3983 77.6167 69.2305L76.0753 69.4693C75.0854 69.6226 74.158 68.9468 74.0007 67.9576Z",fill:"#F8F8F8",id:"path25"})),e.createElement("path",{d:"M73.8551 67.0418L72.957 67.1846L73.8551 67.0418ZM74.0007 67.9576L74.8988 67.8148L74.0007 67.9576ZM80.8091 67.8157C81.3054 67.7389 81.77 68.0789 81.8469 68.5752C81.9238 69.0715 81.5838 69.5361 81.0875 69.613L80.8091 67.8157ZM83.8817 61.5406L84.1141 60.6614L84.1141 60.6614L83.8817 61.5406ZM87.2962 62.4432L87.5286 61.564L87.5286 61.564L87.2962 62.4432ZM89.3013 77.8174L88.831 77.0391L89.3013 77.8174ZM85.9329 79.8526L85.4626 79.0743L85.9329 79.8526ZM81.4167 71.7378C81.913 71.6609 82.3776 72.0009 82.4545 72.4972C82.5314 72.9935 82.1914 73.4582 81.6951 73.535L81.4167 71.7378ZM82.0243 75.6598C82.5206 75.583 82.9852 75.923 83.0621 76.4193C83.139 76.9155 82.799 77.3802 82.3027 77.4571L82.0243 75.6598ZM82.7711 80.4805L82.6319 79.5819L82.6319 79.5819L82.7711 80.4805ZM85.2708 80.0933L85.41 80.9919L85.41 80.9919L85.2708 80.0933ZM88.5961 63.7617L87.7138 63.9816L88.5961 63.7617ZM90.412 71.0482L89.5296 71.2681L90.412 71.0482ZM90.4627 71.597L91.3704 71.6515L90.4627 71.597ZM90.1762 76.3698L89.2685 76.3153L90.1762 76.3698ZM82.5947 61.6767L83.0058 62.4878L83.0058 62.4878L82.5947 61.6767ZM78.9789 63.5094L79.39 64.3205L79.3503 64.3406L79.3087 64.3568L78.9789 63.5094ZM74.9915 65.0615L75.3214 65.9089L75.3214 65.9089L74.9915 65.0615ZM74.7532 66.899L74.8988 67.8148L73.1026 68.1004L72.957 67.1846L74.7532 66.899ZM75.936 68.5707L77.4775 68.3319L77.7559 70.1291L76.2145 70.3679L75.936 68.5707ZM77.4775 68.3319L80.8091 67.8157L81.0875 69.613L77.7559 70.1291L77.4775 68.3319ZM84.1141 60.6614L87.5286 61.564L87.0638 63.3223L83.6493 62.4197L84.1141 60.6614ZM89.7715 78.5957L86.4031 80.6309L85.4626 79.0743L88.831 77.0391L89.7715 78.5957ZM77.36 72.3662L77.6828 72.3162L77.9612 74.1135L77.6385 74.1635L77.36 72.3662ZM77.6828 72.3162L81.4167 71.7378L81.6951 73.535L77.9612 74.1135L77.6828 72.3162ZM76.133 71.4684C76.2239 72.0552 76.7733 72.4571 77.36 72.3662L77.6385 74.1635C76.0591 74.4082 74.5805 73.3262 74.3358 71.7469L76.133 71.4684ZM77.7559 70.1291C77.4202 70.1811 76.9417 70.4088 76.5686 70.7483C76.1699 71.1112 76.1193 71.3794 76.133 71.4684L74.3358 71.7469C74.1818 70.7528 74.7807 69.9164 75.3444 69.4033C75.9337 68.867 76.7301 68.4477 77.4775 68.3319L77.7559 70.1291ZM78.2904 76.2383L79.2734 76.086L79.5519 77.8832L78.5688 78.0355L78.2904 76.2383ZM79.2734 76.086L82.0243 75.6598L82.3027 77.4571L79.5519 77.8832L79.2734 76.086ZM77.0634 75.3405C77.1543 75.9272 77.7036 76.3292 78.2904 76.2383L78.5688 78.0355C76.9895 78.2802 75.5108 77.1982 75.2661 75.6189L77.0634 75.3405ZM77.9612 74.1135C77.3745 74.2044 76.9725 74.7537 77.0634 75.3405L75.2661 75.6189C75.0215 74.0396 76.1034 72.5609 77.6828 72.3162L77.9612 74.1135ZM78.6541 79.1102C78.745 79.697 79.2943 80.0989 79.881 80.008L80.1595 81.8053C78.5801 82.05 77.1015 80.968 76.8568 79.3887L78.6541 79.1102ZM79.5519 77.8832C78.9651 77.9741 78.5632 78.5235 78.6541 79.1102L76.8568 79.3887C76.6121 77.8093 77.6941 76.3307 79.2734 76.086L79.5519 77.8832ZM79.881 80.008L82.6319 79.5819L82.9103 81.3791L80.1595 81.8053L79.881 80.008ZM85.41 80.9919L82.9103 81.3791L82.6319 79.5819L85.1316 79.1946L85.41 80.9919ZM89.4785 63.5418L91.2944 70.8283L89.5296 71.2681L87.7138 63.9816L89.4785 63.5418ZM91.3704 71.6515L91.0839 76.4243L89.2685 76.3153L89.555 71.5425L91.3704 71.6515ZM83.0058 62.4878L79.39 64.3205L78.5678 62.6983L82.1836 60.8656L83.0058 62.4878ZM79.3087 64.3568L75.3214 65.9089L74.6617 64.214L78.649 62.662L79.3087 64.3568ZM91.2944 70.8283C91.3614 71.0972 91.387 71.3748 91.3704 71.6515L89.555 71.5425C89.5605 71.4503 89.552 71.3577 89.5296 71.2681L91.2944 70.8283ZM86.4031 80.6309C86.0988 80.8148 85.7614 80.9374 85.41 80.9919L85.1316 79.1946C85.2487 79.1765 85.3612 79.1356 85.4626 79.0743L86.4031 80.6309ZM88.831 77.0391C89.087 76.8845 89.2506 76.6138 89.2685 76.3153L91.0839 76.4243C91.0301 77.3199 90.5394 78.1318 89.7715 78.5957L88.831 77.0391ZM87.5286 61.564C88.4906 61.8183 89.2379 62.5763 89.4785 63.5418L87.7138 63.9816C87.6336 63.6597 87.3845 63.4071 87.0638 63.3223L87.5286 61.564ZM74.8988 67.8148C74.9774 68.3094 75.4411 68.6473 75.936 68.5707L76.2145 70.3679C74.7298 70.5979 73.3385 69.5842 73.1026 68.1004L74.8988 67.8148ZM72.957 67.1846C72.7555 65.9167 73.4653 64.6798 74.6617 64.214L75.3214 65.9089C74.9226 66.0641 74.686 66.4764 74.7532 66.899L72.957 67.1846ZM83.6493 62.4197C83.4337 62.3627 83.2047 62.3869 83.0058 62.4878L82.1836 60.8656C82.7803 60.5631 83.4673 60.4905 84.1141 60.6614L83.6493 62.4197Z",fill:"#522B2A",id:"path26",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("path",{d:"M37.8289 41.5071L39.3217 49.6111",stroke:"#522B2A",strokeWidth:2.13448,strokeLinecap:"round",id:"path27",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M68.7522 41.5071L67.2593 49.6111",stroke:"#522B2A",strokeWidth:2.13448,strokeLinecap:"round",id:"path28",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M71.5208 5.95386L71.8128 8.3997C71.8326 8.56483 71.7675 8.72875 71.6399 8.83539L68.6986 11.2932M98.5754 23.1423L93.7564 25.8108C93.6121 25.8908 93.4372 25.893 93.2909 25.8167L88.4574 23.2977C88.2776 23.204 88.0587 23.2302 87.9061 23.3638L80.4786 29.8656M24.0249 5.95386L25.6001 11.0577C25.6458 11.2059 25.7588 11.3238 25.9048 11.3759L30.0447 12.8521M13.0828 1.62671L15.3465 7.26821C15.403 7.40908 15.5214 7.51595 15.6673 7.5578L20.766 9.02029C20.907 9.06076 21.0227 9.16213 21.0813 9.2967L23.1406 14.0265C23.1917 14.1437 23.2863 14.2365 23.4046 14.2851L28.8947 16.5417M4.18481 31.5562L9.2311 33.8778C9.31408 33.916 9.40606 33.9303 9.49672 33.9192L14.5556 33.2966L20.2425 32.0614C20.3736 32.033 20.5107 32.0593 20.6219 32.1343L24.9263 35.0371M6.22894 61.3655L7.93224 58.838C8.02365 58.7023 8.17651 58.621 8.34007 58.621H12.0201C12.1783 58.621 12.3268 58.5449 12.4192 58.4165L14.5106 55.5114C14.6202 55.3591 14.8069 55.2825 14.9918 55.3138L18.3151 55.8765M93.5252 29.3926L88.9789 27.6483C88.8035 27.581 88.6051 27.6194 88.4676 27.7474L84.026 31.8809M97.3295 53.2366H93.3147C93.1573 53.2366 93.0095 53.1614 92.9169 53.0341L89.7993 48.7469C89.7068 48.6196 89.5589 48.5443 89.4016 48.5443H84.026",stroke:"#522B2A",strokeWidth:1.9672,strokeLinecap:"round",id:"path29",style:{stroke:"#d31f11",strokeOpacity:1}}),e.createElement("path",{d:"M88.3344 6.70574C86.0446 9.10705 77.7468 17.4432 77.9835 17.9131C78.179 18.3014 87.7481 11.0443 90.4225 9.0804C93.4239 6.87646 94.9339 5.22416 93.8349 3.97434C92.7359 2.72451 90.904 4.01086 88.3344 6.70574Z",fill:"#522B2A",id:"path30",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("path",{d:"M12.5116 47.1613C14.9024 46.4678 21.8679 45.8467 21.8571 45.329C21.8481 44.9014 13.7589 44.4774 11.4101 44.6636C8.77421 44.8726 6.71336 46.1453 7.6876 47.6947C8.54246 49.0542 9.97203 47.8979 12.5116 47.1613Z",fill:"#522B2A",id:"path31",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("path",{d:"M15.0449 19.1228C17.6993 20.929 25.9918 24.4754 25.7716 25.1058C25.5897 25.6266 15.5014 22.9124 12.6958 21.745C9.54724 20.4349 7.52911 18.0504 9.34314 16.5401C10.9349 15.2148 12.2255 17.2043 15.0449 19.1228Z",fill:"#522B2A",id:"path32",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("path",{d:"M14.9676 42.4936C16.1781 42.7619 20.4206 43.8616 20.5793 43.5837C20.7104 43.3541 16.7492 41.2651 15.6676 40.6588C14.4537 39.9784 13.6282 39.8254 13.2598 40.7911C12.8913 41.7567 13.609 42.1925 14.9676 42.4936Z",fill:"#522B2A",id:"path33",style:{fill:"#d31f11",fillOpacity:1}}),e.createElement("path",{d:"M84.4338 16.3325C82.9861 17.0119 77.787 19.2297 77.8438 19.6386C77.8907 19.9763 83.5816 18.9904 85.1638 18.7578C86.9394 18.4968 87.903 18.003 87.5188 16.7265C87.1347 15.45 86.0585 15.5701 84.4338 16.3325Z",fill:"#522B2A",id:"path34",style:{fill:"#d31f11",fillOpacity:1}})),P||(P=e.createElement("defs",{id:"defs34"},e.createElement("clipPath",{id:"clip0_16_6462"},e.createElement("rect",{width:106.632,height:85.3057,fill:"white",transform:"translate(0.183838)",id:"rect34"})))))}const D=e.forwardRef(z);i.p;var F,B,V;const N=["title","titleId"];function U(){return U=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},U.apply(null,arguments)}function j(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,N);return e.createElement("svg",U({width:155,height:89,viewBox:"0 0 155 89",fill:"none",id:"svg3",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,F||(F=e.createElement("defs",{id:"defs3"})),B||(B=e.createElement("path",{d:"M1.82 16.3057C1.732 16.3057 1.664 16.2817 1.616 16.2337C1.568 16.1777 1.544 16.1097 1.544 16.0297V8.18166C1.544 8.10166 1.568 8.03766 1.616 7.98966C1.664 7.93366 1.732 7.90566 1.82 7.90566H2.456C2.536 7.90566 2.6 7.93366 2.648 7.98966C2.696 8.03766 2.72 8.10166 2.72 8.18166V15.2617H6.716C6.804 15.2617 6.872 15.2897 6.92 15.3457C6.968 15.3937 6.992 15.4617 6.992 15.5497V16.0297C6.992 16.1097 6.968 16.1777 6.92 16.2337C6.872 16.2817 6.804 16.3057 6.716 16.3057H1.82ZM10.3848 16.4257C9.56081 16.4257 8.90481 16.1737 8.41681 15.6697C7.92881 15.1577 7.66081 14.4617 7.61281 13.5817C7.60481 13.4777 7.60081 13.3457 7.60081 13.1857C7.60081 13.0177 7.60481 12.8817 7.61281 12.7777C7.64481 12.2097 7.77681 11.7137 8.00881 11.2897C8.24081 10.8577 8.55681 10.5257 8.95681 10.2937C9.36481 10.0617 9.84081 9.94566 10.3848 9.94566C10.9928 9.94566 11.5008 10.0737 11.9088 10.3297C12.3248 10.5857 12.6408 10.9497 12.8568 11.4217C13.0728 11.8937 13.1808 12.4457 13.1808 13.0777V13.2817C13.1808 13.3697 13.1528 13.4377 13.0968 13.4857C13.0488 13.5337 12.9848 13.5577 12.9048 13.5577H8.75281C8.75281 13.5657 8.75281 13.5817 8.75281 13.6057C8.75281 13.6297 8.75281 13.6497 8.75281 13.6657C8.76881 13.9937 8.84081 14.3017 8.96881 14.5897C9.09681 14.8697 9.28081 15.0977 9.52081 15.2737C9.76081 15.4497 10.0488 15.5377 10.3848 15.5377C10.6728 15.5377 10.9128 15.4937 11.1048 15.4057C11.2968 15.3177 11.4528 15.2217 11.5728 15.1177C11.6928 15.0057 11.7728 14.9217 11.8128 14.8657C11.8848 14.7617 11.9408 14.7017 11.9808 14.6857C12.0208 14.6617 12.0848 14.6497 12.1728 14.6497H12.7488C12.8288 14.6497 12.8928 14.6737 12.9408 14.7217C12.9968 14.7617 13.0208 14.8217 13.0128 14.9017C13.0048 15.0217 12.9408 15.1697 12.8208 15.3457C12.7008 15.5137 12.5288 15.6817 12.3048 15.8497C12.0808 16.0177 11.8088 16.1577 11.4888 16.2697C11.1688 16.3737 10.8008 16.4257 10.3848 16.4257ZM8.75281 12.7297H12.0408V12.6937C12.0408 12.3337 11.9728 12.0137 11.8368 11.7337C11.7088 11.4537 11.5208 11.2337 11.2728 11.0737C11.0248 10.9057 10.7288 10.8217 10.3848 10.8217C10.0408 10.8217 9.74481 10.9057 9.49681 11.0737C9.25681 11.2337 9.07281 11.4537 8.94481 11.7337C8.81681 12.0137 8.75281 12.3337 8.75281 12.6937V12.7297ZM16.4567 16.3057C16.3367 16.3057 16.2407 16.2777 16.1687 16.2217C16.1047 16.1657 16.0527 16.0937 16.0127 16.0057L13.7927 10.4377C13.7767 10.3977 13.7687 10.3577 13.7687 10.3177C13.7687 10.2457 13.7927 10.1857 13.8407 10.1377C13.8887 10.0897 13.9487 10.0657 14.0207 10.0657H14.5967C14.6847 10.0657 14.7527 10.0897 14.8007 10.1377C14.8487 10.1857 14.8767 10.2297 14.8847 10.2697L16.7207 14.9977L18.5447 10.2697C18.5607 10.2297 18.5887 10.1857 18.6287 10.1377C18.6767 10.0897 18.7447 10.0657 18.8327 10.0657H19.4207C19.4847 10.0657 19.5407 10.0897 19.5887 10.1377C19.6447 10.1857 19.6727 10.2457 19.6727 10.3177C19.6727 10.3577 19.6647 10.3977 19.6487 10.4377L17.4167 16.0057C17.3847 16.0937 17.3327 16.1657 17.2607 16.2217C17.1967 16.2777 17.1007 16.3057 16.9727 16.3057H16.4567ZM23.0706 16.4257C22.2466 16.4257 21.5906 16.1737 21.1026 15.6697C20.6146 15.1577 20.3466 14.4617 20.2986 13.5817C20.2906 13.4777 20.2866 13.3457 20.2866 13.1857C20.2866 13.0177 20.2906 12.8817 20.2986 12.7777C20.3306 12.2097 20.4626 11.7137 20.6946 11.2897C20.9266 10.8577 21.2426 10.5257 21.6426 10.2937C22.0506 10.0617 22.5266 9.94566 23.0706 9.94566C23.6786 9.94566 24.1866 10.0737 24.5946 10.3297C25.0106 10.5857 25.3266 10.9497 25.5426 11.4217C25.7586 11.8937 25.8666 12.4457 25.8666 13.0777V13.2817C25.8666 13.3697 25.8386 13.4377 25.7826 13.4857C25.7346 13.5337 25.6706 13.5577 25.5906 13.5577H21.4386C21.4386 13.5657 21.4386 13.5817 21.4386 13.6057C21.4386 13.6297 21.4386 13.6497 21.4386 13.6657C21.4546 13.9937 21.5266 14.3017 21.6546 14.5897C21.7826 14.8697 21.9666 15.0977 22.2066 15.2737C22.4466 15.4497 22.7346 15.5377 23.0706 15.5377C23.3586 15.5377 23.5986 15.4937 23.7906 15.4057C23.9826 15.3177 24.1386 15.2217 24.2586 15.1177C24.3786 15.0057 24.4586 14.9217 24.4986 14.8657C24.5706 14.7617 24.6266 14.7017 24.6666 14.6857C24.7066 14.6617 24.7706 14.6497 24.8586 14.6497H25.4346C25.5146 14.6497 25.5786 14.6737 25.6266 14.7217C25.6826 14.7617 25.7066 14.8217 25.6986 14.9017C25.6906 15.0217 25.6266 15.1697 25.5066 15.3457C25.3866 15.5137 25.2146 15.6817 24.9906 15.8497C24.7666 16.0177 24.4946 16.1577 24.1746 16.2697C23.8546 16.3737 23.4866 16.4257 23.0706 16.4257ZM21.4386 12.7297H24.7266V12.6937C24.7266 12.3337 24.6586 12.0137 24.5226 11.7337C24.3946 11.4537 24.2066 11.2337 23.9586 11.0737C23.7106 10.9057 23.4146 10.8217 23.0706 10.8217C22.7266 10.8217 22.4306 10.9057 22.1826 11.0737C21.9426 11.2337 21.7586 11.4537 21.6306 11.7337C21.5026 12.0137 21.4386 12.3337 21.4386 12.6937V12.7297ZM27.4694 16.3057C27.3894 16.3057 27.3214 16.2817 27.2654 16.2337C27.2174 16.1777 27.1934 16.1097 27.1934 16.0297V8.06166C27.1934 7.98166 27.2174 7.91766 27.2654 7.86966C27.3214 7.81366 27.3894 7.78566 27.4694 7.78566H28.0334C28.1214 7.78566 28.1894 7.81366 28.2374 7.86966C28.2854 7.91766 28.3094 7.98166 28.3094 8.06166V16.0297C28.3094 16.1097 28.2854 16.1777 28.2374 16.2337C28.1894 16.2817 28.1214 16.3057 28.0334 16.3057H27.4694ZM35.7168 16.4257C35.1648 16.4257 34.6968 16.3417 34.3128 16.1737C33.9368 15.9977 33.6288 15.7577 33.3888 15.4537C33.1488 15.1497 32.9728 14.8017 32.8608 14.4097C32.7568 14.0177 32.6968 13.6017 32.6808 13.1617C32.6728 12.9457 32.6648 12.7177 32.6568 12.4777C32.6568 12.2377 32.6568 11.9977 32.6568 11.7577C32.6648 11.5097 32.6728 11.2737 32.6808 11.0497C32.6888 10.6097 32.7488 10.1937 32.8608 9.80166C32.9808 9.40166 33.1568 9.05366 33.3888 8.75766C33.6288 8.45366 33.9408 8.21766 34.3248 8.04966C34.7088 7.87366 35.1728 7.78566 35.7168 7.78566C36.2688 7.78566 36.7328 7.87366 37.1088 8.04966C37.4928 8.21766 37.8048 8.45366 38.0448 8.75766C38.2848 9.05366 38.4608 9.40166 38.5728 9.80166C38.6928 10.1937 38.7568 10.6097 38.7648 11.0497C38.7728 11.2737 38.7768 11.5097 38.7768 11.7577C38.7848 11.9977 38.7848 12.2377 38.7768 12.4777C38.7768 12.7177 38.7728 12.9457 38.7648 13.1617C38.7568 13.6017 38.6928 14.0177 38.5728 14.4097C38.4608 14.8017 38.2848 15.1497 38.0448 15.4537C37.8128 15.7577 37.5048 15.9977 37.1208 16.1737C36.7448 16.3417 36.2768 16.4257 35.7168 16.4257ZM35.7168 15.4057C36.3408 15.4057 36.8008 15.2017 37.0968 14.7937C37.4008 14.3777 37.5568 13.8137 37.5648 13.1017C37.5808 12.8697 37.5888 12.6457 37.5888 12.4297C37.5888 12.2057 37.5888 11.9857 37.5888 11.7697C37.5888 11.5457 37.5808 11.3257 37.5648 11.1097C37.5568 10.4137 37.4008 9.85766 37.0968 9.44166C36.8008 9.01766 36.3408 8.80566 35.7168 8.80566C35.1008 8.80566 34.6408 9.01766 34.3368 9.44166C34.0408 9.85766 33.8848 10.4137 33.8688 11.1097C33.8688 11.3257 33.8648 11.5457 33.8568 11.7697C33.8568 11.9857 33.8568 12.2057 33.8568 12.4297C33.8648 12.6457 33.8688 12.8697 33.8688 13.1017C33.8848 13.8137 34.0448 14.3777 34.3488 14.7937C34.6528 15.2017 35.1088 15.4057 35.7168 15.4057ZM42.722 16.3057C42.642 16.3057 42.574 16.2817 42.518 16.2337C42.47 16.1777 42.446 16.1097 42.446 16.0297V9.30966L40.454 10.8457C40.39 10.8937 40.322 10.9137 40.25 10.9057C40.178 10.8977 40.118 10.8617 40.07 10.7977L39.758 10.4017C39.71 10.3297 39.69 10.2577 39.698 10.1857C39.714 10.1137 39.754 10.0537 39.818 10.0057L42.434 7.98966C42.49 7.94966 42.542 7.92566 42.59 7.91766C42.638 7.90966 42.69 7.90566 42.746 7.90566H43.358C43.438 7.90566 43.502 7.93366 43.55 7.98966C43.598 8.03766 43.622 8.10166 43.622 8.18166V16.0297C43.622 16.1097 43.598 16.1777 43.55 16.2337C43.502 16.2817 43.438 16.3057 43.358 16.3057H42.722Z",fill:"#88836D",id:"path1"})),e.createElement("path",{d:"M8.948 40.5457C7.444 40.5457 6.164 40.2977 5.108 39.8017C4.068 39.2897 3.26 38.5537 2.684 37.5937C2.108 36.6177 1.788 35.4337 1.724 34.0417C1.708 33.3857 1.7 32.6817 1.7 31.9297C1.7 31.1777 1.708 30.4577 1.724 29.7697C1.788 28.3937 2.108 27.2257 2.684 26.2657C3.276 25.2897 4.1 24.5457 5.156 24.0337C6.212 23.5217 7.476 23.2657 8.948 23.2657C10.02 23.2657 10.996 23.4017 11.876 23.6737C12.756 23.9457 13.516 24.3377 14.156 24.8497C14.796 25.3617 15.292 25.9617 15.644 26.6497C15.996 27.3377 16.188 28.1057 16.22 28.9537C16.22 29.0977 16.164 29.2177 16.052 29.3137C15.956 29.4097 15.836 29.4577 15.692 29.4577H12.956C12.764 29.4577 12.612 29.4097 12.5 29.3137C12.388 29.2177 12.3 29.0577 12.236 28.8337C11.996 27.8897 11.596 27.2417 11.036 26.8897C10.476 26.5377 9.78 26.3617 8.948 26.3617C7.956 26.3617 7.172 26.6337 6.596 27.1777C6.02 27.7217 5.708 28.6257 5.66 29.8897C5.612 31.2017 5.612 32.5457 5.66 33.9217C5.708 35.1857 6.02 36.0897 6.596 36.6337C7.172 37.1777 7.956 37.4497 8.948 37.4497C9.78 37.4497 10.476 37.2737 11.036 36.9217C11.612 36.5537 12.012 35.9057 12.236 34.9777C12.3 34.7377 12.388 34.5777 12.5 34.4977C12.612 34.4017 12.764 34.3537 12.956 34.3537H15.692C15.836 34.3537 15.956 34.4017 16.052 34.4977C16.164 34.5937 16.22 34.7137 16.22 34.8577C16.188 35.7057 15.996 36.4737 15.644 37.1617C15.292 37.8497 14.796 38.4497 14.156 38.9617C13.516 39.4737 12.756 39.8657 11.876 40.1377C10.996 40.4097 10.02 40.5457 8.948 40.5457ZM21.6046 40.5457C20.7566 40.5457 19.9966 40.3857 19.3246 40.0657C18.6526 39.7297 18.1166 39.2817 17.7166 38.7217C17.3166 38.1617 17.1166 37.5377 17.1166 36.8497C17.1166 35.7137 17.5726 34.8177 18.4846 34.1617C19.4126 33.5057 20.6286 33.0577 22.1326 32.8177L25.2766 32.3617V31.9297C25.2766 31.3057 25.1326 30.8257 24.8446 30.4897C24.5566 30.1537 24.0526 29.9857 23.3326 29.9857C22.8046 29.9857 22.3806 30.0897 22.0606 30.2977C21.7406 30.5057 21.4926 30.7777 21.3166 31.1137C21.1886 31.3217 21.0046 31.4257 20.7646 31.4257H18.4846C18.3086 31.4257 18.1726 31.3777 18.0766 31.2817C17.9806 31.1697 17.9406 31.0417 17.9566 30.8977C17.9566 30.6257 18.0606 30.3057 18.2686 29.9377C18.4766 29.5697 18.7966 29.2097 19.2286 28.8577C19.6606 28.4897 20.2126 28.1857 20.8846 27.9457C21.5566 27.7057 22.3806 27.5857 23.3566 27.5857C24.3646 27.5857 25.2286 27.7057 25.9486 27.9457C26.6686 28.1857 27.2446 28.5217 27.6766 28.9537C28.1086 29.3857 28.4286 29.8897 28.6366 30.4657C28.8446 31.0257 28.9486 31.6337 28.9486 32.2897V39.7057C28.9486 39.8817 28.8926 40.0257 28.7806 40.1377C28.6686 40.2497 28.5246 40.3057 28.3486 40.3057H25.9966C25.8366 40.3057 25.7006 40.2497 25.5886 40.1377C25.4766 40.0257 25.4206 39.8817 25.4206 39.7057V38.8177C25.2126 39.1217 24.9326 39.4097 24.5806 39.6817C24.2286 39.9377 23.8046 40.1457 23.3086 40.3057C22.8286 40.4657 22.2606 40.5457 21.6046 40.5457ZM22.5646 38.0497C23.0926 38.0497 23.5646 37.9377 23.9806 37.7137C24.3966 37.4897 24.7246 37.1457 24.9646 36.6817C25.2046 36.2177 25.3246 35.6337 25.3246 34.9297V34.5217L23.0926 34.8817C22.2286 35.0257 21.5966 35.2417 21.1966 35.5297C20.7966 35.8177 20.5966 36.1697 20.5966 36.5857C20.5966 36.8897 20.6846 37.1537 20.8606 37.3777C21.0526 37.6017 21.3006 37.7697 21.6046 37.8817C21.9086 37.9937 22.2286 38.0497 22.5646 38.0497ZM31.7105 40.3057C31.5505 40.3057 31.4145 40.2497 31.3025 40.1377C31.1905 40.0257 31.1345 39.8817 31.1345 39.7057V28.4257C31.1345 28.2657 31.1905 28.1297 31.3025 28.0177C31.4145 27.8897 31.5505 27.8257 31.7105 27.8257H34.0625C34.2225 27.8257 34.3585 27.8897 34.4705 28.0177C34.5985 28.1297 34.6625 28.2657 34.6625 28.4257V29.3857C35.0625 28.8897 35.5505 28.5057 36.1265 28.2337C36.7185 27.9617 37.3985 27.8257 38.1665 27.8257H39.1985C39.3585 27.8257 39.4945 27.8817 39.6065 27.9937C39.7185 28.1057 39.7745 28.2497 39.7745 28.4257V30.4897C39.7745 30.6657 39.7185 30.8097 39.6065 30.9217C39.4945 31.0337 39.3585 31.0897 39.1985 31.0897H37.0865C36.3825 31.0897 35.8305 31.2897 35.4305 31.6897C35.0305 32.0737 34.8305 32.6257 34.8305 33.3457V39.7057C34.8305 39.8817 34.7745 40.0257 34.6625 40.1377C34.5505 40.2497 34.4065 40.3057 34.2305 40.3057H31.7105ZM46.2716 40.5457C44.4316 40.5457 42.9676 40.0337 41.8796 39.0097C40.8076 37.9857 40.2396 36.4977 40.1756 34.5457C40.1756 34.4177 40.1756 34.2497 40.1756 34.0417C40.1756 33.8177 40.1756 33.6417 40.1756 33.5137C40.2396 32.2817 40.5196 31.2257 41.0156 30.3457C41.5116 29.4497 42.2076 28.7697 43.1036 28.3057C43.9996 27.8257 45.0476 27.5857 46.2476 27.5857C47.5916 27.5857 48.7116 27.8657 49.6076 28.4257C50.5196 28.9697 51.1996 29.7217 51.6476 30.6817C52.1116 31.6257 52.3436 32.7137 52.3436 33.9457V34.4977C52.3436 34.6577 52.2796 34.7937 52.1516 34.9057C52.0396 35.0177 51.9036 35.0737 51.7436 35.0737H43.8956C43.8956 35.0897 43.8956 35.1217 43.8956 35.1697C43.8956 35.2017 43.8956 35.2337 43.8956 35.2657C43.9116 35.7777 44.0076 36.2497 44.1836 36.6817C44.3756 37.0977 44.6396 37.4337 44.9756 37.6897C45.3276 37.9457 45.7436 38.0737 46.2236 38.0737C46.6236 38.0737 46.9516 38.0177 47.2076 37.9057C47.4636 37.7937 47.6716 37.6577 47.8316 37.4977C48.0076 37.3377 48.1356 37.2017 48.2156 37.0897C48.3596 36.9297 48.4716 36.8337 48.5516 36.8017C48.6476 36.7537 48.7916 36.7297 48.9836 36.7297H51.4796C51.6396 36.7297 51.7676 36.7777 51.8636 36.8737C51.9756 36.9537 52.0236 37.0737 52.0076 37.2337C51.9916 37.4897 51.8556 37.8097 51.5996 38.1937C51.3596 38.5617 50.9996 38.9297 50.5196 39.2977C50.0396 39.6497 49.4396 39.9457 48.7196 40.1857C48.0156 40.4257 47.1996 40.5457 46.2716 40.5457ZM43.8956 32.8897H48.5996V32.8417C48.5996 32.2657 48.5036 31.7697 48.3116 31.3537C48.1356 30.9217 47.8716 30.5857 47.5196 30.3457C47.1676 30.1057 46.7436 29.9857 46.2476 29.9857C45.7516 29.9857 45.3276 30.1057 44.9756 30.3457C44.6236 30.5857 44.3516 30.9217 44.1596 31.3537C43.9836 31.7697 43.8956 32.2657 43.8956 32.8417V32.8897ZM55.8969 40.3057C55.7209 40.3057 55.5769 40.2497 55.4649 40.1377C55.3529 40.0257 55.2969 39.8817 55.2969 39.7057V30.6577H53.4249C53.2489 30.6577 53.1049 30.6017 52.9929 30.4897C52.8809 30.3777 52.8249 30.2337 52.8249 30.0577V28.4257C52.8249 28.2497 52.8809 28.1057 52.9929 27.9937C53.1049 27.8817 53.2489 27.8257 53.4249 27.8257H55.2969V26.9617C55.2969 25.9377 55.4889 25.0977 55.8729 24.4417C56.2569 23.7857 56.8169 23.3057 57.5529 23.0017C58.2889 22.6977 59.1929 22.5457 60.2649 22.5457H62.0169C62.1929 22.5457 62.3369 22.6017 62.4489 22.7137C62.5609 22.8257 62.6169 22.9697 62.6169 23.1457V24.7777C62.6169 24.9537 62.5609 25.0977 62.4489 25.2097C62.3369 25.3217 62.1929 25.3777 62.0169 25.3777H60.4089C59.8169 25.3777 59.4009 25.5217 59.1609 25.8097C58.9369 26.0977 58.8249 26.5217 58.8249 27.0817V27.8257H61.7769C61.9529 27.8257 62.0969 27.8817 62.2089 27.9937C62.3209 28.1057 62.3769 28.2497 62.3769 28.4257V30.0577C62.3769 30.2337 62.3209 30.3777 62.2089 30.4897C62.0969 30.6017 61.9529 30.6577 61.7769 30.6577H58.8249V39.7057C58.8249 39.8817 58.7689 40.0257 58.6569 40.1377C58.5449 40.2497 58.4089 40.3057 58.2489 40.3057H55.8969ZM64.0505 40.3057C63.8905 40.3057 63.7545 40.2497 63.6425 40.1377C63.5305 40.0257 63.4745 39.8817 63.4745 39.7057V28.4257C63.4745 28.2657 63.5305 28.1297 63.6425 28.0177C63.7545 27.8897 63.8905 27.8257 64.0505 27.8257H66.4025C66.5625 27.8257 66.6985 27.8897 66.8105 28.0177C66.9385 28.1297 67.0025 28.2657 67.0025 28.4257V29.3857C67.4025 28.8897 67.8905 28.5057 68.4665 28.2337C69.0585 27.9617 69.7385 27.8257 70.5065 27.8257H71.5385C71.6985 27.8257 71.8345 27.8817 71.9465 27.9937C72.0585 28.1057 72.1145 28.2497 72.1145 28.4257V30.4897C72.1145 30.6657 72.0585 30.8097 71.9465 30.9217C71.8345 31.0337 71.6985 31.0897 71.5385 31.0897H69.4265C68.7225 31.0897 68.1705 31.2897 67.7705 31.6897C67.3705 32.0737 67.1705 32.6257 67.1705 33.3457V39.7057C67.1705 39.8817 67.1145 40.0257 67.0025 40.1377C66.8905 40.2497 66.7465 40.3057 66.5705 40.3057H64.0505ZM78.6116 40.5457C76.7716 40.5457 75.3076 40.0337 74.2196 39.0097C73.1476 37.9857 72.5796 36.4977 72.5156 34.5457C72.5156 34.4177 72.5156 34.2497 72.5156 34.0417C72.5156 33.8177 72.5156 33.6417 72.5156 33.5137C72.5796 32.2817 72.8596 31.2257 73.3556 30.3457C73.8516 29.4497 74.5476 28.7697 75.4436 28.3057C76.3396 27.8257 77.3876 27.5857 78.5876 27.5857C79.9316 27.5857 81.0516 27.8657 81.9476 28.4257C82.8596 28.9697 83.5396 29.7217 83.9876 30.6817C84.4516 31.6257 84.6836 32.7137 84.6836 33.9457V34.4977C84.6836 34.6577 84.6196 34.7937 84.4916 34.9057C84.3796 35.0177 84.2436 35.0737 84.0836 35.0737H76.2356C76.2356 35.0897 76.2356 35.1217 76.2356 35.1697C76.2356 35.2017 76.2356 35.2337 76.2356 35.2657C76.2516 35.7777 76.3476 36.2497 76.5236 36.6817C76.7156 37.0977 76.9796 37.4337 77.3156 37.6897C77.6676 37.9457 78.0836 38.0737 78.5636 38.0737C78.9636 38.0737 79.2916 38.0177 79.5476 37.9057C79.8036 37.7937 80.0116 37.6577 80.1716 37.4977C80.3476 37.3377 80.4756 37.2017 80.5556 37.0897C80.6996 36.9297 80.8116 36.8337 80.8916 36.8017C80.9876 36.7537 81.1316 36.7297 81.3236 36.7297H83.8196C83.9796 36.7297 84.1076 36.7777 84.2036 36.8737C84.3156 36.9537 84.3636 37.0737 84.3476 37.2337C84.3316 37.4897 84.1956 37.8097 83.9396 38.1937C83.6996 38.5617 83.3396 38.9297 82.8596 39.2977C82.3796 39.6497 81.7796 39.9457 81.0596 40.1857C80.3556 40.4257 79.5396 40.5457 78.6116 40.5457ZM76.2356 32.8897H80.9396V32.8417C80.9396 32.2657 80.8436 31.7697 80.6516 31.3537C80.4756 30.9217 80.2116 30.5857 79.8596 30.3457C79.5076 30.1057 79.0836 29.9857 78.5876 29.9857C78.0916 29.9857 77.6676 30.1057 77.3156 30.3457C76.9636 30.5857 76.6916 30.9217 76.4996 31.3537C76.3236 31.7697 76.2356 32.2657 76.2356 32.8417V32.8897ZM91.9306 40.5457C90.0906 40.5457 88.6266 40.0337 87.5386 39.0097C86.4666 37.9857 85.8986 36.4977 85.8346 34.5457C85.8346 34.4177 85.8346 34.2497 85.8346 34.0417C85.8346 33.8177 85.8346 33.6417 85.8346 33.5137C85.8986 32.2817 86.1786 31.2257 86.6746 30.3457C87.1706 29.4497 87.8666 28.7697 88.7626 28.3057C89.6586 27.8257 90.7066 27.5857 91.9066 27.5857C93.2506 27.5857 94.3706 27.8657 95.2666 28.4257C96.1786 28.9697 96.8586 29.7217 97.3066 30.6817C97.7706 31.6257 98.0026 32.7137 98.0026 33.9457V34.4977C98.0026 34.6577 97.9386 34.7937 97.8106 34.9057C97.6986 35.0177 97.5626 35.0737 97.4026 35.0737H89.5546C89.5546 35.0897 89.5546 35.1217 89.5546 35.1697C89.5546 35.2017 89.5546 35.2337 89.5546 35.2657C89.5706 35.7777 89.6666 36.2497 89.8426 36.6817C90.0346 37.0977 90.2986 37.4337 90.6346 37.6897C90.9866 37.9457 91.4026 38.0737 91.8826 38.0737C92.2826 38.0737 92.6106 38.0177 92.8666 37.9057C93.1226 37.7937 93.3306 37.6577 93.4906 37.4977C93.6666 37.3377 93.7946 37.2017 93.8746 37.0897C94.0186 36.9297 94.1306 36.8337 94.2106 36.8017C94.3066 36.7537 94.4506 36.7297 94.6426 36.7297H97.1386C97.2986 36.7297 97.4266 36.7777 97.5226 36.8737C97.6346 36.9537 97.6826 37.0737 97.6666 37.2337C97.6506 37.4897 97.5146 37.8097 97.2586 38.1937C97.0186 38.5617 96.6586 38.9297 96.1786 39.2977C95.6986 39.6497 95.0986 39.9457 94.3786 40.1857C93.6746 40.4257 92.8586 40.5457 91.9306 40.5457ZM89.5546 32.8897H94.2586V32.8417C94.2586 32.2657 94.1626 31.7697 93.9706 31.3537C93.7946 30.9217 93.5306 30.5857 93.1786 30.3457C92.8266 30.1057 92.4026 29.9857 91.9066 29.9857C91.4106 29.9857 90.9866 30.1057 90.6346 30.3457C90.2826 30.5857 90.0106 30.9217 89.8186 31.3537C89.6426 31.7697 89.5546 32.2657 89.5546 32.8417V32.8897Z",fill:"#63B281",id:"path2",style:{fill:"#007191",fillOpacity:1}}),V||(V=e.createElement("path",{d:"M5.924 63.4657C4.94267 63.4657 4.12667 63.2843 3.476 62.9217C2.836 62.559 2.35067 62.0523 2.02 61.4017C1.68933 60.751 1.508 59.9937 1.476 59.1297C1.46533 58.6923 1.46 58.223 1.46 57.7217C1.46 57.2203 1.46533 56.7403 1.476 56.2817C1.508 55.4177 1.68933 54.6603 2.02 54.0097C2.35067 53.359 2.836 52.8523 3.476 52.4897C4.12667 52.127 4.94267 51.9457 5.924 51.9457C6.66 51.9457 7.30533 52.047 7.86 52.2497C8.41467 52.4523 8.87333 52.7243 9.236 53.0657C9.60933 53.407 9.892 53.791 10.084 54.2177C10.276 54.6337 10.3827 55.0657 10.404 55.5137C10.4147 55.6097 10.3827 55.6897 10.308 55.7537C10.244 55.8177 10.164 55.8497 10.068 55.8497H9.188C9.092 55.8497 9.00667 55.823 8.932 55.7697C8.868 55.7163 8.82 55.6203 8.788 55.4817C8.60667 54.6497 8.26533 54.079 7.764 53.7697C7.27333 53.4603 6.65467 53.3057 5.908 53.3057C5.05467 53.3057 4.37733 53.551 3.876 54.0417C3.37467 54.5217 3.10267 55.295 3.06 56.3617C3.028 57.2363 3.028 58.1323 3.06 59.0497C3.10267 60.1163 3.37467 60.895 3.876 61.3857C4.37733 61.8657 5.05467 62.1057 5.908 62.1057C6.65467 62.1057 7.27333 61.951 7.764 61.6417C8.26533 61.3323 8.60667 60.7617 8.788 59.9297C8.82 59.791 8.868 59.695 8.932 59.6417C9.00667 59.5883 9.092 59.5617 9.188 59.5617H10.068C10.164 59.5617 10.244 59.5937 10.308 59.6577C10.3827 59.7217 10.4147 59.8017 10.404 59.8977C10.3827 60.3457 10.276 60.783 10.084 61.2097C9.892 61.6257 9.60933 62.0043 9.236 62.3457C8.87333 62.687 8.41467 62.959 7.86 63.1617C7.30533 63.3643 6.66 63.4657 5.924 63.4657ZM15.4283 63.4657C14.6176 63.4657 13.9403 63.311 13.3963 63.0017C12.8523 62.6923 12.4363 62.2657 12.1483 61.7217C11.8603 61.167 11.7003 60.5377 11.6683 59.8337C11.6576 59.6523 11.6523 59.423 11.6523 59.1457C11.6523 58.8577 11.6576 58.6283 11.6683 58.4577C11.7003 57.743 11.8603 57.1137 12.1483 56.5697C12.4469 56.0257 12.8683 55.599 13.4123 55.2897C13.9563 54.9803 14.6283 54.8257 15.4283 54.8257C16.2283 54.8257 16.9003 54.9803 17.4443 55.2897C17.9883 55.599 18.4043 56.0257 18.6923 56.5697C18.9909 57.1137 19.1563 57.743 19.1883 58.4577C19.1989 58.6283 19.2043 58.8577 19.2043 59.1457C19.2043 59.423 19.1989 59.6523 19.1883 59.8337C19.1563 60.5377 18.9963 61.167 18.7083 61.7217C18.4203 62.2657 18.0043 62.6923 17.4603 63.0017C16.9163 63.311 16.2389 63.4657 15.4283 63.4657ZM15.4283 62.2337C16.0896 62.2337 16.6176 62.0257 17.0123 61.6097C17.4069 61.183 17.6203 60.5643 17.6523 59.7537C17.6629 59.5937 17.6683 59.391 17.6683 59.1457C17.6683 58.9003 17.6629 58.6977 17.6523 58.5377C17.6203 57.727 17.4069 57.1137 17.0123 56.6977C16.6176 56.271 16.0896 56.0577 15.4283 56.0577C14.7669 56.0577 14.2336 56.271 13.8283 56.6977C13.4336 57.1137 13.2256 57.727 13.2043 58.5377C13.1936 58.6977 13.1883 58.9003 13.1883 59.1457C13.1883 59.391 13.1936 59.5937 13.2043 59.7537C13.2256 60.5643 13.4336 61.183 13.8283 61.6097C14.2336 62.0257 14.7669 62.2337 15.4283 62.2337ZM21.2558 63.3057C21.1491 63.3057 21.0584 63.2737 20.9838 63.2097C20.9198 63.135 20.8878 63.0443 20.8878 62.9377V55.3537C20.8878 55.247 20.9198 55.1617 20.9838 55.0977C21.0584 55.023 21.1491 54.9857 21.2558 54.9857H21.9758C22.0824 54.9857 22.1678 55.023 22.2318 55.0977C22.3064 55.1617 22.3438 55.247 22.3438 55.3537V55.9137C22.5891 55.583 22.8984 55.3217 23.2718 55.1297C23.6451 54.927 24.0931 54.8257 24.6158 54.8257C25.8211 54.815 26.6744 55.3057 27.1758 56.2977C27.4211 55.8497 27.7784 55.4923 28.2478 55.2257C28.7171 54.959 29.2504 54.8257 29.8478 54.8257C30.4024 54.8257 30.9038 54.9537 31.3518 55.2097C31.8104 55.4657 32.1678 55.855 32.4238 56.3777C32.6904 56.8897 32.8238 57.535 32.8238 58.3137V62.9377C32.8238 63.0443 32.7864 63.135 32.7118 63.2097C32.6478 63.2737 32.5624 63.3057 32.4558 63.3057H31.7038C31.5971 63.3057 31.5064 63.2737 31.4318 63.2097C31.3678 63.135 31.3358 63.0443 31.3358 62.9377V58.4577C31.3358 57.8603 31.2504 57.391 31.0798 57.0497C30.9091 56.7083 30.6798 56.4683 30.3918 56.3297C30.1038 56.191 29.7891 56.1217 29.4478 56.1217C29.1704 56.1217 28.8878 56.191 28.5998 56.3297C28.3118 56.4683 28.0718 56.7083 27.8798 57.0497C27.6984 57.391 27.6078 57.8603 27.6078 58.4577V62.9377C27.6078 63.0443 27.5704 63.135 27.4958 63.2097C27.4318 63.2737 27.3464 63.3057 27.2398 63.3057H26.4878C26.3811 63.3057 26.2904 63.2737 26.2158 63.2097C26.1518 63.135 26.1198 63.0443 26.1198 62.9377V58.4577C26.1198 57.8603 26.0291 57.391 25.8478 57.0497C25.6664 56.7083 25.4318 56.4683 25.1438 56.3297C24.8558 56.191 24.5518 56.1217 24.2318 56.1217C23.9544 56.1217 23.6718 56.191 23.3838 56.3297C23.0958 56.4683 22.8558 56.7083 22.6638 57.0497C22.4824 57.391 22.3918 57.855 22.3918 58.4417V62.9377C22.3918 63.0443 22.3544 63.135 22.2798 63.2097C22.2158 63.2737 22.1304 63.3057 22.0238 63.3057H21.2558ZM35.8615 63.3057C35.7548 63.3057 35.6642 63.2737 35.5895 63.2097C35.5255 63.135 35.4935 63.0443 35.4935 62.9377V56.2657H34.1335C34.0268 56.2657 33.9362 56.2337 33.8615 56.1697C33.7975 56.095 33.7655 56.0043 33.7655 55.8977V55.3537C33.7655 55.247 33.7975 55.1617 33.8615 55.0977C33.9362 55.023 34.0268 54.9857 34.1335 54.9857H35.4935V54.1857C35.4935 53.6417 35.5842 53.167 35.7655 52.7617C35.9468 52.3457 36.2348 52.0257 36.6295 51.8017C37.0348 51.5777 37.5735 51.4657 38.2455 51.4657H39.2055C39.3122 51.4657 39.3975 51.503 39.4615 51.5777C39.5255 51.6417 39.5575 51.727 39.5575 51.8337V52.3777C39.5575 52.4843 39.5255 52.575 39.4615 52.6497C39.3975 52.7137 39.3122 52.7457 39.2055 52.7457H38.2775C37.7762 52.7457 37.4348 52.879 37.2535 53.1457C37.0722 53.4017 36.9815 53.775 36.9815 54.2657V54.9857H39.0455C39.1522 54.9857 39.2375 55.023 39.3015 55.0977C39.3655 55.1617 39.3975 55.247 39.3975 55.3537V55.8977C39.3975 56.0043 39.3655 56.095 39.3015 56.1697C39.2375 56.2337 39.1522 56.2657 39.0455 56.2657H36.9815V62.9377C36.9815 63.0443 36.9442 63.135 36.8695 63.2097C36.8055 63.2737 36.7202 63.3057 36.6135 63.3057H35.8615ZM43.7495 63.4657C42.9388 63.4657 42.2615 63.311 41.7175 63.0017C41.1735 62.6923 40.7575 62.2657 40.4695 61.7217C40.1815 61.167 40.0215 60.5377 39.9895 59.8337C39.9788 59.6523 39.9735 59.423 39.9735 59.1457C39.9735 58.8577 39.9788 58.6283 39.9895 58.4577C40.0215 57.743 40.1815 57.1137 40.4695 56.5697C40.7682 56.0257 41.1895 55.599 41.7335 55.2897C42.2775 54.9803 42.9495 54.8257 43.7495 54.8257C44.5495 54.8257 45.2215 54.9803 45.7655 55.2897C46.3095 55.599 46.7255 56.0257 47.0135 56.5697C47.3122 57.1137 47.4775 57.743 47.5095 58.4577C47.5202 58.6283 47.5255 58.8577 47.5255 59.1457C47.5255 59.423 47.5202 59.6523 47.5095 59.8337C47.4775 60.5377 47.3175 61.167 47.0295 61.7217C46.7415 62.2657 46.3255 62.6923 45.7815 63.0017C45.2375 63.311 44.5602 63.4657 43.7495 63.4657ZM43.7495 62.2337C44.4108 62.2337 44.9388 62.0257 45.3335 61.6097C45.7282 61.183 45.9415 60.5643 45.9735 59.7537C45.9842 59.5937 45.9895 59.391 45.9895 59.1457C45.9895 58.9003 45.9842 58.6977 45.9735 58.5377C45.9415 57.727 45.7282 57.1137 45.3335 56.6977C44.9388 56.271 44.4108 56.0577 43.7495 56.0577C43.0882 56.0577 42.5548 56.271 42.1495 56.6977C41.7548 57.1137 41.5468 57.727 41.5255 58.5377C41.5148 58.6977 41.5095 58.9003 41.5095 59.1457C41.5095 59.391 41.5148 59.5937 41.5255 59.7537C41.5468 60.5643 41.7548 61.183 42.1495 61.6097C42.5548 62.0257 43.0882 62.2337 43.7495 62.2337ZM49.577 63.3057C49.4703 63.3057 49.3797 63.2737 49.305 63.2097C49.241 63.135 49.209 63.0443 49.209 62.9377V55.3697C49.209 55.263 49.241 55.1723 49.305 55.0977C49.3797 55.023 49.4703 54.9857 49.577 54.9857H50.313C50.4197 54.9857 50.5103 55.023 50.585 55.0977C50.6597 55.1723 50.697 55.263 50.697 55.3697V56.0737C50.9103 55.711 51.2037 55.439 51.577 55.2577C51.9503 55.0763 52.3983 54.9857 52.921 54.9857H53.561C53.6677 54.9857 53.753 55.023 53.817 55.0977C53.881 55.1617 53.913 55.247 53.913 55.3537V56.0097C53.913 56.1163 53.881 56.2017 53.817 56.2657C53.753 56.3297 53.6677 56.3617 53.561 56.3617H52.601C52.025 56.3617 51.5717 56.5323 51.241 56.8737C50.9103 57.2043 50.745 57.6577 50.745 58.2337V62.9377C50.745 63.0443 50.7077 63.135 50.633 63.2097C50.5583 63.2737 50.4677 63.3057 50.361 63.3057H49.577ZM58.2151 63.3057C57.6178 63.3057 57.1325 63.1937 56.7591 62.9697C56.3858 62.735 56.1138 62.4097 55.9431 61.9937C55.7725 61.567 55.6871 61.0657 55.6871 60.4897V56.2657H54.4391C54.3325 56.2657 54.2418 56.2337 54.1671 56.1697C54.1031 56.095 54.0711 56.0043 54.0711 55.8977V55.3537C54.0711 55.247 54.1031 55.1617 54.1671 55.0977C54.2418 55.023 54.3325 54.9857 54.4391 54.9857H55.6871V52.3137C55.6871 52.207 55.7191 52.1217 55.7831 52.0577C55.8578 51.983 55.9485 51.9457 56.0551 51.9457H56.8071C56.9138 51.9457 56.9991 51.983 57.0631 52.0577C57.1378 52.1217 57.1751 52.207 57.1751 52.3137V54.9857H59.1591C59.2658 54.9857 59.3511 55.023 59.4151 55.0977C59.4898 55.1617 59.5271 55.247 59.5271 55.3537V55.8977C59.5271 56.0043 59.4898 56.095 59.4151 56.1697C59.3511 56.2337 59.2658 56.2657 59.1591 56.2657H57.1751V60.3777C57.1751 60.879 57.2605 61.2737 57.4311 61.5617C57.6018 61.8497 57.9058 61.9937 58.3431 61.9937H59.3191C59.4258 61.9937 59.5111 62.031 59.5751 62.1057C59.6498 62.1697 59.6871 62.255 59.6871 62.3617V62.9377C59.6871 63.0443 59.6498 63.135 59.5751 63.2097C59.5111 63.2737 59.4258 63.3057 59.3191 63.3057H58.2151ZM63.2171 63.4657C62.6838 63.4657 62.1985 63.359 61.7611 63.1457C61.3238 62.9323 60.9718 62.6443 60.7051 62.2817C60.4385 61.919 60.3051 61.5083 60.3051 61.0497C60.3051 60.3137 60.6038 59.727 61.2011 59.2897C61.7985 58.8523 62.5771 58.5643 63.5371 58.4257L65.9211 58.0897V57.6257C65.9211 57.1137 65.7718 56.7137 65.4731 56.4257C65.1851 56.1377 64.7105 55.9937 64.0491 55.9937C63.5691 55.9937 63.1798 56.0897 62.8811 56.2817C62.5931 56.4737 62.3905 56.719 62.2731 57.0177C62.2091 57.1777 62.0971 57.2577 61.9371 57.2577H61.2171C61.0998 57.2577 61.0091 57.2257 60.9451 57.1617C60.8918 57.087 60.8651 57.0017 60.8651 56.9057C60.8651 56.7457 60.9238 56.5483 61.0411 56.3137C61.1691 56.079 61.3611 55.8497 61.6171 55.6257C61.8731 55.4017 62.1985 55.215 62.5931 55.0657C62.9985 54.9057 63.4891 54.8257 64.0651 54.8257C64.7051 54.8257 65.2438 54.911 65.6811 55.0817C66.1185 55.2417 66.4598 55.4603 66.7051 55.7377C66.9611 56.015 67.1425 56.3297 67.2491 56.6817C67.3665 57.0337 67.4251 57.391 67.4251 57.7537V62.9377C67.4251 63.0443 67.3878 63.135 67.3131 63.2097C67.2491 63.2737 67.1638 63.3057 67.0571 63.3057H66.3211C66.2038 63.3057 66.1131 63.2737 66.0491 63.2097C65.9851 63.135 65.9531 63.0443 65.9531 62.9377V62.2497C65.8145 62.4417 65.6278 62.6337 65.3931 62.8257C65.1585 63.007 64.8651 63.1617 64.5131 63.2897C64.1611 63.407 63.7291 63.4657 63.2171 63.4657ZM63.5531 62.2657C63.9905 62.2657 64.3905 62.175 64.7531 61.9937C65.1158 61.8017 65.3985 61.5083 65.6011 61.1137C65.8145 60.719 65.9211 60.223 65.9211 59.6257V59.1777L64.0651 59.4497C63.3078 59.5563 62.7371 59.7377 62.3531 59.9937C61.9691 60.239 61.7771 60.5537 61.7771 60.9377C61.7771 61.2363 61.8625 61.487 62.0331 61.6897C62.2145 61.8817 62.4385 62.0257 62.7051 62.1217C62.9825 62.2177 63.2651 62.2657 63.5531 62.2657ZM73.5173 63.4657C72.8773 63.4657 72.3439 63.3537 71.9173 63.1297C71.4906 62.895 71.1493 62.607 70.8933 62.2657V62.9377C70.8933 63.0443 70.8559 63.135 70.7813 63.2097C70.7173 63.2737 70.6319 63.3057 70.5253 63.3057H69.7893C69.6826 63.3057 69.5919 63.2737 69.5173 63.2097C69.4533 63.135 69.4213 63.0443 69.4213 62.9377V52.3137C69.4213 52.207 69.4533 52.1217 69.5173 52.0577C69.5919 51.983 69.6826 51.9457 69.7893 51.9457H70.5573C70.6746 51.9457 70.7653 51.983 70.8293 52.0577C70.8933 52.1217 70.9253 52.207 70.9253 52.3137V55.9937C71.1919 55.663 71.5333 55.3857 71.9493 55.1617C72.3759 54.9377 72.8986 54.8257 73.5173 54.8257C74.1146 54.8257 74.6213 54.9323 75.0373 55.1457C75.4639 55.3483 75.8106 55.631 76.0773 55.9937C76.3546 56.3563 76.5626 56.767 76.7013 57.2257C76.8399 57.6843 76.9146 58.1643 76.9253 58.6657C76.9359 58.8363 76.9413 58.9963 76.9413 59.1457C76.9413 59.295 76.9359 59.455 76.9253 59.6257C76.9146 60.1377 76.8399 60.623 76.7013 61.0817C76.5626 61.5403 76.3546 61.951 76.0773 62.3137C75.8106 62.6657 75.4639 62.9483 75.0373 63.1617C74.6213 63.3643 74.1146 63.4657 73.5173 63.4657ZM73.1813 62.1697C73.7359 62.1697 74.1679 62.0523 74.4773 61.8177C74.7973 61.5723 75.0266 61.2577 75.1653 60.8737C75.3039 60.479 75.3839 60.0577 75.4053 59.6097C75.4159 59.3003 75.4159 58.991 75.4053 58.6817C75.3839 58.2337 75.3039 57.8177 75.1653 57.4337C75.0266 57.039 74.7973 56.7243 74.4773 56.4897C74.1679 56.2443 73.7359 56.1217 73.1813 56.1217C72.6799 56.1217 72.2639 56.239 71.9333 56.4737C71.6026 56.7083 71.3519 57.007 71.1813 57.3697C71.0213 57.7323 70.9359 58.1003 70.9253 58.4737C70.9146 58.6443 70.9093 58.8523 70.9093 59.0977C70.9093 59.3323 70.9146 59.535 70.9253 59.7057C70.9466 60.1003 71.0319 60.4897 71.1813 60.8737C71.3413 61.247 71.5813 61.5563 71.9013 61.8017C72.2319 62.047 72.6586 62.1697 73.1813 62.1697ZM78.9849 63.3057C78.8782 63.3057 78.7875 63.2737 78.7129 63.2097C78.6489 63.135 78.6169 63.0443 78.6169 62.9377V52.3137C78.6169 52.207 78.6489 52.1217 78.7129 52.0577C78.7875 51.983 78.8782 51.9457 78.9849 51.9457H79.7369C79.8542 51.9457 79.9449 51.983 80.0089 52.0577C80.0729 52.1217 80.1049 52.207 80.1049 52.3137V62.9377C80.1049 63.0443 80.0729 63.135 80.0089 63.2097C79.9449 63.2737 79.8542 63.3057 79.7369 63.3057H78.9849ZM85.4835 63.4657C84.3848 63.4657 83.5102 63.1297 82.8595 62.4577C82.2088 61.775 81.8515 60.847 81.7875 59.6737C81.7768 59.535 81.7715 59.359 81.7715 59.1457C81.7715 58.9217 81.7768 58.7403 81.7875 58.6017C81.8302 57.8443 82.0062 57.183 82.3155 56.6177C82.6248 56.0417 83.0462 55.599 83.5795 55.2897C84.1235 54.9803 84.7582 54.8257 85.4835 54.8257C86.2942 54.8257 86.9715 54.9963 87.5155 55.3377C88.0702 55.679 88.4915 56.1643 88.7795 56.7937C89.0675 57.423 89.2115 58.159 89.2115 59.0017V59.2737C89.2115 59.391 89.1742 59.4817 89.0995 59.5457C89.0355 59.6097 88.9502 59.6417 88.8435 59.6417H83.3075C83.3075 59.6523 83.3075 59.6737 83.3075 59.7057C83.3075 59.7377 83.3075 59.7643 83.3075 59.7857C83.3288 60.223 83.4248 60.6337 83.5955 61.0177C83.7662 61.391 84.0115 61.695 84.3315 61.9297C84.6515 62.1643 85.0355 62.2817 85.4835 62.2817C85.8675 62.2817 86.1875 62.223 86.4435 62.1057C86.6995 61.9883 86.9075 61.8603 87.0675 61.7217C87.2275 61.5723 87.3342 61.4603 87.3875 61.3857C87.4835 61.247 87.5582 61.167 87.6115 61.1457C87.6648 61.1137 87.7502 61.0977 87.8675 61.0977H88.6355C88.7422 61.0977 88.8275 61.1297 88.8915 61.1937C88.9662 61.247 88.9982 61.327 88.9875 61.4337C88.9768 61.5937 88.8915 61.791 88.7315 62.0257C88.5715 62.2497 88.3422 62.4737 88.0435 62.6977C87.7448 62.9217 87.3822 63.1083 86.9555 63.2577C86.5288 63.3963 86.0382 63.4657 85.4835 63.4657ZM83.3075 58.5377H87.6915V58.4897C87.6915 58.0097 87.6008 57.583 87.4195 57.2097C87.2488 56.8363 86.9982 56.543 86.6675 56.3297C86.3368 56.1057 85.9422 55.9937 85.4835 55.9937C85.0248 55.9937 84.6302 56.1057 84.2995 56.3297C83.9795 56.543 83.7342 56.8363 83.5635 57.2097C83.3928 57.583 83.3075 58.0097 83.3075 58.4897V58.5377ZM95.3096 63.3057C95.203 63.3057 95.1123 63.2737 95.0376 63.2097C94.9736 63.135 94.9416 63.0443 94.9416 62.9377V56.2657H93.5816C93.475 56.2657 93.3843 56.2337 93.3096 56.1697C93.2456 56.095 93.2136 56.0043 93.2136 55.8977V55.3537C93.2136 55.247 93.2456 55.1617 93.3096 55.0977C93.3843 55.023 93.475 54.9857 93.5816 54.9857H94.9416V54.1857C94.9416 53.6417 95.0323 53.167 95.2136 52.7617C95.395 52.3457 95.683 52.0257 96.0776 51.8017C96.483 51.5777 97.0216 51.4657 97.6936 51.4657H98.6536C98.7603 51.4657 98.8456 51.503 98.9096 51.5777C98.9736 51.6417 99.0056 51.727 99.0056 51.8337V52.3777C99.0056 52.4843 98.9736 52.575 98.9096 52.6497C98.8456 52.7137 98.7603 52.7457 98.6536 52.7457H97.7256C97.2243 52.7457 96.883 52.879 96.7016 53.1457C96.5203 53.4017 96.4296 53.775 96.4296 54.2657V54.9857H98.4936C98.6003 54.9857 98.6856 55.023 98.7496 55.0977C98.8136 55.1617 98.8456 55.247 98.8456 55.3537V55.8977C98.8456 56.0043 98.8136 56.095 98.7496 56.1697C98.6856 56.2337 98.6003 56.2657 98.4936 56.2657H96.4296V62.9377C96.4296 63.0443 96.3923 63.135 96.3176 63.2097C96.2536 63.2737 96.1683 63.3057 96.0616 63.3057H95.3096ZM103.198 63.4657C102.387 63.4657 101.71 63.311 101.166 63.0017C100.622 62.6923 100.206 62.2657 99.9176 61.7217C99.6296 61.167 99.4696 60.5377 99.4376 59.8337C99.427 59.6523 99.4216 59.423 99.4216 59.1457C99.4216 58.8577 99.427 58.6283 99.4376 58.4577C99.4696 57.743 99.6296 57.1137 99.9176 56.5697C100.216 56.0257 100.638 55.599 101.182 55.2897C101.726 54.9803 102.398 54.8257 103.198 54.8257C103.998 54.8257 104.67 54.9803 105.214 55.2897C105.758 55.599 106.174 56.0257 106.462 56.5697C106.76 57.1137 106.926 57.743 106.958 58.4577C106.968 58.6283 106.974 58.8577 106.974 59.1457C106.974 59.423 106.968 59.6523 106.958 59.8337C106.926 60.5377 106.766 61.167 106.478 61.7217C106.19 62.2657 105.774 62.6923 105.23 63.0017C104.686 63.311 104.008 63.4657 103.198 63.4657ZM103.198 62.2337C103.859 62.2337 104.387 62.0257 104.782 61.6097C105.176 61.183 105.39 60.5643 105.422 59.7537C105.432 59.5937 105.438 59.391 105.438 59.1457C105.438 58.9003 105.432 58.6977 105.422 58.5377C105.39 57.727 105.176 57.1137 104.782 56.6977C104.387 56.271 103.859 56.0577 103.198 56.0577C102.536 56.0577 102.003 56.271 101.598 56.6977C101.203 57.1137 100.995 57.727 100.974 58.5377C100.963 58.6977 100.958 58.9003 100.958 59.1457C100.958 59.391 100.963 59.5937 100.974 59.7537C100.995 60.5643 101.203 61.183 101.598 61.6097C102.003 62.0257 102.536 62.2337 103.198 62.2337ZM109.025 63.3057C108.918 63.3057 108.828 63.2737 108.753 63.2097C108.689 63.135 108.657 63.0443 108.657 62.9377V55.3697C108.657 55.263 108.689 55.1723 108.753 55.0977C108.828 55.023 108.918 54.9857 109.025 54.9857H109.761C109.868 54.9857 109.958 55.023 110.033 55.0977C110.108 55.1723 110.145 55.263 110.145 55.3697V56.0737C110.358 55.711 110.652 55.439 111.025 55.2577C111.398 55.0763 111.846 54.9857 112.369 54.9857H113.009C113.116 54.9857 113.201 55.023 113.265 55.0977C113.329 55.1617 113.361 55.247 113.361 55.3537V56.0097C113.361 56.1163 113.329 56.2017 113.265 56.2657C113.201 56.3297 113.116 56.3617 113.009 56.3617H112.049C111.473 56.3617 111.02 56.5323 110.689 56.8737C110.358 57.2043 110.193 57.6577 110.193 58.2337V62.9377C110.193 63.0443 110.156 63.135 110.081 63.2097C110.006 63.2737 109.916 63.3057 109.809 63.3057H109.025ZM5.044 83.4657C4.28667 83.4657 3.63067 83.3217 3.076 83.0337C2.532 82.735 2.11067 82.3137 1.812 81.7697C1.51333 81.215 1.35333 80.5537 1.332 79.7857C1.32133 79.6257 1.316 79.4123 1.316 79.1457C1.316 78.879 1.32133 78.6657 1.332 78.5057C1.35333 77.7377 1.51333 77.0817 1.812 76.5377C2.11067 75.983 2.532 75.5617 3.076 75.2737C3.63067 74.975 4.28667 74.8257 5.044 74.8257C5.66267 74.8257 6.19067 74.911 6.628 75.0817C7.076 75.2523 7.444 75.471 7.732 75.7377C8.02 76.0043 8.23333 76.2923 8.372 76.6017C8.52133 76.911 8.60133 77.2043 8.612 77.4817C8.62267 77.5883 8.59067 77.6737 8.516 77.7377C8.44133 77.8017 8.35067 77.8337 8.244 77.8337H7.476C7.36933 77.8337 7.28933 77.8123 7.236 77.7697C7.18267 77.7163 7.12933 77.631 7.076 77.5137C6.884 76.991 6.62267 76.623 6.292 76.4097C5.96133 76.1963 5.55067 76.0897 5.06 76.0897C4.42 76.0897 3.89733 76.287 3.492 76.6817C3.09733 77.0763 2.884 77.711 2.852 78.5857C2.84133 78.9697 2.84133 79.343 2.852 79.7057C2.884 80.591 3.09733 81.231 3.492 81.6257C3.89733 82.0097 4.42 82.2017 5.06 82.2017C5.55067 82.2017 5.96133 82.095 6.292 81.8817C6.62267 81.6683 6.884 81.3003 7.076 80.7777C7.12933 80.6603 7.18267 80.5803 7.236 80.5377C7.28933 80.4843 7.36933 80.4577 7.476 80.4577H8.244C8.35067 80.4577 8.44133 80.4897 8.516 80.5537C8.59067 80.6177 8.62267 80.703 8.612 80.8097C8.60133 81.0337 8.55333 81.263 8.468 81.4977C8.38267 81.7323 8.244 81.9723 8.052 82.2177C7.87067 82.4523 7.64133 82.6657 7.364 82.8577C7.08667 83.039 6.75067 83.1883 6.356 83.3057C5.972 83.4123 5.53467 83.4657 5.044 83.4657ZM10.5761 83.3057C10.4695 83.3057 10.3788 83.2737 10.3041 83.2097C10.2401 83.135 10.2081 83.0443 10.2081 82.9377V72.3137C10.2081 72.207 10.2401 72.1217 10.3041 72.0577C10.3788 71.983 10.4695 71.9457 10.5761 71.9457H11.3761C11.4935 71.9457 11.5841 71.983 11.6481 72.0577C11.7121 72.1217 11.7441 72.207 11.7441 72.3137V76.0417C12.0321 75.679 12.3841 75.3857 12.8001 75.1617C13.2161 74.9377 13.7441 74.8257 14.3841 74.8257C15.0775 74.8257 15.6641 74.9803 16.1441 75.2897C16.6348 75.5883 17.0028 76.0097 17.2481 76.5537C17.5041 77.087 17.6321 77.711 17.6321 78.4257V82.9377C17.6321 83.0443 17.6001 83.135 17.5361 83.2097C17.4721 83.2737 17.3815 83.3057 17.2641 83.3057H16.4641C16.3575 83.3057 16.2668 83.2737 16.1921 83.2097C16.1281 83.135 16.0961 83.0443 16.0961 82.9377V78.5057C16.0961 77.759 15.9148 77.1777 15.5521 76.7617C15.1895 76.335 14.6561 76.1217 13.9521 76.1217C13.2908 76.1217 12.7575 76.335 12.3521 76.7617C11.9468 77.1777 11.7441 77.759 11.7441 78.5057V82.9377C11.7441 83.0443 11.7121 83.135 11.6481 83.2097C11.5841 83.2737 11.4935 83.3057 11.3761 83.3057H10.5761ZM19.9901 83.3057C19.8835 83.3057 19.7928 83.2737 19.7181 83.2097C19.6541 83.135 19.6221 83.0443 19.6221 82.9377V75.3537C19.6221 75.247 19.6541 75.1617 19.7181 75.0977C19.7928 75.023 19.8835 74.9857 19.9901 74.9857H20.7581C20.8648 74.9857 20.9501 75.023 21.0141 75.0977C21.0781 75.1617 21.1101 75.247 21.1101 75.3537V82.9377C21.1101 83.0443 21.0781 83.135 21.0141 83.2097C20.9501 83.2737 20.8648 83.3057 20.7581 83.3057H19.9901ZM19.8621 73.4337C19.7555 73.4337 19.6648 73.4017 19.5901 73.3377C19.5261 73.263 19.4941 73.1723 19.4941 73.0657V72.2017C19.4941 72.095 19.5261 72.0097 19.5901 71.9457C19.6648 71.871 19.7555 71.8337 19.8621 71.8337H20.8701C20.9768 71.8337 21.0621 71.871 21.1261 71.9457C21.2008 72.0097 21.2381 72.095 21.2381 72.2017V73.0657C21.2381 73.1723 21.2008 73.263 21.1261 73.3377C21.0621 73.4017 20.9768 73.4337 20.8701 73.4337H19.8621ZM23.5611 83.3057C23.4545 83.3057 23.3638 83.2737 23.2891 83.2097C23.2251 83.135 23.1931 83.0443 23.1931 82.9377V72.3137C23.1931 72.207 23.2251 72.1217 23.2891 72.0577C23.3638 71.983 23.4545 71.9457 23.5611 71.9457H24.3131C24.4305 71.9457 24.5211 71.983 24.5851 72.0577C24.6491 72.1217 24.6811 72.207 24.6811 72.3137V82.9377C24.6811 83.0443 24.6491 83.135 24.5851 83.2097C24.5211 83.2737 24.4305 83.3057 24.3131 83.3057H23.5611ZM29.7877 83.4657C29.2011 83.4657 28.6944 83.3643 28.2677 83.1617C27.8411 82.9483 27.4891 82.6657 27.2117 82.3137C26.9451 81.951 26.7424 81.5403 26.6037 81.0817C26.4757 80.623 26.4011 80.1377 26.3797 79.6257C26.3691 79.455 26.3637 79.295 26.3637 79.1457C26.3637 78.9963 26.3691 78.8363 26.3797 78.6657C26.4011 78.1643 26.4757 77.6843 26.6037 77.2257C26.7424 76.767 26.9451 76.3563 27.2117 75.9937C27.4891 75.631 27.8411 75.3483 28.2677 75.1457C28.6944 74.9323 29.2011 74.8257 29.7877 74.8257C30.4171 74.8257 30.9397 74.9377 31.3557 75.1617C31.7717 75.3857 32.1131 75.663 32.3797 75.9937V72.3137C32.3797 72.207 32.4117 72.1217 32.4757 72.0577C32.5504 71.983 32.6411 71.9457 32.7477 71.9457H33.5157C33.6224 71.9457 33.7077 71.983 33.7717 72.0577C33.8464 72.1217 33.8837 72.207 33.8837 72.3137V82.9377C33.8837 83.0443 33.8464 83.135 33.7717 83.2097C33.7077 83.2737 33.6224 83.3057 33.5157 83.3057H32.7957C32.6784 83.3057 32.5877 83.2737 32.5237 83.2097C32.4597 83.135 32.4277 83.0443 32.4277 82.9377V82.2657C32.1611 82.607 31.8144 82.895 31.3877 83.1297C30.9611 83.3537 30.4277 83.4657 29.7877 83.4657ZM30.1237 82.1697C30.6571 82.1697 31.0837 82.047 31.4037 81.8017C31.7237 81.5563 31.9637 81.247 32.1237 80.8737C32.2837 80.4897 32.3691 80.1003 32.3797 79.7057C32.3904 79.535 32.3957 79.3323 32.3957 79.0977C32.3957 78.8523 32.3904 78.6443 32.3797 78.4737C32.3691 78.1003 32.2784 77.7323 32.1077 77.3697C31.9477 77.007 31.7024 76.7083 31.3717 76.4737C31.0517 76.239 30.6357 76.1217 30.1237 76.1217C29.5797 76.1217 29.1477 76.2443 28.8277 76.4897C28.5077 76.7243 28.2784 77.039 28.1397 77.4337C28.0011 77.8177 27.9211 78.2337 27.8997 78.6817C27.8891 78.991 27.8891 79.3003 27.8997 79.6097C27.9211 80.0577 28.0011 80.479 28.1397 80.8737C28.2784 81.2577 28.5077 81.5723 28.8277 81.8177C29.1477 82.0523 29.5797 82.1697 30.1237 82.1697ZM36.3114 83.3057C36.2047 83.3057 36.114 83.2737 36.0394 83.2097C35.9754 83.135 35.9434 83.0443 35.9434 82.9377V75.3697C35.9434 75.263 35.9754 75.1723 36.0394 75.0977C36.114 75.023 36.2047 74.9857 36.3114 74.9857H37.0474C37.154 74.9857 37.2447 75.023 37.3194 75.0977C37.394 75.1723 37.4314 75.263 37.4314 75.3697V76.0737C37.6447 75.711 37.938 75.439 38.3114 75.2577C38.6847 75.0763 39.1327 74.9857 39.6554 74.9857H40.2954C40.402 74.9857 40.4874 75.023 40.5514 75.0977C40.6154 75.1617 40.6474 75.247 40.6474 75.3537V76.0097C40.6474 76.1163 40.6154 76.2017 40.5514 76.2657C40.4874 76.3297 40.402 76.3617 40.2954 76.3617H39.3354C38.7594 76.3617 38.306 76.5323 37.9754 76.8737C37.6447 77.2043 37.4794 77.6577 37.4794 78.2337V82.9377C37.4794 83.0443 37.442 83.135 37.3674 83.2097C37.2927 83.2737 37.202 83.3057 37.0954 83.3057H36.3114ZM44.8573 83.4657C43.7586 83.4657 42.8839 83.1297 42.2333 82.4577C41.5826 81.775 41.2253 80.847 41.1613 79.6737C41.1506 79.535 41.1453 79.359 41.1453 79.1457C41.1453 78.9217 41.1506 78.7403 41.1613 78.6017C41.2039 77.8443 41.3799 77.183 41.6893 76.6177C41.9986 76.0417 42.4199 75.599 42.9533 75.2897C43.4973 74.9803 44.1319 74.8257 44.8573 74.8257C45.6679 74.8257 46.3453 74.9963 46.8893 75.3377C47.4439 75.679 47.8653 76.1643 48.1533 76.7937C48.4413 77.423 48.5853 78.159 48.5853 79.0017V79.2737C48.5853 79.391 48.5479 79.4817 48.4733 79.5457C48.4093 79.6097 48.3239 79.6417 48.2173 79.6417H42.6813C42.6813 79.6523 42.6813 79.6737 42.6813 79.7057C42.6813 79.7377 42.6813 79.7643 42.6813 79.7857C42.7026 80.223 42.7986 80.6337 42.9693 81.0177C43.1399 81.391 43.3853 81.695 43.7053 81.9297C44.0253 82.1643 44.4093 82.2817 44.8573 82.2817C45.2413 82.2817 45.5613 82.223 45.8173 82.1057C46.0733 81.9883 46.2813 81.8603 46.4413 81.7217C46.6013 81.5723 46.7079 81.4603 46.7613 81.3857C46.8573 81.247 46.9319 81.167 46.9853 81.1457C47.0386 81.1137 47.1239 81.0977 47.2413 81.0977H48.0093C48.1159 81.0977 48.2013 81.1297 48.2653 81.1937C48.3399 81.247 48.3719 81.327 48.3613 81.4337C48.3506 81.5937 48.2653 81.791 48.1053 82.0257C47.9453 82.2497 47.7159 82.4737 47.4173 82.6977C47.1186 82.9217 46.7559 83.1083 46.3293 83.2577C45.9026 83.3963 45.4119 83.4657 44.8573 83.4657ZM42.6813 78.5377H47.0653V78.4897C47.0653 78.0097 46.9746 77.583 46.7933 77.2097C46.6226 76.8363 46.3719 76.543 46.0413 76.3297C45.7106 76.1057 45.3159 75.9937 44.8573 75.9937C44.3986 75.9937 44.0039 76.1057 43.6733 76.3297C43.3533 76.543 43.1079 76.8363 42.9373 77.2097C42.7666 77.583 42.6813 78.0097 42.6813 78.4897V78.5377ZM50.5464 83.3057C50.4397 83.3057 50.349 83.2737 50.2744 83.2097C50.2104 83.135 50.1784 83.0443 50.1784 82.9377V75.3537C50.1784 75.247 50.2104 75.1617 50.2744 75.0977C50.349 75.023 50.4397 74.9857 50.5464 74.9857H51.2984C51.405 74.9857 51.4904 75.023 51.5544 75.0977C51.629 75.1617 51.6664 75.247 51.6664 75.3537V76.0577C51.9437 75.695 52.2904 75.4017 52.7064 75.1777C53.133 74.943 53.677 74.8257 54.3384 74.8257C55.0317 74.8257 55.6184 74.9803 56.0984 75.2897C56.589 75.5883 56.957 76.0097 57.2024 76.5537C57.4477 77.087 57.5704 77.711 57.5704 78.4257V82.9377C57.5704 83.0443 57.5384 83.135 57.4744 83.2097C57.4104 83.2737 57.325 83.3057 57.2184 83.3057H56.4184C56.3117 83.3057 56.221 83.2737 56.1464 83.2097C56.0824 83.135 56.0504 83.0443 56.0504 82.9377V78.5057C56.0504 77.759 55.869 77.1777 55.5064 76.7617C55.1437 76.335 54.6104 76.1217 53.9064 76.1217C53.245 76.1217 52.7117 76.335 52.3064 76.7617C51.9117 77.1777 51.7144 77.759 51.7144 78.5057V82.9377C51.7144 83.0443 51.677 83.135 51.6024 83.2097C51.5384 83.2737 51.453 83.3057 51.3464 83.3057H50.5464ZM66.5714 83.4657C65.8354 83.4657 65.19 83.3323 64.6354 83.0657C64.0807 82.799 63.6487 82.431 63.3394 81.9617C63.03 81.4817 62.8754 80.9323 62.8754 80.3137C62.8754 79.823 62.9767 79.3963 63.1794 79.0337C63.3927 78.6603 63.67 78.3297 64.0114 78.0417C64.3527 77.7537 64.726 77.4923 65.1314 77.2577C64.63 76.7243 64.2727 76.255 64.0594 75.8497C63.8567 75.4443 63.7554 75.023 63.7554 74.5857C63.7554 74.1057 63.878 73.6683 64.1234 73.2737C64.3687 72.879 64.7154 72.559 65.1634 72.3137C65.6114 72.0683 66.1394 71.9457 66.7474 71.9457C67.334 71.9457 67.846 72.063 68.2834 72.2977C68.7314 72.5323 69.078 72.847 69.3234 73.2417C69.5687 73.6363 69.6914 74.079 69.6914 74.5697C69.6914 75.039 69.5794 75.4497 69.3554 75.8017C69.1314 76.1537 68.8327 76.4683 68.4594 76.7457C68.0967 77.023 67.6967 77.2843 67.2594 77.5297L69.9794 80.2017C70.15 79.903 70.31 79.5563 70.4594 79.1617C70.6194 78.767 70.742 78.303 70.8274 77.7697C70.8594 77.5563 70.9767 77.4497 71.1794 77.4497H71.8834C71.9794 77.4497 72.0594 77.4817 72.1234 77.5457C72.1874 77.6097 72.2194 77.6897 72.2194 77.7857C72.2087 78.0203 72.1714 78.271 72.1074 78.5377C72.054 78.8043 71.9687 79.087 71.8514 79.3857C71.7447 79.6843 71.6114 79.983 71.4514 80.2817C71.302 80.5697 71.126 80.8577 70.9234 81.1457L72.5554 82.7617C72.6514 82.847 72.6994 82.927 72.6994 83.0017C72.6994 83.0977 72.6727 83.1723 72.6194 83.2257C72.566 83.279 72.486 83.3057 72.3794 83.3057H71.4834C71.3767 83.3057 71.286 83.2897 71.2114 83.2577C71.1474 83.2257 71.094 83.1883 71.0514 83.1457L69.9954 82.1057C69.5794 82.511 69.0887 82.8417 68.5234 83.0977C67.958 83.343 67.3074 83.4657 66.5714 83.4657ZM66.5714 82.1857C66.998 82.1857 67.4247 82.1003 67.8514 81.9297C68.278 81.7483 68.6727 81.4817 69.0354 81.1297L66.0434 78.2017C65.5847 78.4577 65.1847 78.751 64.8434 79.0817C64.5127 79.4017 64.3474 79.8017 64.3474 80.2817C64.3474 80.687 64.4487 81.0337 64.6514 81.3217C64.8647 81.599 65.142 81.8123 65.4834 81.9617C65.8247 82.111 66.1874 82.1857 66.5714 82.1857ZM66.3794 76.6017C66.7207 76.4097 67.0354 76.2177 67.3234 76.0257C67.622 75.8337 67.8567 75.6203 68.0274 75.3857C68.2087 75.151 68.2994 74.8843 68.2994 74.5857C68.2994 74.159 68.15 73.8177 67.8514 73.5617C67.5527 73.3057 67.1847 73.1777 66.7474 73.1777C66.3314 73.1777 65.9634 73.3057 65.6434 73.5617C65.334 73.807 65.1794 74.1537 65.1794 74.6017C65.1794 74.783 65.2114 74.9697 65.2754 75.1617C65.35 75.343 65.4727 75.5457 65.6434 75.7697C65.814 75.9937 66.0594 76.271 66.3794 76.6017ZM81.6666 83.4657C81.0266 83.4657 80.4933 83.3537 80.0666 83.1297C79.64 82.895 79.2986 82.607 79.0426 82.2657V82.9377C79.0426 83.0443 79.0053 83.135 78.9306 83.2097C78.8666 83.2737 78.7813 83.3057 78.6746 83.3057H77.9386C77.832 83.3057 77.7413 83.2737 77.6666 83.2097C77.6026 83.135 77.5706 83.0443 77.5706 82.9377V72.3137C77.5706 72.207 77.6026 72.1217 77.6666 72.0577C77.7413 71.983 77.832 71.9457 77.9386 71.9457H78.7066C78.824 71.9457 78.9146 71.983 78.9786 72.0577C79.0426 72.1217 79.0746 72.207 79.0746 72.3137V75.9937C79.3413 75.663 79.6826 75.3857 80.0986 75.1617C80.5253 74.9377 81.048 74.8257 81.6666 74.8257C82.264 74.8257 82.7706 74.9323 83.1866 75.1457C83.6133 75.3483 83.96 75.631 84.2266 75.9937C84.504 76.3563 84.712 76.767 84.8506 77.2257C84.9893 77.6843 85.064 78.1643 85.0746 78.6657C85.0853 78.8363 85.0906 78.9963 85.0906 79.1457C85.0906 79.295 85.0853 79.455 85.0746 79.6257C85.064 80.1377 84.9893 80.623 84.8506 81.0817C84.712 81.5403 84.504 81.951 84.2266 82.3137C83.96 82.6657 83.6133 82.9483 83.1866 83.1617C82.7706 83.3643 82.264 83.4657 81.6666 83.4657ZM81.3306 82.1697C81.8853 82.1697 82.3173 82.0523 82.6266 81.8177C82.9466 81.5723 83.176 81.2577 83.3146 80.8737C83.4533 80.479 83.5333 80.0577 83.5546 79.6097C83.5653 79.3003 83.5653 78.991 83.5546 78.6817C83.5333 78.2337 83.4533 77.8177 83.3146 77.4337C83.176 77.039 82.9466 76.7243 82.6266 76.4897C82.3173 76.2443 81.8853 76.1217 81.3306 76.1217C80.8293 76.1217 80.4133 76.239 80.0826 76.4737C79.752 76.7083 79.5013 77.007 79.3306 77.3697C79.1706 77.7323 79.0853 78.1003 79.0746 78.4737C79.064 78.6443 79.0586 78.8523 79.0586 79.0977C79.0586 79.3323 79.064 79.535 79.0746 79.7057C79.096 80.1003 79.1813 80.4897 79.3306 80.8737C79.4906 81.247 79.7306 81.5563 80.0506 81.8017C80.3813 82.047 80.808 82.1697 81.3306 82.1697ZM90.0623 83.4657C88.9636 83.4657 88.0889 83.1297 87.4383 82.4577C86.7876 81.775 86.4303 80.847 86.3663 79.6737C86.3556 79.535 86.3503 79.359 86.3503 79.1457C86.3503 78.9217 86.3556 78.7403 86.3663 78.6017C86.4089 77.8443 86.5849 77.183 86.8943 76.6177C87.2036 76.0417 87.6249 75.599 88.1583 75.2897C88.7023 74.9803 89.3369 74.8257 90.0623 74.8257C90.8729 74.8257 91.5503 74.9963 92.0943 75.3377C92.6489 75.679 93.0703 76.1643 93.3583 76.7937C93.6463 77.423 93.7903 78.159 93.7903 79.0017V79.2737C93.7903 79.391 93.7529 79.4817 93.6783 79.5457C93.6143 79.6097 93.5289 79.6417 93.4223 79.6417H87.8863C87.8863 79.6523 87.8863 79.6737 87.8863 79.7057C87.8863 79.7377 87.8863 79.7643 87.8863 79.7857C87.9076 80.223 88.0036 80.6337 88.1743 81.0177C88.3449 81.391 88.5903 81.695 88.9103 81.9297C89.2303 82.1643 89.6143 82.2817 90.0623 82.2817C90.4463 82.2817 90.7663 82.223 91.0223 82.1057C91.2783 81.9883 91.4863 81.8603 91.6463 81.7217C91.8063 81.5723 91.9129 81.4603 91.9663 81.3857C92.0623 81.247 92.1369 81.167 92.1903 81.1457C92.2436 81.1137 92.3289 81.0977 92.4463 81.0977H93.2143C93.3209 81.0977 93.4063 81.1297 93.4703 81.1937C93.5449 81.247 93.5769 81.327 93.5663 81.4337C93.5556 81.5937 93.4703 81.791 93.3103 82.0257C93.1503 82.2497 92.9209 82.4737 92.6223 82.6977C92.3236 82.9217 91.9609 83.1083 91.5343 83.2577C91.1076 83.3963 90.6169 83.4657 90.0623 83.4657ZM87.8863 78.5377H92.2703V78.4897C92.2703 78.0097 92.1796 77.583 91.9983 77.2097C91.8276 76.8363 91.5769 76.543 91.2463 76.3297C90.9156 76.1057 90.5209 75.9937 90.0623 75.9937C89.6036 75.9937 89.2089 76.1057 88.8783 76.3297C88.5583 76.543 88.3129 76.8363 88.1423 77.2097C87.9716 77.583 87.8863 78.0097 87.8863 78.4897V78.5377ZM98.7914 86.8257C98.066 86.8257 97.4687 86.7297 96.9994 86.5377C96.5407 86.3457 96.178 86.111 95.9114 85.8337C95.6554 85.567 95.4687 85.295 95.3514 85.0177C95.2447 84.751 95.186 84.5377 95.1754 84.3777C95.1647 84.271 95.1967 84.1803 95.2714 84.1057C95.3567 84.031 95.4474 83.9937 95.5434 83.9937H96.3114C96.4074 83.9937 96.4874 84.015 96.5514 84.0577C96.6154 84.1003 96.6687 84.191 96.7114 84.3297C96.7754 84.4897 96.8714 84.6657 96.9994 84.8577C97.1274 85.0603 97.3247 85.231 97.5914 85.3697C97.858 85.519 98.2314 85.5937 98.7114 85.5937C99.2127 85.5937 99.634 85.5243 99.9754 85.3857C100.317 85.2577 100.573 85.023 100.743 84.6817C100.925 84.351 101.015 83.8923 101.015 83.3057V82.2177C100.759 82.5483 100.423 82.8257 100.007 83.0497C99.5914 83.263 99.0687 83.3697 98.4394 83.3697C97.842 83.3697 97.33 83.2683 96.9034 83.0657C96.4767 82.8523 96.1247 82.5697 95.8474 82.2177C95.5807 81.855 95.378 81.4443 95.2394 80.9857C95.1114 80.527 95.0367 80.047 95.0154 79.5457C95.0047 79.247 95.0047 78.9537 95.0154 78.6657C95.0367 78.1643 95.1114 77.6843 95.2394 77.2257C95.378 76.767 95.5807 76.3563 95.8474 75.9937C96.1247 75.631 96.4767 75.3483 96.9034 75.1457C97.33 74.9323 97.842 74.8257 98.4394 74.8257C99.0794 74.8257 99.6074 74.9483 100.023 75.1937C100.45 75.4283 100.797 75.7163 101.063 76.0577V75.3697C101.063 75.263 101.095 75.1723 101.159 75.0977C101.234 75.023 101.325 74.9857 101.431 74.9857H102.167C102.274 74.9857 102.365 75.023 102.439 75.0977C102.514 75.1723 102.551 75.263 102.551 75.3697V83.1297C102.551 83.8443 102.429 84.479 102.183 85.0337C101.949 85.5883 101.554 86.0257 100.999 86.3457C100.455 86.6657 99.7194 86.8257 98.7914 86.8257ZM98.7594 82.0897C99.2927 82.0897 99.7194 81.967 100.039 81.7217C100.37 81.4763 100.61 81.167 100.759 80.7937C100.919 80.4203 101.005 80.0417 101.015 79.6577C101.026 79.5083 101.031 79.327 101.031 79.1137C101.031 78.8897 101.026 78.703 101.015 78.5537C101.005 78.1697 100.919 77.791 100.759 77.4177C100.61 77.0443 100.37 76.735 100.039 76.4897C99.7194 76.2443 99.2927 76.1217 98.7594 76.1217C98.226 76.1217 97.7994 76.2443 97.4794 76.4897C97.1594 76.7243 96.93 77.039 96.7914 77.4337C96.6527 77.8177 96.5727 78.2337 96.5514 78.6817C96.5407 78.959 96.5407 79.2417 96.5514 79.5297C96.5727 79.9777 96.6527 80.399 96.7914 80.7937C96.93 81.1777 97.1594 81.4923 97.4794 81.7377C97.7994 81.9723 98.226 82.0897 98.7594 82.0897ZM104.978 83.3057C104.872 83.3057 104.781 83.2737 104.706 83.2097C104.642 83.135 104.61 83.0443 104.61 82.9377V75.3537C104.61 75.247 104.642 75.1617 104.706 75.0977C104.781 75.023 104.872 74.9857 104.978 74.9857H105.746C105.853 74.9857 105.938 75.023 106.002 75.0977C106.066 75.1617 106.098 75.247 106.098 75.3537V82.9377C106.098 83.0443 106.066 83.135 106.002 83.2097C105.938 83.2737 105.853 83.3057 105.746 83.3057H104.978ZM104.85 73.4337C104.744 73.4337 104.653 73.4017 104.578 73.3377C104.514 73.263 104.482 73.1723 104.482 73.0657V72.2017C104.482 72.095 104.514 72.0097 104.578 71.9457C104.653 71.871 104.744 71.8337 104.85 71.8337H105.858C105.965 71.8337 106.05 71.871 106.114 71.9457C106.189 72.0097 106.226 72.095 106.226 72.2017V73.0657C106.226 73.1723 106.189 73.263 106.114 73.3377C106.05 73.4017 105.965 73.4337 105.858 73.4337H104.85ZM108.533 83.3057C108.427 83.3057 108.336 83.2737 108.261 83.2097C108.197 83.135 108.165 83.0443 108.165 82.9377V75.3537C108.165 75.247 108.197 75.1617 108.261 75.0977C108.336 75.023 108.427 74.9857 108.533 74.9857H109.285C109.392 74.9857 109.477 75.023 109.541 75.0977C109.616 75.1617 109.653 75.247 109.653 75.3537V76.0577C109.931 75.695 110.277 75.4017 110.693 75.1777C111.12 74.943 111.664 74.8257 112.325 74.8257C113.019 74.8257 113.605 74.9803 114.085 75.2897C114.576 75.5883 114.944 76.0097 115.189 76.5537C115.435 77.087 115.557 77.711 115.557 78.4257V82.9377C115.557 83.0443 115.525 83.135 115.461 83.2097C115.397 83.2737 115.312 83.3057 115.205 83.3057H114.405C114.299 83.3057 114.208 83.2737 114.133 83.2097C114.069 83.135 114.037 83.0443 114.037 82.9377V78.5057C114.037 77.759 113.856 77.1777 113.493 76.7617C113.131 76.335 112.597 76.1217 111.893 76.1217C111.232 76.1217 110.699 76.335 110.293 76.7617C109.899 77.1777 109.701 77.759 109.701 78.5057V82.9377C109.701 83.0443 109.664 83.135 109.589 83.2097C109.525 83.2737 109.44 83.3057 109.333 83.3057H108.533ZM117.916 83.3057C117.81 83.3057 117.719 83.2737 117.644 83.2097C117.58 83.135 117.548 83.0443 117.548 82.9377V75.3537C117.548 75.247 117.58 75.1617 117.644 75.0977C117.719 75.023 117.81 74.9857 117.916 74.9857H118.668C118.775 74.9857 118.86 75.023 118.924 75.0977C118.999 75.1617 119.036 75.247 119.036 75.3537V76.0577C119.314 75.695 119.66 75.4017 120.076 75.1777C120.503 74.943 121.047 74.8257 121.708 74.8257C122.402 74.8257 122.988 74.9803 123.468 75.2897C123.959 75.5883 124.327 76.0097 124.572 76.5537C124.818 77.087 124.94 77.711 124.94 78.4257V82.9377C124.94 83.0443 124.908 83.135 124.844 83.2097C124.78 83.2737 124.695 83.3057 124.588 83.3057H123.788C123.682 83.3057 123.591 83.2737 123.516 83.2097C123.452 83.135 123.42 83.0443 123.42 82.9377V78.5057C123.42 77.759 123.239 77.1777 122.876 76.7617C122.514 76.335 121.98 76.1217 121.276 76.1217C120.615 76.1217 120.082 76.335 119.676 76.7617C119.282 77.1777 119.084 77.759 119.084 78.5057V82.9377C119.084 83.0443 119.047 83.135 118.972 83.2097C118.908 83.2737 118.823 83.3057 118.716 83.3057H117.916ZM130.243 83.4657C129.145 83.4657 128.27 83.1297 127.619 82.4577C126.969 81.775 126.611 80.847 126.547 79.6737C126.537 79.535 126.531 79.359 126.531 79.1457C126.531 78.9217 126.537 78.7403 126.547 78.6017C126.59 77.8443 126.766 77.183 127.075 76.6177C127.385 76.0417 127.806 75.599 128.339 75.2897C128.883 74.9803 129.518 74.8257 130.243 74.8257C131.054 74.8257 131.731 74.9963 132.275 75.3377C132.83 75.679 133.251 76.1643 133.539 76.7937C133.827 77.423 133.971 78.159 133.971 79.0017V79.2737C133.971 79.391 133.934 79.4817 133.859 79.5457C133.795 79.6097 133.71 79.6417 133.603 79.6417H128.067C128.067 79.6523 128.067 79.6737 128.067 79.7057C128.067 79.7377 128.067 79.7643 128.067 79.7857C128.089 80.223 128.185 80.6337 128.355 81.0177C128.526 81.391 128.771 81.695 129.091 81.9297C129.411 82.1643 129.795 82.2817 130.243 82.2817C130.627 82.2817 130.947 82.223 131.203 82.1057C131.459 81.9883 131.667 81.8603 131.827 81.7217C131.987 81.5723 132.094 81.4603 132.147 81.3857C132.243 81.247 132.318 81.167 132.371 81.1457C132.425 81.1137 132.51 81.0977 132.627 81.0977H133.395C133.502 81.0977 133.587 81.1297 133.651 81.1937C133.726 81.247 133.758 81.327 133.747 81.4337C133.737 81.5937 133.651 81.791 133.491 82.0257C133.331 82.2497 133.102 82.4737 132.803 82.6977C132.505 82.9217 132.142 83.1083 131.715 83.2577C131.289 83.3963 130.798 83.4657 130.243 83.4657ZM128.067 78.5377H132.451V78.4897C132.451 78.0097 132.361 77.583 132.179 77.2097C132.009 76.8363 131.758 76.543 131.427 76.3297C131.097 76.1057 130.702 75.9937 130.243 75.9937C129.785 75.9937 129.39 76.1057 129.059 76.3297C128.739 76.543 128.494 76.8363 128.323 77.2097C128.153 77.583 128.067 78.0097 128.067 78.4897V78.5377ZM135.933 83.3057C135.826 83.3057 135.735 83.2737 135.661 83.2097C135.597 83.135 135.565 83.0443 135.565 82.9377V75.3697C135.565 75.263 135.597 75.1723 135.661 75.0977C135.735 75.023 135.826 74.9857 135.933 74.9857H136.669C136.775 74.9857 136.866 75.023 136.941 75.0977C137.015 75.1723 137.053 75.263 137.053 75.3697V76.0737C137.266 75.711 137.559 75.439 137.933 75.2577C138.306 75.0763 138.754 74.9857 139.277 74.9857H139.917C140.023 74.9857 140.109 75.023 140.173 75.0977C140.237 75.1617 140.269 75.247 140.269 75.3537V76.0097C140.269 76.1163 140.237 76.2017 140.173 76.2657C140.109 76.3297 140.023 76.3617 139.917 76.3617H138.957C138.381 76.3617 137.927 76.5323 137.597 76.8737C137.266 77.2043 137.101 77.6577 137.101 78.2337V82.9377C137.101 83.0443 137.063 83.135 136.989 83.2097C136.914 83.2737 136.823 83.3057 136.717 83.3057H135.933ZM144.203 83.4657C143.605 83.4657 143.093 83.391 142.667 83.2417C142.24 83.0923 141.893 82.911 141.627 82.6977C141.36 82.4843 141.157 82.271 141.019 82.0577C140.891 81.8443 140.821 81.6737 140.811 81.5457C140.8 81.4283 140.837 81.3377 140.923 81.2737C141.008 81.2097 141.093 81.1777 141.179 81.1777H141.883C141.947 81.1777 141.995 81.1883 142.027 81.2097C142.069 81.2203 142.123 81.263 142.187 81.3377C142.325 81.487 142.48 81.6363 142.651 81.7857C142.821 81.935 143.029 82.0577 143.275 82.1537C143.531 82.2497 143.845 82.2977 144.219 82.2977C144.763 82.2977 145.211 82.1963 145.563 81.9937C145.915 81.7803 146.091 81.471 146.091 81.0657C146.091 80.799 146.016 80.5857 145.867 80.4257C145.728 80.2657 145.472 80.1217 145.099 79.9937C144.736 79.8657 144.235 79.7323 143.595 79.5937C142.955 79.4443 142.448 79.263 142.075 79.0497C141.701 78.8257 141.435 78.5643 141.275 78.2657C141.115 77.9563 141.035 77.6097 141.035 77.2257C141.035 76.831 141.152 76.4523 141.387 76.0897C141.621 75.7163 141.963 75.4123 142.411 75.1777C142.869 74.943 143.44 74.8257 144.123 74.8257C144.677 74.8257 145.152 74.895 145.547 75.0337C145.941 75.1723 146.267 75.3483 146.523 75.5617C146.779 75.7643 146.971 75.967 147.099 76.1697C147.227 76.3723 147.296 76.543 147.307 76.6817C147.317 76.7883 147.285 76.879 147.211 76.9537C147.136 77.0177 147.051 77.0497 146.955 77.0497H146.283C146.208 77.0497 146.144 77.0337 146.091 77.0017C146.048 76.9697 146.005 76.9323 145.963 76.8897C145.856 76.751 145.728 76.6123 145.579 76.4737C145.44 76.335 145.253 76.223 145.019 76.1377C144.795 76.0417 144.496 75.9937 144.123 75.9937C143.589 75.9937 143.189 76.1057 142.923 76.3297C142.656 76.5537 142.523 76.8363 142.523 77.1777C142.523 77.3803 142.581 77.5617 142.699 77.7217C142.816 77.8817 143.04 78.0257 143.371 78.1537C143.701 78.2817 144.192 78.4203 144.843 78.5697C145.547 78.7083 146.101 78.895 146.507 79.1297C146.912 79.3643 147.2 79.6363 147.371 79.9457C147.541 80.255 147.627 80.6123 147.627 81.0177C147.627 81.4657 147.493 81.8763 147.227 82.2497C146.971 82.623 146.587 82.9217 146.075 83.1457C145.573 83.359 144.949 83.4657 144.203 83.4657Z",fill:"#36342C",id:"path3"})))}const H=e.forwardRef(j);i.p;var Z,W,G;const q=["title","titleId"];function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},X.apply(null,arguments)}function Y(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,q);return e.createElement("svg",X({width:160,height:89,viewBox:"0 0 160 89",fill:"none",id:"svg3",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,Z||(Z=e.createElement("defs",{id:"defs3"})),W||(W=e.createElement("path",{d:"M1.82 16.3057C1.732 16.3057 1.664 16.2817 1.616 16.2337C1.568 16.1777 1.544 16.1097 1.544 16.0297V8.18166C1.544 8.10166 1.568 8.03766 1.616 7.98966C1.664 7.93366 1.732 7.90566 1.82 7.90566H2.456C2.536 7.90566 2.6 7.93366 2.648 7.98966C2.696 8.03766 2.72 8.10166 2.72 8.18166V15.2617H6.716C6.804 15.2617 6.872 15.2897 6.92 15.3457C6.968 15.3937 6.992 15.4617 6.992 15.5497V16.0297C6.992 16.1097 6.968 16.1777 6.92 16.2337C6.872 16.2817 6.804 16.3057 6.716 16.3057H1.82ZM10.3848 16.4257C9.56081 16.4257 8.90481 16.1737 8.41681 15.6697C7.92881 15.1577 7.66081 14.4617 7.61281 13.5817C7.60481 13.4777 7.60081 13.3457 7.60081 13.1857C7.60081 13.0177 7.60481 12.8817 7.61281 12.7777C7.64481 12.2097 7.77681 11.7137 8.00881 11.2897C8.24081 10.8577 8.55681 10.5257 8.95681 10.2937C9.36481 10.0617 9.84081 9.94566 10.3848 9.94566C10.9928 9.94566 11.5008 10.0737 11.9088 10.3297C12.3248 10.5857 12.6408 10.9497 12.8568 11.4217C13.0728 11.8937 13.1808 12.4457 13.1808 13.0777V13.2817C13.1808 13.3697 13.1528 13.4377 13.0968 13.4857C13.0488 13.5337 12.9848 13.5577 12.9048 13.5577H8.75281C8.75281 13.5657 8.75281 13.5817 8.75281 13.6057C8.75281 13.6297 8.75281 13.6497 8.75281 13.6657C8.76881 13.9937 8.84081 14.3017 8.96881 14.5897C9.09681 14.8697 9.28081 15.0977 9.52081 15.2737C9.76081 15.4497 10.0488 15.5377 10.3848 15.5377C10.6728 15.5377 10.9128 15.4937 11.1048 15.4057C11.2968 15.3177 11.4528 15.2217 11.5728 15.1177C11.6928 15.0057 11.7728 14.9217 11.8128 14.8657C11.8848 14.7617 11.9408 14.7017 11.9808 14.6857C12.0208 14.6617 12.0848 14.6497 12.1728 14.6497H12.7488C12.8288 14.6497 12.8928 14.6737 12.9408 14.7217C12.9968 14.7617 13.0208 14.8217 13.0128 14.9017C13.0048 15.0217 12.9408 15.1697 12.8208 15.3457C12.7008 15.5137 12.5288 15.6817 12.3048 15.8497C12.0808 16.0177 11.8088 16.1577 11.4888 16.2697C11.1688 16.3737 10.8008 16.4257 10.3848 16.4257ZM8.75281 12.7297H12.0408V12.6937C12.0408 12.3337 11.9728 12.0137 11.8368 11.7337C11.7088 11.4537 11.5208 11.2337 11.2728 11.0737C11.0248 10.9057 10.7288 10.8217 10.3848 10.8217C10.0408 10.8217 9.74481 10.9057 9.49681 11.0737C9.25681 11.2337 9.07281 11.4537 8.94481 11.7337C8.81681 12.0137 8.75281 12.3337 8.75281 12.6937V12.7297ZM16.4567 16.3057C16.3367 16.3057 16.2407 16.2777 16.1687 16.2217C16.1047 16.1657 16.0527 16.0937 16.0127 16.0057L13.7927 10.4377C13.7767 10.3977 13.7687 10.3577 13.7687 10.3177C13.7687 10.2457 13.7927 10.1857 13.8407 10.1377C13.8887 10.0897 13.9487 10.0657 14.0207 10.0657H14.5967C14.6847 10.0657 14.7527 10.0897 14.8007 10.1377C14.8487 10.1857 14.8767 10.2297 14.8847 10.2697L16.7207 14.9977L18.5447 10.2697C18.5607 10.2297 18.5887 10.1857 18.6287 10.1377C18.6767 10.0897 18.7447 10.0657 18.8327 10.0657H19.4207C19.4847 10.0657 19.5407 10.0897 19.5887 10.1377C19.6447 10.1857 19.6727 10.2457 19.6727 10.3177C19.6727 10.3577 19.6647 10.3977 19.6487 10.4377L17.4167 16.0057C17.3847 16.0937 17.3327 16.1657 17.2607 16.2217C17.1967 16.2777 17.1007 16.3057 16.9727 16.3057H16.4567ZM23.0706 16.4257C22.2466 16.4257 21.5906 16.1737 21.1026 15.6697C20.6146 15.1577 20.3466 14.4617 20.2986 13.5817C20.2906 13.4777 20.2866 13.3457 20.2866 13.1857C20.2866 13.0177 20.2906 12.8817 20.2986 12.7777C20.3306 12.2097 20.4626 11.7137 20.6946 11.2897C20.9266 10.8577 21.2426 10.5257 21.6426 10.2937C22.0506 10.0617 22.5266 9.94566 23.0706 9.94566C23.6786 9.94566 24.1866 10.0737 24.5946 10.3297C25.0106 10.5857 25.3266 10.9497 25.5426 11.4217C25.7586 11.8937 25.8666 12.4457 25.8666 13.0777V13.2817C25.8666 13.3697 25.8386 13.4377 25.7826 13.4857C25.7346 13.5337 25.6706 13.5577 25.5906 13.5577H21.4386C21.4386 13.5657 21.4386 13.5817 21.4386 13.6057C21.4386 13.6297 21.4386 13.6497 21.4386 13.6657C21.4546 13.9937 21.5266 14.3017 21.6546 14.5897C21.7826 14.8697 21.9666 15.0977 22.2066 15.2737C22.4466 15.4497 22.7346 15.5377 23.0706 15.5377C23.3586 15.5377 23.5986 15.4937 23.7906 15.4057C23.9826 15.3177 24.1386 15.2217 24.2586 15.1177C24.3786 15.0057 24.4586 14.9217 24.4986 14.8657C24.5706 14.7617 24.6266 14.7017 24.6666 14.6857C24.7066 14.6617 24.7706 14.6497 24.8586 14.6497H25.4346C25.5146 14.6497 25.5786 14.6737 25.6266 14.7217C25.6826 14.7617 25.7066 14.8217 25.6986 14.9017C25.6906 15.0217 25.6266 15.1697 25.5066 15.3457C25.3866 15.5137 25.2146 15.6817 24.9906 15.8497C24.7666 16.0177 24.4946 16.1577 24.1746 16.2697C23.8546 16.3737 23.4866 16.4257 23.0706 16.4257ZM21.4386 12.7297H24.7266V12.6937C24.7266 12.3337 24.6586 12.0137 24.5226 11.7337C24.3946 11.4537 24.2066 11.2337 23.9586 11.0737C23.7106 10.9057 23.4146 10.8217 23.0706 10.8217C22.7266 10.8217 22.4306 10.9057 22.1826 11.0737C21.9426 11.2337 21.7586 11.4537 21.6306 11.7337C21.5026 12.0137 21.4386 12.3337 21.4386 12.6937V12.7297ZM27.4694 16.3057C27.3894 16.3057 27.3214 16.2817 27.2654 16.2337C27.2174 16.1777 27.1934 16.1097 27.1934 16.0297V8.06166C27.1934 7.98166 27.2174 7.91766 27.2654 7.86966C27.3214 7.81366 27.3894 7.78566 27.4694 7.78566H28.0334C28.1214 7.78566 28.1894 7.81366 28.2374 7.86966C28.2854 7.91766 28.3094 7.98166 28.3094 8.06166V16.0297C28.3094 16.1097 28.2854 16.1777 28.2374 16.2337C28.1894 16.2817 28.1214 16.3057 28.0334 16.3057H27.4694ZM35.7168 16.4257C35.1648 16.4257 34.6968 16.3417 34.3128 16.1737C33.9368 15.9977 33.6288 15.7577 33.3888 15.4537C33.1488 15.1497 32.9728 14.8017 32.8608 14.4097C32.7568 14.0177 32.6968 13.6017 32.6808 13.1617C32.6728 12.9457 32.6648 12.7177 32.6568 12.4777C32.6568 12.2377 32.6568 11.9977 32.6568 11.7577C32.6648 11.5097 32.6728 11.2737 32.6808 11.0497C32.6888 10.6097 32.7488 10.1937 32.8608 9.80166C32.9808 9.40166 33.1568 9.05366 33.3888 8.75766C33.6288 8.45366 33.9408 8.21766 34.3248 8.04966C34.7088 7.87366 35.1728 7.78566 35.7168 7.78566C36.2688 7.78566 36.7328 7.87366 37.1088 8.04966C37.4928 8.21766 37.8048 8.45366 38.0448 8.75766C38.2848 9.05366 38.4608 9.40166 38.5728 9.80166C38.6928 10.1937 38.7568 10.6097 38.7648 11.0497C38.7728 11.2737 38.7768 11.5097 38.7768 11.7577C38.7848 11.9977 38.7848 12.2377 38.7768 12.4777C38.7768 12.7177 38.7728 12.9457 38.7648 13.1617C38.7568 13.6017 38.6928 14.0177 38.5728 14.4097C38.4608 14.8017 38.2848 15.1497 38.0448 15.4537C37.8128 15.7577 37.5048 15.9977 37.1208 16.1737C36.7448 16.3417 36.2768 16.4257 35.7168 16.4257ZM35.7168 15.4057C36.3408 15.4057 36.8008 15.2017 37.0968 14.7937C37.4008 14.3777 37.5568 13.8137 37.5648 13.1017C37.5808 12.8697 37.5888 12.6457 37.5888 12.4297C37.5888 12.2057 37.5888 11.9857 37.5888 11.7697C37.5888 11.5457 37.5808 11.3257 37.5648 11.1097C37.5568 10.4137 37.4008 9.85766 37.0968 9.44166C36.8008 9.01766 36.3408 8.80566 35.7168 8.80566C35.1008 8.80566 34.6408 9.01766 34.3368 9.44166C34.0408 9.85766 33.8848 10.4137 33.8688 11.1097C33.8688 11.3257 33.8648 11.5457 33.8568 11.7697C33.8568 11.9857 33.8568 12.2057 33.8568 12.4297C33.8648 12.6457 33.8688 12.8697 33.8688 13.1017C33.8848 13.8137 34.0448 14.3777 34.3488 14.7937C34.6528 15.2017 35.1088 15.4057 35.7168 15.4057ZM40.274 16.3057C40.194 16.3057 40.126 16.2817 40.07 16.2337C40.022 16.1777 39.998 16.1097 39.998 16.0297V15.6457C39.998 15.5737 40.018 15.4937 40.058 15.4057C40.098 15.3177 40.178 15.2217 40.298 15.1177L42.842 12.5737C43.25 12.2297 43.57 11.9377 43.802 11.6977C44.042 11.4497 44.21 11.2137 44.306 10.9897C44.41 10.7657 44.462 10.5337 44.462 10.2937C44.462 9.83766 44.334 9.47766 44.078 9.21366C43.822 8.94166 43.442 8.80566 42.938 8.80566C42.618 8.80566 42.342 8.87366 42.11 9.00966C41.878 9.13766 41.694 9.31766 41.558 9.54966C41.43 9.77366 41.346 10.0297 41.306 10.3177C41.29 10.4217 41.246 10.4937 41.174 10.5337C41.11 10.5737 41.05 10.5937 40.994 10.5937H40.37C40.298 10.5937 40.238 10.5737 40.19 10.5337C40.142 10.4857 40.118 10.4297 40.118 10.3657C40.126 10.0617 40.19 9.75766 40.31 9.45366C40.43 9.14166 40.606 8.86166 40.838 8.61366C41.078 8.36566 41.37 8.16566 41.714 8.01366C42.066 7.85366 42.474 7.77366 42.938 7.77366C43.57 7.77366 44.086 7.88966 44.486 8.12166C44.894 8.34566 45.194 8.64566 45.386 9.02166C45.578 9.39766 45.674 9.80966 45.674 10.2577C45.674 10.6097 45.614 10.9337 45.494 11.2297C45.374 11.5177 45.198 11.8017 44.966 12.0817C44.742 12.3537 44.462 12.6337 44.126 12.9217L41.822 15.2617H45.566C45.654 15.2617 45.722 15.2857 45.77 15.3337C45.826 15.3817 45.854 15.4497 45.854 15.5377V16.0297C45.854 16.1097 45.826 16.1777 45.77 16.2337C45.722 16.2817 45.654 16.3057 45.566 16.3057H40.274Z",fill:"#88836D",id:"path1"})),e.createElement("path",{d:"M2.876 40.3057C2.7 40.3057 2.556 40.2497 2.444 40.1377C2.332 40.0257 2.276 39.8817 2.276 39.7057V24.1057C2.276 23.9297 2.332 23.7857 2.444 23.6737C2.556 23.5617 2.7 23.5057 2.876 23.5057H13.748C13.924 23.5057 14.068 23.5617 14.18 23.6737C14.292 23.7857 14.348 23.9297 14.348 24.1057V26.0257C14.348 26.1857 14.292 26.3217 14.18 26.4337C14.068 26.5457 13.924 26.6017 13.748 26.6017H5.972V30.3697H13.22C13.396 30.3697 13.54 30.4257 13.652 30.5377C13.764 30.6497 13.82 30.7937 13.82 30.9697V32.7457C13.82 32.9057 13.764 33.0417 13.652 33.1537C13.54 33.2657 13.396 33.3217 13.22 33.3217H5.972V37.2097H13.94C14.116 37.2097 14.26 37.2657 14.372 37.3777C14.484 37.4897 14.54 37.6337 14.54 37.8097V39.7057C14.54 39.8817 14.484 40.0257 14.372 40.1377C14.26 40.2497 14.116 40.3057 13.94 40.3057H2.876ZM20.0812 40.5457C19.2332 40.5457 18.4732 40.3857 17.8012 40.0657C17.1292 39.7297 16.5932 39.2817 16.1932 38.7217C15.7932 38.1617 15.5932 37.5377 15.5932 36.8497C15.5932 35.7137 16.0492 34.8177 16.9612 34.1617C17.8892 33.5057 19.1052 33.0577 20.6092 32.8177L23.7532 32.3617V31.9297C23.7532 31.3057 23.6092 30.8257 23.3212 30.4897C23.0332 30.1537 22.5292 29.9857 21.8092 29.9857C21.2812 29.9857 20.8572 30.0897 20.5372 30.2977C20.2172 30.5057 19.9692 30.7777 19.7932 31.1137C19.6652 31.3217 19.4812 31.4257 19.2412 31.4257H16.9612C16.7852 31.4257 16.6492 31.3777 16.5532 31.2817C16.4572 31.1697 16.4172 31.0417 16.4332 30.8977C16.4332 30.6257 16.5372 30.3057 16.7452 29.9377C16.9532 29.5697 17.2732 29.2097 17.7052 28.8577C18.1372 28.4897 18.6892 28.1857 19.3612 27.9457C20.0332 27.7057 20.8572 27.5857 21.8332 27.5857C22.8412 27.5857 23.7052 27.7057 24.4252 27.9457C25.1452 28.1857 25.7212 28.5217 26.1532 28.9537C26.5852 29.3857 26.9052 29.8897 27.1132 30.4657C27.3212 31.0257 27.4252 31.6337 27.4252 32.2897V39.7057C27.4252 39.8817 27.3692 40.0257 27.2572 40.1377C27.1452 40.2497 27.0012 40.3057 26.8252 40.3057H24.4732C24.3132 40.3057 24.1772 40.2497 24.0652 40.1377C23.9532 40.0257 23.8972 39.8817 23.8972 39.7057V38.8177C23.6892 39.1217 23.4092 39.4097 23.0572 39.6817C22.7052 39.9377 22.2812 40.1457 21.7852 40.3057C21.3052 40.4657 20.7372 40.5457 20.0812 40.5457ZM21.0412 38.0497C21.5692 38.0497 22.0412 37.9377 22.4572 37.7137C22.8732 37.4897 23.2012 37.1457 23.4412 36.6817C23.6812 36.2177 23.8012 35.6337 23.8012 34.9297V34.5217L21.5692 34.8817C20.7052 35.0257 20.0732 35.2417 19.6732 35.5297C19.2732 35.8177 19.0732 36.1697 19.0732 36.5857C19.0732 36.8897 19.1612 37.1537 19.3372 37.3777C19.5292 37.6017 19.7772 37.7697 20.0812 37.8817C20.3852 37.9937 20.7052 38.0497 21.0412 38.0497ZM34.5311 40.5457C33.5391 40.5457 32.6831 40.4337 31.9631 40.2097C31.2591 39.9697 30.6831 39.6817 30.2351 39.3457C29.8031 39.0097 29.4751 38.6737 29.2511 38.3377C29.0431 37.9857 28.9311 37.6897 28.9151 37.4497C28.8991 37.2737 28.9551 37.1297 29.0831 37.0177C29.2111 36.9057 29.3391 36.8497 29.4671 36.8497H31.7951C31.8431 36.8497 31.8911 36.8577 31.9391 36.8737C31.9871 36.8897 32.0351 36.9297 32.0831 36.9937C32.2911 37.1377 32.5071 37.3057 32.7311 37.4977C32.9551 37.6737 33.2111 37.8257 33.4991 37.9537C33.8031 38.0817 34.1791 38.1457 34.6271 38.1457C35.1551 38.1457 35.6031 38.0417 35.9711 37.8337C36.3391 37.6097 36.5231 37.2977 36.5231 36.8977C36.5231 36.6097 36.4351 36.3697 36.2591 36.1777C36.0991 35.9857 35.7871 35.8097 35.3231 35.6497C34.8591 35.4897 34.1711 35.3137 33.2591 35.1217C32.3951 34.9297 31.6591 34.6737 31.0511 34.3537C30.4431 34.0337 29.9871 33.6337 29.6831 33.1537C29.3791 32.6577 29.2271 32.0657 29.2271 31.3777C29.2271 30.7537 29.4191 30.1537 29.8031 29.5777C30.2031 29.0017 30.7871 28.5297 31.5551 28.1617C32.3231 27.7777 33.2831 27.5857 34.4351 27.5857C35.3151 27.5857 36.0831 27.6977 36.7391 27.9217C37.4111 28.1297 37.9711 28.4017 38.4191 28.7377C38.8671 29.0577 39.2031 29.3937 39.4271 29.7457C39.6671 30.0817 39.7951 30.3777 39.8111 30.6337C39.8271 30.7937 39.7791 30.9297 39.6671 31.0417C39.5551 31.1537 39.4271 31.2097 39.2831 31.2097H37.1471C37.0671 31.2097 36.9951 31.2017 36.9311 31.1857C36.8671 31.1537 36.8111 31.1137 36.7631 31.0657C36.5711 30.9377 36.3711 30.7937 36.1631 30.6337C35.9711 30.4577 35.7391 30.3057 35.4671 30.1777C35.1951 30.0497 34.8431 29.9857 34.4111 29.9857C33.8831 29.9857 33.4751 30.1057 33.1871 30.3457C32.9151 30.5697 32.7791 30.8577 32.7791 31.2097C32.7791 31.4337 32.8511 31.6417 32.9951 31.8337C33.1391 32.0257 33.4351 32.2017 33.8831 32.3617C34.3311 32.5217 35.0111 32.6897 35.9231 32.8657C37.0111 33.0577 37.8751 33.3457 38.5151 33.7297C39.1551 34.1137 39.6111 34.5617 39.8831 35.0737C40.1711 35.5697 40.3151 36.1057 40.3151 36.6817C40.3151 37.4337 40.0911 38.1057 39.6431 38.6977C39.1951 39.2737 38.5391 39.7297 37.6751 40.0657C36.8271 40.3857 35.7791 40.5457 34.5311 40.5457ZM43.6867 44.8657C43.5587 44.8657 43.4387 44.8177 43.3267 44.7217C43.2307 44.6257 43.1827 44.5057 43.1827 44.3617C43.1827 44.3297 43.1907 44.2817 43.2067 44.2177C43.2227 44.1697 43.2467 44.1057 43.2787 44.0257L45.1507 39.5377L40.5427 28.6657C40.4947 28.5377 40.4707 28.4337 40.4707 28.3537C40.4867 28.2097 40.5427 28.0897 40.6387 27.9937C40.7347 27.8817 40.8547 27.8257 40.9987 27.8257H43.3267C43.5347 27.8257 43.6867 27.8817 43.7827 27.9937C43.8787 28.0897 43.9507 28.1937 43.9987 28.3057L46.9747 35.7457L50.0227 28.3057C50.0867 28.1777 50.1667 28.0657 50.2627 27.9697C50.3587 27.8737 50.5107 27.8257 50.7187 27.8257H52.9987C53.1427 27.8257 53.2627 27.8817 53.3587 27.9937C53.4707 28.0897 53.5267 28.2017 53.5267 28.3297C53.5267 28.4097 53.4947 28.5217 53.4307 28.6657L46.6387 44.3857C46.5907 44.5137 46.5107 44.6257 46.3987 44.7217C46.3027 44.8177 46.1507 44.8657 45.9427 44.8657H43.6867ZM60.1599 45.5857C58.9759 45.5857 57.9919 45.4257 57.2079 45.1057C56.4239 44.8017 55.7999 44.4257 55.3359 43.9777C54.8879 43.5457 54.5679 43.1137 54.3759 42.6817C54.1839 42.2497 54.0799 41.9137 54.0639 41.6737C54.0479 41.4977 54.1039 41.3537 54.2319 41.2417C54.3599 41.1297 54.5039 41.0737 54.6639 41.0737H57.2319C57.3759 41.0737 57.4959 41.1057 57.5919 41.1697C57.7039 41.2497 57.7919 41.3777 57.8559 41.5537C57.9359 41.7457 58.0479 41.9457 58.1919 42.1537C58.3359 42.3777 58.5519 42.5617 58.8399 42.7057C59.1439 42.8497 59.5439 42.9217 60.0399 42.9217C60.5999 42.9217 61.0639 42.8417 61.4319 42.6817C61.7999 42.5217 62.0719 42.2497 62.2479 41.8657C62.4399 41.4817 62.5359 40.9617 62.5359 40.3057V38.6977C62.1519 39.1137 61.6639 39.4577 61.0719 39.7297C60.4959 40.0017 59.7839 40.1377 58.9359 40.1377C58.1039 40.1377 57.3679 40.0097 56.7279 39.7537C56.1039 39.4817 55.5839 39.1057 55.1679 38.6257C54.7519 38.1297 54.4319 37.5377 54.2079 36.8497C53.9839 36.1617 53.8559 35.3857 53.8239 34.5217C53.8079 34.0897 53.8079 33.6657 53.8239 33.2497C53.8559 32.4177 53.9839 31.6577 54.2079 30.9697C54.4319 30.2817 54.7519 29.6897 55.1679 29.1937C55.5839 28.6817 56.1039 28.2897 56.7279 28.0177C57.3679 27.7297 58.1039 27.5857 58.9359 27.5857C59.8159 27.5857 60.5679 27.7537 61.1919 28.0897C61.8159 28.4257 62.3279 28.8417 62.7279 29.3377V28.4257C62.7279 28.2657 62.7839 28.1297 62.8959 28.0177C63.0079 27.8897 63.1439 27.8257 63.3039 27.8257H65.6559C65.8159 27.8257 65.9519 27.8897 66.0639 28.0177C66.1919 28.1297 66.2559 28.2657 66.2559 28.4257L66.2799 39.9697C66.2799 41.1697 66.0479 42.1857 65.5839 43.0177C65.1199 43.8497 64.4319 44.4817 63.5199 44.9137C62.6239 45.3617 61.5039 45.5857 60.1599 45.5857ZM60.0399 37.3297C60.6159 37.3297 61.0799 37.2017 61.4319 36.9457C61.7999 36.6737 62.0719 36.3377 62.2479 35.9377C62.4239 35.5217 62.5199 35.0897 62.5359 34.6417C62.5519 34.4657 62.5599 34.2177 62.5599 33.8977C62.5599 33.5617 62.5519 33.3057 62.5359 33.1297C62.5199 32.6817 62.4239 32.2577 62.2479 31.8577C62.0719 31.4417 61.7999 31.1057 61.4319 30.8497C61.0799 30.5937 60.6159 30.4657 60.0399 30.4657C59.4319 30.4657 58.9519 30.6017 58.5999 30.8737C58.2479 31.1297 57.9919 31.4737 57.8319 31.9057C57.6719 32.3377 57.5759 32.8097 57.5439 33.3217C57.5279 33.7057 57.5279 34.0817 57.5439 34.4497C57.5759 34.9777 57.6719 35.4577 57.8319 35.8897C57.9919 36.3217 58.2479 36.6737 58.5999 36.9457C58.9519 37.2017 59.4319 37.3297 60.0399 37.3297ZM74.2959 40.5457C72.9679 40.5457 71.8559 40.3297 70.9599 39.8977C70.0639 39.4497 69.3759 38.8177 68.8959 38.0017C68.4319 37.1857 68.1759 36.2337 68.1279 35.1457C68.1119 34.8257 68.1039 34.4657 68.1039 34.0657C68.1039 33.6497 68.1119 33.2897 68.1279 32.9857C68.1759 31.8817 68.4479 30.9297 68.9439 30.1297C69.4399 29.3137 70.1359 28.6897 71.0319 28.2577C71.9279 27.8097 73.0159 27.5857 74.2959 27.5857C75.5599 27.5857 76.6399 27.8097 77.5359 28.2577C78.4319 28.6897 79.1279 29.3137 79.6239 30.1297C80.1199 30.9297 80.3919 31.8817 80.4399 32.9857C80.4719 33.2897 80.4879 33.6497 80.4879 34.0657C80.4879 34.4657 80.4719 34.8257 80.4399 35.1457C80.3919 36.2337 80.1279 37.1857 79.6479 38.0017C79.1839 38.8177 78.5039 39.4497 77.6079 39.8977C76.7119 40.3297 75.6079 40.5457 74.2959 40.5457ZM74.2959 37.9057C75.0799 37.9057 75.6719 37.6657 76.0719 37.1857C76.4719 36.6897 76.6879 35.9697 76.7199 35.0257C76.7359 34.7857 76.7439 34.4657 76.7439 34.0657C76.7439 33.6657 76.7359 33.3457 76.7199 33.1057C76.6879 32.1777 76.4719 31.4657 76.0719 30.9697C75.6719 30.4737 75.0799 30.2257 74.2959 30.2257C73.5119 30.2257 72.9119 30.4737 72.4959 30.9697C72.0959 31.4657 71.8799 32.1777 71.8479 33.1057C71.8319 33.3457 71.8239 33.6657 71.8239 34.0657C71.8239 34.4657 71.8319 34.7857 71.8479 35.0257C71.8799 35.9697 72.0959 36.6897 72.4959 37.1857C72.9119 37.6657 73.5119 37.9057 74.2959 37.9057ZM82.8539 40.3057C82.6939 40.3057 82.5579 40.2497 82.4459 40.1377C82.3339 40.0257 82.2779 39.8817 82.2779 39.7057V28.4257C82.2779 28.2497 82.3339 28.1057 82.4459 27.9937C82.5579 27.8817 82.6939 27.8257 82.8539 27.8257H85.2539C85.4299 27.8257 85.5739 27.8817 85.6859 27.9937C85.7979 28.1057 85.8539 28.2497 85.8539 28.4257V39.7057C85.8539 39.8817 85.7979 40.0257 85.6859 40.1377C85.5739 40.2497 85.4299 40.3057 85.2539 40.3057H82.8539ZM82.7819 25.9057C82.6219 25.9057 82.4859 25.8497 82.3739 25.7377C82.2619 25.6257 82.2059 25.4817 82.2059 25.3057V23.3857C82.2059 23.2097 82.2619 23.0657 82.3739 22.9537C82.4859 22.8257 82.6219 22.7617 82.7819 22.7617H85.3019C85.4779 22.7617 85.6219 22.8257 85.7339 22.9537C85.8619 23.0657 85.9259 23.2097 85.9259 23.3857V25.3057C85.9259 25.4817 85.8619 25.6257 85.7339 25.7377C85.6219 25.8497 85.4779 25.9057 85.3019 25.9057H82.7819ZM88.7199 40.3057C88.5599 40.3057 88.4239 40.2497 88.3119 40.1377C88.1999 40.0257 88.1439 39.8817 88.1439 39.7057V28.4257C88.1439 28.2497 88.1999 28.1057 88.3119 27.9937C88.4239 27.8817 88.5599 27.8257 88.7199 27.8257H91.0719C91.2479 27.8257 91.3919 27.8817 91.5039 27.9937C91.6159 28.1057 91.6719 28.2497 91.6719 28.4257V29.3617C92.0879 28.8497 92.6239 28.4257 93.2799 28.0897C93.9359 27.7537 94.7359 27.5857 95.6799 27.5857C96.6239 27.5857 97.4479 27.8017 98.1519 28.2337C98.8719 28.6497 99.4319 29.2657 99.8319 30.0817C100.248 30.8817 100.456 31.8577 100.456 33.0097V39.7057C100.456 39.8817 100.392 40.0257 100.264 40.1377C100.152 40.2497 100.016 40.3057 99.8559 40.3057H97.3119C97.1359 40.3057 96.9919 40.2497 96.8799 40.1377C96.7679 40.0257 96.7119 39.8817 96.7119 39.7057V33.1537C96.7119 32.3057 96.5039 31.6497 96.0879 31.1857C95.6879 30.7057 95.0959 30.4657 94.3119 30.4657C93.5599 30.4657 92.9599 30.7057 92.5119 31.1857C92.0639 31.6497 91.8399 32.3057 91.8399 33.1537V39.7057C91.8399 39.8817 91.7839 40.0257 91.6719 40.1377C91.5599 40.2497 91.4239 40.3057 91.2639 40.3057H88.7199ZM108.467 45.5857C107.283 45.5857 106.299 45.4257 105.515 45.1057C104.731 44.8017 104.107 44.4257 103.643 43.9777C103.195 43.5457 102.875 43.1137 102.683 42.6817C102.491 42.2497 102.387 41.9137 102.371 41.6737C102.355 41.4977 102.411 41.3537 102.539 41.2417C102.667 41.1297 102.811 41.0737 102.971 41.0737H105.539C105.683 41.0737 105.803 41.1057 105.899 41.1697C106.011 41.2497 106.099 41.3777 106.163 41.5537C106.243 41.7457 106.355 41.9457 106.499 42.1537C106.643 42.3777 106.859 42.5617 107.147 42.7057C107.451 42.8497 107.851 42.9217 108.347 42.9217C108.907 42.9217 109.371 42.8417 109.739 42.6817C110.107 42.5217 110.379 42.2497 110.555 41.8657C110.747 41.4817 110.843 40.9617 110.843 40.3057V38.6977C110.459 39.1137 109.971 39.4577 109.379 39.7297C108.803 40.0017 108.091 40.1377 107.243 40.1377C106.411 40.1377 105.675 40.0097 105.035 39.7537C104.411 39.4817 103.891 39.1057 103.475 38.6257C103.059 38.1297 102.739 37.5377 102.515 36.8497C102.291 36.1617 102.163 35.3857 102.131 34.5217C102.115 34.0897 102.115 33.6657 102.131 33.2497C102.163 32.4177 102.291 31.6577 102.515 30.9697C102.739 30.2817 103.059 29.6897 103.475 29.1937C103.891 28.6817 104.411 28.2897 105.035 28.0177C105.675 27.7297 106.411 27.5857 107.243 27.5857C108.123 27.5857 108.875 27.7537 109.499 28.0897C110.123 28.4257 110.635 28.8417 111.035 29.3377V28.4257C111.035 28.2657 111.091 28.1297 111.203 28.0177C111.315 27.8897 111.451 27.8257 111.611 27.8257H113.963C114.123 27.8257 114.259 27.8897 114.371 28.0177C114.499 28.1297 114.563 28.2657 114.563 28.4257L114.587 39.9697C114.587 41.1697 114.355 42.1857 113.891 43.0177C113.427 43.8497 112.739 44.4817 111.827 44.9137C110.931 45.3617 109.811 45.5857 108.467 45.5857ZM108.347 37.3297C108.923 37.3297 109.387 37.2017 109.739 36.9457C110.107 36.6737 110.379 36.3377 110.555 35.9377C110.731 35.5217 110.827 35.0897 110.843 34.6417C110.859 34.4657 110.867 34.2177 110.867 33.8977C110.867 33.5617 110.859 33.3057 110.843 33.1297C110.827 32.6817 110.731 32.2577 110.555 31.8577C110.379 31.4417 110.107 31.1057 109.739 30.8497C109.387 30.5937 108.923 30.4657 108.347 30.4657C107.739 30.4657 107.259 30.6017 106.907 30.8737C106.555 31.1297 106.299 31.4737 106.139 31.9057C105.979 32.3377 105.883 32.8097 105.851 33.3217C105.835 33.7057 105.835 34.0817 105.851 34.4497C105.883 34.9777 105.979 35.4577 106.139 35.8897C106.299 36.3217 106.555 36.6737 106.907 36.9457C107.259 37.2017 107.739 37.3297 108.347 37.3297Z",fill:"#DDA34E",id:"path2",style:{fill:"#62c8d3",fillOpacity:1}}),G||(G=e.createElement("path",{d:"M2.26 63.3057C2.14267 63.3057 2.052 63.2737 1.988 63.2097C1.924 63.135 1.892 63.0443 1.892 62.9377V52.4897C1.892 52.3723 1.924 52.2817 1.988 52.2177C2.052 52.143 2.14267 52.1057 2.26 52.1057H6.164C7.36933 52.1057 8.324 52.3883 9.028 52.9537C9.732 53.519 10.084 54.3563 10.084 55.4657C10.084 56.287 9.876 56.959 9.46 57.4817C9.05467 57.9937 8.5 58.351 7.796 58.5537L10.26 62.8097C10.292 62.8737 10.308 62.9323 10.308 62.9857C10.308 63.071 10.2707 63.1457 10.196 63.2097C10.132 63.2737 10.0573 63.3057 9.972 63.3057H9.204C9.02267 63.3057 8.88933 63.2577 8.804 63.1617C8.71867 63.0657 8.644 62.9697 8.58 62.8737L6.26 58.8097H3.46V62.9377C3.46 63.0443 3.42267 63.135 3.348 63.2097C3.284 63.2737 3.19333 63.3057 3.076 63.3057H2.26ZM3.46 57.4497H6.1C6.9 57.4497 7.49733 57.2843 7.892 56.9537C8.28667 56.6123 8.484 56.111 8.484 55.4497C8.484 54.799 8.28667 54.303 7.892 53.9617C7.508 53.6203 6.91067 53.4497 6.1 53.4497H3.46V57.4497ZM15.0666 63.4657C13.968 63.4657 13.0933 63.1297 12.4426 62.4577C11.792 61.775 11.4346 60.847 11.3706 59.6737C11.36 59.535 11.3546 59.359 11.3546 59.1457C11.3546 58.9217 11.36 58.7403 11.3706 58.6017C11.4133 57.8443 11.5893 57.183 11.8986 56.6177C12.208 56.0417 12.6293 55.599 13.1626 55.2897C13.7066 54.9803 14.3413 54.8257 15.0666 54.8257C15.8773 54.8257 16.5546 54.9963 17.0986 55.3377C17.6533 55.679 18.0746 56.1643 18.3626 56.7937C18.6506 57.423 18.7946 58.159 18.7946 59.0017V59.2737C18.7946 59.391 18.7573 59.4817 18.6826 59.5457C18.6186 59.6097 18.5333 59.6417 18.4266 59.6417H12.8906C12.8906 59.6523 12.8906 59.6737 12.8906 59.7057C12.8906 59.7377 12.8906 59.7643 12.8906 59.7857C12.912 60.223 13.008 60.6337 13.1786 61.0177C13.3493 61.391 13.5946 61.695 13.9146 61.9297C14.2346 62.1643 14.6186 62.2817 15.0666 62.2817C15.4506 62.2817 15.7706 62.223 16.0266 62.1057C16.2826 61.9883 16.4906 61.8603 16.6506 61.7217C16.8106 61.5723 16.9173 61.4603 16.9706 61.3857C17.0666 61.247 17.1413 61.167 17.1946 61.1457C17.248 61.1137 17.3333 61.0977 17.4506 61.0977H18.2186C18.3253 61.0977 18.4106 61.1297 18.4746 61.1937C18.5493 61.247 18.5813 61.327 18.5706 61.4337C18.56 61.5937 18.4746 61.791 18.3146 62.0257C18.1546 62.2497 17.9253 62.4737 17.6266 62.6977C17.328 62.9217 16.9653 63.1083 16.5386 63.2577C16.112 63.3963 15.6213 63.4657 15.0666 63.4657ZM12.8906 58.5377H17.2746V58.4897C17.2746 58.0097 17.184 57.583 17.0026 57.2097C16.832 56.8363 16.5813 56.543 16.2506 56.3297C15.92 56.1057 15.5253 55.9937 15.0666 55.9937C14.608 55.9937 14.2133 56.1057 13.8826 56.3297C13.5626 56.543 13.3173 56.8363 13.1466 57.2097C12.976 57.583 12.8906 58.0097 12.8906 58.4897V58.5377ZM20.7718 63.3057C20.6651 63.3057 20.5744 63.2737 20.4998 63.2097C20.4358 63.135 20.4038 63.0443 20.4038 62.9377V52.3137C20.4038 52.207 20.4358 52.1217 20.4998 52.0577C20.5744 51.983 20.6651 51.9457 20.7718 51.9457H21.5238C21.6411 51.9457 21.7318 51.983 21.7958 52.0577C21.8598 52.1217 21.8918 52.207 21.8918 52.3137V62.9377C21.8918 63.0443 21.8598 63.135 21.7958 63.2097C21.7318 63.2737 21.6411 63.3057 21.5238 63.3057H20.7718ZM26.2784 63.4657C25.745 63.4657 25.2597 63.359 24.8224 63.1457C24.385 62.9323 24.033 62.6443 23.7664 62.2817C23.4997 61.919 23.3664 61.5083 23.3664 61.0497C23.3664 60.3137 23.665 59.727 24.2624 59.2897C24.8597 58.8523 25.6384 58.5643 26.5984 58.4257L28.9824 58.0897V57.6257C28.9824 57.1137 28.833 56.7137 28.5344 56.4257C28.2464 56.1377 27.7717 55.9937 27.1104 55.9937C26.6304 55.9937 26.241 56.0897 25.9424 56.2817C25.6544 56.4737 25.4517 56.719 25.3344 57.0177C25.2704 57.1777 25.1584 57.2577 24.9984 57.2577H24.2784C24.161 57.2577 24.0704 57.2257 24.0064 57.1617C23.953 57.087 23.9264 57.0017 23.9264 56.9057C23.9264 56.7457 23.985 56.5483 24.1024 56.3137C24.2304 56.079 24.4224 55.8497 24.6784 55.6257C24.9344 55.4017 25.2597 55.215 25.6544 55.0657C26.0597 54.9057 26.5504 54.8257 27.1264 54.8257C27.7664 54.8257 28.305 54.911 28.7424 55.0817C29.1797 55.2417 29.521 55.4603 29.7664 55.7377C30.0224 56.015 30.2037 56.3297 30.3104 56.6817C30.4277 57.0337 30.4864 57.391 30.4864 57.7537V62.9377C30.4864 63.0443 30.449 63.135 30.3744 63.2097C30.3104 63.2737 30.225 63.3057 30.1184 63.3057H29.3824C29.265 63.3057 29.1744 63.2737 29.1104 63.2097C29.0464 63.135 29.0144 63.0443 29.0144 62.9377V62.2497C28.8757 62.4417 28.689 62.6337 28.4544 62.8257C28.2197 63.007 27.9264 63.1617 27.5744 63.2897C27.2224 63.407 26.7904 63.4657 26.2784 63.4657ZM26.6144 62.2657C27.0517 62.2657 27.4517 62.175 27.8144 61.9937C28.177 61.8017 28.4597 61.5083 28.6624 61.1137C28.8757 60.719 28.9824 60.223 28.9824 59.6257V59.1777L27.1264 59.4497C26.369 59.5563 25.7984 59.7377 25.4144 59.9937C25.0304 60.239 24.8384 60.5537 24.8384 60.9377C24.8384 61.2363 24.9237 61.487 25.0944 61.6897C25.2757 61.8817 25.4997 62.0257 25.7664 62.1217C26.0437 62.2177 26.3264 62.2657 26.6144 62.2657ZM35.6364 63.3057C35.039 63.3057 34.5537 63.1937 34.1804 62.9697C33.807 62.735 33.535 62.4097 33.3644 61.9937C33.1937 61.567 33.1084 61.0657 33.1084 60.4897V56.2657H31.8604C31.7537 56.2657 31.663 56.2337 31.5884 56.1697C31.5244 56.095 31.4924 56.0043 31.4924 55.8977V55.3537C31.4924 55.247 31.5244 55.1617 31.5884 55.0977C31.663 55.023 31.7537 54.9857 31.8604 54.9857H33.1084V52.3137C33.1084 52.207 33.1404 52.1217 33.2044 52.0577C33.279 51.983 33.3697 51.9457 33.4764 51.9457H34.2284C34.335 51.9457 34.4204 51.983 34.4844 52.0577C34.559 52.1217 34.5964 52.207 34.5964 52.3137V54.9857H36.5804C36.687 54.9857 36.7724 55.023 36.8364 55.0977C36.911 55.1617 36.9484 55.247 36.9484 55.3537V55.8977C36.9484 56.0043 36.911 56.095 36.8364 56.1697C36.7724 56.2337 36.687 56.2657 36.5804 56.2657H34.5964V60.3777C34.5964 60.879 34.6817 61.2737 34.8524 61.5617C35.023 61.8497 35.327 61.9937 35.7644 61.9937H36.7404C36.847 61.9937 36.9324 62.031 36.9964 62.1057C37.071 62.1697 37.1084 62.255 37.1084 62.3617V62.9377C37.1084 63.0443 37.071 63.135 36.9964 63.2097C36.9324 63.2737 36.847 63.3057 36.7404 63.3057H35.6364ZM38.6864 63.3057C38.5797 63.3057 38.489 63.2737 38.4144 63.2097C38.3504 63.135 38.3184 63.0443 38.3184 62.9377V55.3537C38.3184 55.247 38.3504 55.1617 38.4144 55.0977C38.489 55.023 38.5797 54.9857 38.6864 54.9857H39.4544C39.561 54.9857 39.6464 55.023 39.7104 55.0977C39.7744 55.1617 39.8064 55.247 39.8064 55.3537V62.9377C39.8064 63.0443 39.7744 63.135 39.7104 63.2097C39.6464 63.2737 39.561 63.3057 39.4544 63.3057H38.6864ZM38.5584 53.4337C38.4517 53.4337 38.361 53.4017 38.2864 53.3377C38.2224 53.263 38.1904 53.1723 38.1904 53.0657V52.2017C38.1904 52.095 38.2224 52.0097 38.2864 51.9457C38.361 51.871 38.4517 51.8337 38.5584 51.8337H39.5664C39.673 51.8337 39.7584 51.871 39.8224 51.9457C39.897 52.0097 39.9344 52.095 39.9344 52.2017V53.0657C39.9344 53.1723 39.897 53.263 39.8224 53.3377C39.7584 53.4017 39.673 53.4337 39.5664 53.4337H38.5584ZM44.7694 63.3057C44.6094 63.3057 44.4814 63.2683 44.3854 63.1937C44.3 63.119 44.2307 63.023 44.1774 62.9057L41.2174 55.4817C41.196 55.4283 41.1854 55.375 41.1854 55.3217C41.1854 55.2257 41.2174 55.1457 41.2814 55.0817C41.3454 55.0177 41.4254 54.9857 41.5214 54.9857H42.2894C42.4067 54.9857 42.4974 55.0177 42.5614 55.0817C42.6254 55.1457 42.6627 55.2043 42.6734 55.2577L45.1214 61.5617L47.5534 55.2577C47.5747 55.2043 47.612 55.1457 47.6654 55.0817C47.7294 55.0177 47.82 54.9857 47.9374 54.9857H48.7214C48.8067 54.9857 48.8814 55.0177 48.9454 55.0817C49.02 55.1457 49.0574 55.2257 49.0574 55.3217C49.0574 55.375 49.0467 55.4283 49.0254 55.4817L46.0494 62.9057C46.0067 63.023 45.9374 63.119 45.8414 63.1937C45.756 63.2683 45.628 63.3057 45.4574 63.3057H44.7694ZM53.4279 63.4657C52.3292 63.4657 51.4545 63.1297 50.8039 62.4577C50.1532 61.775 49.7959 60.847 49.7319 59.6737C49.7212 59.535 49.7159 59.359 49.7159 59.1457C49.7159 58.9217 49.7212 58.7403 49.7319 58.6017C49.7745 57.8443 49.9505 57.183 50.2599 56.6177C50.5692 56.0417 50.9905 55.599 51.5239 55.2897C52.0679 54.9803 52.7025 54.8257 53.4279 54.8257C54.2385 54.8257 54.9159 54.9963 55.4599 55.3377C56.0145 55.679 56.4359 56.1643 56.7239 56.7937C57.0119 57.423 57.1559 58.159 57.1559 59.0017V59.2737C57.1559 59.391 57.1185 59.4817 57.0439 59.5457C56.9799 59.6097 56.8945 59.6417 56.7879 59.6417H51.2519C51.2519 59.6523 51.2519 59.6737 51.2519 59.7057C51.2519 59.7377 51.2519 59.7643 51.2519 59.7857C51.2732 60.223 51.3692 60.6337 51.5399 61.0177C51.7105 61.391 51.9559 61.695 52.2759 61.9297C52.5959 62.1643 52.9799 62.2817 53.4279 62.2817C53.8119 62.2817 54.1319 62.223 54.3879 62.1057C54.6439 61.9883 54.8519 61.8603 55.0119 61.7217C55.1719 61.5723 55.2785 61.4603 55.3319 61.3857C55.4279 61.247 55.5025 61.167 55.5559 61.1457C55.6092 61.1137 55.6945 61.0977 55.8119 61.0977H56.5799C56.6865 61.0977 56.7719 61.1297 56.8359 61.1937C56.9105 61.247 56.9425 61.327 56.9319 61.4337C56.9212 61.5937 56.8359 61.791 56.6759 62.0257C56.5159 62.2497 56.2865 62.4737 55.9879 62.6977C55.6892 62.9217 55.3265 63.1083 54.8999 63.2577C54.4732 63.3963 53.9825 63.4657 53.4279 63.4657ZM51.2519 58.5377H55.6359V58.4897C55.6359 58.0097 55.5452 57.583 55.3639 57.2097C55.1932 56.8363 54.9425 56.543 54.6119 56.3297C54.2812 56.1057 53.8865 55.9937 53.4279 55.9937C52.9692 55.9937 52.5745 56.1057 52.2439 56.3297C51.9239 56.543 51.6785 56.8363 51.5079 57.2097C51.3372 57.583 51.2519 58.0097 51.2519 58.4897V58.5377ZM59.133 63.3057C59.0263 63.3057 58.9357 63.2737 58.861 63.2097C58.797 63.135 58.765 63.0443 58.765 62.9377V52.3137C58.765 52.207 58.797 52.1217 58.861 52.0577C58.9357 51.983 59.0263 51.9457 59.133 51.9457H59.885C60.0023 51.9457 60.093 51.983 60.157 52.0577C60.221 52.1217 60.253 52.207 60.253 52.3137V62.9377C60.253 63.0443 60.221 63.135 60.157 63.2097C60.093 63.2737 60.0023 63.3057 59.885 63.3057H59.133ZM63.7756 66.3457C63.6903 66.3457 63.6156 66.3137 63.5516 66.2497C63.4876 66.1857 63.4556 66.111 63.4556 66.0257C63.4556 65.983 63.461 65.9403 63.4716 65.8977C63.4823 65.855 63.5036 65.8017 63.5356 65.7377L64.7676 62.8097L61.7116 55.5937C61.6583 55.4657 61.6316 55.375 61.6316 55.3217C61.6316 55.2257 61.6636 55.1457 61.7276 55.0817C61.7916 55.0177 61.8716 54.9857 61.9676 54.9857H62.7516C62.8583 54.9857 62.9436 55.0123 63.0076 55.0657C63.0716 55.119 63.1143 55.183 63.1356 55.2577L65.5676 61.0817L68.0636 55.2577C68.0956 55.183 68.1383 55.119 68.1916 55.0657C68.2556 55.0123 68.3463 54.9857 68.4636 54.9857H69.2156C69.3116 54.9857 69.3916 55.0177 69.4556 55.0817C69.5196 55.1457 69.5516 55.2203 69.5516 55.3057C69.5516 55.359 69.525 55.455 69.4716 55.5937L64.9276 66.0737C64.8956 66.1483 64.8476 66.2123 64.7836 66.2657C64.7303 66.319 64.645 66.3457 64.5276 66.3457H63.7756ZM77.3521 63.4657C76.5948 63.4657 75.9388 63.3217 75.3841 63.0337C74.8401 62.735 74.4188 62.3137 74.1201 61.7697C73.8215 61.215 73.6615 60.5537 73.6401 59.7857C73.6295 59.6257 73.6241 59.4123 73.6241 59.1457C73.6241 58.879 73.6295 58.6657 73.6401 58.5057C73.6615 57.7377 73.8215 57.0817 74.1201 56.5377C74.4188 55.983 74.8401 55.5617 75.3841 55.2737C75.9388 54.975 76.5948 54.8257 77.3521 54.8257C77.9708 54.8257 78.4988 54.911 78.9361 55.0817C79.3841 55.2523 79.7521 55.471 80.0401 55.7377C80.3281 56.0043 80.5415 56.2923 80.6801 56.6017C80.8295 56.911 80.9095 57.2043 80.9201 57.4817C80.9308 57.5883 80.8988 57.6737 80.8241 57.7377C80.7495 57.8017 80.6588 57.8337 80.5521 57.8337H79.7841C79.6775 57.8337 79.5975 57.8123 79.5441 57.7697C79.4908 57.7163 79.4375 57.631 79.3841 57.5137C79.1921 56.991 78.9308 56.623 78.6001 56.4097C78.2695 56.1963 77.8588 56.0897 77.3681 56.0897C76.7281 56.0897 76.2055 56.287 75.8001 56.6817C75.4055 57.0763 75.1921 57.711 75.1601 58.5857C75.1495 58.9697 75.1495 59.343 75.1601 59.7057C75.1921 60.591 75.4055 61.231 75.8001 61.6257C76.2055 62.0097 76.7281 62.2017 77.3681 62.2017C77.8588 62.2017 78.2695 62.095 78.6001 61.8817C78.9308 61.6683 79.1921 61.3003 79.3841 60.7777C79.4375 60.6603 79.4908 60.5803 79.5441 60.5377C79.5975 60.4843 79.6775 60.4577 79.7841 60.4577H80.5521C80.6588 60.4577 80.7495 60.4897 80.8241 60.5537C80.8988 60.6177 80.9308 60.703 80.9201 60.8097C80.9095 61.0337 80.8615 61.263 80.7761 61.4977C80.6908 61.7323 80.5521 61.9723 80.3601 62.2177C80.1788 62.4523 79.9495 62.6657 79.6721 62.8577C79.3948 63.039 79.0588 63.1883 78.6641 63.3057C78.2801 63.4123 77.8428 63.4657 77.3521 63.4657ZM85.9083 63.4657C85.0976 63.4657 84.4203 63.311 83.8763 63.0017C83.3323 62.6923 82.9163 62.2657 82.6283 61.7217C82.3403 61.167 82.1803 60.5377 82.1483 59.8337C82.1376 59.6523 82.1323 59.423 82.1323 59.1457C82.1323 58.8577 82.1376 58.6283 82.1483 58.4577C82.1803 57.743 82.3403 57.1137 82.6283 56.5697C82.9269 56.0257 83.3483 55.599 83.8923 55.2897C84.4363 54.9803 85.1083 54.8257 85.9083 54.8257C86.7083 54.8257 87.3803 54.9803 87.9243 55.2897C88.4683 55.599 88.8843 56.0257 89.1723 56.5697C89.4709 57.1137 89.6363 57.743 89.6683 58.4577C89.6789 58.6283 89.6843 58.8577 89.6843 59.1457C89.6843 59.423 89.6789 59.6523 89.6683 59.8337C89.6363 60.5377 89.4763 61.167 89.1883 61.7217C88.9003 62.2657 88.4843 62.6923 87.9403 63.0017C87.3963 63.311 86.7189 63.4657 85.9083 63.4657ZM85.9083 62.2337C86.5696 62.2337 87.0976 62.0257 87.4923 61.6097C87.8869 61.183 88.1003 60.5643 88.1323 59.7537C88.1429 59.5937 88.1483 59.391 88.1483 59.1457C88.1483 58.9003 88.1429 58.6977 88.1323 58.5377C88.1003 57.727 87.8869 57.1137 87.4923 56.6977C87.0976 56.271 86.5696 56.0577 85.9083 56.0577C85.2469 56.0577 84.7136 56.271 84.3083 56.6977C83.9136 57.1137 83.7056 57.727 83.6843 58.5377C83.6736 58.6977 83.6683 58.9003 83.6683 59.1457C83.6683 59.391 83.6736 59.5937 83.6843 59.7537C83.7056 60.5643 83.9136 61.183 84.3083 61.6097C84.7136 62.0257 85.2469 62.2337 85.9083 62.2337ZM91.7357 63.3057C91.6291 63.3057 91.5384 63.2737 91.4637 63.2097C91.3997 63.135 91.3677 63.0443 91.3677 62.9377V55.3537C91.3677 55.247 91.3997 55.1617 91.4637 55.0977C91.5384 55.023 91.6291 54.9857 91.7357 54.9857H92.4557C92.5624 54.9857 92.6477 55.023 92.7117 55.0977C92.7864 55.1617 92.8237 55.247 92.8237 55.3537V55.9137C93.0691 55.583 93.3784 55.3217 93.7517 55.1297C94.1251 54.927 94.5731 54.8257 95.0957 54.8257C96.3011 54.815 97.1544 55.3057 97.6557 56.2977C97.9011 55.8497 98.2584 55.4923 98.7277 55.2257C99.1971 54.959 99.7304 54.8257 100.328 54.8257C100.882 54.8257 101.384 54.9537 101.832 55.2097C102.29 55.4657 102.648 55.855 102.904 56.3777C103.17 56.8897 103.304 57.535 103.304 58.3137V62.9377C103.304 63.0443 103.266 63.135 103.192 63.2097C103.128 63.2737 103.042 63.3057 102.936 63.3057H102.184C102.077 63.3057 101.986 63.2737 101.912 63.2097C101.848 63.135 101.816 63.0443 101.816 62.9377V58.4577C101.816 57.8603 101.73 57.391 101.56 57.0497C101.389 56.7083 101.16 56.4683 100.872 56.3297C100.584 56.191 100.269 56.1217 99.9277 56.1217C99.6504 56.1217 99.3677 56.191 99.0797 56.3297C98.7917 56.4683 98.5517 56.7083 98.3597 57.0497C98.1784 57.391 98.0877 57.8603 98.0877 58.4577V62.9377C98.0877 63.0443 98.0504 63.135 97.9757 63.2097C97.9117 63.2737 97.8264 63.3057 97.7197 63.3057H96.9677C96.8611 63.3057 96.7704 63.2737 96.6957 63.2097C96.6317 63.135 96.5997 63.0443 96.5997 62.9377V58.4577C96.5997 57.8603 96.5091 57.391 96.3277 57.0497C96.1464 56.7083 95.9117 56.4683 95.6237 56.3297C95.3357 56.191 95.0317 56.1217 94.7117 56.1217C94.4344 56.1217 94.1517 56.191 93.8637 56.3297C93.5757 56.4683 93.3357 56.7083 93.1437 57.0497C92.9624 57.391 92.8717 57.855 92.8717 58.4417V62.9377C92.8717 63.0443 92.8344 63.135 92.7597 63.2097C92.6957 63.2737 92.6104 63.3057 92.5037 63.3057H91.7357ZM106.341 63.3057C106.235 63.3057 106.144 63.2737 106.069 63.2097C106.005 63.135 105.973 63.0443 105.973 62.9377V56.2657H104.613C104.507 56.2657 104.416 56.2337 104.341 56.1697C104.277 56.095 104.245 56.0043 104.245 55.8977V55.3537C104.245 55.247 104.277 55.1617 104.341 55.0977C104.416 55.023 104.507 54.9857 104.613 54.9857H105.973V54.1857C105.973 53.6417 106.064 53.167 106.245 52.7617C106.427 52.3457 106.715 52.0257 107.109 51.8017C107.515 51.5777 108.053 51.4657 108.725 51.4657H109.685C109.792 51.4657 109.877 51.503 109.941 51.5777C110.005 51.6417 110.037 51.727 110.037 51.8337V52.3777C110.037 52.4843 110.005 52.575 109.941 52.6497C109.877 52.7137 109.792 52.7457 109.685 52.7457H108.757C108.256 52.7457 107.915 52.879 107.733 53.1457C107.552 53.4017 107.461 53.775 107.461 54.2657V54.9857H109.525C109.632 54.9857 109.717 55.023 109.781 55.0977C109.845 55.1617 109.877 55.247 109.877 55.3537V55.8977C109.877 56.0043 109.845 56.095 109.781 56.1697C109.717 56.2337 109.632 56.2657 109.525 56.2657H107.461V62.9377C107.461 63.0443 107.424 63.135 107.349 63.2097C107.285 63.2737 107.2 63.3057 107.093 63.3057H106.341ZM114.229 63.4657C113.419 63.4657 112.741 63.311 112.197 63.0017C111.653 62.6923 111.237 62.2657 110.949 61.7217C110.661 61.167 110.501 60.5377 110.469 59.8337C110.459 59.6523 110.453 59.423 110.453 59.1457C110.453 58.8577 110.459 58.6283 110.469 58.4577C110.501 57.743 110.661 57.1137 110.949 56.5697C111.248 56.0257 111.669 55.599 112.213 55.2897C112.757 54.9803 113.429 54.8257 114.229 54.8257C115.029 54.8257 115.701 54.9803 116.245 55.2897C116.789 55.599 117.205 56.0257 117.493 56.5697C117.792 57.1137 117.957 57.743 117.989 58.4577C118 58.6283 118.005 58.8577 118.005 59.1457C118.005 59.423 118 59.6523 117.989 59.8337C117.957 60.5377 117.797 61.167 117.509 61.7217C117.221 62.2657 116.805 62.6923 116.261 63.0017C115.717 63.311 115.04 63.4657 114.229 63.4657ZM114.229 62.2337C114.891 62.2337 115.419 62.0257 115.813 61.6097C116.208 61.183 116.421 60.5643 116.453 59.7537C116.464 59.5937 116.469 59.391 116.469 59.1457C116.469 58.9003 116.464 58.6977 116.453 58.5377C116.421 57.727 116.208 57.1137 115.813 56.6977C115.419 56.271 114.891 56.0577 114.229 56.0577C113.568 56.0577 113.035 56.271 112.629 56.6977C112.235 57.1137 112.027 57.727 112.005 58.5377C111.995 58.6977 111.989 58.9003 111.989 59.1457C111.989 59.391 111.995 59.5937 112.005 59.7537C112.027 60.5643 112.235 61.183 112.629 61.6097C113.035 62.0257 113.568 62.2337 114.229 62.2337ZM120.057 63.3057C119.95 63.3057 119.86 63.2737 119.785 63.2097C119.721 63.135 119.689 63.0443 119.689 62.9377V55.3697C119.689 55.263 119.721 55.1723 119.785 55.0977C119.86 55.023 119.95 54.9857 120.057 54.9857H120.793C120.9 54.9857 120.99 55.023 121.065 55.0977C121.14 55.1723 121.177 55.263 121.177 55.3697V56.0737C121.39 55.711 121.684 55.439 122.057 55.2577C122.43 55.0763 122.878 54.9857 123.401 54.9857H124.041C124.148 54.9857 124.233 55.023 124.297 55.0977C124.361 55.1617 124.393 55.247 124.393 55.3537V56.0097C124.393 56.1163 124.361 56.2017 124.297 56.2657C124.233 56.3297 124.148 56.3617 124.041 56.3617H123.081C122.505 56.3617 122.052 56.5323 121.721 56.8737C121.39 57.2043 121.225 57.6577 121.225 58.2337V62.9377C121.225 63.0443 121.188 63.135 121.113 63.2097C121.038 63.2737 120.948 63.3057 120.841 63.3057H120.057ZM128.695 63.3057C128.098 63.3057 127.612 63.1937 127.239 62.9697C126.866 62.735 126.594 62.4097 126.423 61.9937C126.252 61.567 126.167 61.0657 126.167 60.4897V56.2657H124.919C124.812 56.2657 124.722 56.2337 124.647 56.1697C124.583 56.095 124.551 56.0043 124.551 55.8977V55.3537C124.551 55.247 124.583 55.1617 124.647 55.0977C124.722 55.023 124.812 54.9857 124.919 54.9857H126.167V52.3137C126.167 52.207 126.199 52.1217 126.263 52.0577C126.338 51.983 126.428 51.9457 126.535 51.9457H127.287C127.394 51.9457 127.479 51.983 127.543 52.0577C127.618 52.1217 127.655 52.207 127.655 52.3137V54.9857H129.639C129.746 54.9857 129.831 55.023 129.895 55.0977C129.97 55.1617 130.007 55.247 130.007 55.3537V55.8977C130.007 56.0043 129.97 56.095 129.895 56.1697C129.831 56.2337 129.746 56.2657 129.639 56.2657H127.655V60.3777C127.655 60.879 127.74 61.2737 127.911 61.5617C128.082 61.8497 128.386 61.9937 128.823 61.9937H129.799C129.906 61.9937 129.991 62.031 130.055 62.1057C130.13 62.1697 130.167 62.255 130.167 62.3617V62.9377C130.167 63.0443 130.13 63.135 130.055 63.2097C129.991 63.2737 129.906 63.3057 129.799 63.3057H128.695ZM133.697 63.4657C133.164 63.4657 132.678 63.359 132.241 63.1457C131.804 62.9323 131.452 62.6443 131.185 62.2817C130.918 61.919 130.785 61.5083 130.785 61.0497C130.785 60.3137 131.084 59.727 131.681 59.2897C132.278 58.8523 133.057 58.5643 134.017 58.4257L136.401 58.0897V57.6257C136.401 57.1137 136.252 56.7137 135.953 56.4257C135.665 56.1377 135.19 55.9937 134.529 55.9937C134.049 55.9937 133.66 56.0897 133.361 56.2817C133.073 56.4737 132.87 56.719 132.753 57.0177C132.689 57.1777 132.577 57.2577 132.417 57.2577H131.697C131.58 57.2577 131.489 57.2257 131.425 57.1617C131.372 57.087 131.345 57.0017 131.345 56.9057C131.345 56.7457 131.404 56.5483 131.521 56.3137C131.649 56.079 131.841 55.8497 132.097 55.6257C132.353 55.4017 132.678 55.215 133.073 55.0657C133.478 54.9057 133.969 54.8257 134.545 54.8257C135.185 54.8257 135.724 54.911 136.161 55.0817C136.598 55.2417 136.94 55.4603 137.185 55.7377C137.441 56.015 137.622 56.3297 137.729 56.6817C137.846 57.0337 137.905 57.391 137.905 57.7537V62.9377C137.905 63.0443 137.868 63.135 137.793 63.2097C137.729 63.2737 137.644 63.3057 137.537 63.3057H136.801C136.684 63.3057 136.593 63.2737 136.529 63.2097C136.465 63.135 136.433 63.0443 136.433 62.9377V62.2497C136.294 62.4417 136.108 62.6337 135.873 62.8257C135.638 63.007 135.345 63.1617 134.993 63.2897C134.641 63.407 134.209 63.4657 133.697 63.4657ZM134.033 62.2657C134.47 62.2657 134.87 62.175 135.233 61.9937C135.596 61.8017 135.878 61.5083 136.081 61.1137C136.294 60.719 136.401 60.223 136.401 59.6257V59.1777L134.545 59.4497C133.788 59.5563 133.217 59.7377 132.833 59.9937C132.449 60.239 132.257 60.5537 132.257 60.9377C132.257 61.2363 132.342 61.487 132.513 61.6897C132.694 61.8817 132.918 62.0257 133.185 62.1217C133.462 62.2177 133.745 62.2657 134.033 62.2657ZM143.997 63.4657C143.357 63.4657 142.824 63.3537 142.397 63.1297C141.971 62.895 141.629 62.607 141.373 62.2657V62.9377C141.373 63.0443 141.336 63.135 141.261 63.2097C141.197 63.2737 141.112 63.3057 141.005 63.3057H140.269C140.163 63.3057 140.072 63.2737 139.997 63.2097C139.933 63.135 139.901 63.0443 139.901 62.9377V52.3137C139.901 52.207 139.933 52.1217 139.997 52.0577C140.072 51.983 140.163 51.9457 140.269 51.9457H141.037C141.155 51.9457 141.245 51.983 141.309 52.0577C141.373 52.1217 141.405 52.207 141.405 52.3137V55.9937C141.672 55.663 142.013 55.3857 142.429 55.1617C142.856 54.9377 143.379 54.8257 143.997 54.8257C144.595 54.8257 145.101 54.9323 145.517 55.1457C145.944 55.3483 146.291 55.631 146.557 55.9937C146.835 56.3563 147.043 56.767 147.181 57.2257C147.32 57.6843 147.395 58.1643 147.405 58.6657C147.416 58.8363 147.421 58.9963 147.421 59.1457C147.421 59.295 147.416 59.455 147.405 59.6257C147.395 60.1377 147.32 60.623 147.181 61.0817C147.043 61.5403 146.835 61.951 146.557 62.3137C146.291 62.6657 145.944 62.9483 145.517 63.1617C145.101 63.3643 144.595 63.4657 143.997 63.4657ZM143.661 62.1697C144.216 62.1697 144.648 62.0523 144.957 61.8177C145.277 61.5723 145.507 61.2577 145.645 60.8737C145.784 60.479 145.864 60.0577 145.885 59.6097C145.896 59.3003 145.896 58.991 145.885 58.6817C145.864 58.2337 145.784 57.8177 145.645 57.4337C145.507 57.039 145.277 56.7243 144.957 56.4897C144.648 56.2443 144.216 56.1217 143.661 56.1217C143.16 56.1217 142.744 56.239 142.413 56.4737C142.083 56.7083 141.832 57.007 141.661 57.3697C141.501 57.7323 141.416 58.1003 141.405 58.4737C141.395 58.6443 141.389 58.8523 141.389 59.0977C141.389 59.3323 141.395 59.535 141.405 59.7057C141.427 60.1003 141.512 60.4897 141.661 60.8737C141.821 61.247 142.061 61.5563 142.381 61.8017C142.712 62.047 143.139 62.1697 143.661 62.1697ZM149.465 63.3057C149.358 63.3057 149.268 63.2737 149.193 63.2097C149.129 63.135 149.097 63.0443 149.097 62.9377V52.3137C149.097 52.207 149.129 52.1217 149.193 52.0577C149.268 51.983 149.358 51.9457 149.465 51.9457H150.217C150.334 51.9457 150.425 51.983 150.489 52.0577C150.553 52.1217 150.585 52.207 150.585 52.3137V62.9377C150.585 63.0443 150.553 63.135 150.489 63.2097C150.425 63.2737 150.334 63.3057 150.217 63.3057H149.465ZM155.963 63.4657C154.865 63.4657 153.99 63.1297 153.339 62.4577C152.689 61.775 152.331 60.847 152.267 59.6737C152.257 59.535 152.251 59.359 152.251 59.1457C152.251 58.9217 152.257 58.7403 152.267 58.6017C152.31 57.8443 152.486 57.183 152.795 56.6177C153.105 56.0417 153.526 55.599 154.059 55.2897C154.603 54.9803 155.238 54.8257 155.963 54.8257C156.774 54.8257 157.451 54.9963 157.995 55.3377C158.55 55.679 158.971 56.1643 159.259 56.7937C159.547 57.423 159.691 58.159 159.691 59.0017V59.2737C159.691 59.391 159.654 59.4817 159.579 59.5457C159.515 59.6097 159.43 59.6417 159.323 59.6417H153.787C153.787 59.6523 153.787 59.6737 153.787 59.7057C153.787 59.7377 153.787 59.7643 153.787 59.7857C153.809 60.223 153.905 60.6337 154.075 61.0177C154.246 61.391 154.491 61.695 154.811 61.9297C155.131 62.1643 155.515 62.2817 155.963 62.2817C156.347 62.2817 156.667 62.223 156.923 62.1057C157.179 61.9883 157.387 61.8603 157.547 61.7217C157.707 61.5723 157.814 61.4603 157.867 61.3857C157.963 61.247 158.038 61.167 158.091 61.1457C158.145 61.1137 158.23 61.0977 158.347 61.0977H159.115C159.222 61.0977 159.307 61.1297 159.371 61.1937C159.446 61.247 159.478 61.327 159.467 61.4337C159.457 61.5937 159.371 61.791 159.211 62.0257C159.051 62.2497 158.822 62.4737 158.523 62.6977C158.225 62.9217 157.862 63.1083 157.435 63.2577C157.009 63.3963 156.518 63.4657 155.963 63.4657ZM153.787 58.5377H158.171V58.4897C158.171 58.0097 158.081 57.583 157.899 57.2097C157.729 56.8363 157.478 56.543 157.147 56.3297C156.817 56.1057 156.422 55.9937 155.963 55.9937C155.505 55.9937 155.11 56.1057 154.779 56.3297C154.459 56.543 154.214 56.8363 154.043 57.2097C153.873 57.583 153.787 58.0097 153.787 58.4897V58.5377ZM2.884 83.3057C2.77733 83.3057 2.68667 83.2737 2.612 83.2097C2.548 83.135 2.516 83.0443 2.516 82.9377V76.2657H1.156C1.04933 76.2657 0.958667 76.2337 0.884 76.1697C0.82 76.095 0.788 76.0043 0.788 75.8977V75.3537C0.788 75.247 0.82 75.1617 0.884 75.0977C0.958667 75.023 1.04933 74.9857 1.156 74.9857H2.516V74.1857C2.516 73.6417 2.60667 73.167 2.788 72.7617C2.96933 72.3457 3.25733 72.0257 3.652 71.8017C4.05733 71.5777 4.596 71.4657 5.268 71.4657H6.228C6.33467 71.4657 6.42 71.503 6.484 71.5777C6.548 71.6417 6.58 71.727 6.58 71.8337V72.3777C6.58 72.4843 6.548 72.575 6.484 72.6497C6.42 72.7137 6.33467 72.7457 6.228 72.7457H5.3C4.79867 72.7457 4.45733 72.879 4.276 73.1457C4.09467 73.4017 4.004 73.775 4.004 74.2657V74.9857H6.068C6.17467 74.9857 6.26 75.023 6.324 75.0977C6.388 75.1617 6.42 75.247 6.42 75.3537V75.8977C6.42 76.0043 6.388 76.095 6.324 76.1697C6.26 76.2337 6.17467 76.2657 6.068 76.2657H4.004V82.9377C4.004 83.0443 3.96667 83.135 3.892 83.2097C3.828 83.2737 3.74267 83.3057 3.636 83.3057H2.884ZM10.772 83.4657C9.96133 83.4657 9.284 83.311 8.74 83.0017C8.196 82.6923 7.78 82.2657 7.492 81.7217C7.204 81.167 7.044 80.5377 7.012 79.8337C7.00133 79.6523 6.996 79.423 6.996 79.1457C6.996 78.8577 7.00133 78.6283 7.012 78.4577C7.044 77.743 7.204 77.1137 7.492 76.5697C7.79067 76.0257 8.212 75.599 8.756 75.2897C9.3 74.9803 9.972 74.8257 10.772 74.8257C11.572 74.8257 12.244 74.9803 12.788 75.2897C13.332 75.599 13.748 76.0257 14.036 76.5697C14.3347 77.1137 14.5 77.743 14.532 78.4577C14.5427 78.6283 14.548 78.8577 14.548 79.1457C14.548 79.423 14.5427 79.6523 14.532 79.8337C14.5 80.5377 14.34 81.167 14.052 81.7217C13.764 82.2657 13.348 82.6923 12.804 83.0017C12.26 83.311 11.5827 83.4657 10.772 83.4657ZM10.772 82.2337C11.4333 82.2337 11.9613 82.0257 12.356 81.6097C12.7507 81.183 12.964 80.5643 12.996 79.7537C13.0067 79.5937 13.012 79.391 13.012 79.1457C13.012 78.9003 13.0067 78.6977 12.996 78.5377C12.964 77.727 12.7507 77.1137 12.356 76.6977C11.9613 76.271 11.4333 76.0577 10.772 76.0577C10.1107 76.0577 9.57733 76.271 9.172 76.6977C8.77733 77.1137 8.56933 77.727 8.548 78.5377C8.53733 78.6977 8.532 78.9003 8.532 79.1457C8.532 79.391 8.53733 79.5937 8.548 79.7537C8.56933 80.5643 8.77733 81.183 9.172 81.6097C9.57733 82.0257 10.1107 82.2337 10.772 82.2337ZM16.5995 83.3057C16.4928 83.3057 16.4022 83.2737 16.3275 83.2097C16.2635 83.135 16.2315 83.0443 16.2315 82.9377V75.3697C16.2315 75.263 16.2635 75.1723 16.3275 75.0977C16.4022 75.023 16.4928 74.9857 16.5995 74.9857H17.3355C17.4422 74.9857 17.5328 75.023 17.6075 75.0977C17.6822 75.1723 17.7195 75.263 17.7195 75.3697V76.0737C17.9328 75.711 18.2262 75.439 18.5995 75.2577C18.9728 75.0763 19.4208 74.9857 19.9435 74.9857H20.5835C20.6902 74.9857 20.7755 75.023 20.8395 75.0977C20.9035 75.1617 20.9355 75.247 20.9355 75.3537V76.0097C20.9355 76.1163 20.9035 76.2017 20.8395 76.2657C20.7755 76.3297 20.6902 76.3617 20.5835 76.3617H19.6235C19.0475 76.3617 18.5942 76.5323 18.2635 76.8737C17.9328 77.2043 17.7675 77.6577 17.7675 78.2337V82.9377C17.7675 83.0443 17.7302 83.135 17.6555 83.2097C17.5808 83.2737 17.4902 83.3057 17.3835 83.3057H16.5995ZM25.5845 83.3057C25.4778 83.3057 25.3872 83.2737 25.3125 83.2097C25.2485 83.135 25.2165 83.0443 25.2165 82.9377V75.3537C25.2165 75.247 25.2485 75.1617 25.3125 75.0977C25.3872 75.023 25.4778 74.9857 25.5845 74.9857H26.3045C26.4112 74.9857 26.4965 75.023 26.5605 75.0977C26.6352 75.1617 26.6725 75.247 26.6725 75.3537V75.9137C26.9178 75.583 27.2272 75.3217 27.6005 75.1297C27.9738 74.927 28.4218 74.8257 28.9445 74.8257C30.1498 74.815 31.0032 75.3057 31.5045 76.2977C31.7498 75.8497 32.1072 75.4923 32.5765 75.2257C33.0458 74.959 33.5792 74.8257 34.1765 74.8257C34.7312 74.8257 35.2325 74.9537 35.6805 75.2097C36.1392 75.4657 36.4965 75.855 36.7525 76.3777C37.0192 76.8897 37.1525 77.535 37.1525 78.3137V82.9377C37.1525 83.0443 37.1152 83.135 37.0405 83.2097C36.9765 83.2737 36.8912 83.3057 36.7845 83.3057H36.0325C35.9258 83.3057 35.8352 83.2737 35.7605 83.2097C35.6965 83.135 35.6645 83.0443 35.6645 82.9377V78.4577C35.6645 77.8603 35.5792 77.391 35.4085 77.0497C35.2378 76.7083 35.0085 76.4683 34.7205 76.3297C34.4325 76.191 34.1178 76.1217 33.7765 76.1217C33.4992 76.1217 33.2165 76.191 32.9285 76.3297C32.6405 76.4683 32.4005 76.7083 32.2085 77.0497C32.0272 77.391 31.9365 77.8603 31.9365 78.4577V82.9377C31.9365 83.0443 31.8992 83.135 31.8245 83.2097C31.7605 83.2737 31.6752 83.3057 31.5685 83.3057H30.8165C30.7098 83.3057 30.6192 83.2737 30.5445 83.2097C30.4805 83.135 30.4485 83.0443 30.4485 82.9377V78.4577C30.4485 77.8603 30.3578 77.391 30.1765 77.0497C29.9952 76.7083 29.7605 76.4683 29.4725 76.3297C29.1845 76.191 28.8805 76.1217 28.5605 76.1217C28.2832 76.1217 28.0005 76.191 27.7125 76.3297C27.4245 76.4683 27.1845 76.7083 26.9925 77.0497C26.8112 77.391 26.7205 77.855 26.7205 78.4417V82.9377C26.7205 83.0443 26.6832 83.135 26.6085 83.2097C26.5445 83.2737 26.4592 83.3057 26.3525 83.3057H25.5845ZM42.5233 83.4657C41.7126 83.4657 41.0353 83.311 40.4913 83.0017C39.9473 82.6923 39.5313 82.2657 39.2433 81.7217C38.9553 81.167 38.7953 80.5377 38.7633 79.8337C38.7526 79.6523 38.7473 79.423 38.7473 79.1457C38.7473 78.8577 38.7526 78.6283 38.7633 78.4577C38.7953 77.743 38.9553 77.1137 39.2433 76.5697C39.5419 76.0257 39.9633 75.599 40.5073 75.2897C41.0513 74.9803 41.7233 74.8257 42.5233 74.8257C43.3233 74.8257 43.9953 74.9803 44.5393 75.2897C45.0833 75.599 45.4993 76.0257 45.7873 76.5697C46.0859 77.1137 46.2513 77.743 46.2833 78.4577C46.2939 78.6283 46.2993 78.8577 46.2993 79.1457C46.2993 79.423 46.2939 79.6523 46.2833 79.8337C46.2513 80.5377 46.0913 81.167 45.8033 81.7217C45.5153 82.2657 45.0993 82.6923 44.5553 83.0017C44.0113 83.311 43.3339 83.4657 42.5233 83.4657ZM42.5233 82.2337C43.1846 82.2337 43.7126 82.0257 44.1073 81.6097C44.5019 81.183 44.7153 80.5643 44.7473 79.7537C44.7579 79.5937 44.7633 79.391 44.7633 79.1457C44.7633 78.9003 44.7579 78.6977 44.7473 78.5377C44.7153 77.727 44.5019 77.1137 44.1073 76.6977C43.7126 76.271 43.1846 76.0577 42.5233 76.0577C41.8619 76.0577 41.3286 76.271 40.9233 76.6977C40.5286 77.1137 40.3206 77.727 40.2993 78.5377C40.2886 78.6977 40.2833 78.9003 40.2833 79.1457C40.2833 79.391 40.2886 79.5937 40.2993 79.7537C40.3206 80.5643 40.5286 81.183 40.9233 81.6097C41.3286 82.0257 41.8619 82.2337 42.5233 82.2337ZM50.8628 83.4657C50.2654 83.4657 49.7534 83.391 49.3268 83.2417C48.9001 83.0923 48.5534 82.911 48.2868 82.6977C48.0201 82.4843 47.8174 82.271 47.6788 82.0577C47.5508 81.8443 47.4814 81.6737 47.4708 81.5457C47.4601 81.4283 47.4974 81.3377 47.5828 81.2737C47.6681 81.2097 47.7534 81.1777 47.8388 81.1777H48.5428C48.6068 81.1777 48.6548 81.1883 48.6868 81.2097C48.7294 81.2203 48.7828 81.263 48.8468 81.3377C48.9854 81.487 49.1401 81.6363 49.3108 81.7857C49.4814 81.935 49.6894 82.0577 49.9348 82.1537C50.1908 82.2497 50.5054 82.2977 50.8788 82.2977C51.4228 82.2977 51.8708 82.1963 52.2228 81.9937C52.5748 81.7803 52.7508 81.471 52.7508 81.0657C52.7508 80.799 52.6761 80.5857 52.5268 80.4257C52.3881 80.2657 52.1321 80.1217 51.7588 79.9937C51.3961 79.8657 50.8948 79.7323 50.2548 79.5937C49.6148 79.4443 49.1081 79.263 48.7348 79.0497C48.3614 78.8257 48.0948 78.5643 47.9348 78.2657C47.7748 77.9563 47.6948 77.6097 47.6948 77.2257C47.6948 76.831 47.8121 76.4523 48.0468 76.0897C48.2814 75.7163 48.6228 75.4123 49.0708 75.1777C49.5294 74.943 50.1001 74.8257 50.7828 74.8257C51.3374 74.8257 51.8121 74.895 52.2068 75.0337C52.6014 75.1723 52.9268 75.3483 53.1828 75.5617C53.4388 75.7643 53.6308 75.967 53.7588 76.1697C53.8868 76.3723 53.9561 76.543 53.9668 76.6817C53.9774 76.7883 53.9454 76.879 53.8708 76.9537C53.7961 77.0177 53.7108 77.0497 53.6148 77.0497H52.9428C52.8681 77.0497 52.8041 77.0337 52.7508 77.0017C52.7081 76.9697 52.6654 76.9323 52.6228 76.8897C52.5161 76.751 52.3881 76.6123 52.2388 76.4737C52.1001 76.335 51.9134 76.223 51.6788 76.1377C51.4548 76.0417 51.1561 75.9937 50.7828 75.9937C50.2494 75.9937 49.8494 76.1057 49.5828 76.3297C49.3161 76.5537 49.1828 76.8363 49.1828 77.1777C49.1828 77.3803 49.2414 77.5617 49.3588 77.7217C49.4761 77.8817 49.7001 78.0257 50.0308 78.1537C50.3614 78.2817 50.8521 78.4203 51.5028 78.5697C52.2068 78.7083 52.7614 78.895 53.1668 79.1297C53.5721 79.3643 53.8601 79.6363 54.0308 79.9457C54.2014 80.255 54.2868 80.6123 54.2868 81.0177C54.2868 81.4657 54.1534 81.8763 53.8868 82.2497C53.6308 82.623 53.2468 82.9217 52.7348 83.1457C52.2334 83.359 51.6094 83.4657 50.8628 83.4657ZM59.0514 83.3057C58.454 83.3057 57.9687 83.1937 57.5954 82.9697C57.222 82.735 56.95 82.4097 56.7794 81.9937C56.6087 81.567 56.5234 81.0657 56.5234 80.4897V76.2657H55.2754C55.1687 76.2657 55.078 76.2337 55.0034 76.1697C54.9394 76.095 54.9074 76.0043 54.9074 75.8977V75.3537C54.9074 75.247 54.9394 75.1617 55.0034 75.0977C55.078 75.023 55.1687 74.9857 55.2754 74.9857H56.5234V72.3137C56.5234 72.207 56.5554 72.1217 56.6194 72.0577C56.694 71.983 56.7847 71.9457 56.8914 71.9457H57.6434C57.75 71.9457 57.8354 71.983 57.8994 72.0577C57.974 72.1217 58.0114 72.207 58.0114 72.3137V74.9857H59.9954C60.102 74.9857 60.1874 75.023 60.2514 75.0977C60.326 75.1617 60.3634 75.247 60.3634 75.3537V75.8977C60.3634 76.0043 60.326 76.095 60.2514 76.1697C60.1874 76.2337 60.102 76.2657 59.9954 76.2657H58.0114V80.3777C58.0114 80.879 58.0967 81.2737 58.2674 81.5617C58.438 81.8497 58.742 81.9937 59.1794 81.9937H60.1554C60.262 81.9937 60.3474 82.031 60.4114 82.1057C60.486 82.1697 60.5234 82.255 60.5234 82.3617V82.9377C60.5234 83.0443 60.486 83.135 60.4114 83.2097C60.3474 83.2737 60.262 83.3057 60.1554 83.3057H59.0514ZM67.6552 83.4657C67.1219 83.4657 66.6366 83.359 66.1992 83.1457C65.7619 82.9323 65.4099 82.6443 65.1432 82.2817C64.8766 81.919 64.7432 81.5083 64.7432 81.0497C64.7432 80.3137 65.0419 79.727 65.6392 79.2897C66.2366 78.8523 67.0152 78.5643 67.9752 78.4257L70.3592 78.0897V77.6257C70.3592 77.1137 70.2099 76.7137 69.9112 76.4257C69.6232 76.1377 69.1486 75.9937 68.4872 75.9937C68.0072 75.9937 67.6179 76.0897 67.3192 76.2817C67.0312 76.4737 66.8286 76.719 66.7112 77.0177C66.6472 77.1777 66.5352 77.2577 66.3752 77.2577H65.6552C65.5379 77.2577 65.4472 77.2257 65.3832 77.1617C65.3299 77.087 65.3032 77.0017 65.3032 76.9057C65.3032 76.7457 65.3619 76.5483 65.4792 76.3137C65.6072 76.079 65.7992 75.8497 66.0552 75.6257C66.3112 75.4017 66.6366 75.215 67.0312 75.0657C67.4366 74.9057 67.9272 74.8257 68.5032 74.8257C69.1432 74.8257 69.6819 74.911 70.1192 75.0817C70.5566 75.2417 70.8979 75.4603 71.1432 75.7377C71.3992 76.015 71.5806 76.3297 71.6872 76.6817C71.8046 77.0337 71.8632 77.391 71.8632 77.7537V82.9377C71.8632 83.0443 71.8259 83.135 71.7512 83.2097C71.6872 83.2737 71.6019 83.3057 71.4952 83.3057H70.7592C70.6419 83.3057 70.5512 83.2737 70.4872 83.2097C70.4232 83.135 70.3912 83.0443 70.3912 82.9377V82.2497C70.2526 82.4417 70.0659 82.6337 69.8312 82.8257C69.5966 83.007 69.3032 83.1617 68.9512 83.2897C68.5992 83.407 68.1672 83.4657 67.6552 83.4657ZM67.9912 82.2657C68.4286 82.2657 68.8286 82.175 69.1912 81.9937C69.5539 81.8017 69.8366 81.5083 70.0392 81.1137C70.2526 80.719 70.3592 80.223 70.3592 79.6257V79.1777L68.5032 79.4497C67.7459 79.5563 67.1752 79.7377 66.7912 79.9937C66.4072 80.239 66.2152 80.5537 66.2152 80.9377C66.2152 81.2363 66.3006 81.487 66.4712 81.6897C66.6526 81.8817 66.8766 82.0257 67.1432 82.1217C67.4206 82.2177 67.7032 82.2657 67.9912 82.2657ZM76.8834 83.4657C76.2967 83.4657 75.79 83.3643 75.3634 83.1617C74.9367 82.9483 74.5847 82.6657 74.3074 82.3137C74.0407 81.951 73.838 81.5403 73.6994 81.0817C73.5714 80.623 73.4967 80.1377 73.4754 79.6257C73.4647 79.455 73.4594 79.295 73.4594 79.1457C73.4594 78.9963 73.4647 78.8363 73.4754 78.6657C73.4967 78.1643 73.5714 77.6843 73.6994 77.2257C73.838 76.767 74.0407 76.3563 74.3074 75.9937C74.5847 75.631 74.9367 75.3483 75.3634 75.1457C75.79 74.9323 76.2967 74.8257 76.8834 74.8257C77.5127 74.8257 78.0354 74.9377 78.4514 75.1617C78.8674 75.3857 79.2087 75.663 79.4754 75.9937V72.3137C79.4754 72.207 79.5074 72.1217 79.5714 72.0577C79.646 71.983 79.7367 71.9457 79.8434 71.9457H80.6114C80.718 71.9457 80.8034 71.983 80.8674 72.0577C80.942 72.1217 80.9794 72.207 80.9794 72.3137V82.9377C80.9794 83.0443 80.942 83.135 80.8674 83.2097C80.8034 83.2737 80.718 83.3057 80.6114 83.3057H79.8914C79.774 83.3057 79.6834 83.2737 79.6194 83.2097C79.5554 83.135 79.5234 83.0443 79.5234 82.9377V82.2657C79.2567 82.607 78.91 82.895 78.4834 83.1297C78.0567 83.3537 77.5234 83.4657 76.8834 83.4657ZM77.2194 82.1697C77.7527 82.1697 78.1794 82.047 78.4994 81.8017C78.8194 81.5563 79.0594 81.247 79.2194 80.8737C79.3794 80.4897 79.4647 80.1003 79.4754 79.7057C79.486 79.535 79.4914 79.3323 79.4914 79.0977C79.4914 78.8523 79.486 78.6443 79.4754 78.4737C79.4647 78.1003 79.374 77.7323 79.2034 77.3697C79.0434 77.007 78.798 76.7083 78.4674 76.4737C78.1474 76.239 77.7314 76.1217 77.2194 76.1217C76.6754 76.1217 76.2434 76.2443 75.9234 76.4897C75.6034 76.7243 75.374 77.039 75.2354 77.4337C75.0967 77.8177 75.0167 78.2337 74.9954 78.6817C74.9847 78.991 74.9847 79.3003 74.9954 79.6097C75.0167 80.0577 75.0967 80.479 75.2354 80.8737C75.374 81.2577 75.6034 81.5723 75.9234 81.8177C76.2434 82.0523 76.6754 82.1697 77.2194 82.1697ZM86.143 83.4657C85.4603 83.4657 84.879 83.3163 84.399 83.0177C83.9297 82.7083 83.5723 82.2817 83.327 81.7377C83.0817 81.1937 82.959 80.5697 82.959 79.8657V75.3537C82.959 75.247 82.991 75.1617 83.055 75.0977C83.1297 75.023 83.2203 74.9857 83.327 74.9857H84.127C84.2337 74.9857 84.319 75.023 84.383 75.0977C84.4577 75.1617 84.495 75.247 84.495 75.3537V79.7857C84.495 81.375 85.1883 82.1697 86.575 82.1697C87.2363 82.1697 87.7643 81.9617 88.159 81.5457C88.5643 81.119 88.767 80.5323 88.767 79.7857V75.3537C88.767 75.247 88.799 75.1617 88.863 75.0977C88.9377 75.023 89.0283 74.9857 89.135 74.9857H89.919C90.0363 74.9857 90.127 75.023 90.191 75.0977C90.255 75.1617 90.287 75.247 90.287 75.3537V82.9377C90.287 83.0443 90.255 83.135 90.191 83.2097C90.127 83.2737 90.0363 83.3057 89.919 83.3057H89.183C89.0763 83.3057 88.9857 83.2737 88.911 83.2097C88.847 83.135 88.815 83.0443 88.815 82.9377V82.2337C88.527 82.607 88.175 82.9057 87.759 83.1297C87.3537 83.3537 86.815 83.4657 86.143 83.4657ZM92.728 83.3057C92.6213 83.3057 92.5307 83.2737 92.456 83.2097C92.392 83.135 92.36 83.0443 92.36 82.9377V72.3137C92.36 72.207 92.392 72.1217 92.456 72.0577C92.5307 71.983 92.6213 71.9457 92.728 71.9457H93.48C93.5973 71.9457 93.688 71.983 93.752 72.0577C93.816 72.1217 93.848 72.207 93.848 72.3137V82.9377C93.848 83.0443 93.816 83.135 93.752 83.2097C93.688 83.2737 93.5973 83.3057 93.48 83.3057H92.728ZM99.1626 83.3057C98.5653 83.3057 98.08 83.1937 97.7066 82.9697C97.3333 82.735 97.0613 82.4097 96.8906 81.9937C96.72 81.567 96.6346 81.0657 96.6346 80.4897V76.2657H95.3866C95.28 76.2657 95.1893 76.2337 95.1146 76.1697C95.0506 76.095 95.0186 76.0043 95.0186 75.8977V75.3537C95.0186 75.247 95.0506 75.1617 95.1146 75.0977C95.1893 75.023 95.28 74.9857 95.3866 74.9857H96.6346V72.3137C96.6346 72.207 96.6666 72.1217 96.7306 72.0577C96.8053 71.983 96.896 71.9457 97.0026 71.9457H97.7546C97.8613 71.9457 97.9466 71.983 98.0106 72.0577C98.0853 72.1217 98.1226 72.207 98.1226 72.3137V74.9857H100.107C100.213 74.9857 100.299 75.023 100.363 75.0977C100.437 75.1617 100.475 75.247 100.475 75.3537V75.8977C100.475 76.0043 100.437 76.095 100.363 76.1697C100.299 76.2337 100.213 76.2657 100.107 76.2657H98.1226V80.3777C98.1226 80.879 98.208 81.2737 98.3786 81.5617C98.5493 81.8497 98.8533 81.9937 99.2906 81.9937H100.267C100.373 81.9937 100.459 82.031 100.523 82.1057C100.597 82.1697 100.635 82.255 100.635 82.3617V82.9377C100.635 83.0443 100.597 83.135 100.523 83.2097C100.459 83.2737 100.373 83.3057 100.267 83.3057H99.1626ZM104.725 83.4657C104.127 83.4657 103.615 83.391 103.189 83.2417C102.762 83.0923 102.415 82.911 102.149 82.6977C101.882 82.4843 101.679 82.271 101.541 82.0577C101.413 81.8443 101.343 81.6737 101.333 81.5457C101.322 81.4283 101.359 81.3377 101.445 81.2737C101.53 81.2097 101.615 81.1777 101.701 81.1777H102.405C102.469 81.1777 102.517 81.1883 102.549 81.2097C102.591 81.2203 102.645 81.263 102.709 81.3377C102.847 81.487 103.002 81.6363 103.173 81.7857C103.343 81.935 103.551 82.0577 103.797 82.1537C104.053 82.2497 104.367 82.2977 104.741 82.2977C105.285 82.2977 105.733 82.1963 106.085 81.9937C106.437 81.7803 106.613 81.471 106.613 81.0657C106.613 80.799 106.538 80.5857 106.389 80.4257C106.25 80.2657 105.994 80.1217 105.621 79.9937C105.258 79.8657 104.757 79.7323 104.117 79.5937C103.477 79.4443 102.97 79.263 102.597 79.0497C102.223 78.8257 101.957 78.5643 101.797 78.2657C101.637 77.9563 101.557 77.6097 101.557 77.2257C101.557 76.831 101.674 76.4523 101.909 76.0897C102.143 75.7163 102.485 75.4123 102.933 75.1777C103.391 74.943 103.962 74.8257 104.645 74.8257C105.199 74.8257 105.674 74.895 106.069 75.0337C106.463 75.1723 106.789 75.3483 107.045 75.5617C107.301 75.7643 107.493 75.967 107.621 76.1697C107.749 76.3723 107.818 76.543 107.829 76.6817C107.839 76.7883 107.807 76.879 107.733 76.9537C107.658 77.0177 107.573 77.0497 107.477 77.0497H106.805C106.73 77.0497 106.666 77.0337 106.613 77.0017C106.57 76.9697 106.527 76.9323 106.485 76.8897C106.378 76.751 106.25 76.6123 106.101 76.4737C105.962 76.335 105.775 76.223 105.541 76.1377C105.317 76.0417 105.018 75.9937 104.645 75.9937C104.111 75.9937 103.711 76.1057 103.445 76.3297C103.178 76.5537 103.045 76.8363 103.045 77.1777C103.045 77.3803 103.103 77.5617 103.221 77.7217C103.338 77.8817 103.562 78.0257 103.893 78.1537C104.223 78.2817 104.714 78.4203 105.365 78.5697C106.069 78.7083 106.623 78.895 107.029 79.1297C107.434 79.3643 107.722 79.6363 107.893 79.9457C108.063 80.255 108.149 80.6123 108.149 81.0177C108.149 81.4657 108.015 81.8763 107.749 82.2497C107.493 82.623 107.109 82.9217 106.597 83.1457C106.095 83.359 105.471 83.4657 104.725 83.4657Z",fill:"#36342C",id:"path3"})))}const K=e.forwardRef(Y);i.p;var J,Q,$;const ee=["title","titleId"];function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},te.apply(null,arguments)}function ie(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,ee);return e.createElement("svg",te({width:155,height:89,viewBox:"0 0 155 89",fill:"none",id:"svg3",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,J||(J=e.createElement("defs",{id:"defs3"})),Q||(Q=e.createElement("path",{d:"M1.82 16.3057C1.732 16.3057 1.664 16.2817 1.616 16.2337C1.568 16.1777 1.544 16.1097 1.544 16.0297V8.18166C1.544 8.10166 1.568 8.03766 1.616 7.98966C1.664 7.93366 1.732 7.90566 1.82 7.90566H2.456C2.536 7.90566 2.6 7.93366 2.648 7.98966C2.696 8.03766 2.72 8.10166 2.72 8.18166V15.2617H6.716C6.804 15.2617 6.872 15.2897 6.92 15.3457C6.968 15.3937 6.992 15.4617 6.992 15.5497V16.0297C6.992 16.1097 6.968 16.1777 6.92 16.2337C6.872 16.2817 6.804 16.3057 6.716 16.3057H1.82ZM10.3848 16.4257C9.56081 16.4257 8.90481 16.1737 8.41681 15.6697C7.92881 15.1577 7.66081 14.4617 7.61281 13.5817C7.60481 13.4777 7.60081 13.3457 7.60081 13.1857C7.60081 13.0177 7.60481 12.8817 7.61281 12.7777C7.64481 12.2097 7.77681 11.7137 8.00881 11.2897C8.24081 10.8577 8.55681 10.5257 8.95681 10.2937C9.36481 10.0617 9.84081 9.94566 10.3848 9.94566C10.9928 9.94566 11.5008 10.0737 11.9088 10.3297C12.3248 10.5857 12.6408 10.9497 12.8568 11.4217C13.0728 11.8937 13.1808 12.4457 13.1808 13.0777V13.2817C13.1808 13.3697 13.1528 13.4377 13.0968 13.4857C13.0488 13.5337 12.9848 13.5577 12.9048 13.5577H8.75281C8.75281 13.5657 8.75281 13.5817 8.75281 13.6057C8.75281 13.6297 8.75281 13.6497 8.75281 13.6657C8.76881 13.9937 8.84081 14.3017 8.96881 14.5897C9.09681 14.8697 9.28081 15.0977 9.52081 15.2737C9.76081 15.4497 10.0488 15.5377 10.3848 15.5377C10.6728 15.5377 10.9128 15.4937 11.1048 15.4057C11.2968 15.3177 11.4528 15.2217 11.5728 15.1177C11.6928 15.0057 11.7728 14.9217 11.8128 14.8657C11.8848 14.7617 11.9408 14.7017 11.9808 14.6857C12.0208 14.6617 12.0848 14.6497 12.1728 14.6497H12.7488C12.8288 14.6497 12.8928 14.6737 12.9408 14.7217C12.9968 14.7617 13.0208 14.8217 13.0128 14.9017C13.0048 15.0217 12.9408 15.1697 12.8208 15.3457C12.7008 15.5137 12.5288 15.6817 12.3048 15.8497C12.0808 16.0177 11.8088 16.1577 11.4888 16.2697C11.1688 16.3737 10.8008 16.4257 10.3848 16.4257ZM8.75281 12.7297H12.0408V12.6937C12.0408 12.3337 11.9728 12.0137 11.8368 11.7337C11.7088 11.4537 11.5208 11.2337 11.2728 11.0737C11.0248 10.9057 10.7288 10.8217 10.3848 10.8217C10.0408 10.8217 9.74481 10.9057 9.49681 11.0737C9.25681 11.2337 9.07281 11.4537 8.94481 11.7337C8.81681 12.0137 8.75281 12.3337 8.75281 12.6937V12.7297ZM16.4567 16.3057C16.3367 16.3057 16.2407 16.2777 16.1687 16.2217C16.1047 16.1657 16.0527 16.0937 16.0127 16.0057L13.7927 10.4377C13.7767 10.3977 13.7687 10.3577 13.7687 10.3177C13.7687 10.2457 13.7927 10.1857 13.8407 10.1377C13.8887 10.0897 13.9487 10.0657 14.0207 10.0657H14.5967C14.6847 10.0657 14.7527 10.0897 14.8007 10.1377C14.8487 10.1857 14.8767 10.2297 14.8847 10.2697L16.7207 14.9977L18.5447 10.2697C18.5607 10.2297 18.5887 10.1857 18.6287 10.1377C18.6767 10.0897 18.7447 10.0657 18.8327 10.0657H19.4207C19.4847 10.0657 19.5407 10.0897 19.5887 10.1377C19.6447 10.1857 19.6727 10.2457 19.6727 10.3177C19.6727 10.3577 19.6647 10.3977 19.6487 10.4377L17.4167 16.0057C17.3847 16.0937 17.3327 16.1657 17.2607 16.2217C17.1967 16.2777 17.1007 16.3057 16.9727 16.3057H16.4567ZM23.0706 16.4257C22.2466 16.4257 21.5906 16.1737 21.1026 15.6697C20.6146 15.1577 20.3466 14.4617 20.2986 13.5817C20.2906 13.4777 20.2866 13.3457 20.2866 13.1857C20.2866 13.0177 20.2906 12.8817 20.2986 12.7777C20.3306 12.2097 20.4626 11.7137 20.6946 11.2897C20.9266 10.8577 21.2426 10.5257 21.6426 10.2937C22.0506 10.0617 22.5266 9.94566 23.0706 9.94566C23.6786 9.94566 24.1866 10.0737 24.5946 10.3297C25.0106 10.5857 25.3266 10.9497 25.5426 11.4217C25.7586 11.8937 25.8666 12.4457 25.8666 13.0777V13.2817C25.8666 13.3697 25.8386 13.4377 25.7826 13.4857C25.7346 13.5337 25.6706 13.5577 25.5906 13.5577H21.4386C21.4386 13.5657 21.4386 13.5817 21.4386 13.6057C21.4386 13.6297 21.4386 13.6497 21.4386 13.6657C21.4546 13.9937 21.5266 14.3017 21.6546 14.5897C21.7826 14.8697 21.9666 15.0977 22.2066 15.2737C22.4466 15.4497 22.7346 15.5377 23.0706 15.5377C23.3586 15.5377 23.5986 15.4937 23.7906 15.4057C23.9826 15.3177 24.1386 15.2217 24.2586 15.1177C24.3786 15.0057 24.4586 14.9217 24.4986 14.8657C24.5706 14.7617 24.6266 14.7017 24.6666 14.6857C24.7066 14.6617 24.7706 14.6497 24.8586 14.6497H25.4346C25.5146 14.6497 25.5786 14.6737 25.6266 14.7217C25.6826 14.7617 25.7066 14.8217 25.6986 14.9017C25.6906 15.0217 25.6266 15.1697 25.5066 15.3457C25.3866 15.5137 25.2146 15.6817 24.9906 15.8497C24.7666 16.0177 24.4946 16.1577 24.1746 16.2697C23.8546 16.3737 23.4866 16.4257 23.0706 16.4257ZM21.4386 12.7297H24.7266V12.6937C24.7266 12.3337 24.6586 12.0137 24.5226 11.7337C24.3946 11.4537 24.2066 11.2337 23.9586 11.0737C23.7106 10.9057 23.4146 10.8217 23.0706 10.8217C22.7266 10.8217 22.4306 10.9057 22.1826 11.0737C21.9426 11.2337 21.7586 11.4537 21.6306 11.7337C21.5026 12.0137 21.4386 12.3337 21.4386 12.6937V12.7297ZM27.4694 16.3057C27.3894 16.3057 27.3214 16.2817 27.2654 16.2337C27.2174 16.1777 27.1934 16.1097 27.1934 16.0297V8.06166C27.1934 7.98166 27.2174 7.91766 27.2654 7.86966C27.3214 7.81366 27.3894 7.78566 27.4694 7.78566H28.0334C28.1214 7.78566 28.1894 7.81366 28.2374 7.86966C28.2854 7.91766 28.3094 7.98166 28.3094 8.06166V16.0297C28.3094 16.1097 28.2854 16.1777 28.2374 16.2337C28.1894 16.2817 28.1214 16.3057 28.0334 16.3057H27.4694ZM35.7168 16.4257C35.1648 16.4257 34.6968 16.3417 34.3128 16.1737C33.9368 15.9977 33.6288 15.7577 33.3888 15.4537C33.1488 15.1497 32.9728 14.8017 32.8608 14.4097C32.7568 14.0177 32.6968 13.6017 32.6808 13.1617C32.6728 12.9457 32.6648 12.7177 32.6568 12.4777C32.6568 12.2377 32.6568 11.9977 32.6568 11.7577C32.6648 11.5097 32.6728 11.2737 32.6808 11.0497C32.6888 10.6097 32.7488 10.1937 32.8608 9.80166C32.9808 9.40166 33.1568 9.05366 33.3888 8.75766C33.6288 8.45366 33.9408 8.21766 34.3248 8.04966C34.7088 7.87366 35.1728 7.78566 35.7168 7.78566C36.2688 7.78566 36.7328 7.87366 37.1088 8.04966C37.4928 8.21766 37.8048 8.45366 38.0448 8.75766C38.2848 9.05366 38.4608 9.40166 38.5728 9.80166C38.6928 10.1937 38.7568 10.6097 38.7648 11.0497C38.7728 11.2737 38.7768 11.5097 38.7768 11.7577C38.7848 11.9977 38.7848 12.2377 38.7768 12.4777C38.7768 12.7177 38.7728 12.9457 38.7648 13.1617C38.7568 13.6017 38.6928 14.0177 38.5728 14.4097C38.4608 14.8017 38.2848 15.1497 38.0448 15.4537C37.8128 15.7577 37.5048 15.9977 37.1208 16.1737C36.7448 16.3417 36.2768 16.4257 35.7168 16.4257ZM35.7168 15.4057C36.3408 15.4057 36.8008 15.2017 37.0968 14.7937C37.4008 14.3777 37.5568 13.8137 37.5648 13.1017C37.5808 12.8697 37.5888 12.6457 37.5888 12.4297C37.5888 12.2057 37.5888 11.9857 37.5888 11.7697C37.5888 11.5457 37.5808 11.3257 37.5648 11.1097C37.5568 10.4137 37.4008 9.85766 37.0968 9.44166C36.8008 9.01766 36.3408 8.80566 35.7168 8.80566C35.1008 8.80566 34.6408 9.01766 34.3368 9.44166C34.0408 9.85766 33.8848 10.4137 33.8688 11.1097C33.8688 11.3257 33.8648 11.5457 33.8568 11.7697C33.8568 11.9857 33.8568 12.2057 33.8568 12.4297C33.8648 12.6457 33.8688 12.8697 33.8688 13.1017C33.8848 13.8137 34.0448 14.3777 34.3488 14.7937C34.6528 15.2017 35.1088 15.4057 35.7168 15.4057ZM42.986 16.4257C42.482 16.4257 42.042 16.3657 41.666 16.2457C41.29 16.1177 40.974 15.9497 40.718 15.7417C40.462 15.5337 40.266 15.3057 40.13 15.0577C40.002 14.8097 39.934 14.5537 39.926 14.2897C39.926 14.2177 39.95 14.1617 39.998 14.1217C40.046 14.0817 40.106 14.0617 40.178 14.0617H40.766C40.838 14.0617 40.902 14.0777 40.958 14.1097C41.014 14.1417 41.062 14.2097 41.102 14.3137C41.182 14.6017 41.318 14.8257 41.51 14.9857C41.71 15.1457 41.938 15.2577 42.194 15.3217C42.458 15.3777 42.722 15.4057 42.986 15.4057C43.538 15.4057 43.986 15.2737 44.33 15.0097C44.674 14.7457 44.846 14.3577 44.846 13.8457C44.846 13.3257 44.69 12.9537 44.378 12.7297C44.066 12.5057 43.634 12.3937 43.082 12.3937H41.942C41.862 12.3937 41.794 12.3697 41.738 12.3217C41.69 12.2737 41.666 12.2057 41.666 12.1177V11.7937C41.666 11.7217 41.678 11.6617 41.702 11.6137C41.734 11.5577 41.766 11.5097 41.798 11.4697L44.126 8.92566H40.586C40.506 8.92566 40.438 8.90166 40.382 8.85366C40.334 8.80566 40.31 8.73766 40.31 8.64966V8.19366C40.31 8.10566 40.334 8.03766 40.382 7.98966C40.438 7.93366 40.506 7.90566 40.586 7.90566H45.374C45.462 7.90566 45.53 7.93366 45.578 7.98966C45.634 8.03766 45.662 8.10566 45.662 8.19366V8.62566C45.662 8.68166 45.646 8.73366 45.614 8.78166C45.59 8.82166 45.562 8.86166 45.53 8.90166L43.214 11.4817L43.406 11.4937C43.934 11.5097 44.394 11.6057 44.786 11.7817C45.186 11.9577 45.494 12.2217 45.71 12.5737C45.934 12.9177 46.046 13.3537 46.046 13.8817C46.046 14.4177 45.914 14.8777 45.65 15.2617C45.386 15.6377 45.022 15.9257 44.558 16.1257C44.094 16.3257 43.57 16.4257 42.986 16.4257Z",fill:"#88836D",id:"path1"})),e.createElement("path",{d:"M6.572 40.3057C6.396 40.3057 6.252 40.2497 6.14 40.1377C6.028 40.0257 5.972 39.8817 5.972 39.7057V26.8417H1.604C1.444 26.8417 1.308 26.7857 1.196 26.6737C1.084 26.5617 1.028 26.4257 1.028 26.2657V24.1057C1.028 23.9297 1.084 23.7857 1.196 23.6737C1.308 23.5617 1.444 23.5057 1.604 23.5057H14.18C14.356 23.5057 14.5 23.5617 14.612 23.6737C14.724 23.7857 14.78 23.9297 14.78 24.1057V26.2657C14.78 26.4257 14.724 26.5617 14.612 26.6737C14.5 26.7857 14.356 26.8417 14.18 26.8417H9.836V39.7057C9.836 39.8817 9.78 40.0257 9.668 40.1377C9.556 40.2497 9.412 40.3057 9.236 40.3057H6.572ZM19.5163 40.5457C17.6762 40.5457 16.2122 40.0337 15.1242 39.0097C14.0522 37.9857 13.4842 36.4977 13.4202 34.5457C13.4202 34.4177 13.4202 34.2497 13.4202 34.0417C13.4202 33.8177 13.4202 33.6417 13.4202 33.5137C13.4842 32.2817 13.7642 31.2257 14.2602 30.3457C14.7562 29.4497 15.4522 28.7697 16.3482 28.3057C17.2442 27.8257 18.2922 27.5857 19.4922 27.5857C20.8363 27.5857 21.9563 27.8657 22.8523 28.4257C23.7643 28.9697 24.4443 29.7217 24.8923 30.6817C25.3563 31.6257 25.5883 32.7137 25.5883 33.9457V34.4977C25.5883 34.6577 25.5243 34.7937 25.3963 34.9057C25.2843 35.0177 25.1483 35.0737 24.9882 35.0737H17.1402C17.1402 35.0897 17.1402 35.1217 17.1402 35.1697C17.1402 35.2017 17.1402 35.2337 17.1402 35.2657C17.1562 35.7777 17.2522 36.2497 17.4282 36.6817C17.6202 37.0977 17.8843 37.4337 18.2203 37.6897C18.5723 37.9457 18.9883 38.0737 19.4683 38.0737C19.8683 38.0737 20.1963 38.0177 20.4523 37.9057C20.7083 37.7937 20.9163 37.6577 21.0763 37.4977C21.2523 37.3377 21.3803 37.2017 21.4603 37.0897C21.6043 36.9297 21.7163 36.8337 21.7963 36.8017C21.8923 36.7537 22.0363 36.7297 22.2283 36.7297H24.7243C24.8843 36.7297 25.0122 36.7777 25.1082 36.8737C25.2203 36.9537 25.2683 37.0737 25.2523 37.2337C25.2363 37.4897 25.1003 37.8097 24.8443 38.1937C24.6043 38.5617 24.2443 38.9297 23.7643 39.2977C23.2843 39.6497 22.6843 39.9457 21.9643 40.1857C21.2603 40.4257 20.4443 40.5457 19.5163 40.5457ZM17.1402 32.8897H21.8443V32.8417C21.8443 32.2657 21.7483 31.7697 21.5563 31.3537C21.3803 30.9217 21.1163 30.5857 20.7642 30.3457C20.4123 30.1057 19.9883 29.9857 19.4922 29.9857C18.9962 29.9857 18.5723 30.1057 18.2203 30.3457C17.8683 30.5857 17.5963 30.9217 17.4043 31.3537C17.2283 31.7697 17.1402 32.2657 17.1402 32.8417V32.8897ZM27.8433 40.3057C27.6833 40.3057 27.5473 40.2497 27.4353 40.1377C27.3233 40.0257 27.2673 39.8817 27.2673 39.7057V28.4257C27.2673 28.2497 27.3233 28.1057 27.4353 27.9937C27.5473 27.8817 27.6833 27.8257 27.8433 27.8257H30.1953C30.3713 27.8257 30.5153 27.8817 30.6273 27.9937C30.7393 28.1057 30.7953 28.2497 30.7953 28.4257V29.3617C31.2113 28.8497 31.7473 28.4257 32.4033 28.0897C33.0593 27.7537 33.8593 27.5857 34.8033 27.5857C35.7473 27.5857 36.5713 27.8017 37.2753 28.2337C37.9953 28.6497 38.5553 29.2657 38.9553 30.0817C39.3713 30.8817 39.5793 31.8577 39.5793 33.0097V39.7057C39.5793 39.8817 39.5153 40.0257 39.3873 40.1377C39.2753 40.2497 39.1393 40.3057 38.9793 40.3057H36.4353C36.2593 40.3057 36.1153 40.2497 36.0033 40.1377C35.8913 40.0257 35.8353 39.8817 35.8353 39.7057V33.1537C35.8353 32.3057 35.6273 31.6497 35.2113 31.1857C34.8113 30.7057 34.2193 30.4657 33.4353 30.4657C32.6833 30.4657 32.0833 30.7057 31.6353 31.1857C31.1873 31.6497 30.9633 32.3057 30.9633 33.1537V39.7057C30.9633 39.8817 30.9073 40.0257 30.7953 40.1377C30.6833 40.2497 30.5473 40.3057 30.3873 40.3057H27.8433ZM46.6548 40.5457C45.6628 40.5457 44.8068 40.4337 44.0868 40.2097C43.3828 39.9697 42.8068 39.6817 42.3588 39.3457C41.9268 39.0097 41.5988 38.6737 41.3748 38.3377C41.1668 37.9857 41.0548 37.6897 41.0388 37.4497C41.0228 37.2737 41.0788 37.1297 41.2068 37.0177C41.3348 36.9057 41.4628 36.8497 41.5908 36.8497H43.9188C43.9668 36.8497 44.0148 36.8577 44.0628 36.8737C44.1108 36.8897 44.1588 36.9297 44.2068 36.9937C44.4148 37.1377 44.6308 37.3057 44.8548 37.4977C45.0788 37.6737 45.3348 37.8257 45.6228 37.9537C45.9268 38.0817 46.3028 38.1457 46.7508 38.1457C47.2788 38.1457 47.7268 38.0417 48.0948 37.8337C48.4628 37.6097 48.6468 37.2977 48.6468 36.8977C48.6468 36.6097 48.5588 36.3697 48.3828 36.1777C48.2228 35.9857 47.9108 35.8097 47.4468 35.6497C46.9828 35.4897 46.2948 35.3137 45.3828 35.1217C44.5188 34.9297 43.7828 34.6737 43.1748 34.3537C42.5668 34.0337 42.1108 33.6337 41.8068 33.1537C41.5028 32.6577 41.3508 32.0657 41.3508 31.3777C41.3508 30.7537 41.5428 30.1537 41.9268 29.5777C42.3268 29.0017 42.9108 28.5297 43.6788 28.1617C44.4468 27.7777 45.4068 27.5857 46.5588 27.5857C47.4388 27.5857 48.2068 27.6977 48.8628 27.9217C49.5348 28.1297 50.0948 28.4017 50.5428 28.7377C50.9908 29.0577 51.3268 29.3937 51.5508 29.7457C51.7908 30.0817 51.9188 30.3777 51.9348 30.6337C51.9508 30.7937 51.9028 30.9297 51.7908 31.0417C51.6788 31.1537 51.5508 31.2097 51.4068 31.2097H49.2708C49.1908 31.2097 49.1188 31.2017 49.0548 31.1857C48.9908 31.1537 48.9348 31.1137 48.8868 31.0657C48.6948 30.9377 48.4948 30.7937 48.2868 30.6337C48.0948 30.4577 47.8628 30.3057 47.5908 30.1777C47.3188 30.0497 46.9668 29.9857 46.5348 29.9857C46.0068 29.9857 45.5988 30.1057 45.3108 30.3457C45.0388 30.5697 44.9028 30.8577 44.9028 31.2097C44.9028 31.4337 44.9748 31.6417 45.1188 31.8337C45.2628 32.0257 45.5588 32.2017 46.0068 32.3617C46.4548 32.5217 47.1348 32.6897 48.0468 32.8657C49.1348 33.0577 49.9988 33.3457 50.6388 33.7297C51.2788 34.1137 51.7348 34.5617 52.0068 35.0737C52.2948 35.5697 52.4388 36.1057 52.4388 36.6817C52.4388 37.4337 52.2148 38.1057 51.7668 38.6977C51.3188 39.2737 50.6628 39.7297 49.7988 40.0657C48.9508 40.3857 47.9028 40.5457 46.6548 40.5457ZM59.5906 40.5457C57.7506 40.5457 56.2866 40.0337 55.1986 39.0097C54.1266 37.9857 53.5586 36.4977 53.4946 34.5457C53.4946 34.4177 53.4946 34.2497 53.4946 34.0417C53.4946 33.8177 53.4946 33.6417 53.4946 33.5137C53.5586 32.2817 53.8386 31.2257 54.3346 30.3457C54.8306 29.4497 55.5266 28.7697 56.4226 28.3057C57.3186 27.8257 58.3666 27.5857 59.5666 27.5857C60.9106 27.5857 62.0306 27.8657 62.9266 28.4257C63.8386 28.9697 64.5186 29.7217 64.9666 30.6817C65.4306 31.6257 65.6626 32.7137 65.6626 33.9457V34.4977C65.6626 34.6577 65.5986 34.7937 65.4706 34.9057C65.3586 35.0177 65.2226 35.0737 65.0626 35.0737H57.2146C57.2146 35.0897 57.2146 35.1217 57.2146 35.1697C57.2146 35.2017 57.2146 35.2337 57.2146 35.2657C57.2306 35.7777 57.3266 36.2497 57.5026 36.6817C57.6946 37.0977 57.9586 37.4337 58.2946 37.6897C58.6466 37.9457 59.0626 38.0737 59.5426 38.0737C59.9426 38.0737 60.2706 38.0177 60.5266 37.9057C60.7826 37.7937 60.9906 37.6577 61.1506 37.4977C61.3266 37.3377 61.4546 37.2017 61.5346 37.0897C61.6786 36.9297 61.7906 36.8337 61.8706 36.8017C61.9666 36.7537 62.1106 36.7297 62.3026 36.7297H64.7986C64.9586 36.7297 65.0866 36.7777 65.1826 36.8737C65.2946 36.9537 65.3426 37.0737 65.3266 37.2337C65.3106 37.4897 65.1746 37.8097 64.9186 38.1937C64.6786 38.5617 64.3186 38.9297 63.8386 39.2977C63.3586 39.6497 62.7586 39.9457 62.0386 40.1857C61.3346 40.4257 60.5186 40.5457 59.5906 40.5457ZM57.2146 32.8897H61.9186V32.8417C61.9186 32.2657 61.8226 31.7697 61.6306 31.3537C61.4546 30.9217 61.1906 30.5857 60.8386 30.3457C60.4866 30.1057 60.0626 29.9857 59.5666 29.9857C59.0706 29.9857 58.6466 30.1057 58.2946 30.3457C57.9426 30.5857 57.6706 30.9217 57.4786 31.3537C57.3026 31.7697 57.2146 32.2657 57.2146 32.8417V32.8897Z",fill:"#AA5939",id:"path2",style:{fill:"#f47a00",fillOpacity:1}}),$||($=e.createElement("path",{d:"M2.26 63.3057C2.15333 63.3057 2.06267 63.2737 1.988 63.2097C1.924 63.135 1.892 63.0443 1.892 62.9377V52.4897C1.892 52.3723 1.924 52.2817 1.988 52.2177C2.06267 52.143 2.15333 52.1057 2.26 52.1057H3.06C3.188 52.1057 3.284 52.1377 3.348 52.2017C3.412 52.2657 3.44933 52.319 3.46 52.3617L6.852 58.8257L10.26 52.3617C10.2813 52.319 10.3187 52.2657 10.372 52.2017C10.436 52.1377 10.532 52.1057 10.66 52.1057H11.444C11.5613 52.1057 11.652 52.143 11.716 52.2177C11.7907 52.2817 11.828 52.3723 11.828 52.4897V62.9377C11.828 63.0443 11.7907 63.135 11.716 63.2097C11.652 63.2737 11.5613 63.3057 11.444 63.3057H10.66C10.5533 63.3057 10.4627 63.2737 10.388 63.2097C10.324 63.135 10.292 63.0443 10.292 62.9377V55.0657L7.62 60.2817C7.57733 60.3883 7.51333 60.4737 7.428 60.5377C7.34267 60.591 7.236 60.6177 7.108 60.6177H6.612C6.47333 60.6177 6.36133 60.591 6.276 60.5377C6.20133 60.4737 6.13733 60.3883 6.084 60.2817L3.412 55.0657V62.9377C3.412 63.0443 3.37467 63.135 3.3 63.2097C3.236 63.2737 3.15067 63.3057 3.044 63.3057H2.26ZM16.3871 63.4657C15.8538 63.4657 15.3685 63.359 14.9311 63.1457C14.4938 62.9323 14.1418 62.6443 13.8751 62.2817C13.6085 61.919 13.4751 61.5083 13.4751 61.0497C13.4751 60.3137 13.7738 59.727 14.3711 59.2897C14.9685 58.8523 15.7471 58.5643 16.7071 58.4257L19.0911 58.0897V57.6257C19.0911 57.1137 18.9418 56.7137 18.6431 56.4257C18.3551 56.1377 17.8805 55.9937 17.2191 55.9937C16.7391 55.9937 16.3498 56.0897 16.0511 56.2817C15.7631 56.4737 15.5605 56.719 15.4431 57.0177C15.3791 57.1777 15.2671 57.2577 15.1071 57.2577H14.3871C14.2698 57.2577 14.1791 57.2257 14.1151 57.1617C14.0618 57.087 14.0351 57.0017 14.0351 56.9057C14.0351 56.7457 14.0938 56.5483 14.2111 56.3137C14.3391 56.079 14.5311 55.8497 14.7871 55.6257C15.0431 55.4017 15.3685 55.215 15.7631 55.0657C16.1685 54.9057 16.6591 54.8257 17.2351 54.8257C17.8751 54.8257 18.4138 54.911 18.8511 55.0817C19.2885 55.2417 19.6298 55.4603 19.8751 55.7377C20.1311 56.015 20.3125 56.3297 20.4191 56.6817C20.5365 57.0337 20.5951 57.391 20.5951 57.7537V62.9377C20.5951 63.0443 20.5578 63.135 20.4831 63.2097C20.4191 63.2737 20.3338 63.3057 20.2271 63.3057H19.4911C19.3738 63.3057 19.2831 63.2737 19.2191 63.2097C19.1551 63.135 19.1231 63.0443 19.1231 62.9377V62.2497C18.9845 62.4417 18.7978 62.6337 18.5631 62.8257C18.3285 63.007 18.0351 63.1617 17.6831 63.2897C17.3311 63.407 16.8991 63.4657 16.3871 63.4657ZM16.7231 62.2657C17.1605 62.2657 17.5605 62.175 17.9231 61.9937C18.2858 61.8017 18.5685 61.5083 18.7711 61.1137C18.9845 60.719 19.0911 60.223 19.0911 59.6257V59.1777L17.2351 59.4497C16.4778 59.5563 15.9071 59.7377 15.5231 59.9937C15.1391 60.239 14.9471 60.5537 14.9471 60.9377C14.9471 61.2363 15.0325 61.487 15.2031 61.6897C15.3845 61.8817 15.6085 62.0257 15.8751 62.1217C16.1525 62.2177 16.4351 62.2657 16.7231 62.2657ZM22.9433 63.3057C22.8366 63.3057 22.7459 63.2737 22.6713 63.2097C22.6073 63.135 22.5753 63.0443 22.5753 62.9377V55.3537C22.5753 55.247 22.6073 55.1617 22.6713 55.0977C22.7459 55.023 22.8366 54.9857 22.9433 54.9857H23.6953C23.8019 54.9857 23.8873 55.023 23.9513 55.0977C24.0259 55.1617 24.0633 55.247 24.0633 55.3537V56.0577C24.3406 55.695 24.6873 55.4017 25.1033 55.1777C25.5299 54.943 26.0739 54.8257 26.7353 54.8257C27.4286 54.8257 28.0153 54.9803 28.4953 55.2897C28.9859 55.5883 29.3539 56.0097 29.5993 56.5537C29.8446 57.087 29.9673 57.711 29.9673 58.4257V62.9377C29.9673 63.0443 29.9353 63.135 29.8713 63.2097C29.8073 63.2737 29.7219 63.3057 29.6153 63.3057H28.8153C28.7086 63.3057 28.6179 63.2737 28.5433 63.2097C28.4793 63.135 28.4473 63.0443 28.4473 62.9377V58.5057C28.4473 57.759 28.2659 57.1777 27.9033 56.7617C27.5406 56.335 27.0073 56.1217 26.3033 56.1217C25.6419 56.1217 25.1086 56.335 24.7033 56.7617C24.3086 57.1777 24.1113 57.759 24.1113 58.5057V62.9377C24.1113 63.0443 24.0739 63.135 23.9993 63.2097C23.9353 63.2737 23.8499 63.3057 23.7433 63.3057H22.9433ZM34.2784 63.4657C33.745 63.4657 33.2597 63.359 32.8224 63.1457C32.385 62.9323 32.033 62.6443 31.7664 62.2817C31.4997 61.919 31.3664 61.5083 31.3664 61.0497C31.3664 60.3137 31.665 59.727 32.2624 59.2897C32.8597 58.8523 33.6384 58.5643 34.5984 58.4257L36.9824 58.0897V57.6257C36.9824 57.1137 36.833 56.7137 36.5344 56.4257C36.2464 56.1377 35.7717 55.9937 35.1104 55.9937C34.6304 55.9937 34.241 56.0897 33.9424 56.2817C33.6544 56.4737 33.4517 56.719 33.3344 57.0177C33.2704 57.1777 33.1584 57.2577 32.9984 57.2577H32.2784C32.161 57.2577 32.0704 57.2257 32.0064 57.1617C31.953 57.087 31.9264 57.0017 31.9264 56.9057C31.9264 56.7457 31.985 56.5483 32.1024 56.3137C32.2304 56.079 32.4224 55.8497 32.6784 55.6257C32.9344 55.4017 33.2597 55.215 33.6544 55.0657C34.0597 54.9057 34.5504 54.8257 35.1264 54.8257C35.7664 54.8257 36.305 54.911 36.7424 55.0817C37.1797 55.2417 37.521 55.4603 37.7664 55.7377C38.0224 56.015 38.2037 56.3297 38.3104 56.6817C38.4277 57.0337 38.4864 57.391 38.4864 57.7537V62.9377C38.4864 63.0443 38.449 63.135 38.3744 63.2097C38.3104 63.2737 38.225 63.3057 38.1184 63.3057H37.3824C37.265 63.3057 37.1744 63.2737 37.1104 63.2097C37.0464 63.135 37.0144 63.0443 37.0144 62.9377V62.2497C36.8757 62.4417 36.689 62.6337 36.4544 62.8257C36.2197 63.007 35.9264 63.1617 35.5744 63.2897C35.2224 63.407 34.7904 63.4657 34.2784 63.4657ZM34.6144 62.2657C35.0517 62.2657 35.4517 62.175 35.8144 61.9937C36.177 61.8017 36.4597 61.5083 36.6624 61.1137C36.8757 60.719 36.9824 60.223 36.9824 59.6257V59.1777L35.1264 59.4497C34.369 59.5563 33.7984 59.7377 33.4144 59.9937C33.0304 60.239 32.8384 60.5537 32.8384 60.9377C32.8384 61.2363 32.9237 61.487 33.0944 61.6897C33.2757 61.8817 33.4997 62.0257 33.7664 62.1217C34.0437 62.2177 34.3264 62.2657 34.6144 62.2657ZM43.8745 66.8257C43.1492 66.8257 42.5518 66.7297 42.0825 66.5377C41.6238 66.3457 41.2612 66.111 40.9945 65.8337C40.7385 65.567 40.5518 65.295 40.4345 65.0177C40.3278 64.751 40.2692 64.5377 40.2585 64.3777C40.2478 64.271 40.2798 64.1803 40.3545 64.1057C40.4398 64.031 40.5305 63.9937 40.6265 63.9937H41.3945C41.4905 63.9937 41.5705 64.015 41.6345 64.0577C41.6985 64.1003 41.7518 64.191 41.7945 64.3297C41.8585 64.4897 41.9545 64.6657 42.0825 64.8577C42.2105 65.0603 42.4078 65.231 42.6745 65.3697C42.9412 65.519 43.3145 65.5937 43.7945 65.5937C44.2958 65.5937 44.7172 65.5243 45.0585 65.3857C45.3998 65.2577 45.6558 65.023 45.8265 64.6817C46.0078 64.351 46.0985 63.8923 46.0985 63.3057V62.2177C45.8425 62.5483 45.5065 62.8257 45.0905 63.0497C44.6745 63.263 44.1518 63.3697 43.5225 63.3697C42.9252 63.3697 42.4132 63.2683 41.9865 63.0657C41.5598 62.8523 41.2078 62.5697 40.9305 62.2177C40.6638 61.855 40.4612 61.4443 40.3225 60.9857C40.1945 60.527 40.1198 60.047 40.0985 59.5457C40.0878 59.247 40.0878 58.9537 40.0985 58.6657C40.1198 58.1643 40.1945 57.6843 40.3225 57.2257C40.4612 56.767 40.6638 56.3563 40.9305 55.9937C41.2078 55.631 41.5598 55.3483 41.9865 55.1457C42.4132 54.9323 42.9252 54.8257 43.5225 54.8257C44.1625 54.8257 44.6905 54.9483 45.1065 55.1937C45.5332 55.4283 45.8798 55.7163 46.1465 56.0577V55.3697C46.1465 55.263 46.1785 55.1723 46.2425 55.0977C46.3172 55.023 46.4078 54.9857 46.5145 54.9857H47.2505C47.3572 54.9857 47.4478 55.023 47.5225 55.0977C47.5972 55.1723 47.6345 55.263 47.6345 55.3697V63.1297C47.6345 63.8443 47.5118 64.479 47.2665 65.0337C47.0318 65.5883 46.6372 66.0257 46.0825 66.3457C45.5385 66.6657 44.8025 66.8257 43.8745 66.8257ZM43.8425 62.0897C44.3758 62.0897 44.8025 61.967 45.1225 61.7217C45.4532 61.4763 45.6932 61.167 45.8425 60.7937C46.0025 60.4203 46.0878 60.0417 46.0985 59.6577C46.1092 59.5083 46.1145 59.327 46.1145 59.1137C46.1145 58.8897 46.1092 58.703 46.0985 58.5537C46.0878 58.1697 46.0025 57.791 45.8425 57.4177C45.6932 57.0443 45.4532 56.735 45.1225 56.4897C44.8025 56.2443 44.3758 56.1217 43.8425 56.1217C43.3092 56.1217 42.8825 56.2443 42.5625 56.4897C42.2425 56.7243 42.0132 57.039 41.8745 57.4337C41.7358 57.8177 41.6558 58.2337 41.6345 58.6817C41.6238 58.959 41.6238 59.2417 41.6345 59.5297C41.6558 59.9777 41.7358 60.399 41.8745 60.7937C42.0132 61.1777 42.2425 61.4923 42.5625 61.7377C42.8825 61.9723 43.3092 62.0897 43.8425 62.0897ZM53.0054 63.4657C51.9067 63.4657 51.032 63.1297 50.3814 62.4577C49.7307 61.775 49.3734 60.847 49.3094 59.6737C49.2987 59.535 49.2934 59.359 49.2934 59.1457C49.2934 58.9217 49.2987 58.7403 49.3094 58.6017C49.352 57.8443 49.528 57.183 49.8374 56.6177C50.1467 56.0417 50.568 55.599 51.1014 55.2897C51.6454 54.9803 52.28 54.8257 53.0054 54.8257C53.816 54.8257 54.4934 54.9963 55.0374 55.3377C55.592 55.679 56.0134 56.1643 56.3014 56.7937C56.5894 57.423 56.7334 58.159 56.7334 59.0017V59.2737C56.7334 59.391 56.696 59.4817 56.6214 59.5457C56.5574 59.6097 56.472 59.6417 56.3654 59.6417H50.8294C50.8294 59.6523 50.8294 59.6737 50.8294 59.7057C50.8294 59.7377 50.8294 59.7643 50.8294 59.7857C50.8507 60.223 50.9467 60.6337 51.1174 61.0177C51.288 61.391 51.5334 61.695 51.8534 61.9297C52.1734 62.1643 52.5574 62.2817 53.0054 62.2817C53.3894 62.2817 53.7094 62.223 53.9654 62.1057C54.2214 61.9883 54.4294 61.8603 54.5894 61.7217C54.7494 61.5723 54.856 61.4603 54.9094 61.3857C55.0054 61.247 55.08 61.167 55.1334 61.1457C55.1867 61.1137 55.272 61.0977 55.3894 61.0977H56.1574C56.264 61.0977 56.3494 61.1297 56.4134 61.1937C56.488 61.247 56.52 61.327 56.5094 61.4337C56.4987 61.5937 56.4134 61.791 56.2534 62.0257C56.0934 62.2497 55.864 62.4737 55.5654 62.6977C55.2667 62.9217 54.904 63.1083 54.4774 63.2577C54.0507 63.3963 53.56 63.4657 53.0054 63.4657ZM50.8294 58.5377H55.2134V58.4897C55.2134 58.0097 55.1227 57.583 54.9414 57.2097C54.7707 56.8363 54.52 56.543 54.1894 56.3297C53.8587 56.1057 53.464 55.9937 53.0054 55.9937C52.5467 55.9937 52.152 56.1057 51.8214 56.3297C51.5014 56.543 51.256 56.8363 51.0854 57.2097C50.9147 57.583 50.8294 58.0097 50.8294 58.4897V58.5377ZM60.6465 63.4657C60.1132 63.4657 59.6278 63.359 59.1905 63.1457C58.7532 62.9323 58.4012 62.6443 58.1345 62.2817C57.8678 61.919 57.7345 61.5083 57.7345 61.0497C57.7345 60.3137 58.0332 59.727 58.6305 59.2897C59.2278 58.8523 60.0065 58.5643 60.9665 58.4257L63.3505 58.0897V57.6257C63.3505 57.1137 63.2012 56.7137 62.9025 56.4257C62.6145 56.1377 62.1398 55.9937 61.4785 55.9937C60.9985 55.9937 60.6092 56.0897 60.3105 56.2817C60.0225 56.4737 59.8198 56.719 59.7025 57.0177C59.6385 57.1777 59.5265 57.2577 59.3665 57.2577H58.6465C58.5292 57.2577 58.4385 57.2257 58.3745 57.1617C58.3212 57.087 58.2945 57.0017 58.2945 56.9057C58.2945 56.7457 58.3532 56.5483 58.4705 56.3137C58.5985 56.079 58.7905 55.8497 59.0465 55.6257C59.3025 55.4017 59.6278 55.215 60.0225 55.0657C60.4278 54.9057 60.9185 54.8257 61.4945 54.8257C62.1345 54.8257 62.6732 54.911 63.1105 55.0817C63.5478 55.2417 63.8892 55.4603 64.1345 55.7377C64.3905 56.015 64.5718 56.3297 64.6785 56.6817C64.7958 57.0337 64.8545 57.391 64.8545 57.7537V62.9377C64.8545 63.0443 64.8172 63.135 64.7425 63.2097C64.6785 63.2737 64.5932 63.3057 64.4865 63.3057H63.7505C63.6332 63.3057 63.5425 63.2737 63.4785 63.2097C63.4145 63.135 63.3825 63.0443 63.3825 62.9377V62.2497C63.2438 62.4417 63.0572 62.6337 62.8225 62.8257C62.5878 63.007 62.2945 63.1617 61.9425 63.2897C61.5905 63.407 61.1585 63.4657 60.6465 63.4657ZM60.9825 62.2657C61.4198 62.2657 61.8198 62.175 62.1825 61.9937C62.5452 61.8017 62.8278 61.5083 63.0305 61.1137C63.2438 60.719 63.3505 60.223 63.3505 59.6257V59.1777L61.4945 59.4497C60.7372 59.5563 60.1665 59.7377 59.7825 59.9937C59.3985 60.239 59.2065 60.5537 59.2065 60.9377C59.2065 61.2363 59.2918 61.487 59.4625 61.6897C59.6438 61.8817 59.8678 62.0257 60.1345 62.1217C60.4118 62.2177 60.6945 62.2657 60.9825 62.2657ZM70.9466 63.4657C70.3066 63.4657 69.7733 63.3537 69.3466 63.1297C68.92 62.895 68.5786 62.607 68.3226 62.2657V62.9377C68.3226 63.0443 68.2853 63.135 68.2106 63.2097C68.1466 63.2737 68.0613 63.3057 67.9546 63.3057H67.2186C67.112 63.3057 67.0213 63.2737 66.9466 63.2097C66.8826 63.135 66.8506 63.0443 66.8506 62.9377V52.3137C66.8506 52.207 66.8826 52.1217 66.9466 52.0577C67.0213 51.983 67.112 51.9457 67.2186 51.9457H67.9866C68.104 51.9457 68.1946 51.983 68.2586 52.0577C68.3226 52.1217 68.3546 52.207 68.3546 52.3137V55.9937C68.6213 55.663 68.9626 55.3857 69.3786 55.1617C69.8053 54.9377 70.328 54.8257 70.9466 54.8257C71.544 54.8257 72.0506 54.9323 72.4666 55.1457C72.8933 55.3483 73.24 55.631 73.5066 55.9937C73.784 56.3563 73.992 56.767 74.1306 57.2257C74.2693 57.6843 74.344 58.1643 74.3546 58.6657C74.3653 58.8363 74.3706 58.9963 74.3706 59.1457C74.3706 59.295 74.3653 59.455 74.3546 59.6257C74.344 60.1377 74.2693 60.623 74.1306 61.0817C73.992 61.5403 73.784 61.951 73.5066 62.3137C73.24 62.6657 72.8933 62.9483 72.4666 63.1617C72.0506 63.3643 71.544 63.4657 70.9466 63.4657ZM70.6106 62.1697C71.1653 62.1697 71.5973 62.0523 71.9066 61.8177C72.2266 61.5723 72.456 61.2577 72.5946 60.8737C72.7333 60.479 72.8133 60.0577 72.8346 59.6097C72.8453 59.3003 72.8453 58.991 72.8346 58.6817C72.8133 58.2337 72.7333 57.8177 72.5946 57.4337C72.456 57.039 72.2266 56.7243 71.9066 56.4897C71.5973 56.2443 71.1653 56.1217 70.6106 56.1217C70.1093 56.1217 69.6933 56.239 69.3626 56.4737C69.032 56.7083 68.7813 57.007 68.6106 57.3697C68.4506 57.7323 68.3653 58.1003 68.3546 58.4737C68.344 58.6443 68.3386 58.8523 68.3386 59.0977C68.3386 59.3323 68.344 59.535 68.3546 59.7057C68.376 60.1003 68.4613 60.4897 68.6106 60.8737C68.7706 61.247 69.0106 61.5563 69.3306 61.8017C69.6613 62.047 70.088 62.1697 70.6106 62.1697ZM76.4143 63.3057C76.3076 63.3057 76.2169 63.2737 76.1423 63.2097C76.0783 63.135 76.0463 63.0443 76.0463 62.9377V52.3137C76.0463 52.207 76.0783 52.1217 76.1423 52.0577C76.2169 51.983 76.3076 51.9457 76.4143 51.9457H77.1663C77.2836 51.9457 77.3743 51.983 77.4383 52.0577C77.5023 52.1217 77.5343 52.207 77.5343 52.3137V62.9377C77.5343 63.0443 77.5023 63.135 77.4383 63.2097C77.3743 63.2737 77.2836 63.3057 77.1663 63.3057H76.4143ZM82.9129 63.4657C81.8142 63.4657 80.9395 63.1297 80.2889 62.4577C79.6382 61.775 79.2809 60.847 79.2169 59.6737C79.2062 59.535 79.2009 59.359 79.2009 59.1457C79.2009 58.9217 79.2062 58.7403 79.2169 58.6017C79.2595 57.8443 79.4355 57.183 79.7449 56.6177C80.0542 56.0417 80.4755 55.599 81.0089 55.2897C81.5529 54.9803 82.1875 54.8257 82.9129 54.8257C83.7235 54.8257 84.4009 54.9963 84.9449 55.3377C85.4995 55.679 85.9209 56.1643 86.2089 56.7937C86.4969 57.423 86.6409 58.159 86.6409 59.0017V59.2737C86.6409 59.391 86.6035 59.4817 86.5289 59.5457C86.4649 59.6097 86.3795 59.6417 86.2729 59.6417H80.7369C80.7369 59.6523 80.7369 59.6737 80.7369 59.7057C80.7369 59.7377 80.7369 59.7643 80.7369 59.7857C80.7582 60.223 80.8542 60.6337 81.0249 61.0177C81.1955 61.391 81.4409 61.695 81.7609 61.9297C82.0809 62.1643 82.4649 62.2817 82.9129 62.2817C83.2969 62.2817 83.6169 62.223 83.8729 62.1057C84.1289 61.9883 84.3369 61.8603 84.4969 61.7217C84.6569 61.5723 84.7635 61.4603 84.8169 61.3857C84.9129 61.247 84.9875 61.167 85.0409 61.1457C85.0942 61.1137 85.1795 61.0977 85.2969 61.0977H86.0649C86.1715 61.0977 86.2569 61.1297 86.3209 61.1937C86.3955 61.247 86.4275 61.327 86.4169 61.4337C86.4062 61.5937 86.3209 61.791 86.1609 62.0257C86.0009 62.2497 85.7715 62.4737 85.4729 62.6977C85.1742 62.9217 84.8115 63.1083 84.3849 63.2577C83.9582 63.3963 83.4675 63.4657 82.9129 63.4657ZM80.7369 58.5377H85.1209V58.4897C85.1209 58.0097 85.0302 57.583 84.8489 57.2097C84.6782 56.8363 84.4275 56.543 84.0969 56.3297C83.7662 56.1057 83.3715 55.9937 82.9129 55.9937C82.4542 55.9937 82.0595 56.1057 81.7289 56.3297C81.4089 56.543 81.1635 56.8363 80.9929 57.2097C80.8222 57.583 80.7369 58.0097 80.7369 58.4897V58.5377ZM92.739 63.3057C92.6323 63.3057 92.5417 63.2737 92.467 63.2097C92.403 63.135 92.371 63.0443 92.371 62.9377V56.2657H91.011C90.9043 56.2657 90.8137 56.2337 90.739 56.1697C90.675 56.095 90.643 56.0043 90.643 55.8977V55.3537C90.643 55.247 90.675 55.1617 90.739 55.0977C90.8137 55.023 90.9043 54.9857 91.011 54.9857H92.371V54.1857C92.371 53.6417 92.4617 53.167 92.643 52.7617C92.8243 52.3457 93.1123 52.0257 93.507 51.8017C93.9123 51.5777 94.451 51.4657 95.123 51.4657H96.083C96.1897 51.4657 96.275 51.503 96.339 51.5777C96.403 51.6417 96.435 51.727 96.435 51.8337V52.3777C96.435 52.4843 96.403 52.575 96.339 52.6497C96.275 52.7137 96.1897 52.7457 96.083 52.7457H95.155C94.6537 52.7457 94.3123 52.879 94.131 53.1457C93.9497 53.4017 93.859 53.775 93.859 54.2657V54.9857H95.923C96.0297 54.9857 96.115 55.023 96.179 55.0977C96.243 55.1617 96.275 55.247 96.275 55.3537V55.8977C96.275 56.0043 96.243 56.095 96.179 56.1697C96.115 56.2337 96.0297 56.2657 95.923 56.2657H93.859V62.9377C93.859 63.0443 93.8217 63.135 93.747 63.2097C93.683 63.2737 93.5977 63.3057 93.491 63.3057H92.739ZM100.627 63.4657C99.8163 63.4657 99.139 63.311 98.595 63.0017C98.051 62.6923 97.635 62.2657 97.347 61.7217C97.059 61.167 96.899 60.5377 96.867 59.8337C96.8563 59.6523 96.851 59.423 96.851 59.1457C96.851 58.8577 96.8563 58.6283 96.867 58.4577C96.899 57.743 97.059 57.1137 97.347 56.5697C97.6457 56.0257 98.067 55.599 98.611 55.2897C99.155 54.9803 99.827 54.8257 100.627 54.8257C101.427 54.8257 102.099 54.9803 102.643 55.2897C103.187 55.599 103.603 56.0257 103.891 56.5697C104.19 57.1137 104.355 57.743 104.387 58.4577C104.398 58.6283 104.403 58.8577 104.403 59.1457C104.403 59.423 104.398 59.6523 104.387 59.8337C104.355 60.5377 104.195 61.167 103.907 61.7217C103.619 62.2657 103.203 62.6923 102.659 63.0017C102.115 63.311 101.438 63.4657 100.627 63.4657ZM100.627 62.2337C101.288 62.2337 101.816 62.0257 102.211 61.6097C102.606 61.183 102.819 60.5643 102.851 59.7537C102.862 59.5937 102.867 59.391 102.867 59.1457C102.867 58.9003 102.862 58.6977 102.851 58.5377C102.819 57.727 102.606 57.1137 102.211 56.6977C101.816 56.271 101.288 56.0577 100.627 56.0577C99.9657 56.0577 99.4323 56.271 99.027 56.6977C98.6323 57.1137 98.4243 57.727 98.403 58.5377C98.3923 58.6977 98.387 58.9003 98.387 59.1457C98.387 59.391 98.3923 59.5937 98.403 59.7537C98.4243 60.5643 98.6323 61.183 99.027 61.6097C99.4323 62.0257 99.9657 62.2337 100.627 62.2337ZM106.454 63.3057C106.348 63.3057 106.257 63.2737 106.182 63.2097C106.118 63.135 106.086 63.0443 106.086 62.9377V55.3697C106.086 55.263 106.118 55.1723 106.182 55.0977C106.257 55.023 106.348 54.9857 106.454 54.9857H107.19C107.297 54.9857 107.388 55.023 107.462 55.0977C107.537 55.1723 107.574 55.263 107.574 55.3697V56.0737C107.788 55.711 108.081 55.439 108.454 55.2577C108.828 55.0763 109.276 54.9857 109.798 54.9857H110.438C110.545 54.9857 110.63 55.023 110.694 55.0977C110.758 55.1617 110.79 55.247 110.79 55.3537V56.0097C110.79 56.1163 110.758 56.2017 110.694 56.2657C110.63 56.3297 110.545 56.3617 110.438 56.3617H109.478C108.902 56.3617 108.449 56.5323 108.118 56.8737C107.788 57.2043 107.622 57.6577 107.622 58.2337V62.9377C107.622 63.0443 107.585 63.135 107.51 63.2097C107.436 63.2737 107.345 63.3057 107.238 63.3057H106.454ZM4.996 83.4657C3.89733 83.4657 3.02267 83.1297 2.372 82.4577C1.72133 81.775 1.364 80.847 1.3 79.6737C1.28933 79.535 1.284 79.359 1.284 79.1457C1.284 78.9217 1.28933 78.7403 1.3 78.6017C1.34267 77.8443 1.51867 77.183 1.828 76.6177C2.13733 76.0417 2.55867 75.599 3.092 75.2897C3.636 74.9803 4.27067 74.8257 4.996 74.8257C5.80667 74.8257 6.484 74.9963 7.028 75.3377C7.58267 75.679 8.004 76.1643 8.292 76.7937C8.58 77.423 8.724 78.159 8.724 79.0017V79.2737C8.724 79.391 8.68667 79.4817 8.612 79.5457C8.548 79.6097 8.46267 79.6417 8.356 79.6417H2.82C2.82 79.6523 2.82 79.6737 2.82 79.7057C2.82 79.7377 2.82 79.7643 2.82 79.7857C2.84133 80.223 2.93733 80.6337 3.108 81.0177C3.27867 81.391 3.524 81.695 3.844 81.9297C4.164 82.1643 4.548 82.2817 4.996 82.2817C5.38 82.2817 5.7 82.223 5.956 82.1057C6.212 81.9883 6.42 81.8603 6.58 81.7217C6.74 81.5723 6.84667 81.4603 6.9 81.3857C6.996 81.247 7.07067 81.167 7.124 81.1457C7.17733 81.1137 7.26267 81.0977 7.38 81.0977H8.148C8.25467 81.0977 8.34 81.1297 8.404 81.1937C8.47867 81.247 8.51067 81.327 8.5 81.4337C8.48933 81.5937 8.404 81.791 8.244 82.0257C8.084 82.2497 7.85467 82.4737 7.556 82.6977C7.25733 82.9217 6.89467 83.1083 6.468 83.2577C6.04133 83.3963 5.55067 83.4657 4.996 83.4657ZM2.82 78.5377H7.204V78.4897C7.204 78.0097 7.11333 77.583 6.932 77.2097C6.76133 76.8363 6.51067 76.543 6.18 76.3297C5.84933 76.1057 5.45467 75.9937 4.996 75.9937C4.53733 75.9937 4.14267 76.1057 3.812 76.3297C3.492 76.543 3.24667 76.8363 3.076 77.2097C2.90533 77.583 2.82 78.0097 2.82 78.4897V78.5377ZM9.76125 83.3057C9.67592 83.3057 9.59592 83.2737 9.52125 83.2097C9.45725 83.1457 9.42525 83.0657 9.42525 82.9697C9.42525 82.9377 9.43058 82.9003 9.44125 82.8577C9.46258 82.8043 9.49458 82.7457 9.53725 82.6817L12.3213 79.0497L9.71325 75.6097C9.67058 75.5457 9.63858 75.4923 9.61725 75.4497C9.60658 75.407 9.60125 75.3643 9.60125 75.3217C9.60125 75.2257 9.63325 75.1457 9.69725 75.0817C9.76125 75.0177 9.84125 74.9857 9.93725 74.9857H10.7533C10.8706 74.9857 10.9559 75.0177 11.0093 75.0817C11.0733 75.135 11.1266 75.1883 11.1693 75.2417L13.2973 78.0097L15.4253 75.2577C15.4679 75.2043 15.5159 75.1457 15.5693 75.0817C15.6333 75.0177 15.7239 74.9857 15.8413 74.9857H16.6253C16.7213 74.9857 16.8013 75.0177 16.8653 75.0817C16.9293 75.1457 16.9613 75.2257 16.9613 75.3217C16.9613 75.3643 16.9506 75.407 16.9293 75.4497C16.9186 75.4923 16.8919 75.5457 16.8493 75.6097L14.2093 79.0817L16.9933 82.6817C17.0359 82.7457 17.0626 82.799 17.0733 82.8417C17.0946 82.8843 17.1053 82.927 17.1053 82.9697C17.1053 83.0657 17.0733 83.1457 17.0093 83.2097C16.9453 83.2737 16.8653 83.3057 16.7693 83.3057H15.9213C15.8146 83.3057 15.7293 83.279 15.6653 83.2257C15.6013 83.1723 15.5479 83.119 15.5053 83.0657L13.2493 80.1377L10.9933 83.0657C10.9506 83.1083 10.8973 83.1617 10.8333 83.2257C10.7799 83.279 10.6946 83.3057 10.5773 83.3057H9.76125ZM18.8343 86.3457C18.7276 86.3457 18.6369 86.3083 18.5623 86.2337C18.4983 86.1697 18.4663 86.0843 18.4663 85.9777V75.3537C18.4663 75.247 18.4983 75.1617 18.5623 75.0977C18.6369 75.023 18.7276 74.9857 18.8343 74.9857H19.5703C19.6769 74.9857 19.7623 75.023 19.8263 75.0977C19.9009 75.1617 19.9383 75.247 19.9383 75.3537V76.0577C20.1943 75.7057 20.5356 75.4123 20.9623 75.1777C21.3889 74.943 21.9223 74.8257 22.5623 74.8257C23.1596 74.8257 23.6663 74.927 24.0823 75.1297C24.5089 75.3323 24.8556 75.6097 25.1223 75.9617C25.3996 76.3137 25.6076 76.7137 25.7463 77.1617C25.8849 77.6097 25.9596 78.0897 25.9703 78.6017C25.9809 78.7723 25.9863 78.9537 25.9863 79.1457C25.9863 79.3377 25.9809 79.519 25.9703 79.6897C25.9596 80.191 25.8849 80.671 25.7463 81.1297C25.6076 81.5777 25.3996 81.9777 25.1223 82.3297C24.8556 82.671 24.5089 82.9483 24.0823 83.1617C23.6663 83.3643 23.1596 83.4657 22.5623 83.4657C21.9436 83.4657 21.4209 83.3537 20.9943 83.1297C20.5783 82.895 20.2369 82.607 19.9703 82.2657V85.9777C19.9703 86.0843 19.9383 86.1697 19.8743 86.2337C19.8103 86.3083 19.7196 86.3457 19.6023 86.3457H18.8343ZM22.2263 82.1697C22.7809 82.1697 23.2129 82.0523 23.5223 81.8177C23.8423 81.5723 24.0716 81.2577 24.2103 80.8737C24.3489 80.479 24.4289 80.0577 24.4503 79.6097C24.4609 79.3003 24.4609 78.991 24.4503 78.6817C24.4289 78.2337 24.3489 77.8177 24.2103 77.4337C24.0716 77.039 23.8423 76.7243 23.5223 76.4897C23.2129 76.2443 22.7809 76.1217 22.2263 76.1217C21.7036 76.1217 21.2769 76.2443 20.9463 76.4897C20.6263 76.735 20.3863 77.0497 20.2263 77.4337C20.0769 77.807 19.9916 78.191 19.9703 78.5857C19.9596 78.7563 19.9543 78.959 19.9543 79.1937C19.9543 79.4283 19.9596 79.6363 19.9703 79.8177C19.9809 80.191 20.0663 80.559 20.2263 80.9217C20.3969 81.2843 20.6476 81.583 20.9783 81.8177C21.3089 82.0523 21.7249 82.1697 22.2263 82.1697ZM30.9735 83.4657C29.8748 83.4657 29.0002 83.1297 28.3495 82.4577C27.6988 81.775 27.3415 80.847 27.2775 79.6737C27.2668 79.535 27.2615 79.359 27.2615 79.1457C27.2615 78.9217 27.2668 78.7403 27.2775 78.6017C27.3202 77.8443 27.4962 77.183 27.8055 76.6177C28.1148 76.0417 28.5362 75.599 29.0695 75.2897C29.6135 74.9803 30.2482 74.8257 30.9735 74.8257C31.7842 74.8257 32.4615 74.9963 33.0055 75.3377C33.5602 75.679 33.9815 76.1643 34.2695 76.7937C34.5575 77.423 34.7015 78.159 34.7015 79.0017V79.2737C34.7015 79.391 34.6642 79.4817 34.5895 79.5457C34.5255 79.6097 34.4402 79.6417 34.3335 79.6417H28.7975C28.7975 79.6523 28.7975 79.6737 28.7975 79.7057C28.7975 79.7377 28.7975 79.7643 28.7975 79.7857C28.8188 80.223 28.9148 80.6337 29.0855 81.0177C29.2562 81.391 29.5015 81.695 29.8215 81.9297C30.1415 82.1643 30.5255 82.2817 30.9735 82.2817C31.3575 82.2817 31.6775 82.223 31.9335 82.1057C32.1895 81.9883 32.3975 81.8603 32.5575 81.7217C32.7175 81.5723 32.8242 81.4603 32.8775 81.3857C32.9735 81.247 33.0482 81.167 33.1015 81.1457C33.1548 81.1137 33.2402 81.0977 33.3575 81.0977H34.1255C34.2322 81.0977 34.3175 81.1297 34.3815 81.1937C34.4562 81.247 34.4882 81.327 34.4775 81.4337C34.4668 81.5937 34.3815 81.791 34.2215 82.0257C34.0615 82.2497 33.8322 82.4737 33.5335 82.6977C33.2348 82.9217 32.8722 83.1083 32.4455 83.2577C32.0188 83.3963 31.5282 83.4657 30.9735 83.4657ZM28.7975 78.5377H33.1815V78.4897C33.1815 78.0097 33.0908 77.583 32.9095 77.2097C32.7388 76.8363 32.4882 76.543 32.1575 76.3297C31.8268 76.1057 31.4322 75.9937 30.9735 75.9937C30.5148 75.9937 30.1202 76.1057 29.7895 76.3297C29.4695 76.543 29.2242 76.8363 29.0535 77.2097C28.8828 77.583 28.7975 78.0097 28.7975 78.4897V78.5377ZM36.6626 83.3057C36.556 83.3057 36.4653 83.2737 36.3906 83.2097C36.3266 83.135 36.2946 83.0443 36.2946 82.9377V75.3697C36.2946 75.263 36.3266 75.1723 36.3906 75.0977C36.4653 75.023 36.556 74.9857 36.6626 74.9857H37.3986C37.5053 74.9857 37.596 75.023 37.6706 75.0977C37.7453 75.1723 37.7826 75.263 37.7826 75.3697V76.0737C37.996 75.711 38.2893 75.439 38.6626 75.2577C39.036 75.0763 39.484 74.9857 40.0066 74.9857H40.6466C40.7533 74.9857 40.8386 75.023 40.9026 75.0977C40.9666 75.1617 40.9986 75.247 40.9986 75.3537V76.0097C40.9986 76.1163 40.9666 76.2017 40.9026 76.2657C40.8386 76.3297 40.7533 76.3617 40.6466 76.3617H39.6866C39.1106 76.3617 38.6573 76.5323 38.3266 76.8737C37.996 77.2043 37.8306 77.6577 37.8306 78.2337V82.9377C37.8306 83.0443 37.7933 83.135 37.7186 83.2097C37.644 83.2737 37.5533 83.3057 37.4466 83.3057H36.6626ZM42.4208 83.3057C42.3141 83.3057 42.2234 83.2737 42.1488 83.2097C42.0848 83.135 42.0528 83.0443 42.0528 82.9377V75.3537C42.0528 75.247 42.0848 75.1617 42.1488 75.0977C42.2234 75.023 42.3141 74.9857 42.4208 74.9857H43.1888C43.2954 74.9857 43.3808 75.023 43.4448 75.0977C43.5088 75.1617 43.5408 75.247 43.5408 75.3537V82.9377C43.5408 83.0443 43.5088 83.135 43.4448 83.2097C43.3808 83.2737 43.2954 83.3057 43.1888 83.3057H42.4208ZM42.2928 73.4337C42.1861 73.4337 42.0954 73.4017 42.0208 73.3377C41.9568 73.263 41.9248 73.1723 41.9248 73.0657V72.2017C41.9248 72.095 41.9568 72.0097 42.0208 71.9457C42.0954 71.871 42.1861 71.8337 42.2928 71.8337H43.3008C43.4074 71.8337 43.4928 71.871 43.5568 71.9457C43.6314 72.0097 43.6688 72.095 43.6688 72.2017V73.0657C43.6688 73.1723 43.6314 73.263 43.5568 73.3377C43.4928 73.4017 43.4074 73.4337 43.3008 73.4337H42.2928ZM48.9198 83.4657C47.8211 83.4657 46.9464 83.1297 46.2958 82.4577C45.6451 81.775 45.2878 80.847 45.2238 79.6737C45.2131 79.535 45.2078 79.359 45.2078 79.1457C45.2078 78.9217 45.2131 78.7403 45.2238 78.6017C45.2664 77.8443 45.4424 77.183 45.7518 76.6177C46.0611 76.0417 46.4824 75.599 47.0158 75.2897C47.5598 74.9803 48.1944 74.8257 48.9198 74.8257C49.7304 74.8257 50.4078 74.9963 50.9518 75.3377C51.5064 75.679 51.9278 76.1643 52.2158 76.7937C52.5038 77.423 52.6478 78.159 52.6478 79.0017V79.2737C52.6478 79.391 52.6104 79.4817 52.5358 79.5457C52.4718 79.6097 52.3864 79.6417 52.2798 79.6417H46.7438C46.7438 79.6523 46.7438 79.6737 46.7438 79.7057C46.7438 79.7377 46.7438 79.7643 46.7438 79.7857C46.7651 80.223 46.8611 80.6337 47.0318 81.0177C47.2024 81.391 47.4478 81.695 47.7678 81.9297C48.0878 82.1643 48.4718 82.2817 48.9198 82.2817C49.3038 82.2817 49.6238 82.223 49.8798 82.1057C50.1358 81.9883 50.3438 81.8603 50.5038 81.7217C50.6638 81.5723 50.7704 81.4603 50.8238 81.3857C50.9198 81.247 50.9944 81.167 51.0478 81.1457C51.1011 81.1137 51.1864 81.0977 51.3038 81.0977H52.0718C52.1784 81.0977 52.2638 81.1297 52.3278 81.1937C52.4024 81.247 52.4344 81.327 52.4238 81.4337C52.4131 81.5937 52.3278 81.791 52.1678 82.0257C52.0078 82.2497 51.7784 82.4737 51.4798 82.6977C51.1811 82.9217 50.8184 83.1083 50.3918 83.2577C49.9651 83.3963 49.4744 83.4657 48.9198 83.4657ZM46.7438 78.5377H51.1278V78.4897C51.1278 78.0097 51.0371 77.583 50.8558 77.2097C50.6851 76.8363 50.4344 76.543 50.1038 76.3297C49.7731 76.1057 49.3784 75.9937 48.9198 75.9937C48.4611 75.9937 48.0664 76.1057 47.7358 76.3297C47.4158 76.543 47.1704 76.8363 46.9998 77.2097C46.8291 77.583 46.7438 78.0097 46.7438 78.4897V78.5377ZM54.6089 83.3057C54.5022 83.3057 54.4115 83.2737 54.3369 83.2097C54.2729 83.135 54.2409 83.0443 54.2409 82.9377V75.3537C54.2409 75.247 54.2729 75.1617 54.3369 75.0977C54.4115 75.023 54.5022 74.9857 54.6089 74.9857H55.3609C55.4675 74.9857 55.5529 75.023 55.6169 75.0977C55.6915 75.1617 55.7289 75.247 55.7289 75.3537V76.0577C56.0062 75.695 56.3529 75.4017 56.7689 75.1777C57.1955 74.943 57.7395 74.8257 58.4009 74.8257C59.0942 74.8257 59.6809 74.9803 60.1609 75.2897C60.6515 75.5883 61.0195 76.0097 61.2649 76.5537C61.5102 77.087 61.6329 77.711 61.6329 78.4257V82.9377C61.6329 83.0443 61.6009 83.135 61.5369 83.2097C61.4729 83.2737 61.3875 83.3057 61.2809 83.3057H60.4809C60.3742 83.3057 60.2835 83.2737 60.2089 83.2097C60.1449 83.135 60.1129 83.0443 60.1129 82.9377V78.5057C60.1129 77.759 59.9315 77.1777 59.5689 76.7617C59.2062 76.335 58.6729 76.1217 57.9689 76.1217C57.3075 76.1217 56.7742 76.335 56.3689 76.7617C55.9742 77.1777 55.7769 77.759 55.7769 78.5057V82.9377C55.7769 83.0443 55.7395 83.135 55.6649 83.2097C55.6009 83.2737 55.5155 83.3057 55.4089 83.3057H54.6089ZM66.984 83.4657C66.2267 83.4657 65.5707 83.3217 65.016 83.0337C64.472 82.735 64.0507 82.3137 63.752 81.7697C63.4533 81.215 63.2933 80.5537 63.272 79.7857C63.2613 79.6257 63.256 79.4123 63.256 79.1457C63.256 78.879 63.2613 78.6657 63.272 78.5057C63.2933 77.7377 63.4533 77.0817 63.752 76.5377C64.0507 75.983 64.472 75.5617 65.016 75.2737C65.5707 74.975 66.2267 74.8257 66.984 74.8257C67.6027 74.8257 68.1307 74.911 68.568 75.0817C69.016 75.2523 69.384 75.471 69.672 75.7377C69.96 76.0043 70.1733 76.2923 70.312 76.6017C70.4613 76.911 70.5413 77.2043 70.552 77.4817C70.5627 77.5883 70.5307 77.6737 70.456 77.7377C70.3813 77.8017 70.2907 77.8337 70.184 77.8337H69.416C69.3093 77.8337 69.2293 77.8123 69.176 77.7697C69.1227 77.7163 69.0693 77.631 69.016 77.5137C68.824 76.991 68.5627 76.623 68.232 76.4097C67.9013 76.1963 67.4907 76.0897 67 76.0897C66.36 76.0897 65.8373 76.287 65.432 76.6817C65.0373 77.0763 64.824 77.711 64.792 78.5857C64.7813 78.9697 64.7813 79.343 64.792 79.7057C64.824 80.591 65.0373 81.231 65.432 81.6257C65.8373 82.0097 66.36 82.2017 67 82.2017C67.4907 82.2017 67.9013 82.095 68.232 81.8817C68.5627 81.6683 68.824 81.3003 69.016 80.7777C69.0693 80.6603 69.1227 80.5803 69.176 80.5377C69.2293 80.4843 69.3093 80.4577 69.416 80.4577H70.184C70.2907 80.4577 70.3813 80.4897 70.456 80.5537C70.5307 80.6177 70.5627 80.703 70.552 80.8097C70.5413 81.0337 70.4933 81.263 70.408 81.4977C70.3227 81.7323 70.184 81.9723 69.992 82.2177C69.8107 82.4523 69.5813 82.6657 69.304 82.8577C69.0267 83.039 68.6907 83.1883 68.296 83.3057C67.912 83.4123 67.4747 83.4657 66.984 83.4657ZM75.4441 83.4657C74.3455 83.4657 73.4708 83.1297 72.8201 82.4577C72.1695 81.775 71.8121 80.847 71.7481 79.6737C71.7375 79.535 71.7321 79.359 71.7321 79.1457C71.7321 78.9217 71.7375 78.7403 71.7481 78.6017C71.7908 77.8443 71.9668 77.183 72.2761 76.6177C72.5855 76.0417 73.0068 75.599 73.5401 75.2897C74.0841 74.9803 74.7188 74.8257 75.4441 74.8257C76.2548 74.8257 76.9321 74.9963 77.4761 75.3377C78.0308 75.679 78.4521 76.1643 78.7401 76.7937C79.0281 77.423 79.1721 78.159 79.1721 79.0017V79.2737C79.1721 79.391 79.1348 79.4817 79.0601 79.5457C78.9961 79.6097 78.9108 79.6417 78.8041 79.6417H73.2681C73.2681 79.6523 73.2681 79.6737 73.2681 79.7057C73.2681 79.7377 73.2681 79.7643 73.2681 79.7857C73.2895 80.223 73.3855 80.6337 73.5561 81.0177C73.7268 81.391 73.9721 81.695 74.2921 81.9297C74.6121 82.1643 74.9961 82.2817 75.4441 82.2817C75.8281 82.2817 76.1481 82.223 76.4041 82.1057C76.6601 81.9883 76.8681 81.8603 77.0281 81.7217C77.1881 81.5723 77.2948 81.4603 77.3481 81.3857C77.4441 81.247 77.5188 81.167 77.5721 81.1457C77.6255 81.1137 77.7108 81.0977 77.8281 81.0977H78.5961C78.7028 81.0977 78.7881 81.1297 78.8521 81.1937C78.9268 81.247 78.9588 81.327 78.9481 81.4337C78.9375 81.5937 78.8521 81.791 78.6921 82.0257C78.5321 82.2497 78.3028 82.4737 78.0041 82.6977C77.7055 82.9217 77.3428 83.1083 76.9161 83.2577C76.4895 83.3963 75.9988 83.4657 75.4441 83.4657ZM73.2681 78.5377H77.6521V78.4897C77.6521 78.0097 77.5615 77.583 77.3801 77.2097C77.2095 76.8363 76.9588 76.543 76.6281 76.3297C76.2975 76.1057 75.9028 75.9937 75.4441 75.9937C74.9855 75.9937 74.5908 76.1057 74.2601 76.3297C73.9401 76.543 73.6948 76.8363 73.5241 77.2097C73.3535 77.583 73.2681 78.0097 73.2681 78.4897V78.5377ZM83.8053 83.4657C83.2186 83.4657 82.7119 83.3643 82.2853 83.1617C81.8586 82.9483 81.5066 82.6657 81.2293 82.3137C80.9626 81.951 80.7599 81.5403 80.6213 81.0817C80.4933 80.623 80.4186 80.1377 80.3973 79.6257C80.3866 79.455 80.3813 79.295 80.3813 79.1457C80.3813 78.9963 80.3866 78.8363 80.3973 78.6657C80.4186 78.1643 80.4933 77.6843 80.6213 77.2257C80.7599 76.767 80.9626 76.3563 81.2293 75.9937C81.5066 75.631 81.8586 75.3483 82.2853 75.1457C82.7119 74.9323 83.2186 74.8257 83.8053 74.8257C84.4346 74.8257 84.9573 74.9377 85.3733 75.1617C85.7893 75.3857 86.1306 75.663 86.3973 75.9937V72.3137C86.3973 72.207 86.4293 72.1217 86.4933 72.0577C86.5679 71.983 86.6586 71.9457 86.7653 71.9457H87.5333C87.6399 71.9457 87.7253 71.983 87.7893 72.0577C87.8639 72.1217 87.9013 72.207 87.9013 72.3137V82.9377C87.9013 83.0443 87.8639 83.135 87.7893 83.2097C87.7253 83.2737 87.6399 83.3057 87.5333 83.3057H86.8133C86.6959 83.3057 86.6053 83.2737 86.5413 83.2097C86.4773 83.135 86.4453 83.0443 86.4453 82.9377V82.2657C86.1786 82.607 85.8319 82.895 85.4053 83.1297C84.9786 83.3537 84.4453 83.4657 83.8053 83.4657ZM84.1413 82.1697C84.6746 82.1697 85.1013 82.047 85.4213 81.8017C85.7413 81.5563 85.9813 81.247 86.1413 80.8737C86.3013 80.4897 86.3866 80.1003 86.3973 79.7057C86.4079 79.535 86.4133 79.3323 86.4133 79.0977C86.4133 78.8523 86.4079 78.6443 86.3973 78.4737C86.3866 78.1003 86.2959 77.7323 86.1253 77.3697C85.9653 77.007 85.7199 76.7083 85.3893 76.4737C85.0693 76.239 84.6533 76.1217 84.1413 76.1217C83.5973 76.1217 83.1653 76.2443 82.8453 76.4897C82.5253 76.7243 82.2959 77.039 82.1573 77.4337C82.0186 77.8177 81.9386 78.2337 81.9173 78.6817C81.9066 78.991 81.9066 79.3003 81.9173 79.6097C81.9386 80.0577 82.0186 80.479 82.1573 80.8737C82.2959 81.2577 82.5253 81.5723 82.8453 81.8177C83.1653 82.0523 83.5973 82.1697 84.1413 82.1697ZM96.9228 83.4657C96.1654 83.4657 95.5094 83.3217 94.9548 83.0337C94.4108 82.735 93.9894 82.3137 93.6908 81.7697C93.3921 81.215 93.2321 80.5537 93.2108 79.7857C93.2001 79.6257 93.1948 79.4123 93.1948 79.1457C93.1948 78.879 93.2001 78.6657 93.2108 78.5057C93.2321 77.7377 93.3921 77.0817 93.6908 76.5377C93.9894 75.983 94.4108 75.5617 94.9548 75.2737C95.5094 74.975 96.1654 74.8257 96.9228 74.8257C97.5414 74.8257 98.0694 74.911 98.5068 75.0817C98.9548 75.2523 99.3228 75.471 99.6108 75.7377C99.8988 76.0043 100.112 76.2923 100.251 76.6017C100.4 76.911 100.48 77.2043 100.491 77.4817C100.501 77.5883 100.469 77.6737 100.395 77.7377C100.32 77.8017 100.229 77.8337 100.123 77.8337H99.3548C99.2481 77.8337 99.1681 77.8123 99.1148 77.7697C99.0614 77.7163 99.0081 77.631 98.9548 77.5137C98.7628 76.991 98.5014 76.623 98.1708 76.4097C97.8401 76.1963 97.4294 76.0897 96.9388 76.0897C96.2988 76.0897 95.7761 76.287 95.3708 76.6817C94.9761 77.0763 94.7628 77.711 94.7308 78.5857C94.7201 78.9697 94.7201 79.343 94.7308 79.7057C94.7628 80.591 94.9761 81.231 95.3708 81.6257C95.7761 82.0097 96.2988 82.2017 96.9388 82.2017C97.4294 82.2017 97.8401 82.095 98.1708 81.8817C98.5014 81.6683 98.7628 81.3003 98.9548 80.7777C99.0081 80.6603 99.0614 80.5803 99.1148 80.5377C99.1681 80.4843 99.2481 80.4577 99.3548 80.4577H100.123C100.229 80.4577 100.32 80.4897 100.395 80.5537C100.469 80.6177 100.501 80.703 100.491 80.8097C100.48 81.0337 100.432 81.263 100.347 81.4977C100.261 81.7323 100.123 81.9723 99.9308 82.2177C99.7494 82.4523 99.5201 82.6657 99.2428 82.8577C98.9654 83.039 98.6294 83.1883 98.2348 83.3057C97.8508 83.4123 97.4134 83.4657 96.9228 83.4657ZM103.292 86.3457C103.207 86.3457 103.132 86.3137 103.068 86.2497C103.004 86.1857 102.972 86.111 102.972 86.0257C102.972 85.983 102.978 85.9403 102.988 85.8977C102.999 85.855 103.02 85.8017 103.052 85.7377L104.284 82.8097L101.228 75.5937C101.175 75.4657 101.148 75.375 101.148 75.3217C101.148 75.2257 101.18 75.1457 101.244 75.0817C101.308 75.0177 101.388 74.9857 101.484 74.9857H102.268C102.375 74.9857 102.46 75.0123 102.524 75.0657C102.588 75.119 102.631 75.183 102.652 75.2577L105.084 81.0817L107.58 75.2577C107.612 75.183 107.655 75.119 107.708 75.0657C107.772 75.0123 107.863 74.9857 107.98 74.9857H108.732C108.828 74.9857 108.908 75.0177 108.972 75.0817C109.036 75.1457 109.068 75.2203 109.068 75.3057C109.068 75.359 109.042 75.455 108.988 75.5937L104.444 86.0737C104.412 86.1483 104.364 86.2123 104.3 86.2657C104.247 86.319 104.162 86.3457 104.044 86.3457H103.292ZM113.408 83.4657C112.65 83.4657 111.994 83.3217 111.44 83.0337C110.896 82.735 110.474 82.3137 110.176 81.7697C109.877 81.215 109.717 80.5537 109.696 79.7857C109.685 79.6257 109.68 79.4123 109.68 79.1457C109.68 78.879 109.685 78.6657 109.696 78.5057C109.717 77.7377 109.877 77.0817 110.176 76.5377C110.474 75.983 110.896 75.5617 111.44 75.2737C111.994 74.975 112.65 74.8257 113.408 74.8257C114.026 74.8257 114.554 74.911 114.992 75.0817C115.44 75.2523 115.808 75.471 116.096 75.7377C116.384 76.0043 116.597 76.2923 116.736 76.6017C116.885 76.911 116.965 77.2043 116.976 77.4817C116.986 77.5883 116.954 77.6737 116.88 77.7377C116.805 77.8017 116.714 77.8337 116.608 77.8337H115.84C115.733 77.8337 115.653 77.8123 115.6 77.7697C115.546 77.7163 115.493 77.631 115.44 77.5137C115.248 76.991 114.986 76.623 114.656 76.4097C114.325 76.1963 113.914 76.0897 113.424 76.0897C112.784 76.0897 112.261 76.287 111.856 76.6817C111.461 77.0763 111.248 77.711 111.216 78.5857C111.205 78.9697 111.205 79.343 111.216 79.7057C111.248 80.591 111.461 81.231 111.856 81.6257C112.261 82.0097 112.784 82.2017 113.424 82.2017C113.914 82.2017 114.325 82.095 114.656 81.8817C114.986 81.6683 115.248 81.3003 115.44 80.7777C115.493 80.6603 115.546 80.5803 115.6 80.5377C115.653 80.4843 115.733 80.4577 115.84 80.4577H116.608C116.714 80.4577 116.805 80.4897 116.88 80.5537C116.954 80.6177 116.986 80.703 116.976 80.8097C116.965 81.0337 116.917 81.263 116.832 81.4977C116.746 81.7323 116.608 81.9723 116.416 82.2177C116.234 82.4523 116.005 82.6657 115.728 82.8577C115.45 83.039 115.114 83.1883 114.72 83.3057C114.336 83.4123 113.898 83.4657 113.408 83.4657ZM118.94 83.3057C118.833 83.3057 118.743 83.2737 118.668 83.2097C118.604 83.135 118.572 83.0443 118.572 82.9377V72.3137C118.572 72.207 118.604 72.1217 118.668 72.0577C118.743 71.983 118.833 71.9457 118.94 71.9457H119.692C119.809 71.9457 119.9 71.983 119.964 72.0577C120.028 72.1217 120.06 72.207 120.06 72.3137V82.9377C120.06 83.0443 120.028 83.135 119.964 83.2097C119.9 83.2737 119.809 83.3057 119.692 83.3057H118.94ZM122.494 83.3057C122.388 83.3057 122.297 83.2737 122.222 83.2097C122.158 83.135 122.126 83.0443 122.126 82.9377V75.3537C122.126 75.247 122.158 75.1617 122.222 75.0977C122.297 75.023 122.388 74.9857 122.494 74.9857H123.262C123.369 74.9857 123.454 75.023 123.518 75.0977C123.582 75.1617 123.614 75.247 123.614 75.3537V82.9377C123.614 83.0443 123.582 83.135 123.518 83.2097C123.454 83.2737 123.369 83.3057 123.262 83.3057H122.494ZM122.366 73.4337C122.26 73.4337 122.169 73.4017 122.094 73.3377C122.03 73.263 121.998 73.1723 121.998 73.0657V72.2017C121.998 72.095 122.03 72.0097 122.094 71.9457C122.169 71.871 122.26 71.8337 122.366 71.8337H123.374C123.481 71.8337 123.566 71.871 123.63 71.9457C123.705 72.0097 123.742 72.095 123.742 72.2017V73.0657C123.742 73.1723 123.705 73.263 123.63 73.3377C123.566 73.4017 123.481 73.4337 123.374 73.4337H122.366ZM128.561 83.4657C127.964 83.4657 127.452 83.391 127.025 83.2417C126.599 83.0923 126.252 82.911 125.985 82.6977C125.719 82.4843 125.516 82.271 125.377 82.0577C125.249 81.8443 125.18 81.6737 125.169 81.5457C125.159 81.4283 125.196 81.3377 125.281 81.2737C125.367 81.2097 125.452 81.1777 125.537 81.1777H126.241C126.305 81.1777 126.353 81.1883 126.385 81.2097C126.428 81.2203 126.481 81.263 126.545 81.3377C126.684 81.487 126.839 81.6363 127.009 81.7857C127.18 81.935 127.388 82.0577 127.633 82.1537C127.889 82.2497 128.204 82.2977 128.577 82.2977C129.121 82.2977 129.569 82.1963 129.921 81.9937C130.273 81.7803 130.449 81.471 130.449 81.0657C130.449 80.799 130.375 80.5857 130.225 80.4257C130.087 80.2657 129.831 80.1217 129.457 79.9937C129.095 79.8657 128.593 79.7323 127.953 79.5937C127.313 79.4443 126.807 79.263 126.433 79.0497C126.06 78.8257 125.793 78.5643 125.633 78.2657C125.473 77.9563 125.393 77.6097 125.393 77.2257C125.393 76.831 125.511 76.4523 125.745 76.0897C125.98 75.7163 126.321 75.4123 126.769 75.1777C127.228 74.943 127.799 74.8257 128.481 74.8257C129.036 74.8257 129.511 74.895 129.905 75.0337C130.3 75.1723 130.625 75.3483 130.881 75.5617C131.137 75.7643 131.329 75.967 131.457 76.1697C131.585 76.3723 131.655 76.543 131.665 76.6817C131.676 76.7883 131.644 76.879 131.569 76.9537C131.495 77.0177 131.409 77.0497 131.313 77.0497H130.641C130.567 77.0497 130.503 77.0337 130.449 77.0017C130.407 76.9697 130.364 76.9323 130.321 76.8897C130.215 76.751 130.087 76.6123 129.937 76.4737C129.799 76.335 129.612 76.223 129.377 76.1377C129.153 76.0417 128.855 75.9937 128.481 75.9937C127.948 75.9937 127.548 76.1057 127.281 76.3297C127.015 76.5537 126.881 76.8363 126.881 77.1777C126.881 77.3803 126.94 77.5617 127.057 77.7217C127.175 77.8817 127.399 78.0257 127.729 78.1537C128.06 78.2817 128.551 78.4203 129.201 78.5697C129.905 78.7083 130.46 78.895 130.865 79.1297C131.271 79.3643 131.559 79.6363 131.729 79.9457C131.9 80.255 131.985 80.6123 131.985 81.0177C131.985 81.4657 131.852 81.8763 131.585 82.2497C131.329 82.623 130.945 82.9217 130.433 83.1457C129.932 83.359 129.308 83.4657 128.561 83.4657ZM136.75 83.3057C136.153 83.3057 135.667 83.1937 135.294 82.9697C134.921 82.735 134.649 82.4097 134.478 81.9937C134.307 81.567 134.222 81.0657 134.222 80.4897V76.2657H132.974C132.867 76.2657 132.777 76.2337 132.702 76.1697C132.638 76.095 132.606 76.0043 132.606 75.8977V75.3537C132.606 75.247 132.638 75.1617 132.702 75.0977C132.777 75.023 132.867 74.9857 132.974 74.9857H134.222V72.3137C134.222 72.207 134.254 72.1217 134.318 72.0577C134.393 71.983 134.483 71.9457 134.59 71.9457H135.342C135.449 71.9457 135.534 71.983 135.598 72.0577C135.673 72.1217 135.71 72.207 135.71 72.3137V74.9857H137.694C137.801 74.9857 137.886 75.023 137.95 75.0977C138.025 75.1617 138.062 75.247 138.062 75.3537V75.8977C138.062 76.0043 138.025 76.095 137.95 76.1697C137.886 76.2337 137.801 76.2657 137.694 76.2657H135.71V80.3777C135.71 80.879 135.795 81.2737 135.966 81.5617C136.137 81.8497 136.441 81.9937 136.878 81.9937H137.854C137.961 81.9937 138.046 82.031 138.11 82.1057C138.185 82.1697 138.222 82.255 138.222 82.3617V82.9377C138.222 83.0443 138.185 83.135 138.11 83.2097C138.046 83.2737 137.961 83.3057 137.854 83.3057H136.75ZM142.312 83.4657C141.715 83.4657 141.203 83.391 140.776 83.2417C140.349 83.0923 140.003 82.911 139.736 82.6977C139.469 82.4843 139.267 82.271 139.128 82.0577C139 81.8443 138.931 81.6737 138.92 81.5457C138.909 81.4283 138.947 81.3377 139.032 81.2737C139.117 81.2097 139.203 81.1777 139.288 81.1777H139.992C140.056 81.1777 140.104 81.1883 140.136 81.2097C140.179 81.2203 140.232 81.263 140.296 81.3377C140.435 81.487 140.589 81.6363 140.76 81.7857C140.931 81.935 141.139 82.0577 141.384 82.1537C141.64 82.2497 141.955 82.2977 142.328 82.2977C142.872 82.2977 143.32 82.1963 143.672 81.9937C144.024 81.7803 144.2 81.471 144.2 81.0657C144.2 80.799 144.125 80.5857 143.976 80.4257C143.837 80.2657 143.581 80.1217 143.208 79.9937C142.845 79.8657 142.344 79.7323 141.704 79.5937C141.064 79.4443 140.557 79.263 140.184 79.0497C139.811 78.8257 139.544 78.5643 139.384 78.2657C139.224 77.9563 139.144 77.6097 139.144 77.2257C139.144 76.831 139.261 76.4523 139.496 76.0897C139.731 75.7163 140.072 75.4123 140.52 75.1777C140.979 74.943 141.549 74.8257 142.232 74.8257C142.787 74.8257 143.261 74.895 143.656 75.0337C144.051 75.1723 144.376 75.3483 144.632 75.5617C144.888 75.7643 145.08 75.967 145.208 76.1697C145.336 76.3723 145.405 76.543 145.416 76.6817C145.427 76.7883 145.395 76.879 145.32 76.9537C145.245 77.0177 145.16 77.0497 145.064 77.0497H144.392C144.317 77.0497 144.253 77.0337 144.2 77.0017C144.157 76.9697 144.115 76.9323 144.072 76.8897C143.965 76.751 143.837 76.6123 143.688 76.4737C143.549 76.335 143.363 76.223 143.128 76.1377C142.904 76.0417 142.605 75.9937 142.232 75.9937C141.699 75.9937 141.299 76.1057 141.032 76.3297C140.765 76.5537 140.632 76.8363 140.632 77.1777C140.632 77.3803 140.691 77.5617 140.808 77.7217C140.925 77.8817 141.149 78.0257 141.48 78.1537C141.811 78.2817 142.301 78.4203 142.952 78.5697C143.656 78.7083 144.211 78.895 144.616 79.1297C145.021 79.3643 145.309 79.6363 145.48 79.9457C145.651 80.255 145.736 80.6123 145.736 81.0177C145.736 81.4657 145.603 81.8763 145.336 82.2497C145.08 82.623 144.696 82.9217 144.184 83.1457C143.683 83.359 143.059 83.4657 142.312 83.4657ZM147.524 83.3057C147.418 83.3057 147.327 83.2737 147.252 83.2097C147.188 83.135 147.156 83.0443 147.156 82.9377V81.7857C147.156 81.679 147.188 81.5937 147.252 81.5297C147.327 81.455 147.418 81.4177 147.524 81.4177H148.676C148.783 81.4177 148.868 81.455 148.932 81.5297C149.007 81.5937 149.044 81.679 149.044 81.7857V82.9377C149.044 83.0443 149.007 83.135 148.932 83.2097C148.868 83.2737 148.783 83.3057 148.676 83.3057H147.524Z",fill:"#36342C",id:"path3"})))}const re=e.forwardRef(ie);i.p;var ne,oe,ae;const se=["title","titleId"];function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},le.apply(null,arguments)}function ce(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,se);return e.createElement("svg",le({width:155,height:113,viewBox:"0 0 155 113",fill:"none",id:"svg3",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,ne||(ne=e.createElement("defs",{id:"defs3"})),oe||(oe=e.createElement("path",{d:"M1.82 16.3057C1.732 16.3057 1.664 16.2817 1.616 16.2337C1.568 16.1777 1.544 16.1097 1.544 16.0297V8.18166C1.544 8.10166 1.568 8.03766 1.616 7.98966C1.664 7.93366 1.732 7.90566 1.82 7.90566H2.456C2.536 7.90566 2.6 7.93366 2.648 7.98966C2.696 8.03766 2.72 8.10166 2.72 8.18166V15.2617H6.716C6.804 15.2617 6.872 15.2897 6.92 15.3457C6.968 15.3937 6.992 15.4617 6.992 15.5497V16.0297C6.992 16.1097 6.968 16.1777 6.92 16.2337C6.872 16.2817 6.804 16.3057 6.716 16.3057H1.82ZM10.3848 16.4257C9.56081 16.4257 8.90481 16.1737 8.41681 15.6697C7.92881 15.1577 7.66081 14.4617 7.61281 13.5817C7.60481 13.4777 7.60081 13.3457 7.60081 13.1857C7.60081 13.0177 7.60481 12.8817 7.61281 12.7777C7.64481 12.2097 7.77681 11.7137 8.00881 11.2897C8.24081 10.8577 8.55681 10.5257 8.95681 10.2937C9.36481 10.0617 9.84081 9.94566 10.3848 9.94566C10.9928 9.94566 11.5008 10.0737 11.9088 10.3297C12.3248 10.5857 12.6408 10.9497 12.8568 11.4217C13.0728 11.8937 13.1808 12.4457 13.1808 13.0777V13.2817C13.1808 13.3697 13.1528 13.4377 13.0968 13.4857C13.0488 13.5337 12.9848 13.5577 12.9048 13.5577H8.75281C8.75281 13.5657 8.75281 13.5817 8.75281 13.6057C8.75281 13.6297 8.75281 13.6497 8.75281 13.6657C8.76881 13.9937 8.84081 14.3017 8.96881 14.5897C9.09681 14.8697 9.28081 15.0977 9.52081 15.2737C9.76081 15.4497 10.0488 15.5377 10.3848 15.5377C10.6728 15.5377 10.9128 15.4937 11.1048 15.4057C11.2968 15.3177 11.4528 15.2217 11.5728 15.1177C11.6928 15.0057 11.7728 14.9217 11.8128 14.8657C11.8848 14.7617 11.9408 14.7017 11.9808 14.6857C12.0208 14.6617 12.0848 14.6497 12.1728 14.6497H12.7488C12.8288 14.6497 12.8928 14.6737 12.9408 14.7217C12.9968 14.7617 13.0208 14.8217 13.0128 14.9017C13.0048 15.0217 12.9408 15.1697 12.8208 15.3457C12.7008 15.5137 12.5288 15.6817 12.3048 15.8497C12.0808 16.0177 11.8088 16.1577 11.4888 16.2697C11.1688 16.3737 10.8008 16.4257 10.3848 16.4257ZM8.75281 12.7297H12.0408V12.6937C12.0408 12.3337 11.9728 12.0137 11.8368 11.7337C11.7088 11.4537 11.5208 11.2337 11.2728 11.0737C11.0248 10.9057 10.7288 10.8217 10.3848 10.8217C10.0408 10.8217 9.74481 10.9057 9.49681 11.0737C9.25681 11.2337 9.07281 11.4537 8.94481 11.7337C8.81681 12.0137 8.75281 12.3337 8.75281 12.6937V12.7297ZM16.4567 16.3057C16.3367 16.3057 16.2407 16.2777 16.1687 16.2217C16.1047 16.1657 16.0527 16.0937 16.0127 16.0057L13.7927 10.4377C13.7767 10.3977 13.7687 10.3577 13.7687 10.3177C13.7687 10.2457 13.7927 10.1857 13.8407 10.1377C13.8887 10.0897 13.9487 10.0657 14.0207 10.0657H14.5967C14.6847 10.0657 14.7527 10.0897 14.8007 10.1377C14.8487 10.1857 14.8767 10.2297 14.8847 10.2697L16.7207 14.9977L18.5447 10.2697C18.5607 10.2297 18.5887 10.1857 18.6287 10.1377C18.6767 10.0897 18.7447 10.0657 18.8327 10.0657H19.4207C19.4847 10.0657 19.5407 10.0897 19.5887 10.1377C19.6447 10.1857 19.6727 10.2457 19.6727 10.3177C19.6727 10.3577 19.6647 10.3977 19.6487 10.4377L17.4167 16.0057C17.3847 16.0937 17.3327 16.1657 17.2607 16.2217C17.1967 16.2777 17.1007 16.3057 16.9727 16.3057H16.4567ZM23.0706 16.4257C22.2466 16.4257 21.5906 16.1737 21.1026 15.6697C20.6146 15.1577 20.3466 14.4617 20.2986 13.5817C20.2906 13.4777 20.2866 13.3457 20.2866 13.1857C20.2866 13.0177 20.2906 12.8817 20.2986 12.7777C20.3306 12.2097 20.4626 11.7137 20.6946 11.2897C20.9266 10.8577 21.2426 10.5257 21.6426 10.2937C22.0506 10.0617 22.5266 9.94566 23.0706 9.94566C23.6786 9.94566 24.1866 10.0737 24.5946 10.3297C25.0106 10.5857 25.3266 10.9497 25.5426 11.4217C25.7586 11.8937 25.8666 12.4457 25.8666 13.0777V13.2817C25.8666 13.3697 25.8386 13.4377 25.7826 13.4857C25.7346 13.5337 25.6706 13.5577 25.5906 13.5577H21.4386C21.4386 13.5657 21.4386 13.5817 21.4386 13.6057C21.4386 13.6297 21.4386 13.6497 21.4386 13.6657C21.4546 13.9937 21.5266 14.3017 21.6546 14.5897C21.7826 14.8697 21.9666 15.0977 22.2066 15.2737C22.4466 15.4497 22.7346 15.5377 23.0706 15.5377C23.3586 15.5377 23.5986 15.4937 23.7906 15.4057C23.9826 15.3177 24.1386 15.2217 24.2586 15.1177C24.3786 15.0057 24.4586 14.9217 24.4986 14.8657C24.5706 14.7617 24.6266 14.7017 24.6666 14.6857C24.7066 14.6617 24.7706 14.6497 24.8586 14.6497H25.4346C25.5146 14.6497 25.5786 14.6737 25.6266 14.7217C25.6826 14.7617 25.7066 14.8217 25.6986 14.9017C25.6906 15.0217 25.6266 15.1697 25.5066 15.3457C25.3866 15.5137 25.2146 15.6817 24.9906 15.8497C24.7666 16.0177 24.4946 16.1577 24.1746 16.2697C23.8546 16.3737 23.4866 16.4257 23.0706 16.4257ZM21.4386 12.7297H24.7266V12.6937C24.7266 12.3337 24.6586 12.0137 24.5226 11.7337C24.3946 11.4537 24.2066 11.2337 23.9586 11.0737C23.7106 10.9057 23.4146 10.8217 23.0706 10.8217C22.7266 10.8217 22.4306 10.9057 22.1826 11.0737C21.9426 11.2337 21.7586 11.4537 21.6306 11.7337C21.5026 12.0137 21.4386 12.3337 21.4386 12.6937V12.7297ZM27.4694 16.3057C27.3894 16.3057 27.3214 16.2817 27.2654 16.2337C27.2174 16.1777 27.1934 16.1097 27.1934 16.0297V8.06166C27.1934 7.98166 27.2174 7.91766 27.2654 7.86966C27.3214 7.81366 27.3894 7.78566 27.4694 7.78566H28.0334C28.1214 7.78566 28.1894 7.81366 28.2374 7.86966C28.2854 7.91766 28.3094 7.98166 28.3094 8.06166V16.0297C28.3094 16.1097 28.2854 16.1777 28.2374 16.2337C28.1894 16.2817 28.1214 16.3057 28.0334 16.3057H27.4694ZM35.7168 16.4257C35.1648 16.4257 34.6968 16.3417 34.3128 16.1737C33.9368 15.9977 33.6288 15.7577 33.3888 15.4537C33.1488 15.1497 32.9728 14.8017 32.8608 14.4097C32.7568 14.0177 32.6968 13.6017 32.6808 13.1617C32.6728 12.9457 32.6648 12.7177 32.6568 12.4777C32.6568 12.2377 32.6568 11.9977 32.6568 11.7577C32.6648 11.5097 32.6728 11.2737 32.6808 11.0497C32.6888 10.6097 32.7488 10.1937 32.8608 9.80166C32.9808 9.40166 33.1568 9.05366 33.3888 8.75766C33.6288 8.45366 33.9408 8.21766 34.3248 8.04966C34.7088 7.87366 35.1728 7.78566 35.7168 7.78566C36.2688 7.78566 36.7328 7.87366 37.1088 8.04966C37.4928 8.21766 37.8048 8.45366 38.0448 8.75766C38.2848 9.05366 38.4608 9.40166 38.5728 9.80166C38.6928 10.1937 38.7568 10.6097 38.7648 11.0497C38.7728 11.2737 38.7768 11.5097 38.7768 11.7577C38.7848 11.9977 38.7848 12.2377 38.7768 12.4777C38.7768 12.7177 38.7728 12.9457 38.7648 13.1617C38.7568 13.6017 38.6928 14.0177 38.5728 14.4097C38.4608 14.8017 38.2848 15.1497 38.0448 15.4537C37.8128 15.7577 37.5048 15.9977 37.1208 16.1737C36.7448 16.3417 36.2768 16.4257 35.7168 16.4257ZM35.7168 15.4057C36.3408 15.4057 36.8008 15.2017 37.0968 14.7937C37.4008 14.3777 37.5568 13.8137 37.5648 13.1017C37.5808 12.8697 37.5888 12.6457 37.5888 12.4297C37.5888 12.2057 37.5888 11.9857 37.5888 11.7697C37.5888 11.5457 37.5808 11.3257 37.5648 11.1097C37.5568 10.4137 37.4008 9.85766 37.0968 9.44166C36.8008 9.01766 36.3408 8.80566 35.7168 8.80566C35.1008 8.80566 34.6408 9.01766 34.3368 9.44166C34.0408 9.85766 33.8848 10.4137 33.8688 11.1097C33.8688 11.3257 33.8648 11.5457 33.8568 11.7697C33.8568 11.9857 33.8568 12.2057 33.8568 12.4297C33.8648 12.6457 33.8688 12.8697 33.8688 13.1017C33.8848 13.8137 34.0448 14.3777 34.3488 14.7937C34.6528 15.2017 35.1088 15.4057 35.7168 15.4057ZM44.222 16.3057C44.142 16.3057 44.074 16.2817 44.018 16.2337C43.97 16.1777 43.946 16.1097 43.946 16.0297V14.3017H40.058C39.978 14.3017 39.91 14.2777 39.854 14.2297C39.806 14.1737 39.782 14.1057 39.782 14.0257V13.5457C39.782 13.5137 39.79 13.4657 39.806 13.4017C39.83 13.3297 39.866 13.2577 39.914 13.1857L43.514 8.10966C43.61 7.97366 43.758 7.90566 43.958 7.90566H44.822C44.902 7.90566 44.966 7.93366 45.014 7.98966C45.07 8.03766 45.098 8.10166 45.098 8.18166V13.2577H46.178C46.266 13.2577 46.334 13.2857 46.382 13.3417C46.438 13.3897 46.466 13.4537 46.466 13.5337V14.0257C46.466 14.1057 46.438 14.1737 46.382 14.2297C46.334 14.2777 46.27 14.3017 46.19 14.3017H45.098V16.0297C45.098 16.1097 45.07 16.1777 45.014 16.2337C44.966 16.2817 44.902 16.3057 44.822 16.3057H44.222ZM41.066 13.2817H43.958V9.16566L41.066 13.2817Z",fill:"#88836D",id:"path1"})),e.createElement("path",{d:"M5.012 40.3057C4.756 40.3057 4.548 40.2337 4.388 40.0897C4.244 39.9457 4.156 39.7697 4.124 39.5617L1.388 24.1777C1.372 24.1457 1.364 24.1137 1.364 24.0817C1.364 24.0497 1.364 24.0257 1.364 24.0097C1.364 23.8817 1.412 23.7697 1.508 23.6737C1.604 23.5617 1.724 23.5057 1.868 23.5057H4.388C4.804 23.5057 5.036 23.6737 5.084 24.0097L6.884 34.1617L8.828 27.8497C8.876 27.7217 8.956 27.5857 9.068 27.4417C9.18 27.2977 9.364 27.2257 9.62 27.2257H11.132C11.388 27.2257 11.572 27.2977 11.684 27.4417C11.796 27.5857 11.868 27.7217 11.9 27.8497L13.868 34.1377L15.644 24.0097C15.692 23.6737 15.932 23.5057 16.364 23.5057H18.884C19.028 23.5057 19.148 23.5617 19.244 23.6737C19.34 23.7697 19.388 23.8817 19.388 24.0097C19.388 24.0257 19.388 24.0497 19.388 24.0817C19.388 24.1137 19.38 24.1457 19.364 24.1777L16.628 39.5617C16.596 39.7697 16.5 39.9457 16.34 40.0897C16.196 40.2337 15.996 40.3057 15.74 40.3057H13.796C13.54 40.3057 13.34 40.2417 13.196 40.1137C13.068 39.9697 12.98 39.8257 12.932 39.6817L10.364 32.2417L7.82 39.6817C7.772 39.8257 7.676 39.9697 7.532 40.1137C7.404 40.2417 7.204 40.3057 6.932 40.3057H5.012ZM21.6498 40.3057C21.4738 40.3057 21.3298 40.2497 21.2178 40.1377C21.1058 40.0257 21.0498 39.8817 21.0498 39.7057V23.8657C21.0498 23.6897 21.1058 23.5457 21.2178 23.4337C21.3298 23.3217 21.4738 23.2657 21.6498 23.2657H24.2418C24.4018 23.2657 24.5378 23.3217 24.6498 23.4337C24.7618 23.5457 24.8178 23.6897 24.8178 23.8657V29.2657C25.2498 28.7537 25.7778 28.3457 26.4018 28.0417C27.0258 27.7377 27.7778 27.5857 28.6578 27.5857C29.6018 27.5857 30.4338 27.8017 31.1538 28.2337C31.8898 28.6497 32.4658 29.2657 32.8818 30.0817C33.2978 30.8817 33.5058 31.8577 33.5058 33.0097V39.7057C33.5058 39.8817 33.4498 40.0257 33.3378 40.1377C33.2258 40.2497 33.0818 40.3057 32.9058 40.3057H30.2898C30.1298 40.3057 29.9938 40.2497 29.8818 40.1377C29.7698 40.0257 29.7138 39.8817 29.7138 39.7057V33.1537C29.7138 32.3057 29.5058 31.6497 29.0898 31.1857C28.6738 30.7057 28.0818 30.4657 27.3138 30.4657C26.5618 30.4657 25.9538 30.7057 25.4898 31.1857C25.0418 31.6497 24.8178 32.3057 24.8178 33.1537V39.7057C24.8178 39.8817 24.7618 40.0257 24.6498 40.1377C24.5378 40.2497 24.4018 40.3057 24.2418 40.3057H21.6498ZM36.2339 40.3057C36.0739 40.3057 35.9379 40.2497 35.8259 40.1377C35.7139 40.0257 35.6579 39.8817 35.6579 39.7057V28.4257C35.6579 28.2497 35.7139 28.1057 35.8259 27.9937C35.9379 27.8817 36.0739 27.8257 36.2339 27.8257H38.6339C38.8099 27.8257 38.9539 27.8817 39.0659 27.9937C39.1779 28.1057 39.2339 28.2497 39.2339 28.4257V39.7057C39.2339 39.8817 39.1779 40.0257 39.0659 40.1377C38.9539 40.2497 38.8099 40.3057 38.6339 40.3057H36.2339ZM36.1619 25.9057C36.0019 25.9057 35.8659 25.8497 35.7539 25.7377C35.6419 25.6257 35.5859 25.4817 35.5859 25.3057V23.3857C35.5859 23.2097 35.6419 23.0657 35.7539 22.9537C35.8659 22.8257 36.0019 22.7617 36.1619 22.7617H38.6819C38.8579 22.7617 39.0019 22.8257 39.1139 22.9537C39.2419 23.0657 39.3059 23.2097 39.3059 23.3857V25.3057C39.3059 25.4817 39.2419 25.6257 39.1139 25.7377C39.0019 25.8497 38.8579 25.9057 38.6819 25.9057H36.1619ZM47.5239 40.3057C46.5319 40.3057 45.6839 40.1457 44.9799 39.8257C44.2759 39.4897 43.7399 38.9777 43.3719 38.2897C43.0199 37.6017 42.8439 36.7377 42.8439 35.6977V30.6577H40.9719C40.7959 30.6577 40.6519 30.6017 40.5399 30.4897C40.4279 30.3777 40.3719 30.2337 40.3719 30.0577V28.4257C40.3719 28.2497 40.4279 28.1057 40.5399 27.9937C40.6519 27.8817 40.7959 27.8257 40.9719 27.8257H42.8439V23.8657C42.8439 23.6897 42.8999 23.5457 43.0119 23.4337C43.1399 23.3217 43.2839 23.2657 43.4439 23.2657H45.7959C45.9719 23.2657 46.1159 23.3217 46.2279 23.4337C46.3399 23.5457 46.3959 23.6897 46.3959 23.8657V27.8257H49.3959C49.5559 27.8257 49.6919 27.8817 49.8039 27.9937C49.9159 28.1057 49.9719 28.2497 49.9719 28.4257V30.0577C49.9719 30.2337 49.9159 30.3777 49.8039 30.4897C49.6919 30.6017 49.5559 30.6577 49.3959 30.6577H46.3959V35.4097C46.3959 36.0177 46.4999 36.4977 46.7079 36.8497C46.9319 37.1857 47.3159 37.3537 47.8599 37.3537H49.6119C49.7719 37.3537 49.9079 37.4097 50.0199 37.5217C50.1319 37.6337 50.1879 37.7697 50.1879 37.9297V39.7057C50.1879 39.8817 50.1319 40.0257 50.0199 40.1377C49.9079 40.2497 49.7719 40.3057 49.6119 40.3057H47.5239ZM57.1297 40.5457C55.2897 40.5457 53.8257 40.0337 52.7377 39.0097C51.6657 37.9857 51.0977 36.4977 51.0337 34.5457C51.0337 34.4177 51.0337 34.2497 51.0337 34.0417C51.0337 33.8177 51.0337 33.6417 51.0337 33.5137C51.0977 32.2817 51.3777 31.2257 51.8737 30.3457C52.3697 29.4497 53.0657 28.7697 53.9617 28.3057C54.8577 27.8257 55.9057 27.5857 57.1057 27.5857C58.4497 27.5857 59.5697 27.8657 60.4657 28.4257C61.3777 28.9697 62.0577 29.7217 62.5057 30.6817C62.9697 31.6257 63.2017 32.7137 63.2017 33.9457V34.4977C63.2017 34.6577 63.1377 34.7937 63.0097 34.9057C62.8977 35.0177 62.7617 35.0737 62.6017 35.0737H54.7537C54.7537 35.0897 54.7537 35.1217 54.7537 35.1697C54.7537 35.2017 54.7537 35.2337 54.7537 35.2657C54.7697 35.7777 54.8657 36.2497 55.0417 36.6817C55.2337 37.0977 55.4977 37.4337 55.8337 37.6897C56.1857 37.9457 56.6017 38.0737 57.0817 38.0737C57.4817 38.0737 57.8097 38.0177 58.0657 37.9057C58.3217 37.7937 58.5297 37.6577 58.6897 37.4977C58.8657 37.3377 58.9937 37.2017 59.0737 37.0897C59.2177 36.9297 59.3297 36.8337 59.4097 36.8017C59.5057 36.7537 59.6497 36.7297 59.8417 36.7297H62.3377C62.4977 36.7297 62.6257 36.7777 62.7217 36.8737C62.8337 36.9537 62.8817 37.0737 62.8657 37.2337C62.8497 37.4897 62.7137 37.8097 62.4577 38.1937C62.2177 38.5617 61.8577 38.9297 61.3777 39.2977C60.8977 39.6497 60.2977 39.9457 59.5777 40.1857C58.8737 40.4257 58.0577 40.5457 57.1297 40.5457ZM54.7537 32.8897H59.4577V32.8417C59.4577 32.2657 59.3617 31.7697 59.1697 31.3537C58.9937 30.9217 58.7297 30.5857 58.3777 30.3457C58.0257 30.1057 57.6017 29.9857 57.1057 29.9857C56.6097 29.9857 56.1857 30.1057 55.8337 30.3457C55.4817 30.5857 55.2097 30.9217 55.0177 31.3537C54.8417 31.7697 54.7537 32.2657 54.7537 32.8417V32.8897ZM2.876 64.3057C2.7 64.3057 2.556 64.2497 2.444 64.1377C2.332 64.0257 2.276 63.8817 2.276 63.7057V48.1057C2.276 47.9297 2.332 47.7857 2.444 47.6737C2.556 47.5617 2.7 47.5057 2.876 47.5057H5.42C5.596 47.5057 5.74 47.5617 5.852 47.6737C5.964 47.7857 6.02 47.9297 6.02 48.1057V53.5777L10.964 47.9617C11.028 47.8657 11.132 47.7697 11.276 47.6737C11.436 47.5617 11.644 47.5057 11.9 47.5057H14.804C14.948 47.5057 15.068 47.5617 15.164 47.6737C15.26 47.7697 15.308 47.8817 15.308 48.0097C15.308 48.1217 15.276 48.2177 15.212 48.2977L9.044 55.5457L15.668 63.5137C15.732 63.5777 15.764 63.6737 15.764 63.8017C15.764 63.9297 15.716 64.0497 15.62 64.1617C15.524 64.2577 15.404 64.3057 15.26 64.3057H12.26C11.972 64.3057 11.756 64.2417 11.612 64.1137C11.468 63.9857 11.372 63.8977 11.324 63.8497L6.02 57.7057V63.7057C6.02 63.8817 5.964 64.0257 5.852 64.1377C5.74 64.2497 5.596 64.3057 5.42 64.3057H2.876ZM17.4071 64.3057C17.2471 64.3057 17.1111 64.2497 16.9991 64.1377C16.8871 64.0257 16.8311 63.8817 16.8311 63.7057V52.4257C16.8311 52.2497 16.8871 52.1057 16.9991 51.9937C17.1111 51.8817 17.2471 51.8257 17.4071 51.8257H19.7591C19.9351 51.8257 20.0791 51.8817 20.1911 51.9937C20.3031 52.1057 20.3591 52.2497 20.3591 52.4257V53.3617C20.7751 52.8497 21.3111 52.4257 21.9671 52.0897C22.6231 51.7537 23.4231 51.5857 24.3671 51.5857C25.3111 51.5857 26.1351 51.8017 26.8391 52.2337C27.5591 52.6497 28.1191 53.2657 28.5191 54.0817C28.9351 54.8817 29.1431 55.8577 29.1431 57.0097V63.7057C29.1431 63.8817 29.0791 64.0257 28.9511 64.1377C28.8391 64.2497 28.7031 64.3057 28.5431 64.3057H25.9991C25.8231 64.3057 25.6791 64.2497 25.5671 64.1377C25.4551 64.0257 25.3991 63.8817 25.3991 63.7057V57.1537C25.3991 56.3057 25.1911 55.6497 24.7751 55.1857C24.3751 54.7057 23.7831 54.4657 22.9991 54.4657C22.2471 54.4657 21.6471 54.7057 21.1991 55.1857C20.7511 55.6497 20.5271 56.3057 20.5271 57.1537V63.7057C20.5271 63.8817 20.4711 64.0257 20.3591 64.1377C20.2471 64.2497 20.1111 64.3057 19.9511 64.3057H17.4071ZM35.8826 64.5457C34.9546 64.5457 34.1306 64.3377 33.4106 63.9217C32.7066 63.4897 32.1546 62.8737 31.7546 62.0737C31.3706 61.2577 31.1786 60.2737 31.1786 59.1217V52.4257C31.1786 52.2497 31.2346 52.1057 31.3466 51.9937C31.4586 51.8817 31.5946 51.8257 31.7546 51.8257H34.2986C34.4746 51.8257 34.6186 51.8817 34.7306 51.9937C34.8426 52.1057 34.8986 52.2497 34.8986 52.4257V58.9777C34.8986 60.7697 35.6826 61.6657 37.2506 61.6657C38.0026 61.6657 38.5946 61.4337 39.0266 60.9697C39.4746 60.4897 39.6986 59.8257 39.6986 58.9777V52.4257C39.6986 52.2497 39.7546 52.1057 39.8666 51.9937C39.9786 51.8817 40.1226 51.8257 40.2986 51.8257H42.8426C43.0026 51.8257 43.1386 51.8817 43.2506 51.9937C43.3626 52.1057 43.4186 52.2497 43.4186 52.4257V63.7057C43.4186 63.8817 43.3626 64.0257 43.2506 64.1377C43.1386 64.2497 43.0026 64.3057 42.8426 64.3057H40.4906C40.3146 64.3057 40.1706 64.2497 40.0586 64.1377C39.9466 64.0257 39.8906 63.8817 39.8906 63.7057V62.7697C39.4746 63.3457 38.9386 63.7857 38.2826 64.0897C37.6266 64.3937 36.8266 64.5457 35.8826 64.5457ZM51.2632 64.5457C50.0952 64.5457 49.0632 64.3297 48.1672 63.8977C47.2872 63.4657 46.5912 62.8417 46.0792 62.0257C45.5672 61.1937 45.2872 60.2017 45.2392 59.0497C45.2232 58.7937 45.2152 58.4737 45.2152 58.0897C45.2152 57.6897 45.2232 57.3617 45.2392 57.1057C45.2872 55.9377 45.5592 54.9457 46.0552 54.1297C46.5672 53.2977 47.2712 52.6657 48.1672 52.2337C49.0632 51.8017 50.0952 51.5857 51.2632 51.5857C52.3352 51.5857 53.2472 51.7377 53.9992 52.0417C54.7512 52.3297 55.3672 52.6977 55.8472 53.1457C56.3272 53.5937 56.6792 54.0657 56.9032 54.5617C57.1432 55.0417 57.2712 55.4657 57.2872 55.8337C57.3032 55.9937 57.2472 56.1377 57.1192 56.2657C57.0072 56.3777 56.8712 56.4337 56.7112 56.4337H54.1432C53.9832 56.4337 53.8552 56.3937 53.7592 56.3137C53.6792 56.2177 53.5992 56.0897 53.5192 55.9297C53.2952 55.3697 53.0072 54.9697 52.6552 54.7297C52.3032 54.4897 51.8632 54.3697 51.3352 54.3697C50.6152 54.3697 50.0472 54.6017 49.6312 55.0657C49.2152 55.5297 48.9912 56.2497 48.9592 57.2257C48.9432 57.8497 48.9432 58.4177 48.9592 58.9297C49.0072 59.9217 49.2312 60.6417 49.6312 61.0897C50.0472 61.5377 50.6152 61.7617 51.3352 61.7617C51.8952 61.7617 52.3432 61.6417 52.6792 61.4017C53.0152 61.1617 53.2952 60.7617 53.5192 60.2017C53.5832 60.0417 53.6632 59.9217 53.7592 59.8417C53.8552 59.7457 53.9832 59.6977 54.1432 59.6977H56.7112C56.8712 59.6977 57.0072 59.7617 57.1192 59.8897C57.2472 60.0017 57.3032 60.1377 57.2872 60.2977C57.2712 60.5697 57.1912 60.8897 57.0472 61.2577C56.9192 61.6257 56.7032 62.0017 56.3992 62.3857C56.1112 62.7697 55.7352 63.1297 55.2712 63.4657C54.8072 63.7857 54.2392 64.0497 53.5672 64.2577C52.9112 64.4497 52.1432 64.5457 51.2632 64.5457ZM59.5211 64.3057C59.3451 64.3057 59.2011 64.2497 59.0891 64.1377C58.9771 64.0257 58.9211 63.8817 58.9211 63.7057V47.8657C58.9211 47.6897 58.9771 47.5457 59.0891 47.4337C59.2011 47.3217 59.3451 47.2657 59.5211 47.2657H61.8731C62.0331 47.2657 62.1691 47.3217 62.2811 47.4337C62.3931 47.5457 62.4491 47.6897 62.4491 47.8657V55.9777L66.1451 52.2337C66.2731 52.1217 66.3851 52.0257 66.4811 51.9457C66.5931 51.8657 66.7611 51.8257 66.9851 51.8257H69.6971C69.8571 51.8257 69.9851 51.8817 70.0811 51.9937C70.1771 52.0897 70.2251 52.2097 70.2251 52.3537C70.2251 52.4177 70.2091 52.4897 70.1771 52.5697C70.1451 52.6497 70.0891 52.7137 70.0091 52.7617L65.3771 57.4177L70.6091 63.3937C70.7531 63.5217 70.8251 63.6497 70.8251 63.7777C70.8251 63.9217 70.7691 64.0497 70.6571 64.1617C70.5611 64.2577 70.4411 64.3057 70.2971 64.3057H67.5131C67.2731 64.3057 67.0971 64.2657 66.9851 64.1857C66.8891 64.1057 66.7771 64.0097 66.6491 63.8977L62.4491 59.1937V63.7057C62.4491 63.8817 62.3931 64.0257 62.2811 64.1377C62.1691 64.2497 62.0331 64.3057 61.8731 64.3057H59.5211ZM72.4183 64.3057C72.2423 64.3057 72.0983 64.2497 71.9863 64.1377C71.8743 64.0257 71.8183 63.8817 71.8183 63.7057V47.8657C71.8183 47.6897 71.8743 47.5457 71.9863 47.4337C72.0983 47.3217 72.2423 47.2657 72.4183 47.2657H74.8183C74.9783 47.2657 75.1143 47.3217 75.2263 47.4337C75.3383 47.5457 75.3943 47.6897 75.3943 47.8657V63.7057C75.3943 63.8817 75.3383 64.0257 75.2263 64.1377C75.1143 64.2497 74.9783 64.3057 74.8183 64.3057H72.4183ZM83.2756 64.5457C81.4356 64.5457 79.9716 64.0337 78.8836 63.0097C77.8116 61.9857 77.2436 60.4977 77.1796 58.5457C77.1796 58.4177 77.1796 58.2497 77.1796 58.0417C77.1796 57.8177 77.1796 57.6417 77.1796 57.5137C77.2436 56.2817 77.5236 55.2257 78.0196 54.3457C78.5156 53.4497 79.2116 52.7697 80.1076 52.3057C81.0036 51.8257 82.0516 51.5857 83.2516 51.5857C84.5956 51.5857 85.7156 51.8657 86.6116 52.4257C87.5236 52.9697 88.2036 53.7217 88.6516 54.6817C89.1156 55.6257 89.3476 56.7137 89.3476 57.9457V58.4977C89.3476 58.6577 89.2836 58.7937 89.1556 58.9057C89.0436 59.0177 88.9076 59.0737 88.7476 59.0737H80.8996C80.8996 59.0897 80.8996 59.1217 80.8996 59.1697C80.8996 59.2017 80.8996 59.2337 80.8996 59.2657C80.9156 59.7777 81.0116 60.2497 81.1876 60.6817C81.3796 61.0977 81.6436 61.4337 81.9796 61.6897C82.3316 61.9457 82.7476 62.0737 83.2276 62.0737C83.6276 62.0737 83.9556 62.0177 84.2116 61.9057C84.4676 61.7937 84.6756 61.6577 84.8356 61.4977C85.0116 61.3377 85.1396 61.2017 85.2196 61.0897C85.3636 60.9297 85.4756 60.8337 85.5556 60.8017C85.6516 60.7537 85.7956 60.7297 85.9876 60.7297H88.4836C88.6436 60.7297 88.7716 60.7777 88.8676 60.8737C88.9796 60.9537 89.0276 61.0737 89.0116 61.2337C88.9956 61.4897 88.8596 61.8097 88.6036 62.1937C88.3636 62.5617 88.0036 62.9297 87.5236 63.2977C87.0436 63.6497 86.4436 63.9457 85.7236 64.1857C85.0196 64.4257 84.2036 64.5457 83.2756 64.5457ZM80.8996 56.8897H85.6036V56.8417C85.6036 56.2657 85.5076 55.7697 85.3156 55.3537C85.1396 54.9217 84.8756 54.5857 84.5236 54.3457C84.1716 54.1057 83.7476 53.9857 83.2516 53.9857C82.7556 53.9857 82.3316 54.1057 81.9796 54.3457C81.6276 54.5857 81.3556 54.9217 81.1636 55.3537C80.9876 55.7697 80.8996 56.2657 80.8996 56.8417V56.8897ZM95.9467 64.5457C94.9547 64.5457 94.0987 64.4337 93.3787 64.2097C92.6747 63.9697 92.0987 63.6817 91.6507 63.3457C91.2187 63.0097 90.8907 62.6737 90.6667 62.3377C90.4587 61.9857 90.3467 61.6897 90.3307 61.4497C90.3147 61.2737 90.3707 61.1297 90.4987 61.0177C90.6267 60.9057 90.7547 60.8497 90.8827 60.8497H93.2107C93.2587 60.8497 93.3067 60.8577 93.3547 60.8737C93.4027 60.8897 93.4507 60.9297 93.4987 60.9937C93.7067 61.1377 93.9227 61.3057 94.1467 61.4977C94.3707 61.6737 94.6267 61.8257 94.9147 61.9537C95.2187 62.0817 95.5947 62.1457 96.0427 62.1457C96.5707 62.1457 97.0187 62.0417 97.3867 61.8337C97.7547 61.6097 97.9387 61.2977 97.9387 60.8977C97.9387 60.6097 97.8507 60.3697 97.6747 60.1777C97.5147 59.9857 97.2027 59.8097 96.7387 59.6497C96.2747 59.4897 95.5867 59.3137 94.6747 59.1217C93.8107 58.9297 93.0747 58.6737 92.4667 58.3537C91.8587 58.0337 91.4027 57.6337 91.0987 57.1537C90.7947 56.6577 90.6427 56.0657 90.6427 55.3777C90.6427 54.7537 90.8347 54.1537 91.2187 53.5777C91.6187 53.0017 92.2027 52.5297 92.9707 52.1617C93.7387 51.7777 94.6987 51.5857 95.8507 51.5857C96.7307 51.5857 97.4987 51.6977 98.1547 51.9217C98.8267 52.1297 99.3867 52.4017 99.8347 52.7377C100.283 53.0577 100.619 53.3937 100.843 53.7457C101.083 54.0817 101.211 54.3777 101.227 54.6337C101.243 54.7937 101.195 54.9297 101.083 55.0417C100.971 55.1537 100.843 55.2097 100.699 55.2097H98.5627C98.4827 55.2097 98.4107 55.2017 98.3467 55.1857C98.2827 55.1537 98.2267 55.1137 98.1787 55.0657C97.9867 54.9377 97.7867 54.7937 97.5787 54.6337C97.3867 54.4577 97.1547 54.3057 96.8827 54.1777C96.6107 54.0497 96.2587 53.9857 95.8267 53.9857C95.2987 53.9857 94.8907 54.1057 94.6027 54.3457C94.3307 54.5697 94.1947 54.8577 94.1947 55.2097C94.1947 55.4337 94.2667 55.6417 94.4107 55.8337C94.5547 56.0257 94.8507 56.2017 95.2987 56.3617C95.7467 56.5217 96.4267 56.6897 97.3387 56.8657C98.4267 57.0577 99.2907 57.3457 99.9307 57.7297C100.571 58.1137 101.027 58.5617 101.299 59.0737C101.587 59.5697 101.731 60.1057 101.731 60.6817C101.731 61.4337 101.507 62.1057 101.059 62.6977C100.611 63.2737 99.9547 63.7297 99.0907 64.0657C98.2427 64.3857 97.1947 64.5457 95.9467 64.5457Z",fill:"#522B2A",id:"path2",style:{fill:"#d31f11",fillOpacity:1}}),ae||(ae=e.createElement("path",{d:"M2.26 87.3057C2.14267 87.3057 2.052 87.2737 1.988 87.2097C1.924 87.135 1.892 87.0443 1.892 86.9377V76.4897C1.892 76.3723 1.924 76.2817 1.988 76.2177C2.052 76.143 2.14267 76.1057 2.26 76.1057H6.164C7.36933 76.1057 8.324 76.3883 9.028 76.9537C9.732 77.519 10.084 78.3563 10.084 79.4657C10.084 80.287 9.876 80.959 9.46 81.4817C9.05467 81.9937 8.5 82.351 7.796 82.5537L10.26 86.8097C10.292 86.8737 10.308 86.9323 10.308 86.9857C10.308 87.071 10.2707 87.1457 10.196 87.2097C10.132 87.2737 10.0573 87.3057 9.972 87.3057H9.204C9.02267 87.3057 8.88933 87.2577 8.804 87.1617C8.71867 87.0657 8.644 86.9697 8.58 86.8737L6.26 82.8097H3.46V86.9377C3.46 87.0443 3.42267 87.135 3.348 87.2097C3.284 87.2737 3.19333 87.3057 3.076 87.3057H2.26ZM3.46 81.4497H6.1C6.9 81.4497 7.49733 81.2843 7.892 80.9537C8.28667 80.6123 8.484 80.111 8.484 79.4497C8.484 78.799 8.28667 78.303 7.892 77.9617C7.508 77.6203 6.91067 77.4497 6.1 77.4497H3.46V81.4497ZM15.0666 87.4657C13.968 87.4657 13.0933 87.1297 12.4426 86.4577C11.792 85.775 11.4346 84.847 11.3706 83.6737C11.36 83.535 11.3546 83.359 11.3546 83.1457C11.3546 82.9217 11.36 82.7403 11.3706 82.6017C11.4133 81.8443 11.5893 81.183 11.8986 80.6177C12.208 80.0417 12.6293 79.599 13.1626 79.2897C13.7066 78.9803 14.3413 78.8257 15.0666 78.8257C15.8773 78.8257 16.5546 78.9963 17.0986 79.3377C17.6533 79.679 18.0746 80.1643 18.3626 80.7937C18.6506 81.423 18.7946 82.159 18.7946 83.0017V83.2737C18.7946 83.391 18.7573 83.4817 18.6826 83.5457C18.6186 83.6097 18.5333 83.6417 18.4266 83.6417H12.8906C12.8906 83.6523 12.8906 83.6737 12.8906 83.7057C12.8906 83.7377 12.8906 83.7643 12.8906 83.7857C12.912 84.223 13.008 84.6337 13.1786 85.0177C13.3493 85.391 13.5946 85.695 13.9146 85.9297C14.2346 86.1643 14.6186 86.2817 15.0666 86.2817C15.4506 86.2817 15.7706 86.223 16.0266 86.1057C16.2826 85.9883 16.4906 85.8603 16.6506 85.7217C16.8106 85.5723 16.9173 85.4603 16.9706 85.3857C17.0666 85.247 17.1413 85.167 17.1946 85.1457C17.248 85.1137 17.3333 85.0977 17.4506 85.0977H18.2186C18.3253 85.0977 18.4106 85.1297 18.4746 85.1937C18.5493 85.247 18.5813 85.327 18.5706 85.4337C18.56 85.5937 18.4746 85.791 18.3146 86.0257C18.1546 86.2497 17.9253 86.4737 17.6266 86.6977C17.328 86.9217 16.9653 87.1083 16.5386 87.2577C16.112 87.3963 15.6213 87.4657 15.0666 87.4657ZM12.8906 82.5377H17.2746V82.4897C17.2746 82.0097 17.184 81.583 17.0026 81.2097C16.832 80.8363 16.5813 80.543 16.2506 80.3297C15.92 80.1057 15.5253 79.9937 15.0666 79.9937C14.608 79.9937 14.2133 80.1057 13.8826 80.3297C13.5626 80.543 13.3173 80.8363 13.1466 81.2097C12.976 81.583 12.8906 82.0097 12.8906 82.4897V82.5377ZM26.4038 90.3457C26.2864 90.3457 26.1958 90.3083 26.1318 90.2337C26.0678 90.1697 26.0358 90.0843 26.0358 89.9777V86.2657C25.7691 86.607 25.4224 86.895 24.9958 87.1297C24.5798 87.3537 24.0624 87.4657 23.4438 87.4657C22.8571 87.4657 22.3504 87.3643 21.9238 87.1617C21.4971 86.9483 21.1451 86.671 20.8678 86.3297C20.6011 85.9777 20.3984 85.5777 20.2598 85.1297C20.1318 84.671 20.0571 84.191 20.0358 83.6897C20.0251 83.519 20.0198 83.3377 20.0198 83.1457C20.0198 82.9537 20.0251 82.7723 20.0358 82.6017C20.0571 82.0897 20.1318 81.6097 20.2598 81.1617C20.3984 80.7137 20.6011 80.3137 20.8678 79.9617C21.1451 79.6097 21.4971 79.3323 21.9238 79.1297C22.3504 78.927 22.8571 78.8257 23.4438 78.8257C24.0838 78.8257 24.6171 78.943 25.0438 79.1777C25.4704 79.4123 25.8118 79.7057 26.0678 80.0577V79.3537C26.0678 79.247 26.0998 79.1617 26.1638 79.0977C26.2384 79.023 26.3291 78.9857 26.4358 78.9857H27.1718C27.2784 78.9857 27.3638 79.023 27.4278 79.0977C27.5024 79.1617 27.5398 79.247 27.5398 79.3537V89.9777C27.5398 90.0843 27.5024 90.1697 27.4278 90.2337C27.3638 90.3083 27.2784 90.3457 27.1718 90.3457H26.4038ZM23.7798 86.1697C24.2918 86.1697 24.7078 86.0523 25.0278 85.8177C25.3584 85.583 25.6038 85.2843 25.7638 84.9217C25.9344 84.559 26.0251 84.191 26.0358 83.8177C26.0464 83.6363 26.0518 83.4283 26.0518 83.1937C26.0518 82.959 26.0464 82.7563 26.0358 82.5857C26.0251 82.191 25.9398 81.807 25.7798 81.4337C25.6198 81.0497 25.3744 80.735 25.0438 80.4897C24.7238 80.2443 24.3024 80.1217 23.7798 80.1217C23.2358 80.1217 22.8038 80.2443 22.4838 80.4897C22.1638 80.7243 21.9344 81.039 21.7958 81.4337C21.6571 81.8177 21.5771 82.2337 21.5558 82.6817C21.5451 82.991 21.5451 83.3003 21.5558 83.6097C21.5771 84.0577 21.6571 84.479 21.7958 84.8737C21.9344 85.2577 22.1638 85.5723 22.4838 85.8177C22.8038 86.0523 23.2358 86.1697 23.7798 86.1697ZM32.703 87.4657C32.0203 87.4657 31.439 87.3163 30.959 87.0177C30.4897 86.7083 30.1323 86.2817 29.887 85.7377C29.6417 85.1937 29.519 84.5697 29.519 83.8657V79.3537C29.519 79.247 29.551 79.1617 29.615 79.0977C29.6897 79.023 29.7803 78.9857 29.887 78.9857H30.687C30.7937 78.9857 30.879 79.023 30.943 79.0977C31.0177 79.1617 31.055 79.247 31.055 79.3537V83.7857C31.055 85.375 31.7483 86.1697 33.135 86.1697C33.7963 86.1697 34.3243 85.9617 34.719 85.5457C35.1243 85.119 35.327 84.5323 35.327 83.7857V79.3537C35.327 79.247 35.359 79.1617 35.423 79.0977C35.4977 79.023 35.5883 78.9857 35.695 78.9857H36.479C36.5963 78.9857 36.687 79.023 36.751 79.0977C36.815 79.1617 36.847 79.247 36.847 79.3537V86.9377C36.847 87.0443 36.815 87.135 36.751 87.2097C36.687 87.2737 36.5963 87.3057 36.479 87.3057H35.743C35.6363 87.3057 35.5457 87.2737 35.471 87.2097C35.407 87.135 35.375 87.0443 35.375 86.9377V86.2337C35.087 86.607 34.735 86.9057 34.319 87.1297C33.9137 87.3537 33.375 87.4657 32.703 87.4657ZM39.272 87.3057C39.1653 87.3057 39.0747 87.2737 39 87.2097C38.936 87.135 38.904 87.0443 38.904 86.9377V79.3537C38.904 79.247 38.936 79.1617 39 79.0977C39.0747 79.023 39.1653 78.9857 39.272 78.9857H40.04C40.1467 78.9857 40.232 79.023 40.296 79.0977C40.36 79.1617 40.392 79.247 40.392 79.3537V86.9377C40.392 87.0443 40.36 87.135 40.296 87.2097C40.232 87.2737 40.1467 87.3057 40.04 87.3057H39.272ZM39.144 77.4337C39.0373 77.4337 38.9467 77.4017 38.872 77.3377C38.808 77.263 38.776 77.1723 38.776 77.0657V76.2017C38.776 76.095 38.808 76.0097 38.872 75.9457C38.9467 75.871 39.0373 75.8337 39.144 75.8337H40.152C40.2587 75.8337 40.344 75.871 40.408 75.9457C40.4827 76.0097 40.52 76.095 40.52 76.2017V77.0657C40.52 77.1723 40.4827 77.263 40.408 77.3377C40.344 77.4017 40.2587 77.4337 40.152 77.4337H39.144ZM42.827 87.3057C42.7203 87.3057 42.6297 87.2737 42.555 87.2097C42.491 87.135 42.459 87.0443 42.459 86.9377V79.3697C42.459 79.263 42.491 79.1723 42.555 79.0977C42.6297 79.023 42.7203 78.9857 42.827 78.9857H43.563C43.6697 78.9857 43.7603 79.023 43.835 79.0977C43.9097 79.1723 43.947 79.263 43.947 79.3697V80.0737C44.1603 79.711 44.4537 79.439 44.827 79.2577C45.2003 79.0763 45.6483 78.9857 46.171 78.9857H46.811C46.9177 78.9857 47.003 79.023 47.067 79.0977C47.131 79.1617 47.163 79.247 47.163 79.3537V80.0097C47.163 80.1163 47.131 80.2017 47.067 80.2657C47.003 80.3297 46.9177 80.3617 46.811 80.3617H45.851C45.275 80.3617 44.8217 80.5323 44.491 80.8737C44.1603 81.2043 43.995 81.6577 43.995 82.2337V86.9377C43.995 87.0443 43.9577 87.135 43.883 87.2097C43.8083 87.2737 43.7177 87.3057 43.611 87.3057H42.827ZM51.3729 87.4657C50.2742 87.4657 49.3995 87.1297 48.7489 86.4577C48.0982 85.775 47.7409 84.847 47.6769 83.6737C47.6662 83.535 47.6609 83.359 47.6609 83.1457C47.6609 82.9217 47.6662 82.7403 47.6769 82.6017C47.7195 81.8443 47.8955 81.183 48.2049 80.6177C48.5142 80.0417 48.9355 79.599 49.4689 79.2897C50.0129 78.9803 50.6475 78.8257 51.3729 78.8257C52.1835 78.8257 52.8609 78.9963 53.4049 79.3377C53.9595 79.679 54.3809 80.1643 54.6689 80.7937C54.9569 81.423 55.1009 82.159 55.1009 83.0017V83.2737C55.1009 83.391 55.0635 83.4817 54.9889 83.5457C54.9249 83.6097 54.8395 83.6417 54.7329 83.6417H49.1969C49.1969 83.6523 49.1969 83.6737 49.1969 83.7057C49.1969 83.7377 49.1969 83.7643 49.1969 83.7857C49.2182 84.223 49.3142 84.6337 49.4849 85.0177C49.6555 85.391 49.9009 85.695 50.2209 85.9297C50.5409 86.1643 50.9249 86.2817 51.3729 86.2817C51.7569 86.2817 52.0769 86.223 52.3329 86.1057C52.5889 85.9883 52.7969 85.8603 52.9569 85.7217C53.1169 85.5723 53.2235 85.4603 53.2769 85.3857C53.3729 85.247 53.4475 85.167 53.5009 85.1457C53.5542 85.1137 53.6395 85.0977 53.7569 85.0977H54.5249C54.6315 85.0977 54.7169 85.1297 54.7809 85.1937C54.8555 85.247 54.8875 85.327 54.8769 85.4337C54.8662 85.5937 54.7809 85.791 54.6209 86.0257C54.4609 86.2497 54.2315 86.4737 53.9329 86.6977C53.6342 86.9217 53.2715 87.1083 52.8449 87.2577C52.4182 87.3963 51.9275 87.4657 51.3729 87.4657ZM49.1969 82.5377H53.5809V82.4897C53.5809 82.0097 53.4902 81.583 53.3089 81.2097C53.1382 80.8363 52.8875 80.543 52.5569 80.3297C52.2262 80.1057 51.8315 79.9937 51.3729 79.9937C50.9142 79.9937 50.5195 80.1057 50.1889 80.3297C49.8689 80.543 49.6235 80.8363 49.4529 81.2097C49.2822 81.583 49.1969 82.0097 49.1969 82.4897V82.5377ZM61.199 87.3057C61.0923 87.3057 61.0017 87.2737 60.927 87.2097C60.863 87.135 60.831 87.0443 60.831 86.9377V80.2657H59.471C59.3643 80.2657 59.2737 80.2337 59.199 80.1697C59.135 80.095 59.103 80.0043 59.103 79.8977V79.3537C59.103 79.247 59.135 79.1617 59.199 79.0977C59.2737 79.023 59.3643 78.9857 59.471 78.9857H60.831V78.1857C60.831 77.6417 60.9217 77.167 61.103 76.7617C61.2843 76.3457 61.5723 76.0257 61.967 75.8017C62.3723 75.5777 62.911 75.4657 63.583 75.4657H64.543C64.6497 75.4657 64.735 75.503 64.799 75.5777C64.863 75.6417 64.895 75.727 64.895 75.8337V76.3777C64.895 76.4843 64.863 76.575 64.799 76.6497C64.735 76.7137 64.6497 76.7457 64.543 76.7457H63.615C63.1137 76.7457 62.7723 76.879 62.591 77.1457C62.4097 77.4017 62.319 77.775 62.319 78.2657V78.9857H64.383C64.4897 78.9857 64.575 79.023 64.639 79.0977C64.703 79.1617 64.735 79.247 64.735 79.3537V79.8977C64.735 80.0043 64.703 80.095 64.639 80.1697C64.575 80.2337 64.4897 80.2657 64.383 80.2657H62.319V86.9377C62.319 87.0443 62.2817 87.135 62.207 87.2097C62.143 87.2737 62.0577 87.3057 61.951 87.3057H61.199ZM69.087 87.4657C68.2763 87.4657 67.599 87.311 67.055 87.0017C66.511 86.6923 66.095 86.2657 65.807 85.7217C65.519 85.167 65.359 84.5377 65.327 83.8337C65.3163 83.6523 65.311 83.423 65.311 83.1457C65.311 82.8577 65.3163 82.6283 65.327 82.4577C65.359 81.743 65.519 81.1137 65.807 80.5697C66.1057 80.0257 66.527 79.599 67.071 79.2897C67.615 78.9803 68.287 78.8257 69.087 78.8257C69.887 78.8257 70.559 78.9803 71.103 79.2897C71.647 79.599 72.063 80.0257 72.351 80.5697C72.6497 81.1137 72.815 81.743 72.847 82.4577C72.8577 82.6283 72.863 82.8577 72.863 83.1457C72.863 83.423 72.8577 83.6523 72.847 83.8337C72.815 84.5377 72.655 85.167 72.367 85.7217C72.079 86.2657 71.663 86.6923 71.119 87.0017C70.575 87.311 69.8977 87.4657 69.087 87.4657ZM69.087 86.2337C69.7483 86.2337 70.2763 86.0257 70.671 85.6097C71.0657 85.183 71.279 84.5643 71.311 83.7537C71.3217 83.5937 71.327 83.391 71.327 83.1457C71.327 82.9003 71.3217 82.6977 71.311 82.5377C71.279 81.727 71.0657 81.1137 70.671 80.6977C70.2763 80.271 69.7483 80.0577 69.087 80.0577C68.4257 80.0577 67.8923 80.271 67.487 80.6977C67.0923 81.1137 66.8843 81.727 66.863 82.5377C66.8523 82.6977 66.847 82.9003 66.847 83.1457C66.847 83.391 66.8523 83.5937 66.863 83.7537C66.8843 84.5643 67.0923 85.183 67.487 85.6097C67.8923 86.0257 68.4257 86.2337 69.087 86.2337ZM77.9065 87.4657C77.1492 87.4657 76.4932 87.3217 75.9385 87.0337C75.3945 86.735 74.9732 86.3137 74.6745 85.7697C74.3758 85.215 74.2158 84.5537 74.1945 83.7857C74.1838 83.6257 74.1785 83.4123 74.1785 83.1457C74.1785 82.879 74.1838 82.6657 74.1945 82.5057C74.2158 81.7377 74.3758 81.0817 74.6745 80.5377C74.9732 79.983 75.3945 79.5617 75.9385 79.2737C76.4932 78.975 77.1492 78.8257 77.9065 78.8257C78.5252 78.8257 79.0532 78.911 79.4905 79.0817C79.9385 79.2523 80.3065 79.471 80.5945 79.7377C80.8825 80.0043 81.0958 80.2923 81.2345 80.6017C81.3838 80.911 81.4638 81.2043 81.4745 81.4817C81.4852 81.5883 81.4532 81.6737 81.3785 81.7377C81.3038 81.8017 81.2132 81.8337 81.1065 81.8337H80.3385C80.2318 81.8337 80.1518 81.8123 80.0985 81.7697C80.0452 81.7163 79.9918 81.631 79.9385 81.5137C79.7465 80.991 79.4852 80.623 79.1545 80.4097C78.8238 80.1963 78.4132 80.0897 77.9225 80.0897C77.2825 80.0897 76.7598 80.287 76.3545 80.6817C75.9598 81.0763 75.7465 81.711 75.7145 82.5857C75.7038 82.9697 75.7038 83.343 75.7145 83.7057C75.7465 84.591 75.9598 85.231 76.3545 85.6257C76.7598 86.0097 77.2825 86.2017 77.9225 86.2017C78.4132 86.2017 78.8238 86.095 79.1545 85.8817C79.4852 85.6683 79.7465 85.3003 79.9385 84.7777C79.9918 84.6603 80.0452 84.5803 80.0985 84.5377C80.1518 84.4843 80.2318 84.4577 80.3385 84.4577H81.1065C81.2132 84.4577 81.3038 84.4897 81.3785 84.5537C81.4532 84.6177 81.4852 84.703 81.4745 84.8097C81.4638 85.0337 81.4158 85.263 81.3305 85.4977C81.2452 85.7323 81.1065 85.9723 80.9145 86.2177C80.7332 86.4523 80.5038 86.6657 80.2265 86.8577C79.9492 87.039 79.6132 87.1883 79.2185 87.3057C78.8345 87.4123 78.3972 87.4657 77.9065 87.4657ZM86.1586 87.4657C85.476 87.4657 84.8946 87.3163 84.4146 87.0177C83.9453 86.7083 83.588 86.2817 83.3426 85.7377C83.0973 85.1937 82.9746 84.5697 82.9746 83.8657V79.3537C82.9746 79.247 83.0066 79.1617 83.0706 79.0977C83.1453 79.023 83.236 78.9857 83.3426 78.9857H84.1426C84.2493 78.9857 84.3346 79.023 84.3986 79.0977C84.4733 79.1617 84.5106 79.247 84.5106 79.3537V83.7857C84.5106 85.375 85.204 86.1697 86.5906 86.1697C87.252 86.1697 87.78 85.9617 88.1746 85.5457C88.58 85.119 88.7826 84.5323 88.7826 83.7857V79.3537C88.7826 79.247 88.8146 79.1617 88.8786 79.0977C88.9533 79.023 89.044 78.9857 89.1506 78.9857H89.9346C90.052 78.9857 90.1426 79.023 90.2066 79.0977C90.2706 79.1617 90.3026 79.247 90.3026 79.3537V86.9377C90.3026 87.0443 90.2706 87.135 90.2066 87.2097C90.1426 87.2737 90.052 87.3057 89.9346 87.3057H89.1986C89.092 87.3057 89.0013 87.2737 88.9266 87.2097C88.8626 87.135 88.8306 87.0443 88.8306 86.9377V86.2337C88.5426 86.607 88.1906 86.9057 87.7746 87.1297C87.3693 87.3537 86.8306 87.4657 86.1586 87.4657ZM95.2396 87.4657C94.6423 87.4657 94.1303 87.391 93.7036 87.2417C93.277 87.0923 92.9303 86.911 92.6636 86.6977C92.397 86.4843 92.1943 86.271 92.0556 86.0577C91.9276 85.8443 91.8583 85.6737 91.8476 85.5457C91.837 85.4283 91.8743 85.3377 91.9596 85.2737C92.045 85.2097 92.1303 85.1777 92.2156 85.1777H92.9196C92.9836 85.1777 93.0316 85.1883 93.0636 85.2097C93.1063 85.2203 93.1596 85.263 93.2236 85.3377C93.3623 85.487 93.517 85.6363 93.6876 85.7857C93.8583 85.935 94.0663 86.0577 94.3116 86.1537C94.5676 86.2497 94.8823 86.2977 95.2556 86.2977C95.7996 86.2977 96.2476 86.1963 96.5996 85.9937C96.9516 85.7803 97.1276 85.471 97.1276 85.0657C97.1276 84.799 97.053 84.5857 96.9036 84.4257C96.765 84.2657 96.509 84.1217 96.1356 83.9937C95.773 83.8657 95.2716 83.7323 94.6316 83.5937C93.9916 83.4443 93.485 83.263 93.1116 83.0497C92.7383 82.8257 92.4716 82.5643 92.3116 82.2657C92.1516 81.9563 92.0716 81.6097 92.0716 81.2257C92.0716 80.831 92.189 80.4523 92.4236 80.0897C92.6583 79.7163 92.9996 79.4123 93.4476 79.1777C93.9063 78.943 94.477 78.8257 95.1596 78.8257C95.7143 78.8257 96.189 78.895 96.5836 79.0337C96.9783 79.1723 97.3036 79.3483 97.5596 79.5617C97.8156 79.7643 98.0076 79.967 98.1356 80.1697C98.2636 80.3723 98.333 80.543 98.3436 80.6817C98.3543 80.7883 98.3223 80.879 98.2476 80.9537C98.173 81.0177 98.0876 81.0497 97.9916 81.0497H97.3196C97.245 81.0497 97.181 81.0337 97.1276 81.0017C97.085 80.9697 97.0423 80.9323 96.9996 80.8897C96.893 80.751 96.765 80.6123 96.6156 80.4737C96.477 80.335 96.2903 80.223 96.0556 80.1377C95.8316 80.0417 95.533 79.9937 95.1596 79.9937C94.6263 79.9937 94.2263 80.1057 93.9596 80.3297C93.693 80.5537 93.5596 80.8363 93.5596 81.1777C93.5596 81.3803 93.6183 81.5617 93.7356 81.7217C93.853 81.8817 94.077 82.0257 94.4076 82.1537C94.7383 82.2817 95.229 82.4203 95.8796 82.5697C96.5836 82.7083 97.1383 82.895 97.5436 83.1297C97.949 83.3643 98.237 83.6363 98.4076 83.9457C98.5783 84.255 98.6636 84.6123 98.6636 85.0177C98.6636 85.4657 98.5303 85.8763 98.2636 86.2497C98.0076 86.623 97.6236 86.9217 97.1116 87.1457C96.6103 87.359 95.9863 87.4657 95.2396 87.4657ZM106.118 87.4657C105.584 87.4657 105.099 87.359 104.662 87.1457C104.224 86.9323 103.872 86.6443 103.606 86.2817C103.339 85.919 103.206 85.5083 103.206 85.0497C103.206 84.3137 103.504 83.727 104.102 83.2897C104.699 82.8523 105.478 82.5643 106.438 82.4257L108.822 82.0897V81.6257C108.822 81.1137 108.672 80.7137 108.374 80.4257C108.086 80.1377 107.611 79.9937 106.95 79.9937C106.47 79.9937 106.08 80.0897 105.782 80.2817C105.494 80.4737 105.291 80.719 105.174 81.0177C105.11 81.1777 104.998 81.2577 104.838 81.2577H104.118C104 81.2577 103.91 81.2257 103.846 81.1617C103.792 81.087 103.766 81.0017 103.766 80.9057C103.766 80.7457 103.824 80.5483 103.942 80.3137C104.07 80.079 104.262 79.8497 104.518 79.6257C104.774 79.4017 105.099 79.215 105.494 79.0657C105.899 78.9057 106.39 78.8257 106.966 78.8257C107.606 78.8257 108.144 78.911 108.582 79.0817C109.019 79.2417 109.36 79.4603 109.606 79.7377C109.862 80.015 110.043 80.3297 110.15 80.6817C110.267 81.0337 110.326 81.391 110.326 81.7537V86.9377C110.326 87.0443 110.288 87.135 110.214 87.2097C110.15 87.2737 110.064 87.3057 109.958 87.3057H109.222C109.104 87.3057 109.014 87.2737 108.95 87.2097C108.886 87.135 108.854 87.0443 108.854 86.9377V86.2497C108.715 86.4417 108.528 86.6337 108.294 86.8257C108.059 87.007 107.766 87.1617 107.414 87.2897C107.062 87.407 106.63 87.4657 106.118 87.4657ZM106.454 86.2657C106.891 86.2657 107.291 86.175 107.654 85.9937C108.016 85.8017 108.299 85.5083 108.502 85.1137C108.715 84.719 108.822 84.223 108.822 83.6257V83.1777L106.966 83.4497C106.208 83.5563 105.638 83.7377 105.254 83.9937C104.87 84.239 104.678 84.5537 104.678 84.9377C104.678 85.2363 104.763 85.487 104.934 85.6897C105.115 85.8817 105.339 86.0257 105.606 86.1217C105.883 86.2177 106.166 86.2657 106.454 86.2657ZM112.674 87.3057C112.567 87.3057 112.477 87.2737 112.402 87.2097C112.338 87.135 112.306 87.0443 112.306 86.9377V79.3537C112.306 79.247 112.338 79.1617 112.402 79.0977C112.477 79.023 112.567 78.9857 112.674 78.9857H113.426C113.533 78.9857 113.618 79.023 113.682 79.0977C113.757 79.1617 113.794 79.247 113.794 79.3537V80.0577C114.071 79.695 114.418 79.4017 114.834 79.1777C115.261 78.943 115.805 78.8257 116.466 78.8257C117.159 78.8257 117.746 78.9803 118.226 79.2897C118.717 79.5883 119.085 80.0097 119.33 80.5537C119.575 81.087 119.698 81.711 119.698 82.4257V86.9377C119.698 87.0443 119.666 87.135 119.602 87.2097C119.538 87.2737 119.453 87.3057 119.346 87.3057H118.546C118.439 87.3057 118.349 87.2737 118.274 87.2097C118.21 87.135 118.178 87.0443 118.178 86.9377V82.5057C118.178 81.759 117.997 81.1777 117.634 80.7617C117.271 80.335 116.738 80.1217 116.034 80.1217C115.373 80.1217 114.839 80.335 114.434 80.7617C114.039 81.1777 113.842 81.759 113.842 82.5057V86.9377C113.842 87.0443 113.805 87.135 113.73 87.2097C113.666 87.2737 113.581 87.3057 113.474 87.3057H112.674ZM124.729 87.4657C124.142 87.4657 123.636 87.3643 123.209 87.1617C122.782 86.9483 122.43 86.6657 122.153 86.3137C121.886 85.951 121.684 85.5403 121.545 85.0817C121.417 84.623 121.342 84.1377 121.321 83.6257C121.31 83.455 121.305 83.295 121.305 83.1457C121.305 82.9963 121.31 82.8363 121.321 82.6657C121.342 82.1643 121.417 81.6843 121.545 81.2257C121.684 80.767 121.886 80.3563 122.153 79.9937C122.43 79.631 122.782 79.3483 123.209 79.1457C123.636 78.9323 124.142 78.8257 124.729 78.8257C125.358 78.8257 125.881 78.9377 126.297 79.1617C126.713 79.3857 127.054 79.663 127.321 79.9937V76.3137C127.321 76.207 127.353 76.1217 127.417 76.0577C127.492 75.983 127.582 75.9457 127.689 75.9457H128.457C128.564 75.9457 128.649 75.983 128.713 76.0577C128.788 76.1217 128.825 76.207 128.825 76.3137V86.9377C128.825 87.0443 128.788 87.135 128.713 87.2097C128.649 87.2737 128.564 87.3057 128.457 87.3057H127.737C127.62 87.3057 127.529 87.2737 127.465 87.2097C127.401 87.135 127.369 87.0443 127.369 86.9377V86.2657C127.102 86.607 126.756 86.895 126.329 87.1297C125.902 87.3537 125.369 87.4657 124.729 87.4657ZM125.065 86.1697C125.598 86.1697 126.025 86.047 126.345 85.8017C126.665 85.5563 126.905 85.247 127.065 84.8737C127.225 84.4897 127.31 84.1003 127.321 83.7057C127.332 83.535 127.337 83.3323 127.337 83.0977C127.337 82.8523 127.332 82.6443 127.321 82.4737C127.31 82.1003 127.22 81.7323 127.049 81.3697C126.889 81.007 126.644 80.7083 126.313 80.4737C125.993 80.239 125.577 80.1217 125.065 80.1217C124.521 80.1217 124.089 80.2443 123.769 80.4897C123.449 80.7243 123.22 81.039 123.081 81.4337C122.942 81.8177 122.862 82.2337 122.841 82.6817C122.83 82.991 122.83 83.3003 122.841 83.6097C122.862 84.0577 122.942 84.479 123.081 84.8737C123.22 85.2577 123.449 85.5723 123.769 85.8177C124.089 86.0523 124.521 86.1697 125.065 86.1697ZM4.004 107.466C3.47067 107.466 2.98533 107.359 2.548 107.146C2.11067 106.932 1.75867 106.644 1.492 106.282C1.22533 105.919 1.092 105.508 1.092 105.05C1.092 104.314 1.39067 103.727 1.988 103.29C2.58533 102.852 3.364 102.564 4.324 102.426L6.708 102.09V101.626C6.708 101.114 6.55867 100.714 6.26 100.426C5.972 100.138 5.49733 99.9937 4.836 99.9937C4.356 99.9937 3.96667 100.09 3.668 100.282C3.38 100.474 3.17733 100.719 3.06 101.018C2.996 101.178 2.884 101.258 2.724 101.258H2.004C1.88667 101.258 1.796 101.226 1.732 101.162C1.67867 101.087 1.652 101.002 1.652 100.906C1.652 100.746 1.71067 100.548 1.828 100.314C1.956 100.079 2.148 99.8497 2.404 99.6257C2.66 99.4017 2.98533 99.215 3.38 99.0657C3.78533 98.9057 4.276 98.8257 4.852 98.8257C5.492 98.8257 6.03067 98.911 6.468 99.0817C6.90533 99.2417 7.24667 99.4603 7.492 99.7377C7.748 100.015 7.92933 100.33 8.036 100.682C8.15333 101.034 8.212 101.391 8.212 101.754V106.938C8.212 107.044 8.17467 107.135 8.1 107.21C8.036 107.274 7.95067 107.306 7.844 107.306H7.108C6.99067 107.306 6.9 107.274 6.836 107.21C6.772 107.135 6.74 107.044 6.74 106.938V106.25C6.60133 106.442 6.41467 106.634 6.18 106.826C5.94533 107.007 5.652 107.162 5.3 107.29C4.948 107.407 4.516 107.466 4.004 107.466ZM4.34 106.266C4.77733 106.266 5.17733 106.175 5.54 105.994C5.90267 105.802 6.18533 105.508 6.388 105.114C6.60133 104.719 6.708 104.223 6.708 103.626V103.178L4.852 103.45C4.09467 103.556 3.524 103.738 3.14 103.994C2.756 104.239 2.564 104.554 2.564 104.938C2.564 105.236 2.64933 105.487 2.82 105.69C3.00133 105.882 3.22533 106.026 3.492 106.122C3.76933 106.218 4.052 106.266 4.34 106.266ZM13.362 107.306C12.7647 107.306 12.2793 107.194 11.906 106.97C11.5327 106.735 11.2607 106.41 11.09 105.994C10.9193 105.567 10.834 105.066 10.834 104.49V100.266H9.586C9.47933 100.266 9.38867 100.234 9.314 100.17C9.25 100.095 9.218 100.004 9.218 99.8977V99.3537C9.218 99.247 9.25 99.1617 9.314 99.0977C9.38867 99.023 9.47933 98.9857 9.586 98.9857H10.834V96.3137C10.834 96.207 10.866 96.1217 10.93 96.0577C11.0047 95.983 11.0953 95.9457 11.202 95.9457H11.954C12.0607 95.9457 12.146 95.983 12.21 96.0577C12.2847 96.1217 12.322 96.207 12.322 96.3137V98.9857H14.306C14.4127 98.9857 14.498 99.023 14.562 99.0977C14.6367 99.1617 14.674 99.247 14.674 99.3537V99.8977C14.674 100.004 14.6367 100.095 14.562 100.17C14.498 100.234 14.4127 100.266 14.306 100.266H12.322V104.378C12.322 104.879 12.4073 105.274 12.578 105.562C12.7487 105.85 13.0527 105.994 13.49 105.994H14.466C14.5727 105.994 14.658 106.031 14.722 106.106C14.7967 106.17 14.834 106.255 14.834 106.362V106.938C14.834 107.044 14.7967 107.135 14.722 107.21C14.658 107.274 14.5727 107.306 14.466 107.306H13.362ZM16.428 107.306C16.3213 107.306 16.2307 107.274 16.156 107.21C16.092 107.135 16.06 107.044 16.06 106.938V96.3137C16.06 96.207 16.092 96.1217 16.156 96.0577C16.2307 95.983 16.3213 95.9457 16.428 95.9457H17.228C17.3453 95.9457 17.436 95.983 17.5 96.0577C17.564 96.1217 17.596 96.207 17.596 96.3137V100.042C17.884 99.679 18.236 99.3857 18.652 99.1617C19.068 98.9377 19.596 98.8257 20.236 98.8257C20.9293 98.8257 21.516 98.9803 21.996 99.2897C22.4867 99.5883 22.8547 100.01 23.1 100.554C23.356 101.087 23.484 101.711 23.484 102.426V106.938C23.484 107.044 23.452 107.135 23.388 107.21C23.324 107.274 23.2333 107.306 23.116 107.306H22.316C22.2093 107.306 22.1187 107.274 22.044 107.21C21.98 107.135 21.948 107.044 21.948 106.938V102.506C21.948 101.759 21.7667 101.178 21.404 100.762C21.0413 100.335 20.508 100.122 19.804 100.122C19.1427 100.122 18.6093 100.335 18.204 100.762C17.7987 101.178 17.596 101.759 17.596 102.506V106.938C17.596 107.044 17.564 107.135 17.5 107.21C17.436 107.274 17.3453 107.306 17.228 107.306H16.428ZM25.858 107.306C25.7513 107.306 25.6607 107.274 25.586 107.21C25.522 107.135 25.49 107.044 25.49 106.938V96.3137C25.49 96.207 25.522 96.1217 25.586 96.0577C25.6607 95.983 25.7513 95.9457 25.858 95.9457H26.61C26.7273 95.9457 26.818 95.983 26.882 96.0577C26.946 96.1217 26.978 96.207 26.978 96.3137V106.938C26.978 107.044 26.946 107.135 26.882 107.21C26.818 107.274 26.7273 107.306 26.61 107.306H25.858ZM32.3566 107.466C31.258 107.466 30.3833 107.13 29.7326 106.458C29.082 105.775 28.7246 104.847 28.6606 103.674C28.65 103.535 28.6446 103.359 28.6446 103.146C28.6446 102.922 28.65 102.74 28.6606 102.602C28.7033 101.844 28.8793 101.183 29.1886 100.618C29.498 100.042 29.9193 99.599 30.4526 99.2897C30.9966 98.9803 31.6313 98.8257 32.3566 98.8257C33.1673 98.8257 33.8446 98.9963 34.3886 99.3377C34.9433 99.679 35.3646 100.164 35.6526 100.794C35.9406 101.423 36.0846 102.159 36.0846 103.002V103.274C36.0846 103.391 36.0473 103.482 35.9726 103.546C35.9086 103.61 35.8233 103.642 35.7166 103.642H30.1806C30.1806 103.652 30.1806 103.674 30.1806 103.706C30.1806 103.738 30.1806 103.764 30.1806 103.786C30.202 104.223 30.298 104.634 30.4686 105.018C30.6393 105.391 30.8846 105.695 31.2046 105.93C31.5246 106.164 31.9086 106.282 32.3566 106.282C32.7406 106.282 33.0606 106.223 33.3166 106.106C33.5726 105.988 33.7806 105.86 33.9406 105.722C34.1006 105.572 34.2073 105.46 34.2606 105.386C34.3566 105.247 34.4313 105.167 34.4846 105.146C34.538 105.114 34.6233 105.098 34.7406 105.098H35.5086C35.6153 105.098 35.7006 105.13 35.7646 105.194C35.8393 105.247 35.8713 105.327 35.8606 105.434C35.85 105.594 35.7646 105.791 35.6046 106.026C35.4446 106.25 35.2153 106.474 34.9166 106.698C34.618 106.922 34.2553 107.108 33.8286 107.258C33.402 107.396 32.9113 107.466 32.3566 107.466ZM30.1806 102.538H34.5646V102.49C34.5646 102.01 34.474 101.583 34.2926 101.21C34.122 100.836 33.8713 100.543 33.5406 100.33C33.21 100.106 32.8153 99.9937 32.3566 99.9937C31.898 99.9937 31.5033 100.106 31.1726 100.33C30.8526 100.543 30.6073 100.836 30.4366 101.21C30.266 101.583 30.1806 102.01 30.1806 102.49V102.538ZM40.8789 107.306C40.2815 107.306 39.7962 107.194 39.4229 106.97C39.0495 106.735 38.7775 106.41 38.6069 105.994C38.4362 105.567 38.3509 105.066 38.3509 104.49V100.266H37.1029C36.9962 100.266 36.9055 100.234 36.8309 100.17C36.7669 100.095 36.7349 100.004 36.7349 99.8977V99.3537C36.7349 99.247 36.7669 99.1617 36.8309 99.0977C36.9055 99.023 36.9962 98.9857 37.1029 98.9857H38.3509V96.3137C38.3509 96.207 38.3829 96.1217 38.4469 96.0577C38.5215 95.983 38.6122 95.9457 38.7189 95.9457H39.4709C39.5775 95.9457 39.6629 95.983 39.7269 96.0577C39.8015 96.1217 39.8389 96.207 39.8389 96.3137V98.9857H41.8229C41.9295 98.9857 42.0149 99.023 42.0789 99.0977C42.1535 99.1617 42.1909 99.247 42.1909 99.3537V99.8977C42.1909 100.004 42.1535 100.095 42.0789 100.17C42.0149 100.234 41.9295 100.266 41.8229 100.266H39.8389V104.378C39.8389 104.879 39.9242 105.274 40.0949 105.562C40.2655 105.85 40.5695 105.994 41.0069 105.994H41.9829C42.0895 105.994 42.1749 106.031 42.2389 106.106C42.3135 106.17 42.3509 106.255 42.3509 106.362V106.938C42.3509 107.044 42.3135 107.135 42.2389 107.21C42.1749 107.274 42.0895 107.306 41.9829 107.306H40.8789ZM43.9289 107.306C43.8222 107.306 43.7315 107.274 43.6569 107.21C43.5929 107.135 43.5609 107.044 43.5609 106.938V99.3537C43.5609 99.247 43.5929 99.1617 43.6569 99.0977C43.7315 99.023 43.8222 98.9857 43.9289 98.9857H44.6969C44.8035 98.9857 44.8889 99.023 44.9529 99.0977C45.0169 99.1617 45.0489 99.247 45.0489 99.3537V106.938C45.0489 107.044 45.0169 107.135 44.9529 107.21C44.8889 107.274 44.8035 107.306 44.6969 107.306H43.9289ZM43.8009 97.4337C43.6942 97.4337 43.6035 97.4017 43.5289 97.3377C43.4649 97.263 43.4329 97.1723 43.4329 97.0657V96.2017C43.4329 96.095 43.4649 96.0097 43.5289 95.9457C43.6035 95.871 43.6942 95.8337 43.8009 95.8337H44.8089C44.9155 95.8337 45.0009 95.871 45.0649 95.9457C45.1395 96.0097 45.1769 96.095 45.1769 96.2017V97.0657C45.1769 97.1723 45.1395 97.263 45.0649 97.3377C45.0009 97.4017 44.9155 97.4337 44.8089 97.4337H43.8009ZM50.4759 107.466C49.7185 107.466 49.0625 107.322 48.5079 107.034C47.9639 106.735 47.5425 106.314 47.2439 105.77C46.9452 105.215 46.7852 104.554 46.7639 103.786C46.7532 103.626 46.7479 103.412 46.7479 103.146C46.7479 102.879 46.7532 102.666 46.7639 102.506C46.7852 101.738 46.9452 101.082 47.2439 100.538C47.5425 99.983 47.9639 99.5617 48.5079 99.2737C49.0625 98.975 49.7185 98.8257 50.4759 98.8257C51.0945 98.8257 51.6225 98.911 52.0599 99.0817C52.5079 99.2523 52.8759 99.471 53.1639 99.7377C53.4519 100.004 53.6652 100.292 53.8039 100.602C53.9532 100.911 54.0332 101.204 54.0439 101.482C54.0545 101.588 54.0225 101.674 53.9479 101.738C53.8732 101.802 53.7825 101.834 53.6759 101.834H52.9079C52.8012 101.834 52.7212 101.812 52.6679 101.77C52.6145 101.716 52.5612 101.631 52.5079 101.514C52.3159 100.991 52.0545 100.623 51.7239 100.41C51.3932 100.196 50.9825 100.09 50.4919 100.09C49.8519 100.09 49.3292 100.287 48.9239 100.682C48.5292 101.076 48.3159 101.711 48.2839 102.586C48.2732 102.97 48.2732 103.343 48.2839 103.706C48.3159 104.591 48.5292 105.231 48.9239 105.626C49.3292 106.01 49.8519 106.202 50.4919 106.202C50.9825 106.202 51.3932 106.095 51.7239 105.882C52.0545 105.668 52.3159 105.3 52.5079 104.778C52.5612 104.66 52.6145 104.58 52.6679 104.538C52.7212 104.484 52.8012 104.458 52.9079 104.458H53.6759C53.7825 104.458 53.8732 104.49 53.9479 104.554C54.0225 104.618 54.0545 104.703 54.0439 104.81C54.0332 105.034 53.9852 105.263 53.8999 105.498C53.8145 105.732 53.6759 105.972 53.4839 106.218C53.3025 106.452 53.0732 106.666 52.7959 106.858C52.5185 107.039 52.1825 107.188 51.7879 107.306C51.4039 107.412 50.9665 107.466 50.4759 107.466ZM55.992 107.306C55.8853 107.306 55.7947 107.274 55.72 107.21C55.656 107.135 55.624 107.044 55.624 106.938V99.3537C55.624 99.247 55.656 99.1617 55.72 99.0977C55.7947 99.023 55.8853 98.9857 55.992 98.9857H56.76C56.8667 98.9857 56.952 99.023 57.016 99.0977C57.08 99.1617 57.112 99.247 57.112 99.3537V106.938C57.112 107.044 57.08 107.135 57.016 107.21C56.952 107.274 56.8667 107.306 56.76 107.306H55.992ZM55.864 97.4337C55.7573 97.4337 55.6667 97.4017 55.592 97.3377C55.528 97.263 55.496 97.1723 55.496 97.0657V96.2017C55.496 96.095 55.528 96.0097 55.592 95.9457C55.6667 95.871 55.7573 95.8337 55.864 95.8337H56.872C56.9787 95.8337 57.064 95.871 57.128 95.9457C57.2027 96.0097 57.24 96.095 57.24 96.2017V97.0657C57.24 97.1723 57.2027 97.263 57.128 97.3377C57.064 97.4017 56.9787 97.4337 56.872 97.4337H55.864ZM62.059 107.466C61.4617 107.466 60.9497 107.391 60.523 107.242C60.0963 107.092 59.7497 106.911 59.483 106.698C59.2163 106.484 59.0137 106.271 58.875 106.058C58.747 105.844 58.6777 105.674 58.667 105.546C58.6563 105.428 58.6937 105.338 58.779 105.274C58.8643 105.21 58.9497 105.178 59.035 105.178H59.739C59.803 105.178 59.851 105.188 59.883 105.21C59.9257 105.22 59.979 105.263 60.043 105.338C60.1817 105.487 60.3363 105.636 60.507 105.786C60.6777 105.935 60.8857 106.058 61.131 106.154C61.387 106.25 61.7017 106.298 62.075 106.298C62.619 106.298 63.067 106.196 63.419 105.994C63.771 105.78 63.947 105.471 63.947 105.066C63.947 104.799 63.8723 104.586 63.723 104.426C63.5843 104.266 63.3283 104.122 62.955 103.994C62.5923 103.866 62.091 103.732 61.451 103.594C60.811 103.444 60.3043 103.263 59.931 103.05C59.5577 102.826 59.291 102.564 59.131 102.266C58.971 101.956 58.891 101.61 58.891 101.226C58.891 100.831 59.0083 100.452 59.243 100.09C59.4777 99.7163 59.819 99.4123 60.267 99.1777C60.7257 98.943 61.2963 98.8257 61.979 98.8257C62.5337 98.8257 63.0083 98.895 63.403 99.0337C63.7977 99.1723 64.123 99.3483 64.379 99.5617C64.635 99.7643 64.827 99.967 64.955 100.17C65.083 100.372 65.1523 100.543 65.163 100.682C65.1737 100.788 65.1417 100.879 65.067 100.954C64.9923 101.018 64.907 101.05 64.811 101.05H64.139C64.0643 101.05 64.0003 101.034 63.947 101.002C63.9043 100.97 63.8617 100.932 63.819 100.89C63.7123 100.751 63.5843 100.612 63.435 100.474C63.2963 100.335 63.1097 100.223 62.875 100.138C62.651 100.042 62.3523 99.9937 61.979 99.9937C61.4457 99.9937 61.0457 100.106 60.779 100.33C60.5123 100.554 60.379 100.836 60.379 101.178C60.379 101.38 60.4377 101.562 60.555 101.722C60.6723 101.882 60.8963 102.026 61.227 102.154C61.5577 102.282 62.0483 102.42 62.699 102.57C63.403 102.708 63.9577 102.895 64.363 103.13C64.7683 103.364 65.0563 103.636 65.227 103.946C65.3977 104.255 65.483 104.612 65.483 105.018C65.483 105.466 65.3497 105.876 65.083 106.25C64.827 106.623 64.443 106.922 63.931 107.146C63.4297 107.359 62.8057 107.466 62.059 107.466ZM67.3833 107.306C67.2766 107.306 67.1859 107.274 67.1113 107.21C67.0473 107.135 67.0153 107.044 67.0153 106.938V99.3537C67.0153 99.247 67.0473 99.1617 67.1113 99.0977C67.1859 99.023 67.2766 98.9857 67.3833 98.9857H68.1033C68.2099 98.9857 68.2953 99.023 68.3593 99.0977C68.4339 99.1617 68.4713 99.247 68.4713 99.3537V99.9137C68.7166 99.583 69.0259 99.3217 69.3993 99.1297C69.7726 98.927 70.2206 98.8257 70.7433 98.8257C71.9486 98.815 72.8019 99.3057 73.3033 100.298C73.5486 99.8497 73.9059 99.4923 74.3753 99.2257C74.8446 98.959 75.3779 98.8257 75.9753 98.8257C76.5299 98.8257 77.0313 98.9537 77.4793 99.2097C77.9379 99.4657 78.2953 99.855 78.5513 100.378C78.8179 100.89 78.9513 101.535 78.9513 102.314V106.938C78.9513 107.044 78.9139 107.135 78.8393 107.21C78.7753 107.274 78.6899 107.306 78.5833 107.306H77.8313C77.7246 107.306 77.6339 107.274 77.5593 107.21C77.4953 107.135 77.4633 107.044 77.4633 106.938V102.458C77.4633 101.86 77.3779 101.391 77.2073 101.05C77.0366 100.708 76.8073 100.468 76.5193 100.33C76.2313 100.191 75.9166 100.122 75.5753 100.122C75.2979 100.122 75.0153 100.191 74.7273 100.33C74.4393 100.468 74.1993 100.708 74.0073 101.05C73.8259 101.391 73.7353 101.86 73.7353 102.458V106.938C73.7353 107.044 73.6979 107.135 73.6233 107.21C73.5593 107.274 73.4739 107.306 73.3673 107.306H72.6153C72.5086 107.306 72.4179 107.274 72.3433 107.21C72.2793 107.135 72.2473 107.044 72.2473 106.938V102.458C72.2473 101.86 72.1566 101.391 71.9753 101.05C71.7939 100.708 71.5593 100.468 71.2713 100.33C70.9833 100.191 70.6793 100.122 70.3593 100.122C70.0819 100.122 69.7993 100.191 69.5113 100.33C69.2233 100.468 68.9833 100.708 68.7913 101.05C68.6099 101.391 68.5193 101.855 68.5193 102.442V106.938C68.5193 107.044 68.4819 107.135 68.4073 107.21C68.3433 107.274 68.2579 107.306 68.1513 107.306H67.3833Z",fill:"#36342C",id:"path3"})))}const ue=e.forwardRef(ce);i.p;var he,de,pe,fe,me,ge,ye,_e,ve,xe,Ce,we,be;const Se=["title","titleId"];function Le(){return Le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)({}).hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e},Le.apply(null,arguments)}function Te(t,i){let{title:r,titleId:n}=t,o=function(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}(t,Se);return e.createElement("svg",Le({width:253,height:64,viewBox:"0 0 253 64",fill:"none",xmlns:"http://www.w3.org/2000/svg",ref:i,"aria-labelledby":n},o),r?e.createElement("title",{id:n},r):null,he||(he=e.createElement("path",{d:"M3.81234 38.9215C3.68191 38.9283 3.57302 38.8924 3.48567 38.8137C3.39832 38.7351 3.35123 38.6306 3.3444 38.5001L2.73853 26.9395C2.73169 26.8091 2.7676 26.7002 2.84625 26.6128C2.9249 26.5255 3.02944 26.4784 3.15987 26.4716L8.44219 26.1947C9.42632 26.1431 10.2401 26.2432 10.8834 26.4948C11.5267 26.7464 12.0103 27.1254 12.3341 27.6315C12.6697 28.1371 12.8558 28.7396 12.8925 29.4392C12.9155 29.8779 12.8527 30.2676 12.7041 30.6083C12.5673 30.9484 12.386 31.2314 12.16 31.4572C11.9459 31.6825 11.735 31.854 11.5271 31.9719C12.0007 32.1611 12.4225 32.4957 12.7925 32.9757C13.1737 33.4432 13.382 34.0148 13.4174 34.6907C13.4565 35.4377 13.3247 36.0985 13.0219 36.6732C12.7191 37.2479 12.2497 37.7065 11.6138 38.0489C10.9778 38.3914 10.1914 38.5872 9.25473 38.6362L3.81234 38.9215ZM6.08655 36.7157L8.80775 36.573C9.38874 36.5426 9.81906 36.3595 10.0987 36.0239C10.3777 35.6763 10.5054 35.2773 10.4818 34.8267C10.4576 34.3643 10.2833 33.987 9.95882 33.6949C9.64562 33.3903 9.20445 33.2529 8.63531 33.2827L5.91411 33.4253L6.08655 36.7157ZM5.80692 31.38L8.36804 31.2458C8.92533 31.2165 9.33318 31.0584 9.5916 30.7714C9.86125 30.472 9.98458 30.1029 9.96159 29.6641C9.9386 29.2254 9.77798 28.8831 9.47974 28.6372C9.19274 28.3788 8.7706 28.2641 8.21332 28.2933L5.65219 28.4276L5.80692 31.38ZM15.6453 38.3013C15.5149 38.3082 15.406 38.2723 15.3186 38.1936C15.2313 38.115 15.1842 38.0104 15.1774 37.88L14.5715 26.3194C14.5647 26.1889 14.6006 26.08 14.6792 25.9927C14.7579 25.9053 14.8624 25.8583 14.9928 25.8514L17.0026 25.7461C17.133 25.7393 17.2419 25.7752 17.3293 25.8538C17.4166 25.9325 17.4637 26.037 17.4706 26.1674L18.0764 37.7281C18.0833 37.8585 18.0473 37.9674 17.9687 38.0547C17.89 38.1421 17.7855 38.1892 17.6551 38.196L15.6453 38.3013ZM20.635 38.0398C20.5046 38.0467 20.3957 38.0108 20.3083 37.9321C20.221 37.8535 20.1739 37.7489 20.1671 37.6185L19.5612 26.0579C19.5544 25.9274 19.5903 25.8185 19.6689 25.7312C19.7476 25.6438 19.8521 25.5968 19.9825 25.5899L21.8678 25.4911C21.9982 25.4843 22.1071 25.5202 22.1945 25.5988C22.2818 25.6775 22.3289 25.782 22.3357 25.9125L22.5483 29.9676L25.994 25.6137C26.0377 25.5401 26.111 25.4649 26.214 25.3882C26.3282 25.299 26.4802 25.2494 26.6699 25.2395L28.822 25.1267C28.9287 25.1211 29.0198 25.1579 29.0953 25.2372C29.1701 25.3046 29.2101 25.3857 29.215 25.4806C29.2194 25.5636 29.1994 25.636 29.1551 25.6977L24.8657 31.3085L30.084 36.9561C30.1339 37.001 30.1613 37.0709 30.1663 37.1658C30.1713 37.2607 30.1403 37.3514 30.0736 37.4382C30.0061 37.513 29.9191 37.5533 29.8124 37.5589L27.5892 37.6754C27.3757 37.6866 27.2132 37.6475 27.1015 37.5583C26.9898 37.469 26.9152 37.4075 26.8778 37.3738L22.7086 33.0267L22.9416 37.4731C22.9484 37.6035 22.9125 37.7124 22.8339 37.7998C22.7552 37.8871 22.6507 37.9342 22.5203 37.941L20.635 38.0398ZM31.6169 37.4643C31.4865 37.4711 31.3776 37.4352 31.2902 37.3566C31.2029 37.2779 31.1558 37.1734 31.149 37.043L30.5431 25.4823C30.5363 25.3519 30.5722 25.243 30.6508 25.1557C30.7295 25.0683 30.834 25.0212 30.9644 25.0144L39.0213 24.5921C39.1517 24.5853 39.2606 24.6212 39.348 24.6999C39.4353 24.7785 39.4824 24.8831 39.4892 25.0135L39.5638 26.4363C39.57 26.5549 39.5338 26.6579 39.4552 26.7452C39.3765 26.8326 39.272 26.8796 39.1415 26.8865L33.379 27.1885L33.5254 29.9808L38.8966 29.6993C39.027 29.6925 39.1359 29.7284 39.2233 29.807C39.3106 29.8857 39.3577 29.9902 39.3645 30.1207L39.4335 31.4368C39.4397 31.5554 39.4035 31.6583 39.3249 31.7457C39.2462 31.833 39.1417 31.8801 39.0112 31.887L33.64 32.1684L33.791 35.0497L39.6958 34.7403C39.8262 34.7334 39.9351 34.7693 40.0225 34.848C40.1098 34.9266 40.1569 35.0312 40.1638 35.1616L40.2374 36.5667C40.2442 36.6971 40.2083 36.806 40.1297 36.8933C40.051 36.9807 39.9465 37.0278 39.8161 37.0346L31.6169 37.4643Z",fill:"#36342C"})),de||(de=e.createElement("path",{d:"M56.7683 36.8577L63.8939 31.8909C64.3578 31.5675 63.9849 30.8605 63.4462 31.0421L57.1246 33.1727C56.686 33.3206 56.1994 33.1869 55.9039 32.8373L54.9877 31.7534C54.6638 31.3701 54.1151 31.2504 53.6551 31.4625L45.4482 35.2459C44.8145 35.5381 44.6116 36.3231 45.0273 36.8742L46.3627 38.6445C46.7138 39.11 47.3764 39.2255 47.8705 38.9073L53.0813 35.5525C53.5668 35.2399 54.2167 35.3452 54.5729 35.7943L55.2427 36.6386C55.6087 37.0999 56.282 37.1966 56.7683 36.8577Z",fill:"#36342C"})),pe||(pe=e.createElement("path",{d:"M57.0377 30.1375L61.993 29.9815C62.5821 29.9629 62.6486 29.1334 62.0697 29.0254L57.4922 28.1717C57.1605 28.1098 56.8755 27.9041 56.7175 27.6125L55.2065 24.8238C54.9311 24.3155 54.2981 24.1047 53.7624 24.3429L53.7035 24.3691C53.0563 24.6569 52.8476 25.4559 53.2746 26.0116L56.1122 29.7037C56.3299 29.9871 56.6753 30.1489 57.0377 30.1375Z",fill:"#36342C"})),fe||(fe=e.createElement("rect",{width:3.59788,height:6.59089,rx:1.79894,transform:"matrix(-0.965926 0.258819 0.258819 0.965926 87.6289 28.8916)",fill:"#F8F8F8",stroke:"#36342C",strokeWidth:2.20779})),me||(me=e.createElement("path",{d:"M83.6962 38.5774L84.0193 38.4922C85.024 38.2273 85.708 37.2977 85.662 36.2597L85.4799 32.1508L85.6958 28.1288C85.7248 27.5882 85.5542 27.0558 85.2163 26.6327L83.1632 24.062C82.6606 23.4328 81.8553 23.1271 81.0618 23.2643L73.723 24.5336C73.502 24.5719 73.2881 24.6436 73.0887 24.7462L68.9347 26.8849C68.2891 27.2173 67.8482 27.8458 67.7556 28.566L67.2718 32.3244C67.2351 32.6098 67.2545 32.8997 67.329 33.1776L67.983 35.6186L68.722 38.3766C69.013 39.4624 70.1291 40.1068 71.215 39.8159C72.3008 39.5249 72.9452 38.4088 72.6543 37.3229L72.9184 38.3086C73.2093 39.3944 74.3255 40.0388 75.4113 39.7479C76.4972 39.4569 77.1416 38.3408 76.8507 37.2549L76.9374 37.5785C77.2283 38.6644 78.3444 39.3088 79.4303 39.0178C80.5162 38.7268 80.9658 36.8838 80.6748 35.7979L81.0007 37.014C81.3154 38.1885 82.5205 38.8875 83.6962 38.5774Z",fill:"#F8F8F8"})),ge||(ge=e.createElement("path",{d:"M84.0193 38.4922L84.3008 39.5596L84.3008 39.5596L84.0193 38.4922ZM83.6962 38.5774L83.9777 39.6448L83.6962 38.5774ZM80.8461 32.1719C80.6883 31.5831 80.083 31.2336 79.4941 31.3914C78.9052 31.5492 78.5557 32.1545 78.7135 32.7434L80.8461 32.1719ZM85.2163 26.6327L86.0788 25.9438L86.0788 25.9438L85.2163 26.6327ZM83.1632 24.062L82.3006 24.7509L82.3006 24.7509L83.1632 24.062ZM67.7556 28.566L66.6607 28.4251L66.6607 28.4251L67.7556 28.566ZM67.2718 32.3244L66.1769 32.1834L66.1769 32.1834L67.2718 32.3244ZM76.9138 33.2256C76.756 32.6367 76.1507 32.2872 75.5618 32.445C74.973 32.6028 74.6235 33.2081 74.7813 33.797L76.9138 33.2256ZM72.9816 34.2792C72.8238 33.6903 72.2185 33.3409 71.6296 33.4987C71.0407 33.6565 70.6912 34.2618 70.849 34.8507L72.9816 34.2792ZM67.983 35.6186L69.0493 35.3329L69.0493 35.3329L67.983 35.6186ZM67.329 33.1776L66.2627 33.4633L66.2627 33.4633L67.329 33.1776ZM81.0618 23.2643L80.8736 22.1766L80.8736 22.1766L81.0618 23.2643ZM73.723 24.5336L73.5349 23.4459L73.723 24.5336ZM73.0887 24.7462L72.5834 23.7648L72.5834 23.7648L73.0887 24.7462ZM68.9347 26.8849L68.4294 25.9034L68.4294 25.9034L68.9347 26.8849ZM85.6958 28.1288L86.7981 28.188L86.7981 28.188L85.6958 28.1288ZM85.4799 32.1508L84.3776 32.0916L84.3747 32.1457L84.3771 32.1997L85.4799 32.1508ZM85.662 36.2597L86.7648 36.2108L85.662 36.2597ZM83.7379 37.4248L83.4147 37.51L83.9777 39.6448L84.3008 39.5596L83.7379 37.4248ZM82.067 36.7283L81.7411 35.5122L79.6085 36.0836L79.9344 37.2997L82.067 36.7283ZM81.7411 35.5122L80.8461 32.1719L78.7135 32.7434L79.6085 36.0836L81.7411 35.5122ZM86.0788 25.9438L84.0257 23.3731L82.3006 24.7509L84.3537 27.3216L86.0788 25.9438ZM66.6607 28.4251L66.1769 32.1834L68.3667 32.4653L68.8504 28.7069L66.6607 28.4251ZM78.0036 37.2928L77.9169 36.9692L75.7844 37.5406L75.8711 37.8642L78.0036 37.2928ZM77.9169 36.9692L76.9138 33.2256L74.7813 33.797L75.7844 37.5406L77.9169 36.9692ZM79.1446 37.9515C78.6476 38.0847 78.1368 37.7898 78.0036 37.2928L75.8711 37.8642C76.3198 39.539 78.0413 40.5328 79.716 40.0841L79.1446 37.9515ZM79.6085 36.0836C79.6886 36.3823 79.6775 36.891 79.522 37.3557C79.3532 37.8601 79.1506 37.9499 79.1446 37.9515L79.716 40.0841C80.7959 39.7947 81.361 38.8176 81.6157 38.0562C81.8838 37.2551 81.952 36.2994 81.7411 35.5122L79.6085 36.0836ZM73.9847 38.0228L73.7206 37.0372L71.588 37.6086L71.8521 38.5943L73.9847 38.0228ZM73.7206 37.0372L72.9816 34.2792L70.849 34.8507L71.588 37.6086L73.7206 37.0372ZM75.1256 38.6816C74.6287 38.8147 74.1178 38.5198 73.9847 38.0228L71.8521 38.5943C72.3009 40.269 74.0223 41.2629 75.6971 40.8141L75.1256 38.6816ZM75.7844 37.5406C75.9175 38.0376 75.6226 38.5484 75.1256 38.6816L75.6971 40.8141C77.3718 40.3654 78.3657 38.644 77.9169 36.9692L75.7844 37.5406ZM70.9293 38.7496C70.4323 38.8828 69.9215 38.5878 69.7883 38.0909L67.6558 38.6623C68.1045 40.337 69.8259 41.3309 71.5007 40.8822L70.9293 38.7496ZM71.588 37.6086C71.7212 38.1056 71.4262 38.6164 70.9293 38.7496L71.5007 40.8822C73.1754 40.4334 74.1693 38.712 73.7206 37.0372L71.588 37.6086ZM69.7883 38.0909L69.0493 35.3329L66.9168 35.9043L67.6558 38.6623L69.7883 38.0909ZM66.2627 33.4633L66.9168 35.9043L69.0493 35.3329L68.3953 32.8919L66.2627 33.4633ZM80.8736 22.1766L73.5349 23.4459L73.9111 25.6214L81.2499 24.3521L80.8736 22.1766ZM72.5834 23.7648L68.4294 25.9034L69.44 27.8664L73.594 25.7277L72.5834 23.7648ZM84.5935 28.0697L84.3776 32.0916L86.5822 32.21L86.7981 28.188L84.5935 28.0697ZM84.3771 32.1997L84.5592 36.3085L86.7648 36.2108L86.5827 32.1019L84.3771 32.1997ZM73.5349 23.4459C73.2033 23.5032 72.8825 23.6108 72.5834 23.7648L73.594 25.7277C73.6937 25.6763 73.8006 25.6405 73.9111 25.6214L73.5349 23.4459ZM66.1769 32.1834C66.1218 32.6116 66.151 33.0464 66.2627 33.4633L68.3953 32.8919C68.358 32.7529 68.3483 32.608 68.3667 32.4653L66.1769 32.1834ZM68.8504 28.7069C68.8968 28.3468 69.1172 28.0325 69.44 27.8664L68.4294 25.9034C67.461 26.402 66.7997 27.3448 66.6607 28.4251L68.8504 28.7069ZM84.0257 23.3731C83.2719 22.4293 82.0639 21.9707 80.8736 22.1766L81.2499 24.3521C81.6467 24.2835 82.0493 24.4363 82.3006 24.7509L84.0257 23.3731ZM83.4147 37.51C82.8269 37.665 82.2243 37.3156 82.067 36.7283L79.9344 37.2997C80.4065 39.0615 82.2141 40.1099 83.9777 39.6448L83.4147 37.51ZM84.3008 39.5596C85.8078 39.1622 86.8338 37.7678 86.7648 36.2108L84.5592 36.3085C84.5822 36.8275 84.2402 37.2923 83.7379 37.4248L84.3008 39.5596ZM84.3537 27.3216C84.5227 27.5331 84.608 27.7994 84.5935 28.0697L86.7981 28.188C86.8416 27.3771 86.5856 26.5784 86.0788 25.9438L84.3537 27.3216Z",fill:"#36342C"})),ye||(ye=e.createElement("path",{d:"M99.4417 36.7356C98.3034 36.676 97.3576 36.46 96.6043 36.0876C95.8629 35.7158 95.3105 35.2529 94.9472 34.6988C94.5838 34.1447 94.4062 33.5647 94.4142 32.9588C94.4191 32.8639 94.459 32.7828 94.5339 32.7154C94.6094 32.6361 94.7005 32.5992 94.8072 32.6048L96.7103 32.7046C96.8644 32.7127 96.9811 32.7544 97.0604 32.8299C97.1403 32.8936 97.2133 32.9747 97.2795 33.0733C97.3519 33.2792 97.4721 33.4817 97.64 33.6807C97.8198 33.8803 98.0663 34.0538 98.3796 34.201C98.6936 34.3363 99.0877 34.4164 99.5619 34.4413C100.333 34.4817 100.914 34.3873 101.307 34.1582C101.711 33.9297 101.924 33.602 101.947 33.1752C101.963 32.8669 101.869 32.6123 101.666 32.4114C101.474 32.2111 101.157 32.0221 100.715 31.8444C100.284 31.6672 99.7058 31.4705 98.9799 31.2541C98.1006 31.0178 97.3545 30.7349 96.7416 30.4056C96.1412 30.065 95.6933 29.6492 95.3981 29.1581C95.1153 28.6558 94.9925 28.0489 95.0298 27.3375C95.0671 26.6261 95.2956 26.0079 95.7155 25.483C96.136 24.9462 96.71 24.5423 97.4376 24.2713C98.1658 23.9885 99.022 23.8728 100.006 23.9244C100.801 23.9661 101.495 24.1094 102.088 24.3545C102.693 24.6003 103.189 24.9056 103.574 25.2706C103.971 25.6362 104.266 26.0203 104.459 26.4227C104.652 26.8252 104.744 27.2105 104.737 27.5787C104.732 27.6736 104.692 27.7606 104.616 27.8399C104.541 27.9073 104.451 27.9382 104.344 27.9326L102.352 27.8283C102.233 27.822 102.128 27.7927 102.035 27.7403C101.943 27.6879 101.87 27.6009 101.817 27.4792C101.762 27.1672 101.563 26.8892 101.219 26.6453C100.888 26.3901 100.443 26.248 99.8859 26.2188C99.3049 26.1883 98.8369 26.2708 98.4818 26.4662C98.1386 26.6622 97.9555 26.9796 97.9326 27.4183C97.9176 27.7029 97.9879 27.9503 98.1433 28.1606C98.3112 28.3596 98.5927 28.5467 98.9878 28.722C99.3953 28.886 99.9324 29.0747 100.599 29.288C101.631 29.5561 102.466 29.8554 103.102 30.1861C103.739 30.5167 104.199 30.9272 104.482 31.4176C104.766 31.8962 104.89 32.4912 104.852 33.2026C104.811 33.997 104.55 34.667 104.069 35.2125C103.601 35.7587 102.967 36.1654 102.168 36.4327C101.382 36.6887 100.473 36.7897 99.4417 36.7356ZM109.1 37.0634C108.969 37.0566 108.865 37.0095 108.786 36.9222C108.708 36.8348 108.672 36.7259 108.679 36.5955L109.178 27.0624L105.941 26.8928C105.823 26.8866 105.724 26.8398 105.645 26.7524C105.567 26.6651 105.53 26.5621 105.537 26.4436L105.621 24.8429C105.627 24.7124 105.674 24.6079 105.762 24.5292C105.849 24.4506 105.952 24.4144 106.071 24.4206L115.39 24.909C115.521 24.9159 115.625 24.9629 115.704 25.0503C115.783 25.1376 115.819 25.2465 115.812 25.377L115.728 26.9777C115.722 27.0962 115.675 27.1948 115.587 27.2735C115.5 27.3521 115.391 27.388 115.261 27.3812L112.042 27.2125L111.542 36.7456C111.535 36.876 111.488 36.9805 111.401 37.0592C111.313 37.1378 111.204 37.1737 111.074 37.1669L109.1 37.0634ZM116.804 37.4672C116.674 37.4604 116.569 37.4133 116.491 37.3259C116.412 37.2386 116.376 37.1297 116.383 36.9993L116.989 25.4387C116.996 25.3082 117.043 25.2037 117.13 25.125C117.217 25.0464 117.326 25.0105 117.457 25.0173L122.17 25.2643C123.652 25.342 124.802 25.7471 125.62 26.4795C126.438 27.2001 126.814 28.2007 126.746 29.4812C126.701 30.3468 126.456 31.0592 126.01 31.6185C125.565 32.1777 124.985 32.5813 124.27 32.8292L126.545 37.407C126.577 37.48 126.591 37.5462 126.588 37.6054C126.583 37.7003 126.543 37.7874 126.468 37.8666C126.393 37.9341 126.302 37.965 126.195 37.9594L124.221 37.8559C124.008 37.8447 123.85 37.783 123.749 37.6707C123.649 37.5465 123.577 37.4358 123.535 37.3384L121.578 33.1518L119.426 33.039L119.211 37.1475C119.204 37.2779 119.157 37.3825 119.07 37.4611C118.982 37.5397 118.873 37.5757 118.743 37.5688L116.804 37.4672ZM119.545 30.7802L121.821 30.8996C122.473 30.9337 122.961 30.8107 123.285 30.5304C123.621 30.2508 123.803 29.8442 123.831 29.3106C123.859 28.777 123.726 28.348 123.434 28.0236C123.142 27.6991 122.664 27.5195 122 27.4847L119.724 27.3654L119.545 30.7802ZM128.394 38.0746C128.264 38.0678 128.159 38.0207 128.081 37.9333C128.002 37.846 127.966 37.7371 127.973 37.6067L128.579 26.046C128.586 25.9156 128.633 25.8111 128.72 25.7324C128.807 25.6538 128.916 25.6179 129.047 25.6247L137.103 26.047C137.234 26.0538 137.338 26.1009 137.417 26.1882C137.496 26.2756 137.532 26.3845 137.525 26.5149L137.45 27.9377C137.444 28.0563 137.397 28.1549 137.31 28.2336C137.223 28.3122 137.114 28.3481 136.983 28.3413L131.221 28.0393L131.074 30.8316L136.446 31.1131C136.576 31.12 136.681 31.1671 136.759 31.2544C136.838 31.3417 136.874 31.4506 136.867 31.5811L136.798 32.8972C136.792 33.0158 136.745 33.1144 136.658 33.193C136.57 33.2717 136.461 33.3076 136.331 33.3007L130.96 33.0193L130.809 35.9005L136.714 36.21C136.844 36.2168 136.949 36.2639 137.027 36.3513C137.106 36.4386 137.142 36.5475 137.135 36.6779L137.061 38.083C137.054 38.2134 137.007 38.3179 136.92 38.3966C136.833 38.4752 136.724 38.5112 136.593 38.5043L128.394 38.0746ZM143.091 39.0232C141.953 38.9636 141.007 38.7475 140.254 38.3751C139.513 38.0034 138.96 37.5405 138.597 36.9864C138.234 36.4323 138.056 35.8523 138.064 35.2463C138.069 35.1515 138.109 35.0704 138.184 35.0029C138.259 34.9237 138.35 34.8868 138.457 34.8924L140.36 34.9922C140.514 35.0002 140.631 35.042 140.71 35.1175C140.79 35.1812 140.863 35.2623 140.929 35.3608C141.002 35.5668 141.122 35.7692 141.29 35.9683C141.47 36.1679 141.716 36.3414 142.029 36.4886C142.343 36.6239 142.737 36.704 143.212 36.7289C143.982 36.7693 144.564 36.6749 144.956 36.4458C145.361 36.2173 145.574 35.8896 145.596 35.4628C145.613 35.1545 145.519 34.8999 145.315 34.699C145.124 34.4987 144.807 34.3097 144.364 34.132C143.934 33.9548 143.355 33.7581 142.63 33.5417C141.75 33.3054 141.004 33.0225 140.391 32.6932C139.791 32.3526 139.343 31.9367 139.048 31.4457C138.765 30.9434 138.642 30.3365 138.679 29.6251C138.717 28.9137 138.945 28.2955 139.365 27.7706C139.786 27.2338 140.36 26.8299 141.087 26.5589C141.816 26.2761 142.672 26.1604 143.656 26.212C144.45 26.2536 145.144 26.397 145.738 26.6421C146.343 26.8879 146.838 27.1932 147.223 27.5582C147.62 27.9238 147.915 28.3079 148.108 28.7103C148.301 29.1128 148.394 29.4981 148.387 29.8663C148.382 29.9612 148.341 30.0482 148.266 30.1275C148.191 30.1949 148.1 30.2258 147.994 30.2202L146.002 30.1158C145.883 30.1096 145.778 30.0803 145.685 30.0279C145.593 29.9755 145.52 29.8885 145.467 29.7668C145.412 29.4548 145.213 29.1768 144.869 28.9329C144.537 28.6777 144.093 28.5355 143.536 28.5063C142.955 28.4759 142.487 28.5584 142.132 28.7538C141.788 28.9498 141.605 29.2672 141.582 29.7059C141.567 29.9905 141.638 30.2379 141.793 30.4481C141.961 30.6472 142.242 30.8343 142.638 31.0096C143.045 31.1736 143.582 31.3623 144.249 31.5756C145.281 31.8437 146.115 32.143 146.752 32.4736C147.388 32.8042 147.848 33.2148 148.132 33.7052C148.416 34.1838 148.539 34.7788 148.502 35.4902C148.46 36.2846 148.199 36.9546 147.719 37.5001C147.25 38.0463 146.617 38.453 145.818 38.7203C145.032 38.9763 144.123 39.0773 143.091 39.0232ZM154.16 39.6033C153.022 39.5436 152.076 39.3276 151.323 38.9552C150.581 38.5835 150.029 38.1205 149.666 37.5665C149.302 37.0124 149.125 36.4324 149.133 35.8264C149.138 35.7316 149.178 35.6504 149.252 35.583C149.328 35.5038 149.419 35.4669 149.526 35.4725L151.429 35.5722C151.583 35.5803 151.7 35.6221 151.779 35.6976C151.859 35.7612 151.932 35.8423 151.998 35.9409C152.07 36.1469 152.191 36.3493 152.358 36.5484C152.538 36.748 152.785 36.9215 153.098 37.0687C153.412 37.204 153.806 37.2841 154.28 37.309C155.051 37.3494 155.633 37.255 156.025 37.0259C156.43 36.7974 156.643 36.4697 156.665 36.0429C156.681 35.7346 156.588 35.48 156.384 35.2791C156.193 35.0788 155.876 34.8898 155.433 34.712C155.002 34.5349 154.424 34.3381 153.698 34.1218C152.819 33.8854 152.073 33.6026 151.46 33.2732C150.86 32.9327 150.412 32.5168 150.117 32.0258C149.834 31.5235 149.711 30.9166 149.748 30.2052C149.786 29.4938 150.014 28.8756 150.434 28.3507C150.854 27.8139 151.428 27.41 152.156 27.139C152.884 26.8562 153.74 26.7405 154.725 26.7921C155.519 26.8337 156.213 26.9771 156.806 27.2222C157.412 27.468 157.907 27.7733 158.292 28.1383C158.689 28.5039 158.984 28.8879 159.177 29.2904C159.37 29.6929 159.463 30.0782 159.455 30.4464C159.45 30.5413 159.41 30.6283 159.335 30.7076C159.26 30.775 159.169 30.8059 159.062 30.8003L157.07 30.6959C156.952 30.6897 156.846 30.6604 156.754 30.608C156.662 30.5556 156.589 30.4686 156.536 30.3469C156.481 30.0349 156.281 29.7569 155.937 29.513C155.606 29.2578 155.162 29.1156 154.604 29.0864C154.023 29.056 153.555 29.1385 153.2 29.3339C152.857 29.5299 152.674 29.8473 152.651 30.286C152.636 30.5705 152.706 30.818 152.862 31.0282C153.03 31.2273 153.311 31.4144 153.706 31.5897C154.114 31.7537 154.651 31.9424 155.317 32.1557C156.35 32.4238 157.184 32.7231 157.821 33.0537C158.457 33.3843 158.917 33.7948 159.201 34.2853C159.485 34.7639 159.608 35.3589 159.571 36.0703C159.529 36.8647 159.268 37.5347 158.788 38.0802C158.319 38.6264 157.686 39.0331 156.887 39.3003C156.101 39.5564 155.192 39.6574 154.16 39.6033Z",fill:"#36342C"})),_e||(_e=e.createElement("rect",{x:166.626,y:28.8916,width:3.59788,height:6.59089,rx:1.79894,transform:"rotate(15 166.626 28.8916)",fill:"#F8F8F8",stroke:"#36342C",strokeWidth:2.20779})),ve||(ve=e.createElement("path",{d:"M170.559 38.5774L170.236 38.4922C169.231 38.2273 168.547 37.2977 168.593 36.2597L168.775 32.1508L168.559 28.1288C168.53 27.5882 168.701 27.0558 169.039 26.6327L171.092 24.062C171.594 23.4328 172.4 23.1271 173.193 23.2643L180.532 24.5336C180.753 24.5719 180.967 24.6436 181.166 24.7462L185.32 26.8849C185.966 27.2173 186.407 27.8458 186.499 28.566L186.983 32.3244C187.02 32.6098 187 32.8997 186.926 33.1776L186.272 35.6186L185.533 38.3766C185.242 39.4624 184.126 40.1068 183.04 39.8159C181.954 39.5249 181.31 38.4088 181.601 37.3229L181.336 38.3086C181.046 39.3944 179.929 40.0388 178.844 39.7479C177.758 39.4569 177.113 38.3408 177.404 37.2549L177.318 37.5785C177.027 38.6644 175.91 39.3088 174.825 39.0178C173.739 38.7268 173.289 36.8838 173.58 35.7979L173.254 37.014C172.939 38.1885 171.734 38.8875 170.559 38.5774Z",fill:"#F8F8F8"})),xe||(xe=e.createElement("path",{d:"M170.236 38.4922L169.954 39.5596L169.954 39.5596L170.236 38.4922ZM170.559 38.5774L170.277 39.6448L170.559 38.5774ZM173.409 32.1719C173.567 31.5831 174.172 31.2336 174.761 31.3914C175.35 31.5492 175.699 32.1545 175.541 32.7434L173.409 32.1719ZM169.039 26.6327L168.176 25.9438L168.176 25.9438L169.039 26.6327ZM171.092 24.062L171.954 24.7509L171.954 24.7509L171.092 24.062ZM186.499 28.566L187.594 28.4251L187.594 28.4251L186.499 28.566ZM186.983 32.3244L188.078 32.1834L188.078 32.1834L186.983 32.3244ZM177.341 33.2256C177.499 32.6367 178.104 32.2872 178.693 32.445C179.282 32.6028 179.631 33.2081 179.474 33.797L177.341 33.2256ZM181.273 34.2792C181.431 33.6903 182.036 33.3409 182.625 33.4987C183.214 33.6565 183.564 34.2618 183.406 34.8507L181.273 34.2792ZM186.272 35.6186L185.206 35.3329L185.206 35.3329L186.272 35.6186ZM186.926 33.1776L187.992 33.4633L187.992 33.4633L186.926 33.1776ZM173.193 23.2643L173.381 22.1766L173.381 22.1766L173.193 23.2643ZM180.532 24.5336L180.72 23.4459L180.532 24.5336ZM181.166 24.7462L181.672 23.7648L181.672 23.7648L181.166 24.7462ZM185.32 26.8849L185.826 25.9034L185.826 25.9034L185.32 26.8849ZM168.559 28.1288L167.457 28.188L167.457 28.188L168.559 28.1288ZM168.775 32.1508L169.877 32.0916L169.88 32.1457L169.878 32.1997L168.775 32.1508ZM168.593 36.2597L167.49 36.2108L168.593 36.2597ZM170.517 37.4248L170.84 37.51L170.277 39.6448L169.954 39.5596L170.517 37.4248ZM172.188 36.7283L172.514 35.5122L174.646 36.0836L174.32 37.2997L172.188 36.7283ZM172.514 35.5122L173.409 32.1719L175.541 32.7434L174.646 36.0836L172.514 35.5122ZM168.176 25.9438L170.229 23.3731L171.954 24.7509L169.901 27.3216L168.176 25.9438ZM187.594 28.4251L188.078 32.1834L185.888 32.4653L185.404 28.7069L187.594 28.4251ZM176.251 37.2928L176.338 36.9692L178.471 37.5406L178.384 37.8642L176.251 37.2928ZM176.338 36.9692L177.341 33.2256L179.474 33.797L178.471 37.5406L176.338 36.9692ZM175.11 37.9515C175.607 38.0847 176.118 37.7898 176.251 37.2928L178.384 37.8642C177.935 39.539 176.214 40.5328 174.539 40.0841L175.11 37.9515ZM174.646 36.0836C174.566 36.3823 174.577 36.891 174.733 37.3557C174.902 37.8601 175.104 37.9499 175.11 37.9515L174.539 40.0841C173.459 39.7947 172.894 38.8176 172.639 38.0562C172.371 37.2551 172.303 36.2994 172.514 35.5122L174.646 36.0836ZM180.27 38.0228L180.534 37.0372L182.667 37.6086L182.403 38.5943L180.27 38.0228ZM180.534 37.0372L181.273 34.2792L183.406 34.8507L182.667 37.6086L180.534 37.0372ZM179.129 38.6816C179.626 38.8147 180.137 38.5198 180.27 38.0228L182.403 38.5943C181.954 40.269 180.233 41.2629 178.558 40.8141L179.129 38.6816ZM178.471 37.5406C178.337 38.0376 178.632 38.5484 179.129 38.6816L178.558 40.8141C176.883 40.3654 175.889 38.644 176.338 36.9692L178.471 37.5406ZM183.326 38.7496C183.823 38.8828 184.333 38.5878 184.467 38.0909L186.599 38.6623C186.15 40.337 184.429 41.3309 182.754 40.8822L183.326 38.7496ZM182.667 37.6086C182.534 38.1056 182.829 38.6164 183.326 38.7496L182.754 40.8822C181.079 40.4334 180.086 38.712 180.534 37.0372L182.667 37.6086ZM184.467 38.0909L185.206 35.3329L187.338 35.9043L186.599 38.6623L184.467 38.0909ZM187.992 33.4633L187.338 35.9043L185.206 35.3329L185.86 32.8919L187.992 33.4633ZM173.381 22.1766L180.72 23.4459L180.344 25.6214L173.005 24.3521L173.381 22.1766ZM181.672 23.7648L185.826 25.9034L184.815 27.8664L180.661 25.7277L181.672 23.7648ZM169.661 28.0697L169.877 32.0916L167.673 32.21L167.457 28.188L169.661 28.0697ZM169.878 32.1997L169.696 36.3085L167.49 36.2108L167.672 32.1019L169.878 32.1997ZM180.72 23.4459C181.052 23.5032 181.372 23.6108 181.672 23.7648L180.661 25.7277C180.561 25.6763 180.454 25.6405 180.344 25.6214L180.72 23.4459ZM188.078 32.1834C188.133 32.6116 188.104 33.0464 187.992 33.4633L185.86 32.8919C185.897 32.7529 185.907 32.608 185.888 32.4653L188.078 32.1834ZM185.404 28.7069C185.358 28.3468 185.138 28.0325 184.815 27.8664L185.826 25.9034C186.794 26.402 187.455 27.3448 187.594 28.4251L185.404 28.7069ZM170.229 23.3731C170.983 22.4293 172.191 21.9707 173.381 22.1766L173.005 24.3521C172.608 24.2835 172.206 24.4363 171.954 24.7509L170.229 23.3731ZM170.84 37.51C171.428 37.665 172.031 37.3156 172.188 36.7283L174.32 37.2997C173.848 39.0615 172.041 40.1099 170.277 39.6448L170.84 37.51ZM169.954 39.5596C168.447 39.1622 167.421 37.7678 167.49 36.2108L169.696 36.3085C169.673 36.8275 170.015 37.2923 170.517 37.4248L169.954 39.5596ZM169.901 27.3216C169.732 27.5331 169.647 27.7994 169.661 28.0697L167.457 28.188C167.413 27.3771 167.669 26.5784 168.176 25.9438L169.901 27.3216Z",fill:"#36342C"})),Ce||(Ce=e.createElement("path",{d:"M195.726 27.7045L190.352 31.8404C189.913 32.1787 190.255 32.8947 190.782 32.7394L196.403 31.084C196.676 31.0036 196.969 31.0342 197.22 31.1695L201 33.1993C201.349 33.3868 201.768 33.3696 202.102 33.1542L209.664 28.2723C210.239 27.901 210.362 27.0889 209.923 26.5547L208.633 24.9845C208.258 24.5285 207.608 24.4458 207.137 24.7945L201.268 29.1451C200.936 29.3919 200.498 29.4295 200.13 29.243L196.881 27.5946C196.506 27.4048 196.061 27.4472 195.726 27.7045Z",fill:"#36342C"})),we||(we=e.createElement("path",{d:"M196.151 33.5891L192.706 33.9287C192.104 33.9881 192.114 34.8985 192.717 34.9445L194.879 35.1096C195.332 35.1442 195.719 35.4601 195.857 35.9076L196.525 38.0812C196.664 38.5327 197.057 38.8499 197.514 38.88L205.705 39.4184C206.346 39.4605 206.888 38.9351 206.888 38.2719V37.3147C206.888 36.6802 206.39 36.1659 205.776 36.1659H198.687C198.206 36.1659 197.78 35.8467 197.63 35.3746L197.313 34.3751C197.152 33.8645 196.669 33.538 196.151 33.5891Z",fill:"#36342C"})),be||(be=e.createElement("path",{d:"M215.887 38.8923C215.768 38.8985 215.659 38.8626 215.56 38.7846C215.473 38.7059 215.425 38.6014 215.419 38.471L214.813 26.9103C214.806 26.7799 214.842 26.671 214.921 26.5837C215.011 26.4957 215.116 26.4486 215.234 26.4424L216.888 26.3557C217.066 26.3464 217.199 26.387 217.287 26.4775C217.387 26.5674 217.456 26.6351 217.494 26.6807L221.082 32.5385L224.074 26.3358C224.096 26.2871 224.145 26.2132 224.223 26.114C224.313 26.0141 224.447 25.9596 224.625 25.9502L226.279 25.8636C226.409 25.8567 226.518 25.8926 226.606 25.9713C226.693 26.0499 226.74 26.1545 226.747 26.2849L227.353 37.8455C227.36 37.976 227.324 38.0848 227.245 38.1722C227.166 38.2595 227.062 38.3066 226.931 38.3135L225.117 38.4085C224.999 38.4148 224.896 38.3785 224.808 38.2999C224.721 38.2212 224.674 38.1167 224.667 37.9863L224.291 30.8009L222.254 35.1522C222.2 35.2621 222.128 35.361 222.037 35.4489C221.947 35.5369 221.825 35.5849 221.67 35.593L220.834 35.6368C220.68 35.6449 220.554 35.6099 220.454 35.5319C220.355 35.4539 220.273 35.363 220.208 35.2594L217.728 31.1448L218.104 38.3302C218.111 38.4606 218.075 38.5695 217.997 38.6569C217.918 38.7442 217.819 38.791 217.701 38.7972L215.887 38.8923ZM228.752 38.2181C228.645 38.2237 228.554 38.1928 228.479 38.1253C228.404 38.0461 228.363 37.959 228.358 37.8642C228.355 37.8049 228.358 37.7512 228.368 37.7032L232.001 26.0452C232.03 25.9129 232.095 25.7965 232.197 25.6961C232.299 25.5956 232.445 25.5404 232.634 25.5305L234.911 25.4112C235.101 25.4012 235.251 25.4409 235.363 25.5302C235.475 25.6194 235.552 25.7283 235.594 25.8569L240.426 37.0712C240.441 37.118 240.45 37.171 240.453 37.2303C240.458 37.3252 240.427 37.416 240.36 37.5027C240.293 37.5776 240.205 37.6178 240.099 37.6234L238.249 37.7203C238.071 37.7297 237.939 37.695 237.851 37.6163C237.764 37.5377 237.706 37.4634 237.679 37.3935L236.81 35.4416L231.794 35.7045L231.134 37.7365C231.114 37.8089 231.065 37.8888 230.986 37.9761C230.907 38.0635 230.779 38.1118 230.601 38.1211L228.752 38.2181ZM232.332 33.3756L236.014 33.1827L233.913 28.1565L232.332 33.3756ZM241.915 37.5282C241.784 37.5351 241.675 37.4992 241.588 37.4205C241.501 37.3419 241.454 37.2373 241.447 37.1069L240.841 25.5463C240.834 25.4158 240.87 25.3069 240.949 25.2196C241.027 25.1322 241.132 25.0852 241.262 25.0783L246.118 24.8239C247.078 24.7735 247.916 24.8782 248.631 25.138C249.358 25.3971 249.933 25.8188 250.356 26.403C250.79 26.9747 251.03 27.7052 251.077 28.5945C251.124 29.4957 250.962 30.2532 250.59 30.8672C250.229 31.4687 249.7 31.9304 249.004 32.2522C248.319 32.5735 247.497 32.7592 246.536 32.8096L244.153 32.9345L244.364 36.954C244.37 37.0845 244.334 37.1933 244.256 37.2807C244.177 37.368 244.073 37.4151 243.942 37.422L241.915 37.5282ZM243.984 30.7319L246.332 30.6088C246.936 30.5771 247.397 30.4044 247.713 30.0906C248.042 29.7761 248.19 29.3225 248.159 28.7296C248.132 28.2079 247.955 27.7891 247.63 27.4733C247.316 27.1568 246.821 27.0163 246.145 27.0517L243.798 27.1748L243.984 30.7319Z",fill:"#36342C"})))}const Me=e.forwardRef(Te);i.p;var Ee=i(579);function Ie(e){const{colorScale:t}=e,i={borderColor:t[0]},r={borderColor:t[1]},n={borderColor:t[2]},o={borderColor:t[3]};return(0,Ee.jsxs)("div",{className:"legend grid-container",children:[(0,Ee.jsx)("div",{className:"legend-header-hover",children:(0,Ee.jsx)(Me,{title:"Legend",className:"hover-image"})}),(0,Ee.jsxs)("div",{className:"legend-row",style:i,children:[(0,Ee.jsxs)("div",{className:"legend-icon",children:[(0,Ee.jsx)(u,{title:"LTS 1",className:"default-image"}),(0,Ee.jsx)(u,{title:"LTS 1",className:"hover-image"})]}),(0,Ee.jsx)("div",{className:"legend-text",children:(0,Ee.jsx)(H,{title:"Carefree riding",className:"hover-image"})})]}),(0,Ee.jsxs)("div",{className:"legend-row",style:r,children:[(0,Ee.jsxs)("div",{className:"legend-icon",children:[(0,Ee.jsx)(v,{title:"LTS 2",className:"default-image"}),(0,Ee.jsx)(v,{title:"LTS 2",className:"hover-image"})]}),(0,Ee.jsx)("div",{className:"legend-text",children:(0,Ee.jsx)(K,{title:"Easy going riding",className:"hover-image"})})]}),(0,Ee.jsxs)("div",{className:"legend-row",style:n,children:[(0,Ee.jsxs)("div",{className:"legend-icon",children:[(0,Ee.jsx)(M,{title:"LTS 3",className:"default-image"}),(0,Ee.jsx)(M,{title:"LTS 3",className:"hover-image"})]}),(0,Ee.jsx)("div",{className:"legend-text",children:(0,Ee.jsx)(re,{title:"Stressful riding",className:"hover-image"})})]}),(0,Ee.jsxs)("div",{className:"legend-row",style:o,children:[(0,Ee.jsxs)("div",{className:"legend-icon",children:[(0,Ee.jsx)(D,{title:"LTS 4",className:"default-image"}),(0,Ee.jsx)(D,{title:"LTS 4",className:"hover-image"})]}),(0,Ee.jsx)("div",{className:"legend-text",children:(0,Ee.jsx)(ue,{title:"White knuckle riding",className:"hover-image"})})]})]})}const Ae=JSON.parse('{"type":"FeatureCollection","features":[{"type":"Feature","id":"way/1281853741","geometry":{"type":"LineString","coordinates":[[-71.132781,42.238357],[-71.132794,42.23838],[-71.132804,42.238404],[-71.132809,42.238427],[-71.132809,42.238449],[-71.132804,42.238473],[-71.132794,42.238496],[-71.132781,42.238519],[-71.132764,42.238541]]},"properties":{"osmId":1281853741,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1281853741,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/211843641","geometry":{"type":"LineString","coordinates":[[-71.132764,42.238541],[-71.132265,42.239078],[-71.132165,42.239189]]},"properties":{"osmId":211843641,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":211843641,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1281853743","geometry":{"type":"LineString","coordinates":[[-71.132165,42.239189],[-71.132042,42.239324],[-71.131953,42.239425],[-71.131506,42.239909]]},"properties":{"osmId":1281853743,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8650072","geometry":{"type":"LineString","coordinates":[[-71.131506,42.239909],[-71.131424,42.240004],[-71.131367,42.240091],[-71.131323,42.240183],[-71.130696,42.24176],[-71.130439,42.242405],[-71.130087,42.24329],[-71.129883,42.243803],[-71.129659,42.244367],[-71.129491,42.244789],[-71.129155,42.245633],[-71.129026,42.245956],[-71.128936,42.246119],[-71.12877,42.246337]]},"properties":{"osmId":8650072,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/213575595","geometry":{"type":"LineString","coordinates":[[-71.12877,42.246337],[-71.128742,42.246368],[-71.128198,42.247026],[-71.127854,42.247443],[-71.127822,42.247483],[-71.127411,42.247977],[-71.127018,42.248457],[-71.12698,42.248515],[-71.126956,42.248551],[-71.126925,42.2486],[-71.126909,42.248624],[-71.126869,42.248708],[-71.126671,42.249125],[-71.126619,42.249234],[-71.126386,42.249725],[-71.126363,42.249773],[-71.126109,42.250307],[-71.125911,42.250731],[-71.125895,42.250764],[-71.125866,42.250825],[-71.125732,42.251099],[-71.125695,42.251177]]},"properties":{"osmId":213575595,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/213181301","geometry":{"type":"LineString","coordinates":[[-71.125695,42.251177],[-71.12558,42.251422]]},"properties":{"osmId":213181301,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/213181303","geometry":{"type":"LineString","coordinates":[[-71.12558,42.251422],[-71.125388,42.251821],[-71.125359,42.251882],[-71.125324,42.251966],[-71.125299,42.252021],[-71.125209,42.252226],[-71.125167,42.252311],[-71.125056,42.252537],[-71.124987,42.252678],[-71.124974,42.252704]]},"properties":{"osmId":213181303,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1308541146","geometry":{"type":"LineString","coordinates":[[-71.124974,42.252704],[-71.124908,42.252834],[-71.124659,42.253342],[-71.124585,42.253505],[-71.124558,42.253564],[-71.124432,42.25382],[-71.124401,42.253904],[-71.124377,42.253967]]},"properties":{"osmId":1308541146,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1281855203","geometry":{"type":"LineString","coordinates":[[-71.124377,42.253967],[-71.124356,42.254063],[-71.124335,42.254182],[-71.124315,42.254319],[-71.124308,42.254485]]},"properties":{"osmId":1281855203,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605297","geometry":{"type":"LineString","coordinates":[[-71.124308,42.254485],[-71.124318,42.254653],[-71.124284,42.254862],[-71.124277,42.254903]]},"properties":{"osmId":426605297,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1193863248","geometry":{"type":"LineString","coordinates":[[-71.124277,42.254903],[-71.124247,42.255114]]},"properties":{"osmId":1193863248,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/591278001","geometry":{"type":"LineString","coordinates":[[-71.124247,42.255114],[-71.124229,42.255216]]},"properties":{"osmId":591278001,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605292","geometry":{"type":"LineString","coordinates":[[-71.124229,42.255216],[-71.124199,42.255434],[-71.124131,42.255756],[-71.124106,42.255841]]},"properties":{"osmId":426605292,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605283","geometry":{"type":"LineString","coordinates":[[-71.124106,42.255841],[-71.124091,42.255899],[-71.124023,42.25621]]},"properties":{"osmId":426605283,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605288","geometry":{"type":"LineString","coordinates":[[-71.124023,42.25621],[-71.124011,42.256253],[-71.123942,42.25653]]},"properties":{"osmId":426605288,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605951","geometry":{"type":"LineString","coordinates":[[-71.123942,42.25653],[-71.12393,42.2566],[-71.123887,42.256809],[-71.123765,42.257264],[-71.123677,42.257628],[-71.123566,42.258087],[-71.123553,42.25814],[-71.123431,42.258659],[-71.123417,42.25872],[-71.123403,42.258787],[-71.12336,42.258951],[-71.123235,42.259449],[-71.123137,42.25985],[-71.123026,42.260133],[-71.122854,42.260425],[-71.122786,42.260538],[-71.122632,42.260808],[-71.12243,42.261164]]},"properties":{"osmId":426605951,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605953","geometry":{"type":"LineString","coordinates":[[-71.12243,42.261164],[-71.12223,42.261511],[-71.122168,42.261619]]},"properties":{"osmId":426605953,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426605952","geometry":{"type":"LineString","coordinates":[[-71.122168,42.261619],[-71.121986,42.261929]]},"properties":{"osmId":426605952,"name":"Hyde Park Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8647562","geometry":{"type":"LineString","coordinates":[[-71.121986,42.261929],[-71.121883,42.262109],[-71.121701,42.262462],[-71.121602,42.262756],[-71.121509,42.263257],[-71.121406,42.263844],[-71.121372,42.26403],[-71.121358,42.264128],[-71.121266,42.264764],[-71.121259,42.264813],[-71.121216,42.265055],[-71.121163,42.265352],[-71.121063,42.265889],[-71.121042,42.265982],[-71.120997,42.266411],[-71.120959,42.267036],[-71.120954,42.267136],[-71.12092,42.267796],[-71.120913,42.268026],[-71.120912,42.268066],[-71.120911,42.268106],[-71.120872,42.26886],[-71.120845,42.269305],[-71.120841,42.269362],[-71.120836,42.269396],[-71.120805,42.269597],[-71.120748,42.269876],[-71.12071,42.270019],[-71.120702,42.270043],[-71.120663,42.270158],[-71.120597,42.270343]]},"properties":{"osmId":8647562,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924363423","geometry":{"type":"LineString","coordinates":[[-71.12049,42.270804],[-71.120592,42.27053],[-71.120593,42.270488],[-71.120597,42.270343]]},"properties":{"osmId":924363423,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/591252081","geometry":{"type":"LineString","coordinates":[[-71.12021,42.272575],[-71.120223,42.272486],[-71.120232,42.272427],[-71.120238,42.272369],[-71.12032,42.271531],[-71.120352,42.271198],[-71.12049,42.270804]]},"properties":{"osmId":591252081,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/740715954","geometry":{"type":"LineString","coordinates":[[-71.120202,42.272657],[-71.12021,42.272575]]},"properties":{"osmId":740715954,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/508839214","geometry":{"type":"LineString","coordinates":[[-71.119587,42.276878],[-71.11961,42.276749],[-71.119693,42.276291],[-71.119821,42.275648],[-71.119878,42.27535],[-71.119928,42.274996],[-71.119972,42.274677],[-71.119977,42.27462],[-71.120006,42.274303],[-71.120053,42.273911],[-71.120124,42.273248],[-71.120148,42.273058],[-71.120182,42.272789],[-71.120188,42.272754],[-71.120202,42.272657]]},"properties":{"osmId":508839214,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/814462294","geometry":{"type":"LineString","coordinates":[[-71.118974,42.279981],[-71.118998,42.279849],[-71.119022,42.279729],[-71.119074,42.279495],[-71.119105,42.27936],[-71.119208,42.278791],[-71.119214,42.278757],[-71.119234,42.27865],[-71.119254,42.278549],[-71.11927,42.278468],[-71.119462,42.277446],[-71.119587,42.276878]]},"properties":{"osmId":814462294,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1007553660","geometry":{"type":"LineString","coordinates":[[-71.118907,42.285481],[-71.11892,42.285395],[-71.118934,42.285298],[-71.118962,42.285079],[-71.118967,42.284931],[-71.119016,42.284476],[-71.119016,42.284437],[-71.119014,42.284124],[-71.119014,42.28401],[-71.119001,42.283152],[-71.118977,42.282738],[-71.118977,42.282731],[-71.11896,42.282383],[-71.118924,42.281309],[-71.118904,42.28048],[-71.118907,42.280431],[-71.11893,42.280266],[-71.118948,42.280148],[-71.118953,42.280115],[-71.118974,42.279981]]},"properties":{"osmId":1007553660,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1354758328","geometry":{"type":"LineString","coordinates":[[-71.11876,42.286405],[-71.1188,42.286175],[-71.118838,42.285925],[-71.118864,42.285758],[-71.118883,42.285638],[-71.118888,42.285606],[-71.118907,42.285481]]},"properties":{"osmId":1354758328,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924168452","geometry":{"type":"LineString","coordinates":[[-71.11874,42.286592],[-71.11876,42.286405]]},"properties":{"osmId":924168452,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924168451","geometry":{"type":"LineString","coordinates":[[-71.118725,42.286716],[-71.11874,42.286592]]},"properties":{"osmId":924168451,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924114927","geometry":{"type":"LineString","coordinates":[[-71.118663,42.287101],[-71.118725,42.286716]]},"properties":{"osmId":924114927,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924066372","geometry":{"type":"LineString","coordinates":[[-71.118577,42.287616],[-71.118606,42.287456],[-71.118624,42.287346],[-71.118663,42.287101]]},"properties":{"osmId":924066372,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1212698797","geometry":{"type":"LineString","coordinates":[[-71.118532,42.287872],[-71.118577,42.287616]]},"properties":{"osmId":1212698797,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924066373","geometry":{"type":"LineString","coordinates":[[-71.118499,42.28807],[-71.118532,42.287872]]},"properties":{"osmId":924066373,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/814462293","geometry":{"type":"LineString","coordinates":[[-71.118237,42.289876],[-71.118346,42.289085],[-71.118382,42.288852],[-71.118499,42.28807]]},"properties":{"osmId":814462293,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/741172409","geometry":{"type":"LineString","coordinates":[[-71.118115,42.290659],[-71.118123,42.290582],[-71.118164,42.290337],[-71.118192,42.290148],[-71.118213,42.290022],[-71.118218,42.289992],[-71.118218,42.289991],[-71.118237,42.289876]]},"properties":{"osmId":741172409,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/814457646","geometry":{"type":"LineString","coordinates":[[-71.116942,42.294953],[-71.117207,42.294477],[-71.117364,42.294158],[-71.117436,42.293995],[-71.117533,42.293777],[-71.117667,42.293301],[-71.117714,42.293046],[-71.117739,42.292911],[-71.117788,42.292615],[-71.117819,42.292427],[-71.117831,42.292359],[-71.117837,42.292328],[-71.117856,42.292212],[-71.117955,42.291654],[-71.118006,42.291298],[-71.118032,42.291167],[-71.118115,42.290659]]},"properties":{"osmId":814457646,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/814457645","geometry":{"type":"LineString","coordinates":[[-71.116231,42.296042],[-71.116377,42.295921],[-71.116631,42.295455],[-71.116899,42.295027],[-71.116942,42.294953]]},"properties":{"osmId":814457645,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/737808549","geometry":{"type":"LineString","coordinates":[[-71.120597,42.270343],[-71.120485,42.27046],[-71.120445,42.270514],[-71.120212,42.2712],[-71.120199,42.271409],[-71.120185,42.271525],[-71.120102,42.272409],[-71.120099,42.272455],[-71.120092,42.272564]]},"properties":{"osmId":737808549,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/737808551","geometry":{"type":"LineString","coordinates":[[-71.120092,42.272564],[-71.120085,42.27265]]},"properties":{"osmId":737808551,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/740715952","geometry":{"type":"LineString","coordinates":[[-71.120085,42.27265],[-71.12007,42.272751],[-71.120023,42.273307],[-71.11988,42.27461],[-71.119872,42.274678],[-71.119831,42.275006],[-71.119776,42.275357],[-71.119712,42.27567],[-71.119582,42.276317],[-71.119513,42.276727],[-71.119492,42.276847]]},"properties":{"osmId":740715952,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/737808550","geometry":{"type":"LineString","coordinates":[[-71.119492,42.276847],[-71.119373,42.277427],[-71.119162,42.278486],[-71.119155,42.278516],[-71.119129,42.278625],[-71.119108,42.278733],[-71.118987,42.279333],[-71.118964,42.279474],[-71.118915,42.27971],[-71.118904,42.279769],[-71.118892,42.279827],[-71.118872,42.279938]]},"properties":{"osmId":737808550,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/508217064","geometry":{"type":"LineString","coordinates":[[-71.118872,42.279938],[-71.118849,42.280082],[-71.11882,42.280256],[-71.118805,42.280436],[-71.118803,42.280504],[-71.11882,42.281314],[-71.118861,42.282392],[-71.118874,42.282735],[-71.118889,42.283163],[-71.118921,42.284016],[-71.118915,42.284125],[-71.118913,42.284482],[-71.118864,42.284926],[-71.118814,42.285287],[-71.118804,42.285352],[-71.118798,42.285382],[-71.118786,42.285483],[-71.118767,42.285592],[-71.11874,42.285758],[-71.118713,42.28593],[-71.118678,42.286174],[-71.11864,42.286403]]},"properties":{"osmId":508217064,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1007553662","geometry":{"type":"LineString","coordinates":[[-71.11864,42.286403],[-71.118591,42.286725]]},"properties":{"osmId":1007553662,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924168450","geometry":{"type":"LineString","coordinates":[[-71.118591,42.286725],[-71.118542,42.287091]]},"properties":{"osmId":924168450,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924114926","geometry":{"type":"LineString","coordinates":[[-71.118542,42.287091],[-71.118512,42.28731],[-71.118492,42.287456],[-71.118431,42.287856]]},"properties":{"osmId":924114926,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924066370","geometry":{"type":"LineString","coordinates":[[-71.118431,42.287856],[-71.118402,42.288062]]},"properties":{"osmId":924066370,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1354758326","geometry":{"type":"LineString","coordinates":[[-71.118402,42.288062],[-71.118281,42.288846]]},"properties":{"osmId":1354758326,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/924066369","geometry":{"type":"LineString","coordinates":[[-71.118281,42.288846],[-71.118173,42.289623],[-71.11815,42.289781],[-71.118137,42.289871]]},"properties":{"osmId":924066369,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/741172408","geometry":{"type":"LineString","coordinates":[[-71.118137,42.289871],[-71.118116,42.289985],[-71.118091,42.290133],[-71.118061,42.290328],[-71.118026,42.290578],[-71.118017,42.290652]]},"properties":{"osmId":741172408,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1354758322","geometry":{"type":"LineString","coordinates":[[-71.118017,42.290652],[-71.117917,42.291204],[-71.117906,42.291295],[-71.117858,42.29157],[-71.117754,42.292204],[-71.117738,42.292314],[-71.11773,42.292351],[-71.117717,42.292423]]},"properties":{"osmId":1354758322,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/741172410","geometry":{"type":"LineString","coordinates":[[-71.117717,42.292423],[-71.117642,42.292909],[-71.117568,42.293298],[-71.117431,42.293784],[-71.11735,42.293979],[-71.117277,42.294154],[-71.11712,42.294473],[-71.116852,42.294914]]},"properties":{"osmId":741172410,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/649263020","geometry":{"type":"LineString","coordinates":[[-71.116852,42.294914],[-71.116818,42.29497],[-71.116551,42.29541],[-71.116382,42.29568],[-71.116253,42.295873],[-71.116231,42.296042]]},"properties":{"osmId":649263020,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8648734","geometry":{"type":"LineString","coordinates":[[-71.116231,42.296042],[-71.115688,42.296888],[-71.115551,42.297076],[-71.115436,42.297233],[-71.115007,42.297786],[-71.114986,42.297813],[-71.114916,42.297904]]},"properties":{"osmId":8648734,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1288212514","geometry":{"type":"LineString","coordinates":[[-71.114916,42.297904],[-71.11486,42.297976]]},"properties":{"osmId":1288212514,"name":"Hyde Park Avenue","highway":"primary","speed":30,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8648458","geometry":{"type":"LineString","coordinates":[[-71.115865,42.298264],[-71.115755,42.298218],[-71.115714,42.298203]]},"properties":{"osmId":8648458,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":8648458,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139333577","geometry":{"type":"LineString","coordinates":[[-71.115714,42.298203],[-71.115415,42.298091]]},"properties":{"osmId":139333577,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":139333577,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139333583","geometry":{"type":"LineString","coordinates":[[-71.115415,42.298091],[-71.115111,42.297977],[-71.115059,42.297957],[-71.114916,42.297904]]},"properties":{"osmId":139333583,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":139333583,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139333575","geometry":{"type":"LineString","coordinates":[[-71.115666,42.298281],[-71.115703,42.298295],[-71.115813,42.298341]]},"properties":{"osmId":139333575,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":139333575,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139333581","geometry":{"type":"LineString","coordinates":[[-71.115363,42.298166],[-71.115666,42.298281]]},"properties":{"osmId":139333581,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":139333581,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8645238","geometry":{"type":"LineString","coordinates":[[-71.11486,42.297976],[-71.115005,42.298031],[-71.115363,42.298166]]},"properties":{"osmId":8645238,"name":"Ukraine Way","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":8645238,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139439563","geometry":{"type":"LineString","coordinates":[[-71.128844,42.286157],[-71.12882,42.286094],[-71.128802,42.286061],[-71.12878,42.286042],[-71.128742,42.286029],[-71.12873,42.286024],[-71.12869,42.286024],[-71.128649,42.286029],[-71.128605,42.28604],[-71.128554,42.28606]]},"properties":{"osmId":139439563,"name":null,"highway":"primary_link","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8649554","geometry":{"type":"LineString","coordinates":[[-71.128666,42.2869],[-71.128674,42.286863],[-71.128685,42.286829],[-71.128704,42.286793],[-71.128723,42.28677],[-71.128763,42.286726],[-71.12878,42.286697],[-71.128788,42.286659],[-71.128817,42.286421],[-71.128844,42.286157]]},"properties":{"osmId":8649554,"name":"Poplar Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8649554,"rightType":"shared_lane","rightLane":"pictogram"},"trafficCalmed":false}},{"type":"Feature","id":"way/591278077","geometry":{"type":"LineString","coordinates":[[-71.128089,42.286887],[-71.128209,42.286875],[-71.128243,42.286874],[-71.128309,42.286871],[-71.128399,42.286872],[-71.128496,42.286877],[-71.128509,42.286878],[-71.128574,42.286885],[-71.128666,42.2869]]},"properties":{"osmId":591278077,"name":"South Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":591278077,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/591252063","geometry":{"type":"LineString","coordinates":[[-71.127418,42.28713],[-71.127494,42.287099],[-71.12753,42.287084],[-71.127646,42.287039],[-71.127757,42.286998],[-71.127889,42.286955],[-71.128089,42.286887]]},"properties":{"osmId":591252063,"name":"South Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":591252063,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426442093","geometry":{"type":"LineString","coordinates":[[-71.128554,42.28606],[-71.128526,42.286086],[-71.128371,42.286234],[-71.128175,42.286407],[-71.128128,42.286448]]},"properties":{"osmId":426442093,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":426442093,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426442090","geometry":{"type":"LineString","coordinates":[[-71.128128,42.286448],[-71.128049,42.286515]]},"properties":{"osmId":426442090,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1212704453","geometry":{"type":"LineString","coordinates":[[-71.128049,42.286515],[-71.127982,42.286575]]},"properties":{"osmId":1212704453,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426442089","geometry":{"type":"LineString","coordinates":[[-71.127982,42.286575],[-71.127869,42.286678]]},"properties":{"osmId":426442089,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8650869","geometry":{"type":"LineString","coordinates":[[-71.127869,42.286678],[-71.127533,42.286977],[-71.127488,42.287029],[-71.127454,42.287077],[-71.127418,42.28713]]},"properties":{"osmId":8650869,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8650869,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1334140856","geometry":{"type":"LineString","coordinates":[[-71.126381,42.288086],[-71.126582,42.287894],[-71.126855,42.287641],[-71.126916,42.287585],[-71.127214,42.287304],[-71.127418,42.28713]]},"properties":{"osmId":1334140856,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1334140856,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1334140857","geometry":{"type":"LineString","coordinates":[[-71.12625,42.288208],[-71.126312,42.288149],[-71.126381,42.288086]]},"properties":{"osmId":1334140857,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1334140857,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1176653039","geometry":{"type":"LineString","coordinates":[[-71.124677,42.289686],[-71.125483,42.288926],[-71.12576,42.288666],[-71.125798,42.28863],[-71.125843,42.288589],[-71.125965,42.288482],[-71.12625,42.288208]]},"properties":{"osmId":1176653039,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1176653039,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1176653038","geometry":{"type":"LineString","coordinates":[[-71.124649,42.289713],[-71.124677,42.289686]]},"properties":{"osmId":1176653038,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1176653038,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/139439567","geometry":{"type":"LineString","coordinates":[[-71.118577,42.295438],[-71.118776,42.295248],[-71.119431,42.294629],[-71.11979,42.294289],[-71.119918,42.294168],[-71.120253,42.293851],[-71.120319,42.293789],[-71.12042,42.293694],[-71.120836,42.293299],[-71.12091,42.29323],[-71.121355,42.292809],[-71.121393,42.292773],[-71.121438,42.292729],[-71.121694,42.292479],[-71.121914,42.292264],[-71.122174,42.292022],[-71.122435,42.291778],[-71.122521,42.291702],[-71.123072,42.2912],[-71.123595,42.290712],[-71.124136,42.290198],[-71.124649,42.289713]]},"properties":{"osmId":139439567,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":139439567,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1288190830","geometry":{"type":"LineString","coordinates":[[-71.118345,42.295672],[-71.118441,42.295576],[-71.118485,42.295531],[-71.118524,42.295491],[-71.118565,42.29545],[-71.118577,42.295438]]},"properties":{"osmId":1288190830,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1288190830,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1088529935","geometry":{"type":"LineString","coordinates":[[-71.117098,42.296863],[-71.117135,42.296827],[-71.117157,42.296806],[-71.117229,42.296738],[-71.117301,42.296669],[-71.117456,42.296523],[-71.117544,42.296438],[-71.117658,42.29633],[-71.11801,42.295995],[-71.118071,42.295937],[-71.118171,42.295842],[-71.11826,42.295757],[-71.118292,42.295725],[-71.118345,42.295672]]},"properties":{"osmId":1088529935,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1088529935,"leftType":"lane","rightType":"no","rightBuffer":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1033100081","geometry":{"type":"LineString","coordinates":[[-71.115733,42.298457],[-71.115748,42.298436],[-71.115813,42.298341],[-71.115865,42.298264],[-71.115925,42.298177],[-71.115945,42.298148],[-71.116087,42.297935],[-71.116247,42.297707],[-71.116274,42.297669],[-71.116306,42.29763],[-71.116346,42.297584],[-71.11639,42.297538],[-71.116436,42.297492],[-71.116561,42.297373],[-71.116694,42.297246],[-71.11676,42.297184],[-71.116974,42.29698],[-71.117098,42.296863]]},"properties":{"osmId":1033100081,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1033100081,"leftType":"shared_lane","rightType":"no","rightBuffer":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1329964462","geometry":{"type":"LineString","coordinates":[[-71.117731,42.296321],[-71.117801,42.296254],[-71.118111,42.295958],[-71.118194,42.295879],[-71.11821,42.295864],[-71.118331,42.295746],[-71.118486,42.295596],[-71.118577,42.295438]]},"properties":{"osmId":1329964462,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1329964463","geometry":{"type":"LineString","coordinates":[[-71.117662,42.296388],[-71.117702,42.296349],[-71.117731,42.296321]]},"properties":{"osmId":1329964463,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"cycleway":{"wayOsmId":1329964463,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/825315811","geometry":{"type":"LineString","coordinates":[[-71.114863,42.300126],[-71.11486,42.300102],[-71.114859,42.300092],[-71.114859,42.300073],[-71.114862,42.300052],[-71.114865,42.300039],[-71.114872,42.300024],[-71.114935,42.299903],[-71.115029,42.299743],[-71.115088,42.299649],[-71.115131,42.299584],[-71.115226,42.299428],[-71.115309,42.29928],[-71.115427,42.299086],[-71.115506,42.298957],[-71.11565,42.298734],[-71.11578,42.298536],[-71.115826,42.298465],[-71.115997,42.298203],[-71.116156,42.297962],[-71.116259,42.297806],[-71.116311,42.297737],[-71.116369,42.297668],[-71.116414,42.297617],[-71.116495,42.297526],[-71.116617,42.297404],[-71.116704,42.29732],[-71.116753,42.297273],[-71.116816,42.297213],[-71.116927,42.297107],[-71.117027,42.297007],[-71.117147,42.296888],[-71.11718,42.296856],[-71.117274,42.296764],[-71.117346,42.296695],[-71.117381,42.29666],[-71.117585,42.296463],[-71.117662,42.296388]]},"properties":{"osmId":825315811,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/970452868","geometry":{"type":"LineString","coordinates":[[-71.114601,42.300064],[-71.114627,42.30007],[-71.114649,42.300075],[-71.114741,42.300096],[-71.114813,42.300114],[-71.114845,42.300122],[-71.114863,42.300126]]},"properties":{"osmId":970452868,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":970452868,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/825315813","geometry":{"type":"LineString","coordinates":[[-71.115733,42.298457],[-71.115549,42.298525],[-71.115519,42.298535],[-71.115234,42.29895],[-71.115223,42.299006],[-71.115127,42.299155]]},"properties":{"osmId":825315813,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1338511468","geometry":{"type":"LineString","coordinates":[[-71.115127,42.299155],[-71.115081,42.299226],[-71.115048,42.299277]]},"properties":{"osmId":1338511468,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"cycleway":{"wayOsmId":1338511468,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1329963000","geometry":{"type":"LineString","coordinates":[[-71.115048,42.299277],[-71.114939,42.299452],[-71.1148,42.299681],[-71.114679,42.299896]]},"properties":{"osmId":1329963000,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092440558","geometry":{"type":"LineString","coordinates":[[-71.114679,42.299896],[-71.114649,42.299959],[-71.114623,42.300012]]},"properties":{"osmId":1092440558,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"cycleway":{"wayOsmId":1092440558,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1092440559","geometry":{"type":"LineString","coordinates":[[-71.114623,42.300012],[-71.114601,42.300064]]},"properties":{"osmId":1092440559,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092440560","geometry":{"type":"LineString","coordinates":[[-71.114546,42.300125],[-71.11456,42.300116],[-71.114576,42.300105],[-71.114587,42.300092],[-71.114601,42.300064]]},"properties":{"osmId":1092440560,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092440561","geometry":{"type":"LineString","coordinates":[[-71.114481,42.300167],[-71.114513,42.300145],[-71.114546,42.300125]]},"properties":{"osmId":1092440561,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1092440561,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/825315810","geometry":{"type":"LineString","coordinates":[[-71.114255,42.301574],[-71.114261,42.301535],[-71.114266,42.301491],[-71.114273,42.301443],[-71.114276,42.301418],[-71.114288,42.301242],[-71.114293,42.3012],[-71.114296,42.301167],[-71.114302,42.30112],[-71.114324,42.300966],[-71.114344,42.30085],[-71.114397,42.300542],[-71.1144,42.300505],[-71.114398,42.300486],[-71.114395,42.30047],[-71.114356,42.30036],[-71.114353,42.300345],[-71.114354,42.300327],[-71.11436,42.300301],[-71.11437,42.300268],[-71.114386,42.300242],[-71.114408,42.300218],[-71.114438,42.300195],[-71.114481,42.300167]]},"properties":{"osmId":825315810,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092491910","geometry":{"type":"LineString","coordinates":[[-71.114246,42.301681],[-71.114251,42.301627],[-71.114255,42.301574]]},"properties":{"osmId":1092491910,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1092491910,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1092698145","geometry":{"type":"LineString","coordinates":[[-71.114246,42.301722],[-71.114246,42.301681]]},"properties":{"osmId":1092698145,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092491902","geometry":{"type":"LineString","coordinates":[[-71.11424,42.30184],[-71.114244,42.301769],[-71.114246,42.301722]]},"properties":{"osmId":1092491902,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1092491902,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1092698152","geometry":{"type":"LineString","coordinates":[[-71.114239,42.301864],[-71.11424,42.30184]]},"properties":{"osmId":1092698152,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092698144","geometry":{"type":"LineString","coordinates":[[-71.114367,42.301959],[-71.114238,42.301902],[-71.114239,42.301864]]},"properties":{"osmId":1092698144,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/825315808","geometry":{"type":"LineString","coordinates":[[-71.113753,42.301989],[-71.113766,42.301983],[-71.113788,42.301974],[-71.113801,42.30197],[-71.113824,42.301965],[-71.113848,42.301962],[-71.113888,42.301959],[-71.113994,42.301955],[-71.114074,42.301954],[-71.114135,42.301953],[-71.114367,42.301959]]},"properties":{"osmId":825315808,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1113383245","geometry":{"type":"LineString","coordinates":[[-71.113675,42.302022],[-71.113753,42.301989]]},"properties":{"osmId":1113383245,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/970452858","geometry":{"type":"LineString","coordinates":[[-71.113533,42.302086],[-71.113549,42.302102],[-71.113558,42.302106],[-71.113572,42.302113],[-71.113598,42.302118],[-71.113626,42.302116],[-71.113652,42.302108],[-71.113673,42.302094],[-71.113686,42.302076],[-71.11369,42.302055],[-71.113685,42.302035],[-71.113675,42.302022],[-71.113671,42.302017],[-71.11365,42.302003],[-71.113624,42.301995],[-71.113596,42.301994],[-71.11357,42.302],[-71.113548,42.302012],[-71.113531,42.302028],[-71.113523,42.302047],[-71.113523,42.302067],[-71.113533,42.302086]]},"properties":{"osmId":970452858,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/970452857","geometry":{"type":"LineString","coordinates":[[-71.113226,42.302354],[-71.113237,42.302343],[-71.113295,42.302292],[-71.113355,42.302243],[-71.113383,42.302222],[-71.113407,42.302208],[-71.113433,42.302195],[-71.113485,42.302172],[-71.113505,42.302162],[-71.113524,42.302148],[-71.113537,42.302132],[-71.113558,42.302106]]},"properties":{"osmId":970452857,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/170646335","geometry":{"type":"LineString","coordinates":[[-71.110738,42.306102],[-71.11075,42.30604],[-71.110764,42.305975],[-71.110779,42.305904],[-71.110798,42.305837],[-71.110818,42.305783],[-71.110849,42.305707],[-71.110875,42.305645],[-71.110901,42.305592],[-71.110946,42.30551],[-71.110984,42.30545],[-71.111064,42.305335],[-71.11113,42.305236],[-71.111211,42.305114],[-71.111266,42.305029],[-71.111372,42.304863],[-71.11153,42.304649],[-71.111606,42.304568],[-71.11168,42.304479],[-71.111791,42.304347],[-71.111854,42.304257],[-71.111908,42.304165],[-71.111982,42.304034],[-71.112043,42.303913],[-71.112103,42.303795],[-71.112152,42.303712],[-71.112231,42.303603],[-71.112295,42.303534],[-71.112392,42.303425],[-71.11254,42.303252],[-71.112631,42.303129],[-71.112697,42.303022],[-71.112733,42.302948],[-71.112785,42.302839],[-71.112847,42.302745],[-71.112956,42.302606],[-71.113072,42.302491],[-71.113148,42.302419],[-71.113226,42.302354]]},"properties":{"osmId":170646335,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/959902023","geometry":{"type":"LineString","coordinates":[[-71.110738,42.306102],[-71.110726,42.306144],[-71.11071,42.306189]]},"properties":{"osmId":959902023,"name":null,"highway":"footway","speed":15,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":0,"trafficCalmed":false}},{"type":"Feature","id":"way/1083635638","geometry":{"type":"LineString","coordinates":[[-71.11071,42.306189],[-71.110577,42.306444],[-71.110546,42.306486],[-71.110518,42.306528],[-71.110492,42.306576],[-71.110461,42.306638],[-71.110435,42.306696],[-71.110413,42.306742],[-71.11039,42.306789],[-71.110372,42.306817],[-71.110347,42.306854],[-71.11032,42.306885],[-71.110288,42.306919],[-71.11024,42.306973],[-71.110186,42.307023],[-71.110166,42.307042]]},"properties":{"osmId":1083635638,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1113383241","geometry":{"type":"LineString","coordinates":[[-71.109706,42.307194],[-71.109737,42.3072],[-71.109768,42.307207],[-71.109786,42.307208],[-71.109803,42.307207],[-71.109812,42.307206],[-71.109845,42.307198],[-71.109914,42.307179],[-71.109982,42.307158],[-71.110044,42.307133],[-71.110086,42.307111],[-71.110116,42.307089],[-71.110155,42.307054],[-71.110166,42.307042]]},"properties":{"osmId":1113383241,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092239230","geometry":{"type":"LineString","coordinates":[[-71.109195,42.307412],[-71.109243,42.307362],[-71.109257,42.307344],[-71.109276,42.307322],[-71.1093,42.307299],[-71.109321,42.307284],[-71.109374,42.307256],[-71.109414,42.30724],[-71.109445,42.307229],[-71.109496,42.307217],[-71.109591,42.3072],[-71.109631,42.307194],[-71.109672,42.307192],[-71.109706,42.307194]]},"properties":{"osmId":1092239230,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092239227","geometry":{"type":"LineString","coordinates":[[-71.109195,42.307412],[-71.109166,42.307452],[-71.109155,42.307472],[-71.10914,42.307497]]},"properties":{"osmId":1092239227,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1092239227,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/220595104","geometry":{"type":"LineString","coordinates":[[-71.10914,42.307497],[-71.109117,42.30753],[-71.108989,42.307733],[-71.108675,42.308192],[-71.108658,42.308219],[-71.108637,42.308257],[-71.108621,42.308286],[-71.108004,42.309222],[-71.107963,42.309282],[-71.107667,42.309708],[-71.10762,42.309778],[-71.107578,42.30984],[-71.107548,42.30989],[-71.107522,42.309937],[-71.107499,42.309975],[-71.107451,42.309993],[-71.107424,42.310037],[-71.107398,42.31008]]},"properties":{"osmId":220595104,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1083635639","geometry":{"type":"LineString","coordinates":[[-71.107398,42.31008],[-71.107402,42.310088],[-71.107413,42.310114],[-71.107183,42.310454],[-71.107135,42.310488]]},"properties":{"osmId":1083635639,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1083635640","geometry":{"type":"LineString","coordinates":[[-71.107135,42.310488],[-71.107107,42.31052],[-71.107079,42.310551],[-71.107073,42.310587]]},"properties":{"osmId":1083635640,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/968253495","geometry":{"type":"LineString","coordinates":[[-71.107073,42.310587],[-71.107069,42.310619],[-71.107007,42.310733],[-71.106983,42.310777],[-71.106952,42.310829],[-71.106841,42.311008],[-71.106822,42.311042],[-71.106785,42.311114],[-71.106763,42.311155],[-71.106701,42.311267],[-71.106673,42.311313],[-71.106643,42.31136],[-71.10661,42.311409],[-71.106331,42.311828],[-71.106194,42.312042],[-71.106156,42.312099],[-71.106112,42.312162],[-71.10602,42.3123],[-71.105983,42.312363],[-71.105949,42.312423],[-71.10592,42.312482],[-71.10586,42.312633],[-71.105842,42.312685],[-71.105829,42.31273],[-71.105821,42.312767],[-71.10581,42.312833],[-71.105802,42.312875],[-71.105793,42.31292],[-71.105781,42.312975],[-71.105766,42.313032],[-71.105749,42.313088],[-71.105731,42.313138],[-71.105711,42.313183],[-71.105686,42.313232],[-71.105658,42.313276],[-71.105638,42.313312],[-71.105618,42.313352],[-71.105591,42.313404],[-71.105556,42.313462],[-71.105522,42.313514],[-71.105506,42.313542],[-71.105492,42.313572],[-71.105423,42.313744],[-71.105411,42.313768],[-71.105397,42.313793],[-71.105371,42.313833],[-71.105353,42.313868],[-71.105336,42.31391],[-71.105323,42.313953],[-71.10531,42.314009],[-71.105298,42.314075],[-71.105292,42.314128],[-71.105288,42.314177],[-71.105285,42.314253],[-71.105288,42.314277],[-71.105294,42.314296],[-71.105303,42.314314],[-71.105327,42.314343],[-71.105352,42.31437],[-71.105384,42.314402],[-71.105417,42.314433],[-71.105521,42.314512],[-71.105544,42.314533],[-71.105556,42.314548],[-71.105562,42.314563],[-71.105567,42.31458],[-71.105566,42.314595],[-71.10556,42.314612],[-71.105531,42.314634]]},"properties":{"osmId":968253495,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/969386981","geometry":{"type":"LineString","coordinates":[[-71.105531,42.314634],[-71.105514,42.314679],[-71.105496,42.314725]]},"properties":{"osmId":969386981,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/969386980","geometry":{"type":"LineString","coordinates":[[-71.105496,42.314725],[-71.105471,42.314739],[-71.105464,42.314759],[-71.105458,42.314779],[-71.10542,42.314969],[-71.105412,42.315005],[-71.105402,42.315043],[-71.105393,42.315072],[-71.10538,42.315106],[-71.105367,42.315142],[-71.105252,42.315406],[-71.105237,42.315443],[-71.105224,42.315478],[-71.105213,42.315514],[-71.105201,42.315559],[-71.105188,42.315617],[-71.105176,42.315689],[-71.105166,42.315737],[-71.105156,42.315778],[-71.105142,42.315826],[-71.105128,42.315867],[-71.105107,42.315921],[-71.105088,42.315966],[-71.105067,42.316012],[-71.105038,42.316069],[-71.105017,42.316112],[-71.104997,42.316156],[-71.104904,42.316346],[-71.104883,42.316393],[-71.104865,42.316434],[-71.104841,42.316498],[-71.104829,42.31654],[-71.10482,42.316583],[-71.104812,42.31662],[-71.104807,42.316657],[-71.104804,42.316693],[-71.1048,42.316737],[-71.104798,42.316787],[-71.104791,42.316941],[-71.104812,42.316972],[-71.104816,42.316978]]},"properties":{"osmId":969386980,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/969440902","geometry":{"type":"LineString","coordinates":[[-71.104816,42.316978],[-71.104782,42.317031],[-71.104744,42.31709]]},"properties":{"osmId":969440902,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/969440903","geometry":{"type":"LineString","coordinates":[[-71.104744,42.31709],[-71.104739,42.317098],[-71.104583,42.317341],[-71.104501,42.317477],[-71.104248,42.317797],[-71.103841,42.318284],[-71.103639,42.318563],[-71.103306,42.319038],[-71.10311,42.319334]]},"properties":{"osmId":969440903,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1050580856","geometry":{"type":"LineString","coordinates":[[-71.10311,42.319334],[-71.103087,42.319396],[-71.10306,42.319452]]},"properties":{"osmId":1050580856,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/968253494","geometry":{"type":"LineString","coordinates":[[-71.10306,42.319452],[-71.102936,42.319522],[-71.102244,42.320324],[-71.101218,42.321513],[-71.101056,42.321701],[-71.100713,42.322149],[-71.100567,42.322373],[-71.100489,42.3225],[-71.100486,42.322517],[-71.100484,42.322546],[-71.100478,42.322568],[-71.100471,42.322589],[-71.100463,42.322619],[-71.100434,42.322716]]},"properties":{"osmId":968253494,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/727902008","geometry":{"type":"LineString","coordinates":[[-71.100434,42.322716],[-71.100429,42.322809],[-71.100425,42.322893]]},"properties":{"osmId":727902008,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":727902008,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/727902007","geometry":{"type":"LineString","coordinates":[[-71.100425,42.322893],[-71.100222,42.322882]]},"properties":{"osmId":727902007,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1281288100","geometry":{"type":"LineString","coordinates":[[-71.100222,42.322882],[-71.099814,42.32354],[-71.099762,42.323639]]},"properties":{"osmId":1281288100,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/727902006","geometry":{"type":"LineString","coordinates":[[-71.099762,42.323639],[-71.09974,42.323704],[-71.099625,42.323841],[-71.099529,42.323915],[-71.099379,42.323983],[-71.099327,42.323998],[-71.099056,42.324152],[-71.098956,42.324225],[-71.09888,42.324296],[-71.098787,42.324403],[-71.098693,42.324516],[-71.098607,42.324734],[-71.098556,42.3249]]},"properties":{"osmId":727902006,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/727902004","geometry":{"type":"LineString","coordinates":[[-71.098519,42.32501],[-71.098534,42.324965],[-71.098556,42.3249]]},"properties":{"osmId":727902004,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":727902004,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/727902005","geometry":{"type":"LineString","coordinates":[[-71.098519,42.32501],[-71.098518,42.325014],[-71.098517,42.325019],[-71.098487,42.325141],[-71.098419,42.325342],[-71.098048,42.326385],[-71.097865,42.32697]]},"properties":{"osmId":727902005,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1281288097","geometry":{"type":"LineString","coordinates":[[-71.097865,42.32697],[-71.097772,42.327245],[-71.09766,42.327509],[-71.097601,42.327621],[-71.097429,42.327898],[-71.097335,42.328082],[-71.097263,42.328206]]},"properties":{"osmId":1281288097,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1281288098","geometry":{"type":"LineString","coordinates":[[-71.097263,42.328206],[-71.097242,42.328241],[-71.097218,42.328286]]},"properties":{"osmId":1281288098,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1281288098,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/127381926","geometry":{"type":"LineString","coordinates":[[-71.097212,42.328299],[-71.096906,42.328914],[-71.096841,42.329055],[-71.096765,42.329189],[-71.096686,42.329312],[-71.096598,42.329423],[-71.096411,42.32965],[-71.096233,42.329894],[-71.095908,42.330362],[-71.095227,42.330999]]},"properties":{"osmId":127381926,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1087041470","geometry":{"type":"LineString","coordinates":[[-71.095227,42.330999],[-71.095171,42.331064],[-71.095128,42.331109],[-71.094867,42.331354],[-71.094822,42.331368],[-71.094803,42.331375]]},"properties":{"osmId":1087041470,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1087041469","geometry":{"type":"LineString","coordinates":[[-71.094803,42.331375],[-71.094719,42.331456],[-71.094652,42.331528]]},"properties":{"osmId":1087041469,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1087041469,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1083635643","geometry":{"type":"LineString","coordinates":[[-71.094652,42.331528],[-71.094631,42.33158],[-71.094613,42.331607],[-71.094604,42.331621],[-71.09454,42.331692],[-71.094521,42.331718],[-71.094456,42.331809],[-71.094415,42.331896],[-71.094376,42.331974],[-71.094273,42.33209],[-71.094152,42.33219],[-71.093922,42.332368],[-71.093646,42.332582],[-71.093453,42.332754],[-71.093337,42.33289],[-71.093247,42.333004],[-71.093176,42.333092],[-71.0931,42.333146],[-71.093018,42.333192],[-71.092953,42.333233],[-71.092894,42.33328],[-71.092841,42.333301]]},"properties":{"osmId":1083635643,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1281288094","geometry":{"type":"LineString","coordinates":[[-71.092841,42.333301],[-71.092792,42.333333],[-71.092752,42.333357]]},"properties":{"osmId":1281288094,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1281288094,"cyclewaySurface":"asphalt","leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/89534810","geometry":{"type":"LineString","coordinates":[[-71.092752,42.333357],[-71.092738,42.333381],[-71.092604,42.333509],[-71.092395,42.333696],[-71.092332,42.333755],[-71.092244,42.333821],[-71.092145,42.333895],[-71.09202,42.33396],[-71.09138,42.334297],[-71.091342,42.334316],[-71.091227,42.334385],[-71.091176,42.334421],[-71.091122,42.334459],[-71.091113,42.334465],[-71.091006,42.334559],[-71.090905,42.334679],[-71.090839,42.334766],[-71.090791,42.334839],[-71.090749,42.334918],[-71.090708,42.334985],[-71.09067,42.335034],[-71.090616,42.335094],[-71.090553,42.335149],[-71.090394,42.33527],[-71.090342,42.335296],[-71.090295,42.335312],[-71.090284,42.335315]]},"properties":{"osmId":89534810,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":89534810,"cyclewaySurface":"asphalt"},"trafficCalmed":false}},{"type":"Feature","id":"way/668284028","geometry":{"type":"LineString","coordinates":[[-71.090063,42.335372],[-71.090084,42.335366],[-71.090171,42.335343],[-71.09027,42.335319],[-71.090284,42.335315]]},"properties":{"osmId":668284028,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":668284028,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/570815191","geometry":{"type":"LineString","coordinates":[[-71.087926,42.336409],[-71.087968,42.336387],[-71.088189,42.336208],[-71.088263,42.336149],[-71.088496,42.335961],[-71.088684,42.335866],[-71.088724,42.335839],[-71.088804,42.335772],[-71.089006,42.335599],[-71.089025,42.3356],[-71.089048,42.335603],[-71.089123,42.335622],[-71.089202,42.335634],[-71.089287,42.335637],[-71.089378,42.335636],[-71.089479,42.335625],[-71.089579,42.335603],[-71.08968,42.335573],[-71.089759,42.335543],[-71.089843,42.335507],[-71.089966,42.335442],[-71.090063,42.335372]]},"properties":{"osmId":570815191,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1201197712","geometry":{"type":"LineString","coordinates":[[-71.087889,42.336493],[-71.087861,42.336468],[-71.087926,42.336409]]},"properties":{"osmId":1201197712,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1201197712,"cyclewaySurface":"concrete"},"trafficCalmed":false}},{"type":"Feature","id":"way/1201197713","geometry":{"type":"LineString","coordinates":[[-71.087761,42.336556],[-71.087825,42.336524],[-71.087889,42.336493]]},"properties":{"osmId":1201197713,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1201197713,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1271777005","geometry":{"type":"LineString","coordinates":[[-71.087761,42.336556],[-71.087706,42.336583]]},"properties":{"osmId":1271777005,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/301737839","geometry":{"type":"LineString","coordinates":[[-71.08357,42.33939],[-71.083561,42.339382],[-71.083555,42.339371],[-71.083553,42.339362],[-71.083551,42.339355],[-71.083551,42.339346],[-71.083551,42.33934],[-71.083552,42.339335],[-71.083555,42.339327],[-71.083557,42.339325],[-71.083563,42.339317],[-71.083569,42.33931],[-71.083681,42.33922],[-71.083788,42.339133],[-71.083931,42.339017],[-71.084009,42.338955],[-71.084037,42.338933],[-71.084067,42.33891],[-71.084102,42.338886],[-71.084136,42.338863],[-71.084169,42.338841],[-71.084606,42.33856],[-71.085265,42.33814],[-71.085622,42.337913],[-71.08579,42.337805],[-71.085863,42.337757],[-71.086209,42.337539],[-71.086426,42.337404],[-71.086465,42.33738],[-71.086509,42.337352],[-71.086565,42.337318],[-71.086608,42.337291],[-71.086812,42.337163],[-71.086916,42.337098],[-71.086967,42.337066],[-71.087081,42.336996],[-71.087211,42.336914],[-71.087512,42.336728],[-71.08768,42.336625],[-71.087706,42.336583]]},"properties":{"osmId":301737839,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1370936861","geometry":{"type":"LineString","coordinates":[[-71.084021,42.339703],[-71.083708,42.339485],[-71.08357,42.33939]]},"properties":{"osmId":1370936861,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1083635647","geometry":{"type":"LineString","coordinates":[[-71.08391,42.339796],[-71.083962,42.339753],[-71.084021,42.339703]]},"properties":{"osmId":1083635647,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":1083635647,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/186640200","geometry":{"type":"LineString","coordinates":[[-71.083367,42.341225],[-71.083393,42.341195],[-71.083443,42.341154],[-71.083465,42.341126],[-71.083476,42.341095],[-71.083478,42.341067],[-71.083473,42.341039],[-71.083461,42.341024],[-71.083441,42.341013],[-71.083417,42.341005],[-71.083382,42.341001],[-71.083337,42.340996],[-71.083298,42.340992],[-71.083247,42.340981],[-71.083215,42.340971],[-71.083175,42.340955],[-71.083147,42.340935],[-71.08312,42.340915],[-71.083099,42.34089],[-71.083089,42.340865],[-71.083085,42.340847],[-71.083081,42.340825],[-71.083083,42.340803],[-71.083085,42.340781],[-71.083089,42.340757],[-71.083096,42.340729],[-71.083144,42.340572],[-71.083206,42.340331],[-71.083219,42.340307],[-71.08324,42.340275],[-71.083264,42.340248],[-71.083299,42.340215],[-71.083431,42.340123],[-71.083465,42.340106],[-71.083502,42.34009],[-71.083536,42.340074],[-71.083566,42.340056],[-71.083606,42.340029],[-71.083706,42.339953],[-71.08391,42.339796]]},"properties":{"osmId":186640200,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1083635648","geometry":{"type":"LineString","coordinates":[[-71.083151,42.341422],[-71.083322,42.341292],[-71.083353,42.341254],[-71.083367,42.341225]]},"properties":{"osmId":1083635648,"name":"Pierre Lallement Bike Path","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/383938869","geometry":{"type":"LineString","coordinates":[[-71.083367,42.341562],[-71.083151,42.341422]]},"properties":{"osmId":383938869,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/485286879","geometry":{"type":"LineString","coordinates":[[-71.083235,42.341668],[-71.083303,42.341614],[-71.083328,42.341595],[-71.083339,42.341586],[-71.083367,42.341562]]},"properties":{"osmId":485286879,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":485286879,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/426462252","geometry":{"type":"LineString","coordinates":[[-71.081689,42.34063],[-71.081798,42.340703],[-71.083118,42.341594],[-71.083235,42.341668]]},"properties":{"osmId":426462252,"name":"Massachusetts Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":426462252,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/485286878","geometry":{"type":"LineString","coordinates":[[-71.083303,42.341614],[-71.083099,42.341467],[-71.082181,42.340837]]},"properties":{"osmId":485286878,"name":"Massachusetts Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":485286878,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426462236","geometry":{"type":"LineString","coordinates":[[-71.082181,42.340837],[-71.081915,42.340655],[-71.081884,42.340634],[-71.081776,42.340559]]},"properties":{"osmId":426462236,"name":"Massachusetts Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":426462236,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426462212","geometry":{"type":"LineString","coordinates":[[-71.081776,42.340559],[-71.081689,42.34063]]},"properties":{"osmId":426462212,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426462212,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426462210","geometry":{"type":"LineString","coordinates":[[-71.081689,42.34063],[-71.081632,42.340676],[-71.081617,42.340688],[-71.081222,42.341009]]},"properties":{"osmId":426462210,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":426462210,"leftType":"lane","rightType":"lane","rightBuffer":1},"trafficCalmed":false}},{"type":"Feature","id":"way/420501710","geometry":{"type":"LineString","coordinates":[[-71.081222,42.341009],[-71.081151,42.341066],[-71.081106,42.341109]]},"properties":{"osmId":420501710,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":420501710,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/485292826","geometry":{"type":"LineString","coordinates":[[-71.07982,42.342148],[-71.079855,42.342119],[-71.080412,42.341666],[-71.080467,42.341622],[-71.080512,42.341585],[-71.081069,42.341152],[-71.081106,42.341109]]},"properties":{"osmId":485292826,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":485292826,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/383058042","geometry":{"type":"LineString","coordinates":[[-71.07982,42.342148],[-71.079762,42.342195],[-71.079222,42.342633],[-71.079172,42.342674]]},"properties":{"osmId":383058042,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":383058042,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/533474631","geometry":{"type":"LineString","coordinates":[[-71.079172,42.342674],[-71.079102,42.342731],[-71.07857,42.343163],[-71.078533,42.343193]]},"properties":{"osmId":533474631,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":533474631,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/533474632","geometry":{"type":"LineString","coordinates":[[-71.078533,42.343193],[-71.078465,42.343248],[-71.078337,42.343352],[-71.077929,42.343684],[-71.077872,42.343733],[-71.077818,42.343774],[-71.077239,42.344244],[-71.077187,42.344286],[-71.077136,42.344328],[-71.076556,42.344799],[-71.076513,42.344834],[-71.076465,42.344873],[-71.075888,42.345342],[-71.075845,42.345378]]},"properties":{"osmId":533474632,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":533474632,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/383058044","geometry":{"type":"LineString","coordinates":[[-71.075845,42.345378],[-71.075792,42.34542],[-71.075315,42.345807],[-71.075246,42.345864]]},"properties":{"osmId":383058044,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":383058044,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/383058045","geometry":{"type":"LineString","coordinates":[[-71.075001,42.346054],[-71.075174,42.345919],[-71.075246,42.345864]]},"properties":{"osmId":383058045,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":383058045,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/485292827","geometry":{"type":"LineString","coordinates":[[-71.073538,42.347251],[-71.073596,42.347203],[-71.074091,42.346799],[-71.074189,42.346719],[-71.074261,42.34666],[-71.07495,42.346096]]},"properties":{"osmId":485292827,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":485292827,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1088869488","geometry":{"type":"LineString","coordinates":[[-71.07495,42.346096],[-71.075001,42.346054]]},"properties":{"osmId":1088869488,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1088869488,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/92029619","geometry":{"type":"LineString","coordinates":[[-71.073538,42.347251],[-71.073462,42.347314],[-71.073292,42.347451],[-71.073068,42.347624]]},"properties":{"osmId":92029619,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":92029619,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1329768972","geometry":{"type":"LineString","coordinates":[[-71.073068,42.347624],[-71.072763,42.347871],[-71.072666,42.34795],[-71.072555,42.34804]]},"properties":{"osmId":1329768972,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1329768972,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/383058043","geometry":{"type":"LineString","coordinates":[[-71.072555,42.34804],[-71.072495,42.348088],[-71.072365,42.348195]]},"properties":{"osmId":383058043,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":383058043,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1285819243","geometry":{"type":"LineString","coordinates":[[-71.072365,42.348195],[-71.072316,42.348237],[-71.072273,42.348275]]},"properties":{"osmId":1285819243,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1285819243,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/822959766","geometry":{"type":"LineString","coordinates":[[-71.072273,42.348275],[-71.071879,42.348587],[-71.071792,42.348659]]},"properties":{"osmId":822959766,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":822959766,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/87109189","geometry":{"type":"LineString","coordinates":[[-71.070387,42.349792],[-71.071038,42.349264],[-71.071188,42.349142],[-71.07158,42.348824],[-71.071669,42.348752],[-71.071792,42.348659]]},"properties":{"osmId":87109189,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":87109189,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1285819244","geometry":{"type":"LineString","coordinates":[[-71.069926,42.350148],[-71.07018,42.34996],[-71.070226,42.349923],[-71.070387,42.349792]]},"properties":{"osmId":1285819244,"name":"Columbus Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1285819244,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8646035","geometry":{"type":"LineString","coordinates":[[-71.069926,42.350148],[-71.069833,42.350164],[-71.069737,42.350179],[-71.06965,42.350206],[-71.069442,42.350272],[-71.069328,42.350306],[-71.068775,42.350474],[-71.068739,42.350484],[-71.068656,42.350508],[-71.068485,42.350556],[-71.067866,42.35072],[-71.067563,42.350798],[-71.067367,42.350833]]},"properties":{"osmId":8646035,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8646035,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1096256457","geometry":{"type":"LineString","coordinates":[[-71.067367,42.350833],[-71.067222,42.350858]]},"properties":{"osmId":1096256457,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1096256457,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1280740663","geometry":{"type":"LineString","coordinates":[[-71.067222,42.350858],[-71.067014,42.350901],[-71.066978,42.350909],[-71.066908,42.350924],[-71.066852,42.350936]]},"properties":{"osmId":1280740663,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1280740663,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/242633874","geometry":{"type":"LineString","coordinates":[[-71.066852,42.350936],[-71.06671,42.350963],[-71.066426,42.351026]]},"properties":{"osmId":242633874,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":242633874,"leftType":"lane","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/970425331","geometry":{"type":"LineString","coordinates":[[-71.066426,42.351026],[-71.066404,42.351031],[-71.066247,42.351068],[-71.06617,42.351084],[-71.066074,42.351097]]},"properties":{"osmId":970425331,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":970425331,"leftType":"lane","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/242652627","geometry":{"type":"LineString","coordinates":[[-71.066074,42.351097],[-71.065072,42.351089],[-71.064921,42.351088]]},"properties":{"osmId":242652627,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":242652627,"leftType":"lane","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/242633873","geometry":{"type":"LineString","coordinates":[[-71.063915,42.351008],[-71.064391,42.351059],[-71.064667,42.351079],[-71.064796,42.351085],[-71.064921,42.351088]]},"properties":{"osmId":242633873,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":242633873,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post"},"trafficCalmed":false}},{"type":"Feature","id":"way/1285819768","geometry":{"type":"LineString","coordinates":[[-71.063671,42.350981],[-71.063915,42.351008]]},"properties":{"osmId":1285819768,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":5,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1285819768,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post"},"trafficCalmed":false}},{"type":"Feature","id":"way/1285819769","geometry":{"type":"LineString","coordinates":[[-71.063042,42.350927],[-71.063184,42.35093],[-71.063214,42.350931],[-71.063381,42.350949],[-71.063465,42.350958],[-71.063671,42.350981]]},"properties":{"osmId":1285819769,"name":"Stuart Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":5,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1285819769,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1121981969","geometry":{"type":"LineString","coordinates":[[-71.063042,42.350927],[-71.062987,42.351005],[-71.062944,42.351067],[-71.062917,42.351183],[-71.062846,42.351426],[-71.06284,42.35145],[-71.062832,42.351479],[-71.062826,42.351498],[-71.062821,42.351519],[-71.062819,42.351527],[-71.062814,42.351545],[-71.0628,42.351603]]},"properties":{"osmId":1121981969,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1121981969,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/591136310","geometry":{"type":"LineString","coordinates":[[-71.0628,42.351603],[-71.062783,42.351671],[-71.062755,42.35178],[-71.062735,42.351862],[-71.062719,42.351916],[-71.062617,42.352277],[-71.06261,42.352305],[-71.062591,42.352392]]},"properties":{"osmId":591136310,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":591136310,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/1154673770","geometry":{"type":"LineString","coordinates":[[-71.062591,42.352392],[-71.062579,42.35248],[-71.062567,42.352586],[-71.062553,42.352837],[-71.062544,42.353039],[-71.062537,42.353099]]},"properties":{"osmId":1154673770,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1154673770,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1154673771","geometry":{"type":"LineString","coordinates":[[-71.062537,42.353099],[-71.06253,42.353206],[-71.062527,42.353248]]},"properties":{"osmId":1154673771,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1154673771,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/333071936","geometry":{"type":"LineString","coordinates":[[-71.062527,42.353248],[-71.062461,42.35345],[-71.062387,42.353586],[-71.062288,42.353741],[-71.06228,42.353753],[-71.062232,42.353823],[-71.062191,42.353864]]},"properties":{"osmId":333071936,"name":"Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":333071936,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8638403","geometry":{"type":"LineString","coordinates":[[-71.062191,42.353864],[-71.062094,42.35382],[-71.061334,42.353471]]},"properties":{"osmId":8638403,"name":"Avenue De Lafayette","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"trafficCalmed":false}},{"type":"Feature","id":"way/851480300","geometry":{"type":"LineString","coordinates":[[-71.0607,42.353153],[-71.060764,42.353182],[-71.061241,42.353423],[-71.061334,42.353471]]},"properties":{"osmId":851480300,"name":"Avenue De Lafayette","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":1,"cycleway":{"wayOsmId":851480300,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/862549735","geometry":{"type":"LineString","coordinates":[[-71.0607,42.353153],[-71.060635,42.353218],[-71.060349,42.353553],[-71.060296,42.353609]]},"properties":{"osmId":862549735,"name":"Chauncy Street","highway":"tertiary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":862549735,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/591217296","geometry":{"type":"LineString","coordinates":[[-71.060296,42.353609],[-71.060075,42.353822],[-71.060029,42.353865],[-71.059499,42.354329],[-71.05947,42.354353],[-71.059444,42.354374],[-71.059419,42.354391],[-71.059394,42.354405],[-71.059368,42.354419],[-71.059342,42.354431],[-71.059313,42.354443],[-71.059281,42.354453],[-71.059243,42.354464],[-71.059149,42.354489]]},"properties":{"osmId":591217296,"name":"Chauncy Street","highway":"tertiary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":591217296,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/8648507","geometry":{"type":"LineString","coordinates":[[-71.059149,42.354489],[-71.059069,42.35451],[-71.059043,42.354518],[-71.059016,42.354528],[-71.058992,42.35454],[-71.058973,42.354549],[-71.058955,42.35456],[-71.058936,42.354571],[-71.058922,42.354582],[-71.058907,42.354595],[-71.058669,42.354823],[-71.058418,42.355064],[-71.058342,42.355128],[-71.058194,42.355302],[-71.058131,42.355365],[-71.058125,42.35537],[-71.058076,42.355413]]},"properties":{"osmId":8648507,"name":"Arch Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8648507,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/747090065","geometry":{"type":"LineString","coordinates":[[-71.058076,42.355413],[-71.057972,42.355498]]},"properties":{"osmId":747090065,"name":"Arch Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":747090065,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/747090064","geometry":{"type":"LineString","coordinates":[[-71.057972,42.355498],[-71.057941,42.355534],[-71.057929,42.355547],[-71.057893,42.355623],[-71.057802,42.355868],[-71.057777,42.355936],[-71.057762,42.356007],[-71.05776,42.356073],[-71.057765,42.35614],[-71.057775,42.356247],[-71.057816,42.356685],[-71.057821,42.35674]]},"properties":{"osmId":747090064,"name":"Arch Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":747090064,"leftType":"no","rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/844528872","geometry":{"type":"LineString","coordinates":[[-71.057323,42.356751],[-71.057399,42.356749],[-71.057436,42.356748],[-71.057821,42.35674]]},"properties":{"osmId":844528872,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":844528872,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post"},"trafficCalmed":false}},{"type":"Feature","id":"way/426489346","geometry":{"type":"LineString","coordinates":[[-71.057323,42.356751],[-71.057232,42.356757],[-71.056761,42.356788],[-71.056667,42.356794]]},"properties":{"osmId":426489346,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426489346,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426489347","geometry":{"type":"LineString","coordinates":[[-71.056667,42.356794],[-71.056629,42.356797],[-71.056487,42.356808],[-71.056435,42.356813],[-71.056328,42.356824]]},"properties":{"osmId":426489347,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":2,"cycleway":{"wayOsmId":426489347,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426489344","geometry":{"type":"LineString","coordinates":[[-71.056328,42.356824],[-71.056213,42.356839],[-71.056137,42.356849]]},"properties":{"osmId":426489344,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426489344,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426489345","geometry":{"type":"LineString","coordinates":[[-71.056137,42.356849],[-71.055839,42.35689],[-71.05575,42.356902]]},"properties":{"osmId":426489345,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426489345,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/104210747","geometry":{"type":"LineString","coordinates":[[-71.05575,42.356902],[-71.055689,42.356913],[-71.055651,42.356925],[-71.055624,42.356933],[-71.055558,42.356957],[-71.055261,42.357115],[-71.055109,42.357203],[-71.05494,42.357312],[-71.054901,42.357337],[-71.054833,42.357387],[-71.054478,42.357643],[-71.054421,42.357684],[-71.054386,42.357708],[-71.054066,42.357928],[-71.053997,42.357975]]},"properties":{"osmId":104210747,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":104210747,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/485292837","geometry":{"type":"LineString","coordinates":[[-71.053997,42.357975],[-71.05392,42.358029],[-71.053379,42.358401],[-71.053342,42.358427],[-71.053282,42.358468],[-71.05322,42.358497],[-71.05318,42.35851],[-71.053122,42.358523],[-71.052348,42.358649],[-71.052295,42.358657],[-71.052178,42.358676]]},"properties":{"osmId":485292837,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":485292837,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426488104","geometry":{"type":"LineString","coordinates":[[-71.052178,42.358676],[-71.052053,42.358698],[-71.051688,42.358757],[-71.051578,42.358774]]},"properties":{"osmId":426488104,"name":"Milk Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":426488104,"leftType":"track","leftBuffer":1,"leftSeparation":"flex_post","leftReversed":1,"rightType":"no"},"trafficCalmed":false}},{"type":"Feature","id":"way/426488106","geometry":{"type":"LineString","coordinates":[[-71.051817,42.359632],[-71.051931,42.359614],[-71.052316,42.359554],[-71.052435,42.359536]]},"properties":{"osmId":426488106,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8645083","geometry":{"type":"LineString","coordinates":[[-71.052435,42.359536],[-71.052557,42.359516],[-71.053348,42.359384],[-71.05348,42.359362],[-71.053574,42.359346],[-71.053834,42.359304],[-71.054093,42.359271]]},"properties":{"osmId":8645083,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":8645083,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1351234388","geometry":{"type":"LineString","coordinates":[[-71.054093,42.359271],[-71.05428,42.359256]]},"properties":{"osmId":1351234388,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1351234388,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1351234384","geometry":{"type":"LineString","coordinates":[[-71.05428,42.359256],[-71.054557,42.359226],[-71.054653,42.359215]]},"properties":{"osmId":1351234384,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1351234384,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1351234386","geometry":{"type":"LineString","coordinates":[[-71.054653,42.359215],[-71.054736,42.359201],[-71.055175,42.359127],[-71.055468,42.359077],[-71.055537,42.359065],[-71.055838,42.359012],[-71.055913,42.358998]]},"properties":{"osmId":1351234386,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1351234386,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1147916780","geometry":{"type":"LineString","coordinates":[[-71.055913,42.358998],[-71.056321,42.358933]]},"properties":{"osmId":1147916780,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1147916780,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426487629","geometry":{"type":"LineString","coordinates":[[-71.056321,42.358933],[-71.056486,42.358906],[-71.056526,42.3589],[-71.056569,42.358895],[-71.056608,42.358892],[-71.056652,42.358889],[-71.056804,42.35888]]},"properties":{"osmId":426487629,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426487629,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/846628946","geometry":{"type":"LineString","coordinates":[[-71.056804,42.35888],[-71.057114,42.358863],[-71.057708,42.358828],[-71.057744,42.358829],[-71.05783,42.358833]]},"properties":{"osmId":846628946,"name":"State Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8646962","geometry":{"type":"LineString","coordinates":[[-71.05783,42.358833],[-71.057913,42.358845],[-71.058593,42.358993],[-71.058625,42.359]]},"properties":{"osmId":8646962,"name":"Court Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/941562893","geometry":{"type":"LineString","coordinates":[[-71.058625,42.359],[-71.058945,42.359096]]},"properties":{"osmId":941562893,"name":"Court Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":941562893,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/826634235","geometry":{"type":"LineString","coordinates":[[-71.058945,42.359096],[-71.059106,42.359145],[-71.059184,42.359173],[-71.059278,42.359215]]},"properties":{"osmId":826634235,"name":"Court Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":826634235,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/138798811","geometry":{"type":"LineString","coordinates":[[-71.059278,42.359215],[-71.059302,42.359223],[-71.059472,42.359275]]},"properties":{"osmId":138798811,"name":"Cambridge Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":138798811,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/747090073","geometry":{"type":"LineString","coordinates":[[-71.059472,42.359275],[-71.059491,42.359276],[-71.059509,42.359276],[-71.059529,42.359274],[-71.05955,42.359273],[-71.059574,42.35927],[-71.059596,42.359266],[-71.059617,42.359261],[-71.059639,42.359255],[-71.059659,42.359247],[-71.059679,42.359238],[-71.059697,42.359227],[-71.059714,42.359216],[-71.059732,42.359203],[-71.059747,42.359189],[-71.05976,42.359173],[-71.059773,42.359155],[-71.059785,42.359135],[-71.059794,42.359114],[-71.059801,42.359093],[-71.059806,42.359072],[-71.059815,42.359038]]},"properties":{"osmId":747090073,"name":null,"highway":"primary_link","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426472927","geometry":{"type":"LineString","coordinates":[[-71.059815,42.359038],[-71.059822,42.358997],[-71.059834,42.358942],[-71.059849,42.358892],[-71.059867,42.358837],[-71.059879,42.3588],[-71.059894,42.358762],[-71.059907,42.358733],[-71.059922,42.358704],[-71.059939,42.358675],[-71.059959,42.358646],[-71.059988,42.358607],[-71.060013,42.358575],[-71.06004,42.358542],[-71.060073,42.358497]]},"properties":{"osmId":426472927,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426472927,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/138827717","geometry":{"type":"LineString","coordinates":[[-71.060073,42.358497],[-71.060324,42.358181],[-71.06035,42.358145],[-71.060379,42.358102],[-71.060408,42.358058],[-71.060427,42.358027],[-71.060446,42.357995]]},"properties":{"osmId":138827717,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":138827717,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/63104590","geometry":{"type":"LineString","coordinates":[[-71.060446,42.357995],[-71.060475,42.357953],[-71.060504,42.357916],[-71.060531,42.357884],[-71.060554,42.357858],[-71.060577,42.357835],[-71.061048,42.357372],[-71.061134,42.357299],[-71.061223,42.357223],[-71.061262,42.357184],[-71.061467,42.356985],[-71.061658,42.3568],[-71.061706,42.356755],[-71.061744,42.356719],[-71.061786,42.356683],[-71.061883,42.356601],[-71.061905,42.356581],[-71.061982,42.356511]]},"properties":{"osmId":63104590,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":63104590,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/591136306","geometry":{"type":"LineString","coordinates":[[-71.061982,42.356511],[-71.062196,42.356321],[-71.06226,42.356265],[-71.062513,42.356018]]},"properties":{"osmId":591136306,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":591136306,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1149777185","geometry":{"type":"LineString","coordinates":[[-71.062513,42.356018],[-71.062834,42.355708],[-71.062887,42.355662]]},"properties":{"osmId":1149777185,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1149777185,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8651512","geometry":{"type":"LineString","coordinates":[[-71.062887,42.355662],[-71.063042,42.355514],[-71.063208,42.355334],[-71.063268,42.355259],[-71.06329,42.355231],[-71.063339,42.355174],[-71.063419,42.35506],[-71.063583,42.354774],[-71.063592,42.354759],[-71.063803,42.354341],[-71.063835,42.354274],[-71.063914,42.35412],[-71.063987,42.353975],[-71.064095,42.353727]]},"properties":{"osmId":8651512,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":8651512,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1121209368","geometry":{"type":"LineString","coordinates":[[-71.064095,42.353727],[-71.064135,42.353636],[-71.064146,42.353609],[-71.06421,42.353458],[-71.064238,42.353385]]},"properties":{"osmId":1121209368,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1121209368,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1121209369","geometry":{"type":"LineString","coordinates":[[-71.064238,42.353385],[-71.064366,42.353064],[-71.06437,42.353047]]},"properties":{"osmId":1121209369,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1121209369,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1121209367","geometry":{"type":"LineString","coordinates":[[-71.06437,42.353047],[-71.064425,42.352832],[-71.064462,42.352705]]},"properties":{"osmId":1121209367,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1121209367,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/426831020","geometry":{"type":"LineString","coordinates":[[-71.064462,42.352705],[-71.064529,42.352468]]},"properties":{"osmId":426831020,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":426831020,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/840928388","geometry":{"type":"LineString","coordinates":[[-71.064529,42.352468],[-71.064547,42.35241],[-71.064556,42.352372]]},"properties":{"osmId":840928388,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":840928388,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8650197","geometry":{"type":"LineString","coordinates":[[-71.064556,42.352372],[-71.064577,42.352292],[-71.064656,42.351992],[-71.064729,42.351722],[-71.064746,42.351657],[-71.064772,42.351545],[-71.064788,42.35149]]},"properties":{"osmId":8650197,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":8650197,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1120131787","geometry":{"type":"LineString","coordinates":[[-71.064788,42.35149],[-71.064813,42.351405],[-71.064873,42.351199],[-71.064921,42.351088]]},"properties":{"osmId":1120131787,"name":"Tremont Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1120131787,"leftType":"no","rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1188182972","geometry":{"type":"LineString","coordinates":[[-71.051578,42.358774],[-71.051606,42.358876],[-71.051656,42.359056]]},"properties":{"osmId":1188182972,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":1188182972,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1188182970","geometry":{"type":"LineString","coordinates":[[-71.051656,42.359056],[-71.051783,42.35952],[-71.051799,42.359573],[-71.051817,42.359632]]},"properties":{"osmId":1188182970,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":1188182970,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1188182971","geometry":{"type":"LineString","coordinates":[[-71.051817,42.359632],[-71.051833,42.35968],[-71.051853,42.359737],[-71.051868,42.359773],[-71.051882,42.359808],[-71.051903,42.359856],[-71.051924,42.359901],[-71.051944,42.359942],[-71.051965,42.359983],[-71.052005,42.360054],[-71.052041,42.360115],[-71.052075,42.360171],[-71.052131,42.360257],[-71.052159,42.3603],[-71.052185,42.360339]]},"properties":{"osmId":1188182971,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":1188182971,"leftType":"no","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/970425325","geometry":{"type":"LineString","coordinates":[[-71.052185,42.360339],[-71.052211,42.360376],[-71.052257,42.360435],[-71.052302,42.360488],[-71.05235,42.360539],[-71.05239,42.360581]]},"properties":{"osmId":970425325,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":970425325,"leftType":"no","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/970425326","geometry":{"type":"LineString","coordinates":[[-71.05239,42.360581],[-71.052454,42.360646],[-71.052504,42.360693],[-71.052566,42.360748]]},"properties":{"osmId":970425326,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":970425326,"leftType":"no","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426488102","geometry":{"type":"LineString","coordinates":[[-71.052566,42.360748],[-71.052638,42.360809],[-71.052668,42.360832],[-71.052722,42.360873],[-71.052744,42.360889],[-71.052759,42.3609],[-71.052809,42.360934]]},"properties":{"osmId":426488102,"name":"Atlantic Avenue","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":3,"cycleway":{"wayOsmId":426488102,"leftType":"no","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8641399","geometry":{"type":"LineString","coordinates":[[-71.052809,42.360934],[-71.052865,42.36097],[-71.052928,42.361008],[-71.052972,42.361035],[-71.053044,42.361079],[-71.053116,42.361122],[-71.053184,42.361163],[-71.053221,42.361184],[-71.053303,42.36123],[-71.053616,42.361397],[-71.053922,42.361557],[-71.054484,42.361838],[-71.054531,42.361862],[-71.054816,42.362004],[-71.054919,42.36206],[-71.055035,42.362123],[-71.055179,42.362201],[-71.055643,42.362452],[-71.055714,42.362491],[-71.055814,42.362545]]},"properties":{"osmId":8641399,"name":"Cross Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8641399,"rightType":"lane","rightLane":"exclusive"},"trafficCalmed":false}},{"type":"Feature","id":"way/972626709","geometry":{"type":"LineString","coordinates":[[-71.055814,42.362545],[-71.055923,42.362607],[-71.056006,42.362654],[-71.056238,42.362793],[-71.056284,42.36282],[-71.056331,42.362846],[-71.056781,42.363109],[-71.056814,42.363128],[-71.056858,42.363155],[-71.0569,42.363181],[-71.05696,42.363219]]},"properties":{"osmId":972626709,"name":"Cross Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":972626709,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/591310041","geometry":{"type":"LineString","coordinates":[[-71.05696,42.363219],[-71.057025,42.363262],[-71.057102,42.363313],[-71.057197,42.36338],[-71.057259,42.363426],[-71.057308,42.363467],[-71.057372,42.363523],[-71.057439,42.363586],[-71.057502,42.363644],[-71.057563,42.363703],[-71.057619,42.363757],[-71.057675,42.363812],[-71.057716,42.363856],[-71.057753,42.363896],[-71.057796,42.363945],[-71.057839,42.364],[-71.057881,42.364051],[-71.057925,42.364103],[-71.057972,42.364154],[-71.058012,42.364196],[-71.058053,42.364238],[-71.058094,42.36428],[-71.05812,42.364305],[-71.05819,42.36437],[-71.058226,42.364407],[-71.058245,42.364431],[-71.058259,42.364457],[-71.058274,42.364488],[-71.058286,42.364526]]},"properties":{"osmId":591310041,"name":"Cross Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":591310041,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8643638","geometry":{"type":"LineString","coordinates":[[-71.058286,42.364526],[-71.058297,42.364573],[-71.05831,42.364618],[-71.05833,42.364659],[-71.058349,42.3647],[-71.058379,42.364754]]},"properties":{"osmId":8643638,"name":"North Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8643638,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426481845","geometry":{"type":"LineString","coordinates":[[-71.058379,42.364754],[-71.058391,42.365242]]},"properties":{"osmId":426481845,"name":"North Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":5,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":426481845,"leftType":"share_busway","rightType":"lane","rightLane":"exclusive"},"trafficCalmed":false}},{"type":"Feature","id":"way/48982020","geometry":{"type":"LineString","coordinates":[[-71.058391,42.365242],[-71.058392,42.365302],[-71.058395,42.365462],[-71.05847,42.366264],[-71.058479,42.366366]]},"properties":{"osmId":48982020,"name":"North Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":48982020,"leftType":"share_busway","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/426481851","geometry":{"type":"LineString","coordinates":[[-71.058545,42.366904],[-71.058532,42.366859],[-71.058527,42.366834],[-71.058521,42.366804],[-71.05852,42.366794],[-71.058515,42.366769],[-71.058511,42.366742],[-71.058508,42.366709],[-71.058495,42.36656],[-71.058479,42.366366]]},"properties":{"osmId":426481851,"name":"North Washington Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":426481851,"leftType":"lane","leftLane":"exclusive","rightType":"share_busway"},"trafficCalmed":false}},{"type":"Feature","id":"way/1395423596","geometry":{"type":"LineString","coordinates":[[-71.058545,42.366904],[-71.058495,42.367088],[-71.058524,42.367129]]},"properties":{"osmId":1395423596,"name":"North Washington Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1395423597","geometry":{"type":"LineString","coordinates":[[-71.058524,42.367129],[-71.058574,42.367197],[-71.058605,42.367239]]},"properties":{"osmId":1395423597,"name":"North Washington Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"cycleway":{"wayOsmId":1395423597,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/1392256152","geometry":{"type":"LineString","coordinates":[[-71.058605,42.367239],[-71.058718,42.3674]]},"properties":{"osmId":1392256152,"name":"North Washington Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1262331183","geometry":{"type":"LineString","coordinates":[[-71.058718,42.3674],[-71.060596,42.370069],[-71.060759,42.370297],[-71.060781,42.370329],[-71.060806,42.370362],[-71.060824,42.370388],[-71.060835,42.370404],[-71.060896,42.370491],[-71.060909,42.370508],[-71.060916,42.370517],[-71.060926,42.370531],[-71.060929,42.370535],[-71.060939,42.370547],[-71.060953,42.370564],[-71.060967,42.370581],[-71.060994,42.370612],[-71.061019,42.370639],[-71.061044,42.370665],[-71.06107,42.370691],[-71.061099,42.370718],[-71.061123,42.370739],[-71.06115,42.370763],[-71.06117,42.370778],[-71.061224,42.370821],[-71.061246,42.370839],[-71.061279,42.370864]]},"properties":{"osmId":1262331183,"name":"North Washington Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1408478137","geometry":{"type":"LineString","coordinates":[[-71.061279,42.370864],[-71.061312,42.370888],[-71.061344,42.370911],[-71.061381,42.370936],[-71.061415,42.370958],[-71.061442,42.370976],[-71.061465,42.37099],[-71.061507,42.371016],[-71.061614,42.37108],[-71.061663,42.371107]]},"properties":{"osmId":1408478137,"name":"North Washington Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1314062049","geometry":{"type":"LineString","coordinates":[[-71.061663,42.371107],[-71.06165,42.371133],[-71.061637,42.371158],[-71.061541,42.371352]]},"properties":{"osmId":1314062049,"name":"Chelsea Street","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/94670408","geometry":{"type":"LineString","coordinates":[[-71.061541,42.371352],[-71.061304,42.371515],[-71.060853,42.371825]]},"properties":{"osmId":94670408,"name":"Chelsea Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426642737","geometry":{"type":"LineString","coordinates":[[-71.060853,42.371825],[-71.060555,42.37203],[-71.060522,42.372053],[-71.060413,42.372128]]},"properties":{"osmId":426642737,"name":"Chelsea Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":3,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":4,"trafficCalmed":false}},{"type":"Feature","id":"way/591493318","geometry":{"type":"LineString","coordinates":[[-71.060413,42.372128],[-71.060478,42.372226]]},"properties":{"osmId":591493318,"name":"Warren Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":591493318,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/845414078","geometry":{"type":"LineString","coordinates":[[-71.060478,42.372226],[-71.060531,42.372306],[-71.060545,42.372327],[-71.060697,42.372553],[-71.060758,42.372644],[-71.060912,42.372897],[-71.060919,42.372912],[-71.060954,42.372984]]},"properties":{"osmId":845414078,"name":"Warren Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"cycleway":{"wayOsmId":845414078,"leftType":"no","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8646107","geometry":{"type":"LineString","coordinates":[[-71.060954,42.372984],[-71.060991,42.373079],[-71.061045,42.373152],[-71.061053,42.373165],[-71.061133,42.373233],[-71.061613,42.373641],[-71.061647,42.373667],[-71.061701,42.373707],[-71.061886,42.373842],[-71.062223,42.374089],[-71.062268,42.374122],[-71.062317,42.374159],[-71.062741,42.374462],[-71.062772,42.374485],[-71.063097,42.374708],[-71.063316,42.374867],[-71.063659,42.375083],[-71.06369,42.375101],[-71.063704,42.37511]]},"properties":{"osmId":8646107,"name":"Warren Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":8646107,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/690296523","geometry":{"type":"LineString","coordinates":[[-71.063704,42.37511],[-71.063767,42.375153],[-71.064046,42.375337],[-71.064086,42.375359],[-71.064124,42.375378],[-71.064165,42.375397],[-71.064306,42.375457]]},"properties":{"osmId":690296523,"name":"Dexter Row","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":690296523,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1000386665","geometry":{"type":"LineString","coordinates":[[-71.065808,42.376548],[-71.065753,42.376507],[-71.065338,42.376202],[-71.065094,42.376023],[-71.064722,42.375749],[-71.064576,42.375642],[-71.064549,42.375622],[-71.064455,42.375553],[-71.064428,42.375534],[-71.0644,42.375516],[-71.064372,42.375499],[-71.064306,42.375457]]},"properties":{"osmId":1000386665,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":1000386665,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/95609072","geometry":{"type":"LineString","coordinates":[[-71.069971,42.380293],[-71.069951,42.380274],[-71.069577,42.379908],[-71.06951,42.379843],[-71.069297,42.379624],[-71.069085,42.379405],[-71.068807,42.379116],[-71.068747,42.379056],[-71.068693,42.379005],[-71.068462,42.37879],[-71.068206,42.378547],[-71.068137,42.378481],[-71.067891,42.378265],[-71.067841,42.378221],[-71.067664,42.378059],[-71.067596,42.378002],[-71.067529,42.377945],[-71.067381,42.377817],[-71.067318,42.377767],[-71.067224,42.377685],[-71.067187,42.377651],[-71.0671,42.377576],[-71.066772,42.377289],[-71.066688,42.377219],[-71.066525,42.377078],[-71.066236,42.376868],[-71.066049,42.376725],[-71.065858,42.376585],[-71.065808,42.376548]]},"properties":{"osmId":95609072,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":95609072,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1000386664","geometry":{"type":"LineString","coordinates":[[-71.071781,42.382706],[-71.071747,42.382593],[-71.071701,42.382472],[-71.071687,42.382439],[-71.071617,42.382276],[-71.071529,42.382102],[-71.071406,42.381877],[-71.071213,42.381608],[-71.071132,42.381491],[-71.07105,42.3814],[-71.071008,42.381352],[-71.070964,42.381301],[-71.070935,42.381272],[-71.070791,42.38113],[-71.070667,42.381006],[-71.070557,42.380895],[-71.070447,42.380784],[-71.070298,42.380631],[-71.070021,42.380345],[-71.069971,42.380293]]},"properties":{"osmId":1000386664,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":1000386664,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/82576282","geometry":{"type":"LineString","coordinates":[[-71.071781,42.382706],[-71.071801,42.382947],[-71.071795,42.383048],[-71.071776,42.38315]]},"properties":{"osmId":82576282,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":82576282,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1119626508","geometry":{"type":"LineString","coordinates":[[-71.071776,42.38315],[-71.071703,42.383314],[-71.071692,42.383331],[-71.071672,42.383363],[-71.071613,42.383415]]},"properties":{"osmId":1119626508,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":3,"cycleway":{"wayOsmId":1119626508,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/980643130","geometry":{"type":"LineString","coordinates":[[-71.071613,42.383415],[-71.071756,42.383473]]},"properties":{"osmId":980643130,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":980643130,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/132174475","geometry":{"type":"LineString","coordinates":[[-71.071756,42.383473],[-71.071807,42.383497],[-71.072074,42.383628]]},"properties":{"osmId":132174475,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":132174475,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1298911297","geometry":{"type":"LineString","coordinates":[[-71.072074,42.383628],[-71.072221,42.383699]]},"properties":{"osmId":1298911297,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"cycleway":{"wayOsmId":1298911297},"trafficCalmed":false}},{"type":"Feature","id":"way/1086801844","geometry":{"type":"LineString","coordinates":[[-71.072221,42.383699],[-71.072324,42.383765]]},"properties":{"osmId":1086801844,"name":"Main Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":1086801844,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1338748625","geometry":{"type":"LineString","coordinates":[[-71.072324,42.383765],[-71.072348,42.383922],[-71.07235,42.383948],[-71.072357,42.38398],[-71.072364,42.383997],[-71.072397,42.384046],[-71.072451,42.384124],[-71.072512,42.384192],[-71.072591,42.384257],[-71.072636,42.384301],[-71.07265,42.384315],[-71.072658,42.384324],[-71.072674,42.384349],[-71.072698,42.384385],[-71.072718,42.384411],[-71.072732,42.384425],[-71.072748,42.384438],[-71.072817,42.384481]]},"properties":{"osmId":1338748625,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/132174849","geometry":{"type":"LineString","coordinates":[[-71.072817,42.384481],[-71.072812,42.384515],[-71.072809,42.384534],[-71.072806,42.384553],[-71.072763,42.384829]]},"properties":{"osmId":132174849,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":132174849,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8640386","geometry":{"type":"LineString","coordinates":[[-71.072763,42.384829],[-71.072716,42.385044],[-71.072686,42.38518],[-71.072678,42.385216],[-71.072635,42.385454]]},"properties":{"osmId":8640386,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":8640386,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/778940114","geometry":{"type":"LineString","coordinates":[[-71.072635,42.385454],[-71.072562,42.385878],[-71.072393,42.386861],[-71.072387,42.386906],[-71.072374,42.387016],[-71.072328,42.387308]]},"properties":{"osmId":778940114,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":778940114,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/980431771","geometry":{"type":"LineString","coordinates":[[-71.072328,42.387308],[-71.072264,42.387465],[-71.072219,42.387564],[-71.072176,42.387645]]},"properties":{"osmId":980431771,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":980431771,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/8645648","geometry":{"type":"LineString","coordinates":[[-71.072176,42.387645],[-71.071267,42.389142]]},"properties":{"osmId":8645648,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":8645648,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/822623866","geometry":{"type":"LineString","coordinates":[[-71.071267,42.389142],[-71.070945,42.389671]]},"properties":{"osmId":822623866,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":822623866,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/822623867","geometry":{"type":"LineString","coordinates":[[-71.070945,42.389671],[-71.070805,42.389893],[-71.070699,42.39007],[-71.070644,42.390169],[-71.070599,42.390259]]},"properties":{"osmId":822623867,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":822623867,"rightType":"track","rightBuffer":1,"rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1086801846","geometry":{"type":"LineString","coordinates":[[-71.070599,42.390259],[-71.070549,42.390391]]},"properties":{"osmId":1086801846,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"good","lts":2,"cycleway":{"wayOsmId":1086801846,"rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1298911298","geometry":{"type":"LineString","coordinates":[[-71.070549,42.390391],[-71.070542,42.3904],[-71.070468,42.390503],[-71.070397,42.3906],[-71.070065,42.391035]]},"properties":{"osmId":1298911298,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1298911298,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/923417551","geometry":{"type":"LineString","coordinates":[[-71.070065,42.391035],[-71.069723,42.391483],[-71.069654,42.391574],[-71.068987,42.392416],[-71.068913,42.392509],[-71.067847,42.393751],[-71.067799,42.393808]]},"properties":{"osmId":923417551,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":923417551,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1326404261","geometry":{"type":"LineString","coordinates":[[-71.067799,42.393808],[-71.067654,42.393976]]},"properties":{"osmId":1326404261,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1326404261,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1108983906","geometry":{"type":"LineString","coordinates":[[-71.067654,42.393976],[-71.067439,42.394271]]},"properties":{"osmId":1108983906,"name":"Alford Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":2,"cycleway":{"wayOsmId":1108983906,"leftType":"track","leftSeparation":"flex_post","rightType":"track","rightSeparation":"flex_post","rightReversed":1},"trafficCalmed":false}},{"type":"Feature","id":"way/1136392748","geometry":{"type":"LineString","coordinates":[[-71.067439,42.394271],[-71.067355,42.394387]]},"properties":{"osmId":1136392748,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":6,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":4,"cycleway":{"wayOsmId":1136392748,"leftType":"separate","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/688290230","geometry":{"type":"LineString","coordinates":[[-71.067355,42.394387],[-71.067182,42.39448],[-71.066984,42.39468]]},"properties":{"osmId":688290230,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":688290230,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/9080332","geometry":{"type":"LineString","coordinates":[[-71.066984,42.39468],[-71.066718,42.394933],[-71.066564,42.395087],[-71.066426,42.395229],[-71.066409,42.395246],[-71.066392,42.395264],[-71.066339,42.395335]]},"properties":{"osmId":9080332,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":9080332,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1136392747","geometry":{"type":"LineString","coordinates":[[-71.066339,42.395335],[-71.066262,42.395425]]},"properties":{"osmId":1136392747,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1136392747,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/778743955","geometry":{"type":"LineString","coordinates":[[-71.066262,42.395425],[-71.066167,42.395524],[-71.066088,42.3956]]},"properties":{"osmId":778743955,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":778743955,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/923679978","geometry":{"type":"LineString","coordinates":[[-71.066088,42.3956],[-71.065788,42.395933],[-71.065581,42.396154],[-71.065171,42.396606],[-71.065081,42.39669],[-71.064907,42.396871]]},"properties":{"osmId":923679978,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":923679978,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1109063829","geometry":{"type":"LineString","coordinates":[[-71.064907,42.396871],[-71.06461,42.397211],[-71.064546,42.397374]]},"properties":{"osmId":1109063829,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1109063829,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1136392749","geometry":{"type":"LineString","coordinates":[[-71.064546,42.397374],[-71.064451,42.397477],[-71.064393,42.39754]]},"properties":{"osmId":1136392749,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":4,"cycleway":{"wayOsmId":1136392749,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1108989204","geometry":{"type":"LineString","coordinates":[[-71.064393,42.39754],[-71.06403,42.397934],[-71.063965,42.398003],[-71.063903,42.398069],[-71.063789,42.398193]]},"properties":{"osmId":1108989204,"name":"Broadway","highway":"primary","speed":40,"speedSource":"Assumed","lanes":5,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":4,"cycleway":{"wayOsmId":1108989204,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1000386662","geometry":{"type":"LineString","coordinates":[[-71.063789,42.398193],[-71.063675,42.398151],[-71.063612,42.398128],[-71.063546,42.398113],[-71.063396,42.398046],[-71.0632,42.397951],[-71.062759,42.397679],[-71.062716,42.397652]]},"properties":{"osmId":1000386662,"name":"Beacham Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1000386662,"rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/9080315","geometry":{"type":"LineString","coordinates":[[-71.062716,42.397652],[-71.062662,42.397617],[-71.062021,42.397201],[-71.061581,42.396914],[-71.061509,42.396867],[-71.061425,42.396812],[-71.061359,42.396771],[-71.061292,42.396736],[-71.061221,42.396701],[-71.061035,42.39662],[-71.060934,42.396574],[-71.060656,42.39645],[-71.060186,42.396241],[-71.060112,42.396209],[-71.060033,42.396174],[-71.059746,42.396052],[-71.059626,42.396001],[-71.059525,42.395956],[-71.059417,42.395906],[-71.0593,42.395849],[-71.057926,42.395132],[-71.057377,42.394846],[-71.057258,42.394787],[-71.057144,42.394734],[-71.057015,42.39468],[-71.056892,42.394634],[-71.056792,42.394605],[-71.056686,42.394578],[-71.056571,42.394552],[-71.056458,42.39453],[-71.055853,42.394409],[-71.055733,42.394388],[-71.055608,42.394371]]},"properties":{"osmId":9080315,"name":"Beacham Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":9080315,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1144592514","geometry":{"type":"LineString","coordinates":[[-71.055608,42.394371],[-71.055423,42.394351],[-71.055344,42.394342],[-71.055251,42.394331],[-71.054911,42.394295],[-71.054837,42.394294],[-71.054764,42.394299],[-71.054687,42.394311],[-71.054636,42.394323],[-71.054588,42.39434],[-71.054531,42.39436],[-71.054074,42.394595],[-71.053914,42.394677],[-71.053746,42.394764],[-71.053224,42.395032],[-71.053102,42.395098],[-71.052845,42.395236],[-71.05256,42.39539],[-71.052434,42.395457],[-71.052241,42.395555]]},"properties":{"osmId":1144592514,"name":"Beacham Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1144592514,"leftType":"lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1110610259","geometry":{"type":"LineString","coordinates":[[-71.044475,42.392429],[-71.044599,42.392431],[-71.044699,42.392524],[-71.044899,42.392728],[-71.045148,42.392994],[-71.04534,42.393179],[-71.045351,42.393187],[-71.045466,42.393308],[-71.045644,42.393423],[-71.046019,42.393562],[-71.046287,42.393657],[-71.046651,42.39378],[-71.046975,42.393893],[-71.04728,42.39401],[-71.047544,42.394095],[-71.047879,42.3942],[-71.048222,42.394322],[-71.048605,42.394452],[-71.048932,42.394561],[-71.049202,42.394649],[-71.049461,42.394731],[-71.049743,42.394818],[-71.050044,42.394918],[-71.05046,42.395063],[-71.050847,42.395189],[-71.051159,42.395292],[-71.051307,42.395331],[-71.051538,42.395399],[-71.051806,42.395482],[-71.051959,42.39552],[-71.052074,42.395537],[-71.052238,42.39549],[-71.052494,42.395364],[-71.052738,42.395233],[-71.053001,42.395093],[-71.053102,42.395098]]},"properties":{"osmId":1110610259,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1379890280","geometry":{"type":"LineString","coordinates":[[-71.044475,42.392429],[-71.044365,42.392327],[-71.044238,42.392204],[-71.044173,42.392141],[-71.044128,42.392097]]},"properties":{"osmId":1379890280,"name":"Williams Street","highway":"secondary","speed":30,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":4,"cycleway":{"wayOsmId":1379890280,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8617273","geometry":{"type":"LineString","coordinates":[[-71.044128,42.392097],[-71.044028,42.392],[-71.043709,42.391691],[-71.043534,42.391521],[-71.043379,42.391371],[-71.042131,42.390178],[-71.041792,42.389857],[-71.041636,42.389708],[-71.041577,42.389653]]},"properties":{"osmId":8617273,"name":"Williams Street","highway":"secondary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":3,"cycleway":{"wayOsmId":8617273,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/966288370","geometry":{"type":"LineString","coordinates":[[-71.041577,42.389653],[-71.041516,42.389595],[-71.041408,42.389492],[-71.041213,42.389307],[-71.040929,42.389038],[-71.040842,42.388956]]},"properties":{"osmId":966288370,"name":"Williams Street","highway":"secondary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":966288370,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/924058722","geometry":{"type":"LineString","coordinates":[[-71.040842,42.388956],[-71.040782,42.388897],[-71.040724,42.388841],[-71.040524,42.388645],[-71.040472,42.388598],[-71.040429,42.38856],[-71.040396,42.388532],[-71.040355,42.388504],[-71.040321,42.388482],[-71.040281,42.38846],[-71.04024,42.38844],[-71.040197,42.388421],[-71.039865,42.3883],[-71.039796,42.388275]]},"properties":{"osmId":924058722,"name":"Williams Street","highway":"secondary","speed":30,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":924058722,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1263872113","geometry":{"type":"LineString","coordinates":[[-71.039796,42.388275],[-71.039722,42.388247],[-71.039266,42.388074],[-71.039024,42.387985],[-71.038957,42.387963],[-71.038897,42.387944],[-71.038845,42.387932],[-71.038839,42.387931],[-71.038781,42.38792],[-71.038723,42.387914]]},"properties":{"osmId":1263872113,"name":"Williams Street","highway":"secondary","speed":30,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":4,"cycleway":{"wayOsmId":1263872113,"leftType":"shared_lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/93278103","geometry":{"type":"LineString","coordinates":[[-71.038723,42.387914],[-71.038752,42.387864],[-71.03877,42.387832],[-71.038785,42.387806],[-71.039225,42.386976],[-71.039249,42.386923]]},"properties":{"osmId":93278103,"name":"Pearl Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/821595656","geometry":{"type":"LineString","coordinates":[[-71.039316,42.386072],[-71.039316,42.386633],[-71.039316,42.386668],[-71.039314,42.386701],[-71.03931,42.386735],[-71.039304,42.386764],[-71.039297,42.386791],[-71.039287,42.386825],[-71.039272,42.386865],[-71.039259,42.386899],[-71.039249,42.386923]]},"properties":{"osmId":821595656,"name":"Pearl Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":4,"trafficCalmed":false}},{"type":"Feature","id":"way/8617292","geometry":{"type":"LineString","coordinates":[[-71.039316,42.385381],[-71.039316,42.386072]]},"properties":{"osmId":8617292,"name":"Meridian Street","highway":"primary","speed":40,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":4,"trafficCalmed":false}},{"type":"Feature","id":"way/93278101","geometry":{"type":"LineString","coordinates":[[-71.039316,42.383943],[-71.039316,42.38463],[-71.039316,42.385381]]},"properties":{"osmId":93278101,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426640403","geometry":{"type":"LineString","coordinates":[[-71.039315,42.383652],[-71.039316,42.383943]]},"properties":{"osmId":426640403,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/426640404","geometry":{"type":"LineString","coordinates":[[-71.039316,42.382613],[-71.039316,42.382675],[-71.039316,42.382809],[-71.039315,42.383026],[-71.039315,42.383198],[-71.039315,42.383652]]},"properties":{"osmId":426640404,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":3,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/564068740","geometry":{"type":"LineString","coordinates":[[-71.039252,42.380545],[-71.039254,42.380612],[-71.039261,42.38091],[-71.039273,42.38131],[-71.039274,42.381375],[-71.039277,42.381437],[-71.039294,42.381929],[-71.039296,42.381994],[-71.039298,42.382055],[-71.039314,42.382539],[-71.039316,42.382613]]},"properties":{"osmId":564068740,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":564068740,"leftType":"lane","rightType":"shared_lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/923769412","geometry":{"type":"LineString","coordinates":[[-71.03923,42.379418],[-71.039251,42.380489],[-71.039252,42.380545]]},"properties":{"osmId":923769412,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":923769412,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1217036169","geometry":{"type":"LineString","coordinates":[[-71.039208,42.378646],[-71.039209,42.378719],[-71.03923,42.379418]]},"properties":{"osmId":1217036169,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":1217036169,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1392208450","geometry":{"type":"LineString","coordinates":[[-71.03919,42.377832],[-71.039191,42.377859],[-71.039208,42.378459],[-71.039208,42.378594],[-71.039208,42.378646]]},"properties":{"osmId":1392208450,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":1392208450,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8638481","geometry":{"type":"LineString","coordinates":[[-71.039169,42.377139],[-71.039171,42.377197],[-71.039184,42.377594],[-71.03919,42.377832]]},"properties":{"osmId":8638481,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":8638481,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/591493017","geometry":{"type":"LineString","coordinates":[[-71.039107,42.375579],[-71.039111,42.375664],[-71.039141,42.376376],[-71.039143,42.37645],[-71.039167,42.377087],[-71.039169,42.377139]]},"properties":{"osmId":591493017,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":591493017,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/591493027","geometry":{"type":"LineString","coordinates":[[-71.039107,42.375579],[-71.039103,42.375499],[-71.0391,42.375434],[-71.039099,42.375396],[-71.039094,42.375021],[-71.039093,42.374974]]},"properties":{"osmId":591493027,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/1346548991","geometry":{"type":"LineString","coordinates":[[-71.039093,42.374974],[-71.039091,42.374881]]},"properties":{"osmId":1346548991,"name":"Meridian Street","highway":"primary","speed":25,"speedSource":"Signed speed limit","lanes":4,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/817579891","geometry":{"type":"LineString","coordinates":[[-71.039073,42.374234],[-71.039075,42.374289],[-71.039075,42.374316],[-71.039088,42.374781],[-71.039089,42.374806],[-71.039091,42.374881]]},"properties":{"osmId":817579891,"name":"Meridian Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8648440","geometry":{"type":"LineString","coordinates":[[-71.039032,42.372673],[-71.039048,42.373244],[-71.03905,42.373318],[-71.039051,42.373388],[-71.039067,42.373998],[-71.03907,42.374116],[-71.039071,42.374144],[-71.039073,42.374234]]},"properties":{"osmId":8648440,"name":"Meridian Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":8648440,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/126838471","geometry":{"type":"LineString","coordinates":[[-71.039027,42.372507],[-71.039032,42.372673]]},"properties":{"osmId":126838471,"name":"Meridian Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":126838471,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8648485","geometry":{"type":"LineString","coordinates":[[-71.03896,42.37019],[-71.038962,42.370258],[-71.038979,42.370822],[-71.038986,42.371085],[-71.03899,42.371217],[-71.038995,42.37137],[-71.038996,42.371417],[-71.039,42.371549],[-71.039008,42.37181],[-71.039009,42.37186],[-71.039017,42.372136],[-71.039021,42.372281],[-71.039024,42.372374],[-71.039027,42.372507]]},"properties":{"osmId":8648485,"name":"Meridian Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"cycleway":{"wayOsmId":8648485,"leftType":"shared_lane","rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/1207626742","geometry":{"type":"LineString","coordinates":[[-71.03888,42.370089],[-71.038917,42.370118],[-71.038944,42.370153],[-71.03896,42.37019]]},"properties":{"osmId":1207626742,"name":"Maverick Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":1207626742,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/844916689","geometry":{"type":"LineString","coordinates":[[-71.038715,42.370038],[-71.038783,42.370047],[-71.038836,42.370063],[-71.03888,42.370089]]},"properties":{"osmId":844916689,"name":"Maverick Street","highway":"secondary","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"cycleway":{"wayOsmId":844916689,"rightType":"lane"},"trafficCalmed":false}},{"type":"Feature","id":"way/8646181","geometry":{"type":"LineString","coordinates":[[-71.038715,42.370038],[-71.038784,42.369952],[-71.039225,42.3694],[-71.039256,42.369356],[-71.039275,42.369311],[-71.039294,42.369248],[-71.03932,42.369194],[-71.039354,42.369144],[-71.039497,42.368957]]},"properties":{"osmId":8646181,"name":"Maverick Square","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/591493098","geometry":{"type":"LineString","coordinates":[[-71.039497,42.368957],[-71.039575,42.368875],[-71.039615,42.368825]]},"properties":{"osmId":591493098,"name":"Maverick Square","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":1,"lanesSource":"OSM","oneWay":true,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/591493023","geometry":{"type":"LineString","coordinates":[[-71.039615,42.368825],[-71.039563,42.368803],[-71.039278,42.368679],[-71.03899,42.368553],[-71.038908,42.368518]]},"properties":{"osmId":591493023,"name":"Sumner Street","highway":"secondary","speed":35,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"fair","lts":3,"trafficCalmed":false}},{"type":"Feature","id":"way/8643798","geometry":{"type":"LineString","coordinates":[[-71.03998,42.367109],[-71.039833,42.367297],[-71.039652,42.367541],[-71.039478,42.367771],[-71.039041,42.368343],[-71.039034,42.368352],[-71.03896,42.36845],[-71.038908,42.368518]]},"properties":{"osmId":8643798,"name":"South Bremen Street","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"trafficCalmed":false}},{"type":"Feature","id":"way/8643798","geometry":{"type":"LineString","coordinates":[[-71.03998,42.367109]]},"properties":{"osmId":8643798,"name":"South Bremen Street","highway":"residential","speed":25,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":"good","lts":2,"trafficCalmed":false}},{"type":"Feature","id":"way/813710241","geometry":{"type":"LineString","coordinates":[[-71.039966,42.367034],[-71.040018,42.367056]]},"properties":{"osmId":813710241,"name":null,"highway":"footway","speed":15,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/813710240","geometry":{"type":"LineString","coordinates":[[-71.039924,42.36703],[-71.039945,42.367034],[-71.039966,42.367034]]},"properties":{"osmId":813710240,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/813710242","geometry":{"type":"LineString","coordinates":[[-71.039663,42.367165],[-71.039707,42.367139],[-71.039797,42.367103],[-71.039838,42.367087],[-71.039869,42.36707],[-71.039908,42.367023]]},"properties":{"osmId":813710242,"name":null,"highway":"footway","speed":15,"speedSource":"Assumed","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1389906047","geometry":{"type":"LineString","coordinates":[[-71.03938,42.367496],[-71.03941,42.367466],[-71.039489,42.367414],[-71.039527,42.367379],[-71.039564,42.36733],[-71.039663,42.367165]]},"properties":{"osmId":1389906047,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/765980917","geometry":{"type":"LineString","coordinates":[[-71.036202,42.370653],[-71.036366,42.370573],[-71.036485,42.370508],[-71.036901,42.370249],[-71.037053,42.370153],[-71.037191,42.370047],[-71.037324,42.369933],[-71.037459,42.369805],[-71.037895,42.369361],[-71.037978,42.369268],[-71.038067,42.369159],[-71.038151,42.369051],[-71.038529,42.368619],[-71.038609,42.368521],[-71.038993,42.368036],[-71.039066,42.367959],[-71.039139,42.367894],[-71.039221,42.36782],[-71.039266,42.367773],[-71.039301,42.367727],[-71.039326,42.367682],[-71.039336,42.36764],[-71.039345,42.367587],[-71.039362,42.367541],[-71.03938,42.367496]]},"properties":{"osmId":765980917,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1092401162","geometry":{"type":"LineString","coordinates":[[-71.033934,42.372222],[-71.034021,42.372141],[-71.034556,42.371701],[-71.034688,42.371606],[-71.034874,42.371481],[-71.03501,42.371406],[-71.035117,42.37135],[-71.035218,42.371293],[-71.035318,42.371238],[-71.035406,42.371176],[-71.035503,42.371116],[-71.035599,42.371063],[-71.035817,42.370926],[-71.035885,42.370879],[-71.036062,42.37074],[-71.036202,42.370653]]},"properties":{"osmId":1092401162,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/768161562","geometry":{"type":"LineString","coordinates":[[-71.033899,42.372255],[-71.033934,42.372222]]},"properties":{"osmId":768161562,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/765980916","geometry":{"type":"LineString","coordinates":[[-71.033865,42.372286],[-71.033899,42.372255]]},"properties":{"osmId":765980916,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/767983541","geometry":{"type":"LineString","coordinates":[[-71.033332,42.372822],[-71.033396,42.372759],[-71.033538,42.37261],[-71.03371,42.372431],[-71.033728,42.372414],[-71.033852,42.372298],[-71.033865,42.372286]]},"properties":{"osmId":767983541,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459870","geometry":{"type":"LineString","coordinates":[[-71.027858,42.377443],[-71.027969,42.377351],[-71.028278,42.377086],[-71.028353,42.377015],[-71.028398,42.376965],[-71.028493,42.376851],[-71.028582,42.376764],[-71.028685,42.376658],[-71.02883,42.376543],[-71.02891,42.376467],[-71.028992,42.376384],[-71.029064,42.376306],[-71.029141,42.37623],[-71.029224,42.376165],[-71.029313,42.376098],[-71.029399,42.376034],[-71.029463,42.375982],[-71.029522,42.375925],[-71.029586,42.37586],[-71.029656,42.375786],[-71.029753,42.375693],[-71.029852,42.375604],[-71.029951,42.375521],[-71.030069,42.375424],[-71.03015,42.375368],[-71.030159,42.375362],[-71.030388,42.375198],[-71.030665,42.374991],[-71.030755,42.374929],[-71.030834,42.37486],[-71.030894,42.374801],[-71.030962,42.374728],[-71.031042,42.374622],[-71.031104,42.374539],[-71.031189,42.374448],[-71.031265,42.374382],[-71.031367,42.374317],[-71.031464,42.374243],[-71.031547,42.37418],[-71.031596,42.374131],[-71.031625,42.374103],[-71.031705,42.37401],[-71.031791,42.373919],[-71.031882,42.373833],[-71.031987,42.373744],[-71.032091,42.373669],[-71.032199,42.37359],[-71.032284,42.373514],[-71.032376,42.373437],[-71.03245,42.373368],[-71.032528,42.373301],[-71.032609,42.373241],[-71.032706,42.373176],[-71.032786,42.373128],[-71.03299,42.373027],[-71.0331,42.372977],[-71.033186,42.37293],[-71.033264,42.37288],[-71.033332,42.372822]]},"properties":{"osmId":667459870,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/812876291","geometry":{"type":"LineString","coordinates":[[-71.02649,42.378442],[-71.02655,42.378445],[-71.026593,42.378441],[-71.02666,42.378414],[-71.026743,42.37835],[-71.026773,42.378319],[-71.026804,42.378273],[-71.026875,42.378176],[-71.026934,42.378109],[-71.027009,42.378039],[-71.027113,42.377962],[-71.027205,42.377891],[-71.027285,42.377825],[-71.027363,42.377772],[-71.027435,42.377722],[-71.027711,42.377556],[-71.027779,42.377507],[-71.027845,42.377453],[-71.027858,42.377443]]},"properties":{"osmId":812876291,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459871","geometry":{"type":"LineString","coordinates":[[-71.026085,42.37828],[-71.026174,42.378336],[-71.02622,42.378355],[-71.026362,42.378413],[-71.02642,42.378428],[-71.02649,42.378442]]},"properties":{"osmId":667459871,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/812876293","geometry":{"type":"LineString","coordinates":[[-71.025885,42.378323],[-71.025927,42.378291],[-71.025962,42.378269],[-71.026004,42.378256],[-71.026046,42.378259],[-71.026085,42.37828]]},"properties":{"osmId":812876293,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/812876292","geometry":{"type":"LineString","coordinates":[[-71.025626,42.378571],[-71.025732,42.378469],[-71.025781,42.378423],[-71.025816,42.378391],[-71.025885,42.378323]]},"properties":{"osmId":812876292,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":812876292,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/767392330","geometry":{"type":"LineString","coordinates":[[-71.025491,42.378699],[-71.025626,42.378571]]},"properties":{"osmId":767392330,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/812876292","geometry":{"type":"LineString","coordinates":[[-71.025626,42.378571],[-71.025732,42.378469],[-71.025781,42.378423],[-71.025816,42.378391],[-71.025885,42.378323]]},"properties":{"osmId":812876292,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":812876292,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/767392330","geometry":{"type":"LineString","coordinates":[[-71.025491,42.378699],[-71.025626,42.378571]]},"properties":{"osmId":767392330,"name":"Mary Ellen Welch Greenway","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/453563181","geometry":{"type":"LineString","coordinates":[[-71.025491,42.378699],[-71.025402,42.378654],[-71.025331,42.378617]]},"properties":{"osmId":453563181,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":453563181,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/812876294","geometry":{"type":"LineString","coordinates":[[-71.025331,42.378617],[-71.025311,42.378606],[-71.025275,42.378587],[-71.025229,42.378571],[-71.02519,42.378563],[-71.025161,42.378564],[-71.025142,42.37857],[-71.025131,42.378578]]},"properties":{"osmId":812876294,"name":"East Boston Greenway Connector","highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459874","geometry":{"type":"LineString","coordinates":[[-71.025131,42.378578],[-71.02492,42.378724],[-71.024679,42.378865],[-71.024422,42.378993],[-71.024132,42.379111],[-71.023988,42.379163],[-71.023817,42.379229],[-71.023696,42.379276]]},"properties":{"osmId":667459874,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/453563524","geometry":{"type":"LineString","coordinates":[[-71.023696,42.379276],[-71.023542,42.379325],[-71.023497,42.379337],[-71.023454,42.379345],[-71.023321,42.379357]]},"properties":{"osmId":453563524,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1180108681","geometry":{"type":"LineString","coordinates":[[-71.023321,42.379357],[-71.023252,42.37936],[-71.023125,42.379362],[-71.02306,42.379373],[-71.022992,42.379393]]},"properties":{"osmId":1180108681,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/1180108682","geometry":{"type":"LineString","coordinates":[[-71.022992,42.379393],[-71.022994,42.379396]]},"properties":{"osmId":1180108682,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459877","geometry":{"type":"LineString","coordinates":[[-71.022994,42.379396],[-71.022553,42.379569],[-71.022024,42.379778],[-71.021899,42.37984],[-71.021839,42.37987]]},"properties":{"osmId":667459877,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/758379105","geometry":{"type":"LineString","coordinates":[[-71.021839,42.37987],[-71.021752,42.37991],[-71.021581,42.38001],[-71.021514,42.380043],[-71.021467,42.380063]]},"properties":{"osmId":758379105,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459880","geometry":{"type":"LineString","coordinates":[[-71.021467,42.380063],[-71.021385,42.380085],[-71.021243,42.380114],[-71.02092,42.380155],[-71.020726,42.380171],[-71.020455,42.380182],[-71.018436,42.380171],[-71.018243,42.380174],[-71.018038,42.380185],[-71.017786,42.380216],[-71.017534,42.380256],[-71.017247,42.380324],[-71.017079,42.380374],[-71.016976,42.380406],[-71.016858,42.380447],[-71.016619,42.380535],[-71.016484,42.380595],[-71.016399,42.380632],[-71.016271,42.380692],[-71.016064,42.380803]]},"properties":{"osmId":667459880,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/453564124","geometry":{"type":"LineString","coordinates":[[-71.016064,42.380803],[-71.015987,42.380846],[-71.015925,42.380892],[-71.015076,42.381523]]},"properties":{"osmId":453564124,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/637960990","geometry":{"type":"LineString","coordinates":[[-71.015076,42.381523],[-71.014934,42.381629]]},"properties":{"osmId":637960990,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/637960989","geometry":{"type":"LineString","coordinates":[[-71.014934,42.381629],[-71.012584,42.383379]]},"properties":{"osmId":637960989,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/453564125","geometry":{"type":"LineString","coordinates":[[-71.012584,42.383379],[-71.012285,42.383597],[-71.01224,42.383625],[-71.012196,42.383652],[-71.012154,42.383679]]},"properties":{"osmId":453564125,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/667459883","geometry":{"type":"LineString","coordinates":[[-71.012154,42.383679],[-71.012097,42.383702],[-71.012011,42.383731],[-71.011924,42.383761],[-71.011868,42.383785],[-71.011759,42.38384],[-71.01166,42.383906],[-71.011573,42.38398],[-71.011504,42.384062],[-71.011457,42.384123],[-71.011367,42.384214],[-71.011317,42.38426],[-71.01129,42.384277],[-71.01127,42.384282],[-71.011244,42.384279],[-71.0112,42.384263]]},"properties":{"osmId":667459883,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/812876296","geometry":{"type":"LineString","coordinates":[[-71.0112,42.384263],[-71.011133,42.384229],[-71.011101,42.384212]]},"properties":{"osmId":812876296,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"cycleway":{"wayOsmId":812876296,"leftType":"crossing","rightType":"crossing"},"trafficCalmed":false}},{"type":"Feature","id":"way/812876297","geometry":{"type":"LineString","coordinates":[[-71.011101,42.384212],[-71.011063,42.384232],[-71.011022,42.38421],[-71.011,42.384192]]},"properties":{"osmId":812876297,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}},{"type":"Feature","id":"way/129032477","geometry":{"type":"LineString","coordinates":[[-71.010746,42.383997],[-71.010864,42.384071],[-71.011,42.384192]]},"properties":{"osmId":129032477,"name":null,"highway":"cycleway","speed":0,"speedSource":"Signed speed limit","lanes":2,"lanesSource":"OSM","oneWay":false,"condition":null,"lts":1,"trafficCalmed":false}}]}');function ke(e){return ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ke(e)}function Pe(e){var t=function(e,t){if("object"!=ke(e)||!e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var r=i.call(e,t||"default");if("object"!=ke(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ke(t)?t:t+""}function Oe(e,t,i){return(t=Pe(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function Re(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function ze(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(i),!0).forEach(function(t){Oe(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Re(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}const De="https://overpass-api.de/api/interpreter";const Fe=e=>{console.log("".concat(new Date(Date.now()).toISOString()," Overpass: ").concat(e))};class Be extends Error{constructor(e){super("Overpass Error: ".concat(e))}}const Ve={endpoint:De,verbose:!1,userAgent:"overpass-ts"},Ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=Object.assign({},Ve,t);i.verbose&&(Fe("endpoint ".concat(i.endpoint)),Fe("query ".concat(e)));const r={body:"data=".concat(encodeURIComponent(e)),method:"POST",mode:"cors",redirect:"follow",headers:{Accept:"*","Cache-control":"no-cache",Pragma:"no-cache","User-Agent":i.userAgent}};return fetch(i.endpoint,r).then(async t=>{if(!t.ok)switch(t.status){case 400:const i=((e,t)=>{let i,r=[];for(;i=e.exec(t);)r.push(i[1]);return r})(/<\/strong>: ([^<]+) <\/p>/g,await t.text()).map(e=>e.replace(/&quot;/g,'"'));throw new He(e,i);case 429:throw new je;case 504:throw new We;default:throw new Be("".concat(t.status," ").concat(t.statusText))}var r;return i.verbose&&t.headers.has("content-length")&&Fe("response payload ".concat((r=parseInt(t.headers.get("content-length")))>1048576?"".concat(Math.round(r/1048576*100)/100,"MiB"):"".concat(Math.round(r/1024*100)/100,"KiB"))),t})},Ue=function(e){return Ne(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).then(e=>e.json()).then(e=>{if(e.remark)throw new Ze([e.remark]);return e})};class je extends Be{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;super("429 Rate Limit Exceeded"),Oe(this,"apiStatus",void 0),this.apiStatus=e}}class He extends Be{constructor(e,t){super(["400 Bad Request\n","Errors:\n  ",t.join("\n  "),"\n","Query:\n  ",e.replace(/\n/g,"\n  ")].join("")),Oe(this,"errors",void 0),Oe(this,"query",void 0),this.errors=t,this.query=e}}class Ze extends Be{constructor(e){super(e.join("\n  ")),Oe(this,"errors",void 0),this.errors=e}}class We extends Be{constructor(){super("504 Gateway Timeout")}}function Ge(e){const t=Qe(e);if(!t.permitted)return t.result;const i=function(e){let t="",i=[];Xe(e,"highway","path")?(t="s1",i.push("This way is a separated path because highway='path'.")):Xe(e,"highway","footway")&&!Xe(e,"footway","crossing")?(t="s2",i.push("This way is a separated path because highway='footway' but it is not a crossing.")):Xe(e,"highway","cycleway")?(t="s3",i.push("This way is a separated path because highway='cycleway'.")):Xe(e,"highway","construction")?Xe(e,"construction","path")?(t="s4",i.push("This way is a separated path because highway='construction' and construction='path'.")):Xe(e,"construction","footway")?(t="s5",i.push("This way is a separated path because highway='construction' and construction='footway'.")):Xe(e,"construction","cycleway")&&(t="s6",i.push("This way is a separated path because highway='construction' and construction='cycleway'.")):Ye(e,"cycleway","track")?(t="s7",i.push("This way is a separated path because cycleway* is defined as 'track'.")):Ye(e,"cycleway","opposite_track")&&(t="s8",i.push("This way is a separated path because cycleway* is defined as 'opposite_track'."));if(t)return i.push("Separated paths are always LTS=1."),{isSeparatedPath:!0,result:{lts:1,message:i,rule:t}};return{isSeparatedPath:!1}}(e);if(i.isSeparatedPath)return i.result;const r=function(e){let t,i=!1,r=[];if(Ye(e,"cycleway","crossing")||Ye(e,"cycleway","lane")||Ye(e,"cycleway","left")||Ye(e,"cycleway","opposite")||Ye(e,"cycleway","opposite_lane")||Ye(e,"cycleway","right")||Ye(e,"cycleway","yes")){i=!0;for(let t in e.tags)t.startsWith("cycleway")&&r.push("Way has a bike lane because '"+t+"'='"+e.tags[t]+"'.")}if(Xe(e,"shoulder:access:bicycle","yes")){var n;i=!0,r.push("Way has a bike lane because shoulder:access:bicycle='"+(null===e||void 0===e||null===(n=e.tags)||void 0===n?void 0:n["shoulder:access:bicycle"])+"'.")}if(i){const i=function(e){if(Xe(e,"parking","yes"))return{parking:!0,message:["Found tag 'parking'='yes'. Parking is present."]};if(function(e,t){for(let i in e.tags)if(i.startsWith(t))return!0;return!1}(e,"parking:"))for(let t in e.tags)if(t.startsWith("parking:lane")){const i=e.tags[t];if("parallel"===i||"perpendicular"===i||"diagonal"===i||"yes"===i||"marked"===i)return{parking:!0,message:["Found tag '".concat(t,"'='").concat(i,"'. Parking is present.")]}}return{parking:!1,message:["Parking is not present."]}}(e);return i.message.length>0&&r.push(...i.message),i.parking?(t=function(e,t){let i="";const r=Xe(e,"highway","residential"),n=99999.9,o=Ke(e),a=o.lanes;o.message.length>0&&t.push(...o.message);const s=Je(e),l=s.maxspeed;s.message.length>0&&t.push(...s.message);let c=1;a>=3&&c<3&&(i="b2",t.push("Increasing LTS to 3 because there are 3 or more lanes and parking present."),c=3);n<=4.1?c<3&&(i="b3",t.push("Increasing LTS to 3 because the bike lane width is less than 4.1m and parking present."),c=3):n<=4.25?c<2&&(i="b4",t.push("Increasing LTS to 2 because the bike lane width is less than 4.25m and parking present."),c=2):n<4.5&&(l<25||r)&&c<2&&(i="b5",t.push("Increasing LTS to 2 because the bike lane width is less than 4.5m. maxspeed is less than 25 mph on a residential street and parking present."),c=2);l>25&&(l<=30?c<2&&(i="b6",t.push("Increasing LTS to 2 because the maxspeed is between 25-30 mph and parking present."),c=2):l<=35?c<3&&(i="b7",t.push("Increasing LTS to 3 because the maxspeed is between 30-35 km/h and parking present."),c=3):c<4&&(i="b8",t.push("Increasing LTS to 4 because the maxspeed is over 35 mph and parking present."),c=4));r||c<3&&(i="b9",t.push("Increasing LTS to 3 because highway is not 'residential'."),c=3);1===c&&(i="b1",t.push("LTS is 1 because there is parking present, the maxspeed is less than or equal to 25mph, highway='residential', and there are 2 lanes or less."));return{lts:c,message:t,rule:i}}(e,r),{isBikeLane:!0,result:t}):(t=function(e,t){let i="";const r=Xe(e,"highway","residential"),n=99999.9,o=Ke(e),a=o.lanes;o.message.length>0&&t.push(...o.message);const s=Je(e),l=s.maxspeed;s.message.length>0&&t.push(...s.message);let c=1;a>=3&&c<3&&(i="c3",t.push("Increasing LTS to 3 because there are 3 or more lanes and no parking."),c=3);n<=1.7&&c<2&&(i="c4",t.push("Increasing LTS to 2 because the bike lane width is less than 1.7 metres and no parking."),c=2);l>30&&(l<=40?c<3&&(i="c5",t.push("Increasing LTS to 3 because the maxspeed is between 30-40 mph and no parking."),c=3):c<4&&(i="c6",t.push("Increasing LTS to 4 because the maxspeed is over 40 mph and no parking."),c=4));r||c<3&&(i="c7",t.push("Increasing LTS to 3 because highway with bike lane is not 'residential' and no parking."),c=3);1===c&&(i="c1",t.push("LTS is 1 because there is no parking, maxspeed is less than or equal to 30 mph, highway='residential', and there are 2 lanes or less."));return{lts:c,message:t,rule:i}}(e,r),{isBikeLane:!0,result:t})}return{isBikeLane:!1}}(e);if(r.isBikeLane)return r.result;const n=function(e){let t=["Does not meet criteria for Separated Path or Bike Lane. Treating as Mixed Traffic."];const i=Xe(e,"highway","residential"),r=Ke(e),n=r.lanes;r.message.length>0&&t.push(...r.message);const o=Je(e);let a=o.maxspeed;o.message.length>0&&t.push(...o.message);if(Xe(e,"motor_vehicle","no"))return t.push("Setting LTS to 1 because motor_vehicle='no'."),{isMixedTraffic:!0,result:{lts:1,message:t,rule:"m17"}};if(Xe(e,"highway","steps"))return t.push("Setting LTS to 1 because highway='steps'."),{isMixedTraffic:!0,result:{lts:1,message:t,rule:"m1"}};if(Xe(e,"highway","pedestrian"))return t.push("Setting LTS to 1 because highway='pedestrian'."),{isMixedTraffic:!0,result:{lts:1,message:t,rule:"m13"}};if(Xe(e,"highway","footway")&&Xe(e,"footway","crossing"))return t.push("Setting LTS to 2 because highway='footway' and footway='crossing'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m14"}};if(Xe(e,"highway","service")&&Xe(e,"service","alley"))return t.push("Setting LTS to 2 because highway='service' and service='alley'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m2"}};if(Xe(e,"highway","track"))return t.push("Setting LTS to 2 because highway='track'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m15"}};if(a<=30){if(Xe(e,"highway","service")){if(Xe(e,"service","parking_aisle"))return t.push("Setting LTS to 2 because maxspeed is 30 mph or less and service is 'parking_aisle'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m3"}};if(Xe(e,"service","driveway"))return t.push("Setting LTS to 2 because maxspeed is 30 mph or less and service is 'driveway'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m4"}};if(a<=25)return t.push("Setting LTS to 2 because maxspeed is less than 25 mph and highway='service'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m16"}}}return a<=25?n<=3&&i?(t.push("Setting LTS to 2 because maxspeed is up to 25 mph, 3 or fewer lanes and highway='residential'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m5"}}):n<=3?(t.push("Setting LTS to 3 because maxspeed is up to 25 mph and 3 or fewer lanes on non-residential highway."),{isMixedTraffic:!0,result:{lts:3,message:t,rule:"m6"}}):n<=5?(t.push("Setting LTS to 3 because maxspeed is up to 25 mph and 4 or 5 lanes."),{isMixedTraffic:!0,result:{lts:3,message:t,rule:"m7"}}):(t.push("Setting LTS to 4 because maxspeed is up to 25 mph and the number of lanes is greater than 5."),{isMixedTraffic:!0,result:{lts:4,message:t,rule:"m8"}}):n<3&&i?(t.push("Setting LTS to 2 because maxspeed is up to 30 mph and lanes are 2 or less and highway='residential'."),{isMixedTraffic:!0,result:{lts:2,message:t,rule:"m9"}}):n<=3?(t.push("Setting LTS to 3 because maxspeed is up to 30 mph and lanes are 3 or less on non-residential highway."),{isMixedTraffic:!0,result:{lts:3,message:t,rule:"m10"}}):(t.push("Setting LTS to 4 because the number of lanes is greater than 3."),{isMixedTraffic:!0,result:{lts:4,message:t,rule:"m11"}})}return t.push("Setting LTS to 4 because maxspeed is greater than 30 mph."),{isMixedTraffic:!0,result:{lts:4,message:t,rule:"m12"}}}(e);return n.isMixedTraffic?n.result:{lts:0,message:["Error: This way does not match any of the analysis criteria."]}}function qe(e,t){var i;return"undefined"!==typeof(null===e||void 0===e||null===(i=e.tags)||void 0===i?void 0:i[t])}function Xe(e,t,i){var r;let n=null===e||void 0===e||null===(r=e.tags)||void 0===r?void 0:r[t];return"undefined"!==typeof n&&n===i}function Ye(e,t,i){for(let r in e.tags)if(r.startsWith(t)&&e.tags[r]===i)return!0;return!1}function Ke(e){var t;let i;if(null!==e&&void 0!==e&&null!==(t=e.tags)&&void 0!==t&&t.lanes){const t=e.tags.lanes;if(-1===t.indexOf(";"))return i=parseInt(t),isNaN(i)?{lanes:2,message:["Error: Unknown 'lanes' tag: '".concat(t,"'. Assuming default of '").concat(2,"'.")]}:{lanes:i,message:[]};{let e=t.split(";"),r=0;for(let n in e){if(i=parseInt(n),isNaN(i))return{lanes:2,message:["Error: Unknown 'lanes' tag in split value: '".concat(t,"'. Assuming default of '").concat(2,"'.")]};r+=i}return{lanes:r,message:["Split 'lanes' tag. Using total of all elements."]}}}return{lanes:2,message:["No 'lanes' tag. Assuming default of '".concat(2,".")]}}function Je(e){var t;if(null!==e&&void 0!==e&&null!==(t=e.tags)&&void 0!==t&&t.maxspeed){const t=e.tags.maxspeed,i=t.includes("mph")?parseInt(t.split(" ")[0]):Math.round(.62137119*parseInt(t));return isNaN(i)?{maxspeed:50,message:["Error: Unknown 'maxspeed' tag value '".concat(t,"'. Assuming a value of '50 mph'.")]}:{maxspeed:i,message:[]}}{var i;const t=null===e||void 0===e||null===(i=e.tags)||void 0===i?void 0:i.highway;switch(t){case"motorway":return{maxspeed:65,message:["No maxspeed tag. Using default value of 65 mph when highway=motorway."]};case"trunk":return{maxspeed:45,message:["No maxspeed tag. Using default value of 45 mph when highway=trunk."]};case"primary":return{maxspeed:30,message:["No maxspeed tag. Using default value of 30 mph when highway=primary."]};case"secondary":case"residential":return{maxspeed:25,message:["No maxspeed tag. Using default value of 25 mph when highway=".concat(t,".")]};default:return{maxspeed:50,message:["No maxspeed tag. Using default value of 50 mph when highway='".concat(t,"'.")]}}}}function Qe(e){return qe(e,"highway")||qe(e,"bicycle")?Xe(e,"bicycle","no")?{permitted:!1,result:{lts:0,message:["Cycling not permitted due to bicycle='no' tag."],rule:"p2"}}:Xe(e,"access","no")?{permitted:!1,result:{lts:0,message:["Cycling not permitted due to access='no' tag."],rule:"p6"}}:Xe(e,"highway","motorway")?{permitted:!1,result:{lts:0,message:["Cycling not permitted due to highway='motorway' tag."],rule:"p3"}}:Xe(e,"highway","motorway_link")?{permitted:!1,result:{lts:0,message:["Cycling not permitted due to highway='motorway_link' tag."],rule:"p4"}}:Xe(e,"highway","proposed")?{permitted:!1,result:{lts:0,message:["Cycling not permitted due to highway='proposed' tag."],rule:"p7"}}:Xe(e,"footway","sidewalk")&&!Xe(e,"bicycle","yes")&&(Xe(e,"highway","footway")||Xe(e,"highway","path"))?{permitted:!1,result:{lts:0,message:["Cycling not permitted. When footway='sidewalk' is present, there must be a bicycle='yes' when the highway is 'footway' or 'path'."],rule:"p5"}}:{permitted:!0,message:[]}:{permitted:!1,result:{lts:0,message:["Way has neither a highway tag nor a bicycle=yes tag. The way is not a highway."],rule:"p1"}}}var $e=i(411),et=i.n($e);function tt(e){return null!==e&&void 0!==e}const it=async e=>{const t=await async function(e){const t=e.filter(e=>"way"==e.type&&!e.nodesSubset).map(e=>e.id).join(",");return Ue("[out:json];way(id:".concat(t,");out geom;"),{endpoint:"https://overpass.private.coffee/api/interpreter"})}(e),i=new Map(t.elements.map(e=>[e.id,e])),r=await async function(e){const t=[],i=[],r=e.filter(e=>"way"==e.type&&e.nodesSubset);if(r.forEach(e=>{t.push(...e.nodesSubset||[]),i.push(e.id)}),0===r.length)return Promise.resolve(void 0);const n=await Ue(((e,t)=>"\n    [out:json]\n    [timeout:25];\n    node(id:".concat(e.join(","),");\n    way(bn)->.b;\n    way.b(id:").concat(t.join(","),")->.c;\n    .c out geom;\n    out;\n    "))(t,i),{endpoint:"https://overpass.private.coffee/api/interpreter"}),o=n.elements.filter(e=>"way"==e.type);for(const s of o){var a;const e=new Set((null===(a=r.find(e=>e.id===s.id))||void 0===a?void 0:a.nodesSubset)||[]),t=new Map(n.elements.filter(t=>e.has(t.id)).map(e=>[e.id,e])),i=s.nodes.filter(e=>t.has(e)).map(e=>(e=>{let{lat:t,lon:i}=e;return{lat:t,lon:i}})(t.get(e)));s.geometry=i,s.nodes=s.nodes.filter(t=>e.has(t))}return ze(ze({},n),{},{elements:o})}(e)||{elements:[]},n=new Map(r.elements.map(e=>[e.id,e])),o=e.map(e=>i.get(e.id)||n.get(e.id)).filter(tt);return o.forEach(e=>{var t=Ge(e);e.tags=ze(ze({},e.tags),{},{lts:(null===t||void 0===t?void 0:t.lts.toString())||"4",ltsMessage:JSON.stringify((null===t||void 0===t?void 0:t.message)||[])})}),et()({elements:o})},rt=JSON.parse('[{"type":"way","id":1281853741,"notes":"Hyde Park Avenue"},{"type":"way","id":211843641,"notes":"Hyde Park Avenue"},{"type":"way","id":1281853743,"notes":"Hyde Park Avenue"},{"type":"way","id":8650072,"notes":"Hyde Park Avenue"},{"type":"way","id":213575595,"notes":"Hyde Park Avenue"},{"type":"way","id":213181301,"notes":"Hyde Park Avenue"},{"type":"way","id":213181303,"notes":"Hyde Park Avenue"},{"type":"way","id":1308541146,"notes":"Hyde Park Avenue"},{"type":"way","id":1281855203,"notes":"Hyde Park Avenue"},{"type":"way","id":426605297,"notes":"Hyde Park Avenue"},{"type":"way","id":1193863248,"notes":"Hyde Park Avenue"},{"type":"way","id":591278001,"notes":"Hyde Park Avenue"},{"type":"way","id":426605292,"notes":"Hyde Park Avenue"},{"type":"way","id":426605283,"notes":"Hyde Park Avenue"},{"type":"way","id":426605288,"notes":"Hyde Park Avenue"},{"type":"way","id":426605951,"notes":"Hyde Park Avenue"},{"type":"way","id":426605953,"notes":"Hyde Park Avenue"},{"type":"way","id":426605952,"notes":"Hyde Park Avenue"},{"type":"way","id":8647562,"notes":"Hyde Park Avenue"},{"type":"way","id":924363423,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":591252081,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":740715954,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":508839214,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":814462294,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":1007553660,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":1354758328,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":924168452,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":924168451,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":924114927,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":924066372,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":1212698797,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":924066373,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":814462293,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":741172409,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":814457646,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":814457645,"notes":"Hyde Park Avenue Southbound"},{"type":"way","id":737808549,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":737808551,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":740715952,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":737808550,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":508217064,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":1007553662,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":924168450,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":924114926,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":924066370,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":1354758326,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":924066369,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":741172408,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":1354758322,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":741172410,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":649263020,"notes":"Hyde Park Avenue Northbound"},{"type":"way","id":8648734,"notes":"Hyde Park Avenue"},{"type":"way","id":1288212514,"notes":"Hyde Park Avenue"},{"type":"way","id":8648458,"notes":"Ukraine Way Eastbound"},{"type":"way","id":139333577,"notes":"Ukraine Way Eastbound"},{"type":"way","id":139333583,"notes":"Ukraine Way Eastbound"},{"type":"way","id":139333575,"notes":"Ukraine Way Westbound"},{"type":"way","id":139333581,"notes":"Ukraine Way Westbound"},{"type":"way","id":8645238,"notes":"Ukraine Way Westbound"},{"type":"way","id":139439563,"notes":"Washington/Poplar"},{"type":"way","id":8649554,"notes":"Poplar Street Southbound"},{"type":"way","id":591278077,"notes":"South Street Southbound"},{"type":"way","id":591252063,"notes":"South Street Southbound"},{"type":"way","id":426442093,"notes":"Washington Street Northbound"},{"type":"way","id":426442090,"notes":"Washington Street Northbound"},{"type":"way","id":1212704453,"notes":"Washington Street Northbound"},{"type":"way","id":426442089,"notes":"Washington Street Northbound"},{"type":"way","id":8650869,"notes":"Washington Street Northbound"},{"type":"way","id":1334140856,"notes":"Washington Street"},{"type":"way","id":1334140857,"notes":"Washington Street"},{"type":"way","id":1176653039,"notes":"Washington Street"},{"type":"way","id":1176653038,"notes":"Washington Street"},{"type":"way","id":139439567,"notes":"Washington Street"},{"type":"way","id":1288190830,"notes":"Washington Street"},{"type":"way","id":1088529935,"notes":"Washington Street"},{"type":"way","id":1033100081,"notes":"Washington Street"},{"type":"way","id":1329964462,"notes":"Forest Hills Southbound"},{"type":"way","id":1329964463,"notes":"Forest Hills Southbound"},{"type":"way","id":825315811,"notes":"Forest Hills Southbound","nodesSubset":[7706308178,12381360652,11946317668,12381360642,11946317647,12381360641,11946317648,11946317649,11946317650,11946322569,11946317651,12381360681,11946317652,11946317653,11946322609,11946317654,11946317655,12111607955,11946322571,11946322572,11946317657,12381360682,11946317658,12381360683,11946317659,11946322573,11946317660,11946322575,11946322574,11946317661,11946322576,11946317662,11946322577,11946322579,11946322578,11946317663,11946322580,12304951153]},{"type":"way","id":970452868,"notes":"Forest Hills Southbound"},{"type":"way","id":825315813,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1338511468,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1329963000,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1092440558,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1092440559,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1092440560,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1092440561,"notes":"Forest Hills Cycletrack"},{"type":"way","id":825315810,"notes":"Forest Hills Cycletrack"},{"type":"way","id":1092491910,"notes":"Forest Hills Crossing"},{"type":"way","id":1092698145,"notes":"Forest Hills Crossing"},{"type":"way","id":1092491902,"notes":"Forest Hills Crossing"},{"type":"way","id":1092698152,"notes":"Forest Hills Crossing"},{"type":"way","id":1092698144,"notes":"Forest Hills Crossing"},{"type":"way","id":825315808,"notes":"Southwest Corridor"},{"type":"way","id":1113383245,"notes":"Southwest Corridor"},{"type":"way","id":970452858,"notes":"Southwest Corridor Bike Roundabout!"},{"type":"way","id":970452857,"notes":"Southwest Corridor"},{"type":"way","id":170646335,"notes":"Southwest Corridor"},{"type":"way","id":959902023,"notes":"Southwest Corridor"},{"type":"way","id":1083635638,"notes":"Southwest Corridor"},{"type":"way","id":1113383241,"notes":"Southwest Corridor"},{"type":"way","id":1092239230,"notes":"Southwest Corridor"},{"type":"way","id":1092239227,"notes":"Southwest Corridor"},{"type":"way","id":220595104,"notes":"Southwest Corridor"},{"type":"way","id":1083635639,"notes":"Southwest Corridor"},{"type":"way","id":1083635640,"notes":"Southwest Corridor"},{"type":"way","id":968253495,"notes":"Southwest Corridor"},{"type":"way","id":969386981,"notes":"Southwest Corridor"},{"type":"way","id":969386980,"notes":"Southwest Corridor"},{"type":"way","id":969440902,"notes":"Southwest Corridor"},{"type":"way","id":969440903,"notes":"Southwest Corridor"},{"type":"way","id":1050580856,"notes":"Southwest Corridor"},{"type":"way","id":968253494,"notes":"Southwest Corridor"},{"type":"way","id":727902008,"notes":"Southwest Corridor"},{"type":"way","id":727902007,"notes":"Southwest Corridor"},{"type":"way","id":1281288100,"notes":"Southwest Corridor"},{"type":"way","id":727902006,"notes":"Southwest Corridor"},{"type":"way","id":727902004,"notes":"Southwest Corridor"},{"type":"way","id":727902005,"notes":"Southwest Corridor"},{"type":"way","id":1281288097,"notes":"Southwest Corridor"},{"type":"way","id":1281288098,"notes":"Southwest Corridor"},{"type":"way","id":127381926,"notes":"Southwest Corridor"},{"type":"way","id":1087041470,"notes":"Southwest Corridor"},{"type":"way","id":1087041469,"notes":"Southwest Corridor"},{"type":"way","id":1083635643,"notes":"Southwest Corridor"},{"type":"way","id":1281288094,"notes":"Southwest Corridor"},{"type":"way","id":89534810,"notes":"Southwest Corridor"},{"type":"way","id":668284028,"notes":"Southwest Corridor"},{"type":"way","id":570815191,"notes":"Southwest Corridor"},{"type":"way","id":1201197712,"notes":"Southwest Corridor"},{"type":"way","id":1201197713,"notes":"Southwest Corridor"},{"type":"way","id":1271777005,"notes":"Southwest Corridor"},{"type":"way","id":301737839,"notes":"Southwest Corridor"},{"type":"way","id":1370936861,"notes":"Southwest Corridor"},{"type":"way","id":1083635647,"notes":"Southwest Corridor"},{"type":"way","id":186640200,"notes":"Southwest Corridor"},{"type":"way","id":1083635648,"notes":"Southwest Corridor"},{"type":"way","id":383938869,"notes":"Southwest Corridor"},{"type":"way","id":485286879,"notes":"Southwest Corridor","nodesSubset":[61362231,1325750549,7623711936,9930557335,6821190124]},{"type":"way","id":426462252,"notes":"Massachussetts Avenue Southbound"},{"type":"way","id":485286878,"notes":"Massachussetts Avenue Southbound"},{"type":"way","id":426462236,"notes":"Massachussetts Avenue Southbound"},{"type":"way","id":426462212,"notes":"Columbus Avenue"},{"type":"way","id":426462210,"notes":"Columbus Avenue"},{"type":"way","id":420501710,"notes":"Columbus Avenue"},{"type":"way","id":485292826,"notes":"Columbus Avenue"},{"type":"way","id":383058042,"notes":"Columbus Avenue"},{"type":"way","id":533474631,"notes":"Columbus Avenue"},{"type":"way","id":533474632,"notes":"Columbus Avenue"},{"type":"way","id":383058044,"notes":"Columbus Avenue"},{"type":"way","id":383058045,"notes":"Columbus Avenue"},{"type":"way","id":485292827,"notes":"Columbus Avenue"},{"type":"way","id":1088869488,"notes":"Columbus Avenue"},{"type":"way","id":92029619,"notes":"Columbus Avenue"},{"type":"way","id":1329768972,"notes":"Columbus Avenue"},{"type":"way","id":383058043,"notes":"Columbus Avenue"},{"type":"way","id":1285819243,"notes":"Columbus Avenue"},{"type":"way","id":822959766,"notes":"Columbus Avenue"},{"type":"way","id":87109189,"notes":"Columbus Avenue"},{"type":"way","id":1285819244,"notes":"Columbus Avenue"},{"type":"way","id":8646035,"notes":"Stuart Street"},{"type":"way","id":1096256457,"notes":"Stuart Street"},{"type":"way","id":1280740663,"notes":"Stuart Street"},{"type":"way","id":242633874,"notes":"Stuart Street"},{"type":"way","id":970425331,"notes":"Stuart Street"},{"type":"way","id":242652627,"notes":"Stuart Street"},{"type":"way","id":242633873,"notes":"Stuart Street"},{"type":"way","id":1285819768,"notes":"Stuart Street"},{"type":"way","id":1285819769,"notes":"Stuart Street"},{"type":"way","id":1121981969,"notes":"Washington Street, Northbound"},{"type":"way","id":591136310,"notes":"Washington Street, Northbound"},{"type":"way","id":1154673770,"notes":"Washington Street, Northbound"},{"type":"way","id":1154673771,"notes":"Washington Street, Northbound"},{"type":"way","id":333071936,"notes":"Washington Street, Northbound"},{"type":"way","id":8638403,"notes":"Avenue De Lafayette, Northbound"},{"type":"way","id":851480300,"notes":"Avenue De Lafayette, Northbound"},{"type":"way","id":862549735,"notes":"Chauncy Street, Northbound"},{"type":"way","id":591217296,"notes":"Chauncy Street, Northbound"},{"type":"way","id":8648507,"notes":"Southwest Corridor"},{"type":"way","id":747090065,"notes":"Arch Street, Northbound"},{"type":"way","id":747090064,"notes":"Arch Street, Northbound"},{"type":"way","id":844528872,"notes":"Milk Street, Northbound"},{"type":"way","id":426489346,"notes":"Milk Street, Northbound"},{"type":"way","id":426489347,"notes":"Milk Street, Northbound"},{"type":"way","id":426489344,"notes":"Milk Street, Northbound"},{"type":"way","id":426489345,"notes":"Milk Street, Northbound"},{"type":"way","id":104210747,"notes":"Milk Street, Northbound"},{"type":"way","id":485292837,"notes":"Milk Street, Northbound"},{"type":"way","id":426488104,"notes":"Milk Street, Northbound"},{"type":"way","id":426488106,"notes":"State Street, Southbound"},{"type":"way","id":8645083,"notes":"State Street, Southbound"},{"type":"way","id":1351234388,"notes":"State Street, Southbound"},{"type":"way","id":1351234384,"notes":"State Street, Southbound"},{"type":"way","id":1351234386,"notes":"State Street, Southbound"},{"type":"way","id":1147916780,"notes":"State Street, Southbound"},{"type":"way","id":426487629,"notes":"State Street, Southbound"},{"type":"way","id":846628946,"notes":"State Street, Southbound"},{"type":"way","id":8646962,"notes":"Court Street, Southbound"},{"type":"way","id":941562893,"notes":"Court Street, Southbound"},{"type":"way","id":826634235,"notes":"Court Street, Southbound"},{"type":"way","id":138798811,"notes":"Cambridge Street, Southbound"},{"type":"way","id":747090073,"notes":"Cambridge Street, Southbound"},{"type":"way","id":426472927,"notes":"Tremont Street, Southbound"},{"type":"way","id":138827717,"notes":"Tremont Street, Southbound"},{"type":"way","id":63104590,"notes":"Tremont Street, Southbound"},{"type":"way","id":591136306,"notes":"Tremont Street, Southbound"},{"type":"way","id":1149777185,"notes":"Tremont Street, Southbound"},{"type":"way","id":8651512,"notes":"Tremont Street, Southbound"},{"type":"way","id":1121209368,"notes":"Tremont Street, Southbound"},{"type":"way","id":1121209369,"notes":"Tremont Street, Southbound"},{"type":"way","id":1121209367,"notes":"Tremont Street, Southbound"},{"type":"way","id":426831020,"notes":"Tremont Street, Southbound"},{"type":"way","id":840928388,"notes":"Tremont Street, Southbound"},{"type":"way","id":8650197,"notes":"Tremont Street, Southbound"},{"type":"way","id":1120131787,"notes":"Tremont Street, Southbound"},{"type":"way","id":1188182972,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":1188182970,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":1188182971,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":970425325,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":970425326,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":426488102,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":8641399,"notes":"Atlantic Avenue, Northbound"},{"type":"way","id":972626709,"notes":"Cross Street, Northbound"},{"type":"way","id":591310041,"notes":"Cross Street, Northbound"},{"type":"way","id":8643638,"notes":"North Washington Street, Northbound"},{"type":"way","id":426481845,"notes":"North Washington Street, Northbound"},{"type":"way","id":48982020,"notes":"North Washington Street, Northbound"},{"type":"way","id":426481851,"notes":"North Washington Street, Northbound"},{"type":"way","id":1395423596,"notes":"North Washington Street, Northbound"},{"type":"way","id":1395423597,"notes":"North Washington Street Bridge, Northbound"},{"type":"way","id":1392256152,"notes":"North Washington Street Bridge, Northbound"},{"type":"way","id":1262331183,"notes":"North Washington Street Bridge, Northbound"},{"type":"way","id":1408478137,"notes":"North Washington Street, Northbound"},{"type":"way","id":1314062049,"notes":"Chelsea Street, Northbound"},{"type":"way","id":94670408,"notes":"Chelsea Street, Northbound"},{"type":"way","id":426642737,"notes":"Chelsea Street, Northbound"},{"type":"way","id":591493318,"notes":"Warren Street, Northbound"},{"type":"way","id":845414078,"notes":"Warren Street, Northbound"},{"type":"way","id":8646107,"notes":"Warren Street, Northbound"},{"type":"way","id":690296523,"notes":"Dexter Row, Northbound"},{"type":"way","id":1000386665,"notes":"Main Street"},{"type":"way","id":95609072,"notes":"Main Street"},{"type":"way","id":1000386664,"notes":"Main Street"},{"type":"way","id":82576282,"notes":"Main Street, Northbound"},{"type":"way","id":1119626508,"notes":"Main Street, Northbound"},{"type":"way","id":980643130,"notes":"Main Street"},{"type":"way","id":132174475,"notes":"Main Street"},{"type":"way","id":1298911297,"notes":"Main Street"},{"type":"way","id":1086801844,"notes":"Main Street"},{"type":"way","id":1338748625,"notes":"Main Street, Northbound Cycleway"},{"type":"way","id":132174849,"notes":"Alford Street, Northbound"},{"type":"way","id":8640386,"notes":"Alford Street, Northbound"},{"type":"way","id":778940114,"notes":"Alford Street, Northbound"},{"type":"way","id":980431771,"notes":"Alford Street, Northbound"},{"type":"way","id":8645648,"notes":"Alford Street, Northbound"},{"type":"way","id":822623866,"notes":"Alford Street, Northbound"},{"type":"way","id":822623867,"notes":"Alford Street, Northbound"},{"type":"way","id":1086801846,"notes":"Alford Street, Northbound"},{"type":"way","id":1298911298,"notes":"Alford Street"},{"type":"way","id":923417551,"notes":"Alford Street"},{"type":"way","id":1326404261,"notes":"Alford Street"},{"type":"way","id":1108983906,"notes":"Alford Street"},{"type":"way","id":1136392748,"notes":"Broadway, Northbound"},{"type":"way","id":688290230,"notes":"Broadway, Northbound"},{"type":"way","id":9080332,"notes":"Broadway, Northbound"},{"type":"way","id":1136392747,"notes":"Broadway, Northbound"},{"type":"way","id":778743955,"notes":"Broadway, Northbound"},{"type":"way","id":923679978,"notes":"Broadway, Northbound"},{"type":"way","id":1109063829,"notes":"Broadway, Northbound"},{"type":"way","id":1136392749,"notes":"Broadway"},{"type":"way","id":1108989204,"notes":"Broadway"},{"type":"way","id":1000386662,"notes":"Beecham Street"},{"type":"way","id":9080315,"notes":"Beecham Street"},{"type":"way","id":1144592514,"notes":"Beecham Street"},{"type":"way","id":1110610259,"notes":"Beecham Street Path"},{"type":"way","id":1379890280,"notes":"Williams Street"},{"type":"way","id":8617273,"notes":"Williams Street"},{"type":"way","id":966288370,"notes":"Williams Street"},{"type":"way","id":924058722,"notes":"Williams Street"},{"type":"way","id":1263872113,"notes":"Williams Street"},{"type":"way","id":93278103,"notes":"Pearl Street","nodesSubset":[61361916,8614298830,12887504484,8614298829,8614298828,61357988]},{"type":"way","id":821595656,"notes":"Pearl Street"},{"type":"way","id":8617292,"notes":"Meridian Street"},{"type":"way","id":93278101,"notes":"Meridian Street"},{"type":"way","id":426640403,"notes":"Meridian Street"},{"type":"way","id":426640404,"notes":"Meridian Street"},{"type":"way","id":564068740,"notes":"Meridian Street"},{"type":"way","id":923769412,"notes":"Meridian Street"},{"type":"way","id":1217036169,"notes":"Meridian Street"},{"type":"way","id":1392208450,"notes":"Meridian Street"},{"type":"way","id":8638481,"notes":"Meridian Street"},{"type":"way","id":591493017,"notes":"Meridian Street"},{"type":"way","id":591493027,"notes":"Meridian Street"},{"type":"way","id":1346548991,"notes":"Meridian Street"},{"type":"way","id":817579891,"notes":"Meridian Street"},{"type":"way","id":8648440,"notes":"Meridian Street"},{"type":"way","id":126838471,"notes":"Meridian Street"},{"type":"way","id":8648485,"notes":"Meridian Street"},{"type":"way","id":1207626742,"notes":"Meridian Street"},{"type":"way","id":844916689,"notes":"Meridian Street"},{"type":"way","id":8646181,"notes":"Meridian Square"},{"type":"way","id":591493098,"notes":"Meridian Square"},{"type":"way","id":591493023,"notes":"Sumner Street","nodesSubset":[61353414,6909293008,6909292889,7671189472,61353435]},{"type":"way","id":8643798,"notes":"South Bremen Street"},{"type":"way","id":8643798,"notes":"South Bremen Street","nodesSubset":[7600809953,7600809952]},{"type":"way","id":813710241,"notes":"South Bremen Street Footpath","nodesSubset":[7600809950,7600809952]},{"type":"way","id":813710240,"notes":"South Bremen Street Footpath"},{"type":"way","id":813710242,"notes":"East Boston Greenway"},{"type":"way","id":1389906047,"notes":"East Boston Greenway"},{"type":"way","id":765980917,"notes":"East Boston Greenway"},{"type":"way","id":1092401162,"notes":"East Boston Greenway"},{"type":"way","id":768161562,"notes":"East Boston Greenway"},{"type":"way","id":765980916,"notes":"East Boston Greenway"},{"type":"way","id":767983541,"notes":"East Boston Greenway"},{"type":"way","id":667459870,"notes":"East Boston Greenway"},{"type":"way","id":812876291,"notes":"East Boston Greenway"},{"type":"way","id":667459871,"notes":"East Boston Greenway"},{"type":"way","id":812876293,"notes":"East Boston Greenway"},{"type":"way","id":812876292,"notes":"East Boston Greenway"},{"type":"way","id":767392330,"notes":"East Boston Greenway"},{"type":"way","id":812876292,"notes":"East Boston Greenway"},{"type":"way","id":767392330,"notes":"East Boston Greenway"},{"type":"way","id":453563181,"notes":"East Boston Greenway"},{"type":"way","id":812876294,"notes":"East Boston Greenway"},{"type":"way","id":667459874,"notes":"East Boston Greenway"},{"type":"way","id":453563524,"notes":"East Boston Greenway"},{"type":"way","id":1180108681,"notes":"East Boston Greenway"},{"type":"way","id":1180108682,"notes":"East Boston Greenway"},{"type":"way","id":667459877,"notes":"East Boston Greenway"},{"type":"way","id":758379105,"notes":"East Boston Greenway"},{"type":"way","id":667459880,"notes":"East Boston Greenway"},{"type":"way","id":453564124,"notes":"East Boston Greenway"},{"type":"way","id":637960990,"notes":"East Boston Greenway"},{"type":"way","id":637960989,"notes":"East Boston Greenway"},{"type":"way","id":453564125,"notes":"East Boston Greenway"},{"type":"way","id":667459883,"notes":"East Boston Greenway"},{"type":"way","id":812876296,"notes":"East Boston Greenway"},{"type":"way","id":812876297,"notes":"East Boston Greenway"},{"type":"way","id":129032477,"notes":"East Boston Greenway"}]'),nt="#d31f11",ot="#f47a00",at="#62c8d3",st="#007191";const lt=function(){const t=(0,e.useRef)(null),i=(0,e.useRef)(null);it(rt);const r=navigator.geolocation;return console.log(r),(0,e.useEffect)(()=>(a().accessToken="pk.eyJ1IjoidGxhbmdzZm9yZCIsImEiOiJjbWM4MTkzMGYxaGJxMmxwdGdweTVqb3RhIn0.S0CyG6BWDXPKNyG-mjJQOQ",t.current=new(a().Map)({container:i.current,center:[-71.09549,42.3045],zoom:10.12,style:"mapbox://styles/tlangsford/cmc9o4u7902f401s278a2da92",maxBounds:[[-71.39417,42.13907],[-70.9029,42.45938]]}),t.current.on("load",()=>{t.current.addSource("testSource",{type:"geojson",data:Ae}),t.current.addLayer({id:"testRoute",type:"line",source:"testSource",layout:{"line-join":"bevel","line-cap":"round"},paint:{"line-color":["match",["number",["get","lts"]],4,nt,3,ot,2,at,1,st,nt],"line-opacity":.8,"line-width":4}})}),t.current.on("mouseenter","testRoute",()=>{t.current.getCanvas().style.cursor="pointer"}),t.current.on("mouseleave","testRoute",()=>{t.current.getCanvas().style.cursor=""}),t.current.on("click","testRoute",e=>{if(e.features&&e.features[0]&&e.features[0].properties){e.features[0].properties;var i=(console.log(h),'<img src="'.concat(h,'"/>'));(new(a().Popup)).setLngLat(e.lngLat).setHTML(i).addTo(t.current)}}),()=>{t.current.remove()}),[]),(0,Ee.jsx)(e.Fragment,{children:(0,Ee.jsxs)("div",{id:"root",children:[(0,Ee.jsx)(Ie,{colorScale:[st,at,ot,nt]}),(0,Ee.jsx)("div",{id:"map-container",ref:i})]})})};function ct(e,t){if(null==e)return{};var i,r,n=function(e,t){if(null==e)return{};var i={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;i[r]=e[r]}return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)i=o[r],-1===t.indexOf(i)&&{}.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}i(358);const ut=["sri"],ht=["page"],dt=["page","matches"],pt=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ft=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],mt=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var gt="popstate";function yt(){return St(function(e,t){let{pathname:i="/",search:r="",hash:n=""}=bt(e.location.hash.substring(1));return i.startsWith("/")||i.startsWith(".")||(i="/"+i),Ct("",{pathname:i,search:r,hash:n},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let i=e.document.querySelector("base"),r="";if(i&&i.getAttribute("href")){let t=e.location.href,i=t.indexOf("#");r=-1===i?t:t.slice(0,i)}return r+"#"+("string"===typeof t?t:wt(t))},function(e,t){vt("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push(".concat(JSON.stringify(t),")"))},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function _t(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function vt(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(i){}}}function xt(e,t){return{usr:e.state,key:e.key,idx:t}}function Ct(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return ze(ze({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?bt(t):t),{},{state:i,key:t&&t.key||r||Math.random().toString(36).substring(2,10)})}function wt(e){let{pathname:t="/",search:i="",hash:r=""}=e;return i&&"?"!==i&&(t+="?"===i.charAt(0)?i:"?"+i),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function bt(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function St(e,t,i){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:n=document.defaultView,v5Compat:o=!1}=r,a=n.history,s="POP",l=null,c=u();function u(){return(a.state||{idx:null}).idx}function h(){s="POP";let e=u(),t=null==e?null:e-c;c=e,l&&l({action:s,location:p.location,delta:t})}function d(e){return Lt(e)}null==c&&(c=0,a.replaceState(ze(ze({},a.state),{},{idx:c}),""));let p={get action(){return s},get location(){return e(n,a)},listen(e){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(gt,h),l=e,()=>{n.removeEventListener(gt,h),l=null}},createHref:e=>t(n,e),createURL:d,encodeLocation(e){let t=d(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){s="PUSH";let r=Ct(p.location,e,t);i&&i(r,e),c=u()+1;let h=xt(r,c),d=p.createHref(r);try{a.pushState(h,"",d)}catch(f){if(f instanceof DOMException&&"DataCloneError"===f.name)throw f;n.location.assign(d)}o&&l&&l({action:s,location:p.location,delta:1})},replace:function(e,t){s="REPLACE";let r=Ct(p.location,e,t);i&&i(r,e),c=u();let n=xt(r,c),h=p.createHref(r);a.replaceState(n,"",h),o&&l&&l({action:s,location:p.location,delta:0})},go:e=>a.go(e)};return p}function Lt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i="http://localhost";"undefined"!==typeof window&&(i="null"!==window.location.origin?window.location.origin:window.location.href),_t(i,"No window.location.(origin|href) available to create URL");let r="string"===typeof e?e:wt(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=i+r),new URL(r,i)}new WeakMap;function Tt(e,t){return Mt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function Mt(e,t,i,r){let n=jt(("string"===typeof t?bt(t):t).pathname||"/",i);if(null==n)return null;let o=Et(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let i=e.length===t.length&&e.slice(0,-1).every((e,i)=>e===t[i]);return i?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=Ut(n);a=Bt(o[s],e,r)}return a}function Et(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",n=(e,n,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:n,route:e};a.relativePath.startsWith("/")&&(_t(a.relativePath.startsWith(r),'Absolute route path "'.concat(a.relativePath,'" nested under path "').concat(r,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),a.relativePath=a.relativePath.slice(r.length));let s=qt([r,a.relativePath]),l=i.concat(a);e.children&&e.children.length>0&&(_t(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(s,'".')),Et(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:Ft(s,e.index),routesMeta:l})};return e.forEach((e,t)=>{var i;if(""!==e.path&&null!==(i=e.path)&&void 0!==i&&i.includes("?"))for(let r of It(e.path))n(e,t,r);else n(e,t)}),t}function It(e){let t=e.split("/");if(0===t.length)return[];let[i,...r]=t,n=i.endsWith("?"),o=i.replace(/\?$/,"");if(0===r.length)return n?[o,""]:[o];let a=It(r.join("/")),s=[];return s.push(...a.map(e=>""===e?o:[o,e].join("/"))),n&&s.push(...a),s.map(t=>e.startsWith("/")&&""===t?"/":t)}var At=/^:[\w-]+$/,kt=3,Pt=2,Ot=1,Rt=10,zt=-2,Dt=e=>"*"===e;function Ft(e,t){let i=e.split("/"),r=i.length;return i.some(Dt)&&(r+=zt),t&&(r+=Pt),i.filter(e=>!Dt(e)).reduce((e,t)=>e+(At.test(t)?kt:""===t?Ot:Rt),r)}function Bt(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:r}=e,n={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=Vt({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&i&&!r[r.length-1].route.index&&(u=Vt({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(n,u.params),a.push({params:n,pathname:qt([o,u.pathname]),pathnameBase:Xt(qt([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=qt([o,u.pathnameBase]))}return a}function Vt(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[i,r]=Nt(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let o=n[0],a=o.replace(/(.)\/+$/,"$1"),s=n.slice(1);return{params:r.reduce((e,t,i)=>{let{paramName:r,isOptional:n}=t;if("*"===r){let e=s[i]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[i];return e[r]=n&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:o,pathnameBase:a,pattern:e}}function Nt(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];vt("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let r=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,i)=>(r.push({paramName:t,isOptional:null!=i}),i?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),n+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":""!==e&&"/"!==e&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),r]}function Ut(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return vt(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function jt(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,r=e.charAt(i);return r&&"/"!==r?null:e.slice(i)||"/"}function Ht(e,t,i,r){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(r),"].  Please separate it out to the `to.").concat(i,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function Zt(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function Wt(e){let t=Zt(e);return t.map((e,i)=>i===t.length-1?e.pathname:e.pathnameBase)}function Gt(e,t,i){let r,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?r=bt(e):(r=ze({},e),_t(!r.pathname||!r.pathname.includes("?"),Ht("?","pathname","search",r)),_t(!r.pathname||!r.pathname.includes("#"),Ht("#","pathname","hash",r)),_t(!r.search||!r.search.includes("#"),Ht("#","search","hash",r)));let o,a=""===e||""===r.pathname,s=a?"/":r.pathname;if(null==s)o=i;else{let e=t.length-1;if(!n&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:i,search:r="",hash:n=""}="string"===typeof e?bt(e):e,o=i?i.startsWith("/")?i:function(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?i.length>1&&i.pop():"."!==e&&i.push(e)}),i.length>1?i.join("/"):"/"}(i,t):t;return{pathname:o,search:Yt(r),hash:Kt(n)}}(r,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&i.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}var qt=e=>e.join("/").replace(/\/\/+/g,"/"),Xt=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Yt=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Kt=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Jt(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Qt=["POST","PUT","PATCH","DELETE"],$t=(new Set(Qt),["GET",...Qt]);new Set($t),Symbol("ResetLoaderData");var ei=e.createContext(null);ei.displayName="DataRouter";var ti=e.createContext(null);ti.displayName="DataRouterState";var ii=e.createContext({isTransitioning:!1});ii.displayName="ViewTransition";var ri=e.createContext(new Map);ri.displayName="Fetchers";var ni=e.createContext(null);ni.displayName="Await";var oi=e.createContext(null);oi.displayName="Navigation";var ai=e.createContext(null);ai.displayName="Location";var si=e.createContext({outlet:null,matches:[],isDataRoute:!1});si.displayName="Route";var li=e.createContext(null);li.displayName="RouteError";function ci(){return null!=e.useContext(ai)}function ui(){return _t(ci(),"useLocation() may be used only in the context of a <Router> component."),e.useContext(ai).location}var hi="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function di(t){e.useContext(oi).static||e.useLayoutEffect(t)}function pi(){let{isDataRoute:t}=e.useContext(si);return t?function(){let{router:t}=wi("useNavigate"),i=Si("useNavigate"),r=e.useRef(!1);di(()=>{r.current=!0});let n=e.useCallback(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};vt(r.current,hi),r.current&&("number"===typeof e?t.navigate(e):await t.navigate(e,ze({fromRouteId:i},n)))},[t,i]);return n}():function(){_t(ci(),"useNavigate() may be used only in the context of a <Router> component.");let t=e.useContext(ei),{basename:i,navigator:r}=e.useContext(oi),{matches:n}=e.useContext(si),{pathname:o}=ui(),a=JSON.stringify(Wt(n)),s=e.useRef(!1);di(()=>{s.current=!0});let l=e.useCallback(function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(vt(s.current,hi),!s.current)return;if("number"===typeof e)return void r.go(e);let l=Gt(e,JSON.parse(a),o,"path"===n.relative);null==t&&"/"!==i&&(l.pathname="/"===l.pathname?i:qt([i,l.pathname])),(n.replace?r.replace:r.push)(l,n.state,n)},[i,r,a,o,t]);return l}()}e.createContext(null);function fi(t){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:r}=e.useContext(si),{pathname:n}=ui(),o=JSON.stringify(Wt(r));return e.useMemo(()=>Gt(t,JSON.parse(o),n,"path"===i),[t,o,n,i])}function mi(t,i,r,n){_t(ci(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=e.useContext(oi),{matches:a}=e.useContext(si),s=a[a.length-1],l=s?s.params:{},c=s?s.pathname:"/",u=s?s.pathnameBase:"/",h=s&&s.route;{let e=h&&h.path||"";Mi(c,!h||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(c,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let d,p=ui();if(i){var f;let e="string"===typeof i?bt(i):i;_t("/"===u||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(u)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(u,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),d=e}else d=p;let m=d.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let y=Tt(t,{pathname:g});vt(h||null!=y,'No routes matched location "'.concat(d.pathname).concat(d.search).concat(d.hash,'" ')),vt(null==y||void 0!==y[y.length-1].route.element||void 0!==y[y.length-1].route.Component||void 0!==y[y.length-1].route.lazy,'Matched leaf route at location "'.concat(d.pathname).concat(d.search).concat(d.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let _=xi(y&&y.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:qt([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:qt([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,r,n);return i&&_?e.createElement(ai.Provider,{value:{location:ze({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:"POP"}},_):_}function gi(){let t=Li(),i=Jt(t)?"".concat(t.status," ").concat(t.statusText):t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},s=null;return console.error("Error handled by React Router default ErrorBoundary:",t),s=e.createElement(e.Fragment,null,e.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),e.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",e.createElement("code",{style:a},"ErrorBoundary")," or"," ",e.createElement("code",{style:a},"errorElement")," prop on your route.")),e.createElement(e.Fragment,null,e.createElement("h2",null,"Unexpected Application Error!"),e.createElement("h3",{style:{fontStyle:"italic"}},i),r?e.createElement("pre",{style:o},r):null,s)}var yi=e.createElement(gi,null),_i=class extends e.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?e.createElement(si.Provider,{value:this.props.routeContext},e.createElement(li.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vi(t){let{routeContext:i,match:r,children:n}=t,o=e.useContext(ei);return o&&o.static&&o.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=r.route.id),e.createElement(si.Provider,{value:i},n)}function xi(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(null==t){if(!r)return null;if(r.errors)t=r.matches;else{if(0!==i.length||r.initialized||!(r.matches.length>0))return null;t=r.matches}}let n=t,o=null===r||void 0===r?void 0:r.errors;if(null!=o){let e=n.findIndex(e=>e.route.id&&void 0!==(null===o||void 0===o?void 0:o[e.route.id]));_t(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(o).join(","))),n=n.slice(0,Math.min(n.length,e+1))}let a=!1,s=-1;if(r)for(let e=0;e<n.length;e++){let t=n[e];if((t.route.HydrateFallback||t.route.hydrateFallbackElement)&&(s=e),t.route.id){let{loaderData:e,errors:i}=r,o=t.route.loader&&!e.hasOwnProperty(t.route.id)&&(!i||void 0===i[t.route.id]);if(t.route.lazy||o){a=!0,n=s>=0?n.slice(0,s+1):[n[0]];break}}}return n.reduceRight((t,l,c)=>{let u,h=!1,d=null,p=null;r&&(u=o&&l.route.id?o[l.route.id]:void 0,d=l.route.errorElement||yi,a&&(s<0&&0===c?(Mi("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,p=null):s===c&&(h=!0,p=l.route.hydrateFallbackElement||null)));let f=i.concat(n.slice(0,c+1)),m=()=>{let i;return i=u?d:h?p:l.route.Component?e.createElement(l.route.Component,null):l.route.element?l.route.element:t,e.createElement(vi,{match:l,routeContext:{outlet:t,matches:f,isDataRoute:null!=r},children:i})};return r&&(l.route.ErrorBoundary||l.route.errorElement||0===c)?e.createElement(_i,{location:r.location,revalidation:r.revalidation,component:d,error:u,children:m(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):m()},null)}function Ci(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function wi(t){let i=e.useContext(ei);return _t(i,Ci(t)),i}function bi(t){let i=e.useContext(ti);return _t(i,Ci(t)),i}function Si(t){let i=function(t){let i=e.useContext(si);return _t(i,Ci(t)),i}(t),r=i.matches[i.matches.length-1];return _t(r.route.id,"".concat(t,' can only be used on routes that contain a unique "id"')),r.route.id}function Li(){var t;let i=e.useContext(li),r=bi("useRouteError"),n=Si("useRouteError");return void 0!==i?i:null===(t=r.errors)||void 0===t?void 0:t[n]}var Ti={};function Mi(e,t,i){t||Ti[e]||(Ti[e]=!0,vt(!1,i))}e.memo(function(e){let{routes:t,future:i,state:r}=e;return mi(t,void 0,r,i)});function Ei(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ii(t){let{basename:i="/",children:r=null,location:n,navigationType:o="POP",navigator:a,static:s=!1}=t;_t(!ci(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=i.replace(/^\/*/,"/"),c=e.useMemo(()=>({basename:l,navigator:a,static:s,future:{}}),[l,a,s]);"string"===typeof n&&(n=bt(n));let{pathname:u="/",search:h="",hash:d="",state:p=null,key:f="default"}=n,m=e.useMemo(()=>{let e=jt(u,l);return null==e?null:{location:{pathname:e,search:h,hash:d,state:p,key:f},navigationType:o}},[l,u,h,d,p,f,o]);return vt(null!=m,'<Router basename="'.concat(l,'"> is not able to match the URL "').concat(u).concat(h).concat(d,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==m?null:e.createElement(oi.Provider,{value:c},e.createElement(ai.Provider,{children:r,value:m}))}function Ai(e){let{children:t,location:i}=e;return function(e,t){return mi(e,t)}(ki(t),i)}e.Component;function ki(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=[];return e.Children.forEach(t,(t,n)=>{if(!e.isValidElement(t))return;let o=[...i,n];if(t.type===e.Fragment)return void r.push.apply(r,ki(t.props.children,o));_t(t.type===Ei,"[".concat("string"===typeof t.type?t.type:t.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),_t(!t.props.index||!t.props.children,"An index route cannot have child routes.");let a={id:t.props.id||o.join("-"),caseSensitive:t.props.caseSensitive,element:t.props.element,Component:t.props.Component,index:t.props.index,path:t.props.path,loader:t.props.loader,action:t.props.action,hydrateFallbackElement:t.props.hydrateFallbackElement,HydrateFallback:t.props.HydrateFallback,errorElement:t.props.errorElement,ErrorBoundary:t.props.ErrorBoundary,hasErrorBoundary:!0===t.props.hasErrorBoundary||null!=t.props.ErrorBoundary||null!=t.props.errorElement,shouldRevalidate:t.props.shouldRevalidate,handle:t.props.handle,lazy:t.props.lazy};t.props.children&&(a.children=ki(t.props.children,o)),r.push(a)}),r}var Pi="get",Oi="application/x-www-form-urlencoded";function Ri(e){return null!=e&&"string"===typeof e.tagName}var zi=null;var Di=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fi(e){return null==e||Di.has(e)?e:(vt(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Oi,'"')),null)}function Bi(e,t){let i,r,n,o,a;if(Ri(s=e)&&"form"===s.tagName.toLowerCase()){let a=e.getAttribute("action");r=a?jt(a,t):null,i=e.getAttribute("method")||Pi,n=Fi(e.getAttribute("enctype"))||Oi,o=new FormData(e)}else if(function(e){return Ri(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Ri(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let a=e.form;if(null==a)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let s=e.getAttribute("formaction")||a.getAttribute("action");if(r=s?jt(s,t):null,i=e.getAttribute("formmethod")||a.getAttribute("method")||Pi,n=Fi(e.getAttribute("formenctype"))||Fi(a.getAttribute("enctype"))||Oi,o=new FormData(a,e),!function(){if(null===zi)try{new FormData(document.createElement("form"),0),zi=!1}catch(e){zi=!0}return zi}()){let{name:t,type:i,value:r}=e;if("image"===i){let e=t?"".concat(t,"."):"";o.append("".concat(e,"x"),"0"),o.append("".concat(e,"y"),"0")}else t&&o.append(t,r)}}else{if(Ri(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=Pi,r=null,n=Oi,a=e}var s;return o&&"text/plain"===n&&(a=o,o=void 0),{action:r,method:i.toLowerCase(),encType:n,formData:o,body:a}}function Vi(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}async function Ni(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ui(e){return null!=e&&"string"===typeof e.page}function ji(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Hi(e,t,i,r,n,o){let a=(e,t)=>!i[t]||e.route.id!==i[t].route.id,s=(e,t)=>{var r;return i[t].pathname!==e.pathname||(null===(r=i[t].route.path)||void 0===r?void 0:r.endsWith("*"))&&i[t].params["*"]!==e.params["*"]};return"assets"===o?t.filter((e,t)=>a(e,t)||s(e,t)):"data"===o?t.filter((t,o)=>{let l=r.routes[t.route.id];if(!l||!l.hasLoader)return!1;if(a(t,o)||s(t,o))return!0;if(t.route.shouldRevalidate){var c;let r=t.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:(null===(c=i[0])||void 0===c?void 0:c.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof r)return r}return!0}):[]}function Zi(e,t){let{includeHydrateFallback:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return r=e.map(e=>{let r=t.routes[e.route.id];if(!r)return[];let n=[r.module];return r.clientActionModule&&(n=n.concat(r.clientActionModule)),r.clientLoaderModule&&(n=n.concat(r.clientLoaderModule)),i&&r.hydrateFallbackModule&&(n=n.concat(r.hydrateFallbackModule)),r.imports&&(n=n.concat(r.imports)),n}).flat(1),[...new Set(r)];var r}function Wi(e,t){let i=new Set,r=new Set(t);return e.reduce((e,n)=>{if(t&&!Ui(n)&&"script"===n.as&&n.href&&r.has(n.href))return e;let o=JSON.stringify(function(e){let t={},i=Object.keys(e).sort();for(let r of i)t[r]=e[r];return t}(n));return i.has(o)||(i.add(o),e.push({key:o,link:n})),e},[])}function Gi(e){return{__html:e}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;Symbol("SingleFetchRedirect");var qi=new Set([100,101,204,205]);function Xi(e,t){let i="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===i.pathname?i.pathname="_root.data":t&&"/"===jt(i.pathname,t)?i.pathname="".concat(t.replace(/\/$/,""),"/_root.data"):i.pathname="".concat(i.pathname.replace(/\/$/,""),".data"),i}e.Component;function Yi(t){let{error:i,isOutsideRemixApp:r}=t;console.error(i);let n,o=e.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Jt(i))return e.createElement(Ki,{title:"Unhandled Thrown Response!"},e.createElement("h1",{style:{fontSize:"24px"}},i.status," ",i.statusText),o);if(i instanceof Error)0;else{let e=null==i?"Unknown Error":"object"===typeof i&&"toString"in i?i.toString():JSON.stringify(i);new Error(e)}return e.createElement(Ki,{title:"Application Error!",isOutsideRemixApp:r},e.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),e.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),o)}function Ki(t){var i;let{title:r,renderScripts:n,isOutsideRemixApp:o,children:a}=t,{routeModules:s}=tr();return null!==s.root&&void 0!==i&&i.Layout&&!o?a:e.createElement("html",{lang:"en"},e.createElement("head",null,e.createElement("meta",{charSet:"utf-8"}),e.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),e.createElement("title",null,r)),e.createElement("body",null,e.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},a,n?e.createElement(lr,null):null)))}function Ji(e,t){return"lazy"===e.mode&&!0===t}function Qi(){let t=e.useContext(ei);return Vi(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function $i(){let t=e.useContext(ti);return Vi(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var er=e.createContext(void 0);function tr(){let t=e.useContext(er);return Vi(t,"You must render this element inside a <HydratedRouter> element"),t}function ir(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function rr(e,t,i){if(i&&!sr)return[e[0]];if(t){let i=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,i+1)}return e}function nr(t){let{page:i}=t,r=ct(t,ht),{router:n}=Qi(),o=e.useMemo(()=>Tt(n.routes,i,n.basename),[n.routes,i,n.basename]);return o?e.createElement(ar,ze({page:i,matches:o},r)):null}function or(t){let{manifest:i,routeModules:r}=tr(),[n,o]=e.useState([]);return e.useEffect(()=>{let e=!1;return async function(e,t,i){return Wi((await Promise.all(e.map(async e=>{let r=t.routes[e.route.id];if(r){let e=await Ni(r,i);return e.links?e.links():[]}return[]}))).flat(1).filter(ji).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?ze(ze({},e),{},{rel:"prefetch",as:"style"}):ze(ze({},e),{},{rel:"prefetch"})))}(t,i,r).then(t=>{e||o(t)}),()=>{e=!0}},[t,i,r]),n}function ar(t){let{page:i,matches:r}=t,n=ct(t,dt),o=ui(),{manifest:a,routeModules:s}=tr(),{basename:l}=Qi(),{loaderData:c,matches:u}=$i(),h=e.useMemo(()=>Hi(i,r,u,a,o,"data"),[i,r,u,a,o]),d=e.useMemo(()=>Hi(i,r,u,a,o,"assets"),[i,r,u,a,o]),p=e.useMemo(()=>{if(i===o.pathname+o.search+o.hash)return[];let e=new Set,t=!1;if(r.forEach(i=>{var r;let n=a.routes[i.route.id];n&&n.hasLoader&&(!h.some(e=>e.route.id===i.route.id)&&i.route.id in c&&null!==(r=s[i.route.id])&&void 0!==r&&r.shouldRevalidate||n.hasClientLoader?t=!0:e.add(i.route.id))}),0===e.size)return[];let n=Xi(i,l);return t&&e.size>0&&n.searchParams.set("_routes",r.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[n.pathname+n.search]},[l,c,o,a,h,r,i,s]),f=e.useMemo(()=>Zi(d,a),[d,a]),m=or(d);return e.createElement(e.Fragment,null,p.map(t=>e.createElement("link",ze({key:t,rel:"prefetch",as:"fetch",href:t},n))),f.map(t=>e.createElement("link",ze({key:t,rel:"modulepreload",href:t},n))),m.map(t=>{let{key:i,link:r}=t;return e.createElement("link",ze({key:i},r))}))}er.displayName="FrameworkContext";var sr=!1;function lr(t){let{manifest:i,serverHandoffString:r,isSpaMode:n,renderMeta:o,routeDiscovery:a,ssr:s}=tr(),{router:l,static:c,staticContext:u}=Qi(),{matches:h}=$i(),d=Ji(a,s);o&&(o.didRenderScripts=!0);let p=rr(h,null,n);e.useEffect(()=>{0},[]);let f=e.useMemo(()=>{var n;let o=u?"window.__reactRouterContext = ".concat(r,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",a=c?"".concat(null!==i.hmr&&void 0!==n&&n.runtime?"import ".concat(JSON.stringify(i.hmr.runtime),";"):"").concat(d?"":"import ".concat(JSON.stringify(i.url)),";\n").concat(p.map((e,t)=>{let r="route".concat(t),n=i.routes[e.route.id];Vi(n,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:o,clientLoaderModule:a,clientMiddlewareModule:s,hydrateFallbackModule:l,module:c}=n,u=[...o?[{module:o,varName:"".concat(r,"_clientAction")}]:[],...a?[{module:a,varName:"".concat(r,"_clientLoader")}]:[],...s?[{module:s,varName:"".concat(r,"_clientMiddleware")}]:[],...l?[{module:l,varName:"".concat(r,"_HydrateFallback")}]:[],{module:c,varName:"".concat(r,"_main")}];return 1===u.length?"import * as ".concat(r," from ").concat(JSON.stringify(c),";"):[u.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(r," = {").concat(u.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(d?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:i}=e,r=ct(e,ut),n=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(o.pop();o.length>0;)a.push("/".concat(o.join("/"))),o.pop();a.forEach(e=>{let i=Tt(t.routes,e,t.basename);i&&i.forEach(e=>n.add(e.route.id))});let s=[...n].reduce((e,t)=>Object.assign(e,{[t]:r.routes[t]}),{});return ze(ze({},r),{},{routes:s,sri:!!i||void 0})}(i,l),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(p.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(i.entry.module),");"):" ";return e.createElement(e.Fragment,null,e.createElement("script",ze(ze({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Gi(o),type:void 0})),e.createElement("script",ze(ze({},t),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:Gi(a),type:"module",async:!0})))},[]),m=sr?[]:(i.entry.imports.concat(Zi(p,i,{includeHydrateFallback:!0})),[...new Set(g)]);var g;let y="object"===typeof i.sri?i.sri:{};return sr?null:e.createElement(e.Fragment,null,"object"===typeof i.sri?e.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:y})}}):null,d?null:e.createElement("link",{rel:"modulepreload",href:i.url,crossOrigin:t.crossOrigin,integrity:y[i.url],suppressHydrationWarning:!0}),e.createElement("link",{rel:"modulepreload",href:i.entry.module,crossOrigin:t.crossOrigin,integrity:y[i.entry.module],suppressHydrationWarning:!0}),m.map(i=>e.createElement("link",{key:i,rel:"modulepreload",href:i,crossOrigin:t.crossOrigin,integrity:y[i],suppressHydrationWarning:!0})),f)}function cr(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}var ur="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ur&&(window.__reactRouterVersion="7.6.2")}catch(Lr){}function hr(t){let{basename:i,children:r,window:n}=t,o=e.useRef();null==o.current&&(o.current=yt({window:n,v5Compat:!0}));let a=o.current,[s,l]=e.useState({action:a.action,location:a.location}),c=e.useCallback(t=>{e.startTransition(()=>l(t))},[l]);return e.useLayoutEffect(()=>a.listen(c),[a,c]),e.createElement(Ii,{basename:i,children:r,location:s.location,navigationType:s.action,navigator:a})}var dr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pr=e.forwardRef(function(t,i){let r,{onClick:n,discover:o="render",prefetch:a="none",relative:s,reloadDocument:l,replace:c,state:u,target:h,to:d,preventScrollReset:p,viewTransition:f}=t,m=ct(t,pt),{basename:g}=e.useContext(oi),y="string"===typeof d&&dr.test(d),_=!1;if("string"===typeof d&&y&&(r=d,ur))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),i=jt(t.pathname,g);t.origin===e.origin&&null!=i?d=i+t.search+t.hash:_=!0}catch(Lr){vt(!1,'<Link to="'.concat(d,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let v=function(t){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_t(ci(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=e.useContext(oi),{hash:o,pathname:a,search:s}=fi(t,{relative:i}),l=a;return"/"!==r&&(l="/"===a?r:qt([r,a])),n.createHref({pathname:l,search:s,hash:o})}(d,{relative:s}),[x,C,w]=function(t,i){let r=e.useContext(er),[n,o]=e.useState(!1),[a,s]=e.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:u,onMouseLeave:h,onTouchStart:d}=i,p=e.useRef(null);e.useEffect(()=>{if("render"===t&&s(!0),"viewport"===t){let e=new IntersectionObserver(e=>{e.forEach(e=>{s(e.isIntersecting)})},{threshold:.5});return p.current&&e.observe(p.current),()=>{e.disconnect()}}},[t]),e.useEffect(()=>{if(n){let e=setTimeout(()=>{s(!0)},100);return()=>{clearTimeout(e)}}},[n]);let f=()=>{o(!0)},m=()=>{o(!1),s(!1)};return r?"intent"!==t?[a,p,{}]:[a,p,{onFocus:ir(l,f),onBlur:ir(c,m),onMouseEnter:ir(u,f),onMouseLeave:ir(h,m),onTouchStart:ir(d,f)}]:[!1,p,{}]}(a,m),b=function(t){let{target:i,replace:r,state:n,preventScrollReset:o,relative:a,viewTransition:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=pi(),c=ui(),u=fi(t,{relative:a});return e.useCallback(e=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(e,i)){e.preventDefault();let i=void 0!==r?r:wt(c)===wt(u);l(t,{replace:i,state:n,preventScrollReset:o,relative:a,viewTransition:s})}},[c,l,u,r,n,i,t,o,a,s])}(d,{replace:c,state:u,target:h,preventScrollReset:p,relative:s,viewTransition:f});let S=e.createElement("a",ze(ze(ze({},m),w),{},{href:r||v,onClick:_||l?n:function(e){n&&n(e),e.defaultPrevented||b(e)},ref:cr(i,C),target:h,"data-discover":y||"render"!==o?void 0:"true"}));return x&&!y?e.createElement(e.Fragment,null,S,e.createElement(nr,{page:v})):S});pr.displayName="Link",e.forwardRef(function(t,i){let{"aria-current":r="page",caseSensitive:n=!1,className:o="",end:a=!1,style:s,to:l,viewTransition:c,children:u}=t,h=ct(t,ft),d=fi(l,{relative:h.relative}),p=ui(),f=e.useContext(ti),{navigator:m,basename:g}=e.useContext(oi),y=null!=f&&function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.useContext(ii);_t(null!=r,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=gr("useViewTransitionState"),o=fi(t,{relative:i.relative});if(!r.isTransitioning)return!1;let a=jt(r.currentLocation.pathname,n)||r.currentLocation.pathname,s=jt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return null!=Vt(o.pathname,s)||null!=Vt(o.pathname,a)}(d)&&!0===c,_=m.encodeLocation?m.encodeLocation(d).pathname:d.pathname,v=p.pathname,x=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;n||(v=v.toLowerCase(),x=x?x.toLowerCase():null,_=_.toLowerCase()),x&&g&&(x=jt(x,g)||x);const C="/"!==_&&_.endsWith("/")?_.length-1:_.length;let w,b=v===_||!a&&v.startsWith(_)&&"/"===v.charAt(C),S=null!=x&&(x===_||!a&&x.startsWith(_)&&"/"===x.charAt(_.length)),L={isActive:b,isPending:S,isTransitioning:y},T=b?r:void 0;w="function"===typeof o?o(L):[o,b?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let M="function"===typeof s?s(L):s;return e.createElement(pr,ze(ze({},h),{},{"aria-current":T,className:w,ref:i,style:M,to:l,viewTransition:c}),"function"===typeof u?u(L):u)}).displayName="NavLink";var fr=e.forwardRef((t,i)=>{let{discover:r="render",fetcherKey:n,navigate:o,reloadDocument:a,replace:s,state:l,method:c=Pi,action:u,onSubmit:h,relative:d,preventScrollReset:p,viewTransition:f}=t,m=ct(t,mt),g=vr(),y=function(t){let{relative:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:r}=e.useContext(oi),n=e.useContext(si);_t(n,"useFormAction must be used inside a RouteContext");let[o]=n.matches.slice(-1),a=ze({},fi(t||".",{relative:i})),s=ui();if(null==t){a.search=s.search;let e=new URLSearchParams(a.search),t=e.getAll("index");if(t.some(e=>""===e)){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let i=e.toString();a.search=i?"?".concat(i):""}}t&&"."!==t||!o.route.index||(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index");"/"!==r&&(a.pathname="/"===a.pathname?r:qt([r,a.pathname]));return wt(a)}(u,{relative:d}),_="get"===c.toLowerCase()?"get":"post",v="string"===typeof u&&dr.test(u);return e.createElement("form",ze(ze({ref:i,method:_,action:y,onSubmit:a?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,i=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||c;g(t||e.currentTarget,{fetcherKey:n,method:i,navigate:o,replace:s,state:l,relative:d,preventScrollReset:p,viewTransition:f})}},m),{},{"data-discover":v||"render"!==r?void 0:"true"}))});function mr(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function gr(t){let i=e.useContext(ei);return _t(i,mr(t)),i}fr.displayName="Form";var yr=0,_r=()=>"__".concat(String(++yr),"__");function vr(){let{router:t}=gr("useSubmit"),{basename:i}=e.useContext(oi),r=Si("useRouteId");return e.useCallback(async function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:o,method:a,encType:s,formData:l,body:c}=Bi(e,i);if(!1===n.navigate){let e=n.fetcherKey||_r();await t.fetch(e,r,n.action||o,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||a,formEncType:n.encType||s,flushSync:n.flushSync})}else await t.navigate(n.action||o,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||a,formEncType:n.encType||s,replace:n.replace,state:n.state,fromRouteId:r,flushSync:n.flushSync,viewTransition:n.viewTransition})},[t,i,r])}const xr=JSON.parse('{"features":[{"type":"Feature","id":"85ae4f6a-27e5-4231-80c3-7e2d5123e33c","geometry":{"type":"LineString","coordinates":[[-71.11445162732932,42.30179732788567,0],[-71.11440326829631,42.30144017080764,0],[-71.11449437855654,42.30080832142803,0],[-71.11464022363586,42.30031415429773,0],[-71.114853898754,42.29991784432418,0],[-71.11504887857886,42.2994636651539,0],[-71.11531896243693,42.29901585880227,0],[-71.11554953573781,42.29873354580094,0],[-71.11576712208222,42.29831197955497,0]]},"properties":{"name":"Forest Hills - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":0}},{"type":"Feature","id":"56e938d2-e2a8-4ba6-a5c1-bbfe7650d31a","geometry":{"type":"LineString","coordinates":[[-71.11445426737355,42.30179100760638,0],[-71.11437595759242,42.30187075282284,0],[-71.11419966927366,42.30194510940485,0],[-71.11411395172001,42.3019560190146,0],[-71.11404047159616,42.30195605351017,0],[-71.11394250431609,42.30196334564408,0],[-71.11382739802507,42.3019778918949,0],[-71.11370986103996,42.30201417781473,0],[-71.11362171445384,42.30204863837173,0],[-71.11357521575059,42.30209394881132,0],[-71.11354585772453,42.30213381658467,0],[-71.11351404258032,42.30216462775925,0],[-71.11347731791477,42.30218276043276,0],[-71.11342834342615,42.30219727558283,0],[-71.1133744887077,42.30223353174402,0],[-71.11332554489056,42.30228427802565,0],[-71.11327903649224,42.30231871916369,0],[-71.11316075355184,42.30242443610314,0],[-71.11284453121569,42.30284517579994,0],[-71.11266907998763,42.30305675133587,0],[-71.1124126787003,42.3034015890721,0],[-71.11219224390494,42.30367813314424,0],[-71.11186442222821,42.30424555296006,0],[-71.1113548517246,42.3049157560438,0],[-71.11090235882952,42.30559625159798,0],[-71.11079670290724,42.30581445493446,0],[-71.11077879228323,42.30594269250797,0],[-71.11076088691263,42.30607759171286,0],[-71.1107024439753,42.30620584791134,0],[-71.11064769146516,42.30635261354931,0],[-71.11059146282938,42.30643423880912,0],[-71.11051948760445,42.30653585490919,0],[-71.11046553035304,42.30664245913444,0],[-71.11038683377123,42.30678737689218,0],[-71.11029460848461,42.30691065171563,0],[-71.11016820179812,42.30705075835706,0],[-71.11006242964436,42.30712907435525,0],[-71.10998589354526,42.30716074870544,0],[-71.10985306355519,42.30719411279532,0],[-71.10976750154424,42.3072024765188,0],[-71.10959411769306,42.30720921290389,0],[-71.10947028522583,42.30723091558799,0],[-71.10929019757296,42.3073042674222,0],[-71.10922495460201,42.30738090042321,0],[-71.10916872126282,42.30746086030156,0]]},"properties":{"name":"Southwest Corridor, Forest Hills to Carolina - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":0}},{"type":"Feature","id":"75eb40dc-8d64-475e-b3fa-15949587b6ab","geometry":{"type":"LineString","coordinates":[[-71.10711965158144,42.31051183730276,0],[-71.10705821567275,42.31063053683689,0],[-71.10624379531168,42.31200543242885,0],[-71.10590142282841,42.31257727368725,0],[-71.10576307853592,42.31289554297325,0],[-71.1057559030713,42.31305735009848,0],[-71.10549370946825,42.31357523114355,0],[-71.1053990243363,42.31375864925619,0],[-71.1053084537333,42.31423166608585,0],[-71.10533508510208,42.31434073701809,0],[-71.10542070030448,42.31441924190501,0],[-71.10547679544354,42.3144737605485,0],[-71.105547634257,42.31451736529078,0],[-71.10556832923253,42.31457626125695,0],[-71.10554183210293,42.31465262907611,0],[-71.1055035399931,42.31473772826538,0],[-71.1054584972396,42.31482964608388,0],[-71.10532605248333,42.31527038845763,0],[-71.10522299930471,42.31555840618357,0],[-71.10515377736564,42.31583315188515,0],[-71.10507425228319,42.31602080329505,0],[-71.10500059800643,42.31616700145908,0],[-71.10487095351746,42.31640703191372,0],[-71.10483855714683,42.31648776515909,0],[-71.10480583482382,42.31666153248656,0],[-71.1048001325862,42.31693860211112,0],[-71.10472060548054,42.31712625375038,0],[-71.10456735917897,42.31737283859128,0],[-71.10429936029003,42.31775297714865,0],[-71.10400750411786,42.31809342415023,0],[-71.10383357781303,42.31830947301067,0],[-71.10367897453706,42.31852194769063,0],[-71.1033783119031,42.31893875276865,0],[-71.10322211573032,42.31920060713609,0],[-71.10309535463588,42.31936209552742,0],[-71.10295089870623,42.31953668059198,0],[-71.102359588063,42.32019489991634,0],[-71.10212080975262,42.32051786977264,0],[-71.10121193741094,42.32151852300784,0],[-71.10065223581803,42.32224016232278,0],[-71.10049602168793,42.32250419462935,0],[-71.10044298573983,42.32262202153108,0],[-71.10039876501276,42.32268312289153,0],[-71.10036929057104,42.3227333109279,0],[-71.10018059649968,42.32296681297392,0],[-71.09970312007567,42.32369273261945,0],[-71.09961895502616,42.32384851336357,0],[-71.09952421103914,42.32393226268714,0],[-71.0993820535012,42.32399266554522,0],[-71.09922672684128,42.32404917909879,0],[-71.09897880275064,42.32420910067145,0],[-71.09880510847412,42.32437269830053,0],[-71.0987551233294,42.3244486438871,0],[-71.09872883276834,42.32451679391726,0],[-71.09867098977506,42.3246608833788,0],[-71.09858156640793,42.324836133935,0],[-71.09853378464796,42.32496824583102,0]]},"properties":{"name":"Southwest Corridor, Green to Heath - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":0}},{"type":"Feature","id":"6376a6ea-aaad-4d19-ae12-9c75108cbae2","geometry":{"type":"LineString","coordinates":[[-71.09281721354644,42.33335910299325,0],[-71.09261888102331,42.33349930992544,0],[-71.09239706573845,42.33370253635822,0],[-71.09221343210882,42.33385034366287,0],[-71.09192252480615,42.33402751523363,0],[-71.0914449457593,42.33426031396696,0],[-71.09129360684862,42.33433857875646,0],[-71.09111239719647,42.33449256163664,0],[-71.0910624339613,42.33450561242669,0],[-71.09095372848626,42.3346110261453,0],[-71.09078483133445,42.33485117412393,0],[-71.09061553358197,42.3350838458561,0],[-71.09052445399414,42.33517078502902,0],[-71.09042455750561,42.3352609858101,0],[-71.09032906722288,42.3353457532587,0],[-71.09026846422668,42.33536930336519,0],[-71.09014138611155,42.33546850223524,0],[-71.08997711846862,42.33555648136294,0],[-71.08968821472742,42.33565704784134,0],[-71.08948426676375,42.33568221428447,0],[-71.08933130665376,42.33570318284099,0],[-71.08914435531852,42.33572834549818,0],[-71.08892906699218,42.33572419740094,0]]},"properties":{"name":"Southwest Corridor, Prentiss to Northeastern - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":0}},{"type":"Feature","id":"065253a6-3de4-40cb-9621-fc613caec729","geometry":{"type":"LineString","coordinates":[[-71.08781947389889,42.33652982989099,0],[-71.0873941936744,42.33678923800591,0],[-71.08713553757298,42.33696060646272,0],[-71.08675903660314,42.33720426866413,0],[-71.08567993066775,42.3378717607391,0],[-71.08434312453396,42.33873086490873,0],[-71.08400955000147,42.33895686482424,0],[-71.08376358384574,42.33915051534919,0],[-71.08356096505953,42.33932497929179,0],[-71.08342180131017,42.33935155573891,0],[-71.08328263085423,42.33935988037593,0]]},"properties":{"name":"Southwest Corridor, Northeastern to Camden - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":0}},{"type":"Feature","id":"5d07efc4-d234-48f1-9546-fabd9fbed83e","geometry":{"type":"LineString","coordinates":[[-71.04001575485933,42.36705317759229,0],[-71.03965006990991,42.36694490936757,0],[-71.03932562942134,42.36761197410772,0],[-71.03892332585652,42.36815102872727,0],[-71.03813571972353,42.36906666577352,0],[-71.03737895988115,42.36985228909607,0],[-71.03642924827163,42.37046879629002,0],[-71.03507611849759,42.37136113923692,0],[-71.034031542326,42.37213625807171,0],[-71.0338059132513,42.37233634308292,0],[-71.0332595387332,42.37288969976932,0],[-71.0329865523773,42.37303937931274,0],[-71.03273992132988,42.3731721995221,0],[-71.03256396120229,42.37328788591332,0],[-71.03215101307087,42.37363228642834,0],[-71.03194849701073,42.37378976581839,0],[-71.03158223604142,42.37415008327047,0],[-71.03133248466999,42.3743372185104,0],[-71.0310392387621,42.37463597616125,0],[-71.03083205956365,42.37485658773326,0],[-71.03044119990572,42.37514691437554,0],[-71.02927936281345,42.37613026142471,0],[-71.02822507755333,42.37712970375515,0],[-71.0276184387131,42.37759903229109,0],[-71.02700530871526,42.37806356501079,0],[-71.02669381814859,42.37839643925517,0],[-71.02662569569361,42.37843953692509,0],[-71.02658029426183,42.37844431408799,0],[-71.02654138112364,42.3784443022183,0],[-71.02608749530373,42.37826689841184,0],[-71.0260356192208,42.37825250957734,0],[-71.02597400656674,42.37825249054075,0],[-71.02592534964406,42.37827882566265,0],[-71.02588965397796,42.37832193307198,0],[-71.02565269489939,42.37855457155877,0],[-71.02549137651634,42.37870522107995,0],[-71.02528414352406,42.37860063874977,0],[-71.02520189818834,42.37857630647172,0],[-71.0251624179733,42.37856900208123,0],[-71.02513280306822,42.3785714233104,0],[-71.02510975593513,42.37859572247085,0],[-71.02497479552213,42.37868804371167,0],[-71.02473780138703,42.3788338055005,0],[-71.02431650921217,42.37904027168079,0],[-71.0237043447687,42.37929285356606,0],[-71.02343112518774,42.37935930666105,0],[-71.0230856975399,42.37937771718357,0],[-71.02299480425759,42.37940183730604,0],[-71.0226221746874,42.37953710168136,0],[-71.02253847254049,42.37958269403331,0],[-71.02209409127369,42.37975913885192,0],[-71.02180534648438,42.37989130579836,0],[-71.02155423750999,42.38002808090462,0],[-71.02129320455099,42.38010598603341,0],[-71.0208728029771,42.38016617401085,0],[-71.02049625461855,42.38018664190687,0],[-71.01888057059207,42.38016986021338,0],[-71.01812599071893,42.38018282019113,0],[-71.01797656573287,42.38019306467609,0],[-71.01788890315339,42.38019891770406,0],[-71.01774145889358,42.38022535071313,0],[-71.01754619848887,42.38025470839073,0],[-71.0172732137139,42.38032082676264,0],[-71.01691253835114,42.38042811662701,0],[-71.0166568571886,42.3805272589594,0],[-71.01647152217181,42.38060371155506,0],[-71.01612275132203,42.3807772272095,0],[-71.01602708967225,42.38082280999658,0],[-71.01551480449127,42.38119345884108,0],[-71.0148999453679,42.38166091992534,0],[-71.0141606075822,42.38222272004653,0],[-71.0133532573245,42.38282575619385,0],[-71.01222828269825,42.38364654890243,0],[-71.01211068828542,42.38370389242517,0],[-71.01200108758239,42.38373033473625,0],[-71.01187353300834,42.38378473057337,0],[-71.01171606988692,42.38386707490187,0],[-71.01154840259134,42.38400748290011,0],[-71.01147460722898,42.38410457902118,0],[-71.01139284692664,42.38419578500502,0],[-71.01129516519003,42.38426490927348,0],[-71.0112373817409,42.38427077039528,0],[-71.01117961611494,42.38425455684079,0],[-71.0111298283002,42.38422804526806,0],[-71.01110792895003,42.38420743257515,0],[-71.01107205911117,42.38421624657888,0],[-71.0110361976462,42.38421475906626,0],[-71.01099239177444,42.38418236348272,0],[-71.01075146917813,42.38399241402664,0]]},"properties":{"name":"East Boston Greenway - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"687a5849-f53e-4099-ac29-ee4d7d82cbb6","geometry":{"type":"LineString","coordinates":[[-71.0397928037667,42.36883798418879,0],[-71.04028313098317,42.3682119115878,0],[-71.03943306803306,42.36782481317277,0]]},"properties":{"name":"Lewis Mall - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"ca039010-22a8-42c8-8f32-5cfb0ce02dd8","geometry":{"type":"LineString","coordinates":[[-71.0517478983179,42.39557241289583,0],[-71.05130650901557,42.39543119606567,0],[-71.05088023728143,42.39528434691976,0],[-71.0498710057442,42.39493821554561,0],[-71.04918606540039,42.39472674213104,0],[-71.04746756928931,42.39413500170473,0],[-71.04607480551175,42.39365868182676,0],[-71.04589429301328,42.39359374496883,0],[-71.04571661001933,42.39352409182102,0],[-71.04559554285395,42.39347344953676,0],[-71.04550162827567,42.39341768435405,0],[-71.0454090418107,42.39335739623298,0],[-71.0453405238763,42.39329812113223,0],[-71.04474262756796,42.39271602876559,0],[-71.04444929257976,42.39242314642386,0]]},"properties":{"name":"Williams St - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"01f41e6e-740c-41b7-a61d-86fd2846a6d0","geometry":{"type":"LineString","coordinates":[[-71.10916871478416,42.30745253366904,0],[-71.10743561757079,42.31004076244056,0],[-71.10743111626634,42.31004409493358,0],[-71.10712076999955,42.31051051019544,0]]},"properties":{"name":"Southwest Corridor, Carolina to Green - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"75a731c0-cd86-40f4-bed5-8ab9306e73f2","geometry":{"type":"LineString","coordinates":[[-71.0985365628619,42.32496347801519,0],[-71.09845692002582,42.32521064625595,0],[-71.09832072304918,42.32563431221197,0],[-71.09824321376739,42.32584640179144,0],[-71.09794817496731,42.32671754395388,0],[-71.09788360123527,42.32692643971328,0],[-71.09782333856903,42.32713214535737,0],[-71.09775443237423,42.32731074845916,0],[-71.09766614843691,42.32751857580317,0],[-71.09758213207327,42.3276764551662,0],[-71.09746361751662,42.3278502906833,0],[-71.09727927451375,42.32814765080266,0],[-71.09719235412408,42.3283226946558,0],[-71.09699631674489,42.32870224143272,0],[-71.0968719920017,42.32897274666115,0],[-71.09675780434435,42.32917687482586,0],[-71.09664791642697,42.32935867951135,0],[-71.09607648919703,42.33009760799942,0],[-71.09598383922939,42.33025708387348,0],[-71.09586314301696,42.33040381296801,0],[-71.0952361809115,42.33099519808846,0],[-71.0949329939106,42.3312723291936,0],[-71.09471741988678,42.33146851399177,0],[-71.09462066491457,42.33158393307852,0],[-71.09452584335291,42.3317290580074,0],[-71.09437284539334,42.33198102905831,0],[-71.09420685668852,42.33214371377606,0],[-71.09395461543117,42.33234788000955,0],[-71.09376920439311,42.33249462575144,0],[-71.09342186616733,42.332798403078,0],[-71.09329038569115,42.33296585978467,0],[-71.093120082271,42.33313651668633,0],[-71.09287860360264,42.33331357207034,0],[-71.09281427532905,42.33336127671086,0]]},"properties":{"name":"Southwest Corridor, Heath to Prentiss - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"cd1188a6-9358-4062-a63d-0235362fd328","geometry":{"type":"LineString","coordinates":[[-71.0889399943363,42.33573023180247,0],[-71.08876382878397,42.33586720171732,0],[-71.08836182582283,42.33611140154423,0],[-71.08821425630775,42.3362182116097,0],[-71.08787501439669,42.33649696324227,0],[-71.08781629880163,42.33652865733832,0]]},"properties":{"name":"Southwest Corridor, Northeastern - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"e9c87111-2215-4b63-b660-258cc320a870","geometry":{"type":"LineString","coordinates":[[-71.06124521275316,42.3548124749986,0],[-71.06078835336415,42.35520277918422,0],[-71.06029878226947,42.35564731560122,0],[-71.0600848039685,42.35584104258353,0],[-71.05920593632558,42.35657541276289,0],[-71.05908641496812,42.35666372757644,0],[-71.0588647169683,42.35688166877533,0],[-71.05874587362155,42.35698362960451,0]]},"properties":{"name":"Downtown Crossing","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":0}},{"type":"Feature","id":"e69b4971-82ff-439e-b992-6f9de111018d","geometry":{"type":"LineString","coordinates":[[-71.07354034048883,42.34727913248435,0],[-71.07155544658423,42.34884938355635,0],[-71.07021788227175,42.34992103330724,0],[-71.06996344852662,42.35016260035076,0]]},"properties":{"name":"Columbus, Back Bay to Stuart - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":0}},{"type":"Feature","id":"e9fe4635-4aaa-43cb-a720-b8bdfcadf5d5","geometry":{"type":"LineString","coordinates":[[-71.06306805086224,42.35092412435138,0],[-71.06299673223373,42.35109698966955,0],[-71.06293824950303,42.35127723367707,0],[-71.0628569421066,42.35156920895501,0],[-71.06275602478868,42.35201254816072,0],[-71.06265294950711,42.35242016928483,0],[-71.06255848322036,42.3526486882721,0],[-71.06254654928782,42.35298085562558,0],[-71.06252676212976,42.35329317211154,0],[-71.06244595804111,42.3535108378795,0],[-71.06231041585632,42.35372176152295,0],[-71.06216184031015,42.35387875033076,0],[-71.06138214288156,42.35467145192553,0],[-71.06124335061097,42.35481817306196,0]]},"properties":{"name":"Washington St Northbound - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":0}},{"type":"Feature","id":"aa32393a-0e95-490d-8ae0-530fd2fa839c","geometry":{"type":"LineString","coordinates":[[-71.05981317625775,42.35909005224757,0],[-71.0598944849976,42.35885500620181,0],[-71.05994566433282,42.35868485040383,0],[-71.06005349558271,42.35855655964824,0],[-71.06037355320483,42.35811525819712,0],[-71.06057641852703,42.35785462531498,0],[-71.06075003882282,42.35768582213561,0],[-71.06153445987935,42.35691209907203,0],[-71.06197236402447,42.35653583950347,0],[-71.06248040837761,42.3560645343972,0],[-71.06318668090421,42.35534874290619,0],[-71.06361044924779,42.35468075529755,0],[-71.06414703499073,42.35360095212706,0],[-71.0642786007026,42.35329979988048,0],[-71.0645507428007,42.35237897863787,0],[-71.06468742994169,42.3518665759543,0],[-71.06489643389624,42.35108373460277,0]]},"properties":{"name":"Tremont Street Southbound","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":0}},{"type":"Feature","id":"526bd18c-a46a-4abe-b9d2-0d4bc808af87","geometry":{"type":"LineString","coordinates":[[-71.05640582839985,42.35759555316796,0],[-71.05635634786749,42.35716094837553,0],[-71.0562997849904,42.35680410000798,0],[-71.05573783706392,42.35689635473798,0],[-71.05539149450621,42.35705496508644,0],[-71.05484181580736,42.35737395920915,0],[-71.05435184112403,42.35774211932639,0],[-71.05328225184351,42.35846645092699,0],[-71.0527166091965,42.35858980160431,0],[-71.05230863229366,42.35863687872244,0]]},"properties":{"name":"Milk St - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":0}},{"type":"Feature","id":"8147ac10-894f-44d3-af4a-e00b19aeb84f","geometry":{"type":"LineString","coordinates":[[-71.05355645177822,42.35934643146378,0],[-71.05255851865351,42.35950347791226,0],[-71.05453611775263,42.35921735482049,0],[-71.0557128800831,42.35902209895734,0],[-71.05642067446114,42.35891875849009,0],[-71.05692452626661,42.35887329711488,0],[-71.05762585331546,42.35885126959985,0],[-71.05789468131957,42.35885053876941,0],[-71.0583306753741,42.35892965850271,0],[-71.058819854702,42.35905664814389,0],[-71.05942538279382,42.35925026396677,0],[-71.05965539272013,42.35922682909846,0],[-71.05974599088599,42.35916600343368,0],[-71.05982807190595,42.35906656217204,0]]},"properties":{"name":"State St - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":0}},{"type":"Feature","id":"4fc01a5f-0b5f-448a-a491-fbc150131e60","geometry":{"type":"LineString","coordinates":[[-71.0728280825271,42.38423500651214,0],[-71.07331955812589,42.38458735129085,0],[-71.07302230485881,42.38538677348019,0],[-71.07268929657342,42.38636935843678,0],[-71.07245265780226,42.38721503008594,0],[-71.07207393375825,42.38796817274802,0],[-71.07185353182284,42.38832870862834,0],[-71.07144254435464,42.38901046657966,0],[-71.07098557126493,42.38975447886093,0],[-71.07089134225969,42.38990164969189,0],[-71.07073614829683,42.39014185238675,0]]},"properties":{"name":"Alford St - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":0}},{"type":"Feature","id":"ae629ee5-0f94-4f8e-9fd0-b01f26bc6d4d","geometry":{"type":"LineString","coordinates":[[-71.06873827850293,42.35049934711102,0],[-71.06787482720875,42.3507512001556,0],[-71.06759134474817,42.35081887852061,0],[-71.06741983099704,42.35085113204554,0],[-71.06687625625484,42.35096940782298,0],[-71.06621474925927,42.35110633719731,0],[-71.06572493459272,42.35111916813033,0],[-71.06510085708516,42.35109707481838,0],[-71.06488210131472,42.35108419680083,0],[-71.0641362020207,42.35102717692733,0],[-71.06357926328225,42.35097200549453,0],[-71.06306261022378,42.35092539569906,0]]},"properties":{"name":"Stuart Street Northbound - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":0}},{"type":"Feature","id":"cb3ac789-df8f-46ed-bb59-a9ab4df92ed4","geometry":{"type":"LineString","coordinates":[[-71.06372160348978,42.398219760191,0],[-71.06336857270031,42.39804580114282,0],[-71.06308029950613,42.39788219990045,0],[-71.06277936491682,42.39769915266108,0],[-71.06249857686626,42.3975100456224,0],[-71.0621062935155,42.39726037750838,0],[-71.06152350538335,42.39688576781838,0],[-71.0612420060753,42.39672991945123,0],[-71.06027941538339,42.39628910174718,0],[-71.05922368326385,42.3958068290137,0],[-71.05890904746869,42.39564533695101,0],[-71.05824184674907,42.39529310064735,0],[-71.05777092686796,42.3950435125893,0],[-71.05725134381446,42.39478182478889,0],[-71.0571569440169,42.39473233917464,0],[-71.05705357955021,42.39468876178645,0],[-71.05688790933257,42.39464188856557,0],[-71.05667321487348,42.394586501682,0],[-71.05635289519763,42.39451988395967,0],[-71.05588003207725,42.39442190145231,0],[-71.05548225692195,42.39436357879104,0],[-71.055142259915,42.39432551669371,0],[-71.05490969623783,42.39430060210903,0],[-71.05483797287137,42.39430013697295,0],[-71.05476283884134,42.39430513383669,0],[-71.0546759626719,42.39431626181612,0],[-71.05462084318927,42.39433314019271,0],[-71.05452678450953,42.39437182307676,0],[-71.05387851432049,42.39470196919373,0],[-71.05230104593694,42.39553300557876,0],[-71.05215724935701,42.39560431941923,0],[-71.05203703189545,42.39562722083544,0],[-71.05195428836544,42.39563386431151,0],[-71.05188691953465,42.39562308001722,0],[-71.05174635659655,42.39557548091349,0]]},"properties":{"name":"Beacham St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"d7177cf9-55ca-4355-a6e4-a5c5eb53c132","geometry":{"type":"LineString","coordinates":[[-71.07073204210383,42.39014072768554,0],[-71.07037507313132,42.39061907629593,0],[-71.0698471006159,42.39132720063846,0],[-71.06899948642834,42.39240853542702,0],[-71.06800645165619,42.39357351770033,0],[-71.06754723763787,42.39406835740426,0],[-71.06724574753468,42.39449566702874,0],[-71.06668594023334,42.39511637610025,0],[-71.06618149676495,42.39562155392677,0],[-71.06544342469066,42.39641704042302,0],[-71.06465794831757,42.3972359147965,0],[-71.06399480981241,42.39797007060869,0],[-71.06372230986138,42.39822326268204,0]]},"properties":{"name":"Alford St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"868dc37a-9d8f-42ca-b564-6df4c6ea3ec8","geometry":{"type":"LineString","coordinates":[[-71.07281817773247,42.38423869104341,0],[-71.07238296357485,42.38378410188417,0],[-71.07167801589954,42.38341973040611,0],[-71.07180228836519,42.38318339752808,0],[-71.07185167397365,42.38299763433095,0],[-71.07177980114756,42.38271899549501,0],[-71.07157768293436,42.38223801459875,0],[-71.07129473124739,42.38171059416305,0],[-71.07081868257846,42.38119312634861,0],[-71.07061209526051,42.38095097471233,0],[-71.0703118521289,42.38062738461821,0],[-71.06951697950936,42.37982464693778,0],[-71.0683052286895,42.37866020720391,0],[-71.06724097811284,42.37766173685863,0],[-71.06584577722751,42.37653383292045,0],[-71.06447398107609,42.37551850694646,0],[-71.06427841986503,42.37539227761841,0],[-71.0641059850483,42.37513749033882,0],[-71.06337156609216,42.37412778370472,0],[-71.06319913802591,42.37396736163659,0],[-71.06283511843326,42.37376446934439,0],[-71.06237531461478,42.37344361960652,0],[-71.06212625993324,42.37323601211759,0],[-71.0620368687324,42.37301897486422,0],[-71.06192193386144,42.37278778170617,0],[-71.06192834201812,42.37254715700446,0],[-71.06192836359506,42.37231124930177,0],[-71.0619794696771,42.37214611570997,0],[-71.06259900412124,42.37150446330625,0],[-71.06270882966716,42.37139435005454,0]]},"properties":{"name":"Main St, Charlestown - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"57683eb8-7450-4332-8f31-0fc983ead711","geometry":{"type":"LineString","coordinates":[[-71.05851205431716,42.36689050756022,0],[-71.0587431547345,42.36737847393861,0],[-71.05910221570967,42.36787864566821,0],[-71.05953969774166,42.36850691192718,0],[-71.0608754079565,42.37027638234968,0],[-71.06160964938579,42.37089410864635,0],[-71.0620413469806,42.3711067564142,0],[-71.06270783987834,42.37139775173983,0]]},"properties":{"name":"North Washington Street Bridge - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"09090c8e-d56d-445f-95bf-f83b186a6587","geometry":{"type":"LineString","coordinates":[[-71.11577474575932,42.29831255089673,0],[-71.1161748992321,42.29780098273257,0],[-71.11640672217467,42.29754345909088,0],[-71.11671460336335,42.29720146966494,0],[-71.11699376785963,42.29694796270066,0],[-71.11722937073228,42.2967240215291,0],[-71.11897893313407,42.29504851242547,0],[-71.1206209557156,42.29348951717823,0],[-71.1223386191616,42.2918961885819,0],[-71.12409820569307,42.29024197819615,0],[-71.12573309589233,42.28866519009422,0],[-71.12739139564196,42.2871210152758,0],[-71.1280957540512,42.28645177803329,0]]},"properties":{"name":"Washington St, Roslindale - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"2e26a543-3156-4343-921a-cd0baeb1c4fc","geometry":{"type":"LineString","coordinates":[[-71.08328509498942,42.33935540695448,0],[-71.0821797563888,42.34023083172833,0],[-71.08174763676539,42.34058643050255,0],[-71.08168424955988,42.34063329259374,0],[-71.08082041362346,42.34134166280901,0],[-71.08040912519114,42.3416805893145,0],[-71.078825737711,42.3429549538096,0],[-71.07813886969588,42.34350869611887,0],[-71.07761492200233,42.34393863539187,0],[-71.07690029287868,42.34451593471451,0],[-71.07658676357318,42.34477536125362,0],[-71.07604540831288,42.34520893627577,0],[-71.07564892767827,42.34551446390165,0],[-71.07511286470084,42.34596064037285,0],[-71.07449251495505,42.34644591387216,0],[-71.07386432913889,42.3469794887835,0],[-71.07354201842764,42.34727774545061,0]]},"properties":{"name":"Columbus Ave, Camden to Mass Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"c24aeb78-aa95-440b-b029-5804e226070f","geometry":{"type":"LineString","coordinates":[[-71.06996071144935,42.35016305657363,0],[-71.06933532622203,42.35032813761546,0],[-71.0691616957544,42.35037860833665,0],[-71.06873855869327,42.35049987178937,0]]},"properties":{"name":"Stuart St Northbound - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"0a0c4876-59e1-44cf-ba12-2b953e2ce174","geometry":{"type":"LineString","coordinates":[[-71.05229763951311,42.35863508295897,0],[-71.05254555730143,42.35949902401878,0],[-71.05268138279948,42.35979477025072,0],[-71.05283154460884,42.3600534338559,0],[-71.05300798171474,42.36023928980543,0],[-71.05319192798187,42.36040572797547,0],[-71.05342467801303,42.36057494015255,0],[-71.05386390380257,42.361171344238,0],[-71.05482596240185,42.36170436030545,0],[-71.05576451351081,42.36212599376229,0],[-71.05760404419578,42.36320636345724,0],[-71.05819854877207,42.3638318665917,0],[-71.05838628448276,42.36415086312436,0],[-71.05836810707663,42.36454329038558,0]]},"properties":{"name":"Rose Kennedy Greenway - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":0}},{"type":"Feature","id":"f693b8e8-a270-4c98-9775-c16ad083205f","geometry":{"type":"LineString","coordinates":[[-71.05836642950719,42.36454205100988,0],[-71.05851934698768,42.36690615645951,0]]},"properties":{"name":"North Washington St - Bus/Bike Lane","description":"","wayType":"bus-bike-lane","protectionLevel":4,"routeId":0}},{"type":"Feature","id":"bb194072-cb4e-4978-9c20-bfb99cea1c54","geometry":{"type":"LineString","coordinates":[[-71.03930413459092,42.38270791149517,0],[-71.03911896677322,42.37558726154335,0],[-71.03909428493034,42.37502714596289,0],[-71.03911809629612,42.37455137070852,0],[-71.03907080526979,42.37390481046016,0],[-71.03905435406946,42.37308456725602,0],[-71.03901310163383,42.37210209821883,0],[-71.03897518846466,42.37087667298334,0],[-71.0389597477175,42.3702621648136,0]]},"properties":{"name":"Meridian St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":0}},{"type":"Feature","id":"0de4fcd9-35bd-4318-9b10-9e2cbd2badb7","geometry":{"type":"LineString","coordinates":[[-71.04445105043915,42.39242582421929,0],[-71.04386921579508,42.39184343019145,0],[-71.04219237659588,42.39023999700395,0],[-71.04094670678397,42.38906154920107,0],[-71.0407587203475,42.3888731728775,0],[-71.0404911014465,42.38861434889036,0],[-71.04034390414559,42.38848947079241,0],[-71.04023786611083,42.38843741890704,0],[-71.0398993123868,42.38831750489354,0],[-71.03932477554312,42.38809020981157,0],[-71.03873803726236,42.38789863516369,0]]},"properties":{"name":"Williams St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":0}},{"type":"Feature","id":"ae71c8bb-e29e-42c5-9b68-cdf268ddefaf","geometry":{"type":"LineString","coordinates":[[-71.03944018498306,42.36781526814307,0],[-71.04000749004346,42.36705672094417,0]]},"properties":{"name":"S Bremen St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":0}},{"type":"Feature","id":"db6bc163-76e4-4d19-9763-6bae06ee2ea5","geometry":{"type":"LineString","coordinates":[[-71.0389553014724,42.3702677209824,0],[-71.03886822136563,42.37000073505275,0],[-71.0397907993671,42.36884037483728,0]]},"properties":{"name":"Maverick","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":0}},{"type":"Feature","id":"04a205a2-b66c-41d0-9bc0-02944043b023","geometry":{"type":"LineString","coordinates":[[-71.03873840831854,42.38789058727451,0],[-71.03922005853109,42.38694718305286,0],[-71.03927017025661,42.3868211382778,0],[-71.03927711268803,42.38674118497744,0],[-71.03928602179268,42.38661101957219,0],[-71.03928554737814,42.38644881221182,0],[-71.03930455628586,42.38481202495175,0],[-71.03930522783781,42.38271158608013,0]]},"properties":{"name":"Andrew McArdle Bridge","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":0}},{"type":"Feature","id":"a8496819-08cf-4ffe-87f5-2b9222806979","geometry":{"type":"LineString","coordinates":[[-71.11577244886887,42.29827037106328,0],[-71.11494940627455,42.29799975552342,0],[-71.11509571412516,42.29770372617094,0],[-71.11636338147953,42.29584169252153,0],[-71.11709733671185,42.29458706609717,0],[-71.1174951861215,42.29381717326909,0],[-71.11757939618575,42.2934127848018,0],[-71.11778140704956,42.29232886248202,0],[-71.11888881867274,42.28498953202573,0],[-71.11899442333778,42.28449573753112,0],[-71.11897706584554,42.28394548763343,0],[-71.11886168233676,42.28063983363932,0],[-71.11892032680805,42.28000337591307,0],[-71.11901939402979,42.27922876034888,0],[-71.11919335854137,42.27860165162852,0],[-71.11988841997622,42.27515265910796,0],[-71.12011209705503,42.27256603111051,0],[-71.12029252029778,42.27118967106912,0],[-71.12054596222285,42.27043124188281,0],[-71.12085869212481,42.26967904895132,0],[-71.12082412182721,42.268851807351,0],[-71.12101111436642,42.26620899064612,0],[-71.12125555878602,42.26485518761913,0],[-71.12158651993028,42.26274303138273,0],[-71.12221216419094,42.2615770549145,0],[-71.12305817163403,42.26009593626014,0],[-71.12409278096331,42.25590080156244,0],[-71.12430784046157,42.25444780064201,0],[-71.12440057563173,42.25400279507829,0],[-71.12486521530447,42.25284942700281,0],[-71.12552944398627,42.25151549512709,0],[-71.12614172680274,42.25025955620409,0],[-71.12689381102405,42.24866067859313,0],[-71.12732174351038,42.24810492254288,0],[-71.12873231392619,42.24641452997085,0],[-71.12900766183776,42.24603364706638,0],[-71.12965816335691,42.24432587606499,0],[-71.13060802124903,42.24191901938955,0],[-71.13133964879034,42.24009268045983,0],[-71.13204404709532,42.23935828783893,0],[-71.13223474943483,42.23919724851153,0]]},"properties":{"name":"Hyde Park Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":0}},{"type":"Feature","id":"9bf6a3dc-e759-47ba-9218-a77400e7ce9d","geometry":{"type":"LineString","coordinates":[[-71.05875325180898,42.35698035577709,0],[-71.0582494332583,42.35748479697445,0],[-71.05809911884049,42.35766638263649,0],[-71.05760409293015,42.35757802587185,0],[-71.0569570737483,42.35758406835816,0],[-71.05640812685436,42.35759160717059,0]]},"properties":{"name":"Washington St/Water St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":0}},{"type":"Feature","id":"4f6fb7b0-426a-4d4c-b0e6-896dff6066bc","geometry":{"type":"LineString","coordinates":[[-71.11663878246434,42.3612769488246,0],[-71.11799965946422,42.36090197427599,0],[-71.11885235053337,42.36070349436332,0],[-71.12017611551508,42.36043483220432,0],[-71.12077968721903,42.36027312514339,0],[-71.12106876450684,42.36017342692504,0],[-71.12132101946847,42.36006629666804,0],[-71.12203168652543,42.35970277583882,0],[-71.12312476249438,42.35909907086811,0],[-71.12322796435575,42.35905478885581,0]]},"properties":{"name":"Cambridge St - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":1}},{"type":"Feature","id":"8931af73-f0fe-4601-b045-29b131483b60","geometry":{"type":"LineString","coordinates":[[-71.12322697846868,42.35905260085692,0],[-71.12347670728565,42.35895056765355,0],[-71.12380046209313,42.35882594540033,0],[-71.12436469283017,42.35862016806578,0],[-71.12544584831302,42.35825586927012,0],[-71.12648611606018,42.3578061919231,0],[-71.12757291886014,42.35742506800462,0],[-71.12912728147344,42.3568457573966,0],[-71.130810311536,42.35622618197993,0],[-71.13202726213416,42.35580688439342,0],[-71.13275634763377,42.35547667629102,0],[-71.13389483270257,42.35505186532748,0],[-71.13485159799009,42.35464957284269,0],[-71.13561756458445,42.35432996366787,0]]},"properties":{"name":"Cambridge Street to North Beacon - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":1}},{"type":"Feature","id":"6b2d6ed2-c88b-4305-9210-b2f2f6242f1a","geometry":{"type":"LineString","coordinates":[[-71.13903517986837,42.35300191310441,0],[-71.14011590920926,42.35260921912884,0],[-71.14124949409646,42.35220442813611,0],[-71.14267438043275,42.35171198332323,0],[-71.1437603730426,42.35148959931903,0],[-71.14537813152931,42.3508992720624,0],[-71.14662335846646,42.35037147370373,0],[-71.14860105046193,42.34959160825965,0],[-71.14983176782238,42.3491301332885,0],[-71.15021671873359,42.34902471622928,0],[-71.15071839635809,42.34900194472318,0],[-71.15152932788185,42.3490221673347,0],[-71.15342037812205,42.34911984600563,0],[-71.15487909527587,42.34913948305488,0],[-71.15538714956273,42.34912213839842,0],[-71.15757880473764,42.34908110339187,0],[-71.15808881032892,42.34904352871209,0],[-71.15918584276525,42.3489288319442,0],[-71.15952193618122,42.34890425937154,0],[-71.1606856992801,42.34893016948147,0],[-71.16124260748732,42.34895323166442,0],[-71.16279522832576,42.34902969479292,0],[-71.16325053419493,42.34909030498132,0],[-71.16342641079623,42.34914660958948,0],[-71.16392527979119,42.3494379998006,0],[-71.16443535642293,42.34977154281734,0],[-71.16488485548437,42.35006754336969,0],[-71.16513891250335,42.35018304706178,0],[-71.16579705771179,42.35036372389216,0],[-71.16642629622264,42.35045895920999,0],[-71.1669226514811,42.35051810546427,0],[-71.16744289649934,42.35056479722114,0],[-71.16831445757917,42.35069609284123,0]]},"properties":{"name":"Cambridge St/Washington St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":1}},{"type":"Feature","id":"c9d34b52-fa1d-4fe4-a6fe-3cb577c5d73b","geometry":{"type":"LineString","coordinates":[[-71.13561292742752,42.35432715601424,0],[-71.1370776578359,42.35371154992109,0],[-71.13841873390287,42.35320130547352,0],[-71.1390330785583,42.35300072141913,0]]},"properties":{"name":"Cambridge Street Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":1}},{"type":"Feature","id":"b303b7f7-0695-4c60-a137-eb8e37100a0e","geometry":{"type":"LineString","coordinates":[[-71.11116188508888,42.35057142366327,0],[-71.11277958607376,42.35076080182809,0],[-71.1142783322079,42.35093484676209,0],[-71.12343666934605,42.35204257507436,0],[-71.12450978181556,42.35216860495811,0]]},"properties":{"name":"Comm Ave - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":2}},{"type":"Feature","id":"b57d0aff-7cee-4317-bcba-f6808ae921dc","geometry":{"type":"LineString","coordinates":[[-71.1377995691861,42.35363452361343,0],[-71.13924750395059,42.35382452455988,0],[-71.14062305044195,42.35399965478035,0],[-71.14108963646883,42.35412143289548,0],[-71.14439383400128,42.35496120829485,0],[-71.14773951535295,42.35581942579476,0],[-71.14909751826264,42.3561722780952,0]]},"properties":{"name":"North Beacon - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":2}},{"type":"Feature","id":"4ccb563d-3a0f-42d5-a9d4-b568e506377b","geometry":{"type":"LineString","coordinates":[[-71.08865380410272,42.34912263757044,0],[-71.08919086921249,42.34907215825289,0],[-71.08974421798804,42.34906280514032,0],[-71.09155493971272,42.34901804731966,0],[-71.0922154165701,42.34902656061683,0],[-71.0939326934378,42.34900891126716,0],[-71.095081614133,42.34897756054536,0],[-71.09688351685911,42.34890678937041,0],[-71.09743681277537,42.34895715392047,0],[-71.09935931275905,42.34915468105812,0],[-71.10067999898948,42.34930217315578,0],[-71.10314212185891,42.34961482079151,0],[-71.10524778938536,42.34984967202327,0],[-71.10815072595489,42.35019925606798,0],[-71.11030081296057,42.35046451802496,0],[-71.1111692714199,42.35057506374752,0]]},"properties":{"name":"Comm Ave from Public Garden - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":2}},{"type":"Feature","id":"4149093a-1f45-4078-8699-6f58739cb99b","geometry":{"type":"LineString","coordinates":[[-71.12450587778355,42.3521721591532,0],[-71.12541612774508,42.35149940557947,0],[-71.12622952359428,42.35098409936061,0],[-71.12720430712496,42.35057374226356,0],[-71.1278046821773,42.35047828722205,0],[-71.12865683980493,42.35044006409183,0],[-71.12945091993224,42.35054497012568,0],[-71.13014170323197,42.35055445753963,0],[-71.13077992569352,42.35039402622959,0],[-71.13167720673583,42.349993177885,0],[-71.13489232097469,42.34846252255745,0],[-71.13536998808785,42.34825730668891,0],[-71.13577667278258,42.34818091613566,0],[-71.13610589586631,42.34812361857638,0],[-71.13671919628946,42.34818078572992,0],[-71.13722923423607,42.34832861589968,0],[-71.13833057098837,42.34870676956244,0],[-71.13864046151575,42.34878783022759,0],[-71.13895680341942,42.34884980440052,0],[-71.13929249867333,42.34885929260171,0],[-71.13968627963199,42.34881151677943,0],[-71.13998966290038,42.34869695909087,0],[-71.14011229594419,42.34861105799458,0]]},"properties":{"name":"Comm Ave Frontage Rd","description":"","wayType":"traffic-calmed-street","protectionLevel":3,"routeId":2}},{"type":"Feature","id":"82318c07-319e-4708-95a1-bc5429dd0947","geometry":{"type":"LineString","coordinates":[[-71.12451072787032,42.35217264702261,0],[-71.12492120571171,42.35215783641955,0],[-71.12528963719201,42.3522036957895,0],[-71.12576619587784,42.3522643469945,0],[-71.12621872794742,42.35231315932849,0],[-71.13454758531223,42.353312217992,0],[-71.13571477809609,42.35344531473452,0],[-71.1365408174327,42.35348779463474,0],[-71.13708351792621,42.35355160286129,0],[-71.13780872417873,42.35362957836309,0]]},"properties":{"name":"Brighton Ave - Bus/Bike Lane","description":"","wayType":"bus-bike-lane","protectionLevel":4,"routeId":2}},{"type":"Feature","id":"cb7500de-5e69-4a6a-8b52-9c6459676658","geometry":{"type":"LineString","coordinates":[[-71.14010079984082,42.34860489318584,0],[-71.14027097277557,42.34851015913993,0],[-71.14045908361344,42.34829281445079,0],[-71.14049433401317,42.34818849817516,0],[-71.14057657612454,42.34791901752599,0],[-71.14061179273575,42.34771039332819,0],[-71.14068221968215,42.34727576229232,0],[-71.14075271254646,42.34704974986491,0],[-71.14083841547415,42.34683112766567,0],[-71.14094093858519,42.34662087473681,0],[-71.1412951414026,42.34600734116115,0],[-71.14153284608733,42.3456523122889,0],[-71.14280302539905,42.34380811701924,0],[-71.14303190989989,42.3434776747979,0],[-71.14330566508214,42.34310552797947,0],[-71.14375516599632,42.34263628568752,0],[-71.14415936176886,42.34234894101342,0],[-71.14444622191645,42.34218115179609,0],[-71.1449234697939,42.34194969978604,0],[-71.1455214350203,42.34173347321703,0],[-71.14595960564068,42.34164854945945,0],[-71.14644733547813,42.34156746905065,0],[-71.14690117852436,42.3415384486238,0],[-71.14728460331376,42.34152293805231,0],[-71.14761391356096,42.34153456683121,0],[-71.14838782874916,42.34154517844189,0],[-71.1489572860536,42.34149107628524,0],[-71.149448841624,42.34138302511188,0],[-71.14999389472686,42.3411778199246,0],[-71.15026641572265,42.34106262381276,0],[-71.15072383070726,42.34079987151521,0],[-71.15134697989456,42.34037538250327,0],[-71.15153183853762,42.34017386373094,0],[-71.15190644696311,42.33982478882003,0],[-71.15214477602328,42.33948654175649,0],[-71.15237822097713,42.33911591462667,0],[-71.15257729014215,42.3387092682886,0],[-71.15266585582368,42.33857398517884,0],[-71.15280016304561,42.33843023574614,0],[-71.15296305450453,42.33827379766694,0],[-71.1531145346472,42.33816808449271,0],[-71.15328318220449,42.33808772720482,0]]},"properties":{"name":"Comm Ave Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":2}},{"type":"Feature","id":"fc9b712b-c3fb-4f38-9d96-5e43b7f6366a","geometry":{"type":"LineString","coordinates":[[-71.14580818890897,42.3615723660626,0],[-71.14542531453293,42.36155667869771,0],[-71.14428737520912,42.3617532151167,0],[-71.14300056010019,42.36199689768989,0],[-71.14026740651545,42.36250780494889,0],[-71.13835309948249,42.36281433366064,0],[-71.13632174765208,42.36302654506147,0],[-71.13419735584881,42.36334380570324,0],[-71.13321891755956,42.36340664932933,0],[-71.13208096339092,42.36324159264783,0],[-71.13127270144805,42.3630686816149,0],[-71.12964319716352,42.36319804394962,0],[-71.12664375899399,42.36345855729565,0],[-71.12348549276858,42.36373202956616,0],[-71.12039770988115,42.36396633766654,0],[-71.11796266153976,42.36414853469662,0],[-71.11697497252244,42.36425258746604,0]]},"properties":{"name":"Western Ave","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":3}},{"type":"Feature","id":"697614c2-e97a-4df1-b1b6-6453d42cd82d","geometry":{"type":"LineString","coordinates":[[-71.13861188619663,42.25422810249281,0],[-71.13886986326136,42.25407401815667,0],[-71.13908711500059,42.25378258955287,0],[-71.13913691279365,42.25351795536917,0],[-71.13915503350532,42.25320307417072,0],[-71.1391957793603,42.25293844164172,0],[-71.1393858754879,42.25256997073852,0],[-71.13948092724516,42.25230534022327,0],[-71.1394628365266,42.25209430280107,0],[-71.13939496898605,42.25181291783582,0],[-71.13920490820816,42.25160857402864,0],[-71.13903295972848,42.2512568375768,0],[-71.13903589942237,42.25097890414956,0],[-71.13914567883913,42.25050547801131,0],[-71.13933492772678,42.25009088445238,0],[-71.13939927508179,42.249891990797,0],[-71.13941821507295,42.24957543889867,0],[-71.13930091786142,42.24920845763913,0],[-71.13900575427789,42.24883026310744,0],[-71.13864246609883,42.24856131663844,0],[-71.13730528918711,42.24756127076939,0],[-71.13673768336857,42.24709061479827,0],[-71.13635172895938,42.24662556544512,0],[-71.13625334832349,42.24651070260002,0],[-71.13629620288692,42.24623787001354,0],[-71.13630196948816,42.24599121085202,0],[-71.1363019947846,42.24571053092019,0],[-71.13628479674102,42.24531928140848,0],[-71.13623885841807,42.24511514982496,0],[-71.136164185956,42.24502158640126,0]]},"properties":{"name":"Turtle Pond Pkwy - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":3}},{"type":"Feature","id":"8a0d103c-5352-40d8-bf61-51f2dcccc8d9","geometry":{"type":"LineString","coordinates":[[-71.14075043982437,42.27429989017016,0],[-71.14081829726604,42.27407538418762,0],[-71.14119663162306,42.27335196675414,0],[-71.14153377128879,42.27299025594164,0],[-71.14229232328773,42.27235414121786,0],[-71.14288230144666,42.27216704650382,0],[-71.1435059942001,42.27206102196256,0],[-71.14398640870522,42.27199865088872,0],[-71.14442468264907,42.27180531007733,0],[-71.14471124376499,42.27143734488667,0],[-71.14493880419546,42.27073883435009,0],[-71.14539291365169,42.27001370264485,0],[-71.14547717266834,42.26965821118414,0],[-71.14534228919003,42.26902207840054,0],[-71.1451231391508,42.26847950143716,0],[-71.14503884753208,42.26814273064264,0],[-71.14503882778573,42.26763133745185,0],[-71.14508937805789,42.26720101843141,0],[-71.14498822696889,42.26655242469881,0],[-71.14448256960398,42.26612835176315,0],[-71.14385893787488,42.26569180399269,0],[-71.14296564265044,42.26516170242448,0],[-71.14258641781909,42.26474384923123,0],[-71.1422324763527,42.26446319788776,0],[-71.1418701079128,42.26428856690568,0],[-71.14155830424619,42.26400167252212,0],[-71.14151295782361,42.26369169916485,0],[-71.14137813512103,42.26313041189211,0],[-71.14121803521041,42.26260030855173,0],[-71.14116748364643,42.2622385920814,0],[-71.14111693192493,42.2619205307708,0],[-71.1411169449889,42.26150268558592,0],[-71.1412265045917,42.26113473227271,0],[-71.14139505238099,42.26072935795946,0],[-71.14134450469571,42.26036139889128,0],[-71.14111564628718,42.25995648273762,0],[-71.1406521749196,42.25961969155733,0],[-71.1404681748507,42.25942588946627,0],[-71.14036567610812,42.25921430550593,0],[-71.14030670392708,42.2587465627213,0],[-71.14018874300203,42.25845344287804,0],[-71.1396933868182,42.25794419603673,0],[-71.13931218335438,42.25740004438552,0],[-71.13913520754913,42.25692644388261,0],[-71.13894462319777,42.25646292309759,0],[-71.13857706394575,42.25596916883188,0],[-71.13825035645196,42.25548549600359,0],[-71.13810063310163,42.25504213815546,0],[-71.13816872973645,42.2546390956792,0],[-71.138454640172,42.25428644277379,0]]},"properties":{"name":"Enneking Pkwy - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":3}},{"type":"Feature","id":"ee3a817a-4758-4397-a474-50fa2f650805","geometry":{"type":"LineString","coordinates":[[-71.14109445080896,42.32653437333155,0],[-71.14086328332667,42.32626334336796,0],[-71.14053684366706,42.32602212023656,0],[-71.140001862507,42.32564116088937,0],[-71.13931347675612,42.32515259972234,0],[-71.13841661911147,42.32472219686992,0],[-71.13773784011096,42.32432543249253,0],[-71.13749396504718,42.32408114564345,0],[-71.13732876008717,42.32382522541186,0],[-71.13727762512559,42.32353149817948,0],[-71.13731302483674,42.3231592487352,0],[-71.13740144512185,42.32303761186837,0],[-71.13765867713096,42.32279876630464,0],[-71.13820304684157,42.32243165312654,0],[-71.13878823837838,42.32217423869317,0],[-71.13947510862158,42.32170350918054,0],[-71.13986639272129,42.32134923769814,0],[-71.14007093078256,42.32113802025569,0],[-71.14028604379274,42.32086161419549,0],[-71.14041298899535,42.32058260339497,0],[-71.14070566309465,42.31991245584557,0],[-71.14080085706712,42.31945091493844,0],[-71.14080436361428,42.31882278723455,0],[-71.14079754795256,42.31842093524079,0],[-71.14078394162733,42.31805926858317,0],[-71.14094014585825,42.31723043996059,0],[-71.14113033574569,42.31677834384932,0],[-71.14157184951426,42.31576864305132,0],[-71.14289653893125,42.31300203822292,0],[-71.14298488228368,42.31256786714521,0],[-71.14285577826226,42.31215094848674,0],[-71.14262478032208,42.31166371139104,0],[-71.14234623066083,42.31106094386643,0],[-71.1421084452689,42.3104682188215,0],[-71.14200654594367,42.31031752732488,0],[-71.1425965539805,42.31019616023388,0],[-71.14333654692044,42.30996533899381,0],[-71.14404086239107,42.30971473956983,0],[-71.14464707237244,42.30928612597716,0],[-71.14503928808753,42.30878500403642,0],[-71.14546713512514,42.30813223645147,0],[-71.14603764017099,42.30762450959968,0],[-71.14647445138782,42.30738052185536,0],[-71.14680424953332,42.30697171078846,0],[-71.14708053053363,42.30642444425136,0],[-71.14749053302563,42.30585078723009,0],[-71.1477842752705,42.30574007991738,0],[-71.14852372614207,42.30546378612199,0],[-71.14926688067507,42.30507976311495,0],[-71.14961789929347,42.3048173159487,0],[-71.15006972082247,42.30438359731223,0],[-71.1504450423687,42.30412351838358,0],[-71.15071762179886,42.30386936441332,0],[-71.15095659218278,42.30364007409675,0],[-71.1513523924818,42.30329475170183,0]]},"properties":{"name":"Lee/Clyde/Newton - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":3}},{"type":"Feature","id":"db5773d9-bd21-4b8a-982d-1b3e91828b4f","geometry":{"type":"LineString","coordinates":[[-71.1534195586063,42.34912422234332,0],[-71.15346208602813,42.34886659376309,0],[-71.15357325932482,42.34866205067809,0],[-71.15379868522501,42.34833379183277,0],[-71.1539494037716,42.34810556421864,0],[-71.15398319012027,42.34793076776406,0],[-71.15398988664816,42.34773191566467,0],[-71.15393734746183,42.34753957201243,0],[-71.15380932403258,42.34734611409022,0],[-71.15361791371801,42.34701635760216,0],[-71.15339970298685,42.34668716043871,0],[-71.15313606813429,42.3463390834164,0],[-71.15298424570602,42.34599198310883,0],[-71.15290742416838,42.34573584275997,0],[-71.15292177451157,42.34540841198979,0],[-71.1530530286942,42.34509837168261,0],[-71.15314829365029,42.34489896385771,0],[-71.15333912535306,42.34462733920721,0],[-71.15342620411938,42.34433144004336,0],[-71.15347534300197,42.34409580896551,0],[-71.15347408496376,42.34382818361404,0],[-71.15342299662245,42.34366072573579,0],[-71.15342022919701,42.34335347874546,0],[-71.15355657071235,42.34305985581482,0],[-71.15374293042679,42.34278832005825,0],[-71.15390181797878,42.34252589224089,0],[-71.15411793097424,42.34221408807817,0],[-71.15429200204335,42.34192916363231,0],[-71.1545542264061,42.34153709261469,0],[-71.15478071197683,42.34114576668227,0],[-71.15511112756204,42.3406663618505,0],[-71.15530042875135,42.34035511262422,0],[-71.15533710535492,42.34026182626963,0]]},"properties":{"name":"Chestnut Hill Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":3}},{"type":"Feature","id":"52880925-13a3-47a9-98cd-c4e9b2e5cf77","geometry":{"type":"LineString","coordinates":[[-71.1499530659914,42.35480791840319,0],[-71.15022818976244,42.35435732876273,0],[-71.15187947946004,42.35166197463342,0],[-71.15267924188315,42.35042332127661,0],[-71.15328553927664,42.34961926416586,0],[-71.15340522288002,42.34927019291927,0],[-71.15341969255213,42.34912773664209,0]]},"properties":{"name":"Market St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":3}},{"type":"Feature","id":"2f135ad5-c5e5-4369-9cea-70ac4f5e5389","geometry":{"type":"LineString","coordinates":[[-71.15533104592488,42.34025955210761,0],[-71.155327950003,42.34008082874403,0],[-71.15516957690537,42.33983107600949,0],[-71.15490709644759,42.33958349331992,0],[-71.15428397639977,42.33902213463537,0],[-71.15352280424862,42.33833326804187,0]]},"properties":{"name":"Chestnut Hill Ave - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":3}},{"type":"Feature","id":"b7cd6d1b-f116-4a23-bfaa-a14dbc2d77be","geometry":{"type":"LineString","coordinates":[[-71.1481558740563,42.35769131477597,0],[-71.14995576363162,42.35480025927838,0],[-71.14753958117802,42.35867032790415,0],[-71.14741762352982,42.35908766013472,0],[-71.14660012766585,42.36037656234753,0],[-71.14602721334688,42.36125386568362,0],[-71.145812960305,42.36157571951266,0]]},"properties":{"name":"Leo Birmingham Pkwy/Market St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":3}},{"type":"Feature","id":"765331cb-0554-46f1-85a7-63348ec70a27","geometry":{"type":"LineString","coordinates":[[-71.15351886651942,42.33832672784791,0],[-71.15307189824729,42.33787401321092,0]]},"properties":{"name":"Comm Ave & Chestnut Hill Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"08dd4d0a-addf-4742-a60f-ca8913f91bec","geometry":{"type":"LineString","coordinates":[[-71.15306977370214,42.33787356843906,0],[-71.15268346587553,42.3375257536617,0],[-71.15218680568839,42.3371347699125,0],[-71.15135579218021,42.33643674071204,0],[-71.15098573578051,42.33614169385226,0],[-71.15087173711937,42.33602025631372,0],[-71.15063151892747,42.33577797651178,0],[-71.15043025783743,42.33557647697433,0],[-71.15009696101318,42.33531606689,0],[-71.14960586673273,42.33503136752373,0],[-71.1489962558796,42.33474667931089,0],[-71.14836971769378,42.33444634374957,0],[-71.14787017853207,42.33417415425183,0],[-71.14768811763241,42.33392070832557,0],[-71.14751874285407,42.33358902967567,0],[-71.14740125720246,42.33326958608438,0],[-71.14713721117032,42.33288522599989,0],[-71.14668771791575,42.33236231133963,0],[-71.14627983937083,42.33178402579078,0],[-71.14617157967402,42.33128569913618,0],[-71.14614652446794,42.33065201696788,0],[-71.14597999466076,42.33000604001225,0],[-71.14565533770494,42.32925548154272,0],[-71.14510601310656,42.328640282003,0],[-71.14442353948209,42.3279881632773,0],[-71.1440950120616,42.32770310210125,0],[-71.14370385322178,42.32732783535896,0],[-71.1431545861397,42.32691566185724,0],[-71.14261365182738,42.3265465505895,0]]},"properties":{"name":"Chestnut Hill Ave - Brookline","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"93000f07-1e74-4ef7-8f50-903b9b32647d","geometry":{"type":"LineString","coordinates":[[-71.14261479174945,42.32654532556519,0],[-71.1421333375495,42.32640166437999,0],[-71.14146841064891,42.32645707690975,0],[-71.14109150637756,42.32653763893598,0]]},"properties":{"name":"Route 9","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"c187e093-3057-470b-af00-44fb3a16d867","geometry":{"type":"LineString","coordinates":[[-71.15135916523585,42.30330797461925,0],[-71.15020663630013,42.30217717881616,0],[-71.14882822441713,42.30096284141464,0],[-71.14793945238989,42.30026654315454,0],[-71.14701303590321,42.29948110161217,0],[-71.14650839947932,42.29881262112354,0],[-71.14596609834669,42.29805355561128,0],[-71.14567786686915,42.29736283038658,0],[-71.14560868998247,42.29693645355972,0],[-71.14564406073926,42.296183051871,0],[-71.14577801085798,42.2958691792665,0],[-71.14592869941089,42.29549748886131,0],[-71.14601794901314,42.29498539106444,0],[-71.14608488264575,42.29458892664186,0],[-71.14602898778786,42.29419246976151,0],[-71.1460121773304,42.29381665574458,0],[-71.1460177346229,42.29365972035838,0],[-71.1460278301179,42.29343261429845,0],[-71.146198376331,42.29315053237492,0],[-71.14644917423301,42.29273483622193,0],[-71.14669995945349,42.29227460783716,0],[-71.14690058166623,42.29189603624386,0],[-71.14695068078676,42.29146552320691,0],[-71.1469806807137,42.29085687432647,0],[-71.14706083056183,42.29014430868291,0],[-71.14717103327355,42.2891719544918,0],[-71.14732140776188,42.28843711264921,0],[-71.14744174248456,42.28805855161714,0],[-71.14760691067448,42.287600471388,0],[-71.14773452754217,42.2873089037845,0],[-71.14773787767477,42.28687833126673,0],[-71.14776540089672,42.28645973143585,0],[-71.14775147343315,42.28577568816073,0],[-71.14773751623238,42.28491808733154,0],[-71.14821952512109,42.28453389211877,0],[-71.14843193422425,42.28436376077019,0],[-71.14806449046013,42.28411418126306,0],[-71.14772204872672,42.28389233361163,0],[-71.14756702701362,42.28351329938535,0],[-71.14711506328548,42.28280577745214,0],[-71.14681509376075,42.2824304530734,0],[-71.1465192830232,42.28210577111086,0],[-71.14609185704333,42.28171936289154,0],[-71.14544949332362,42.28121648226784,0],[-71.14511926014455,42.28096480780759,0],[-71.14443908550119,42.28040524798577,0],[-71.14398564255717,42.28004944672615,0],[-71.14336805506386,42.279472493413,0],[-71.142973937703,42.27901166180705,0],[-71.14267940389317,42.27860411654078,0],[-71.14250783246116,42.27822540217721,0],[-71.14244212284531,42.27788525069894,0],[-71.14246327971877,42.27757958094431,0],[-71.14258825547479,42.2773601195066,0],[-71.1425159781781,42.27731097177774,0],[-71.1416611566513,42.27675676858919,0],[-71.1415600381161,42.27654255913325,0],[-71.14149107252818,42.27613113749864,0],[-71.14129805036106,42.2759373346266,0],[-71.14076957001011,42.27577754667899,0]]},"properties":{"name":"West Roxbury Pkwy","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"580c7c4d-fea5-4caf-a1ab-8e0476526b4c","geometry":{"type":"LineString","coordinates":[[-71.14077142020926,42.27577712486882,0],[-71.14064836051348,42.27556189134044,0],[-71.14066328770858,42.27525284329642,0],[-71.14065583619364,42.27504589166796,0],[-71.14074163171345,42.27435881511695,0],[-71.14073790478021,42.27429534991374,0]]},"properties":{"name":"To Enneking","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"87205bd9-1df7-4701-832f-cf9923a6011d","geometry":{"type":"LineString","coordinates":[[-71.13613086071602,42.24501902527244,0],[-71.13553845961263,42.24457228734192,0],[-71.13481343790552,42.24434023747239,0],[-71.13329100133306,42.24392087983313,0],[-71.1324451820095,42.24365312107517,0],[-71.132263778747,42.24344756234855,0],[-71.1321911436301,42.24329559134531,0],[-71.13215468853551,42.24308994721743,0],[-71.13237167981768,42.24268742975175,0],[-71.13337204701192,42.24065696891804,0],[-71.13350454289278,42.24034877275385,0],[-71.13368519406313,42.23986579837188,0],[-71.13352794345077,42.23965128498226,0],[-71.1322230763547,42.23925861045516,0]]},"properties":{"name":"Readville","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":3}},{"type":"Feature","id":"9b78ef6a-5c92-42db-8894-7ea436157576","geometry":{"type":"LineString","coordinates":[[-71.11493939207347,42.33197045299482,0],[-71.11620225239106,42.33191189567049,0],[-71.11698592734908,42.33182941050532,0],[-71.11743547786739,42.33181026257249,0],[-71.11775046726552,42.33190005098523,0]]},"properties":{"name":"Brookline Village - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":4}},{"type":"Feature","id":"86994751-63ad-40ab-b675-d1a4c68543f5","geometry":{"type":"LineString","coordinates":[[-71.11125198691624,42.33518921105334,0],[-71.11194668414524,42.33452204409404,0],[-71.11248000040914,42.33401693022159,0],[-71.11276024093232,42.33371833878719,0],[-71.11272441148675,42.33336613704926,0],[-71.11333525296833,42.33263603892608,0],[-71.1137076929059,42.33223614241361,0],[-71.11370283629535,42.3319572591335,0],[-71.11457646555014,42.33195009810736,0],[-71.11495749757083,42.33196778590482,0]]},"properties":{"name":"Emerald Necklace - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":4}},{"type":"Feature","id":"46ee802d-5c06-43a2-b90e-27eb04d98b57","geometry":{"type":"LineString","coordinates":[[-71.04950851823301,42.30086561866598,0],[-71.05028063748675,42.30128525134714,0],[-71.05066662607862,42.3014844878798,0],[-71.05103798920209,42.30175422336861,0],[-71.0518905239487,42.30244180036115,0],[-71.05262235414659,42.30296182511008,0],[-71.05310416063172,42.30324228771328,0],[-71.0539645249275,42.30368193797212,0],[-71.05453706029718,42.30396235106863,0],[-71.05527366668149,42.30428113162193,0],[-71.05571857126664,42.30442617869387,0],[-71.05613485051707,42.30460790807406,0],[-71.05637289712415,42.30474346182569,0],[-71.05674242838491,42.3049948264151,0],[-71.05721349300337,42.30533243394264,0],[-71.0573832710042,42.30546673212906,0],[-71.05743318497801,42.30554187513639,0],[-71.05756893548892,42.30575327483151,0],[-71.05761854091696,42.30591112202292,0],[-71.05760758289638,42.30603816211946,0],[-71.0575870954928,42.30646816898273,0],[-71.0576025792055,42.30673484111804,0],[-71.0576507428476,42.30688115993143,0],[-71.05777368705816,42.30704177668706,0],[-71.0581595707995,42.30739608743318,0],[-71.05839993712588,42.3075889252854,0]]},"properties":{"name":"Freeport St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":4}},{"type":"Feature","id":"697be081-0c33-4760-b3a7-873fa31a7d7b","geometry":{"type":"LineString","coordinates":[[-71.09487749100644,42.33148871312935,0],[-71.0970163466034,42.331762931494,0],[-71.09820010327802,42.33198078116227,0],[-71.09988805552763,42.33243570485181,0],[-71.10070095593568,42.33273616117895,0],[-71.10133604877736,42.33296525993416,0],[-71.1045503188169,42.33407524591981,0],[-71.10477387960357,42.33416161983421,0]]},"properties":{"name":"Tremont St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":4}},{"type":"Feature","id":"9dd35cf3-b9e2-4369-abe8-cdf1e68881c6","geometry":{"type":"LineString","coordinates":[[-71.11774468570486,42.3319043230007,0],[-71.1180423091858,42.33207956795416,0],[-71.11826763852434,42.33239794643149,0],[-71.11853631084021,42.33276120015626,0],[-71.11866631293545,42.33294710026746,0],[-71.11877901112908,42.33301121554966,0],[-71.11919491182174,42.3332032858961,0],[-71.11965900845567,42.33330392835403,0],[-71.12035232873814,42.33344824433981,0],[-71.121110536941,42.33381920544994,0],[-71.12150421483902,42.33406937068631,0],[-71.12209671569963,42.33433311787672,0],[-71.12294719869871,42.33460581831786,0],[-71.12358629221355,42.33481670044524,0],[-71.12457935754986,42.33514756220035,0],[-71.12503651968521,42.33553287159036,0],[-71.12624865919113,42.33683920065798,0],[-71.12726013680349,42.33780067276168,0],[-71.12784431856278,42.33815520889419,0],[-71.12834410736943,42.33836245348847,0],[-71.128966299464,42.33849097377536,0],[-71.12948301219609,42.3384385950875,0],[-71.13006727761656,42.33833130068132,0],[-71.13077736918315,42.33832136603952,0],[-71.13134472286052,42.33836883470742,0],[-71.13201676713615,42.33844626368821,0],[-71.13262127354442,42.33853117523275,0],[-71.1338251496128,42.33871006088821,0],[-71.13422364816401,42.33880244205132,0],[-71.13467618012368,42.33896222567347,0],[-71.13500713626475,42.33914696786726,0],[-71.13521314127286,42.33927678608205,0],[-71.13547881449159,42.33940787432597,0],[-71.13566751579688,42.33956354008915,0],[-71.13611329079511,42.33987689157865,0],[-71.13713338572323,42.34062285723041,0],[-71.13767489817542,42.34097865648537,0],[-71.13862320085946,42.34139968120365,0],[-71.13940875387435,42.34179380810821,0],[-71.14032286770457,42.34233924786982,0],[-71.14090848340967,42.34263132117657,0],[-71.14157505359904,42.3429796998802,0],[-71.14254690474228,42.34352345249977,0],[-71.14287543324343,42.34375921437245,0]]},"properties":{"name":"Washington, Brookline Branch - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":4}},{"type":"Feature","id":"0d714f5b-c6fe-461a-a886-af036ed42156","geometry":{"type":"LineString","coordinates":[[-71.04950612206106,42.30086387315676,0],[-71.0492107477485,42.30068021806654,0],[-71.0490385127273,42.30048400344996,0],[-71.04891934394661,42.3002527845353,0],[-71.0487651843215,42.2998515074882,0],[-71.04863857598389,42.29943674935596,0],[-71.04833352902871,42.29840076057144,0],[-71.04827674924786,42.29825841168678,0],[-71.0480522769587,42.29778632053563,0],[-71.0477034904163,42.29715303601809,0],[-71.04764229920448,42.29701056870406,0],[-71.04761622482398,42.29695596726025,0],[-71.04758450173097,42.29686356994154,0],[-71.0475573333076,42.29675437732733,0],[-71.04753924163782,42.29665442679543,0],[-71.04752492045907,42.29655817327737,0],[-71.04752498977581,42.29646588724414,0],[-71.04752301381278,42.29637360051722,0],[-71.04757023623485,42.29613458491126,0],[-71.04761464168968,42.29592041639118,0],[-71.04762725250727,42.29585537942318,0],[-71.04763991036177,42.29572795507829,0],[-71.04764022637059,42.29569460676193,0],[-71.04759838228483,42.29559812932656,0],[-71.04749404703831,42.29539374419647,0],[-71.04741268063218,42.29521026320649,0],[-71.04734295008427,42.29503798379822,0],[-71.04726858964608,42.29483039123065,0],[-71.04719838482413,42.29457671326467,0],[-71.0471670563537,42.29443373234187,0],[-71.04714268464292,42.29432951072697,0],[-71.04713345719769,42.29421496036558,0],[-71.04713809025039,42.29424682862817,0]]},"properties":{"name":"Freeport St South -  Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":4}},{"type":"Feature","id":"d2dd25d0-6709-43ad-a4dd-69b1f1e4912e","geometry":{"type":"LineString","coordinates":[[-71.1428758454009,42.34376827856286,0],[-71.14417109972146,42.34441534819366,0],[-71.1447282800904,42.3447468972916,0],[-71.14520587008236,42.34508379306319,0],[-71.14565452934691,42.34550625355036,0],[-71.1460091223406,42.34587523799411,0],[-71.14630582027145,42.34613726685003,0],[-71.14669657978534,42.34634046189213,0],[-71.14722482398014,42.34653829854058,0],[-71.14772413166664,42.34674683186037,0],[-71.14827410155567,42.34697675247437,0],[-71.14872277858838,42.34722807259408,0],[-71.14922214625672,42.34763983047214,0],[-71.1495375515481,42.34793977894673,0],[-71.14994830599235,42.3483907989412,0],[-71.15030772596984,42.348799668513,0],[-71.15040473477747,42.34902308153648,0]]},"properties":{"name":"Washington St -  Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":4}},{"type":"Feature","id":"5d3ae3ba-d56a-450e-b0d2-2a44f4001857","geometry":{"type":"LineString","coordinates":[[-71.05999126204817,42.30998423639692,0],[-71.06001321950922,42.3098346700793,0],[-71.06003515458863,42.30972148674393,0],[-71.05995870172241,42.30959614288617,0],[-71.05970190840794,42.30938988804076,0],[-71.0593686156442,42.30913913936669,0],[-71.05905719579577,42.30888031242739,0],[-71.05875130814623,42.30852042361474,0],[-71.05849626653173,42.30823988474142,0],[-71.05839626663365,42.30809583508791,0],[-71.05842378276296,42.30780478253387,0],[-71.05849496446847,42.3076148080214,0],[-71.0583965919252,42.30758243282381,0]]},"properties":{"name":"Hancock St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"65defd6d-1cf7-4c86-b998-57222f99d629","geometry":{"type":"LineString","coordinates":[[-71.05997381190963,42.30995270501572,0],[-71.05940251592591,42.311038893112,0],[-71.05915915191316,42.311900741389,0],[-71.05891574874067,42.31280749641745,0],[-71.05906116838631,42.31324750360196,0],[-71.05943716727144,42.31387615076489,0],[-71.05993475281898,42.31425343630597,0],[-71.06009240481386,42.31456177785654,0],[-71.06012868770325,42.3147952273628,0],[-71.06270208204955,42.31601713826786,0],[-71.06485083245168,42.31695160554242,0],[-71.068752959358,42.31859604173044,0]]},"properties":{"name":"Pleasant Street to Uphams Corner","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"c2176ce2-00f1-4c71-9db9-4723d0419d6c","geometry":{"type":"LineString","coordinates":[[-71.06877223048913,42.3186153868694,0],[-71.06984417792218,42.31899373432523,0],[-71.07042137781252,42.31921950231181,0],[-71.07057797723765,42.3194390684517,0],[-71.07080051924545,42.31974402281373,0],[-71.07115500979572,42.32007949979447,0],[-71.07152602540943,42.32036009930216,0],[-71.07186404275402,42.32067728045237,0],[-71.07211958585853,42.32100664019067,0],[-71.07216892178108,42.32138473832345,0],[-71.07228429284176,42.32163479293061,0],[-71.07246560526652,42.32200073289481,0],[-71.07298298563438,42.32281604371005,0],[-71.0739145993742,42.32377363633388,0],[-71.07459061532637,42.3245604192864,0],[-71.07493675844223,42.3252739581601,0],[-71.07533604594184,42.3261892988474,0],[-71.07668152759821,42.32715529618459,0],[-71.0778291915139,42.32800420393564,0],[-71.07927390270483,42.32854589269466,0],[-71.08157908692037,42.32850232572741,0],[-71.083451209773,42.32866012503798,0],[-71.08500396509332,42.32889298236659,0]]},"properties":{"name":"Dudley","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"c829a0ec-aec8-4008-a17c-c095c2d1522f","geometry":{"type":"LineString","coordinates":[[-71.08499827244087,42.32889010575094,0],[-71.08626961152467,42.32962537355168,0],[-71.08719870092838,42.33014066566713,0],[-71.0878295207124,42.33049277545015,0],[-71.08893389080046,42.33085139686433,0],[-71.08974079869664,42.33104126851417,0],[-71.09120580815707,42.33126431839811,0],[-71.09222466136742,42.3312764303044,0],[-71.09360426704512,42.33130963812865,0],[-71.09453345660955,42.33142416162498,0],[-71.0948676405074,42.33148442976617,0]]},"properties":{"name":"Malcolm X Blvd","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"7d76cc03-82cc-438c-96c3-bd11df2f2b7d","geometry":{"type":"LineString","coordinates":[[-71.10476546037603,42.3341597096357,0],[-71.10602356837931,42.33490694814372,0],[-71.1066532719883,42.33531650460981,0],[-71.10875762988923,42.33662521525255,0],[-71.10933076767171,42.33699431715237,0],[-71.11124924160251,42.33518035339459,0]]},"properties":{"name":"Longwood","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"a3cb2ca6-1ffa-4076-bf00-49d1be77559f","geometry":{"type":"LineString","coordinates":[[-71.04713440738588,42.29422193935707,0],[-71.04701382251716,42.29381606006658,0],[-71.04667002244777,42.29347199474517,0],[-71.04626115239003,42.29311070787301,0],[-71.04589872538381,42.29282510311761,0],[-71.04568940942471,42.29294882296664,0],[-71.04537160914114,42.29312279810572,0],[-71.04507775910061,42.29321164918309,0],[-71.04453410880693,42.29326274598455,0],[-71.04440921335956,42.29323873550941,0],[-71.04426354294176,42.29315995980757,0],[-71.04417171118837,42.29306954141108,0]]},"properties":{"name":"Tenean St/Conley St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":4}},{"type":"Feature","id":"02151e90-0959-443b-b054-96e8e54b8f26","geometry":{"type":"LineString","coordinates":[[-71.11749744235526,42.3317246345025,0],[-71.11720038435898,42.33158828552807,0],[-71.11638595926011,42.33162227340535,0],[-71.11600690746651,42.3316903874,0],[-71.1149312565955,42.33169782815543,0],[-71.11392730585045,42.33170526925404,0],[-71.11339813291868,42.3317285912452,0]]},"properties":{"name":"Washington Street, Rt 9 - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":5}},{"type":"Feature","id":"ccf90c99-c963-4ff3-895b-19337deebd05","geometry":{"type":"LineString","coordinates":[[-71.11078471112691,42.32897458491215,0],[-71.11072000986252,42.32851397250471,0],[-71.11089442625378,42.3277422618978,0],[-71.11112363353377,42.32717348162878,0],[-71.11137827797518,42.32659530070438,0],[-71.11156421316197,42.32623949345446,0],[-71.1118244554954,42.3258192220176,0],[-71.1120792658256,42.3252882304092,0],[-71.11221114067456,42.32484062812729,0],[-71.11226000585644,42.32439422290337,0],[-71.11224732242326,42.32384902039941,0],[-71.11216958252312,42.32293924939287,0],[-71.1120792353854,42.3217241996831,0],[-71.11205837264197,42.32152700151613,0],[-71.11180426617389,42.32033856643489,0],[-71.11170551104556,42.31993396857523,0],[-71.11164565365148,42.31952376528417,0]]},"properties":{"name":"Boylston/South Huntington - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":5}},{"type":"Feature","id":"b0fa3d66-58b5-4733-9a89-85aa0090f400","geometry":{"type":"LineString","coordinates":[[-71.09507072777896,42.31332665329144,0],[-71.09462713633054,42.31307866926269,0],[-71.09384852220603,42.31274347861092,0],[-71.0936766714586,42.31245542534145,0],[-71.09339638092015,42.31186595171876,0],[-71.09326103997027,42.31122296184984,0],[-71.09298974494455,42.31072055241806,0],[-71.09232911670397,42.31011081123962,0],[-71.09151454189357,42.30949429088977,0],[-71.09104267554021,42.30907964916248,0],[-71.09038898530788,42.30858555527035,0],[-71.09013021911451,42.30841412100784,0],[-71.08938804476352,42.30784944883142,0],[-71.0891088532334,42.30767296669776,0],[-71.08885129243357,42.30746379471886,0],[-71.08850987763331,42.30725926580927,0],[-71.08799197171668,42.30699504725325,0],[-71.08742207695498,42.30670997951195,0]]},"properties":{"name":"Seavers - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":5}},{"type":"Feature","id":"19b02a0f-c14d-4b41-ac61-84c1b26f0d9b","geometry":{"type":"LineString","coordinates":[[-71.0978947127233,42.31105710034961,0],[-71.09787477802476,42.31045476122256,0],[-71.09730478142856,42.31024874122925,0],[-71.0971283305847,42.31021855493536,0],[-71.09682251093774,42.31074547041465,0],[-71.09642182195502,42.31105149588396,0],[-71.09591949421203,42.31111654694857,0],[-71.09530205132141,42.3108201489346,0],[-71.09489152032256,42.31045634963275,0],[-71.09453475587398,42.31000928644735,0],[-71.09410482864124,42.30945046419641,0],[-71.09365190149481,42.30903382894702,0],[-71.09234023675364,42.30812550115866,0],[-71.0919376209146,42.30780368237503,0],[-71.09186900674935,42.30773255240582,0],[-71.09215164782546,42.30754777749685,0],[-71.09278346204762,42.30722185326778,0],[-71.0935756788616,42.30686634238418,0],[-71.09425751086908,42.30664422539033,0],[-71.09475882483667,42.30651840572123,0],[-71.09504967663845,42.30632577496071,0],[-71.09512010530771,42.30598478152871,0],[-71.09480961969915,42.30563621576496,0],[-71.09406808106552,42.3053097066555,0],[-71.0935870302859,42.30516864282495,0],[-71.09326629697405,42.30511660916393,0],[-71.09285543313113,42.30495333067842,0],[-71.09228428146001,42.30466394654844,0],[-71.09171325905471,42.30421145530673,0],[-71.09126260987581,42.30365521728517,0],[-71.09115152527924,42.30335692607137,0],[-71.09061480092491,42.30275647153846,0],[-71.09012363945433,42.30235892504264,0],[-71.08923243089691,42.30196964470504,0],[-71.08868212370028,42.30161103036265,0],[-71.08844519137567,42.30144496745356,0],[-71.08785912815718,42.30090989742919,0],[-71.0875100301221,42.30039330532065,0],[-71.0872357743042,42.2998398280037,0],[-71.08734811793153,42.29932329285364,0],[-71.08770989058056,42.29874221794368,0],[-71.08808406305297,42.29850243279372,0],[-71.08869518302274,42.29824422178244,0],[-71.08933121373337,42.29815204218225,0],[-71.09006700656212,42.29810598765952,0],[-71.09076539108291,42.29805992506511,0],[-71.09123930762304,42.29795849634352,0],[-71.09165088730335,42.29773714671705,0],[-71.09211237617089,42.29734053782579,0],[-71.09218724928543,42.29700847083563,0],[-71.0925240380914,42.2965288290864,0],[-71.09288574239586,42.29624289404525,0],[-71.09296058125746,42.29615987853242,0],[-71.09231211931595,42.29591078880852,0],[-71.09079079807894,42.29518197393482,0],[-71.08945657662599,42.29451771813658,0],[-71.08902004276509,42.2942607779862,0],[-71.08884244649384,42.29422715446454,0],[-71.08830960122225,42.29443485482815,0],[-71.08811548214905,42.29441344878299,0],[-71.08790887448771,42.29489919798156,0]]},"properties":{"name":"Franklin Park Seavers Bypass","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"7b3b4cb6-fc14-4624-b6a8-f5c5297faa83","geometry":{"type":"LineString","coordinates":[[-71.07161285092482,42.29021409732614,0],[-71.07060022504675,42.29011531502413,0],[-71.07018650092355,42.29005914081717,0],[-71.06968549684818,42.28996204531385,0],[-71.06917181693704,42.28985399761391,0],[-71.06849327605471,42.28966614273237,0],[-71.06778416792588,42.28942530522919,0],[-71.0674227435431,42.28925473564394,0],[-71.06718179296375,42.28914362827066,0],[-71.0666954128534,42.28888307007733,0],[-71.06616284217954,42.28854823446313,0],[-71.06575078863692,42.28819466537733,0],[-71.06549475804654,42.28793907976566,0],[-71.06524335034054,42.28764029461875,0],[-71.06502788779255,42.28733370013064,0],[-71.06492491660103,42.28714086708781,0],[-71.06477921125807,42.28684993239038,0],[-71.0646461994775,42.28654492660172,0],[-71.06456806742136,42.28639163795152,0],[-71.06440110855289,42.28630713422588,0],[-71.06418550635522,42.28626014914082,0]]},"properties":{"name":"Talbot Ave, South - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"b87be790-879e-47c0-aa05-646eb152964b","geometry":{"type":"LineString","coordinates":[[-71.08776085400868,42.29486577413132,0],[-71.08710478227832,42.29467747242809,0],[-71.08657490997491,42.29451296454006,0],[-71.08571310804244,42.2942537999288,0],[-71.08489134031008,42.29401030229896,0],[-71.08413041786238,42.29379335835715,0],[-71.08333396415095,42.29354152258628,0],[-71.08252610228323,42.29330295099014,0],[-71.08187408984381,42.293109758385,0],[-71.08118579031199,42.29292188453218,0]]},"properties":{"name":"Talbot Ave, North - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"8460fff3-9385-4491-922d-f54b3d85c73e","geometry":{"type":"LineString","coordinates":[[-71.13094073022829,42.35025679149026,0],[-71.13064979456031,42.34983841847436,0],[-71.13026303496515,42.34945937686996,0],[-71.13004647790248,42.34919408270682,0],[-71.1295331414913,42.34857627942516,0],[-71.1289960042443,42.34766727357535,0],[-71.12835144895956,42.34672297309058,0],[-71.12771885280964,42.34584045607202,0],[-71.1269190670173,42.34523147271941,0],[-71.12571336057093,42.34467537271402,0],[-71.12411376865246,42.34386329385505,0],[-71.1233736731009,42.3434749020298,0],[-71.12234711709291,42.34286584162875,0],[-71.12140411427428,42.34232737382336,0],[-71.12126092659771,42.34208026015243,0],[-71.12114268566046,42.34176042014086,0],[-71.12094387630687,42.34108254458189,0],[-71.1207814753956,42.34044393223565,0],[-71.1208375383286,42.33998191225358,0],[-71.12099016965418,42.33948234663577,0],[-71.12123860012277,42.33882191972934,0],[-71.12139630659428,42.33832235445735,0],[-71.12146765953477,42.33771008319327,0],[-71.121411992679,42.33703017144745,0],[-71.12120824499999,42.33659797534004,0],[-71.12089836319257,42.3363086768638,0],[-71.12039542669383,42.33590289390604,0],[-71.12003475307847,42.33557602028131,0],[-71.119511542459,42.33506504891638,0],[-71.11914913467743,42.33457354949882,0],[-71.11897144842371,42.33413777638488,0],[-71.11885984200758,42.33365318392741,0],[-71.11874310410894,42.3333038177195,0],[-71.11872284079372,42.33314228925811,0],[-71.11874832424817,42.33294320604953,0],[-71.11847917981203,42.33251116225973,0],[-71.11819543350482,42.33214807937038,0],[-71.11789572948344,42.33190760756198,0],[-71.11750961688776,42.33174224386034,0]]},"properties":{"name":"Harvard, Brookline - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"b11f9a26-d650-4ed0-8d56-42ca09811c53","geometry":{"type":"LineString","coordinates":[[-71.13280250594691,42.35563818297768,0],[-71.13270425198733,42.35524473695816,0],[-71.13260146311636,42.35492239616074,0],[-71.13250222553036,42.35458171212078,0],[-71.13237103164117,42.3541505484872,0],[-71.13220674523131,42.35358836273418,0],[-71.13211036274004,42.35299217413385,0],[-71.13204206802209,42.35283359739547,0],[-71.1319523399959,42.35252344788114,0],[-71.13184592056632,42.35215954498913,0],[-71.13174575817376,42.35184013805917,0],[-71.13163098300952,42.35151764379393,0],[-71.13146818561752,42.35121211657949,0],[-71.13124875803811,42.35083158358283,0],[-71.13110891573952,42.3506032080663,0],[-71.13094195470444,42.35026064766264,0]]},"properties":{"name":"Harvard Hazard Lanes - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"43b90fc9-4bf9-4088-9c9d-72a0bf3547a3","geometry":{"type":"LineString","coordinates":[[-71.1229195616122,42.3692645199269,0],[-71.1231658029698,42.36897890361864,0],[-71.1242731047461,42.36767925628256,0],[-71.12473547655513,42.36726282773711,0],[-71.12541211806166,42.36660486386987,0],[-71.12615642484408,42.36581363068497,0],[-71.12774634896037,42.36469763814184,0],[-71.12855823423739,42.36405632944121,0],[-71.12953925541913,42.36330673255615,0],[-71.1299790147525,42.36301522152322,0],[-71.13023841133752,42.36262372599953,0],[-71.1303399370677,42.36237382726257,0],[-71.13039466401614,42.36215963691566,0],[-71.13040375644945,42.3620395052875,0],[-71.13039681451625,42.36190922698298,0],[-71.1303646772422,42.3617654209485,0],[-71.13026842106379,42.36161317471932,0],[-71.13016988768798,42.36148292445046,0],[-71.13004386593246,42.36133237888194,0],[-71.12985371740812,42.36115816468266,0],[-71.12968692895485,42.36101563111706,0],[-71.12932084703381,42.36073394655902,0],[-71.12889733430666,42.36040535746761,0],[-71.12874185977878,42.36028079474328,0],[-71.1280538458312,42.3597371116148,0],[-71.12754134030618,42.35933325412301,0],[-71.1271329656192,42.35901257394403,0],[-71.1270083406169,42.35885297970493,0],[-71.12680493793872,42.35850702227093,0],[-71.12655057765156,42.35808262062351,0],[-71.12651607953558,42.35802679082525,0]]},"properties":{"name":"North Harvard","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"5f4214a2-3d66-4226-87f2-411f24bfef24","geometry":{"type":"LineString","coordinates":[[-71.12651663990297,42.35802708748847,0],[-71.12797616824089,42.35747720625241,0],[-71.12915744837379,42.35703189386683,0],[-71.1300742006552,42.35670463225448,0],[-71.13280761493588,42.3556328529146,0]]},"properties":{"name":"Cambridge Street - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"4b0609e9-4749-42a7-a61e-a60010d53652","geometry":{"type":"LineString","coordinates":[[-71.10489455775868,42.31703267996572,0],[-71.10464122658591,42.31703557520329,0],[-71.10445771753506,42.31702226057136,0],[-71.10421037941728,42.31700450659226,0],[-71.10407873749351,42.31698087801359,0],[-71.10392316010743,42.31695429393789,0],[-71.10372171312754,42.31690557474834,0],[-71.10355418052373,42.31684653807838,0],[-71.10332682651493,42.31673733816455,0],[-71.10318323499833,42.3166665061332,0]]},"properties":{"name":"Boylston St, JP - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":5}},{"type":"Feature","id":"bd2bfd0b-0040-4c00-a6d5-af7873286832","geometry":{"type":"LineString","coordinates":[[-71.11163924726513,42.31951546966041,0],[-71.111467357927,42.3194254847519,0],[-71.11126084573786,42.31930396239473,0],[-71.11101153147533,42.31915683546701,0],[-71.11071039443877,42.31897862423835,0],[-71.11049783795147,42.31885819070451,0],[-71.11030874891067,42.31876286342183,0],[-71.10994036768973,42.31860535556716,0],[-71.10936699680855,42.31837138351601,0],[-71.1086602754304,42.31809124494249,0],[-71.10813833031526,42.31792532846495,0],[-71.10784558526704,42.31782376221535,0],[-71.10742804022,42.31764298191405,0],[-71.1070484775692,42.31745024402581,0],[-71.10668682999632,42.31726596976827,0],[-71.1062828496795,42.31708804336437,0],[-71.10602372897593,42.31699580192238,0],[-71.10578700560964,42.31694603305996,0],[-71.10560520290471,42.31694036657578,0],[-71.10539506438461,42.31697450467709,0],[-71.10514149931873,42.31700966882334,0],[-71.10489073972467,42.31703343881581,0]]},"properties":{"name":"Boylston St, JP - Traffic-Calmed Street","description":"","wayType":"traffic-calmed-street","protectionLevel":3,"routeId":5}},{"type":"Feature","id":"1f5542e0-3587-4645-8954-75ed0bca0165","geometry":{"type":"LineString","coordinates":[[-71.10155776972616,42.31249136220701,0],[-71.10067820583717,42.31214304710824,0],[-71.09922384650717,42.31158628186598,0],[-71.09786544945692,42.31106048699297,0]]},"properties":{"name":"Montebello St Northbound - Traffic-Calmed Street","description":"","wayType":"traffic-calmed-street","protectionLevel":3,"routeId":5}},{"type":"Feature","id":"0f972c27-ca2e-4c92-834f-69fa6926f2d2","geometry":{"type":"LineString","coordinates":[[-71.08118256993916,42.29291850850384,0],[-71.08050017522272,42.29272298022271,0],[-71.07932495309068,42.29238469427541,0],[-71.07869637754517,42.29220906827229,0],[-71.07830994418023,42.29208233806748,0],[-71.07717614771532,42.29174690358422,0],[-71.07676036587168,42.29162739999492,0],[-71.07533921339149,42.29121159719467,0],[-71.07468375844091,42.2910178491002,0],[-71.07305179434385,42.29053787218319,0],[-71.07206695846679,42.29024371207827,0],[-71.07161202286579,42.29021284087626,0]]},"properties":{"name":"Talbot Ave, Central Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":5}},{"type":"Feature","id":"d804f303-4c93-4f1b-942d-84eec6778513","geometry":{"type":"LineString","coordinates":[[-71.09786617807352,42.31106906750318,0],[-71.09785202750435,42.3112044373482,0],[-71.09779556750745,42.31146683819084,0],[-71.09759542686767,42.31177614556743,0],[-71.09721469337953,42.31213458973206,0],[-71.09662962672532,42.31232589228286,0],[-71.0962410414214,42.31248696411533,0],[-71.09561008379791,42.31297251530644,0],[-71.0950651822845,42.31333641535088,0]]},"properties":{"name":"Walnut Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":5}},{"type":"Feature","id":"fa4340dc-55bf-4b97-a40d-5c816922d482","geometry":{"type":"LineString","coordinates":[[-71.11339887412436,42.33173054046787,0],[-71.11281352478922,42.33191314117568,0],[-71.11209609047019,42.33200739339831,0],[-71.11189345407861,42.33158169239541,0],[-71.11167401731949,42.3309974541713,0],[-71.11140901074835,42.33035081192652,0],[-71.1111636022046,42.32982768004678,0],[-71.11090842307391,42.32920284006249,0],[-71.11078745088808,42.32897438068765,0]]},"properties":{"name":"South Huntington Tracks - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":5}},{"type":"Feature","id":"b887d5ef-965b-4e6a-a7a8-9670aee3fb7f","geometry":{"type":"LineString","coordinates":[[-71.10048337014938,42.31358543694844,0],[-71.10086500983654,42.31322608917379,0],[-71.1011370198048,42.31292524800866,0],[-71.10156190065725,42.31249698475254,0]]},"properties":{"name":"Washington Street, JP Northbound - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":5}},{"type":"Feature","id":"e34875e9-1601-4e6b-bded-cc76d218f84d","geometry":{"type":"LineString","coordinates":[[-71.10318926786664,42.31667276179407,0],[-71.10309676341247,42.31659573694286,0],[-71.10299856100916,42.31638183517805,0],[-71.10284256656279,42.31608664523277,0],[-71.10273859870716,42.31584707993185,0],[-71.10250743015824,42.31552192541145,0],[-71.10224733457845,42.31520959347824,0],[-71.10192942922531,42.31485019149338,0],[-71.10158264210911,42.31443517429361,0],[-71.10120114948886,42.31402441989377,0],[-71.10072233151695,42.31372216839112,0],[-71.10047953039573,42.31358703834997,0]]},"properties":{"name":"Boylston Northbound","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":5}},{"type":"Feature","id":"a6aa2850-63f6-4842-abdb-26ce316f3d71","geometry":{"type":"LineString","coordinates":[[-71.096218354654,42.31249458182824,0],[-71.09659650316642,42.31274573855659,0],[-71.09717569259911,42.31311076999802,0],[-71.09771968191883,42.31343235789711,0],[-71.09850083309176,42.31392776046872,0],[-71.09941740241517,42.3145474971461,0],[-71.10020534981633,42.31522949475882,0],[-71.10049023561295,42.31550940321507,0],[-71.10064871821857,42.31570983035265,0],[-71.10084674582325,42.31607643133245,0],[-71.10109757619256,42.31655545392467,0],[-71.10156630145862,42.31737176684555,0],[-71.10180400108592,42.31774327483514,0],[-71.10185453302765,42.31783622633722,0],[-71.10223842209376,42.31802759123547,0],[-71.1028965157532,42.3183639224192,0],[-71.10297487513948,42.31838133416005,0],[-71.10312783707664,42.31816118115965,0],[-71.10328864886739,42.31791785240642,0],[-71.1034690529651,42.31767163400544,0],[-71.10362204245135,42.31739933021379,0],[-71.10371617137201,42.3172602870777,0],[-71.10382991714437,42.31708068703703,0],[-71.10390987934908,42.31695373652131,0]]},"properties":{"name":"School Soutbound","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":5}},{"type":"Feature","id":"cbf7366e-63d5-4212-a5ba-7a65055ed293","geometry":{"type":"LineString","coordinates":[[-71.08742792063184,42.30671251206878,0],[-71.0867158493603,42.30632868786297,0],[-71.08617508916414,42.30598829585362,0],[-71.08560278880593,42.30563121304898,0],[-71.08492674403475,42.30532409246296,0],[-71.0845160863933,42.30520548247031,0]]},"properties":{"name":"Seavers Southbound","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":5}},{"type":"Feature","id":"fdcd6b95-922f-4ca8-931c-4692302e4524","geometry":{"type":"LineString","coordinates":[[-71.08451059370537,42.30520689024144,0],[-71.08464679254038,42.30458357738566,0],[-71.0848437841125,42.30394080907694,0],[-71.08512098650363,42.3030895266992,0],[-71.085399969459,42.30215848993244,0],[-71.08568186822461,42.30127174047742,0],[-71.08595867109938,42.300455040809,0],[-71.0865651409096,42.29873024561358,0],[-71.08722698110111,42.29656202832911,0],[-71.08775574406361,42.2948628262025,0]]},"properties":{"name":"Blue Hills Ave - Banana","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":5}},{"type":"Feature","id":"0f709d78-21ef-4fa8-adc4-dcca40902f58","geometry":{"type":"LineString","coordinates":[[-71.06417473545406,42.2862458822157,0],[-71.06395292143897,42.2861830596584,0],[-71.06379640205802,42.28604302520651,0],[-71.06367900315415,42.28595610094855,0],[-71.06275232975273,42.28620197903307,0],[-71.06194308347804,42.2864816787934,0],[-71.06135577777601,42.2865973304679,0],[-71.06110778915838,42.28666965216592,0],[-71.0603703863111,42.2868190392702,0],[-71.0596590542215,42.28700222266261,0],[-71.05883678028866,42.28719502050519,0],[-71.05822245187338,42.28734577042384,0],[-71.05735059203255,42.28758336031969,0],[-71.0563474699913,42.28793359047025,0],[-71.05534434748323,42.28825564389626,0],[-71.05468543476084,42.28846942471544,0],[-71.05441082264836,42.28854155184547,0],[-71.05232788471933,42.28908317707103,0],[-71.05056254068288,42.28956950995308,0],[-71.04847707118617,42.29007597994914,0]]},"properties":{"name":"Ashmont Sharrows","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":5}},{"type":"Feature","id":"a27c229b-8188-4adb-b3de-6610140262eb","geometry":{"type":"LineString","coordinates":[[-71.10922044112587,42.27433769619447,0],[-71.10874789080158,42.27385713880953,0],[-71.10811280812061,42.27321742055005,0],[-71.10741120563719,42.27249717367866,0],[-71.10693339754972,42.27200954863,0],[-71.1064556468462,42.27173668246871,0],[-71.10579047953762,42.27158016619352,0],[-71.10450971749742,42.27127695774799,0],[-71.10194605002688,42.27069707570485,0],[-71.10050115128335,42.2704546187688,0],[-71.09829854043022,42.27020615350099,0],[-71.09771199814665,42.26997799922916,0],[-71.0971189092035,42.26964612259138,0],[-71.09626027451277,42.26901082557016,0],[-71.09542509945075,42.26840331347774,0]]},"properties":{"name":"Cummins Hwy - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":6}},{"type":"Feature","id":"0701d740-9c36-4164-880f-c94c0114727a","geometry":{"type":"LineString","coordinates":[[-71.04244726769036,42.28970473661743,0],[-71.04235417444885,42.28978983860308,0],[-71.04229911811761,42.28988377459251,0],[-71.04224595391302,42.2899819185922,0],[-71.04225913862072,42.29008430020825,0],[-71.04229478413728,42.29053168458496,0],[-71.04231325963536,42.29110795205681,0],[-71.04231309190631,42.2913084966782,0],[-71.04232814133371,42.29144874510462,0],[-71.04237933786013,42.2916024302369,0],[-71.04244748362044,42.29172727559015,0],[-71.04259898725034,42.29192368202809,0],[-71.04275244850494,42.29204716426147,0],[-71.04290212253967,42.29216643784331,0],[-71.04397151809265,42.29302109062789,0],[-71.04405679894391,42.29306320095129,0],[-71.04410039529076,42.29307443964289,0],[-71.0441724413352,42.29307166679482,0]]},"properties":{"name":"Neponset, Conley St","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":6}},{"type":"Feature","id":"4ef4c044-eab0-4735-b283-701ee4b38164","geometry":{"type":"LineString","coordinates":[[-71.09374677407746,42.26736181387513,0],[-71.09354928793438,42.2674491690221,0],[-71.09316791814597,42.26713337011171,0],[-71.09279336668135,42.26693347792035,0],[-71.09225992265725,42.26686965139832,0],[-71.09188537645521,42.26684781657731,0],[-71.09131308461338,42.26680508270674,0],[-71.09072498622896,42.26690810214583,0],[-71.09049769916784,42.26711834548957,0],[-71.09045508048021,42.26733489713848,0],[-71.09052894201376,42.26787733136658,0],[-71.09058672236196,42.26837373356872,0],[-71.090529896197,42.26874376435518,0],[-71.0904503411056,42.26897293236789,0],[-71.09031560954574,42.26927861559093,0],[-71.09015934229929,42.26949726886241,0],[-71.08986101343008,42.26973063896462,0],[-71.08931180117614,42.26992834058503,0],[-71.08884016041236,42.26996617597457,0],[-71.08816111781893,42.26988206331134,0],[-71.08762698049486,42.26973067342158,0],[-71.08595910272356,42.26945840896758,0],[-71.08487708113603,42.26921995398157,0],[-71.08482025870717,42.2692115411861,0],[-71.08497941105959,42.26871957905868,0],[-71.08450779564386,42.26858289455587,0],[-71.0840759627866,42.26838313639365,0],[-71.08386936532558,42.26825911404007,0],[-71.08355969431578,42.26816658697442,0],[-71.0833011555838,42.26814344295471,0],[-71.08287214329839,42.26816864223597,0],[-71.08249426195523,42.26825060957074,0],[-71.08188610405857,42.26839353212826,0],[-71.08127523255645,42.26856798408457,0],[-71.08020960151576,42.26886280714322,0],[-71.0796345721122,42.26898889854767,0],[-71.07944704868765,42.26902672387222,0],[-71.07926804482065,42.2690855740764,0],[-71.07912313355787,42.26915073477564,0],[-71.07891572016685,42.26919696676727,0],[-71.07873672753703,42.2691948453544,0],[-71.07856341757507,42.26919062183899,0],[-71.0784241972609,42.26920742618351,0],[-71.07806901000234,42.26940711865566,0],[-71.07781612331122,42.26950590504052,0],[-71.07570129711702,42.26990087346873,0],[-71.07545695485435,42.26989453371942,0],[-71.07530637211859,42.26988820619127,0],[-71.07480533558108,42.26993869384245,0],[-71.07334775131122,42.27011508479486,0],[-71.0729329188697,42.27016127523532,0],[-71.07151940349115,42.27032447087933,0],[-71.07065281138483,42.2703894971684,0],[-71.06862052055764,42.27040225652893,0],[-71.06795834281051,42.27040368336692,0],[-71.06711445879242,42.27045334140534,0],[-71.06680978248535,42.27048286477677,0],[-71.06634888204152,42.27057308597455,0],[-71.06600371722436,42.27067267460046,0],[-71.06520360881044,42.27093871728713,0],[-71.06475108864791,42.2711036809839,0],[-71.06413237780407,42.2714554964137,0],[-71.06356191616243,42.27182130740553,0],[-71.06287717375344,42.27230045912803,0],[-71.06232773851448,42.27267405523422,0],[-71.06186036894808,42.2729979593365,0],[-71.06150668989531,42.27326570935656,0],[-71.06102248767387,42.27361907116756,0],[-71.06066249231063,42.27387280404201,0],[-71.05998776250965,42.27428139866782,0],[-71.05967200107953,42.27444637742904,0],[-71.05923416319077,42.27463467970188,0],[-71.05904892150174,42.27471716065567,0],[-71.05857313142971,42.27502691435587,0],[-71.0570306371882,42.27608450474897,0],[-71.0565779786281,42.27638958607765,0],[-71.0557434284647,42.27695397915188,0],[-71.05510759735856,42.27736332992963,0],[-71.05463173511313,42.27755233374027,0],[-71.05387664172764,42.27789905812163,0],[-71.05334510793803,42.27810908282211,0],[-71.05264153888504,42.27836306127973,0],[-71.05049175815272,42.27902851919237,0],[-71.04964832565351,42.27940734616744,0],[-71.04903713356634,42.2797701959044,0],[-71.04839474135184,42.28021543678175,0],[-71.04766235683142,42.28068446630115,0],[-71.04705488922778,42.28116738573323,0],[-71.04668234425347,42.28154618403228,0],[-71.04628199744344,42.28224985878087,0],[-71.04595037435372,42.28256835446292,0],[-71.04567942942109,42.28273315863909,0],[-71.04514350421606,42.28290647563606,0],[-71.04480980850644,42.28296822019545,0],[-71.04382326518251,42.28327334656171,0],[-71.04374946394563,42.28329472758207,0],[-71.0434765726212,42.28361553737662,0],[-71.0432430654359,42.28371958939266,0],[-71.0430634954176,42.28367942394339,0],[-71.04298727495642,42.28360110812785,0],[-71.04286068833343,42.28348497994179,0],[-71.04265756206013,42.28337925067002,0],[-71.0424673952143,42.28339385496382,0],[-71.04233631888852,42.2834302011161,0],[-71.04218150566818,42.28349424572487,0],[-71.04203866216581,42.2836467967422,0],[-71.0418223089766,42.28390750374117,0],[-71.04158408346306,42.28419127576663,0],[-71.0413417352508,42.28440693015398,0],[-71.04101917647911,42.28451476426935,0],[-71.0405713295282,42.28464747011617,0],[-71.04046374145223,42.28470109545657,0],[-71.04007536518834,42.28496699198217,0],[-71.03978726656176,42.28519479177992,0],[-71.03960379438206,42.28534049585662,0],[-71.03949336725745,42.28545363030099,0],[-71.03942822840241,42.28555756748847,0],[-71.0392814651281,42.28567468970508,0],[-71.03904899153262,42.28582023807139,0],[-71.03874049002566,42.28601259200273,0],[-71.03868289262036,42.28606582816005,0],[-71.0386707411722,42.28611492204694,0],[-71.03867220264775,42.28616209929471,0],[-71.03869343117533,42.28618534025203,0],[-71.03873816573655,42.28623178361335,0],[-71.0391446157911,42.28660131330965,0],[-71.03917107856006,42.28664638039382,0],[-71.03917761775918,42.28671032902224,0],[-71.03917975855505,42.28677940961578,0],[-71.03918189932392,42.28684849026657,0],[-71.0392175245414,42.28689508779966,0],[-71.03927215336793,42.28696664970295,0],[-71.03936974251144,42.28702736817314,0],[-71.0395404426398,42.28716776400107,0],[-71.03963792792241,42.28722511274491,0],[-71.03963327909842,42.2872618119646,0],[-71.03950618017835,42.28746559480606,0],[-71.0392767390607,42.28776637812753,0],[-71.0390817881721,42.288025595619,0],[-71.0388730717237,42.28830498639099,0],[-71.03880272163907,42.28840276278493,0],[-71.0387274640556,42.28852670713318,0],[-71.03873171065635,42.28854073491966,0]]},"properties":{"name":"Neponset River Greenway - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":6}},{"type":"Feature","id":"54874e06-20f1-4d77-bcd6-bb6a2fd9a74c","geometry":{"type":"LineString","coordinates":[[-71.1505130857876,42.28732737603286,0],[-71.14999088287233,42.28727363239181,0],[-71.15105715522277,42.28740520673989,0],[-71.15168104568676,42.28750897696877,0],[-71.15212856635083,42.28754137125996,0],[-71.15264625328287,42.28745691009194,0],[-71.15300598957303,42.28735948794254,0],[-71.1532691749595,42.28715821877142,0],[-71.15361131494554,42.28690500716695,0],[-71.1539008189451,42.28670373331976,0],[-71.15414645021694,42.28650895698447,0],[-71.15444472672678,42.2863141718201,0],[-71.15471670671215,42.28621675922357,0],[-71.1550150055332,42.28610635899912,0],[-71.15550631009545,42.28589206471771,0],[-71.15574319225358,42.28580114626307,0],[-71.1560589838621,42.28551547388509,0],[-71.15638087477777,42.28523558210061,0],[-71.15655869104346,42.28499391257931,0],[-71.15671607851955,42.28470693801968,0],[-71.15677659315963,42.2844352880123,0],[-71.15684650513965,42.28419795261819,0],[-71.15693386675187,42.28381606318958,0],[-71.15697757047853,42.28369523639702,0],[-71.1572126456516,42.28306623177861,0],[-71.15740649670573,42.28263834026772,0],[-71.15753031707715,42.28241541034357,0],[-71.15769916262695,42.28211330913702,0],[-71.15791022079945,42.28174245238462,0],[-71.15801148909601,42.28144869500672,0],[-71.15813805816937,42.28103201794951,0],[-71.1581664507888,42.28070445140197,0],[-71.15816361552923,42.28064820442989,0]]},"properties":{"name":"Centre Street, West Roxbury - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":6}},{"type":"Feature","id":"b3c80530-c813-4380-b32f-e692ae6d597e","geometry":{"type":"LineString","coordinates":[[-71.109216225993,42.27432980327405,0],[-71.10933839955229,42.27447739097889,0],[-71.10942359613794,42.27456028728955,0],[-71.10960741312836,42.27466637810409,0],[-71.11023955368853,42.274996239626,0],[-71.11064941276348,42.27524052145505,0],[-71.11115379897115,42.27552894908246,0],[-71.11149677648898,42.27570464939571,0],[-71.11189356254512,42.27591516206747,0],[-71.11312484691616,42.27654151182485,0],[-71.11370986159531,42.27684924239834,0],[-71.11396542074677,42.2769752074982,0],[-71.11422547296843,42.27712107060231,0],[-71.1143667304495,42.27724540642592,0],[-71.11512336778037,42.27785432717384,0],[-71.11599735568826,42.27857108552889,0],[-71.1163583194237,42.2788440166715,0],[-71.11653769134189,42.27897663073396,0],[-71.116692376793,42.2790445780057,0]]},"properties":{"name":"Cummins Hwy - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":6}},{"type":"Feature","id":"16d344b3-0037-4413-9908-47f1e8d32f13","geometry":{"type":"LineString","coordinates":[[-71.12807800394457,42.28642732827551,0],[-71.12850532498624,42.28672599500697,0],[-71.1291463341431,42.28707738296774,0],[-71.12963898926489,42.28723992202602,0],[-71.13091532625582,42.28676579366822,0],[-71.13174640788857,42.2865419194553,0],[-71.13242313148912,42.28645854942096,0],[-71.13288615777488,42.28639272176366,0],[-71.13348621109427,42.28633746133652,0],[-71.13516132357681,42.28630628481007,0],[-71.13742860461471,42.28626260139805,0],[-71.13921366598308,42.28616879605364,0],[-71.14076186355969,42.28613754804064,0],[-71.14210721615022,42.28610626400585,0],[-71.14338466650486,42.28607497363771,0],[-71.14450138365042,42.28605619013845,0],[-71.14650643294144,42.28601234227998,0],[-71.14788272906728,42.2860054679952,0],[-71.14818997882955,42.28598134641729,0],[-71.1486415405984,42.28592277679695,0],[-71.14905121270517,42.28595030738748,0]]},"properties":{"name":"Belgrade - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":6}},{"type":"Feature","id":"ab7ee163-e9b1-4160-ba66-6c5f89bab83d","geometry":{"type":"LineString","coordinates":[[-71.12807825460926,42.28642674528601,0],[-71.12785176182315,42.28626354358055,0],[-71.12743136901003,42.28600516356914,0],[-71.12668981907454,42.28553917100014,0],[-71.1262184754484,42.28524521549001,0],[-71.125669718931,42.2848983004123,0],[-71.12518439508712,42.28453381233938,0],[-71.12479892861153,42.28423666738511,0],[-71.1245810440425,42.28399967779502,0],[-71.12445186629016,42.28384178209225,0],[-71.12433260675449,42.28364730864646,0],[-71.12420714208571,42.2833829338661,0],[-71.12407754195046,42.28307297071676,0],[-71.12388225068018,42.2828222951104,0],[-71.12361090096219,42.28260715087421,0],[-71.12323280597553,42.28235805699333,0],[-71.12254648406606,42.2819008696191,0],[-71.12167712476202,42.28133587018593,0],[-71.12083059875974,42.28078028812192,0],[-71.12067909958427,42.28069858372881,0]]},"properties":{"name":"Cummins Hwy - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":6}},{"type":"Feature","id":"d9f11bbd-11d6-424e-960c-4487654b7dc6","geometry":{"type":"LineString","coordinates":[[-71.14905231563829,42.28596260400568,0],[-71.14927468481302,42.2861052750136,0],[-71.14970301919807,42.28647720260099,0],[-71.14991720540303,42.28680092687768,0],[-71.14999172417119,42.28706611191017,0],[-71.15000106040095,42.28727619705292,0]]},"properties":{"name":"Belgrade - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":6}},{"type":"Feature","id":"04f7a778-b8bf-4637-8fa2-fd167cfe42ae","geometry":{"type":"LineString","coordinates":[[-71.03876997001345,42.28856447382739,0],[-71.041439001725,42.28871892258061,0],[-71.04143431932319,42.288804173131,0],[-71.04189493376036,42.28923065032121,0],[-71.04239702298074,42.28968783917591,0],[-71.04243808517506,42.28972338162719,0],[-71.04169685899502,42.28905834804237,0]]},"properties":{"name":"Water St Connector","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":6}},{"type":"Feature","id":"0f14e27d-7cc4-4bca-8e75-37939f8262db","geometry":{"type":"LineString","coordinates":[[-71.1206759890696,42.2806916894837,0],[-71.11914099273271,42.28004171166701,0],[-71.11850400823838,42.27978217822753,0],[-71.11668786736492,42.27904201167323,0]]},"properties":{"name":"Cummins Hwy","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":6}},{"type":"Feature","id":"3916a094-d03f-48bf-b87e-0d14d324976e","geometry":{"type":"LineString","coordinates":[[-71.09542408812598,42.26840656623241,0],[-71.09427880899369,42.26756029072267,0],[-71.09381099097403,42.2673653334865,0],[-71.09374637548979,42.26736097868798,0]]},"properties":{"name":"Cummins Hwy South","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":6}},{"type":"Feature","id":"0efa150e-b7a0-4397-b719-9a0e7c75e3db","geometry":{"type":"LineString","coordinates":[[-71.09232136550551,42.29591972207675,0],[-71.09331230017425,42.29459289246022,0],[-71.09392359872481,42.29375172383501,0],[-71.09448360574342,42.29315719796402,0],[-71.09520557492556,42.29242812768727,0],[-71.09558174377759,42.29213086453646,0],[-71.09618874678867,42.29175769665451,0],[-71.09700948904731,42.29134340278514,0],[-71.099604727688,42.29052676702945,0],[-71.1002074500817,42.29033698713751,0],[-71.10313883388879,42.28939757391091,0],[-71.10369023528663,42.28918880829138,0],[-71.10468545286247,42.28880212939494,0],[-71.10593350057106,42.28816636632528,0],[-71.10660452386097,42.28778364821034,0],[-71.10876944035338,42.2864757494897,0],[-71.10943453167725,42.28607403767039,0],[-71.11086406511848,42.28519636432615,0],[-71.11144885774266,42.28484273505551,0],[-71.11199922811869,42.28445234149991,0],[-71.11264132889602,42.28400535972665,0],[-71.11357651136896,42.28337366411865,0],[-71.11439056533487,42.28280220040803,0],[-71.11486529463735,42.28239901378236,0],[-71.11525891108688,42.28206803022272,0],[-71.11564102853788,42.28166351241356,0],[-71.11589699714476,42.28126467416444,0],[-71.1161786995772,42.28067950934286,0],[-71.11646292657097,42.27994465879386,0],[-71.11666665967677,42.27929323179711,0],[-71.11669874813113,42.27899136325356,0]]},"properties":{"name":"American Legion Hwy - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":7}},{"type":"Feature","id":"9ba21f35-b09d-4280-901e-05d0487c9757","geometry":{"type":"LineString","coordinates":[[-71.03964628580272,42.33000837262059,0],[-71.03826467289126,42.32970319869173,0],[-71.03733939586101,42.32947552702201,0],[-71.0365295615528,42.32933459396794,0],[-71.03610877253259,42.32927784305368,0],[-71.03564968616256,42.32927292604518,0],[-71.03512683510388,42.32927269218951,0],[-71.03475058325046,42.32933851629977,0],[-71.03433608930625,42.32938546608322,0],[-71.0339980658235,42.32948430190512,0],[-71.03355159653738,42.32963965265076,0],[-71.03311789256749,42.32977615235294,0],[-71.03268417278143,42.32992679232191,0],[-71.03203992810741,42.33019046443225,0],[-71.02918800120266,42.33153177457022,0],[-71.02849470590517,42.33181636038702,0],[-71.02787597478033,42.33204230933394,0],[-71.02703394881992,42.33238127202736,0],[-71.02534277438582,42.3327617844543,0],[-71.02423947689904,42.33291203155252,0],[-71.02321912093934,42.33300574789438,0],[-71.02286828785432,42.33311868611722,0],[-71.0227086043591,42.33337786090055,0],[-71.02281670479812,42.33367489610367,0],[-71.02325462506383,42.33421476735159,0],[-71.02342674845305,42.33441350061482,0],[-71.02355495663957,42.33471584548159,0],[-71.0236831289831,42.33505489413215,0],[-71.02371495575862,42.33535502609798,0],[-71.0237264111089,42.3355817380487,0],[-71.02369989166876,42.3358127480782,0],[-71.02360288777672,42.33607691263326,0],[-71.02352498456811,42.33624973611219,0],[-71.02339001911452,42.33647702852421,0],[-71.02329864152834,42.33660788053298,0],[-71.02315962987906,42.33675006197989,0],[-71.02306842708643,42.33685319320175,0],[-71.0228971078041,42.337041914393,0],[-71.02271141416361,42.33718934251246,0],[-71.02260440718115,42.33726030306761,0],[-71.0224622822887,42.33731592962488,0],[-71.02206084030557,42.33758972077499,0],[-71.02174046640512,42.3377718400664,0]]},"properties":{"name":"William J Day Blvd - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":7}},{"type":"Feature","id":"923c5f59-60c5-410e-be68-8eeb9e948a62","geometry":{"type":"LineString","coordinates":[[-71.02523384296018,42.33843398049309,0],[-71.02527126465797,42.33849165561943,0],[-71.02536364833244,42.3385564040946,0],[-71.02545801407096,42.33855737720794,0],[-71.02559269904643,42.33854640757636,0],[-71.02582832320891,42.3385251316577,0],[-71.02615585413217,42.33850363629016,0],[-71.02649271346667,42.33849038432935,0],[-71.02689836240867,42.3385032204242,0],[-71.02714807245468,42.3385229096796,0],[-71.0273766108392,42.33853236925745,0],[-71.02755857114025,42.33851932430856,0],[-71.0278133206324,42.33849230746857,0],[-71.02809321732644,42.33847922604382,0],[-71.02841403382001,42.33847301281704,0],[-71.02866660752025,42.33847442628222,0],[-71.02898063817827,42.33847604801615,0],[-71.02926829290027,42.33850066313007,0],[-71.02942768532695,42.33850083489717,0],[-71.0296628937882,42.3384822424542,0],[-71.02982065340368,42.33846375624584,0],[-71.02999492473046,42.33844163231831,0],[-71.03017281661594,42.33844001886457,0],[-71.03036021858557,42.33843585185789,0],[-71.03049847375628,42.33844936530122,0],[-71.03064662971093,42.3384485739053,0],[-71.03074094414252,42.3384280250396,0],[-71.03083509224254,42.33839399442521,0],[-71.03099350800348,42.33826950690176,0]]},"properties":{"name":"1st Street Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":7}},{"type":"Feature","id":"88441586-4408-4f08-ac8a-f73263cf362f","geometry":{"type":"LineString","coordinates":[[-71.0396437513076,42.33000229371828,0],[-71.03962159783477,42.33008550845948,0],[-71.03995559412432,42.33013191198783,0],[-71.04015488516994,42.33015920804114,0],[-71.04067232920873,42.33021401296075,0],[-71.04112812062678,42.33023995722478,0],[-71.04172825039086,42.33026317702232,0],[-71.0422098801083,42.3302563775561,0],[-71.04272947871885,42.33024821194206,0],[-71.0432461698115,42.330238681097,0],[-71.04395753906867,42.33022233059896,0],[-71.0441781345167,42.33014321237615,0],[-71.04460625208363,42.33001908002387,0],[-71.04487013509923,42.3299317765069,0],[-71.04529819583072,42.32976569899466,0],[-71.04570785718813,42.32955561778109,0],[-71.04606584900766,42.32934962699529,0],[-71.04643373089255,42.32911498354547,0],[-71.04678433557032,42.32887761420364,0],[-71.04709930955163,42.32865998241081,0],[-71.04729306179736,42.32847581540034,0],[-71.04756431343448,42.32818660415882,0],[-71.04776544527557,42.32797787956,0],[-71.04791673020456,42.32780484208763,0],[-71.04806250135795,42.32762340255714,0],[-71.04815660618424,42.32748834598493,0],[-71.04834296949068,42.32718003407726,0],[-71.04843891882746,42.32701632765342,0],[-71.04854351755105,42.32678644284345,0],[-71.04864130645903,42.32655043665169,0],[-71.04874463714208,42.32623667114075,0],[-71.04882912803217,42.32587906484435,0],[-71.04886603027218,42.3256021325427,0],[-71.04889642367677,42.32488732545478,0],[-71.04888165941756,42.32430481303529,0],[-71.0489074886195,42.32384921650959,0],[-71.04894254405168,42.3235395436082,0],[-71.04899051589737,42.32333491367566,0],[-71.04906985453121,42.32311800519578,0]]},"properties":{"name":"William J Day Blvd - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":7}},{"type":"Feature","id":"7d513a85-fbbd-4af1-8765-df61b236dcef","geometry":{"type":"LineString","coordinates":[[-71.09230263217444,42.295925649102,0],[-71.09291622828451,42.29618408073959,0],[-71.09266931425753,42.29641988129283,0],[-71.09237416531093,42.29677138818832,0],[-71.09217538767379,42.29701165958824,0],[-71.0921030213368,42.29720302511284,0],[-71.09197043766102,42.29744332629244,0],[-71.09171151529573,42.29763906008755,0],[-71.09144658086231,42.29782588869272,0],[-71.09121175577927,42.29798602416285,0],[-71.09074829581503,42.29809264191137,0],[-71.09029696282775,42.29808798495565,0],[-71.08962292427167,42.29813663894467,0],[-71.08924377668617,42.29816317127104,0],[-71.08853352935517,42.29831863461608,0],[-71.0880338323558,42.29854986644455,0],[-71.08775866311107,42.29877262880996,0],[-71.08747851523658,42.29912849602209,0],[-71.08725433199567,42.29948438947238,0],[-71.08725408318975,42.29976587929521,0],[-71.08733215313795,42.30008880311061,0],[-71.08744384891894,42.30036206891549,0],[-71.08767865520208,42.30066023234291,0],[-71.08800292187864,42.30106606935709,0],[-71.08853983068629,42.30152996506638,0],[-71.08887541968059,42.30180334263127,0],[-71.08888654370098,42.30188614128352,0],[-71.08797976028653,42.30196022001375,0],[-71.08743508565422,42.30219301825969,0],[-71.08693119166922,42.30249830464872,0],[-71.08631646050753,42.30284079725207,0],[-71.08530868052135,42.3034289971324,0]]},"properties":{"name":"Franklin Park Blue Hills Ave Bypass","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":7}},{"type":"Feature","id":"6f84c42a-059f-460e-b017-3e5991d65019","geometry":{"type":"LineString","coordinates":[[-71.08532416157958,42.30343039163789,0],[-71.08378609502947,42.30347951605142,0],[-71.08338309602355,42.30355205440873,0],[-71.08309169415263,42.30366666031991,0],[-71.08237665866766,42.3041942079895,0],[-71.08147446314267,42.30481427806795,0],[-71.08055074214931,42.30538212523153,0],[-71.07998033855613,42.30570671867208,0],[-71.07956510860511,42.30587526881516,0],[-71.07836694403031,42.30610878674081,0],[-71.07777755532723,42.30630568417133,0],[-71.07727988493878,42.30655900533396,0],[-71.07607689339044,42.30746108383509,0],[-71.07557444563449,42.3079346197998,0],[-71.07504193131918,42.30834736578313,0],[-71.07449185335092,42.3087276864962,0],[-71.07311345187162,42.30961105007176,0],[-71.072088935184,42.31028726952763,0],[-71.07139101135793,42.31070495250652,0],[-71.07094384531277,42.31091087657227,0],[-71.06971571167712,42.31155647154606,0],[-71.06926804574385,42.3119340720618,0],[-71.06842785848596,42.3127175927121,0],[-71.06735520809417,42.31456811895131,0],[-71.06661054373784,42.31557740220418,0],[-71.06606858751385,42.31623714212017,0],[-71.06558529745628,42.31678619218606,0],[-71.06557494084122,42.3167964071931,0],[-71.06536088494136,42.31693942707629,0],[-71.06512699201026,42.31698733923847,0],[-71.06458229043986,42.31733726524358,0],[-71.0643170774545,42.31755035598852,0],[-71.06409541681704,42.31779186669691,0],[-71.06368124217026,42.31834896612071,0],[-71.06323535172696,42.31898233867753,0],[-71.062868152525,42.31946695055459,0],[-71.06287343758594,42.31946694989696,0],[-71.06256126135249,42.31980041554404,0],[-71.06223905195593,42.32004081511962,0],[-71.06194710235201,42.3202317123673,0],[-71.06155208374882,42.32050300975153,0],[-71.06138596927126,42.32061747665886,0],[-71.06122828139722,42.3205112895975,0],[-71.06093507987293,42.32039002169691,0],[-71.06054010933917,42.32023771397535,0],[-71.06026968932657,42.32019250465697,0],[-71.05993069686421,42.32015289113795,0],[-71.05962217773883,42.32011610953284,0],[-71.05904858772864,42.32014177916167,0],[-71.0584847545823,42.32018935462919,0],[-71.05803512975899,42.32031022109049,0],[-71.0575892741791,42.32047051927545,0],[-71.05723725693002,42.32062637005096,0],[-71.05679087483763,42.32086321233087,0]]},"properties":{"name":"Columbia Road - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":7}},{"type":"Feature","id":"ada025f5-21b3-4a6e-9457-05bc9381d469","geometry":{"type":"LineString","coordinates":[[-71.0923179337828,42.29593322645592,0],[-71.0919211064633,42.29644994084507,0],[-71.09174792858674,42.29666168854932,0],[-71.0915465220999,42.29685555783687,0],[-71.09128867940346,42.29704348496067,0],[-71.09097435755892,42.29716285914123,0],[-71.09053914190442,42.29732998041027,0],[-71.0900192577693,42.29747029864667,0],[-71.08934892470457,42.29763642182723,0],[-71.08856706584302,42.29783049009742,0],[-71.08808431855145,42.29796139192389,0],[-71.0871013210447,42.29819801348133,0]]},"properties":{"name":"American Legion Hwy - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":7}},{"type":"Feature","id":"41272868-2764-403e-bb8b-539fdfdb1a6e","geometry":{"type":"LineString","coordinates":[[-71.11669164270162,42.27898379161824,0],[-71.11665551444325,42.27870490228305,0],[-71.11646718472369,42.27838307365608,0],[-71.11597457012475,42.27771257496826,0],[-71.11577907600011,42.27721912599792,0],[-71.11576477109216,42.27677934868965,0],[-71.11579408692778,42.27604460487325,0],[-71.11593207191562,42.27543859337787,0],[-71.11621398932544,42.27484611445247,0],[-71.1164795991573,42.27455151586229,0],[-71.11690460985807,42.27398193757953,0],[-71.11736944680779,42.27338290048325,0],[-71.11798026136817,42.27285264561738,0],[-71.11866967899302,42.27255086820322,0],[-71.11937414023068,42.27254845308,0],[-71.12010415378076,42.27259281717932,0]]},"properties":{"name":"American Legion Hwy - West","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":7}},{"type":"Feature","id":"2845162c-1348-4cba-83d0-cdeca8b618fe","geometry":{"type":"LineString","coordinates":[[-71.05678571868911,42.32086431786915,0],[-71.05616712271691,42.32115126488632,0],[-71.05583815273683,42.32128367877569,0],[-71.05571438436114,42.32131497222184,0],[-71.05535944425107,42.32141330474901,0],[-71.05525855215959,42.32143622757246,0],[-71.05465547687149,42.32153053173023,0],[-71.0542940142426,42.32154352991369,0],[-71.05199430436247,42.32159031950165,0],[-71.05021399848434,42.32199286025826,0],[-71.04978762439137,42.32226226335533,0],[-71.04940776388543,42.32259184766671,0],[-71.04906666416164,42.32312204496326,0]]},"properties":{"name":"Under the 93","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":7}},{"type":"Feature","id":"efcae6b8-7ac0-4d5c-88a8-fb97fc7d380e","geometry":{"type":"LineString","coordinates":[[-71.02174511163146,42.33777240181031,0],[-71.02194072026103,42.33790239369961,0],[-71.02211154760921,42.33803026299748,0],[-71.02252398208108,42.33820295436609,0],[-71.02282759033231,42.33833291076116,0],[-71.02328578661255,42.33850209331284,0],[-71.02351268519104,42.33859379872644,0],[-71.02380662807721,42.33869114008343,0],[-71.02403528532282,42.33873778244315,0],[-71.0242409560751,42.33874937659151,0],[-71.02442672448745,42.33873220126736,0],[-71.02462365178086,42.33864380686653,0],[-71.02481812893524,42.33851911550987,0],[-71.02496472635923,42.33841438298131,0],[-71.02510236455119,42.33831489782308,0],[-71.02522968548088,42.33843706575139,0]]},"properties":{"name":"Shore Rd","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":7}},{"type":"Feature","id":"50507396-c1ac-4923-a363-d590a245ad2c","geometry":{"type":"LineString","coordinates":[[-71.08709640446784,42.29819804079207,0],[-71.08666844918223,42.29945484223632,0],[-71.08637751125435,42.30032191603933,0],[-71.08611755288383,42.3010830405641,0],[-71.08589562930742,42.30172906211008,0],[-71.08532323460199,42.30343370114679,0],[-71.08532323597844,42.30343605001764,0]]},"properties":{"name":"Blue Hill Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":7}},{"type":"Feature","id":"2885234d-fb94-4dee-ba0f-13435ef6da63","geometry":{"type":"LineString","coordinates":[[-71.0565541726872,42.36825753408087,0],[-71.0564113768338,42.36828173587298,0],[-71.05622878882745,42.36829036889036,0],[-71.05600641237557,42.36825922011565,0],[-71.05582383385759,42.36820732036292,0],[-71.05501440145191,42.36800144042932,0],[-71.0543444800885,42.36783477274589,0],[-71.05415722489853,42.36776730436764,0],[-71.05400507957259,42.36771540449427,0],[-71.05348695145129,42.36752284818247,0],[-71.05268644651606,42.36722355983663,0],[-71.05220787023268,42.3670348421137,0],[-71.05189190648754,42.36682380765085,0],[-71.05154085481715,42.36650553863122,0],[-71.05138115017989,42.36627998164852,0],[-71.05129458804106,42.36607243236369,0],[-71.05120802731501,42.36586142395409,0],[-71.05117996013536,42.36576456896532,0],[-71.05116126863737,42.36561237114951,0],[-71.05114261105203,42.36531143577485,0],[-71.0511099383729,42.36488234232869,0],[-71.05110761380847,42.36481143299995,0],[-71.05111242606421,42.36423724191045,0],[-71.05109719675576,42.36361237655408,0],[-71.05103894833945,42.36243977354532,0],[-71.05105535224362,42.36235502984996,0],[-71.0511395597795,42.36219886583289,0],[-71.051182066356,42.3621546247142,0],[-71.0513424264008,42.36200905977067,0],[-71.05145254557299,42.36194056283416,0],[-71.0516225472639,42.36186350923232,0],[-71.05179061877121,42.36177789135512,0],[-71.05187561835683,42.36174364620839,0],[-71.05210550956824,42.36162235243576,0],[-71.05228130892947,42.36152817053137,0],[-71.05242234563437,42.36140115614987,0],[-71.0525228131049,42.36129697362389,0],[-71.05262135147996,42.36118137195616,0],[-71.05269113572811,42.36107900567045,0],[-71.05280069939096,42.36092549824384,0]]},"properties":{"name":"Commercial St - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":8}},{"type":"Feature","id":"b482cd19-28dd-4aa5-8248-c182e148e8aa","geometry":{"type":"LineString","coordinates":[[-71.06380605510302,42.36127487555189,0],[-71.06385605200448,42.36251679606873,0],[-71.06371235101888,42.36325489660478,0],[-71.06341243570084,42.36385969706635,0],[-71.06338119642454,42.3643121417629,0],[-71.06288193577768,42.36460112552244,0],[-71.06226140437187,42.36492489654615,0],[-71.06142700323468,42.36535486284706,0],[-71.06081454153116,42.3657001142151,0],[-71.06048600926854,42.36584799396754,0],[-71.06043964876598,42.365869252549,0],[-71.05977778145508,42.36622513187555,0]]},"properties":{"name":"Causeway - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":8}},{"type":"Feature","id":"e54d5576-42da-4e88-8b77-87f00f9aa6af","geometry":{"type":"LineString","coordinates":[[-71.12495276787921,42.23529869700813,0],[-71.12493399058131,42.23547837511838,0],[-71.12491727177444,42.23584646670218,0],[-71.1249308055158,42.23630657517892,0],[-71.12498799170176,42.23667963042731,0],[-71.12503844397484,42.23697558761137,0],[-71.12510233825122,42.23728895404651,0],[-71.12515279013006,42.23757247859515,0],[-71.12518642089293,42.23774159896828,0],[-71.12531256900125,42.23817245031023,0],[-71.12558486709598,42.23903792281626,0],[-71.1258419407506,42.23984480402117,0],[-71.1261366529021,42.2409261156136,0],[-71.12622829154475,42.24147977311824,0],[-71.12629556952925,42.24186028822184,0],[-71.1263293092238,42.24247459322303,0],[-71.12630260347295,42.24318839404024,0],[-71.12629606262122,42.24446266823126,0],[-71.12624998275528,42.24507962789354,0],[-71.12616219940628,42.24542682052892,0],[-71.12608689110644,42.24573643250497,0],[-71.12578578447288,42.24640186444192,0],[-71.12544067725902,42.24694584984434,0],[-71.1252903955342,42.24713840798075,0],[-71.1248988082934,42.24757772019856,0],[-71.12424608499596,42.24823619096551,0],[-71.12299670769939,42.24951165543379,0],[-71.12242633041456,42.25004090714155,0]]},"properties":{"name":"Truman Pkwy - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":8}},{"type":"Feature","id":"b7bda1f2-56d6-4ead-83fd-6eb019d9c9b3","geometry":{"type":"LineString","coordinates":[[-71.11603685674827,42.25511389721849,0],[-71.115368526555,42.25587232422293,0],[-71.11440428523723,42.25685878423205,0],[-71.11411018694203,42.25715213398112,0],[-71.11387334980249,42.25735470394217,0],[-71.11346282714949,42.25764492494328,0],[-71.11311019415831,42.25785528722606,0],[-71.11265229073838,42.25805786019546,0],[-71.11198685585418,42.25835706668195,0],[-71.11121577927518,42.25871934664028,0],[-71.1104867968564,42.25916732407531,0],[-71.11006834646551,42.25941858180207,0],[-71.10978506378366,42.25959383629536,0],[-71.10930774570178,42.25981461475178,0],[-71.10893428966187,42.25994053684962,0],[-71.10841277737495,42.26006154774225,0],[-71.10780287295765,42.260118771554,0],[-71.10746955137667,42.2601302078556,0],[-71.10699224084244,42.26009420937606,0],[-71.1065591301381,42.26002223129909,0],[-71.10592493971174,42.25983903127029,0],[-71.1051730601659,42.25959019476244,0],[-71.10470018524818,42.25946587299907,0],[-71.10431127539783,42.2594004310691,0],[-71.10398718314063,42.25937914929534,0],[-71.10345684278295,42.25937747776701,0],[-71.10299278658931,42.25943795609609,0],[-71.10256186905087,42.25953441548714,0],[-71.10228463056434,42.25962888728463,0],[-71.10175867183862,42.25985780767841,0],[-71.10091062313255,42.26029762826748,0],[-71.10013075835627,42.26069054305909,0],[-71.09956499324652,42.2609848682295,0],[-71.09905668163564,42.2612399484035,0],[-71.09840342344376,42.26159887886482,0],[-71.09794509443267,42.26195253363042,0],[-71.0973714592121,42.26247054131164,0],[-71.09687654440219,42.26293862409054,0],[-71.09631306185868,42.26346271207501,0],[-71.09568034232687,42.26404520481631,0],[-71.09475478027868,42.26487653510107,0],[-71.0941367308737,42.26529744574334,0]]},"properties":{"name":"Truman Pkwy/Brush Hill Rd - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":8}},{"type":"Feature","id":"6c374916-0451-40cd-8387-9a811ee9d209","geometry":{"type":"LineString","coordinates":[[-71.06295298879603,42.35091759673195,0],[-71.06289586778071,42.3510441430315,0],[-71.06279314330916,42.35138126584692,0],[-71.0626614406593,42.3519017010079,0],[-71.06251082578986,42.35242784856898,0]]},"properties":{"name":"Washington, Northbound - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":8}},{"type":"Feature","id":"3d62d1f5-85a8-460a-a181-58afdf44adc6","geometry":{"type":"LineString","coordinates":[[-71.0558673271655,42.35184369032054,0],[-71.05512771040422,42.35310487027333,0],[-71.05278353944354,42.35438093016229,0],[-71.05159445754819,42.35514306895029,0],[-71.05116487083546,42.35590302309167,0],[-71.05105516156573,42.3563459967806,0],[-71.05112136722236,42.35691594680218,0],[-71.05145126402327,42.35768646010568,0],[-71.0515059118335,42.35874542208618,0],[-71.05173085840082,42.35961160488021,0],[-71.051848135125,42.35983052756144,0],[-71.05209794156818,42.36026826233291,0],[-71.05236054849767,42.36051994755512,0],[-71.05278529994123,42.36092261011665,0]]},"properties":{"name":"Rose Kennedy Greenway - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"d3938dce-fca5-487e-820b-e76d8149da7a","geometry":{"type":"LineString","coordinates":[[-71.05512153722032,42.35311014247433,0],[-71.05642643047685,42.3528406136818,0],[-71.05697224757333,42.35268674438357,0],[-71.05777874136578,42.35248557167719,0],[-71.05840527778658,42.35220292632278,0],[-71.05890107517111,42.35183866772607,0],[-71.05914143780618,42.35153935141494,0],[-71.05914509796094,42.35153664682781,0],[-71.0592671164829,42.35129232196317,0],[-71.05943205949865,42.35091837063838,0],[-71.05973906727135,42.35022052782875,0],[-71.05975956687985,42.35019049721735,0],[-71.06125104552676,42.35056653300188,0],[-71.06234374635564,42.35085792245748,0],[-71.06295477281996,42.35092155236055,0]]},"properties":{"name":"Downtown, Southbound - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"daed7baa-aa40-4cde-b12c-bb2dfe70529e","geometry":{"type":"LineString","coordinates":[[-71.08342514262472,42.32862459231158,0],[-71.08312694328855,42.32802616744135,0],[-71.08314969208539,42.32753450556104,0],[-71.08321129168033,42.32699109558849,0],[-71.08337764722314,42.32602480278721,0],[-71.08333351959728,42.32551596033735,0],[-71.08301816217111,42.32475572215458,0],[-71.08233750490243,42.32269649447827,0],[-71.08178333722365,42.32083266505042,0],[-71.08148679614739,42.3198085724548,0],[-71.08154079158452,42.31906372403939,0],[-71.0817180517498,42.3186476534743,0],[-71.08207881887037,42.3182296172121,0],[-71.08221005710232,42.31800063702575,0]]},"properties":{"name":"Warren St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"5af46449-965e-441d-a89f-4d353c2915c4","geometry":{"type":"LineString","coordinates":[[-71.09380342542006,42.26733151573973,0],[-71.09384310862225,42.26680489742497,0],[-71.09390312687857,42.2662669653837,0],[-71.09401733994822,42.26581148991608,0],[-71.09413573018745,42.26529487889017,0]]},"properties":{"name":"Blue Hill Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"5fd14eaa-f167-4bdc-9fd6-16858f6d9302","geometry":{"type":"LineString","coordinates":[[-71.09412875077074,42.2652998660061,0],[-71.09397749548461,42.26452438959493,0],[-71.09376647059698,42.26380877002683,0],[-71.09362930283748,42.26328571351821,0],[-71.09360816899895,42.2626464268669,0],[-71.09361517443583,42.26218842287463,0],[-71.09364061764455,42.24561969863485,0],[-71.09358357747574,42.24549304068925,0],[-71.09350871339325,42.24533999600997,0]]},"properties":{"name":"Blue Hills Pkwy - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"1c65e432-275e-4291-a387-70eb33e91287","geometry":{"type":"LineString","coordinates":[[-71.0699784602164,42.36113988241159,0],[-71.07500802816448,42.36150221720587,0],[-71.076383281645,42.36161055077245,0]]},"properties":{"name":"Longfellow Bridge","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":8}},{"type":"Feature","id":"1ba7caaf-a11a-44f8-b28a-08aa0f6f21b4","geometry":{"type":"LineString","coordinates":[[-71.06251554129595,42.35242087934748,0],[-71.06200904345442,42.35246864483486,0],[-71.06120270958749,42.35255762414909,0],[-71.06089709728762,42.35257350965657,0],[-71.0603416169676,42.35261237393021,0],[-71.0597412013172,42.3525786015144,0],[-71.0593828857738,42.35254517895576,0],[-71.05851165607393,42.35241569244121,0],[-71.05788514393078,42.3523373978416,0],[-71.05728214179955,42.352180684556,0],[-71.0564287925537,42.35196906644184,0],[-71.05586203376367,42.35183921459846,0]]},"properties":{"name":"Downtown, Northbound - Bus/Bike Lane","description":"","wayType":"bus-bike-lane","protectionLevel":4,"routeId":8}},{"type":"Feature","id":"1543ed71-1516-44d2-8e17-8af04dfae848","geometry":{"type":"LineString","coordinates":[[-71.08096567085717,42.33303667982525,0],[-71.08061450938108,42.33350937408777,0],[-71.08033860705456,42.3337936031069,0],[-71.07990385737513,42.33416742085613,0],[-71.07933054285085,42.33464852986197,0],[-71.07832307605518,42.33547028803712,0],[-71.07762912003513,42.33601091809214,0],[-71.07583805588283,42.33733580722585,0],[-71.07498938781116,42.33794437298265,0],[-71.0729409051459,42.33931936506756,0],[-71.07072228424377,42.34075345198133,0],[-71.07020449562123,42.3410773541652,0],[-71.06976551935725,42.34127192647468,0],[-71.06919275939761,42.34150972976,0],[-71.06875796963465,42.34165795605971,0],[-71.06820280838618,42.34197226302263,0],[-71.06757980508941,42.34239543201603,0],[-71.06707801091915,42.34282789801129,0],[-71.06661315756371,42.34318603547992,0],[-71.06629115542353,42.34350111805429,0],[-71.06597745552895,42.34395215224976,0],[-71.0653274833385,42.34499788869331,0],[-71.06495937276084,42.34557558662833,0],[-71.06484220069486,42.34586599807134,0],[-71.06459269086591,42.3466043430284,0],[-71.06441677834198,42.3473952774866,0],[-71.06404303903838,42.34874612476588,0],[-71.06386968789063,42.34932897653881,0],[-71.06356133963882,42.34988129637251,0],[-71.0630279258846,42.35079892956296,0],[-71.06295120466703,42.35091627816946,0]]},"properties":{"name":"Washington Bus/Bike Lanes","description":"","wayType":"bus-bike-lane","protectionLevel":4,"routeId":8}},{"type":"Feature","id":"8967f60a-d2d3-447f-99b1-a98ae29f8289","geometry":{"type":"LineString","coordinates":[[-71.05977977559645,42.36622110654658,0],[-71.05916478968958,42.36655032266447,0],[-71.05834835518166,42.36705603715682,0],[-71.05780816529574,42.36746005998184,0],[-71.05746952344673,42.36770191909314,0],[-71.05735384833544,42.36777741252356,0],[-71.05672498211398,42.36818730842406,0],[-71.0565535503006,42.36825979511765,0]]},"properties":{"name":"Causeway - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":8}},{"type":"Feature","id":"5c31ba9e-86e5-4c65-ad0e-c3d028df2912","geometry":{"type":"LineString","coordinates":[[-71.08219971813797,42.31801246661347,0],[-71.08246112337643,42.31741376098193,0],[-71.08289472372273,42.31664385432971,0],[-71.08303907419467,42.31635329254541,0],[-71.08309622687422,42.31592585474085,0],[-71.08309622450874,42.31592878052768,0],[-71.08358463106462,42.31466297601657,0],[-71.0837587672122,42.31424093944114,0],[-71.08365869226499,42.31383664139671,0],[-71.08360896647191,42.31357267884849,0],[-71.08356641451952,42.31327177127131,0],[-71.08347386630487,42.31300251146437,0],[-71.08327424138419,42.31273847578144,0],[-71.08303903812457,42.31235829391964,0],[-71.08295359503732,42.31213127080214,0],[-71.08289673052725,42.31187787045796,0],[-71.08294696284834,42.31159813408256,0],[-71.08305430432956,42.3113131492266,0],[-71.0831330030493,42.3111231629777,0],[-71.08321167662896,42.3109595692496,0],[-71.08326187820941,42.31071150399535,0],[-71.08324065013743,42.31051618697443,0],[-71.08313379750258,42.31028915416205,0],[-71.0829627301884,42.31003569503662,0],[-71.082755980285,42.30977693800232,0],[-71.08265624378876,42.30957630012033,0],[-71.08263490160589,42.3095023886605,0]]},"properties":{"name":"Warren St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":8}},{"type":"Feature","id":"4f61d81e-fd19-43d4-8fef-20dd42fd4cb7","geometry":{"type":"LineString","coordinates":[[-71.13224124422538,42.2391917801234,0],[-71.13242733526319,42.23884657735937,0],[-71.13272216439377,42.23847830264929,0],[-71.13237966736838,42.23783432388216,0],[-71.13224910391106,42.23761847042091,0],[-71.13201608584244,42.23734708924744,0],[-71.13163502707621,42.23713322879181,0],[-71.13042873152892,42.23682062629781,0],[-71.12884846057347,42.23632859866262,0],[-71.12713439134309,42.2359796919315,0],[-71.12571648804229,42.23557838518224,0],[-71.12508376612216,42.23534416804315,0],[-71.12495901969326,42.23529551221561,0],[-71.1249558361635,42.23530258705465,0]]},"properties":{"name":"Neponset Valley Pkwy","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":8}},{"type":"Feature","id":"76de3883-9b1f-4fd6-b123-c53f229958c6","geometry":{"type":"LineString","coordinates":[[-71.08264812187211,42.30950138108692,0],[-71.08299744222116,42.30878836419813,0],[-71.08341662131743,42.30815801883607,0],[-71.08379387713454,42.3076206756265,0],[-71.08421304211072,42.306928329489,0],[-71.0843807013592,42.30648398857271,0],[-71.08456232248972,42.30570897537193,0],[-71.08462519708246,42.30522118206446,0],[-71.0849661308888,42.30398480469363,0],[-71.08665661593244,42.29895058805365,0],[-71.09141772315436,42.28433043144604,0],[-71.093370495759,42.27847653818105,0],[-71.09353504483876,42.27308809462043,0],[-71.09380299840633,42.2673321604273,0]]},"properties":{"name":"Blue Hills Ave - Spindrift","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":8}},{"type":"Feature","id":"fd5d88e0-dc76-4bd8-9038-17a3721d451e","geometry":{"type":"LineString","coordinates":[[-71.08342338235938,42.32861796281684,0],[-71.08347268950219,42.32880021467699,0],[-71.08308443660191,42.33070020649704,0],[-71.08249276027578,42.33125609069262,0],[-71.08183116779288,42.33186174765915,0],[-71.08156313727747,42.33215751729975,0],[-71.08133395132968,42.33242744129352,0],[-71.08096880210093,42.33303907641379,0]]},"properties":{"name":"Warren Nubian","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":8}},{"type":"Feature","id":"f27a6dcc-bf1d-410c-9df4-a32e96fc82e6","geometry":{"type":"LineString","coordinates":[[-71.12242682311329,42.25003491753503,0],[-71.12095103855908,42.25091002149441,0],[-71.11977650660198,42.25158459397274,0],[-71.11882947087287,42.25213154573393,0],[-71.11839923240706,42.25246898934736,0],[-71.11766777424026,42.2533072728197,0],[-71.11675801444927,42.25432323902069,0],[-71.1160326226058,42.25511597712147,0]]},"properties":{"name":"Truman Pkwy","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":8}},{"type":"Feature","id":"d41a40ec-eb67-474f-8782-65d45d5cafeb","geometry":{"type":"LineString","coordinates":[[-71.06380023205485,42.36127196930901,0],[-71.06709992603864,42.36119910309241,0],[-71.06997845921317,42.36113144563567,0]]},"properties":{"name":"Cambridge Street","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":8}},{"type":"Feature","id":"7e3c170d-c1e7-4ee4-a64b-df7e8245dcad","geometry":{"type":"LineString","coordinates":[[-71.1144540327413,42.30176984242745,0],[-71.11267592681051,42.30148698951376,0],[-71.11199808599943,42.30146242994832,0],[-71.11194190141683,42.30166026643413,0],[-71.11085154258193,42.30168290868539,0],[-71.11040550754335,42.30168293379971,0],[-71.11018730707704,42.30170514887063,0],[-71.1097198276629,42.30169089798223,0],[-71.10949251843817,42.30165443027411,0],[-71.10912743417148,42.30163688987492,0],[-71.108784509461,42.30161003621126,0],[-71.10835727285233,42.30152399211752,0],[-71.10799150553001,42.30141876759108,0],[-71.1076140198998,42.30126158953431,0],[-71.10718245172056,42.30103806283564,0],[-71.10688000679973,42.30087396457578,0],[-71.1066765762116,42.30076219996539,0],[-71.10649203668216,42.30068052617283,0]]},"properties":{"name":"Morton St - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":9}},{"type":"Feature","id":"d54863f3-c350-4874-8a1c-36aa9ec092ca","geometry":{"type":"LineString","coordinates":[[-71.06928551399002,42.35600623986605,0],[-71.06750187080532,42.35644960529829,0],[-71.06506710442166,42.35693583093777,0],[-71.0641162390011,42.3571984828459,0],[-71.06326720408164,42.35750211049209,0],[-71.0630197692254,42.35728911272185,0],[-71.06263666755792,42.3569311975296,0],[-71.06230904315012,42.35664376274693,0],[-71.06220713995856,42.35653220945906,0]]},"properties":{"name":"Boston Common - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":9}},{"type":"Feature","id":"2e9d4c03-4df1-479b-9bc3-d465b49362fd","geometry":{"type":"LineString","coordinates":[[-71.12108576918014,42.3139141335934,0],[-71.12095353137659,42.31388128598179,0],[-71.12052289492455,42.3138859641229,0],[-71.12015095246872,42.31394232701,0],[-71.1199232796679,42.3139237925251,0],[-71.11958992812389,42.3139830179384,0],[-71.11929661151562,42.31413609855986,0],[-71.11899498629595,42.31439178333905,0],[-71.11861502473958,42.31467400531735,0],[-71.11830075083341,42.31493378708682,0],[-71.11800522544732,42.31514949582459,0],[-71.11771743996638,42.31531192114068,0],[-71.1174184900189,42.31545375358093,0],[-71.11715575919989,42.31566108823413,0],[-71.1169918151285,42.31595707511974,0],[-71.11692001511999,42.31624895183176,0],[-71.1168878133357,42.31708783529638,0],[-71.11690085034569,42.3172676808593,0],[-71.1168588602365,42.31769113187645,0],[-71.11672559056439,42.31804327254019,0],[-71.11662939702033,42.31830539256186,0],[-71.11660454856633,42.31847835195956,0],[-71.11665743108243,42.31868947674194,0],[-71.11679815315766,42.31885676970342,0],[-71.11701575857275,42.31908100333575,0],[-71.11717402283426,42.31929718236763,0],[-71.11730176636554,42.31964183227442,0],[-71.11728062298582,42.31991921467493,0],[-71.11716045388863,42.32016105018099,0],[-71.11703009835844,42.32034623891799,0],[-71.11687831198807,42.3205513924981,0],[-71.11674466296894,42.32077837962839,0],[-71.11673364182658,42.32093604564668,0],[-71.11678117378244,42.32120040007558,0],[-71.11695060258855,42.32171142354439,0],[-71.11700244688983,42.32201549682141,0],[-71.11704252352257,42.32222693034545,0],[-71.11702698241676,42.32245676930955,0],[-71.11694939430024,42.32261506405664,0],[-71.11686009086733,42.32274237280726,0],[-71.11670177431715,42.32287513300742,0],[-71.11652956339908,42.32298357375207,0],[-71.11631460768221,42.32305321719468,0],[-71.11598114306443,42.32316932540449,0],[-71.11576693543157,42.32325601800837,0],[-71.11559297309442,42.32332467591239,0],[-71.1153806781954,42.32345494015203,0],[-71.11514635988544,42.32368108813093,0],[-71.11505911404008,42.32379696779911,0],[-71.11502188247384,42.32394198803502,0],[-71.11499910863009,42.32406580051984,0],[-71.11495510586535,42.32423184341083,0],[-71.11492893721966,42.32433677341371,0],[-71.11479383994447,42.32447276566002,0],[-71.1147258423279,42.32455973646638,0],[-71.11450422723529,42.32476986962146,0],[-71.11432225752404,42.3248899201904,0],[-71.114126143714,42.3249799680329,0],[-71.11393169277552,42.32510790427678,0],[-71.11383420069711,42.3251840578367,0],[-71.11366197868166,42.32529249418344,0],[-71.11353373141216,42.32540935648868,0],[-71.11346656305668,42.3255152704508,0],[-71.11343782915374,42.32562026182745,0],[-71.11341084235922,42.32576503573231,0],[-71.11338137632323,42.32591176587601,0],[-71.11334057920318,42.32603411513636,0],[-71.11329861708822,42.32612994289158,0],[-71.113193102064,42.3263961643401,0],[-71.11295965101122,42.32682501791825,0],[-71.11279090283853,42.32718058081674,0],[-71.11243175202131,42.32761962397306,0],[-71.11224424282153,42.32798998509785,0],[-71.1121371094454,42.32842298340071,0],[-71.11209033766495,42.32890475340839,0],[-71.11219394113334,42.32927531099116,0],[-71.11239102046943,42.32956471552176,0],[-71.11263783052246,42.32988162546996,0],[-71.11287163864522,42.33019167280045,0],[-71.1130367064197,42.33041386542988,0],[-71.11316230169923,42.33048739559415,0],[-71.11338620104024,42.33065598676967,0],[-71.11354110701983,42.3308610272809,0],[-71.11360381697071,42.33111003324494,0],[-71.11366588493387,42.33123727868666,0],[-71.11371186350893,42.33131967927664,0],[-71.11378769906031,42.33133177649928,0],[-71.11369022069422,42.33146981059375,0],[-71.11362397330255,42.33156882249203,0],[-71.11345352779331,42.33165293843409,0],[-71.11338544749182,42.33171024214451,0],[-71.11341628461827,42.33187651193661,0],[-71.1134579646373,42.33207555704804,0],[-71.11345967513614,42.33222164671039,0],[-71.11343164954536,42.33233365711539,0],[-71.11339043526274,42.33246686005361,0],[-71.11330947059538,42.33255230672572,0],[-71.11316027174742,42.33269158068128,0],[-71.11304199911967,42.33278488134641,0],[-71.11291221620489,42.33293760666294,0],[-71.11273128355474,42.33318381899335,0],[-71.11262144175248,42.33335695681659,0],[-71.1125293643191,42.33360877741066,0],[-71.11247003187451,42.33373990762657,0],[-71.11241889638372,42.33383213831809,0],[-71.11214520206602,42.33410857837575,0],[-71.11170133152783,42.33453677602002,0],[-71.1115294266346,42.33471453924985,0],[-71.11150082068306,42.33489481514429,0],[-71.11122597766037,42.33517409921282,0],[-71.11136280512248,42.33529620259312,0],[-71.11140916659686,42.3354347986327,0],[-71.1115450426294,42.33577581887887,0],[-71.11165429205064,42.33601008569136,0],[-71.11175654324356,42.33619226604565,0],[-71.11187820878267,42.33627992239661,0],[-71.11195567167597,42.33632683533026,0],[-71.11186340753433,42.33658683894824,0],[-71.11166986313832,42.33690152770131,0],[-71.11160930118035,42.33702490918051,0],[-71.11172895348949,42.33708026820455,0],[-71.11176444660592,42.33722233681068,0],[-71.11176802648484,42.33727490578212,0],[-71.11177506409203,42.33737727307704,0],[-71.11173533245186,42.33748635595482,0],[-71.11166438494058,42.33766670697494,0],[-71.11158937004943,42.33781236606946,0],[-71.11149728085591,42.33803271592404,0],[-71.11137341201838,42.33828552844609,0],[-71.11126206993356,42.33855993413825,0],[-71.11121061920082,42.33869186476519,0],[-71.11110295905837,42.33919676466951,0],[-71.11106210019952,42.33939614009752,0],[-71.11100146650391,42.33974214034649,0],[-71.11092929748487,42.3399235317204,0],[-71.11088337754668,42.34009442195671,0],[-71.11074976834534,42.34033651491359,0],[-71.11067269518368,42.34052789506974,0],[-71.11049493669017,42.34079868715619,0],[-71.11026940791031,42.34107654841316,0],[-71.11006143429454,42.34131147632714,0],[-71.10963853300905,42.3417028474797,0],[-71.10930799900042,42.34193461288547,0],[-71.10898369890693,42.34209277895745,0],[-71.1085622991923,42.34241066275304,0],[-71.10812275257302,42.34274647004442,0],[-71.1076183476911,42.34298222241866,0],[-71.10713683835876,42.34322459134733,0],[-71.1067577922927,42.34342953003306,0],[-71.10636427606144,42.34373624494409,0],[-71.10589131207293,42.34406584795568,0],[-71.10533438179996,42.34436529231562,0],[-71.10499892188484,42.34448524014564,0],[-71.10480770892102,42.34454927310349,0],[-71.10459102356354,42.34457194430802,0],[-71.10437403231454,42.34458762742776,0],[-71.10433101149502,42.34455955475509,0],[-71.10433274284323,42.34448687445388,0],[-71.10434262365828,42.34437586394512,0],[-71.10425212081438,42.34432899756428,0],[-71.10411150568586,42.34431601715146,0],[-71.1040419885316,42.34429952018485,0],[-71.1040021546351,42.34423146623003,0],[-71.10403095781449,42.34413387458576,0],[-71.10405737647531,42.34404343009579,0],[-71.10411561480704,42.34398590426062,0],[-71.10420824744999,42.34388810018573,0],[-71.10423965232359,42.34382289269418,0],[-71.10425177525973,42.3436729720552,0],[-71.10416795204328,42.34353685647113,0],[-71.10396248785727,42.34339674424383,0],[-71.10364079159166,42.34316272686063,0],[-71.10334509449893,42.34295340841326,0],[-71.10326871577493,42.34290790819695,0],[-71.10315207914434,42.34299177320399,0],[-71.10305055335773,42.34309750755507,0],[-71.10288210025459,42.34325061115845,0],[-71.10284253663248,42.34327640312287,0],[-71.10283076309864,42.34329037094941,0],[-71.1026130131398,42.34312557741568,0],[-71.1026766864561,42.34304428669349,0],[-71.10281093527135,42.34291815540758,0],[-71.10295042848333,42.34279059106399,0],[-71.10299432187301,42.3427424652541,0],[-71.10302087968263,42.34266206198242,0],[-71.10286584690205,42.34251538579434,0],[-71.10236398614678,42.34199313326926,0],[-71.10192783580189,42.34155593957672,0],[-71.10146115186576,42.34112135151831,0],[-71.10105365070635,42.34075852364604,0],[-71.1008069672046,42.34067328644019,0],[-71.10055654491087,42.34058545762297,0],[-71.10051283492881,42.34049805101913,0],[-71.1005087374096,42.34040433737459,0],[-71.10051454148129,42.34036517362052,0],[-71.10049942296216,42.34031030059081,0],[-71.10036652007767,42.34028879622034,0],[-71.09994526510397,42.34018133808924,0],[-71.09993796030876,42.34002715635918,0],[-71.09986565460036,42.33982792410998,0],[-71.0997365374316,42.33971113765715,0],[-71.09960127323424,42.33959919880763,0],[-71.09923181420297,42.33936710615708,0],[-71.09879857009757,42.33913065782261,0],[-71.09825340873715,42.3389018730419,0],[-71.09789241843919,42.33882705017241,0],[-71.09755069461606,42.33882932949664,0],[-71.09731364071419,42.33889844702012,0],[-71.09707861360228,42.33903279367943,0],[-71.09691723213092,42.33916003983541,0],[-71.09686251723681,42.33925418563132,0],[-71.0967706586167,42.33937154610025,0],[-71.09658642790025,42.33959452697011,0],[-71.09627733940194,42.33987101969599,0],[-71.09609658715804,42.34002810725098,0],[-71.09581916764022,42.34019287201951,0],[-71.09539623066854,42.34033810464382,0],[-71.09519872307023,42.34040274864195,0],[-71.09493071602739,42.34052783274421,0],[-71.09466639622156,42.34062814957932,0],[-71.09417274817896,42.34079090676073,0],[-71.09378817889451,42.34090466385941,0],[-71.09289364700388,42.3411494468987,0],[-71.09246306208281,42.34130190217024,0],[-71.09226450707132,42.34145589099374,0],[-71.09214489249051,42.34156278054181,0],[-71.09187873684168,42.3419502835061,0],[-71.09167267827614,42.34233778735793,0],[-71.09162930422191,42.34263257585003,0],[-71.09156464390843,42.3430752432407,0],[-71.0914769239063,42.3432565461613,0],[-71.09146205910064,42.34338563157304,0],[-71.09120463377805,42.34366941693785,0],[-71.09098231474849,42.34389683574663,0],[-71.09086057049214,42.3442379730309,0],[-71.09088904563247,42.34457806051712,0],[-71.09090070728385,42.34482973637411,0],[-71.09079426568782,42.34513011891602,0],[-71.09075165516742,42.34540626477047,0],[-71.09077573310921,42.34572373426693,0],[-71.09087145632417,42.34603949960145,0],[-71.09098149232665,42.34629182162344,0]]},"properties":{"name":"Main Corridor - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":9}},{"type":"Feature","id":"14efa0a4-0372-4045-a166-07a50d5ba4ac","geometry":{"type":"LineString","coordinates":[[-71.11443428277045,42.30176948736638,0],[-71.11513911907122,42.30208535574666,0],[-71.1157193648618,42.30230118983706,0],[-71.11596442175927,42.30236476178376,0],[-71.11647701863109,42.3024542277405,0],[-71.11674638747324,42.3024276082193,0],[-71.1170634925931,42.30209841808672,0],[-71.11724250056224,42.30190544496541,0],[-71.11750334381051,42.3016519281625,0],[-71.11786652645117,42.30157243890602,0],[-71.11842410209674,42.30152319498444,0],[-71.11887425337294,42.30147017655671,0],[-71.11913513947847,42.30145122930256,0],[-71.11927079718818,42.30168033698457,0],[-71.1194754423507,42.30180516786818,0],[-71.11972611625804,42.30187702419444,0],[-71.1200023708665,42.30196022699483,0],[-71.12026840305586,42.30207748155737,0],[-71.12043213109182,42.30221744918563,0],[-71.12051913457654,42.30239147745682,0],[-71.1205805739162,42.30262226074934,0],[-71.12061643269486,42.30283791337623,0],[-71.12064716754108,42.30301573213502,0],[-71.12078022511683,42.30323515631434,0],[-71.12103607612087,42.3035188845002,0],[-71.12136357850174,42.30390854267601,0],[-71.12152666077885,42.30415648903516,0],[-71.12163927180454,42.3044213160706,0],[-71.12174679150041,42.30477694743115,0],[-71.12177755166906,42.30503421970828,0],[-71.12172650234513,42.30545797760971,0],[-71.12161917193157,42.30585526099702,0],[-71.1213957362958,42.30624240574649,0],[-71.12103771038987,42.30660188164185,0],[-71.1206540883855,42.3069008238657,0],[-71.12009654894196,42.30731707386484,0],[-71.1198356931443,42.30757438187801,0],[-71.11967711248718,42.30763872005416,0]]},"properties":{"name":"Arborway Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":9}},{"type":"Feature","id":"e0358856-5c65-497f-accd-b8aa2cc40978","geometry":{"type":"LineString","coordinates":[[-71.06219915435766,42.35652931041079,0],[-71.06325119170108,42.35548552217139,0],[-71.06355023241055,42.35516645942703,0],[-71.06371771405885,42.35485471156768,0],[-71.06399768167257,42.35438377920696,0],[-71.06426628429054,42.35373049471227,0],[-71.06451186793983,42.35317473447817,0],[-71.06473911195314,42.35250966722156,0],[-71.0647561684477,42.3524563482439,0]]},"properties":{"name":"Tremont St - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":9}},{"type":"Feature","id":"c27adfc6-b7ad-4b46-a274-4436908cf505","geometry":{"type":"LineString","coordinates":[[-71.06476167572762,42.35246498146113,0],[-71.06750430939454,42.35257921501506,0]]},"properties":{"name":"Boylston St - Protected Pike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":9}},{"type":"Feature","id":"2062acbe-4af9-45ac-bf37-35ddef64cf63","geometry":{"type":"LineString","coordinates":[[-71.0715796485989,42.35366662861408,0],[-71.07083565926591,42.35212994899058,0],[-71.0707011542129,42.35192769405212,0],[-71.07031053886179,42.35202870250384,0],[-71.0687156566781,42.35235412854404,0],[-71.06749444481072,42.35258354520465,0],[-71.06769380559493,42.35305138833575,0],[-71.06796720944585,42.35355243986423,0],[-71.06881754190253,42.35507917679008,0],[-71.06939771174086,42.35618356801259,0],[-71.0701587533047,42.35603296649689,0],[-71.07228886583192,42.35551510533578,0],[-71.07244173074862,42.35547088986097,0],[-71.07233197490963,42.35517393601984,0],[-71.07190237266633,42.35428711694822,0],[-71.0715796485989,42.35366662861408,0]]},"properties":{"name":"Around the Public Garden - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":9}},{"type":"Feature","id":"7dbe1ebc-266a-4b4a-ba3e-cf3a207c3bf6","geometry":{"type":"LineString","coordinates":[[-71.11968200282783,42.30764074858495,0],[-71.11985327400913,42.3079739076168,0],[-71.11998257905832,42.30816255589763,0],[-71.12023464196406,42.30849852551496,0],[-71.12062415081476,42.30880059702857,0],[-71.12101745521942,42.30898125633239,0],[-71.12162000882758,42.30930347185811,0],[-71.12185683967155,42.30974109040044,0],[-71.1219981707698,42.30997825143758,0],[-71.12233314025521,42.31089186709626,0],[-71.12247459263519,42.31157514633186,0],[-71.12253581924585,42.31210677209423,0],[-71.12252445806726,42.31245971603202,0]]},"properties":{"name":"Arborway - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":9}},{"type":"Feature","id":"0e8492e0-ddac-4882-bb1d-e6609658d188","geometry":{"type":"LineString","coordinates":[[-71.08762667114154,42.34733421175722,0],[-71.08836642469576,42.34896681549569,0]]},"properties":{"name":"Mass Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":9}},{"type":"Feature","id":"fa3eb9c5-908b-423a-8e57-02bc2284ea44","geometry":{"type":"LineString","coordinates":[[-71.08835928594985,42.34895550879106,0],[-71.08453807498294,42.34998636989155,0],[-71.07149452813914,42.35349840037865,0]]},"properties":{"name":"Comm Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":9}},{"type":"Feature","id":"7ab0ec94-5706-4d65-9f62-ff9f9abc88c8","geometry":{"type":"LineString","coordinates":[[-71.10649186374266,42.30068030200051,0],[-71.10631472369867,42.30082511724883,0],[-71.10603316036536,42.30097131295266,0],[-71.1057404059667,42.30106372094627,0],[-71.10541408476753,42.30113130388164,0],[-71.10520820308399,42.301160267876,0],[-71.1049359575566,42.3011892320479,0],[-71.10467862954344,42.30120440397759,0],[-71.10438027798465,42.30120164640808,0],[-71.10413040831715,42.30118371741573,0],[-71.10389732072966,42.30114785884636,0],[-71.10368029280336,42.30109051991995,0],[-71.10343228936594,42.30102018116678,0],[-71.10317992649884,42.30094592738367,0],[-71.10295243549163,42.30089213774416,0],[-71.10263170994877,42.30084386312394,0],[-71.10244524082952,42.30083558551082,0],[-71.10234081743829,42.30084523806187,0],[-71.10223079923745,42.30087006129286,0],[-71.10213196854859,42.30090453881888,0],[-71.10205924336664,42.30094591263966,0],[-71.10199770586865,42.30099280333134,0],[-71.10193853634493,42.30106390590421,0],[-71.10189378081729,42.30114113798933,0],[-71.10185834769587,42.30124319516406,0],[-71.1017557749163,42.30159625873127,0],[-71.10172034227415,42.30167073297788,0],[-71.10166812528595,42.30178520289911,0],[-71.10162725414129,42.30186553838998,0],[-71.10155872761602,42.30196520638441,0],[-71.10144223341078,42.30211048456174,0],[-71.1013325923065,42.30223042301354,0],[-71.10120010970516,42.30235880729754,0],[-71.10108625142851,42.30245406714815,0],[-71.10092144006043,42.30258516760359,0],[-71.1007382475358,42.30271618876532,0],[-71.1004568840723,42.30288803421502,0],[-71.10021331681173,42.30303196173801,0],[-71.09994455035479,42.30317688937132,0],[-71.09962568288496,42.30334032981648,0],[-71.09933451663156,42.30348939649821,0],[-71.09899948969948,42.30365521046672,0],[-71.09875451686074,42.30377011368488,0],[-71.09856833833658,42.30383843247103,0],[-71.09835556439033,42.30389018553933,0],[-71.09732019821645,42.30411728651707,0],[-71.0971831583046,42.30415201112341,0],[-71.09705017301317,42.30419134294542,0],[-71.0969115877468,42.30423585061808,0],[-71.09637822776278,42.30441540522483,0],[-71.09611807221191,42.30450652305523,0],[-71.09594268042241,42.30456651143623,0],[-71.09575880947146,42.30464316702501,0],[-71.09559644971412,42.30475020217919,0],[-71.09545365136955,42.3048413261932,0],[-71.09525021159126,42.30497294980096,0],[-71.0951054566934,42.30505973370408,0],[-71.09494310033939,42.30512626392883,0],[-71.09473966848566,42.3051870043868,0],[-71.09455384280422,42.30522749393057,0],[-71.09438757993185,42.30524628594769,0],[-71.09416293479879,42.3052634939481,0],[-71.09387678716425,42.30525013058812,0]]},"properties":{"name":"Circuit Drive - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":9}},{"type":"Feature","id":"83c50514-a416-4b9c-8254-357eb2da7674","geometry":{"type":"LineString","coordinates":[[-71.12251438706332,42.31245355024982,0],[-71.12234507919703,42.31281894572182,0],[-71.12179938596444,42.31346277189083,0],[-71.12107481714283,42.31392219674971,0]]},"properties":{"name":"Arborway Dead Zone","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":9}},{"type":"Feature","id":"6221943c-33b0-416e-a2af-cb4ec81ef9ef","geometry":{"type":"LineString","coordinates":[[-71.09097430354704,42.34628353280804,0],[-71.09049980658591,42.34653795079576,0],[-71.08775061228981,42.34730081358701,0],[-71.0876275017101,42.34733069055012,0]]},"properties":{"name":"Boylston Street to Mass Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":9}},{"type":"Feature","id":"8f08b9df-8253-4b31-ab43-3da9ccb628ac","geometry":{"type":"LineString","coordinates":[[-71.05283483126752,42.35139022710477,0],[-71.05172889904678,42.35090298613859,0],[-71.04996361050675,42.35007428294571,0],[-71.04728343364279,42.34885607072602,0],[-71.04519079204292,42.34787003648051,0],[-71.04398358575497,42.34725175343022,0],[-71.04322483616582,42.34681684169755,0],[-71.0424246215046,42.34642665165261,0],[-71.04117879475078,42.34567376515685,0],[-71.04045750545986,42.34519375873813,0],[-71.04009619775734,42.3449669395006,0],[-71.0390527601713,42.34429738898444,0],[-71.03828645753384,42.34379840775143,0],[-71.03799086062074,42.34361157831103,0]]},"properties":{"name":"Summer St - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":10}},{"type":"Feature","id":"3a9a9f89-3956-47f9-959a-86a3f4f3b3c4","geometry":{"type":"LineString","coordinates":[[-71.05840689629225,42.30759513180762,0],[-71.05817191931979,42.30864966027012,0],[-71.05794173123324,42.30982827219758,0],[-71.0577613952408,42.31043847752159,0],[-71.05721447525012,42.31297224403114,0],[-71.05667750940907,42.31543638409116,0],[-71.0566793702484,42.31631130043865,0],[-71.05674292862471,42.31933367914551,0],[-71.05682356224541,42.32319417697631,0],[-71.05686328726425,42.32592613798944,0],[-71.0569659016983,42.32889779702035,0],[-71.05697138143233,42.33179953776573,0],[-71.05707714926534,42.33562162010195,0],[-71.05705097402866,42.33730957736187,0],[-71.05708915274995,42.33809550605113,0],[-71.0571067845495,42.33868236855879,0],[-71.05712801190829,42.33907664216215,0],[-71.05713573050491,42.33940579045074,0],[-71.05709709952362,42.34142602698257,0],[-71.05715318672983,42.34286899284194,0],[-71.05720559069574,42.34415418090013,0],[-71.05727341767816,42.34496383105886,0],[-71.05714279425524,42.34547637177305,0]]},"properties":{"name":"Dot Ave North - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":10}},{"type":"Feature","id":"138db061-73ed-4c32-8a48-7b5ea8b60c33","geometry":{"type":"LineString","coordinates":[[-71.03798871572708,42.34360894514271,0],[-71.03696908893204,42.34295786613191,0],[-71.03659680721906,42.34271345218873,0],[-71.03627845696354,42.34249567448171,0],[-71.03605065692992,42.34227180792213,0],[-71.03584786814241,42.34202740598374,0],[-71.03572009767248,42.34178917003328,0],[-71.03559943290372,42.34149205724104,0],[-71.03556611873208,42.34132160119715,0],[-71.03556058829705,42.34115525513671,0],[-71.03556343588144,42.3407239891411,0],[-71.03548925309741,42.33815628485688,0]]},"properties":{"name":"Summer St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":10}},{"type":"Feature","id":"df4b5098-53eb-44ec-8e66-089e079d9eed","geometry":{"type":"LineString","coordinates":[[-71.05842031057952,42.30758832512949,0],[-71.06009173898101,42.30055120767135,0],[-71.06042112892916,42.29943245546067,0],[-71.06417797940452,42.28625602905289,0],[-71.06526852563718,42.28225137074766,0],[-71.06801744606175,42.27239419050537,0],[-71.06800025843543,42.2722217771296,0],[-71.06796588927448,42.27192413733871,0],[-71.06815499961463,42.27143605046898,0],[-71.06822395478261,42.27127336310664,0],[-71.06818081968238,42.27103093587559,0],[-71.06807732859141,42.27073747440465,0],[-71.06791779404817,42.27039616772825,0]]},"properties":{"name":"Dot Ave Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":10}},{"type":"Feature","id":"2e89a2b1-cdee-4c60-b4f8-b06b41bfa59d","geometry":{"type":"LineString","coordinates":[[-71.0571358577411,42.34546283649108,0],[-71.05694769827406,42.34568661971708,0],[-71.05662861815267,42.34591646247526,0],[-71.05616231866698,42.34655150836191,0],[-71.05512335389464,42.34803326896832,0],[-71.05421523852245,42.34935174479796,0],[-71.05284053020637,42.35139332163059,0]]},"properties":{"name":"Dot Ave Loading Bays","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":10}},{"type":"Feature","id":"bb1dcf67-c7a1-4e9f-913c-424721d1bf23","geometry":{"type":"LineString","coordinates":[[-71.03549102296651,42.33817043733257,0],[-71.03112723473826,42.33821611321966,0],[-71.03098987974599,42.33826224253207,0]]},"properties":{"name":"E 1st St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":10}},{"type":"Feature","id":"3c47551a-75a8-4b91-b3bc-5c2aac8aa79e","geometry":{"type":"LineString","coordinates":[[-71.05644616494499,42.2973351855869,0],[-71.05549389850978,42.29665361091438,0],[-71.05394834156576,42.29554048182795,0],[-71.05232173698333,42.29438620336874,0],[-71.0516032441169,42.29387366899547,0],[-71.05115199365409,42.29343856868227,0],[-71.05093358220071,42.29315620127606,0],[-71.04992531073265,42.29189820999284,0],[-71.04942130804473,42.2912766408947,0],[-71.04849971843363,42.290158898945,0],[-71.04820933502513,42.28978773179211,0],[-71.04695073418449,42.28823666015825,0],[-71.04642428529121,42.28757168242861,0],[-71.0461914924894,42.28737631861809,0],[-71.04588668896437,42.28718627221892,0],[-71.04522665379741,42.28690738737814,0],[-71.04406709464034,42.28644178763641,0],[-71.04344547508211,42.2861771033749,0]]},"properties":{"name":"Neponset Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":11}},{"type":"Feature","id":"17ae6bc0-a0a6-44e6-a64f-1e80ed9373df","geometry":{"type":"LineString","coordinates":[[-71.09202178583554,42.32162456445224,0],[-71.0917896286901,42.32146648862322,0],[-71.0911511013457,42.3211880527793,0],[-71.08843252909844,42.31998374495458,0],[-71.0873393792596,42.31951479442557,0],[-71.08618362390932,42.31914138197691,0],[-71.08490109362438,42.31876965189299,0],[-71.0819082351087,42.31793959646792,0]]},"properties":{"name":"MLK Jr Blvd - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":11}},{"type":"Feature","id":"fe5b3a33-deb9-4149-8beb-af26cc732da9","geometry":{"type":"LineString","coordinates":[[-71.11657561001049,42.32100392250247,0],[-71.11774450843694,42.32113540404526,0],[-71.11868550626278,42.32132706164381,0],[-71.11970218231326,42.32145472250707,0],[-71.1206484969392,42.32144645823934,0],[-71.1210864035244,42.32125441604749,0],[-71.12144311912357,42.3209264559756,0],[-71.12184312758758,42.320658456585,0],[-71.12207254030946,42.3204002454916,0],[-71.12238790782763,42.320140192662,0],[-71.12286550055764,42.31982010119343,0],[-71.12355044298633,42.3195332735102,0],[-71.12389285461408,42.31929320973403,0],[-71.12464659102677,42.31901607119576,0],[-71.12518325345275,42.31882768852878,0],[-71.12542192889664,42.31873433322301,0],[-71.12574508853929,42.31866669199362,0],[-71.12624954225312,42.31865317607495,0]]},"properties":{"name":"Perkins St- Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":11}},{"type":"Feature","id":"19a3ba26-63d9-4ece-b8d1-d21be509d59b","geometry":{"type":"LineString","coordinates":[[-71.13668190211752,42.31496361947948,0],[-71.13699509062879,42.31486263013348,0],[-71.13724218323806,42.31472227301654,0],[-71.13740190498402,42.3145866811135,0],[-71.13751689294159,42.31447474607634,0],[-71.13768505614316,42.31423671967643,0],[-71.13782980277423,42.31403021915308,0],[-71.1380717771391,42.31364095544917,0],[-71.13857851307762,42.31301055912139,0],[-71.13884869759029,42.31259032747882,0],[-71.13890258039889,42.31232023303536,0],[-71.13901716586298,42.31185005998968,0],[-71.13914611431942,42.31152282042063,0],[-71.1394922761239,42.31097745921135,0],[-71.13982338250669,42.31072982051099,0],[-71.14025983916547,42.31055174119272,0],[-71.14108007919053,42.31043486806406,0],[-71.14198489004809,42.31030325796193,0]]},"properties":{"name":"Goddard Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":11}},{"type":"Feature","id":"fb3c4492-2f4a-4713-bd8b-83b521180192","geometry":{"type":"LineString","coordinates":[[-71.05984422694408,42.301590766479,0],[-71.05950143899507,42.30103672745626,0],[-71.05928279171783,42.30068301837879,0],[-71.05892203759497,42.30013868151894,0],[-71.05858645147805,42.29969951166103,0],[-71.05821357690415,42.2993833909517,0],[-71.05772597546816,42.29898876684537,0],[-71.05731008492069,42.29859413923723,0],[-71.05706393616877,42.29826100079698,0],[-71.05681441840856,42.29788335386144,0],[-71.05644731738839,42.29733809974441,0]]},"properties":{"name":"Adams St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":11}},{"type":"Feature","id":"65e4acd4-eea5-4ddb-bee8-eb99f33990d9","geometry":{"type":"LineString","coordinates":[[-71.06391992687422,42.30827626876519,0],[-71.06356242085809,42.30796622344936,0],[-71.06331125851368,42.30778404718282,0],[-71.06290297761134,42.30761726502666,0],[-71.06258071943675,42.30735683007421,0],[-71.06223354438207,42.30684011504834,0],[-71.06209119361301,42.30661245149146,0],[-71.06182923601772,42.30608995119518,0],[-71.06155288755954,42.30544822333981,0],[-71.06129716360365,42.30485247663763,0],[-71.0610887622884,42.30436907230321,0],[-71.06051848504526,42.30296575667192,0],[-71.0602892557639,42.30240863261626,0],[-71.0600928578227,42.30206161223725,0],[-71.05985065636499,42.30157147382087,0]]},"properties":{"name":"Adams Street North - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":11}},{"type":"Feature","id":"e7878d24-12b8-445c-93e7-a0f5c6c63a42","geometry":{"type":"LineString","coordinates":[[-71.13332468717432,42.31489690185324,0],[-71.13388726247211,42.31483179803036,0],[-71.13425518568002,42.31479805340119,0],[-71.13483022302755,42.31479999467164,0],[-71.13528568112118,42.31484355740508,0],[-71.13601609266823,42.31497951834481,0],[-71.13636753885575,42.31500058174871,0],[-71.1366866672249,42.31496464652218,0]]},"properties":{"name":"Goddard Ave - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":11}},{"type":"Feature","id":"84c6bc13-0181-45ac-a67c-3cd16405563a","geometry":{"type":"LineString","coordinates":[[-71.08189820247998,42.31793716439826,0],[-71.08207809490227,42.31757143754795,0],[-71.08220363994752,42.31736353487675,0],[-71.0824513396855,42.31694772704564,0],[-71.08259722819058,42.31672229319872,0],[-71.08276696483948,42.31633901826974,0]]},"properties":{"name":"Warren St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":11}},{"type":"Feature","id":"f8236839-5e8a-432f-b226-5fb282b821a5","geometry":{"type":"LineString","coordinates":[[-71.04345098443993,42.28617511493123,0],[-71.04324226230665,42.28619340166644,0],[-71.04318566554713,42.28617769035296,0],[-71.04241452713075,42.28601269181657,0],[-71.04224475361877,42.28591844996302,0],[-71.04206784673447,42.28601786876379,0],[-71.04150195299829,42.28565661951451,0],[-71.04072018886366,42.28519177400246,0],[-71.04065462978751,42.28527141086897,0],[-71.04016324945063,42.28491636655444,0]]},"properties":{"name":"Neponset to Neponset","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":11}},{"type":"Feature","id":"cbaf3485-7f42-4438-a2a5-f1d1a8a594f6","geometry":{"type":"LineString","coordinates":[[-71.09201955011072,42.3216252396817,0],[-71.09313082154256,42.32081687662546,0],[-71.09528667581883,42.32201647113069,0],[-71.09534771347549,42.32203809177771,0],[-71.09638724168994,42.32190005596559,0],[-71.09686705686494,42.32202811855348,0],[-71.0977552401157,42.32234411778695,0],[-71.09837129417205,42.32254944114769,0],[-71.09855456181224,42.32261347415256,0],[-71.0997546565278,42.32274867851045,0],[-71.10040817788793,42.32280452847494,0],[-71.10230800294812,42.32291710440765,0],[-71.10279286502927,42.3229307513314,0],[-71.10315584595416,42.32293070094426,0],[-71.10370427489326,42.32286597786093,0],[-71.10425800448866,42.32280125123439,0],[-71.10646925172804,42.32257672524544,0],[-71.10761821220963,42.32246770260795,0],[-71.10821644059641,42.32242195858814,0],[-71.10893923162753,42.32227494558658,0],[-71.10949942073866,42.32210984756789,0],[-71.109793729873,42.32194830999821,0],[-71.11088535066244,42.32177857418079,0],[-71.11227480908944,42.3215608390724,0],[-71.1148047227996,42.32119315042204,0],[-71.11586003824554,42.32105039200206,0],[-71.11631081874619,42.32100585717713,0],[-71.11658574670373,42.32100129894234,0]]},"properties":{"name":"Centre, Perkins, Marcella","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":11}},{"type":"Feature","id":"ae1d86e4-473b-4682-8f98-f26eb60513f5","geometry":{"type":"LineString","coordinates":[[-71.08155713921865,42.31596508862291,0],[-71.08277751212195,42.31633587838927,0],[-71.08106295711872,42.31580974430326,0],[-71.07991482949815,42.31518599123532,0],[-71.07871288527042,42.31454451331465,0],[-71.07742636016904,42.31392380606472,0],[-71.07667684917683,42.31359701050681,0],[-71.07466919086508,42.31287400522283,0],[-71.07317942564111,42.31223902107889,0],[-71.0719413316329,42.31201602133533,0],[-71.06876487193519,42.31076118687784,0],[-71.06846168101673,42.31067779305905,0],[-71.06845734481475,42.31067779059007,0],[-71.0684519245672,42.31067778750369,0],[-71.06786041553073,42.31031349508992,0],[-71.06701335434748,42.3098033394317,0],[-71.06629757249762,42.30915477924341,0],[-71.06570892916174,42.30857554147655,0],[-71.06514036555349,42.30804394869073,0],[-71.06476487798894,42.30810011938296,0],[-71.06391589367502,42.30827669897554,0]]},"properties":{"name":"Quincy Street","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":11}},{"type":"Feature","id":"11a88048-fe0f-4c66-b94b-02d8c7a95d8a","geometry":{"type":"LineString","coordinates":[[-71.13332423050214,42.31489530294772,0],[-71.1330819898826,42.31492233955358,0],[-71.13293344627505,42.31495106608343,0],[-71.13280318498391,42.31497979254847,0],[-71.13266835285599,42.31502541731579,0],[-71.13256322879371,42.31509132047399,0],[-71.13249695357699,42.31518764135431,0],[-71.1324466752736,42.31527889282901,0],[-71.1322501306901,42.31566586708112,0],[-71.13219985255255,42.31572332154686,0],[-71.13211758071785,42.31575880737516,0],[-71.13201245624862,42.31577739414421,0],[-71.13190047631417,42.31577908218063,0],[-71.13175878725282,42.31578245945211,0],[-71.13161398066741,42.31577381963317,0],[-71.1314404107385,42.31577564947428,0],[-71.13122275497203,42.31579027666676,0],[-71.1310678232374,42.31583937086279,0],[-71.13095399367053,42.31591067701452,0],[-71.13081170280263,42.31605679865218,0],[-71.13054931428802,42.31636570745698,0],[-71.13044496398103,42.31652585733218,0],[-71.13040069054883,42.31664977032563,0],[-71.13037538954065,42.31674913513872,0],[-71.13024317571231,42.31743835641852,0],[-71.13023428392295,42.31754795425179,0],[-71.13024217500438,42.31778058474218,0],[-71.13024848964277,42.317938399758,0],[-71.13018365729735,42.31815349417686,0],[-71.13008250572312,42.31829413165418,0],[-71.12997183184669,42.31838530973728,0],[-71.12977894579694,42.31849051284856,0],[-71.12950068776541,42.31856999456905,0],[-71.12925468203366,42.31861459166289,0],[-71.12870923312732,42.31874432665135,0],[-71.12846576403247,42.31871509048683,0],[-71.12823020054225,42.31867533324408,0],[-71.12781979242438,42.31861532323848,0],[-71.12758738990881,42.31859777576958,0],[-71.12718739877862,42.31861061231704,0],[-71.12624675028978,42.31865146787508,0]]},"properties":{"name":"Goddard Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":11}},{"type":"Feature","id":"a08ca349-666d-43a1-ae3c-8333b6dea904","geometry":{"type":"LineString","coordinates":[[-71.09010557280133,42.33534257716068,0],[-71.08992937861946,42.33539605064974,0],[-71.08966736080392,42.33551633912165,0],[-71.08932399456056,42.33557986305078,0],[-71.08913873561966,42.33554983824418,0],[-71.08894442825624,42.33548307556801,0],[-71.08873211291979,42.3356066922776,0],[-71.08750192446605,42.33642856700279,0],[-71.08717661271172,42.33611777091909,0],[-71.08686358033532,42.33576160223301,0],[-71.08579615396442,42.33534023510483,0],[-71.08444382938688,42.33487705736464,0],[-71.08419598991395,42.33481183110412,0],[-71.08383366576255,42.33471197697448,0],[-71.08359686817977,42.33457830847524,0],[-71.08345957996173,42.3344603239396,0],[-71.08322823872786,42.33433050431575,0],[-71.08299797630045,42.33426048588477,0],[-71.0828970263359,42.3342036163374,0],[-71.0826947508948,42.33408553362955,0],[-71.0825797158605,42.33397601688617,0],[-71.08254131385246,42.3339050698551,0],[-71.0822579529595,42.33380117939886,0],[-71.08197061572358,42.33360931838121,0],[-71.08160018868243,42.33344890892401,0],[-71.08135826313158,42.33329617192067,0],[-71.08117420796594,42.33316639022943,0],[-71.08113966900439,42.33313425084649,0],[-71.08079528222011,42.3329336640772,0],[-71.08060365268152,42.33286183412383,0],[-71.08046441650296,42.33279179878726,0],[-71.08037194402624,42.33275928768634,0],[-71.08025812861777,42.33269089124664,0],[-71.08011604868486,42.33261273134833,0],[-71.07991407653019,42.33252297700063,0],[-71.07977027526614,42.33245956793827,0],[-71.07965702820485,42.33236095692973,0],[-71.07948184082706,42.33228714734257,0],[-71.07937265872717,42.33223108530987,0],[-71.0792559189068,42.33218456039897,0],[-71.07909510540047,42.33208778489757,0],[-71.07890149552298,42.33201482748571,0],[-71.07844899481469,42.33185710871651,0],[-71.07817093892764,42.33179937581748,0],[-71.0778050912128,42.33165868604045,0],[-71.07745387682607,42.33153602895778,0],[-71.0771319233235,42.3314602570529,0],[-71.07695631770527,42.33139532123612,0],[-71.07684900807439,42.33133399989224,0],[-71.076424617051,42.33122575563339,0],[-71.07578283494647,42.33119610943503,0],[-71.07542218306232,42.33123114140927,0],[-71.07525134605868,42.33125567434513,0],[-71.07494762255108,42.33135034921411,0],[-71.0747957472377,42.33144855293154,0],[-71.07443032278444,42.33157829860257,0],[-71.07409812255045,42.33167296812525,0],[-71.07385608305862,42.3317641423716,0],[-71.07363775777935,42.33189390894842,0],[-71.07313606295311,42.33221559946081,0],[-71.07280383598541,42.33238744115817,0],[-71.07262345681295,42.33257333909899,0],[-71.072509555512,42.33261190941041,0],[-71.07220049440791,42.3328323600461,0]]},"properties":{"name":"Melnea Cass Bike Path - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":12}},{"type":"Feature","id":"8658c86b-c224-49dc-b6ef-aa4154793899","geometry":{"type":"LineString","coordinates":[[-71.11115627030772,42.34046246321592,0],[-71.11101185952216,42.34075145308882,0],[-71.1107178227961,42.34119753444789,0],[-71.11042642511674,42.34157185029972,0],[-71.11013518547885,42.34186462191492,0],[-71.10973066355741,42.34215691926671,0],[-71.10941502239613,42.34245908553176,0]]},"properties":{"name":"Chapel St - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":12}},{"type":"Feature","id":"739a2297-c86a-4dbe-9aaa-374cf8e99333","geometry":{"type":"LineString","coordinates":[[-71.11097316214178,42.3503417502496,0],[-71.11083710523991,42.35128017198467,0],[-71.11068546004601,42.35225650166026,0],[-71.11060937276787,42.35280677383029,0]]},"properties":{"name":"BU Bridge","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":12}},{"type":"Feature","id":"28d82c5a-9f69-47ae-8abb-ac8250587db5","geometry":{"type":"LineString","coordinates":[[-71.10023532724769,42.3358714589395,0],[-71.10070346854661,42.33607938219443,0],[-71.10101015412525,42.33620000963467,0],[-71.1014697567595,42.33637877328486,0],[-71.10300263721415,42.33696372630772,0],[-71.10437839369015,42.33750015186115,0],[-71.10533658467608,42.33786951531551,0],[-71.10604250466272,42.33818973114055,0],[-71.10660740518533,42.33853154078805,0],[-71.10816712606247,42.33943411838323,0],[-71.10874710357656,42.33976101165449,0],[-71.1093491181045,42.34011848749324,0],[-71.10947031971143,42.34017509839199,0],[-71.10962709916286,42.34024596974336,0],[-71.10972947715955,42.34027903229635,0]]},"properties":{"name":"Longwood Ave - Sharrows","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":12}},{"type":"Feature","id":"289dfd3f-0b6c-4fe7-acb1-8ab8122b78ee","geometry":{"type":"LineString","coordinates":[[-71.1109773489512,42.3503432159398,0],[-71.11113571258674,42.34993082738472,0],[-71.11137051510899,42.34885927640462,0],[-71.11145938912995,42.34840888135682,0],[-71.11153010431383,42.34808325657688,0],[-71.11158972249278,42.34779669934019,0],[-71.11163472726172,42.34757695575641,0],[-71.10937242731481,42.34731832068406,0]]},"properties":{"name":"Essex/Ivy","description":"","wayType":"traffic-calmed-street","protectionLevel":3,"routeId":12}},{"type":"Feature","id":"fcf9fc74-cac0-492f-adf7-a1056bd06a79","geometry":{"type":"LineString","coordinates":[[-71.09549636021623,42.33768975445311,0],[-71.09818082736486,42.33667760950867,0],[-71.0998518876047,42.33602622536843,0],[-71.10024757373425,42.33586885497728,0]]},"properties":{"name":"Huntington Ave - Bus/Bike Lane","description":"","wayType":"bus-bike-lane","protectionLevel":4,"routeId":12}},{"type":"Feature","id":"ec7a0be4-ef1d-4d4a-aaeb-a1dc88c12cc7","geometry":{"type":"LineString","coordinates":[[-71.09009564399888,42.33534128831528,0],[-71.09020721584164,42.33546493060425,0],[-71.09045252349162,42.3356732552045,0],[-71.09074819584454,42.33584506408596,0],[-71.09110805140247,42.33599019294603,0],[-71.09164980174974,42.3361896383221,0],[-71.09212076882032,42.33637295597149,0],[-71.09249918356393,42.33651397373433,0],[-71.09340560692962,42.33686378626301,0],[-71.09393648251663,42.33706523181193,0],[-71.09526929734993,42.33757667980012,0],[-71.09550225659935,42.3376793538777,0]]},"properties":{"name":"Ruggles - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":12}},{"type":"Feature","id":"c04dfd7f-352c-4ec6-a642-ff09d77c588c","geometry":{"type":"LineString","coordinates":[[-71.10941682147667,42.3424612927455,0],[-71.10925689277735,42.3426246203265,0],[-71.1091157706308,42.34279490184083,0],[-71.10888530590103,42.34295821647227,0],[-71.10853726606574,42.34317016868611,0],[-71.10823154819666,42.34337170066465,0],[-71.10810455245911,42.34346899546995,0],[-71.1081891021884,42.34375401147386,0],[-71.10849929613649,42.34426498445244,0],[-71.10876245612243,42.34482461300302,0],[-71.10884075506196,42.34496519795655,0],[-71.10890691750967,42.34507223408009,0],[-71.10923586675256,42.34568776034686,0]]},"properties":{"name":"Colchester/Carlton - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":12}},{"type":"Feature","id":"95970f37-cf2e-429e-aaca-aae77495bc45","geometry":{"type":"LineString","coordinates":[[-71.10923026711102,42.345683267996,0],[-71.10932750457049,42.34597101611215,0],[-71.10936219392323,42.34619966573107,0],[-71.10939141258993,42.34656483923649,0],[-71.10940012263109,42.34684825974254,0],[-71.10938842157667,42.34719341187701,0],[-71.10937667686711,42.34732521694023,0]]},"properties":{"name":"Carlton St - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":12}},{"type":"Feature","id":"c2991834-78f5-4be0-b4d6-4c68cd937d1e","geometry":{"type":"LineString","coordinates":[[-71.10972374968264,42.34027846931175,0],[-71.11023838678001,42.34034947524913,0],[-71.11070068480463,42.34041402293344,0],[-71.11102195467667,42.34045484540584,0],[-71.11116859275079,42.34046761950705,0]]},"properties":{"name":"Longwood Ave","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":12}},{"type":"Feature","id":"99f6216f-2708-4038-aaf5-2441f5bb268a","geometry":{"type":"LineString","coordinates":[[-71.07220361592756,42.33283698195122,0],[-71.07156769242927,42.33239123601746,0],[-71.06485895205068,42.33105387905021,0],[-71.05706630964045,42.32950863017112,0],[-71.05678598017965,42.3297757717985,0],[-71.05448074709693,42.33082384363551,0],[-71.05306123573466,42.33166512120505,0],[-71.05116645987417,42.33279259909747,0],[-71.05051468031864,42.33318831002944,0],[-71.04682155010363,42.334941876691,0],[-71.0456997088423,42.3354751124987,0],[-71.02505848587444,42.33581493489086,0],[-71.0237234525708,42.33578664876723,0]]},"properties":{"name":"Southhampton St/Dorchester St/E Broadway","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":12}},{"type":"Feature","id":"35da454c-da51-4ee7-83dc-1941c7d87def","geometry":{"type":"LineString","coordinates":[[-71.07243657540413,42.3554371784721,0],[-71.08931607227612,42.35088678353069,0],[-71.08964264029542,42.35080984741753,0],[-71.09152286690195,42.35029997896516,0],[-71.09380209167219,42.34969286202195,0],[-71.09569257453977,42.34917367593248,0],[-71.09683051006817,42.34895223863698,0],[-71.09727385242842,42.34883617594161,0]]},"properties":{"name":"Beacon Westbound - Protected Bike Lane","description":"","wayType":"protected-bike-lane","protectionLevel":7,"routeId":13}},{"type":"Feature","id":"ade367c9-18b9-4855-8ea0-b128edb9e5e9","geometry":{"type":"LineString","coordinates":[[-71.09726946182398,42.34883278372553,0],[-71.09861216490322,42.34845035880647,0],[-71.10094802617829,42.34780097017759,0],[-71.10280686713567,42.34729319342545,0],[-71.10508496154334,42.34665409558465,0]]},"properties":{"name":"Beacon Bike Lanes","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":13}},{"type":"Feature","id":"2ff646e0-45db-453e-8bc9-21d5c52c8801","geometry":{"type":"LineString","coordinates":[[-71.10508385089783,42.34665161276406,0],[-71.10674185882078,42.34618820695426,0],[-71.10991146415871,42.34533085305134,0],[-71.11291925117001,42.34441019737037,0],[-71.11569358141652,42.34367053719876,0],[-71.12025118619742,42.34236347158005,0],[-71.12340087537714,42.34158544187384,0],[-71.12654085383711,42.34079826071752,0],[-71.12873755804645,42.34004991590841,0],[-71.13100011807298,42.33968156861407,0],[-71.13410931360669,42.33961896122509,0],[-71.1352394011605,42.33942193506342,0],[-71.13615384847438,42.33912455764835,0],[-71.13866135021742,42.3384872065001,0],[-71.1418426385025,42.33776697355405,0],[-71.14626094221715,42.33683838537304,0],[-71.15010887312934,42.33604671613003,0],[-71.15081207879993,42.33594991221688,0]]},"properties":{"name":"Beacon Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":13}},{"type":"Feature","id":"e8cc68ac-680c-4665-9991-a2a36d350ede","geometry":{"type":"LineString","coordinates":[[-71.06000244417706,42.37177922164834,0],[-71.05934833499659,42.37208324073758,0],[-71.05865502235143,42.37239992359204,0],[-71.05822072445913,42.3726194644828,0],[-71.05808723080605,42.37271574960024,0],[-71.05799299367636,42.37283640019886,0],[-71.05794273095964,42.37292456894514,0],[-71.05791444949567,42.37304638358282,0],[-71.05790344707218,42.37312759383727,0],[-71.05789715623318,42.37320532393959,0],[-71.05791285113398,42.37328073520256,0],[-71.0579363995726,42.37334338529571,0],[-71.05798664344071,42.37341763877719,0],[-71.05803688803553,42.37348725171281,0],[-71.0581091181917,42.37355918644795,0],[-71.05816721789182,42.37360559680533,0],[-71.05825358407175,42.37366129034387,0],[-71.05850024357213,42.37368803987404,0]]},"properties":{"name":"Constitution Rd - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":14}},{"type":"Feature","id":"42a0bff0-f305-43b7-9ec0-b3df02237fb8","geometry":{"type":"LineString","coordinates":[[-71.06853935994089,42.3668512940627,0],[-71.06886840986262,42.36651971959304,0],[-71.0688571772965,42.36637604565642,0],[-71.06888708415345,42.36627934031944,0],[-71.06942552760742,42.36582342294147,0],[-71.06954517244617,42.36564382399789,0],[-71.06967603072302,42.36542277988403,0],[-71.07002372264076,42.36469333607073,0],[-71.0705692618393,42.36484733462743,0],[-71.07090040236943,42.36490255942029,0],[-71.07135970847024,42.36483938745962,0],[-71.07182434470373,42.36470518190148,0],[-71.07221953679104,42.3644960020013,0],[-71.07261470636222,42.36415659624218,0],[-71.07276952251696,42.36373433943027,0],[-71.07289225749312,42.36308715202156,0],[-71.07300429199756,42.36230579200986,0],[-71.07296151761022,42.36198220494576,0],[-71.07282794933337,42.3616349475942,0],[-71.07280658088952,42.3615954870001,0],[-71.07290728363026,42.3610215185133,0],[-71.07282758150568,42.36076748654433,0],[-71.0726640343076,42.36055993242314,0],[-71.0725172523352,42.36030590614362,0],[-71.07240401615773,42.36007356287341,0],[-71.07235787214232,42.35990317425409,0],[-71.0723536581945,42.35975756625013,0],[-71.07240813427178,42.35956548180116,0],[-71.07244584132947,42.35938269231966,0],[-71.0730182545317,42.35744795419665,0],[-71.07323450615205,42.35681618052229,0],[-71.0733853771064,42.3564877751062,0],[-71.073603339084,42.3562461088065,0],[-71.07372910560852,42.35622131279802,0],[-71.07389260666952,42.35621510123706,0],[-71.07410222457074,42.35621198302839,0],[-71.07454242274926,42.35620264537527,0],[-71.07484427952018,42.35622430086222,0],[-71.07492393595204,42.35622739065253,0],[-71.07535928565032,42.35593478810031,0],[-71.07577848015109,42.35573956585399,0],[-71.0801097418741,42.35454619224555,0],[-71.0810030617665,42.35415253489525,0],[-71.08125036390322,42.35401618201824,0],[-71.08398824103159,42.35324550858891,0],[-71.08436550673879,42.35315869336572,0],[-71.08550569008375,42.35289203975579,0],[-71.08635205516481,42.35266795740888,0],[-71.08666640717004,42.3525160895224,0],[-71.0881255867878,42.35228488808728,0],[-71.08906876866386,42.35216385519886,0],[-71.08924297667944,42.35214832318415,0],[-71.08972505652525,42.35212342705648,0],[-71.09084007988372,42.35196516184708,0],[-71.09218781652218,42.35178823855093,0],[-71.09303029225408,42.35152159040097,0],[-71.09339494172903,42.35140067085771,0],[-71.09355836211734,42.35125811766765,0],[-71.09371342830133,42.35117752703339,0],[-71.0939984965747,42.35119603786998,0],[-71.09445533765908,42.35100693118679,0],[-71.09514092888104,42.35081769205989,0],[-71.09738978987913,42.350957338688,0],[-71.09802282682988,42.35103459752984,0],[-71.09817372588405,42.35100976704931,0],[-71.0989744319506,42.35105289088039,0],[-71.10187213251407,42.35128188976662,0],[-71.10642643381674,42.35156527437488,0],[-71.10771735829833,42.35175685507316,0],[-71.10785573619435,42.3518125656777,0],[-71.10844679048643,42.35177515692062,0],[-71.10906310825496,42.35188644168058,0],[-71.1092979212631,42.3519607010345,0],[-71.1096207355861,42.35198845393692,0],[-71.10997703029497,42.3519387412749,0],[-71.1101580520972,42.35192753756861,0],[-71.11036768151753,42.35196152955323,0],[-71.1105228000739,42.3519769556079,0],[-71.11053961543425,42.35203890954194,0],[-71.11053546805549,42.35209777406621,0],[-71.11049357538786,42.3521349680533,0],[-71.11052295530403,42.35218142662253,0],[-71.11056489744203,42.35220929166579,0],[-71.11112666519278,42.35224313668597,0],[-71.11118533315833,42.35221522963258,0],[-71.1112188484293,42.35218733318835,0],[-71.11135296703846,42.35215010045149,0],[-71.11157932160023,42.35212522101694,0],[-71.11174699642325,42.35211275816253,0],[-71.11189789333359,42.35208791014269,0],[-71.11206977786665,42.35209713152176,0],[-71.11228271874228,42.35210503837753,0],[-71.11260132558228,42.35211419492214,0],[-71.11289900087696,42.35216053611211,0],[-71.11336021989479,42.35227186343613,0],[-71.11380470465556,42.35242347092691,0],[-71.11553718387908,42.35330638521121,0],[-71.11639282004684,42.35381406969702,0],[-71.11717330839585,42.35428116220135,0],[-71.11755509545924,42.35461866647468,0],[-71.11787406926335,42.35503055360823,0],[-71.11805050214832,42.35543321639872,0],[-71.11820502429491,42.3559270214017,0],[-71.11820940240035,42.35613768531717,0],[-71.1182264154391,42.35641340213387,0],[-71.11813882150432,42.35691842537841,0],[-71.11797743327455,42.35750736227534,0],[-71.11734159620448,42.35913723334257,0],[-71.11726212774364,42.35935907559309,0],[-71.11724550753232,42.35953257311183,0],[-71.11723733679112,42.35978041910307,0],[-71.11723330239823,42.35996320453631,0],[-71.11725864592391,42.36018005445816,0],[-71.11743154753518,42.36133244628581,0],[-71.11765104634195,42.36303093321602,0],[-71.11770234019481,42.36414930274761,0],[-71.11772479047559,42.36585457679991,0],[-71.11781352919182,42.36663524086443,0],[-71.11798457420045,42.3670033157719,0],[-71.11812735427573,42.36724799144201,0],[-71.11835818857229,42.36748952682235,0],[-71.11862673905773,42.36770316186869,0],[-71.11884069806345,42.36782388210349,0],[-71.1191281188709,42.36793515070606,0],[-71.11967326553963,42.36797825521283,0],[-71.12038194077773,42.36801507966238,0],[-71.1213883173419,42.36803006312901,0],[-71.1218382263954,42.36803639044763,0],[-71.12223665090298,42.36811673421611,0],[-71.1226057068063,42.36817850373178,0],[-71.12299997348568,42.36829292551621,0],[-71.12318455354077,42.36837647586071,0],[-71.12330200153869,42.36841668875125,0],[-71.12338169307496,42.36843833319374,0],[-71.12342365198414,42.36846619348946,0],[-71.12342368792346,42.36850336992119,0],[-71.12340697207348,42.36856224138127,0],[-71.12340699903515,42.36859012370685,0],[-71.12357895665474,42.36862720986898,0],[-71.12367536766625,42.36859308073301,0],[-71.12382212446704,42.3685868073411,0],[-71.12393116658087,42.36860533802925,0],[-71.12402345715931,42.36864556386312,0],[-71.125417536583,42.36915985962065,0],[-71.12593351971317,42.36937334266067,0],[-71.12608042490388,42.36951267403467,0],[-71.12618119532655,42.36964273674484,0],[-71.12619804392808,42.36971708063951,0],[-71.12634070462296,42.36980374794417,0],[-71.12642889386302,42.36993071989347,0],[-71.12652553388995,42.37011964899345,0],[-71.12652147390688,42.37024977021908,0],[-71.12656411299778,42.37088989155533,0],[-71.12664964881002,42.37134864693027,0],[-71.12676488843253,42.37173510872942,0],[-71.12691402770864,42.37199271036308,0],[-71.12723634323044,42.37240823847459,0],[-71.12735557966754,42.3725401558437,0],[-71.12766204767159,42.37274110237272,0],[-71.12800254432996,42.37293888666254,0],[-71.12832169394507,42.37305812037648,0],[-71.1286323123445,42.37315221855992,0],[-71.12890885352034,42.37319919832844,0],[-71.12930451139161,42.37325553680315,0],[-71.12946304124486,42.37325413585527,0],[-71.12988838375034,42.37323189155855,0],[-71.13030940510001,42.37314679863005,0],[-71.13076014409238,42.37300826425771,0],[-71.13105774063811,42.37286039120946,0],[-71.13142329659892,42.37262134387995,0],[-71.13191088491304,42.37233678770676,0],[-71.1320300171733,42.37236499844167,0],[-71.13220441210737,42.37236175077989,0],[-71.13229798840729,42.37235855175332,0],[-71.13247662691454,42.37234587358932,0],[-71.13256594983656,42.37234267688816,0],[-71.13254883793465,42.37225469749191,0],[-71.13251897568588,42.37217615324531,0],[-71.13247637005095,42.37211332922872,0],[-71.13221656783132,42.37181180681321,0],[-71.13188451284536,42.37156060659559,0],[-71.13130456437273,42.37107965400956,0],[-71.1311043442231,42.37080009174028,0],[-71.13092105898845,42.3704450993774,0],[-71.1307887740033,42.37004922328726,0],[-71.1307883546268,42.36965955189262,0],[-71.13100877604273,42.36896507656159,0],[-71.13120832284386,42.3686318548516,0],[-71.13150996995505,42.36831742636536,0],[-71.13228310809865,42.36775783199242,0],[-71.13241067269298,42.36772633027025,0],[-71.13246156236767,42.36759117254158,0],[-71.13244437489011,42.36743405857916,0],[-71.13235915246578,42.36729269821355,0],[-71.13235051380222,42.36717328901331,0],[-71.13236731156464,42.36697844475201,0],[-71.13241815272275,42.36679929216837,0],[-71.13241814231063,42.36678986468596,0],[-71.13250309279672,42.36668611093146,0],[-71.13263907865667,42.3665791833445,0],[-71.13275386792208,42.36653511836143,0],[-71.13294947952558,42.36650043122362,0],[-71.1330558075499,42.36649722352401,0],[-71.13325144077697,42.36648139069214,0],[-71.13337609456468,42.36639590181455,0],[-71.1334779631316,42.36621043184198,0],[-71.13352459268117,42.36607213358504,0],[-71.13380081135278,42.36586141703067,0],[-71.13409417267808,42.36576696142701,0],[-71.1343808267495,42.3657393757539,0],[-71.13476747520463,42.36582605861398,0],[-71.13493003802236,42.36591288095239,0],[-71.13507579015163,42.36599557448814,0],[-71.13512067460344,42.36605349582972,0],[-71.13621247973877,42.36551884705499,0],[-71.13760100183306,42.3648225670448,0],[-71.1378132286539,42.36478317209267,0],[-71.13803724195645,42.36472507706635,0],[-71.13822202555717,42.36465458971225,0],[-71.13837876860073,42.36455928527995,0],[-71.13854668030064,42.36443499896435,0],[-71.138664218141,42.36434799838482,0],[-71.1388714184548,42.36428577384272,0],[-71.13907861850599,42.36422354896436,0],[-71.1392745741274,42.36412821748169,0],[-71.13951534584753,42.36403285579809,0],[-71.13980091865204,42.36392504593396,0],[-71.14001938362095,42.36391248212472,0],[-71.14027147715873,42.36391231294576,0],[-71.14046759150968,42.36394529475272,0],[-71.14068050291189,42.36396998652828,0],[-71.1408317862789,42.3639905804345,0],[-71.1409046244095,42.3639988096183,0],[-71.14108092412151,42.36394872131005,0],[-71.1412993034573,42.36386992778304,0],[-71.14150649898465,42.36380769839323,0],[-71.14163531328595,42.363782775113,0],[-71.14179778621536,42.36379508146793,0],[-71.14193795576514,42.36389018705491,0],[-71.14197179226967,42.36406814981932,0],[-71.14204472823235,42.36415502329664,0],[-71.1421120362622,42.36422120453346,0],[-71.14219060110636,42.36432877037081,0],[-71.14228590937644,42.36438665403124,0],[-71.14241487253426,42.36447762842862,0],[-71.14257731154865,42.3644609596511,0],[-71.14283484839383,42.36433660478587,0],[-71.14362369108915,42.36352062888835,0],[-71.14380273760493,42.3633507952277,0],[-71.1439818533613,42.36323477091283,0],[-71.14431791277048,42.36318486275978,0],[-71.14459796882555,42.36314741096237,0],[-71.14477161805804,42.36313486967886,0],[-71.1448556067516,42.36310169583025,0],[-71.14497442524285,42.36285793858404,0],[-71.14591905302615,42.36224336045615,0],[-71.14652012078699,42.3618110773845,0],[-71.14661745610638,42.36175596705511,0],[-71.14687626788107,42.3615593153347,0],[-71.14690275592562,42.36147192436602,0],[-71.14697654734898,42.36138886740409,0],[-71.14764117701101,42.3610214179384,0],[-71.14800457787206,42.36087261637116,0],[-71.1482143764702,42.36080911535875,0],[-71.14863977431817,42.36067833071601,0],[-71.149351696342,42.3605794131565,0],[-71.15096658751611,42.36040280683557,0],[-71.15200838766702,42.36024800977786,0],[-71.15268548097515,42.36009348751502,0],[-71.15298044527354,42.35990076230736,0],[-71.1533911407632,42.35967372254916,0],[-71.1543980169385,42.35938203661463,0],[-71.15523937526396,42.35922509985571,0],[-71.15555198138347,42.35922484939373,0],[-71.15590509603194,42.35921601004901,0],[-71.1563566782434,42.35924558843728,0],[-71.15670971291604,42.35918541489153,0],[-71.15730588561331,42.35912931879126,0],[-71.157774810603,42.35914604377504,0],[-71.15819741787364,42.35915852727894,0],[-71.15850429334031,42.35920104876374,0],[-71.15885163283076,42.35920503690897,0],[-71.15922218732477,42.35924750299728,0],[-71.15969682540913,42.35921288283763,0],[-71.1601655835021,42.35911837847065,0],[-71.16046069403642,42.35903685250933,0],[-71.16065737266256,42.35894257653653,0],[-71.16081357516788,42.35887827820637,0],[-71.1609466685689,42.35884394289611,0],[-71.16102757489381,42.35875404257433,0],[-71.16108533853581,42.35867271723421,0],[-71.16113148425993,42.35856573561652,0],[-71.16193278147375,42.35822471904441,0],[-71.16291332882189,42.35801246445509,0],[-71.16394878358122,42.3580618940977,0],[-71.17149665824252,42.35823620403657,0],[-71.17405875127025,42.35835457042027,0],[-71.17499917682488,42.35856506820002,0],[-71.17593954400952,42.35874535545779,0],[-71.17672993770871,42.35886538033719,0],[-71.17772481253571,42.35905566423327,0],[-71.17916950971498,42.35937635574253,0],[-71.18032813927951,42.35970738893459,0],[-71.18094162265716,42.35992823512104,0],[-71.18180047473031,42.36021929489373,0],[-71.18246856457971,42.36049041413863,0],[-71.18317761370746,42.36080175681104,0],[-71.18334145275436,42.36098279406486,0],[-71.18358756455119,42.36143555888354,0],[-71.18368375448304,42.36185828066837,0],[-71.18375289345687,42.36238170611374,0],[-71.18389012018548,42.36288493013795,0],[-71.18409531876314,42.36330754880136,0],[-71.18442308910892,42.3636998411468,0],[-71.18481913326747,42.36416253967359,0],[-71.1856643897648,42.36440328475536,0],[-71.18583663203061,42.36444095835631,0]]},"properties":{"name":"Charles River Esplanade - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"867d6ad0-76f5-4716-9f4f-bd98c8295602","geometry":{"type":"LineString","coordinates":[[-71.07957673924136,42.3546756675502,0],[-71.07950845622518,42.35453306703355,0],[-71.07894603109169,42.35468270256237,0],[-71.07878358225145,42.35439402677582,0],[-71.07926599183908,42.35425483687051,0],[-71.07924714700721,42.35417831772615,0],[-71.07929891747148,42.35416265905819,0],[-71.07909640858676,42.35364268649842,0]]},"properties":{"name":"Dartmouth St Connector - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"60dd7bac-22a8-473c-8209-87c880f3e3fd","geometry":{"type":"LineString","coordinates":[[-71.08482360132446,42.35304348661244,0],[-71.08480241408913,42.35302088167916,0],[-71.08455062736518,42.35308179458749,0],[-71.0844493663174,42.35286616057532,0],[-71.08387284662453,42.35300538796776,0],[-71.08385635271155,42.35293756489435,0],[-71.08378340460622,42.35295322914759,0],[-71.08354547097241,42.35245322385334,0]]},"properties":{"name":"Fairfield St Connector - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"f585d274-9c89-4c53-a3e1-0c34b6cc31fa","geometry":{"type":"LineString","coordinates":[[-71.08976260889825,42.35212036616044,0],[-71.08992411969174,42.35238400086283,0],[-71.09000906219559,42.35236514881213,0],[-71.09024236205599,42.35233177490363,0]]},"properties":{"name":"Mass Ave Connector - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"8f49ea4a-3607-4917-93df-a5376291bb65","geometry":{"type":"LineString","coordinates":[[-71.07374784125547,42.35621462310529,0],[-71.07371959771316,42.35619184582148,0],[-71.07351929289415,42.35615386211509,0],[-71.07320344166848,42.35603995035244,0],[-71.07302114891851,42.35587102155462,0],[-71.0729543966859,42.35579889612841,0],[-71.07285032275061,42.35565614051342,0],[-71.07277433590612,42.35549925084285,0],[-71.0724417970165,42.3554579327941,0]]},"properties":{"name":"Arthur Fiedler Footbridge - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"c8854338-d692-4396-8f59-ed411b4237fd","geometry":{"type":"LineString","coordinates":[[-71.07114600498605,42.36122021300408,0],[-71.07114925342505,42.36092099979618,0],[-71.07150715966365,42.36097311078119,0],[-71.07163264225157,42.36098391538411,0],[-71.07173929991792,42.36097926859115,0],[-71.0717894875212,42.36095453826023,0],[-71.07185222018181,42.36091435340836,0],[-71.07188567487987,42.3608788074938,0],[-71.07190239789611,42.36083862735208,0],[-71.07191075617546,42.36080153871577,0],[-71.07194839344095,42.36076599236873,0],[-71.07200276237461,42.36073508021218,0],[-71.0720885005579,42.36069952873146,0],[-71.0722704355294,42.36063769631952,0],[-71.07265619207828,42.36050371709652,0],[-71.07272310697743,42.36046662195434,0],[-71.07277747477882,42.36043416413524,0],[-71.07279210583182,42.36039398410617,0],[-71.07280464230917,42.36033835109889,0],[-71.07280463151695,42.36028581013969,0],[-71.07278789367665,42.36025026960154,0],[-71.07276906515033,42.36021781994503,0],[-71.07273350455425,42.36017764554185,0],[-71.07267703149415,42.360140564112,0],[-71.07263101974783,42.36012666132299,0],[-71.0725494504708,42.36008649195141,0],[-71.07250343513424,42.36005404524159,0],[-71.07245741798457,42.36001232656375,0],[-71.07242394876835,42.35997060648558,0],[-71.07241348027428,42.35991033999996,0],[-71.07240510371699,42.35985316385656,0],[-71.07242809243547,42.35977434969227,0],[-71.07246363261572,42.35971407803147,0],[-71.07249499293124,42.35966771464521,0],[-71.07251589795527,42.35962753371501,0],[-71.07251589089294,42.35959199106685,0],[-71.07249915376303,42.35955799559441,0],[-71.0724698703605,42.35953172814926,0],[-71.07243012897767,42.35949773509247,0]]},"properties":{"name":"Frances Appleton Bridge - Shared Use Path","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"c3e663e2-b11f-440d-b18b-3f9abd051e44","geometry":{"type":"LineString","coordinates":[[-71.06137167318165,42.370739167004,0],[-71.06168971190597,42.37058253740913,0],[-71.06192963134085,42.37052483546503,0],[-71.0621249161139,42.37044239914176,0],[-71.06227556760288,42.3703063739419,0],[-71.0623704247972,42.37016210287203,0],[-71.0623815913277,42.3700013411553,0],[-71.0624150752053,42.36984470213656,0],[-71.06250435111056,42.36972516340904,0],[-71.06272753227137,42.36959326135521,0],[-71.06301766112644,42.36956853485457,0],[-71.0633356839041,42.36965098299287,0],[-71.06368160591995,42.36972518654215,0],[-71.06412237166492,42.36971634373759,0],[-71.06499821402264,42.36969985725891,0],[-71.06565360030201,42.36969204728022,0],[-71.06633232506002,42.36962308274468,0],[-71.06679743577911,42.36959769602637,0],[-71.06719648208042,42.36960159488018,0],[-71.06773465804508,42.36964258806951,0],[-71.06796192738916,42.36963672598429,0],[-71.06830479910447,42.36956562502232,0],[-71.06861134149828,42.3694230891082,0],[-71.06882010465473,42.36927860259485,0],[-71.06907379260404,42.36912825650322,0],[-71.06919006992966,42.36912630011845,0],[-71.0693195623923,42.36914972490113,0],[-71.06938563386213,42.36922391549646,0],[-71.06941206466296,42.36929029774149,0],[-71.06942528274051,42.36936644265688,0],[-71.06949135558582,42.36945234792413,0],[-71.06960836413487,42.36951406221019,0],[-71.06971596177243,42.36957651566288,0],[-71.06987735472423,42.36961057707187,0],[-71.07003874416642,42.36958501952919,0],[-71.07018476004991,42.36951687751882,0],[-71.07043068435748,42.36943453550487,0],[-71.0706036008773,42.3693862641623,0],[-71.07068813837363,42.36936638690431,0],[-71.07080726347058,42.36939193186516,0],[-71.07090720121394,42.36945722874776,0],[-71.071018640221,42.36949413002076,0],[-71.07116082479287,42.36957929230929,0],[-71.0713222217153,42.36965025843386,0],[-71.07143750384436,42.36968148112454,0],[-71.07149130247474,42.36969851209776,0]]},"properties":{"name":"Paul Revere/North Point Parks","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"714c0163-f803-4a3a-89d5-0de9612f3c21","geometry":{"type":"LineString","coordinates":[[-71.05849599460004,42.37368699326233,0],[-71.05870135373732,42.37381466099279,0],[-71.05875800721876,42.37382722061587,0],[-71.05875800252214,42.37387221401376,0]]},"properties":{"name":"Freedom Trail","description":"","wayType":"shared-use-path","protectionLevel":8,"routeId":14}},{"type":"Feature","id":"fa2b90f8-5366-4695-bbf2-bbba32f9b782","geometry":{"type":"LineString","coordinates":[[-71.07149017016106,42.3696995675022,0],[-71.07232941841836,42.36879984951626,0],[-71.07189195681416,42.36857271649997,0],[-71.07081579821512,42.36802448343668,0],[-71.0702112010651,42.36772025940015,0],[-71.06980073428939,42.36753354432373,0],[-71.068799353899,42.36703255210248,0],[-71.06837355321682,42.36680548390218,0],[-71.06824064347924,42.36672349307182,0]]},"properties":{"name":"Science Connector","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":14}},{"type":"Feature","id":"2c6e2b6f-ad1b-453a-83f0-f0ba1cb4ca48","geometry":{"type":"LineString","coordinates":[[-71.07909525628794,42.3536439160839,0],[-71.07814982406092,42.35171323437911,0]]},"properties":{"name":"Dartmouth St Connector - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":14}},{"type":"Feature","id":"c2d76485-3ae4-4a5b-9caf-ad7317d716d9","geometry":{"type":"LineString","coordinates":[[-71.06137681580908,42.37073500313655,0],[-71.06058308495668,42.37108065105218,0],[-71.06043854653586,42.37115303812071,0],[-71.06035525047555,42.37122723759926,0],[-71.06035279799758,42.37126162431819,0],[-71.06035279451753,42.37130506035502,0],[-71.06036748805553,42.37136478555053,0],[-71.06039198194318,42.37140641286079,0],[-71.0604017768422,42.37145708872723,0],[-71.06041402318388,42.37148604669294,0],[-71.0604140199188,42.37152767298959,0],[-71.06040421943409,42.37154758075121,0],[-71.06038461875114,42.37158377674587,0],[-71.06035521998834,42.37160911318627,0],[-71.06031357268283,42.37163263927771,0],[-71.0599999940659,42.37178103227242,0]]},"properties":{"name":"Constitution Rd - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":14}},{"type":"Feature","id":"eb5d8e23-6c22-4c58-9b69-6d8f15d2a1b5","geometry":{"type":"LineString","coordinates":[[-71.05875728239315,42.37386703897505,0],[-71.05859076835947,42.37395648916191,0],[-71.05847269070277,42.37405712406784,0],[-71.05833947493423,42.37416894009009,0],[-71.05830919463692,42.37422932316397,0],[-71.05830615768005,42.37431430915628,0],[-71.05831100909,42.37435779075346,0],[-71.05862156675289,42.37432217929162,0],[-71.05890977488626,42.37428222055349,0],[-71.05908533995614,42.37428433475375,0],[-71.05926178687731,42.37432345061108,0],[-71.05939941160823,42.37439732539514,0],[-71.05970289524585,42.37454594533815,0],[-71.06004992675236,42.37471832000673,0],[-71.06018201744466,42.37479395574416,0],[-71.06020512583578,42.37490130210244,0],[-71.06022162731652,42.37503548458012,0],[-71.0602579424468,42.37518674592022,0],[-71.0603834245638,42.37534045142637,0],[-71.06048579471478,42.37543316415623,0],[-71.06076079988017,42.37556036262854,0],[-71.06099526907161,42.37563600126087,0],[-71.06114387710001,42.3756799207428,0],[-71.06116699248956,42.37570919755909,0]]},"properties":{"name":"To Bunker Hill","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":14}},{"type":"Feature","id":"e061cb25-ae9e-4ac4-8eb2-0b154dbd0c39","geometry":{"type":"LineString","coordinates":[[-71.05890955754947,42.37428013968746,0],[-71.05889112517676,42.37413528841291,0],[-71.05887436841616,42.37401643617449,0],[-71.05884420460819,42.37392977296332,0],[-71.05882577091118,42.37389758370747,0],[-71.0587537105567,42.37386787008704,0]]},"properties":{"name":"Chestnut St Southbound","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":14}},{"type":"Feature","id":"7ebc5a8a-7ed5-4834-a982-d52e29377a22","geometry":{"type":"LineString","coordinates":[[-71.08354547262222,42.35245794582286,0],[-71.08258640846107,42.35053157283298,0]]},"properties":{"name":"Fairfield St Connector","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":14}},{"type":"Feature","id":"54839a5a-471c-4079-94e5-a11fe7635db6","geometry":{"type":"LineString","coordinates":[[-71.06163002301639,42.32043734194894,0],[-71.06181186282818,42.32069561542203,0],[-71.06197651887925,42.32100456563294,0],[-71.06220975914275,42.32128187446393,0],[-71.06290747322831,42.32212596471328,0],[-71.06399125393142,42.323408846511,0],[-71.06453793893664,42.32404187311163,0],[-71.0648422684193,42.32436571151396,0],[-71.06496531439157,42.32451627584977,0],[-71.06545826325751,42.32516591371773,0],[-71.06589775157047,42.32568825695778,0],[-71.06663520165068,42.32654550537615,0],[-71.06715847733821,42.32715755773101,0],[-71.06782843485736,42.3279559309512,0],[-71.06855240868722,42.32883297161832,0],[-71.06912216013684,42.32951018273116,0],[-71.06986473437975,42.33035576751011,0],[-71.07059877632334,42.33124041619975,0],[-71.07111559759173,42.33184761875712,0],[-71.07125957787113,42.33196731247993,0],[-71.07146096622394,42.33210555482898,0],[-71.07168218100315,42.33225924247014,0],[-71.07203983099336,42.33246950134748,0],[-71.07222403211348,42.33254916843621,0]]},"properties":{"name":"Mass Ave - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":15}},{"type":"Feature","id":"9d9a46ce-85b9-40f6-9389-a78c497842cf","geometry":{"type":"LineString","coordinates":[[-71.04027544512228,42.31714634464798,0],[-71.03948062798553,42.3168776761481,0],[-71.03889418145431,42.31669484142177,0],[-71.03844303800054,42.31662324188769,0],[-71.03817324208424,42.31659934028098,0],[-71.03791056063191,42.31655642487036,0],[-71.03755904309392,42.31647206489114,0],[-71.03735819305284,42.31638631414605,0],[-71.03708435816993,42.31622445626945,0],[-71.03579629128029,42.31541525763665,0],[-71.0348995431975,42.31485409844937,0],[-71.03349785610554,42.31397087032473,0],[-71.0334360641636,42.31393800113335,0]]},"properties":{"name":"Mt Vernon St - Cycletrack","description":"","wayType":"cycletrack","protectionLevel":9,"routeId":15}},{"type":"Feature","id":"944e967e-a75a-4389-86d9-7001805b8c67","geometry":{"type":"LineString","coordinates":[[-71.0488506596297,42.32015055538312,0],[-71.04746317850885,42.31968243478337,0],[-71.04645043410399,42.31932455600118,0],[-71.04284420566087,42.3180449255767,0],[-71.04153196772812,42.31758125661747,0],[-71.04027704774228,42.31714699026831,0]]},"properties":{"name":"Mt Vernon St - Buffered Bike Lane","description":"","wayType":"buffered-bike-lane","protectionLevel":6,"routeId":15}},{"type":"Feature","id":"ee6f7555-eed2-4ce1-b5dc-5897a47ffc69","geometry":{"type":"LineString","coordinates":[[-71.0913325215633,42.3544465574825,0],[-71.08890580802306,42.34967119418448,0],[-71.08859809187594,42.34905559189004,0],[-71.08860577917632,42.34890101367806,0],[-71.0878045632841,42.34716025522391,0],[-71.0873927502897,42.3466243664048,0],[-71.08664656302764,42.34501504933546,0],[-71.0859643466864,42.34360909641603,0],[-71.08574715004755,42.34329019869804,0],[-71.08545514275714,42.343124414913,0],[-71.08509704142764,42.34288848333251,0],[-71.08171577536424,42.34056340639466,0],[-71.08139669425549,42.34035571720676,0],[-71.08038307231968,42.33927556674149,0],[-71.07954376984941,42.33860003524051,0],[-71.07819655199994,42.33748747872328,0],[-71.07671870847841,42.33628224500212,0],[-71.07482353251869,42.33474072399966,0],[-71.07310573416879,42.33331260627921,0],[-71.07222052336006,42.33254766279904,0]]},"properties":{"name":"Mass Ave - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":15}},{"type":"Feature","id":"f55f1349-6ddf-4db6-88eb-a9b51cb8a2e5","geometry":{"type":"LineString","coordinates":[[-71.0616332780069,42.32043700192218,0],[-71.06138650293875,42.32031126656142,0],[-71.06104257657816,42.32018152050473,0],[-71.0603375481107,42.32000575786968,0],[-71.05995189550205,42.31995814989231,0],[-71.05950152299025,42.31993541574417,0],[-71.05899077518526,42.31994935771388,0],[-71.05828820304505,42.3200689945218,0],[-71.05789276592083,42.32016515860586,0],[-71.05717356349132,42.32043061381915,0],[-71.05678593847267,42.32059449184458,0]]},"properties":{"name":"Columbia Rd - Bike Lane","description":"","wayType":"bike-lane","protectionLevel":5,"routeId":15}},{"type":"Feature","id":"ea9f39f2-e1a3-4124-809a-4d752d666c7a","geometry":{"type":"LineString","coordinates":[[-71.05678627650192,42.32058869010897,0],[-71.0561870814607,42.32087598969653,0],[-71.05545833421117,42.32114731214543,0],[-71.05437873471567,42.32131083961961,0],[-71.05369155111613,42.32131810547962,0],[-71.05134103578607,42.32137368522174,0],[-71.05084440583853,42.32150133099821,0],[-71.0503996264222,42.32167346482396,0],[-71.05027257481359,42.32171751257185,0],[-71.05030558288114,42.32144616305224,0],[-71.05024604383709,42.32122118529126,0],[-71.05014572257528,42.32101359546642,0],[-71.05009064031002,42.32073889362745,0],[-71.05007343009038,42.32058234042619,0],[-71.04961121932823,42.32040180457535,0],[-71.04884773485881,42.32015022090186,0]]},"properties":{"name":"Under the 93/Morrissey Blvd","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":15}},{"type":"Feature","id":"eadba972-c4af-4f52-ae7c-ed1b129bb042","geometry":{"type":"LineString","coordinates":[[-71.08304021950555,42.30871231796274,0],[-71.0817551109448,42.30842510131047,0],[-71.08133049754503,42.30827913447352,0],[-71.08102973905082,42.30808292987361,0],[-71.07852780747874,42.30625889489428,0],[-71.07815212842813,42.30598756045279,0],[-71.07741703035941,42.30549325028723,0],[-71.0771213239495,42.30529715394942,0],[-71.076652738467,42.30514221045865,0],[-71.07629551948017,42.30506683902053,0],[-71.07483352574961,42.3049778939822,0],[-71.07429046934206,42.30494149296209,0],[-71.07383338874217,42.30484762218528,0],[-71.07320923073314,42.30470398697857,0],[-71.07280381235138,42.30453926040862,0],[-71.0725445844685,42.30440992539411,0],[-71.0722911538254,42.30421240757838,0],[-71.07201471323198,42.30394101616119,0],[-71.07169431129832,42.30358129108542,0],[-71.07127582430914,42.30331001590852,0],[-71.0701909788213,42.30267292689958,0],[-71.06877843325144,42.30183363676807,0],[-71.06770126887446,42.30119981260633,0],[-71.06640816901388,42.30043242079398,0],[-71.06508367154147,42.29965237343789,0],[-71.06245760820813,42.29811288871005,0]]},"properties":{"name":"Geneva - Sharrows","description":"","wayType":"sharrows","protectionLevel":2,"routeId":16}},{"type":"Feature","id":"7975a52b-2f28-4094-b01a-1ed2161d43ce","geometry":{"type":"LineString","coordinates":[[-71.06245657892565,42.29811293698013,0],[-71.06228623705606,42.29805757415897,0],[-71.06205144731513,42.29809747225307,0],[-71.06144677375063,42.29828634046126,0],[-71.06123067464279,42.29834314536784,0],[-71.06114549326195,42.29834005067126,0],[-71.06105408953019,42.29831390353675,0],[-71.060943995692,42.29826931099061,0],[-71.06091284614791,42.29823703202315,0],[-71.06085261339662,42.29819706209675,0],[-71.06078614136068,42.29817092103676,0]]},"properties":{"name":"Park St","description":"","wayType":"missed-connections","protectionLevel":1,"routeId":16}}],"type":"FeatureCollection"}');function Cr(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function wr(){const e=new Set;return xr.features.forEach(t=>{e.add(t.properties.routeId)}),Array.from(e)}const br=new Map(wr().map(e=>[e,Cr()]));const Sr=function(){const t=(0,e.useRef)(null),i=(0,e.useRef)(null);return(0,e.useEffect)(()=>(a().accessToken="pk.eyJ1IjoidGxhbmdzZm9yZCIsImEiOiJjbWM4MTkzMGYxaGJxMmxwdGdweTVqb3RhIn0.S0CyG6BWDXPKNyG-mjJQOQ",t.current=new(a().Map)({container:i.current,center:[-71.09549,42.3045],zoom:10.12,style:"mapbox://styles/mapbox/outdoors-v12",maxBounds:[[-71.39417,42.13907],[-70.9029,42.45938]]}),t.current.on("load",()=>{t.current.addSource("boston-landway",{type:"geojson",data:xr}),wr().forEach(e=>{t.current.addLayer({id:"lowlevel"+e,type:"line",source:"boston-landway",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":br.get(e),"line-opacity":1,"line-width":3,"line-dasharray":[.5,2]},filter:["all",["==","routeId",e],["<","protectionLevel",3]]}),t.current.addLayer({id:"midlevel"+e,type:"line",source:"boston-landway",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":br.get(e),"line-opacity":1,"line-width":3},filter:["all",["==","routeId",e],[">=","protectionLevel",3],["<","protectionLevel",6]]}),t.current.addLayer({id:"highlevel"+e,type:"line",source:"boston-landway",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":br.get(e),"line-opacity":1,"line-width":3,"line-gap-width":.6},filter:["all",["==","routeId",e],[">=","protectionLevel",6]]})})}),()=>{t.current.remove()}),[]),(0,Ee.jsx)("div",{id:"root",children:(0,Ee.jsx)("div",{id:"map-container",ref:i})})};t.createRoot(document.getElementById("root")).render((0,Ee.jsx)(e.StrictMode,{children:(0,Ee.jsx)(hr,{children:(0,Ee.jsxs)(Ai,{children:[(0,Ee.jsx)(Ei,{path:"/",element:(0,Ee.jsx)(Sr,{})}),(0,Ee.jsx)(Ei,{path:"/stress-map",element:(0,Ee.jsx)(lt,{})})]})})})),r()})()})();
//# sourceMappingURL=main.fcad1164.js.map